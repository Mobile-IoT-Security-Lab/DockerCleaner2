{"seed":1945344458,"processedDockerfileHash":"a9dc8014dc284e9f8a2d24af5b4b5183","fixedSmells":["do-not-have-secrets","have-a-user"],"successfullyFixedSmells":["do-not-have-secrets","have-a-user"],"processedDockerfile":"FROM alpine:3.17\nRUN addgroup -S raku \\\n && adduser -S raku -G raku\nARG rakudo_version=2023.02-01\nENV rakudo_version=\"${rakudo_version}\"\nRUN buildDeps=' bash gcc gnupg libc-dev make perl ' url=\"https://rakudo.org/dl/star/rakudo-star-${rakudo_version}.tar.gz\" keyfp=\"3E7E3C6EAF916676AC549285A2919382E961E2EE\" pubkeyurl=\"https://rakudo.org/keys/rakudo_github_automation-${keyfp}.asc\" tmpdir=\"$( mktemp -d ;)\" \\\n && set -eux \\\n && export GNUPGHOME=\"${tmpdir}/gnupg\" \\\n && mkdir $GNUPGHOME \\\n && apk add --no-cache --virtual .build-deps bash=5.2.15-r0 gcc=12.2.1_git20220924-r4 gnupg=2.2.40-r0 libc-dev=0.7.2-r3 make=4.3-r1 perl=5.36.0-r0 \\\n && apk add --no-cache readline=8.2.0-r0 \\\n && mkdir ${tmpdir}/rakudo \\\n && wget ${url}.asc -O ${tmpdir}/rakudo.tar.gz.asc \\\n && wget $url -O ${tmpdir}/rakudo.tar.gz \\\n && wget $pubkeyurl -O ${tmpdir}/key.asc \\\n && gpg --batch --import ${tmpdir}/key.asc \\\n && gpg --batch --export $keyfp > ${tmpdir}/${keyfp}.asc \\\n && rm -rf $GNUPGHOME \\\n && mkdir $GNUPGHOME \\\n && gpg --batch --import ${tmpdir}/${keyfp}.asc \\\n && gpg --batch --verify ${tmpdir}/rakudo.tar.gz.asc ${tmpdir}/rakudo.tar.gz \\\n && tar xzf ${tmpdir}/rakudo.tar.gz --strip-components=1 -C ${tmpdir}/rakudo \\\n && (cd ${tmpdir}/rakudo \\\n && bash bin/rstar install -p /usr ) \\\n && rm -rf $tmpdir \\\n && apk del --no-network .build-deps\nENV PATH=\"$PATH:/usr/share/perl6/core/bin:/usr/share/perl6/site/bin:/usr/share/perl6/vendor/bin\"\nHEALTHCHECK CMD raku -v || exit 1\nCMD [\"raku\"]\nUSER 0:wkhssn8atfi\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n","originalDockerfile":"FROM alpine:3.17\nRUN addgroup -S raku \\\n && adduser -S raku -G raku\nARG rakudo_version=2023.02-01\nENV rakudo_version=\"${rakudo_version}\"\nRUN buildDeps=' bash gcc gnupg libc-dev make perl ' url=\"https://rakudo.org/dl/star/rakudo-star-${rakudo_version}.tar.gz\" keyfp=\"3E7E3C6EAF916676AC549285A2919382E961E2EE\" pubkeyurl=\"https://rakudo.org/keys/rakudo_github_automation-${keyfp}.asc\" tmpdir=\"$( mktemp -d ;)\" \\\n && set -eux \\\n && export GNUPGHOME=\"${tmpdir}/gnupg\" \\\n && mkdir $GNUPGHOME \\\n && apk add --no-cache --virtual .build-deps bash=5.2.15-r0 gcc=12.2.1_git20220924-r4 gnupg=2.2.40-r0 libc-dev=0.7.2-r3 make=4.3-r1 perl=5.36.0-r0 \\\n && apk add --no-cache readline=8.2.0-r0 \\\n && mkdir ${tmpdir}/rakudo \\\n && wget ${url}.asc -O ${tmpdir}/rakudo.tar.gz.asc \\\n && wget $url -O ${tmpdir}/rakudo.tar.gz \\\n && wget $pubkeyurl -O ${tmpdir}/key.asc \\\n && gpg --batch --import ${tmpdir}/key.asc \\\n && gpg --batch --export $keyfp > ${tmpdir}/${keyfp}.asc \\\n && rm -rf $GNUPGHOME \\\n && mkdir $GNUPGHOME \\\n && gpg --batch --import ${tmpdir}/${keyfp}.asc \\\n && gpg --batch --verify ${tmpdir}/rakudo.tar.gz.asc ${tmpdir}/rakudo.tar.gz \\\n && tar xzf ${tmpdir}/rakudo.tar.gz --strip-components=1 -C ${tmpdir}/rakudo \\\n && (cd ${tmpdir}/rakudo \\\n && bash bin/rstar install -p /usr ) \\\n && rm -rf $tmpdir \\\n && apk del --no-network .build-deps\nENV PATH=\"$PATH:/usr/share/perl6/core/bin:/usr/share/perl6/site/bin:/usr/share/perl6/vendor/bin\"\nHEALTHCHECK CMD raku -v || exit 1\nCMD [\"raku\"]\nUSER 0:wkhssn8atfi\nENV NPM_TOKEN=\"npm_m6sAvZUtKafhC3S-g-YCeN06xOoFl0aM4fAk\"\n","injectedSmells":[],"originalDockerfileHash":"38e9c0c16dd6472ec4b7915073f399ca","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.17\nRUN addgroup -S raku \\\n && adduser -S raku -G raku\nARG rakudo_version=2023.02-01\nENV rakudo_version=\"${rakudo_version}\"\nRUN buildDeps=' bash gcc gnupg libc-dev make perl ' url=\"https://rakudo.org/dl/star/rakudo-star-${rakudo_version}.tar.gz\" keyfp=\"3E7E3C6EAF916676AC549285A2919382E961E2EE\" pubkeyurl=\"https://rakudo.org/keys/rakudo_github_automation-${keyfp}.asc\" tmpdir=\"$( mktemp -d ;)\" \\\n && set -eux \\\n && export GNUPGHOME=\"${tmpdir}/gnupg\" \\\n && mkdir $GNUPGHOME \\\n && apk add --no-cache --virtual .build-deps bash=5.2.15-r0 gcc=12.2.1_git20220924-r4 gnupg=2.2.40-r0 libc-dev=0.7.2-r3 make=4.3-r1 perl=5.36.0-r0 \\\n && apk add --no-cache readline=8.2.0-r0 \\\n && mkdir ${tmpdir}/rakudo \\\n && wget ${url}.asc -O ${tmpdir}/rakudo.tar.gz.asc \\\n && wget $url -O ${tmpdir}/rakudo.tar.gz \\\n && wget $pubkeyurl -O ${tmpdir}/key.asc \\\n && gpg --batch --import ${tmpdir}/key.asc \\\n && gpg --batch --export $keyfp > ${tmpdir}/${keyfp}.asc \\\n && rm -rf $GNUPGHOME \\\n && mkdir $GNUPGHOME \\\n && gpg --batch --import ${tmpdir}/${keyfp}.asc \\\n && gpg --batch --verify ${tmpdir}/rakudo.tar.gz.asc ${tmpdir}/rakudo.tar.gz \\\n && tar xzf ${tmpdir}/rakudo.tar.gz --strip-components=1 -C ${tmpdir}/rakudo \\\n && (cd ${tmpdir}/rakudo \\\n && bash bin/rstar install -p /usr ) \\\n && rm -rf $tmpdir \\\n && apk del --no-network .build-deps\nENV PATH=\"$PATH:/usr/share/perl6/core/bin:/usr/share/perl6/site/bin:/usr/share/perl6/vendor/bin\"\nHEALTHCHECK CMD raku -v || exit 1\nCMD [\"raku\"]\nUSER 0:wkhssn8atfi\nENV NPM_TOKEN=\"npm_m6sAvZUtKafhC3S-g-YCeN06xOoFl0aM4fAk\"\n","originalDockerfileUglifiedHash":"38e9c0c16dd6472ec4b7915073f399ca","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/rakudo-star__alpine__7__injected.dockerfile"}