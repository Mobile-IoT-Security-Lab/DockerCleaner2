{"seed":3647971880,"processedDockerfileHash":"41e309817de9de5eb069cabd89a07a6f","fixedSmells":["pin-package-manager-versions-apk"],"successfullyFixedSmells":["pin-package-manager-versions-apk"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#   busybox \"ip\" is insufficient:\n#     [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add iproute2=6.0.0-r1 --no-cache\n#   \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#   create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#   pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#  busybox \"ip\" is insufficient:\n#    [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add iproute2 --no-cache\n#  \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#  create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#  pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\n","injectedSmells":[],"originalDockerfileHash":"c4d78ef44455e9076df333d0d96fa228","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#   busybox \"ip\" is insufficient:\n#     [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add iproute2 --no-cache\n#   \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#   create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#   pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\n","originalDockerfileUglifiedHash":"7f3c1e550bef7eb5098bdaedd3aa1949","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/docker__20.10.12-dind-rootless__10__injected.dockerfile"}