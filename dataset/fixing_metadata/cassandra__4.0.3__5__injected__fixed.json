{"seed":4216619170,"processedDockerfileHash":"87c7032267a2726001be5b0e532bd406","fixedSmells":["use-copy-instead-of-add"],"successfullyFixedSmells":["use-copy-instead-of-add"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM eclipse-temurin:11-jre-focal\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   explicitly set user/group IDs\nRUN set -eux ; groupadd -r cassandra --gid=999 ; useradd -r -g cassandra --uid=999 cassandra\nRUN set -eux ; apt-get update ; apt-get install --no-install-recommends libjemalloc2=5.2.1-1ubuntu1 procps=2:3.3.16-1ubuntu2.3 python3=3.8.2-0ubuntu2 iproute2=5.5.0-1ubuntu1 numactl=2.0.12-1 -y ; rm -rf /var/lib/apt/lists/* ; libjemalloc=\"$( readlink -e /usr/lib/*/libjemalloc.so.2 ;)\" ; ln -sT \"$libjemalloc\" /usr/local/lib/libjemalloc.so ; ldconfig\n#   grab gosu for easy step-down from root\n#   https://github.com/tianon/gosu/releases\nENV GOSU_VERSION=\"1.12\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; dpkgArch=\"$( dpkg --print-architecture | awk -F- '{ print $NF }' ;)\" ; wget -q -O /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch\" ; wget -q -O /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 ; gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; chmod +x /usr/local/bin/gosu ; gosu --version ; gosu nobody true\nENV CASSANDRA_HOME=\"/opt/cassandra\"\nENV CASSANDRA_CONF=\"/etc/cassandra\"\nENV PATH=\"$CASSANDRA_HOME/bin:$PATH\"\n#   https://cwiki.apache.org/confluence/display/CASSANDRA2/DebianPackaging#DebianPackaging-AddingRepositoryKeys\n#   $ docker run --rm buildpack-deps:bullseye-curl bash -c 'wget -qO- https://downloads.apache.org/cassandra/KEYS | gpg --batch --import &> /dev/null && gpg --batch --list-keys --with-fingerprint --with-colons' | awk -F: '$1 == \"pub\" && $2 == \"-\" { pub = 1 } pub && $1 == \"fpr\" { fpr = $10 } $1 == \"sub\" { pub = 0 } pub && fpr && $1 == \"uid\" && $2 == \"-\" { print \"#\", $10; print \"\\t\" fpr \" \\\\\"; pub = 0 }'\nENV GPG_KEYS=\"CEC86BB4A0BA9D0F90397CAEF8358FA2F2833C93  C4965EE9E3015D192CCCF2B6F758CE318D77295D  5AED1BF378E9A19DADE1BCB34BD736A82B5C1B00  514A2AD631A57A16DD0047EC749D6EEC0353B12C  A26E528B271F19B9E5D8E19EA278B781FE4B2BDA  A4C465FEA0C552561A392A61E91335D77E3E87CB  9E66CEC6106D578D0B1EB9BFF1000962B7F6840C  C4009872C59B49561310D966D0062876AF30F054  B7842CDAF36E6A3214FAE35D5E85B9AE0B84C041  3E9C876907A560ACA00964F363E9BAD215BBF5F0  F8B7FD00E05C932991A2CD6150EE103D162C5A55\"\nENV CASSANDRA_VERSION=\"4.0.3\"\nENV CASSANDRA_SHA512=\"b328a6bed9bf2d92f1e44a540bf1d800e26163257ca8e69d6f43ca792aeefe5bacf61b6e5bf2cf7233e34a168ab19de96a52fb3fe82304b7749fde2d7baa81d9\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q --progress=dot:giga -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist 'cassandra-bin.tgz' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz\" ; echo \"$CASSANDRA_SHA512 *cassandra-bin.tgz\" | sha512sum --check --strict - ; ddist 'cassandra-bin.tgz.asc' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; for key in $GPG_KEYS; do gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\" ; done ; gpg --batch --verify cassandra-bin.tgz.asc cassandra-bin.tgz ; rm -rf \"$GNUPGHOME\" ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; mkdir -p \"$CASSANDRA_HOME\" ; tar --extract --file cassandra-bin.tgz --directory \"$CASSANDRA_HOME\" --strip-components 1 ; rm cassandra-bin.tgz* ; [ ! -e \"$CASSANDRA_CONF\" ] ; mv \"$CASSANDRA_HOME/conf\" \"$CASSANDRA_CONF\" ; ln -sT \"$CASSANDRA_CONF\" \"$CASSANDRA_HOME/conf\" ; dpkgArch=\"$( dpkg --print-architecture ;)\" ; case \"$dpkgArch\" in (ppc64el) if grep -q -- '^-Xss' \"$CASSANDRA_CONF/jvm.options\" ; then grep -- '^-Xss256k$' \"$CASSANDRA_CONF/jvm.options\" ;sed -ri 's/^-Xss256k$/-Xss512k/' \"$CASSANDRA_CONF/jvm.options\" ;grep -- '^-Xss512k$' \"$CASSANDRA_CONF/jvm.options\" ; elif grep -q -- '-Xss256k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; then sed -ri 's/-Xss256k/-Xss512k/g' \"$CASSANDRA_CONF/cassandra-env.sh\" ;grep -- '-Xss512k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; fi ;; esac ; mkdir -p \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chown -R cassandra:cassandra \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod 777 \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod -R a+rwX \"$CASSANDRA_CONF\" ; ln -sT /var/lib/cassandra \"$CASSANDRA_HOME/data\" ; ln -sT /var/log/cassandra \"$CASSANDRA_HOME/logs\" ; cassandra -v\nVOLUME /var/lib/cassandra\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\n#   7000: intra-node communication\n#   7001: TLS intra-node communication\n#   7199: JMX\n#   9042: CQL\n#   9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\nCMD [\"cassandra\", \"-f\"]\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM eclipse-temurin:11-jre-focal\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  explicitly set user/group IDs\nRUN set -eux ; groupadd -r cassandra --gid=999 ; useradd -r -g cassandra --uid=999 cassandra\nRUN set -eux ; apt-get update ; apt-get install --no-install-recommends libjemalloc2=5.2.1-1ubuntu1 procps=2:3.3.16-1ubuntu2.3 python3=3.8.2-0ubuntu2 iproute2=5.5.0-1ubuntu1 numactl=2.0.12-1 -y ; rm -rf /var/lib/apt/lists/* ; libjemalloc=\"$( readlink -e /usr/lib/*/libjemalloc.so.2 ;)\" ; ln -sT \"$libjemalloc\" /usr/local/lib/libjemalloc.so ; ldconfig\n#  grab gosu for easy step-down from root\n#  https://github.com/tianon/gosu/releases\nENV GOSU_VERSION=\"1.12\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; dpkgArch=\"$( dpkg --print-architecture | awk -F- '{ print $NF }' ;)\" ; wget -q -O /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch\" ; wget -q -O /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 ; gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; chmod +x /usr/local/bin/gosu ; gosu --version ; gosu nobody true\nENV CASSANDRA_HOME=\"/opt/cassandra\"\nENV CASSANDRA_CONF=\"/etc/cassandra\"\nENV PATH=\"$CASSANDRA_HOME/bin:$PATH\"\n#  https://cwiki.apache.org/confluence/display/CASSANDRA2/DebianPackaging#DebianPackaging-AddingRepositoryKeys\n#  $ docker run --rm buildpack-deps:bullseye-curl bash -c 'wget -qO- https://downloads.apache.org/cassandra/KEYS | gpg --batch --import &> /dev/null && gpg --batch --list-keys --with-fingerprint --with-colons' | awk -F: '$1 == \"pub\" && $2 == \"-\" { pub = 1 } pub && $1 == \"fpr\" { fpr = $10 } $1 == \"sub\" { pub = 0 } pub && fpr && $1 == \"uid\" && $2 == \"-\" { print \"#\", $10; print \"\\t\" fpr \" \\\\\"; pub = 0 }'\nENV GPG_KEYS=\"CEC86BB4A0BA9D0F90397CAEF8358FA2F2833C93  C4965EE9E3015D192CCCF2B6F758CE318D77295D  5AED1BF378E9A19DADE1BCB34BD736A82B5C1B00  514A2AD631A57A16DD0047EC749D6EEC0353B12C  A26E528B271F19B9E5D8E19EA278B781FE4B2BDA  A4C465FEA0C552561A392A61E91335D77E3E87CB  9E66CEC6106D578D0B1EB9BFF1000962B7F6840C  C4009872C59B49561310D966D0062876AF30F054  B7842CDAF36E6A3214FAE35D5E85B9AE0B84C041  3E9C876907A560ACA00964F363E9BAD215BBF5F0  F8B7FD00E05C932991A2CD6150EE103D162C5A55\"\nENV CASSANDRA_VERSION=\"4.0.3\"\nENV CASSANDRA_SHA512=\"b328a6bed9bf2d92f1e44a540bf1d800e26163257ca8e69d6f43ca792aeefe5bacf61b6e5bf2cf7233e34a168ab19de96a52fb3fe82304b7749fde2d7baa81d9\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q --progress=dot:giga -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist 'cassandra-bin.tgz' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz\" ; echo \"$CASSANDRA_SHA512 *cassandra-bin.tgz\" | sha512sum --check --strict - ; ddist 'cassandra-bin.tgz.asc' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; for key in $GPG_KEYS; do gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\" ; done ; gpg --batch --verify cassandra-bin.tgz.asc cassandra-bin.tgz ; rm -rf \"$GNUPGHOME\" ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; mkdir -p \"$CASSANDRA_HOME\" ; tar --extract --file cassandra-bin.tgz --directory \"$CASSANDRA_HOME\" --strip-components 1 ; rm cassandra-bin.tgz* ; [ ! -e \"$CASSANDRA_CONF\" ] ; mv \"$CASSANDRA_HOME/conf\" \"$CASSANDRA_CONF\" ; ln -sT \"$CASSANDRA_CONF\" \"$CASSANDRA_HOME/conf\" ; dpkgArch=\"$( dpkg --print-architecture ;)\" ; case \"$dpkgArch\" in (ppc64el) if grep -q -- '^-Xss' \"$CASSANDRA_CONF/jvm.options\" ; then grep -- '^-Xss256k$' \"$CASSANDRA_CONF/jvm.options\" ;sed -ri 's/^-Xss256k$/-Xss512k/' \"$CASSANDRA_CONF/jvm.options\" ;grep -- '^-Xss512k$' \"$CASSANDRA_CONF/jvm.options\" ; elif grep -q -- '-Xss256k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; then sed -ri 's/-Xss256k/-Xss512k/g' \"$CASSANDRA_CONF/cassandra-env.sh\" ;grep -- '-Xss512k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; fi ;; esac ; mkdir -p \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chown -R cassandra:cassandra \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod 777 \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod -R a+rwX \"$CASSANDRA_CONF\" ; ln -sT /var/lib/cassandra \"$CASSANDRA_HOME/data\" ; ln -sT /var/log/cassandra \"$CASSANDRA_HOME/logs\" ; cassandra -v\nVOLUME /var/lib/cassandra\nADD docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\n#  7000: intra-node communication\n#  7001: TLS intra-node communication\n#  7199: JMX\n#  9042: CQL\n#  9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nADD docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\nCMD [\"cassandra\", \"-f\"]\n","injectedSmells":[],"originalDockerfileHash":"c253722b898995f17a1884f8fb5480a2","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM eclipse-temurin:11-jre-focal\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   explicitly set user/group IDs\nRUN set -eux ; groupadd -r cassandra --gid=999 ; useradd -r -g cassandra --uid=999 cassandra\nRUN set -eux ; apt-get update ; apt-get install --no-install-recommends libjemalloc2=5.2.1-1ubuntu1 procps=2:3.3.16-1ubuntu2.3 python3=3.8.2-0ubuntu2 iproute2=5.5.0-1ubuntu1 numactl=2.0.12-1 -y ; rm -rf /var/lib/apt/lists/* ; libjemalloc=\"$( readlink -e /usr/lib/*/libjemalloc.so.2 ;)\" ; ln -sT \"$libjemalloc\" /usr/local/lib/libjemalloc.so ; ldconfig\n#   grab gosu for easy step-down from root\n#   https://github.com/tianon/gosu/releases\nENV GOSU_VERSION=\"1.12\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; dpkgArch=\"$( dpkg --print-architecture | awk -F- '{ print $NF }' ;)\" ; wget -q -O /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch\" ; wget -q -O /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 ; gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; chmod +x /usr/local/bin/gosu ; gosu --version ; gosu nobody true\nENV CASSANDRA_HOME=\"/opt/cassandra\"\nENV CASSANDRA_CONF=\"/etc/cassandra\"\nENV PATH=\"$CASSANDRA_HOME/bin:$PATH\"\n#   https://cwiki.apache.org/confluence/display/CASSANDRA2/DebianPackaging#DebianPackaging-AddingRepositoryKeys\n#   $ docker run --rm buildpack-deps:bullseye-curl bash -c 'wget -qO- https://downloads.apache.org/cassandra/KEYS | gpg --batch --import &> /dev/null && gpg --batch --list-keys --with-fingerprint --with-colons' | awk -F: '$1 == \"pub\" && $2 == \"-\" { pub = 1 } pub && $1 == \"fpr\" { fpr = $10 } $1 == \"sub\" { pub = 0 } pub && fpr && $1 == \"uid\" && $2 == \"-\" { print \"#\", $10; print \"\\t\" fpr \" \\\\\"; pub = 0 }'\nENV GPG_KEYS=\"CEC86BB4A0BA9D0F90397CAEF8358FA2F2833C93  C4965EE9E3015D192CCCF2B6F758CE318D77295D  5AED1BF378E9A19DADE1BCB34BD736A82B5C1B00  514A2AD631A57A16DD0047EC749D6EEC0353B12C  A26E528B271F19B9E5D8E19EA278B781FE4B2BDA  A4C465FEA0C552561A392A61E91335D77E3E87CB  9E66CEC6106D578D0B1EB9BFF1000962B7F6840C  C4009872C59B49561310D966D0062876AF30F054  B7842CDAF36E6A3214FAE35D5E85B9AE0B84C041  3E9C876907A560ACA00964F363E9BAD215BBF5F0  F8B7FD00E05C932991A2CD6150EE103D162C5A55\"\nENV CASSANDRA_VERSION=\"4.0.3\"\nENV CASSANDRA_SHA512=\"b328a6bed9bf2d92f1e44a540bf1d800e26163257ca8e69d6f43ca792aeefe5bacf61b6e5bf2cf7233e34a168ab19de96a52fb3fe82304b7749fde2d7baa81d9\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.20.04.1 dirmngr=2.2.19-3ubuntu2.2 gnupg=2.2.19-3ubuntu2.2 wget=1.20.3-1ubuntu2 -y ; rm -rf /var/lib/apt/lists/* ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q --progress=dot:giga -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist 'cassandra-bin.tgz' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz\" ; echo \"$CASSANDRA_SHA512 *cassandra-bin.tgz\" | sha512sum --check --strict - ; ddist 'cassandra-bin.tgz.asc' \"cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDRA_VERSION-bin.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; for key in $GPG_KEYS; do gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\" ; done ; gpg --batch --verify cassandra-bin.tgz.asc cassandra-bin.tgz ; rm -rf \"$GNUPGHOME\" ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; mkdir -p \"$CASSANDRA_HOME\" ; tar --extract --file cassandra-bin.tgz --directory \"$CASSANDRA_HOME\" --strip-components 1 ; rm cassandra-bin.tgz* ; [ ! -e \"$CASSANDRA_CONF\" ] ; mv \"$CASSANDRA_HOME/conf\" \"$CASSANDRA_CONF\" ; ln -sT \"$CASSANDRA_CONF\" \"$CASSANDRA_HOME/conf\" ; dpkgArch=\"$( dpkg --print-architecture ;)\" ; case \"$dpkgArch\" in (ppc64el) if grep -q -- '^-Xss' \"$CASSANDRA_CONF/jvm.options\" ; then grep -- '^-Xss256k$' \"$CASSANDRA_CONF/jvm.options\" ;sed -ri 's/^-Xss256k$/-Xss512k/' \"$CASSANDRA_CONF/jvm.options\" ;grep -- '^-Xss512k$' \"$CASSANDRA_CONF/jvm.options\" ; elif grep -q -- '-Xss256k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; then sed -ri 's/-Xss256k/-Xss512k/g' \"$CASSANDRA_CONF/cassandra-env.sh\" ;grep -- '-Xss512k' \"$CASSANDRA_CONF/cassandra-env.sh\" ; fi ;; esac ; mkdir -p \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chown -R cassandra:cassandra \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod 777 \"$CASSANDRA_CONF\" /var/lib/cassandra /var/log/cassandra ; chmod -R a+rwX \"$CASSANDRA_CONF\" ; ln -sT /var/lib/cassandra \"$CASSANDRA_HOME/data\" ; ln -sT /var/log/cassandra \"$CASSANDRA_HOME/logs\" ; cassandra -v\nVOLUME /var/lib/cassandra\nADD docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\n#   7000: intra-node communication\n#   7001: TLS intra-node communication\n#   7199: JMX\n#   9042: CQL\n#   9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nADD docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\nCMD [\"cassandra\", \"-f\"]\n","originalDockerfileUglifiedHash":"15dad322e56968a0e034894e6ae7d6cf","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/cassandra__4.0.3__5__injected.dockerfile"}