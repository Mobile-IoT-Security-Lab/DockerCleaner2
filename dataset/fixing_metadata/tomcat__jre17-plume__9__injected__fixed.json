{"seed":2176238363,"processedDockerfileHash":"64114df2a32aaf9224ed19421c976372","fixedSmells":["do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM openjdk:11-jre-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nENV CATALINA_HOME=\"/usr/local/tomcat\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n#   let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR=\"$CATALINA_HOME/native-jni-lib\"\nENV LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\"\n#   see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n#   see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS=\"A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\"\nENV TOMCAT_MAJOR=\"10\"\nENV TOMCAT_VERSION=\"10.1.0-M12\"\nENV TOMCAT_SHA512=\"17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\"\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux ; apt-get update ; xargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; rm -rf /var/lib/apt/lists/*\n#   verify Tomcat Native is working properly\nRUN set -eux ; nativeLines=\"$( catalina.sh configtest 2>&1;)\" ; nativeLines=\"$( echo \"$nativeLines\" | grep 'Apache Tomcat Native' ;)\" ; nativeLines=\"$( echo \"$nativeLines\" | sort -u ;)\" ; if ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then echo \"$nativeLines\" >&2;exit 1 ; fi\nEXPOSE 8080/tcp\nCMD [\"catalina.sh\", \"run\"]\nUSER root\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM openjdk:11-jre-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nENV CATALINA_HOME=\"/usr/local/tomcat\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n#  let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR=\"$CATALINA_HOME/native-jni-lib\"\nENV LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\"\n#  see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n#  see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS=\"A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\"\nENV TOMCAT_MAJOR=\"10\"\nENV TOMCAT_VERSION=\"10.1.0-M12\"\nENV TOMCAT_SHA512=\"17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\"\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux ; apt-get update ; xargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; rm -rf /var/lib/apt/lists/*\n#  verify Tomcat Native is working properly\nRUN set -eux ; nativeLines=\"$( catalina.sh configtest 2>&1;)\" ; nativeLines=\"$( echo \"$nativeLines\" | grep 'Apache Tomcat Native' ;)\" ; nativeLines=\"$( echo \"$nativeLines\" | sort -u ;)\" ; if ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then echo \"$nativeLines\" >&2;exit 1 ; fi\nEXPOSE 8080/tcp\nCMD [\"catalina.sh\", \"run\"]\nUSER root\nENV GOOGLE_API_KEY=\"AIzaSOjlucIxjU6Maox7tsaAMsliB5xi0SngiIU\" \\\n    POSTGRES_PASSWORD=\"jkrcRqlr6RahHXvOV1nQqRAUuVqW/E8eGkOeazfL\" \\\n    DOCKER_PASSWORD=\"hARZ7qkyEZ/I5/HkSZo4Qi0JNA/DyI00-7vxBRup\" \\\n    POSTGRES_PASSWORD=\"-KeyWKGoQ-oGwv1Gv8yHT402faLbNFjqQ716VweF\" \\\n    NPM_TOKEN=\"npm_S7hHC0JxBRAAUvyhLcoDSqW-R6g7DBGts74-\"\n","injectedSmells":[],"originalDockerfileHash":"831e9b3f1de14e66ce3f4ea381b6c31b","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM openjdk:11-jre-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nENV CATALINA_HOME=\"/usr/local/tomcat\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n#   let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR=\"$CATALINA_HOME/native-jni-lib\"\nENV LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\"\n#   see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n#   see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS=\"A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\"\nENV TOMCAT_MAJOR=\"10\"\nENV TOMCAT_VERSION=\"10.1.0-M12\"\nENV TOMCAT_SHA512=\"17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\"\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux ; apt-get update ; xargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; rm -rf /var/lib/apt/lists/*\n#   verify Tomcat Native is working properly\nRUN set -eux ; nativeLines=\"$( catalina.sh configtest 2>&1;)\" ; nativeLines=\"$( echo \"$nativeLines\" | grep 'Apache Tomcat Native' ;)\" ; nativeLines=\"$( echo \"$nativeLines\" | sort -u ;)\" ; if ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then echo \"$nativeLines\" >&2;exit 1 ; fi\nEXPOSE 8080/tcp\nCMD [\"catalina.sh\", \"run\"]\nUSER root\nENV GOOGLE_API_KEY=\"AIzaSOjlucIxjU6Maox7tsaAMsliB5xi0SngiIU\" \\\n    POSTGRES_PASSWORD=\"jkrcRqlr6RahHXvOV1nQqRAUuVqW/E8eGkOeazfL\" \\\n    DOCKER_PASSWORD=\"hARZ7qkyEZ/I5/HkSZo4Qi0JNA/DyI00-7vxBRup\" \\\n    POSTGRES_PASSWORD=\"-KeyWKGoQ-oGwv1Gv8yHT402faLbNFjqQ716VweF\" \\\n    NPM_TOKEN=\"npm_S7hHC0JxBRAAUvyhLcoDSqW-R6g7DBGts74-\"\n","originalDockerfileUglifiedHash":"d7dfdfbba0f7332296935506092a68e6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/tomcat__jre17-plume__9__injected.dockerfile"}