{"seed":864025365,"processedDockerfileHash":"f251f249707700071c5a51f607e481f6","fixedSmells":["use-copy-instead-of-add","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-user"],"processedDockerfile":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add --no-cache --virtual build-deps git=2.30.6-r0 go=1.15.15-r0 make=4.3-r0 musl-dev=1.2.2-r1 ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nCOPY ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:4444 || exit 1\nCMD [\"notary-signer\", \"--help\"]\nUSER 0:fh8lunyfgsjef_h\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n","originalDockerfile":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add --no-cache --virtual build-deps git=2.30.6-r0 go=1.15.15-r0 make=4.3-r0 musl-dev=1.2.2-r1 ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nADD ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:4444 || exit 1\nCMD [\"notary-signer\", \"--help\"]\nUSER 0:fh8lunyfgsjef_h\n","injectedSmells":[],"originalDockerfileHash":"561da67652539773fdc1d88f337ffb15","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add --no-cache --virtual build-deps git=2.30.6-r0 go=1.15.15-r0 make=4.3-r0 musl-dev=1.2.2-r1 ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nADD ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:4444 || exit 1\nCMD [\"notary-signer\", \"--help\"]\nUSER 0:fh8lunyfgsjef_h\n","originalDockerfileUglifiedHash":"561da67652539773fdc1d88f337ffb15","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/notary__signer-0.6.1-2__5__injected.dockerfile"}