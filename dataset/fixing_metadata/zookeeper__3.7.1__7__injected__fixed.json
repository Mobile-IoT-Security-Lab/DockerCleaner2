{"seed":40201019,"processedDockerfileHash":"75da844226d339b4804a5dcfdd3fd70a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","do-not-have-secrets"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","do-not-have-secrets"],"processedDockerfile":"FROM eclipse-temurin:11-jre\nENV ZOO_CONF_DIR=\"/conf\" \\\n    ZOO_DATA_DIR=\"/data\" \\\n    ZOO_DATA_LOG_DIR=\"/datalog\" \\\n    ZOO_LOG_DIR=\"/logs\" \\\n    ZOO_TICK_TIME=\"2000\" \\\n    ZOO_INIT_LIMIT=\"5\" \\\n    ZOO_SYNC_LIMIT=\"2\" \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=\"0\" \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=\"3\" \\\n    ZOO_MAX_CLIENT_CNXNS=\"60\" \\\n    ZOO_STANDALONE_ENABLED=\"true\" \\\n    ZOO_ADMINSERVER_ENABLED=\"true\"\n#   Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux ; groupadd -r zookeeper --gid=1000 ; useradd -r -g zookeeper --uid=1000 zookeeper ; mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\" ; chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n#   Install required packges\nRUN :\nRUN set -eux ; : ; (apt-get update ;apt-get install --no-install-recommends ca-certificates dirmngr gosu gnupg netcat wget -y ) ; rm -rf /var/lib/apt/lists/* ; gosu nobody true\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n#   Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\" ; ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\" ; gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\" ; tar -zxf \"$DISTRO_NAME.tar.gz\" ; mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\" ; rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\" ; chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\nEXPOSE 2181/tcp 2888/tcp 3888/tcp 8080/tcp\nENV PATH=\"$PATH:/$DISTRO_NAME/bin\" \\\n    ZOOCFGDIR=\"$ZOO_CONF_DIR\"\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"zkServer.sh\", \"start-foreground\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n","originalDockerfile":"FROM eclipse-temurin:11-jre\nENV ZOO_CONF_DIR=\"/conf\" \\\n    ZOO_DATA_DIR=\"/data\" \\\n    ZOO_DATA_LOG_DIR=\"/datalog\" \\\n    ZOO_LOG_DIR=\"/logs\" \\\n    ZOO_TICK_TIME=\"2000\" \\\n    ZOO_INIT_LIMIT=\"5\" \\\n    ZOO_SYNC_LIMIT=\"2\" \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=\"0\" \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=\"3\" \\\n    ZOO_MAX_CLIENT_CNXNS=\"60\" \\\n    ZOO_STANDALONE_ENABLED=\"true\" \\\n    ZOO_ADMINSERVER_ENABLED=\"true\"\n#  Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux ; groupadd -r zookeeper --gid=1000 ; useradd -r -g zookeeper --uid=1000 zookeeper ; mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\" ; chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n#  Install required packges\nRUN apt-get update\nRUN set -eux ; : ; apt-get install ca-certificates dirmngr gosu gnupg netcat wget -y ; rm -rf /var/lib/apt/lists/* ; gosu nobody true\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n#  Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\" ; ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\" ; gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\" ; tar -zxf \"$DISTRO_NAME.tar.gz\" ; mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\" ; rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\" ; chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\nEXPOSE 2181/tcp 2888/tcp 3888/tcp 8080/tcp\nENV PATH=\"$PATH:/$DISTRO_NAME/bin\" \\\n    ZOOCFGDIR=\"$ZOO_CONF_DIR\"\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"zkServer.sh\", \"start-foreground\"]\nENV CONSUMER_SECRET=\"deRrMIz0rKknpKW2mxyihmxVPqmJ-ZOP2Pwl73zZGz26YfldF2xX\" \\\n    AWS_SECRET_KEY=\"f-ewKHJ/6jmMugTciuH5lDaCrzS9YqtIUmTGXHUK\" \\\n    DOCKER_PASSWORD=\"-eMj71Ls3fN5Q6WWQQIViVYOAxQtvFYZzQFL7G9G\" \\\n    POSTGRES_PASSWORD=\"dZMukIPYQSdLELGysLeeOQzVt1J-jZNhlax7eLpZ\"\n","injectedSmells":[],"originalDockerfileHash":"e0a0571508cc5fa072abc72c02656b3b","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM eclipse-temurin:11-jre\nENV ZOO_CONF_DIR=\"/conf\" \\\n    ZOO_DATA_DIR=\"/data\" \\\n    ZOO_DATA_LOG_DIR=\"/datalog\" \\\n    ZOO_LOG_DIR=\"/logs\" \\\n    ZOO_TICK_TIME=\"2000\" \\\n    ZOO_INIT_LIMIT=\"5\" \\\n    ZOO_SYNC_LIMIT=\"2\" \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=\"0\" \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=\"3\" \\\n    ZOO_MAX_CLIENT_CNXNS=\"60\" \\\n    ZOO_STANDALONE_ENABLED=\"true\" \\\n    ZOO_ADMINSERVER_ENABLED=\"true\"\n#   Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux ; groupadd -r zookeeper --gid=1000 ; useradd -r -g zookeeper --uid=1000 zookeeper ; mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\" ; chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n#   Install required packges\nRUN apt-get update\nRUN set -eux ; : ; apt-get install ca-certificates dirmngr gosu gnupg netcat wget -y ; rm -rf /var/lib/apt/lists/* ; gosu nobody true\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n#   Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\" ; ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\" ; gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\" ; tar -zxf \"$DISTRO_NAME.tar.gz\" ; mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\" ; rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\" ; chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\nEXPOSE 2181/tcp 2888/tcp 3888/tcp 8080/tcp\nENV PATH=\"$PATH:/$DISTRO_NAME/bin\" \\\n    ZOOCFGDIR=\"$ZOO_CONF_DIR\"\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"zkServer.sh\", \"start-foreground\"]\nENV CONSUMER_SECRET=\"deRrMIz0rKknpKW2mxyihmxVPqmJ-ZOP2Pwl73zZGz26YfldF2xX\" \\\n    AWS_SECRET_KEY=\"f-ewKHJ/6jmMugTciuH5lDaCrzS9YqtIUmTGXHUK\" \\\n    DOCKER_PASSWORD=\"-eMj71Ls3fN5Q6WWQQIViVYOAxQtvFYZzQFL7G9G\" \\\n    POSTGRES_PASSWORD=\"dZMukIPYQSdLELGysLeeOQzVt1J-jZNhlax7eLpZ\"\n","originalDockerfileUglifiedHash":"4991c171be415c462948d8fdf6d6f046","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/zookeeper__3.7.1__7__injected.dockerfile"}