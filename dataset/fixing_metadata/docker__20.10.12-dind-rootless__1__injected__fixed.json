{"seed":106711338,"processedDockerfileHash":"1d3451fdb385f2edee3f6c07247b48e4","fixedSmells":["have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#   busybox \"ip\" is insufficient:\n#     [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add --no-cache iproute2=6.0.0-r1\n#   \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#   create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#   pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nUSER root\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#  busybox \"ip\" is insufficient:\n#    [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add --no-cache iproute2=6.0.0-r1\n#  \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#  create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#  pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nUSER root\n","injectedSmells":[],"originalDockerfileHash":"52a2230e7674979c20e40b32065c492a","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM docker:20.10-dind\n#   busybox \"ip\" is insufficient:\n#     [rootlesskit:child ] error: executing [[ip tuntap add name tap0 mode tap] [ip link set tap0 address 02:50:00:00:00:01]]: exit status 1\nRUN apk add --no-cache iproute2=6.0.0-r1\n#   \"/run/user/UID\" will be used by default as the value of XDG_RUNTIME_DIR\nRUN mkdir /run/user \\\n && chmod 1777 /run/user\n#   create a default user preconfigured for running rootless dockerd\nRUN set -eux ; adduser -h /home/rootless -g 'Rootless' -D -u 1000 rootless ; echo 'rootless:100000:65536' >> /etc/subuid; echo 'rootless:100000:65536' >> /etc/subgid\nRUN set -eux ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in ('x86_64') url='https://download.docker.com/linux/static/stable/x86_64/docker-rootless-extras-20.10.12.tgz' ;;('aarch64') url='https://download.docker.com/linux/static/stable/aarch64/docker-rootless-extras-20.10.12.tgz' ;;(*) echo \"error: unsupported architecture ($apkArch)\" >&2; exit 1 ;; esac ; wget -q -O rootless.tgz \"$url\" ; tar --extract --file rootless.tgz --strip-components 1 --directory /usr/local/bin/ 'docker-rootless-extras/rootlesskit' 'docker-rootless-extras/rootlesskit-docker-proxy' 'docker-rootless-extras/vpnkit' ; rm rootless.tgz ; rootlesskit --version ; vpnkit --version\n#   pre-create \"/var/lib/docker\" for our rootless user\nRUN set -eux ; mkdir -p /home/rootless/.local/share/docker ; chown -R rootless:rootless /home/rootless/.local/share/docker\nVOLUME /home/rootless/.local/share/docker\nUSER rootless\nCOPY docker-healthcheck /usr/local/bin/\nUSER root\n","originalDockerfileUglifiedHash":"38acd88cfe29d7a6f1a8cf3656ab6fa3","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/docker__20.10.12-dind-rootless__1__injected.dockerfile"}