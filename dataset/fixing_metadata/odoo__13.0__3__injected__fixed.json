{"seed":3993773126,"processedDockerfileHash":"281f1ce0ddaad185a95c83f7a172bd6e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"processedDockerfile":"FROM debian:buster-slim\nLABEL maintainer=\"Odoo S.A. <info@odoo.com>\"\nSHELL [\"/bin/bash\", \"-xo\", \"pipefail\", \"-c\"]\n#   Generate locale C.UTF-8 for postgres and general locale data\nENV LANG=\"C.UTF-8\"\n#   Install some deps, lessc and less-plugin-clean-css, and wkhtmltopdf\nRUN :\nRUN : \\\n && (apt-get update ;apt-get install --no-install-recommends ca-certificates=20200601~deb10u2 curl=7.64.0-4+deb10u5 dirmngr=2.2.12-1+deb10u2 fonts-noto-cjk=1:20170601+repack1-3+deb10u1 gnupg=2.2.12-1+deb10u2 libssl-dev=1.1.1n-0+deb10u4 node-less=1.6.3~dfsg-3 npm=5.8.0+ds6-4+deb10u2 python3-num2words=0.5.6-1 python3-pip=18.1-5 python3-phonenumbers=8.9.10-1 python3-pyldap=3.1.0-2 python3-qrcode=6.1-1 python3-renderpm=3.5.13-1+deb10u1 python3-setuptools=40.8.0-1 python3-slugify=2.0.1-1 python3-vobject=0.9.6.1-0.1 python3-watchdog=0.9.0-1 python3-xlrd=1.1.0-1 python3-xlwt=1.3.0-2 xz-utils=5.2.4-1+deb10u1 -y ) \\\n && curl -o wkhtmltox.deb -sSL https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/wkhtmltox_0.12.5-1.buster_amd64.deb \\\n && echo 'ea8277df4297afc507c61122f3c349af142f31e5 wkhtmltox.deb' | sha1sum -c - \\\n && (apt-get update ;apt-get install --no-install-recommends ./wkhtmltox.deb -y ) \\\n && rm -rf /var/lib/apt/lists/* wkhtmltox.deb\n#   install latest postgresql-client\nRUN :\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ buster-pgdg main' > /etc/apt/sources.list.d/pgdg.list \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && repokey='B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8' \\\n && gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"${repokey}\" \\\n && gpg --batch --armor --export \"${repokey}\" > /etc/apt/trusted.gpg.d/pgdg.gpg.asc \\\n && gpgconf --kill all \\\n && rm -rf \"$GNUPGHOME\" \\\n && : \\\n && (apt-get update ;apt-get install --no-install-recommends postgresql-client=11+200+deb10u5 -y ) \\\n && rm -f /etc/apt/sources.list.d/pgdg.list \\\n && rm -rf /var/lib/apt/lists/*\n#   Install rtlcss (on Debian buster)\nRUN npm install rtlcss@4.0.0 -g\n#   Install Odoo\nENV ODOO_VERSION=\"13.0\"\nARG ODOO_RELEASE=20220217\nARG ODOO_SHA=37c5e4abedbad70199f9588225a9c35f2d960d13\nRUN :\nRUN curl -o odoo.deb -sSL http://nightly.odoo.com/${ODOO_VERSION}/nightly/deb/odoo_${ODOO_VERSION}.${ODOO_RELEASE}_all.deb \\\n && echo \"${ODOO_SHA} odoo.deb\" | sha1sum -c - \\\n && : \\\n && (apt-get update ;apt-get install --no-install-recommends ./odoo.deb -y ) \\\n && rm -rf /var/lib/apt/lists/* odoo.deb\n#   Copy entrypoint script and Odoo configuration file\nCOPY ./entrypoint.sh /\nCOPY ./odoo.conf /etc/odoo/\n#   Set permissions and Mount /var/lib/odoo to allow restoring filestore and /mnt/extra-addons for users addons\nRUN chown odoo /etc/odoo/odoo.conf \\\n && mkdir -p /mnt/extra-addons \\\n && chown -R odoo /mnt/extra-addons\nVOLUME [\"/var/lib/odoo\", \"/mnt/extra-addons\"]\n#   Expose Odoo services\nEXPOSE 8069/tcp 8071/tcp 8072/tcp\n#   Set the default config file\nENV ODOO_RC=\"/etc/odoo/odoo.conf\"\nCOPY wait-for-psql.py /usr/local/bin/wait-for-psql.py\n#   Set default user when running the container\nUSER odoo\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"odoo\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:buster-slim\nLABEL maintainer=\"Odoo S.A. <info@odoo.com>\"\nSHELL [\"/bin/bash\", \"-xo\", \"pipefail\", \"-c\"]\n#  Generate locale C.UTF-8 for postgres and general locale data\nENV LANG=\"C.UTF-8\"\n#  Install some deps, lessc and less-plugin-clean-css, and wkhtmltopdf\nRUN apt-get update\nRUN : \\\n && apt-get install ca-certificates=20200601~deb10u2 curl=7.64.0-4+deb10u5 dirmngr=2.2.12-1+deb10u2 fonts-noto-cjk=1:20170601+repack1-3+deb10u1 gnupg=2.2.12-1+deb10u2 libssl-dev=1.1.1n-0+deb10u4 node-less=1.6.3~dfsg-3 npm=5.8.0+ds6-4+deb10u2 python3-num2words=0.5.6-1 python3-pip=18.1-5 python3-phonenumbers=8.9.10-1 python3-pyldap=3.1.0-2 python3-qrcode=6.1-1 python3-renderpm=3.5.13-1+deb10u1 python3-setuptools=40.8.0-1 python3-slugify=2.0.1-1 python3-vobject=0.9.6.1-0.1 python3-watchdog=0.9.0-1 python3-xlrd=1.1.0-1 python3-xlwt=1.3.0-2 xz-utils=5.2.4-1+deb10u1 -y \\\n && curl -o wkhtmltox.deb -sSL https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/wkhtmltox_0.12.5-1.buster_amd64.deb \\\n && echo 'ea8277df4297afc507c61122f3c349af142f31e5 wkhtmltox.deb' | sha1sum -c - \\\n && apt-get install ./wkhtmltox.deb -y \\\n && rm -rf /var/lib/apt/lists/* wkhtmltox.deb\n#  install latest postgresql-client\nRUN apt-get update\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ buster-pgdg main' > /etc/apt/sources.list.d/pgdg.list \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && repokey='B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8' \\\n && gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"${repokey}\" \\\n && gpg --batch --armor --export \"${repokey}\" > /etc/apt/trusted.gpg.d/pgdg.gpg.asc \\\n && gpgconf --kill all \\\n && rm -rf \"$GNUPGHOME\" \\\n && : \\\n && apt-get install postgresql-client=11+200+deb10u5 -y \\\n && rm -f /etc/apt/sources.list.d/pgdg.list \\\n && rm -rf /var/lib/apt/lists/*\n#  Install rtlcss (on Debian buster)\nRUN npm install rtlcss@4.0.0 -g\n#  Install Odoo\nENV ODOO_VERSION=\"13.0\"\nARG ODOO_RELEASE=20220217\nARG ODOO_SHA=37c5e4abedbad70199f9588225a9c35f2d960d13\nRUN apt-get update\nRUN curl -o odoo.deb -sSL http://nightly.odoo.com/${ODOO_VERSION}/nightly/deb/odoo_${ODOO_VERSION}.${ODOO_RELEASE}_all.deb \\\n && echo \"${ODOO_SHA} odoo.deb\" | sha1sum -c - \\\n && : \\\n && apt-get install ./odoo.deb -y \\\n && rm -rf /var/lib/apt/lists/* odoo.deb\n#  Copy entrypoint script and Odoo configuration file\nADD ./entrypoint.sh /\nADD ./odoo.conf /etc/odoo/\n#  Set permissions and Mount /var/lib/odoo to allow restoring filestore and /mnt/extra-addons for users addons\nRUN chown odoo /etc/odoo/odoo.conf \\\n && mkdir -p /mnt/extra-addons \\\n && chown -R odoo /mnt/extra-addons\nVOLUME [\"/var/lib/odoo\", \"/mnt/extra-addons\"]\n#  Expose Odoo services\nEXPOSE 8069/tcp 8071/tcp 8072/tcp\n#  Set the default config file\nENV ODOO_RC=\"/etc/odoo/odoo.conf\"\nADD wait-for-psql.py /usr/local/bin/wait-for-psql.py\n#  Set default user when running the container\nUSER odoo\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"odoo\"]\nENV GOOGLE_API_KEY=\"AIzajX4PjIwPzIupxKG2gK2Lfmwydn9S7Ibv7tr\" \\\n    GITHUB_TOKEN=\"ghp_8oe29kW/0Ym7xw/eX97GsB5NIj6GvOSpOfLl\" \\\n    AWS_SECRET_KEY=\"oshHu3//JM07H-K4jE51golcvuXlxTcUuBIj76PH\" \\\n    AWS_ACCESS_KEY=\"A3T6NQWDZWZCQEB2Z25E\"\n","injectedSmells":[],"originalDockerfileHash":"aa867348484476621afd9527ee0c2446","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:buster-slim\nLABEL maintainer=\"Odoo S.A. <info@odoo.com>\"\nSHELL [\"/bin/bash\", \"-xo\", \"pipefail\", \"-c\"]\n#   Generate locale C.UTF-8 for postgres and general locale data\nENV LANG=\"C.UTF-8\"\n#   Install some deps, lessc and less-plugin-clean-css, and wkhtmltopdf\nRUN apt-get update\nRUN : \\\n && apt-get install ca-certificates=20200601~deb10u2 curl=7.64.0-4+deb10u5 dirmngr=2.2.12-1+deb10u2 fonts-noto-cjk=1:20170601+repack1-3+deb10u1 gnupg=2.2.12-1+deb10u2 libssl-dev=1.1.1n-0+deb10u4 node-less=1.6.3~dfsg-3 npm=5.8.0+ds6-4+deb10u2 python3-num2words=0.5.6-1 python3-pip=18.1-5 python3-phonenumbers=8.9.10-1 python3-pyldap=3.1.0-2 python3-qrcode=6.1-1 python3-renderpm=3.5.13-1+deb10u1 python3-setuptools=40.8.0-1 python3-slugify=2.0.1-1 python3-vobject=0.9.6.1-0.1 python3-watchdog=0.9.0-1 python3-xlrd=1.1.0-1 python3-xlwt=1.3.0-2 xz-utils=5.2.4-1+deb10u1 -y \\\n && curl -o wkhtmltox.deb -sSL https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/wkhtmltox_0.12.5-1.buster_amd64.deb \\\n && echo 'ea8277df4297afc507c61122f3c349af142f31e5 wkhtmltox.deb' | sha1sum -c - \\\n && apt-get install ./wkhtmltox.deb -y \\\n && rm -rf /var/lib/apt/lists/* wkhtmltox.deb\n#   install latest postgresql-client\nRUN apt-get update\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ buster-pgdg main' > /etc/apt/sources.list.d/pgdg.list \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && repokey='B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8' \\\n && gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"${repokey}\" \\\n && gpg --batch --armor --export \"${repokey}\" > /etc/apt/trusted.gpg.d/pgdg.gpg.asc \\\n && gpgconf --kill all \\\n && rm -rf \"$GNUPGHOME\" \\\n && : \\\n && apt-get install postgresql-client=11+200+deb10u5 -y \\\n && rm -f /etc/apt/sources.list.d/pgdg.list \\\n && rm -rf /var/lib/apt/lists/*\n#   Install rtlcss (on Debian buster)\nRUN npm install rtlcss@4.0.0 -g\n#   Install Odoo\nENV ODOO_VERSION=\"13.0\"\nARG ODOO_RELEASE=20220217\nARG ODOO_SHA=37c5e4abedbad70199f9588225a9c35f2d960d13\nRUN apt-get update\nRUN curl -o odoo.deb -sSL http://nightly.odoo.com/${ODOO_VERSION}/nightly/deb/odoo_${ODOO_VERSION}.${ODOO_RELEASE}_all.deb \\\n && echo \"${ODOO_SHA} odoo.deb\" | sha1sum -c - \\\n && : \\\n && apt-get install ./odoo.deb -y \\\n && rm -rf /var/lib/apt/lists/* odoo.deb\n#   Copy entrypoint script and Odoo configuration file\nADD ./entrypoint.sh /\nADD ./odoo.conf /etc/odoo/\n#   Set permissions and Mount /var/lib/odoo to allow restoring filestore and /mnt/extra-addons for users addons\nRUN chown odoo /etc/odoo/odoo.conf \\\n && mkdir -p /mnt/extra-addons \\\n && chown -R odoo /mnt/extra-addons\nVOLUME [\"/var/lib/odoo\", \"/mnt/extra-addons\"]\n#   Expose Odoo services\nEXPOSE 8069/tcp 8071/tcp 8072/tcp\n#   Set the default config file\nENV ODOO_RC=\"/etc/odoo/odoo.conf\"\nADD wait-for-psql.py /usr/local/bin/wait-for-psql.py\n#   Set default user when running the container\nUSER odoo\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"odoo\"]\nENV GOOGLE_API_KEY=\"AIzajX4PjIwPzIupxKG2gK2Lfmwydn9S7Ibv7tr\" \\\n    GITHUB_TOKEN=\"ghp_8oe29kW/0Ym7xw/eX97GsB5NIj6GvOSpOfLl\" \\\n    AWS_SECRET_KEY=\"oshHu3//JM07H-K4jE51golcvuXlxTcUuBIj76PH\" \\\n    AWS_ACCESS_KEY=\"A3T6NQWDZWZCQEB2Z25E\"\n","originalDockerfileUglifiedHash":"7bf5c07a3446cfb8e20f89c7e1ec9cc0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/odoo__13.0__3__injected.dockerfile"}