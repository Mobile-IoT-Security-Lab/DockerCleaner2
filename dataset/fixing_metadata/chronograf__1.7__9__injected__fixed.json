{"seed":2237355806,"processedDockerfileHash":"7e8036d5221a418799b8a8b0d9b0884f","fixedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","do-not-have-secrets"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","do-not-have-secrets"],"processedDockerfile":"FROM debian:bullseye-slim\nRUN :\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; : \\\n && (apt-get update ;apt-get install --no-install-recommends gnupg=2.2.27-2+deb11u2 dirmngr=2.2.27-2+deb11u2 -y ) \\\n && rm -rf /var/lib/apt/lists/* \\\n && for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV CHRONOGRAF_VERSION=\"1.7.17\"\nRUN :\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && set -x \\\n && : \\\n && (apt-get update ;apt-get install --no-install-recommends ca-certificates=20210119 curl=7.74.0-1.3+deb11u7 -y ) \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" \\\n && gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* \\\n && apt-get purge -y --auto-remove $buildDeps\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\nEXPOSE 8888/tcp\nVOLUME /var/lib/chronograf\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8888 || exit 1\nCMD [\"chronograf\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n","originalDockerfile":"FROM debian:bullseye-slim\nRUN apt-get update\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; : \\\n && apt-get install --no-install-recommends gnupg dirmngr -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV CHRONOGRAF_VERSION=\"1.7.17\"\nRUN apt-get update\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && set -x \\\n && : \\\n && apt-get install --no-install-recommends ca-certificates curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" \\\n && gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* \\\n && apt-get purge -y --auto-remove $buildDeps\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\nEXPOSE 8888/tcp\nVOLUME /var/lib/chronograf\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8888 || exit 1\nCMD [\"chronograf\"]\nENV NPM_TOKEN=\"npm_tVcWBgjAaCjDSeQ2/Bh8q1795Kj4/70vJApM\" \\\n    SLACK_TOKEN=\"xapp-081381757165-8aAMp4/Un8NdPw5dtdh6QRP3\" \\\n    NPM_TOKEN=\"npm_SAMEH/HSMZaCsEMLOTK6b5lmegFReNl0U8Tw\" \\\n    SLACK_TOKEN=\"xoxp-39148୶987934-6OjNmLnZqqyvjhdYoD6VBj99\" \\\n    CONSUMER_SECRET=\"wZt7ZD9c//wAGyibgSE2b9-5/Tce7Is7AlJpZRYNFh951G-5Cvlb\"\n","injectedSmells":[],"originalDockerfileHash":"d0c8ed47e969c82ef8cdf7dd855b571e","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:bullseye-slim\nRUN apt-get update\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; : \\\n && apt-get install --no-install-recommends gnupg dirmngr -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV CHRONOGRAF_VERSION=\"1.7.17\"\nRUN apt-get update\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && set -x \\\n && : \\\n && apt-get install --no-install-recommends ca-certificates curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" \\\n && gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* \\\n && apt-get purge -y --auto-remove $buildDeps\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\nEXPOSE 8888/tcp\nVOLUME /var/lib/chronograf\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8888 || exit 1\nCMD [\"chronograf\"]\nENV NPM_TOKEN=\"npm_tVcWBgjAaCjDSeQ2/Bh8q1795Kj4/70vJApM\" \\\n    SLACK_TOKEN=\"xapp-081381757165-8aAMp4/Un8NdPw5dtdh6QRP3\" \\\n    NPM_TOKEN=\"npm_SAMEH/HSMZaCsEMLOTK6b5lmegFReNl0U8Tw\" \\\n    SLACK_TOKEN=\"xoxp-39148୶987934-6OjNmLnZqqyvjhdYoD6VBj99\" \\\n    CONSUMER_SECRET=\"wZt7ZD9c//wAGyibgSE2b9-5/Tce7Is7AlJpZRYNFh951G-5Cvlb\"\n","originalDockerfileUglifiedHash":"d0c8ed47e969c82ef8cdf7dd855b571e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/chronograf__1.7__9__injected.dockerfile"}