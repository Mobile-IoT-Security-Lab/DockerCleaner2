{"seed":3839768560,"processedDockerfileHash":"dde7fc27196b18be6282c0b6989492bb","fixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"processedDockerfile":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add git=2.30.6-r0 go=1.15.15-r0 make=4.3-r0 musl-dev=1.2.2-r1 --no-cache --virtual build-deps ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nCOPY ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nCMD [\"notary-signer\", \"--help\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add git go make musl-dev --no-cache --virtual build-deps ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nADD ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nCMD [\"notary-signer\", \"--help\"]\nENV POSTGRES_PASSWORD=\"ee8ViX8czlKJO2GWHTODfFJkH04S3HxbMLk6RKtW\" \\\n    GITHUB_TOKEN=\"ghp_/KMpdkk7y0XJr1i2xR-Az1sxhEHh4Or0w4sP\" \\\n    AWS_SECRET_KEY=\"Y2dpHMmyUflR9iaRFi0G2e1ReON24ZmYYTPWoqyW\" \\\n    POSTGRES_PASSWORD=\"QLGM2lg33wrshOLiUg3Txw4bpg0/4-x89-eO6bCv\" \\\n    DOCKER_PASSWORD=\"n8ihfC8u1TWpRCTJlFf6yIFxHbKaoxVWX3o/SHum\"\n","injectedSmells":[],"originalDockerfileHash":"e25f364dc9efe189690fa0aee4de37f0","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.13\nENV TAG=\"v0.6.1\"\nENV NOTARYPKG=\"github.com/theupdateframework/notary\"\nENV INSTALLDIR=\"/notary/signer\"\nEXPOSE 4444/tcp\nEXPOSE 7899/tcp\nWORKDIR ${INSTALLDIR}\nRUN set -eux ; apk add git go make musl-dev --no-cache --virtual build-deps ; export GOPATH=/go GOCACHE=/go/cache ; mkdir -p ${GOPATH}/src/${NOTARYPKG} ; git clone -b ${TAG} --depth 1 https://${NOTARYPKG} ${GOPATH}/src/${NOTARYPKG} ; make -C ${GOPATH}/src/${NOTARYPKG} SKIPENVCHECK=1 PREFIX=. ./bin/static/notary-signer ; cp -vL ${GOPATH}/src/${NOTARYPKG}/bin/static/notary-signer ./ ; apk del --no-network build-deps ; rm -rf ${GOPATH} ; ./notary-signer --help\nADD ./signer-config.json ./entrypoint.sh ./\nRUN adduser -D -H -g \"\" notary\nUSER notary\nENV PATH=\"$PATH:${INSTALLDIR}\"\nENTRYPOINT [\"entrypoint.sh\"]\nCMD [\"notary-signer\", \"--help\"]\nENV POSTGRES_PASSWORD=\"ee8ViX8czlKJO2GWHTODfFJkH04S3HxbMLk6RKtW\" \\\n    GITHUB_TOKEN=\"ghp_/KMpdkk7y0XJr1i2xR-Az1sxhEHh4Or0w4sP\" \\\n    AWS_SECRET_KEY=\"Y2dpHMmyUflR9iaRFi0G2e1ReON24ZmYYTPWoqyW\" \\\n    POSTGRES_PASSWORD=\"QLGM2lg33wrshOLiUg3Txw4bpg0/4-x89-eO6bCv\" \\\n    DOCKER_PASSWORD=\"n8ihfC8u1TWpRCTJlFf6yIFxHbKaoxVWX3o/SHum\"\n","originalDockerfileUglifiedHash":"e25f364dc9efe189690fa0aee4de37f0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/notary__signer-0.6.1-2__9__injected.dockerfile"}