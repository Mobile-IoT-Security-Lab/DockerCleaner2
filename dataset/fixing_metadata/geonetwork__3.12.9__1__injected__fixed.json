{"seed":162586413,"processedDockerfileHash":"6b47db1637b949912f9c3ccf752ddc74","fixedSmells":["use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n#  Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip=6.0-26ubuntu3.1 curl=7.81.0-1ubuntu1.10 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n#  Set geonetwork data dir\nCOPY ./docker-entrypoint.sh /entrypoint.sh\n#   Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nUSER 0\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n","originalDockerfile":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n# Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip=6.0-26ubuntu3.1 curl=7.81.0-1ubuntu1.10 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n# Set geonetwork data dir\nADD ./docker-entrypoint.sh /entrypoint.sh\n#  Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nUSER 0\nENV DOCKER_PASSWORD=\"jjlLHL3Z4NkPoH7KepeQ9Acg-khDJbay2TjZtQ8q\"\n","injectedSmells":[],"originalDockerfileHash":"844e4520b8e6745a55d558ea09b0df2d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n#  Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip=6.0-26ubuntu3.1 curl=7.81.0-1ubuntu1.10 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n#  Set geonetwork data dir\nADD ./docker-entrypoint.sh /entrypoint.sh\n#   Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nUSER 0\nENV DOCKER_PASSWORD=\"jjlLHL3Z4NkPoH7KepeQ9Acg-khDJbay2TjZtQ8q\"\n","originalDockerfileUglifiedHash":"76dea729e22b40f414421fdb5b1c7476","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/geonetwork__3.12.9__1__injected.dockerfile"}