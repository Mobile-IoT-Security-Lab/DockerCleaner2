{"seed":1511621386,"processedDockerfileHash":"fe4be35d02cc4e2f112acd079e958450","fixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","do-not-have-secrets"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","do-not-have-secrets"],"processedDockerfile":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#   see\n#     https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#     https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add gnupg=2.2.31-r1 pwgen=2.08-r1 binutils=2.35.2-r2 numactl=2.0.14-r0 numactl-tools=2.0.14-r0 nodejs=14.21.3-r0 yarn=1.22.10-r0 --no-cache \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#   Note that Openshift runs containers by default with a random UID and GID 0.\n#   We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#   retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#   standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n","originalDockerfile":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#  see\n#    https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#    https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add gnupg pwgen binutils numactl numactl-tools nodejs yarn --no-cache \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#  Note that Openshift runs containers by default with a random UID and GID 0.\n#  We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#  retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nADD docker-entrypoint.sh /entrypoint.sh\nADD docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#  standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\nENV AWS_SECRET_KEY=\"80st2I3EL67oCxJBLlyqgQO5sOhbq4OtNE1MoMCm\" \\\n    SLACK_TOKEN=\"xapp-624739982302-p54Z-YAblrNM4GMNS/Rpwy6T\" \\\n    AWS_ACCESS_KEY=\"A3T0ZRBFS7VOKXZ2C8XY\" \\\n    GITHUB_TOKEN=\"ghp_p69K9ZyLwH5ANyWvlyRWizTMq1gx0p5jPy1P\" \\\n    DOCKER_PASSWORD=\"3b8MxqTV62fWu3BNTTSsD3qgB0T0ly4a1Fmek/De\"\n","injectedSmells":[],"originalDockerfileHash":"1eb4cd690f4208053d2390b35a19830a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#   see\n#     https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#     https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add gnupg pwgen binutils numactl numactl-tools nodejs yarn --no-cache \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#   Note that Openshift runs containers by default with a random UID and GID 0.\n#   We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#   retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nADD docker-entrypoint.sh /entrypoint.sh\nADD docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#   standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\nENV AWS_SECRET_KEY=\"80st2I3EL67oCxJBLlyqgQO5sOhbq4OtNE1MoMCm\" \\\n    SLACK_TOKEN=\"xapp-624739982302-p54Z-YAblrNM4GMNS/Rpwy6T\" \\\n    AWS_ACCESS_KEY=\"A3T0ZRBFS7VOKXZ2C8XY\" \\\n    GITHUB_TOKEN=\"ghp_p69K9ZyLwH5ANyWvlyRWizTMq1gx0p5jPy1P\" \\\n    DOCKER_PASSWORD=\"3b8MxqTV62fWu3BNTTSsD3qgB0T0ly4a1Fmek/De\"\n","originalDockerfileUglifiedHash":"065c389313bc963ce00673554ec16a62","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/arangodb__3.9__10__injected.dockerfile"}