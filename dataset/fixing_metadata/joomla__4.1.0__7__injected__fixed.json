{"seed":932242528,"processedDockerfileHash":"b7d85f654d22cf4b2cf9f10af6c10ba4","fixedSmells":["pin-package-manager-versions-apt-get","do-not-have-secrets"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","do-not-have-secrets"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   from https://downloads.joomla.org/technical-requirements\nFROM php:8.0-apache\nLABEL maintainer=\"Llewellyn van der Merwe <llewellyn.van-der-merwe@community.joomla.org> (@Llewellynvdm), Harald Leithner <harald.leithner@community.joomla.org> (@HLeithner)\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Disable remote database security requirements.\nENV JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=\"1\"\n#   Enable Apache Rewrite Module\nRUN a2enmod rewrite\n#   Install the PHP extensions\nRUN set -ex ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends libbz2-dev=1.0.8-4 libgmp-dev=2:6.2.1+dfsg-1+deb11u1 libicu-dev=67.1-7 libjpeg-dev=1:2.0.6-4 libldap2-dev=2.4.57+dfsg-3+deb11u1 libmemcached-dev=1.0.18-4.2 libpng-dev=1.6.37-3 libpq-dev=13.9-0+deb11u1 libzip-dev=1.7.3-1 -y ; docker-php-ext-configure gd --with-jpeg ; debMultiarch=\"$( dpkg-architecture --query DEB_BUILD_MULTIARCH ;)\" ; docker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\" ; docker-php-ext-install -j \"$( nproc ;)\" bz2 gd gmp intl ldap mysqli pdo_mysql pdo_pgsql pgsql zip ; pecl install APCu-5.1.21 ; pecl install memcached-3.1.5 ; pecl install redis-5.3.6 ; docker-php-ext-enable apcu memcached redis ; rm -r /tmp/pear ; apt-mark auto '.*' > /dev/null; apt-mark manual $savedAptMark ; ldd \"$( php -r 'echo ini_get(\"extension_dir\");' ;)\"/*.so | awk '/=>/ { print $3 }' | sort -u | xargs -r dpkg-query -S | cut -d: -f1 | sort -u | xargs -rt apt-mark manual ; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/*\nVOLUME /var/www/html\n#   Define Joomla version and expected SHA512 signature\nENV JOOMLA_VERSION=\"4.1.0\"\nENV JOOMLA_SHA512=\"44173170fb1598c465415cba919339c26624322621efed17c95fdffca7b62a1089863615e415f0ec36a6a4c4f5c746b7ec06dddd08929757f737e1a2a15ff714\"\n#   Download package and extract to web volume\nRUN set -ex ; curl -o joomla.tar.bz2 -SL https://github.com/joomla/joomla-cms/releases/download/${JOOMLA_VERSION}/Joomla_${JOOMLA_VERSION}-Stable-Full_Package.tar.bz2 ; echo \"$JOOMLA_SHA512 *joomla.tar.bz2\" | sha512sum -c - ; mkdir /usr/src/joomla ; tar -xf joomla.tar.bz2 -C /usr/src/joomla ; rm joomla.tar.bz2 ; chown -R www-data:www-data /usr/src/joomla\n#   Copy init scripts and custom .htaccess\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY makedb.php /makedb.php\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\nCMD [\"apache2-foreground\"]\n#   vim:set ft=dockerfile:\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#  from https://downloads.joomla.org/technical-requirements\nFROM php:8.0-apache\nLABEL maintainer=\"Llewellyn van der Merwe <llewellyn.van-der-merwe@community.joomla.org> (@Llewellynvdm), Harald Leithner <harald.leithner@community.joomla.org> (@HLeithner)\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  Disable remote database security requirements.\nENV JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=\"1\"\n#  Enable Apache Rewrite Module\nRUN a2enmod rewrite\n#  Install the PHP extensions\nRUN set -ex ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends libbz2-dev libgmp-dev libicu-dev libjpeg-dev libldap2-dev libmemcached-dev libpng-dev libpq-dev libzip-dev -y ; docker-php-ext-configure gd --with-jpeg ; debMultiarch=\"$( dpkg-architecture --query DEB_BUILD_MULTIARCH ;)\" ; docker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\" ; docker-php-ext-install -j \"$( nproc ;)\" bz2 gd gmp intl ldap mysqli pdo_mysql pdo_pgsql pgsql zip ; pecl install APCu-5.1.21 ; pecl install memcached-3.1.5 ; pecl install redis-5.3.6 ; docker-php-ext-enable apcu memcached redis ; rm -r /tmp/pear ; apt-mark auto '.*' > /dev/null; apt-mark manual $savedAptMark ; ldd \"$( php -r 'echo ini_get(\"extension_dir\");' ;)\"/*.so | awk '/=>/ { print $3 }' | sort -u | xargs -r dpkg-query -S | cut -d: -f1 | sort -u | xargs -rt apt-mark manual ; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/*\nVOLUME /var/www/html\n#  Define Joomla version and expected SHA512 signature\nENV JOOMLA_VERSION=\"4.1.0\"\nENV JOOMLA_SHA512=\"44173170fb1598c465415cba919339c26624322621efed17c95fdffca7b62a1089863615e415f0ec36a6a4c4f5c746b7ec06dddd08929757f737e1a2a15ff714\"\n#  Download package and extract to web volume\nRUN set -ex ; curl -o joomla.tar.bz2 -SL https://github.com/joomla/joomla-cms/releases/download/${JOOMLA_VERSION}/Joomla_${JOOMLA_VERSION}-Stable-Full_Package.tar.bz2 ; echo \"$JOOMLA_SHA512 *joomla.tar.bz2\" | sha512sum -c - ; mkdir /usr/src/joomla ; tar -xf joomla.tar.bz2 -C /usr/src/joomla ; rm joomla.tar.bz2 ; chown -R www-data:www-data /usr/src/joomla\n#  Copy init scripts and custom .htaccess\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY makedb.php /makedb.php\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\nCMD [\"apache2-foreground\"]\n#  vim:set ft=dockerfile:\nENV GITHUB_TOKEN=\"ghp_B17/wGGK3ju2HJQETdg0IOozetP8Z0915CXo\" \\\n    GITHUB_TOKEN=\"ghp_c2hL47oNJrYKgbg9cRGkpGW5VDdZ/l/oaQS0\" \\\n    NPM_TOKEN=\"npm_cSRmMyHk3YpX/JpjmwWLI8zzy-9fN5tW46tm\" \\\n    DOCKER_PASSWORD=\"IB6MKsW0xEQMSpQvbKbATTij3qszEY3uWyt/x8ce\" \\\n    GITHUB_TOKEN=\"ghp_4gnFzg1EAGcVTE3Dj0hcZKHA3iwz5/9jfKBi\"\n","injectedSmells":[],"originalDockerfileHash":"94fe77294511ed6b8d75db313790e460","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   from https://downloads.joomla.org/technical-requirements\nFROM php:8.0-apache\nLABEL maintainer=\"Llewellyn van der Merwe <llewellyn.van-der-merwe@community.joomla.org> (@Llewellynvdm), Harald Leithner <harald.leithner@community.joomla.org> (@HLeithner)\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Disable remote database security requirements.\nENV JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=\"1\"\n#   Enable Apache Rewrite Module\nRUN a2enmod rewrite\n#   Install the PHP extensions\nRUN set -ex ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends libbz2-dev libgmp-dev libicu-dev libjpeg-dev libldap2-dev libmemcached-dev libpng-dev libpq-dev libzip-dev -y ; docker-php-ext-configure gd --with-jpeg ; debMultiarch=\"$( dpkg-architecture --query DEB_BUILD_MULTIARCH ;)\" ; docker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\" ; docker-php-ext-install -j \"$( nproc ;)\" bz2 gd gmp intl ldap mysqli pdo_mysql pdo_pgsql pgsql zip ; pecl install APCu-5.1.21 ; pecl install memcached-3.1.5 ; pecl install redis-5.3.6 ; docker-php-ext-enable apcu memcached redis ; rm -r /tmp/pear ; apt-mark auto '.*' > /dev/null; apt-mark manual $savedAptMark ; ldd \"$( php -r 'echo ini_get(\"extension_dir\");' ;)\"/*.so | awk '/=>/ { print $3 }' | sort -u | xargs -r dpkg-query -S | cut -d: -f1 | sort -u | xargs -rt apt-mark manual ; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/*\nVOLUME /var/www/html\n#   Define Joomla version and expected SHA512 signature\nENV JOOMLA_VERSION=\"4.1.0\"\nENV JOOMLA_SHA512=\"44173170fb1598c465415cba919339c26624322621efed17c95fdffca7b62a1089863615e415f0ec36a6a4c4f5c746b7ec06dddd08929757f737e1a2a15ff714\"\n#   Download package and extract to web volume\nRUN set -ex ; curl -o joomla.tar.bz2 -SL https://github.com/joomla/joomla-cms/releases/download/${JOOMLA_VERSION}/Joomla_${JOOMLA_VERSION}-Stable-Full_Package.tar.bz2 ; echo \"$JOOMLA_SHA512 *joomla.tar.bz2\" | sha512sum -c - ; mkdir /usr/src/joomla ; tar -xf joomla.tar.bz2 -C /usr/src/joomla ; rm joomla.tar.bz2 ; chown -R www-data:www-data /usr/src/joomla\n#   Copy init scripts and custom .htaccess\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY makedb.php /makedb.php\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\nCMD [\"apache2-foreground\"]\n#   vim:set ft=dockerfile:\nENV GITHUB_TOKEN=\"ghp_B17/wGGK3ju2HJQETdg0IOozetP8Z0915CXo\" \\\n    GITHUB_TOKEN=\"ghp_c2hL47oNJrYKgbg9cRGkpGW5VDdZ/l/oaQS0\" \\\n    NPM_TOKEN=\"npm_cSRmMyHk3YpX/JpjmwWLI8zzy-9fN5tW46tm\" \\\n    DOCKER_PASSWORD=\"IB6MKsW0xEQMSpQvbKbATTij3qszEY3uWyt/x8ce\" \\\n    GITHUB_TOKEN=\"ghp_4gnFzg1EAGcVTE3Dj0hcZKHA3iwz5/9jfKBi\"\n","originalDockerfileUglifiedHash":"1f48aaf24ff029ba92ea101023c6dc41","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/joomla__4.1.0__7__injected.dockerfile"}