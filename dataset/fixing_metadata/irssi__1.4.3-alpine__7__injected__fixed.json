{"seed":880721573,"processedDockerfileHash":"3a205762ed8ae7aab14563e35dfb727a","fixedSmells":["do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.16\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\nRUN apk add --no-cache ca-certificates=20220614-r0 perl-libwww=6.66-r0\nENV HOME=\"/home/user\"\nRUN set -eux ; adduser -u 1001 -D -h \"$HOME\" user ; mkdir \"$HOME/.irssi\" ; chown -R user:user \"$HOME\"\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.4.3\"\nRUN set -eux ; apk add --no-cache --virtual .build-deps coreutils=9.1-r0 gcc=11.2.1_git20220219-r2 glib-dev=2.72.1-r0 gnupg=2.2.35-r4 libc-dev=0.7.2-r3 libtool=2.4.7-r0 lynx=2.8.9_p1-r7 meson=0.62.1-r0 ncurses-dev=6.3_p20220521-r0 samurai=1.2-r1 openssl=1.1.1t-r2 openssl-dev=1.1.1t-r2 perl-dev=5.34.1-r0 pkgconf=1.8.1-r0 tar=1.34-r1 xz=5.2.5-r1 ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -O /tmp/irssi.tar.xz ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -O /tmp/irssi.tar.xz.asc ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver keyserver.ubuntu.com --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 ; gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc ; mkdir -p /usr/src/irssi ; tar -xf /tmp/irssi.tar.xz -C /usr/src/irssi --strip-components 1 ; rm /tmp/irssi.tar.xz ; cd /usr/src/irssi ; meson -Denable-true-color=yes -Dwith-bot=yes -Dwith-perl=yes -Dwith-proxy=yes Build ; ninja -C Build -j \"$( nproc ;)\" ; ninja -C Build install ; cd / ; rm -rf /usr/src/irssi\n#   hadolint ignore=DL3018\nRUN runDeps=\"$( scanelf --needed --nobanner --format '%n#p' --recursive /usr/local | tr ',' '\\n' | sort -u | awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' ;)\" ; apk add --no-network --no-cache --virtual .irssi-rundeps $runDeps ; apk del --no-network .build-deps ; irssi --version\nWORKDIR $HOME\nUSER user\nCMD [\"irssi\"]\nUSER root\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.16\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\nRUN apk add --no-cache ca-certificates=20220614-r0 perl-libwww=6.66-r0\nENV HOME=\"/home/user\"\nRUN set -eux ; adduser -u 1001 -D -h \"$HOME\" user ; mkdir \"$HOME/.irssi\" ; chown -R user:user \"$HOME\"\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.4.3\"\nRUN set -eux ; apk add --no-cache --virtual .build-deps coreutils=9.1-r0 gcc=11.2.1_git20220219-r2 glib-dev=2.72.1-r0 gnupg=2.2.35-r4 libc-dev=0.7.2-r3 libtool=2.4.7-r0 lynx=2.8.9_p1-r7 meson=0.62.1-r0 ncurses-dev=6.3_p20220521-r0 samurai=1.2-r1 openssl=1.1.1t-r2 openssl-dev=1.1.1t-r2 perl-dev=5.34.1-r0 pkgconf=1.8.1-r0 tar=1.34-r1 xz=5.2.5-r1 ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -O /tmp/irssi.tar.xz ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -O /tmp/irssi.tar.xz.asc ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver keyserver.ubuntu.com --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 ; gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc ; mkdir -p /usr/src/irssi ; tar -xf /tmp/irssi.tar.xz -C /usr/src/irssi --strip-components 1 ; rm /tmp/irssi.tar.xz ; cd /usr/src/irssi ; meson -Denable-true-color=yes -Dwith-bot=yes -Dwith-perl=yes -Dwith-proxy=yes Build ; ninja -C Build -j \"$( nproc ;)\" ; ninja -C Build install ; cd / ; rm -rf /usr/src/irssi\n#  hadolint ignore=DL3018\nRUN runDeps=\"$( scanelf --needed --nobanner --format '%n#p' --recursive /usr/local | tr ',' '\\n' | sort -u | awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' ;)\" ; apk add --no-network --no-cache --virtual .irssi-rundeps $runDeps ; apk del --no-network .build-deps ; irssi --version\nWORKDIR $HOME\nUSER user\nCMD [\"irssi\"]\nUSER root\nENV SLACK_TOKEN=\"xoxp-293530293381-504EKJpHrhxoSHs/R2Iw2/za\" \\\n    SLACK_TOKEN=\"xapp-176131635050-lB-xFLT/VRVlWyrkt-9nQ7BA\"\n","injectedSmells":[],"originalDockerfileHash":"cd925dc3d9703f3840e2514e347ebea5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.16\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\nRUN apk add --no-cache ca-certificates=20220614-r0 perl-libwww=6.66-r0\nENV HOME=\"/home/user\"\nRUN set -eux ; adduser -u 1001 -D -h \"$HOME\" user ; mkdir \"$HOME/.irssi\" ; chown -R user:user \"$HOME\"\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.4.3\"\nRUN set -eux ; apk add --no-cache --virtual .build-deps coreutils=9.1-r0 gcc=11.2.1_git20220219-r2 glib-dev=2.72.1-r0 gnupg=2.2.35-r4 libc-dev=0.7.2-r3 libtool=2.4.7-r0 lynx=2.8.9_p1-r7 meson=0.62.1-r0 ncurses-dev=6.3_p20220521-r0 samurai=1.2-r1 openssl=1.1.1t-r2 openssl-dev=1.1.1t-r2 perl-dev=5.34.1-r0 pkgconf=1.8.1-r0 tar=1.34-r1 xz=5.2.5-r1 ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -O /tmp/irssi.tar.xz ; wget \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -O /tmp/irssi.tar.xz.asc ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --batch --keyserver keyserver.ubuntu.com --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 ; gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz ; gpgconf --kill all ; rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc ; mkdir -p /usr/src/irssi ; tar -xf /tmp/irssi.tar.xz -C /usr/src/irssi --strip-components 1 ; rm /tmp/irssi.tar.xz ; cd /usr/src/irssi ; meson -Denable-true-color=yes -Dwith-bot=yes -Dwith-perl=yes -Dwith-proxy=yes Build ; ninja -C Build -j \"$( nproc ;)\" ; ninja -C Build install ; cd / ; rm -rf /usr/src/irssi\n#   hadolint ignore=DL3018\nRUN runDeps=\"$( scanelf --needed --nobanner --format '%n#p' --recursive /usr/local | tr ',' '\\n' | sort -u | awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' ;)\" ; apk add --no-network --no-cache --virtual .irssi-rundeps $runDeps ; apk del --no-network .build-deps ; irssi --version\nWORKDIR $HOME\nUSER user\nCMD [\"irssi\"]\nUSER root\nENV SLACK_TOKEN=\"xoxp-293530293381-504EKJpHrhxoSHs/R2Iw2/za\" \\\n    SLACK_TOKEN=\"xapp-176131635050-lB-xFLT/VRVlWyrkt-9nQ7BA\"\n","originalDockerfileUglifiedHash":"b614696e967bb5bcf9df7a9024567c25","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/irssi__1.4.3-alpine__7__injected.dockerfile"}