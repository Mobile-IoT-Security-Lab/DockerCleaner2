{"seed":2045719873,"processedDockerfileHash":"76da83aea2977b256d94dba1b97f58a3","fixedSmells":["use-no-install-recommends","do-not-have-secrets","have-a-healthcheck"],"successfullyFixedSmells":["use-no-install-recommends","do-not-have-secrets","have-a-healthcheck"],"processedDockerfile":"#   Set the base image\nFROM eclipse-temurin:8-jdk\nLABEL maintainer=\"Lightstreamer Server Development Team <support@lightstreamer.com>\"\n#   Add gpg, which is missing in the eclipse-temurin image\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends gnupg=2.2.27-3ubuntu2.1 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Import Lighstreamer's public key\nRUN gpg --batch --keyserver hkp://keyserver.ubuntu.com --recv-keys 9B90BFD14309C7DA5EF58D7D4A8C08966F29B4D2\n#   Set environment variables to identify the right Lightstreamer version and edition\nENV LIGHTSTREAMER_URL_DOWNLOAD=\"https://lightstreamer.com/distr/ls-server/6.0.3/Lightstreamer_Allegro-Presto-Vivace_6_0_3_20160905.tar.gz\"\n#   Set the temporary working dir\nWORKDIR /lightstreamer\n#   Download the package from the Lightstreamer site and replace the fictitious jdk path with \n#   the JAVA_HOME environment variable in the launch script file.\n#   Finally, adjust logging configuration to log only on standard output.\nRUN set -x \\\n && curl -fSL -o Lightstreamer.tar.gz ${LIGHTSTREAMER_URL_DOWNLOAD} \\\n && curl -fSL -o Lightstreamer.tar.gz.asc ${LIGHTSTREAMER_URL_DOWNLOAD}.asc \\\n && gpg --batch --verify Lightstreamer.tar.gz.asc Lightstreamer.tar.gz \\\n && tar -xvf Lightstreamer.tar.gz --strip-components=1 \\\n && rm Lightstreamer.tar.gz Lightstreamer.tar.gz.asc \\\n && sed -i -- 's/\\/usr\\/jdk1.8.0/$JAVA_HOME/' bin/unix-like/LS.sh \\\n && sed -i -e '123,$s/<appender-ref ref=\"LSDailyRolling\" \\/>/<appender-ref ref=\"LSConsole\" \\/>/' -e '/<appender-ref ref=\"LSDailyRolling\" \\/>/ d' conf/lightstreamer_log_conf.xml\n#   Export TCP port 8080\nEXPOSE 8080/tcp\n#   Set the final working dir\nWORKDIR /lightstreamer/bin/unix-like\n#   Start the server\nCMD [\"./LS.sh\", \"run\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Set the base image\nFROM eclipse-temurin:8-jdk\nLABEL maintainer=\"Lightstreamer Server Development Team <support@lightstreamer.com>\"\n#  Add gpg, which is missing in the eclipse-temurin image\nRUN apt-get update -y \\\n && apt-get install gnupg=2.2.27-3ubuntu2.1 -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Import Lighstreamer's public key\nRUN gpg --batch --keyserver hkp://keyserver.ubuntu.com --recv-keys 9B90BFD14309C7DA5EF58D7D4A8C08966F29B4D2\n#  Set environment variables to identify the right Lightstreamer version and edition\nENV LIGHTSTREAMER_URL_DOWNLOAD=\"https://lightstreamer.com/distr/ls-server/6.0.3/Lightstreamer_Allegro-Presto-Vivace_6_0_3_20160905.tar.gz\"\n#  Set the temporary working dir\nWORKDIR /lightstreamer\n#  Download the package from the Lightstreamer site and replace the fictitious jdk path with \n#  the JAVA_HOME environment variable in the launch script file.\n#  Finally, adjust logging configuration to log only on standard output.\nRUN set -x \\\n && curl -fSL -o Lightstreamer.tar.gz ${LIGHTSTREAMER_URL_DOWNLOAD} \\\n && curl -fSL -o Lightstreamer.tar.gz.asc ${LIGHTSTREAMER_URL_DOWNLOAD}.asc \\\n && gpg --batch --verify Lightstreamer.tar.gz.asc Lightstreamer.tar.gz \\\n && tar -xvf Lightstreamer.tar.gz --strip-components=1 \\\n && rm Lightstreamer.tar.gz Lightstreamer.tar.gz.asc \\\n && sed -i -- 's/\\/usr\\/jdk1.8.0/$JAVA_HOME/' bin/unix-like/LS.sh \\\n && sed -i -e '123,$s/<appender-ref ref=\"LSDailyRolling\" \\/>/<appender-ref ref=\"LSConsole\" \\/>/' -e '/<appender-ref ref=\"LSDailyRolling\" \\/>/ d' conf/lightstreamer_log_conf.xml\n#  Export TCP port 8080\nEXPOSE 8080/tcp\n#  Set the final working dir\nWORKDIR /lightstreamer/bin/unix-like\n#  Start the server\nCMD [\"./LS.sh\", \"run\"]\nENV POSTGRES_PASSWORD=\"OzTfCZbYu5DrVweaaoOeNMeaLRipwal4zOMphcd/\" \\\n    CONSUMER_SECRET=\"twO38yRteOtW-QUUsLSYsVEcWZ9ZtqDI0hvrzpINu/Ci1claTbiI\" \\\n    CONSUMER_SECRET=\"nEi1OittuWScxr4e0C4dA76fPKHaoyZfUwxwYl5hhZYGiORxMX8S\"\n","injectedSmells":[],"originalDockerfileHash":"c8571934a331407d59d5082179ef3541","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Set the base image\nFROM eclipse-temurin:8-jdk\nLABEL maintainer=\"Lightstreamer Server Development Team <support@lightstreamer.com>\"\n#   Add gpg, which is missing in the eclipse-temurin image\nRUN apt-get update -y \\\n && apt-get install gnupg=2.2.27-3ubuntu2.1 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Import Lighstreamer's public key\nRUN gpg --batch --keyserver hkp://keyserver.ubuntu.com --recv-keys 9B90BFD14309C7DA5EF58D7D4A8C08966F29B4D2\n#   Set environment variables to identify the right Lightstreamer version and edition\nENV LIGHTSTREAMER_URL_DOWNLOAD=\"https://lightstreamer.com/distr/ls-server/6.0.3/Lightstreamer_Allegro-Presto-Vivace_6_0_3_20160905.tar.gz\"\n#   Set the temporary working dir\nWORKDIR /lightstreamer\n#   Download the package from the Lightstreamer site and replace the fictitious jdk path with \n#   the JAVA_HOME environment variable in the launch script file.\n#   Finally, adjust logging configuration to log only on standard output.\nRUN set -x \\\n && curl -fSL -o Lightstreamer.tar.gz ${LIGHTSTREAMER_URL_DOWNLOAD} \\\n && curl -fSL -o Lightstreamer.tar.gz.asc ${LIGHTSTREAMER_URL_DOWNLOAD}.asc \\\n && gpg --batch --verify Lightstreamer.tar.gz.asc Lightstreamer.tar.gz \\\n && tar -xvf Lightstreamer.tar.gz --strip-components=1 \\\n && rm Lightstreamer.tar.gz Lightstreamer.tar.gz.asc \\\n && sed -i -- 's/\\/usr\\/jdk1.8.0/$JAVA_HOME/' bin/unix-like/LS.sh \\\n && sed -i -e '123,$s/<appender-ref ref=\"LSDailyRolling\" \\/>/<appender-ref ref=\"LSConsole\" \\/>/' -e '/<appender-ref ref=\"LSDailyRolling\" \\/>/ d' conf/lightstreamer_log_conf.xml\n#   Export TCP port 8080\nEXPOSE 8080/tcp\n#   Set the final working dir\nWORKDIR /lightstreamer/bin/unix-like\n#   Start the server\nCMD [\"./LS.sh\", \"run\"]\nENV POSTGRES_PASSWORD=\"OzTfCZbYu5DrVweaaoOeNMeaLRipwal4zOMphcd/\" \\\n    CONSUMER_SECRET=\"twO38yRteOtW-QUUsLSYsVEcWZ9ZtqDI0hvrzpINu/Ci1claTbiI\" \\\n    CONSUMER_SECRET=\"nEi1OittuWScxr4e0C4dA76fPKHaoyZfUwxwYl5hhZYGiORxMX8S\"\n","originalDockerfileUglifiedHash":"d8f2fd2078707362aaf259b3fbec1ec4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/lightstreamer__6.0.3__5__injected.dockerfile"}