{"seed":3968192131,"processedDockerfileHash":"097b9cebf7711e5eaf9f54d396e12026","fixedSmells":["do-not-use-apt-get-update-alone","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:bullseye-slim\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\nRUN :\nRUN set -ex ; BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; : ; (apt-get update ;apt-get install --no-install-recommends apt-utils=2.2.4 curl=7.74.0-1.3+deb11u7 dirmngr=2.2.27-2+deb11u2 dpkg-dev=1.20.12 debhelper=13.3.4 devscripts=2.21.3+deb11u1 equivs=2.3.1 fakeroot=1.25.3-1.1 git=1:2.30.2-1+deb11u2 gnupg=2.2.27-2+deb11u2 pkg-config=0.29.2-1 -y ) ; git clone https://github.com/varnish/pkg-hitch.git ; cd pkg-hitch ; git checkout ${PKGCOMMIT} ; rm -rf .git ; curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz ; echo \"${SHASUM} $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s/@SRCVER@/${SRCVER}/g\" -e \"s/@PKGVER@/${PKGVER:-1}/g\" -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/hitch* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS ; (apt-get update ;apt-get install --no-install-recommends ../*.deb -y ) ; sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/hitch\nCOPY docker-hitch-entrypoint /usr/local/bin/\nENTRYPOINT [\"docker-hitch-entrypoint\"]\nEXPOSE 443/tcp\nCMD []\nUSER root\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:bullseye-slim\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\nRUN apt-get update\nRUN set -ex ; BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; : ; apt-get install --no-install-recommends apt-utils=2.2.4 curl=7.74.0-1.3+deb11u7 dirmngr=2.2.27-2+deb11u2 dpkg-dev=1.20.12 debhelper=13.3.4 devscripts=2.21.3+deb11u1 equivs=2.3.1 fakeroot=1.25.3-1.1 git=1:2.30.2-1+deb11u2 gnupg=2.2.27-2+deb11u2 pkg-config=0.29.2-1 -y ; git clone https://github.com/varnish/pkg-hitch.git ; cd pkg-hitch ; git checkout ${PKGCOMMIT} ; rm -rf .git ; curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz ; echo \"${SHASUM} $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s/@SRCVER@/${SRCVER}/g\" -e \"s/@PKGVER@/${PKGVER:-1}/g\" -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/hitch* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS ; apt-get install --no-install-recommends ../*.deb -y ; sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/hitch\nCOPY docker-hitch-entrypoint /usr/local/bin/\nENTRYPOINT [\"docker-hitch-entrypoint\"]\nEXPOSE 443/tcp\nCMD []\nUSER root\nENV NPM_TOKEN=\"npm_509ynHtIpYatW9zO8QNMxDdTOtjdnu7AD3NV\" \\\n    SLACK_TOKEN=\"xoxb-431160509948-UvR4XMGWJL2XbLokvfX07tPz\" \\\n    NPM_TOKEN=\"npm_FskXipUdv/MLP8DoXWGbvnELFP4Oqs1iHx0i\" \\\n    AWS_ACCESS_KEY=\"A3TGPE9ZBK3O1C7T57X1\"\n","injectedSmells":[],"originalDockerfileHash":"873d61b6dc649436d104684eec85ce83","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:bullseye-slim\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\nRUN apt-get update\nRUN set -ex ; BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; : ; apt-get install --no-install-recommends apt-utils=2.2.4 curl=7.74.0-1.3+deb11u7 dirmngr=2.2.27-2+deb11u2 dpkg-dev=1.20.12 debhelper=13.3.4 devscripts=2.21.3+deb11u1 equivs=2.3.1 fakeroot=1.25.3-1.1 git=1:2.30.2-1+deb11u2 gnupg=2.2.27-2+deb11u2 pkg-config=0.29.2-1 -y ; git clone https://github.com/varnish/pkg-hitch.git ; cd pkg-hitch ; git checkout ${PKGCOMMIT} ; rm -rf .git ; curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz ; echo \"${SHASUM} $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s/@SRCVER@/${SRCVER}/g\" -e \"s/@PKGVER@/${PKGVER:-1}/g\" -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/hitch* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS ; apt-get install --no-install-recommends ../*.deb -y ; sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/hitch\nCOPY docker-hitch-entrypoint /usr/local/bin/\nENTRYPOINT [\"docker-hitch-entrypoint\"]\nEXPOSE 443/tcp\nCMD []\nUSER root\nENV NPM_TOKEN=\"npm_509ynHtIpYatW9zO8QNMxDdTOtjdnu7AD3NV\" \\\n    SLACK_TOKEN=\"xoxb-431160509948-UvR4XMGWJL2XbLokvfX07tPz\" \\\n    NPM_TOKEN=\"npm_FskXipUdv/MLP8DoXWGbvnELFP4Oqs1iHx0i\" \\\n    AWS_ACCESS_KEY=\"A3TGPE9ZBK3O1C7T57X1\"\n","originalDockerfileUglifiedHash":"873d61b6dc649436d104684eec85ce83","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/hitch__1__8__injected.dockerfile"}