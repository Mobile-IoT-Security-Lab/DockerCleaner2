{"seed":3055559484,"processedDockerfileHash":"fe85444645e3e82b8830c3fe04301627","fixedSmells":["use-copy-instead-of-add","do-not-have-secrets"],"successfullyFixedSmells":["use-copy-instead-of-add","do-not-have-secrets"],"processedDockerfile":"FROM buildpack-deps:bullseye-curl\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV INFLUXDB_VERSION=\"1.8.10\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nCOPY influxdb.conf /etc/influxdb/influxdb.conf\nEXPOSE 8086/tcp\nVOLUME /var/lib/influxdb\nCOPY entrypoint.sh /entrypoint.sh\nCOPY init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9999/metrics || exit 1\nCMD [\"influxd\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n","originalDockerfile":"FROM buildpack-deps:bullseye-curl\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV INFLUXDB_VERSION=\"1.8.10\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nADD influxdb.conf /etc/influxdb/influxdb.conf\nEXPOSE 8086/tcp\nVOLUME /var/lib/influxdb\nADD entrypoint.sh /entrypoint.sh\nADD init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9999/metrics || exit 1\nCMD [\"influxd\"]\nENV AWS_ACCESS_KEY=\"AKIASDYR1Z7JRPFQNE6Z\" \\\n    POSTGRES_PASSWORD=\"qrUkBG22qG0fy5fppT4urlDVZzo5U4SwRfijAEJF\" \\\n    CONSUMER_SECRET=\"vLWHPpGs7VHDXSW4eGvasG1MMQaWKovb3lc5fRXCs1CTBvZGP4TP\"\n","injectedSmells":[],"originalDockerfileHash":"de4928803b74a0c671d4861eb620233c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM buildpack-deps:bullseye-curl\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV INFLUXDB_VERSION=\"1.8.10\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nADD influxdb.conf /etc/influxdb/influxdb.conf\nEXPOSE 8086/tcp\nVOLUME /var/lib/influxdb\nADD entrypoint.sh /entrypoint.sh\nADD init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9999/metrics || exit 1\nCMD [\"influxd\"]\nENV AWS_ACCESS_KEY=\"AKIASDYR1Z7JRPFQNE6Z\" \\\n    POSTGRES_PASSWORD=\"qrUkBG22qG0fy5fppT4urlDVZzo5U4SwRfijAEJF\" \\\n    CONSUMER_SECRET=\"vLWHPpGs7VHDXSW4eGvasG1MMQaWKovb3lc5fRXCs1CTBvZGP4TP\"\n","originalDockerfileUglifiedHash":"de4928803b74a0c671d4861eb620233c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/influxdb__1.8__3__injected.dockerfile"}