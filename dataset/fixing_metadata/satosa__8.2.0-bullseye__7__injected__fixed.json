{"seed":100185224,"processedDockerfileHash":"757dba182c88f0611d08ed5a88e8209e","fixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM python:3.11-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   runtime dependencies\nRUN set -eux ; groupadd -g 1000 satosa ; useradd -m -g 1000 -u 1000 satosa ; apt-get update ; apt-get install --no-install-recommends jq=1.6-2.1 libxml2-utils=2.9.10+dfsg-6.7+deb11u3 xmlsec1=1.2.31-1 -y ; rm -rf /var/lib/apt/lists/* ; pip install yq==3.2.1 --no-cache-dir\nENV SATOSA_VERSION=\"8.2.0\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends cargo=0.47.0-3+b1 dpkg-dev=1.20.12 gcc=4:10.2.1-1 gnupg=2.2.27-2+deb11u2 dirmngr=2.2.27-2+deb11u2 libbluetooth-dev=5.55-3.1 libbz2-dev=1.0.8-4 libc6-dev=2.31-13+deb11u5 libexpat1-dev=2.2.10-2+deb11u5 libffi-dev=3.3-6 libgdbm-dev=1.19-2 liblzma-dev=5.2.5-2.1~deb11u1 libncursesw5-dev=6.2+20201114-2 libreadline-dev=8.1-1 libsqlite3-dev=3.34.1-3 libssl-dev=1.1.1n-0+deb11u4 make=4.3-4.1 python3-dev=3.9.2-3 tk-dev=8.6.11+1 uuid-dev=2.36.1-8+deb11u1 wget=1.21-1+deb11u1 xz-utils=5.2.5-2.1~deb11u1 zlib1g-dev=1:1.2.11.dfsg-2+deb11u2 -y ; pip install satosa==${SATOSA_VERSION} --no-cache-dir ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/* ; mkdir /etc/satosa ; chown -R satosa:satosa /etc/satosa\n#   example configuration\nRUN set -eux ; python -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")' ; mkdir /usr/share/satosa ; tar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/ ; rm /tmp/satosa.tgz\nWORKDIR /etc/satosa\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 8080/tcp\nUSER satosa:satosa\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"gunicorn\", \"-b0.0.0.0:8080\", \"satosa.wsgi:app\"]\nUSER root\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM python:3.11-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  runtime dependencies\nRUN set -eux ; groupadd -g 1000 satosa ; useradd -m -g 1000 -u 1000 satosa ; apt-get update ; apt-get install --no-install-recommends jq libxml2-utils xmlsec1 -y ; rm -rf /var/lib/apt/lists/* ; pip install yq --no-cache-dir\nENV SATOSA_VERSION=\"8.2.0\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends cargo dpkg-dev gcc gnupg dirmngr libbluetooth-dev libbz2-dev libc6-dev libexpat1-dev libffi-dev libgdbm-dev liblzma-dev libncursesw5-dev libreadline-dev libsqlite3-dev libssl-dev make python3-dev tk-dev uuid-dev wget xz-utils zlib1g-dev -y ; pip install satosa==${SATOSA_VERSION} --no-cache-dir ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/* ; mkdir /etc/satosa ; chown -R satosa:satosa /etc/satosa\n#  example configuration\nRUN set -eux ; python -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")' ; mkdir /usr/share/satosa ; tar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/ ; rm /tmp/satosa.tgz\nWORKDIR /etc/satosa\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 8080/tcp\nUSER satosa:satosa\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"gunicorn\", \"-b0.0.0.0:8080\", \"satosa.wsgi:app\"]\nUSER root\n","injectedSmells":[],"originalDockerfileHash":"f499de2615fdbb695bffc5a605f8b488","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM python:3.11-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   runtime dependencies\nRUN set -eux ; groupadd -g 1000 satosa ; useradd -m -g 1000 -u 1000 satosa ; apt-get update ; apt-get install --no-install-recommends jq libxml2-utils xmlsec1 -y ; rm -rf /var/lib/apt/lists/* ; pip install yq --no-cache-dir\nENV SATOSA_VERSION=\"8.2.0\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends cargo dpkg-dev gcc gnupg dirmngr libbluetooth-dev libbz2-dev libc6-dev libexpat1-dev libffi-dev libgdbm-dev liblzma-dev libncursesw5-dev libreadline-dev libsqlite3-dev libssl-dev make python3-dev tk-dev uuid-dev wget xz-utils zlib1g-dev -y ; pip install satosa==${SATOSA_VERSION} --no-cache-dir ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/* ; mkdir /etc/satosa ; chown -R satosa:satosa /etc/satosa\n#   example configuration\nRUN set -eux ; python -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")' ; mkdir /usr/share/satosa ; tar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/ ; rm /tmp/satosa.tgz\nWORKDIR /etc/satosa\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 8080/tcp\nUSER satosa:satosa\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"gunicorn\", \"-b0.0.0.0:8080\", \"satosa.wsgi:app\"]\nUSER root\n","originalDockerfileUglifiedHash":"c8d1357f8b12b6bcc80edc7a4bc681d1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/satosa__8.2.0-bullseye__7__injected.dockerfile"}