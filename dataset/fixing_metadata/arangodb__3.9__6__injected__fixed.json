{"seed":676130070,"processedDockerfileHash":"38d87c005fa3a26142e4ef0cbd0f182c","fixedSmells":["have-a-user"],"successfullyFixedSmells":["have-a-user"],"processedDockerfile":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#   see\n#     https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#     https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add --no-cache gnupg=2.2.31-r1 pwgen=2.08-r1 binutils=2.35.2-r2 numactl=2.0.14-r0 numactl-tools=2.0.14-r0 nodejs=14.21.3-r0 yarn=1.22.10-r0 \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#   Note that Openshift runs containers by default with a random UID and GID 0.\n#   We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#   retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#   standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\nUSER root\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n","originalDockerfile":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#  see\n#    https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#    https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add --no-cache gnupg=2.2.31-r1 pwgen=2.08-r1 binutils=2.35.2-r2 numactl=2.0.14-r0 numactl-tools=2.0.14-r0 nodejs=14.21.3-r0 yarn=1.22.10-r0 \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#  Note that Openshift runs containers by default with a random UID and GID 0.\n#  We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#  retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#  standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\nUSER root\n","injectedSmells":[],"originalDockerfileHash":"0bb7932ad1dce2511b49f57d284ced16","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.14\nLABEL maintainer=\"Frank Celler <info@arangodb.com>\"\nENV ARANGO_VERSION=\"3.9.0\"\nENV ARANGO_URL=\"https://download.arangodb.com/arangodb39/DEBIAN/amd64\"\nENV ARANGO_PACKAGE=\"arangodb3_${ARANGO_VERSION}-1_amd64.deb\"\nENV ARANGO_PACKAGE_URL=\"${ARANGO_URL}/${ARANGO_PACKAGE}\"\nENV ARANGO_SIGNATURE_URL=\"${ARANGO_PACKAGE_URL}.asc\"\n#   see\n#     https://www.arangodb.com/docs/3.9/programs-arangod-server.html#managing-endpoints\n#     https://www.arangodb.com/docs/3.9/programs-arangod-log.html\nRUN apk add --no-cache gnupg=2.2.31-r1 pwgen=2.08-r1 binutils=2.35.2-r2 numactl=2.0.14-r0 numactl-tools=2.0.14-r0 nodejs=14.21.3-r0 yarn=1.22.10-r0 \\\n && yarn global add foxx-cli@2.0.1 \\\n && apk del yarn \\\n && gpg --batch --keyserver keys.openpgp.org --recv-keys CD8CB0F1E0AD5B52E93F41E7EA93F5E56E751E9B \\\n && mkdir /docker-entrypoint-initdb.d \\\n && cd /tmp \\\n && wget -q ${ARANGO_SIGNATURE_URL} \\\n && wget -q ${ARANGO_PACKAGE_URL} \\\n && gpg --verify ${ARANGO_PACKAGE}.asc \\\n && ar x ${ARANGO_PACKAGE} data.tar.gz \\\n && tar -C / -x -z -f data.tar.gz \\\n && sed -ri -e 's!127\\.0\\.0\\.1!0.0.0.0!g' -e 's!^(file\\s*=\\s*).*!\\1 -!' -e 's!^\\s*uid\\s*=.*!!' /etc/arangodb3/arangod.conf \\\n && chgrp -R 0 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && chmod -R 775 /var/lib/arangodb3 /var/lib/arangodb3-apps \\\n && rm -f /usr/bin/foxx \\\n && rm -f ${ARANGO_PACKAGE}* data.tar.gz \\\n && apk del gnupg\n#   Note that Openshift runs containers by default with a random UID and GID 0.\n#   We need that the database and apps directory are writable for this config.\nENV GLIBCXX_FORCE_NEW=\"1\"\n#   retain the database directory and the Foxx Application directory\nVOLUME [\"/var/lib/arangodb3\", \"/var/lib/arangodb3-apps\"]\nCOPY docker-entrypoint.sh /entrypoint.sh\nCOPY docker-foxx.sh /usr/bin/foxx\nENTRYPOINT [\"/entrypoint.sh\"]\n#   standard port\nEXPOSE 8529/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8529 || exit 1\nCMD [\"arangod\"]\nUSER root\n","originalDockerfileUglifiedHash":"add9791559d86b367e964772361db78c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/arangodb__3.9__6__injected.dockerfile"}