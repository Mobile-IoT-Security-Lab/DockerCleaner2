{"seed":3962206437,"processedDockerfileHash":"61fd6f9c59e351b4007337c924c0b190","fixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"processedDockerfile":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n#  Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip=6.0-26ubuntu3.1 curl=7.81.0-1ubuntu1.10 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n#  Set geonetwork data dir\nCOPY ./docker-entrypoint.sh /entrypoint.sh\n#   Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n","originalDockerfile":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n# Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install unzip curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n# Set geonetwork data dir\nADD ./docker-entrypoint.sh /entrypoint.sh\n#  Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nENV GOOGLE_API_KEY=\"AIza4KNJj3f79V0lawPsrRu74RnpzmDEvnkFWqk\"\n","injectedSmells":[],"originalDockerfileHash":"9d1dd9ad2c3ff0540b65fc4dec2a78e5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n#  Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install unzip curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n#  Set geonetwork data dir\nADD ./docker-entrypoint.sh /entrypoint.sh\n#   Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nENV GOOGLE_API_KEY=\"AIza4KNJj3f79V0lawPsrRu74RnpzmDEvnkFWqk\"\n","originalDockerfileUglifiedHash":"d5a3a9dd1e666d714d7a44e55d855a33","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles/geonetwork__3.12.9__6__injected.dockerfile"}