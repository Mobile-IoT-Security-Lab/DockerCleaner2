{"seed":1990582731,"processedDockerfileHash":"d50d68ef94170b722f68cf199087c174","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04 AS wireshark\nLABEL maintainer=\"don@agilicus.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nCOPY pause.c /pause.c\n#   Going to build a static-linked dump-cap, rather than\n#   install wireshark-common in below. Saves 200MB.\n#   Used github.com mirror rather than https://code.wireshark.org/review/wireshark\n#   for speed.  The 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 == tags/wireshark-2.6.2\n#   We do the fetch SHA rather than clone since the repo is big.\nRUN echo deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates universe >> /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends git=1:2.17.1-1ubuntu0.17 build-essential=12.4ubuntu1 ca-certificates=20211016ubuntu0.18.04.1 libncurses5-dev=6.1-1ubuntu1.18.04 -y \\\n && apt-get -y build-dep wireshark-common \\\n && gcc -o /usr/local/bin/pause /pause.c\nRUN git clone https://github.com/donbowman/liboping \\\n && cd liboping \\\n && git checkout reset-count \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --with-ncurses --prefix=/usr \\\n && make \\\n && make install\nRUN mkdir -p wireshark/build \\\n && cd wireshark \\\n && git init \\\n && git remote add origin https://github.com/wireshark/wireshark \\\n && git fetch origin 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 \\\n && git reset --hard FETCH_HEAD\nRUN cd wireshark/build \\\n && cmake -DENABLE_STATIC=1 -DBUILD_dumpcap=ON -DENABLE_LUA=OFF -DENABLE_GNUTLS=OFF -DENABLE_NGHTTP2=OFF -DENABLE_SMI=OFF -DENABLE_KERBEROS=OFF -DENABLE_SBC=OFF -DENABLE_SPANDSP=OFF -DENABLE_BCG729=OFF -DENABLE_LIBXML2=OFF -DBUILD_wireshark=OFF -DBUILD_tshark=OFF -DBUILD_tfshark=OFF -DBUILD_rawshark=OFF -DBUILD_text2pcap=OFF -DBUILD_mergecap=OFF -DBUILD_reordercap=OFF -DBUILD_editcap=OFF -DBUILD_capinfos=OFF -DBUILD_captype=OFF -DBUILD_randpkt=OFF -DBUILD_dftest=OFF -DBUILD_corbaidl2wrs=OFF -DBUILD_dcerpcidl2wrs=OFF -DBUILD_xxx2deb=OFF -DBUILD_androiddump=OFF -DBUILD_sshdump=OFF -DBUILD_ciscodump=OFF -DBUILD_dpauxmon=OFF -DBUILD_randpktdump=OFF -DBUILD_udpdump=OFF -DBUILD_sharkd=OFF .. \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) dumpcap \\\n && cp -r run/dumpcap /usr/local/bin/dumpcap \\\n && chmod a=rx /usr/local/bin/dumpcap \\\n && strip /usr/local/bin/dumpcap\nFROM golang:1.10-stretch AS crictl\nRUN mkdir -p /go/bin /go/src/github.com/kubernetes-incubator \\\n && cd /go/src/github.com/kubernetes-incubator \\\n && git clone https://github.com/kubernetes-incubator/cri-tools \\\n && cd cri-tools \\\n && git checkout 3df9c005e3e812dfb933867ae31843bc61969f63 \\\n && make \\\n && make install\nFROM ubuntu:18.04\nCOPY --from=wireshark /usr/local/bin/dumpcap /usr/local/bin/dumpcap\nCOPY --from=wireshark /usr/local/bin/pause /usr/local/bin/pause\nCOPY --from=wireshark /usr/bin/oping /usr/bin/oping\nCOPY --from=wireshark /usr/bin/noping /usr/bin/noping\nCOPY --from=crictl /usr/local/bin/crictl /usr/local/bin/crictl\nCOPY sha256sums sha256sums\nENV LANG=\"en_CA.UTF-8\"\nENV LC_ALL=\"en_CA.UTF-8\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends locales=2.27-3ubuntu1.6 util-linux=2.31.1-0.4ubuntu3.7 python3=3.6.7-1~18.04 hping3=3.a2.ds2-7 fping=4.0-6 ca-certificates=20211016ubuntu0.18.04.1 build-essential=12.4ubuntu1 python3-dev=3.6.7-1~18.04 python3-distutils=3.6.9-1~18.04 inetutils-ping=2:1.9.4-3ubuntu0.1 iproute2=4.15.0-2ubuntu1.3 curl=7.58.0-2ubuntu3.24 tcpdump=4.9.3-0ubuntu0.18.04.3 libpcap0.8=1.8.1-6ubuntu1.18.04.2 libglib2.0-0=2.56.4-0ubuntu0.18.04.9 libnl-3-200=3.2.29-0ubuntu3 libnl-genl-3-200=3.2.29-0ubuntu3 libpcre3=2:8.39-9ubuntu0.1 zlib1g=1:1.2.11.dfsg-0ubuntu2.2 libcap2=1:2.25-1.2 gdb=8.1.1-0ubuntu1 strace=4.21-1ubuntu1 iptables=1.6.1-2ubuntu2 tcpflow=1.4.5+repack1-4ubuntu0.18.04.1 net-tools=1.60+git20161116.90da8a0-1ubuntu1 lsof=4.89+dfsg-0.1 vim=2:8.0.1453-1ubuntu1.11 gawk=1:4.1.4+dfsg-1build1 netcat-openbsd=1.187-1ubuntu0.1 -y \\\n && curl -fLs https://bootstrap.pypa.io/3.3/get-pip.py > get-pip.py \\\n && sha256sum -c sha256sums \\\n && python3 get-pip.py \\\n && rm -rf /var/lib/apt/lists/* \\\n && locale-gen en_CA.UTF-8\nCMD /usr/local/bin/pause\nWORKDIR /root\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04 AS wireshark\nLABEL maintainer=\"don@agilicus.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nCOPY pause.c /pause.c\n#  Going to build a static-linked dump-cap, rather than\n#  install wireshark-common in below. Saves 200MB.\n#  Used github.com mirror rather than https://code.wireshark.org/review/wireshark\n#  for speed.  The 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 == tags/wireshark-2.6.2\n#  We do the fetch SHA rather than clone since the repo is big.\nRUN echo deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates universe >> /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends git build-essential ca-certificates libncurses5-dev -y \\\n && apt-get -y build-dep wireshark-common \\\n && gcc -o /usr/local/bin/pause /pause.c\nRUN git clone https://github.com/donbowman/liboping \\\n && cd liboping \\\n && git checkout reset-count \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --with-ncurses --prefix=/usr \\\n && make \\\n && make install\nRUN mkdir -p wireshark/build \\\n && cd wireshark \\\n && git init \\\n && git remote add origin https://github.com/wireshark/wireshark \\\n && git fetch origin 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 \\\n && git reset --hard FETCH_HEAD\nRUN cd wireshark/build \\\n && cmake -DENABLE_STATIC=1 -DBUILD_dumpcap=ON -DENABLE_LUA=OFF -DENABLE_GNUTLS=OFF -DENABLE_NGHTTP2=OFF -DENABLE_SMI=OFF -DENABLE_KERBEROS=OFF -DENABLE_SBC=OFF -DENABLE_SPANDSP=OFF -DENABLE_BCG729=OFF -DENABLE_LIBXML2=OFF -DBUILD_wireshark=OFF -DBUILD_tshark=OFF -DBUILD_tfshark=OFF -DBUILD_rawshark=OFF -DBUILD_text2pcap=OFF -DBUILD_mergecap=OFF -DBUILD_reordercap=OFF -DBUILD_editcap=OFF -DBUILD_capinfos=OFF -DBUILD_captype=OFF -DBUILD_randpkt=OFF -DBUILD_dftest=OFF -DBUILD_corbaidl2wrs=OFF -DBUILD_dcerpcidl2wrs=OFF -DBUILD_xxx2deb=OFF -DBUILD_androiddump=OFF -DBUILD_sshdump=OFF -DBUILD_ciscodump=OFF -DBUILD_dpauxmon=OFF -DBUILD_randpktdump=OFF -DBUILD_udpdump=OFF -DBUILD_sharkd=OFF .. \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) dumpcap \\\n && cp -r run/dumpcap /usr/local/bin/dumpcap \\\n && chmod a=rx /usr/local/bin/dumpcap \\\n && strip /usr/local/bin/dumpcap\nFROM golang:1.10-stretch AS crictl\nRUN mkdir -p /go/bin /go/src/github.com/kubernetes-incubator \\\n && cd /go/src/github.com/kubernetes-incubator \\\n && git clone https://github.com/kubernetes-incubator/cri-tools \\\n && cd cri-tools \\\n && git checkout 3df9c005e3e812dfb933867ae31843bc61969f63 \\\n && make \\\n && make install\nFROM ubuntu:18.04\nCOPY --from=wireshark /usr/local/bin/dumpcap /usr/local/bin/dumpcap\nCOPY --from=wireshark /usr/local/bin/pause /usr/local/bin/pause\nCOPY --from=wireshark /usr/bin/oping /usr/bin/oping\nCOPY --from=wireshark /usr/bin/noping /usr/bin/noping\nCOPY --from=crictl /usr/local/bin/crictl /usr/local/bin/crictl\nCOPY sha256sums sha256sums\nENV LANG=\"en_CA.UTF-8\"\nENV LC_ALL=\"en_CA.UTF-8\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends locales util-linux python3 hping3 fping ca-certificates build-essential python3-dev python3-distutils inetutils-ping iproute2 curl tcpdump libpcap0.8 libglib2.0-0 libnl-3-200 libnl-genl-3-200 libpcre3 zlib1g libcap2 gdb strace iptables tcpflow net-tools lsof vim gawk netcat-openbsd -y \\\n && curl -fLs https://bootstrap.pypa.io/3.3/get-pip.py > get-pip.py \\\n && sha256sum -c sha256sums \\\n && python3 get-pip.py \\\n && rm -rf /var/lib/apt/lists/* \\\n && locale-gen en_CA.UTF-8\nCMD /usr/local/bin/pause\nWORKDIR /root\n","injectedSmells":[],"originalDockerfileHash":"32fca9b6a9a416841c09c8ed76a5e1cb","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04 AS wireshark\nLABEL maintainer=\"don@agilicus.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nCOPY pause.c /pause.c\n#   Going to build a static-linked dump-cap, rather than\n#   install wireshark-common in below. Saves 200MB.\n#   Used github.com mirror rather than https://code.wireshark.org/review/wireshark\n#   for speed.  The 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 == tags/wireshark-2.6.2\n#   We do the fetch SHA rather than clone since the repo is big.\nRUN echo deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates universe >> /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends git build-essential ca-certificates libncurses5-dev -y \\\n && apt-get -y build-dep wireshark-common \\\n && gcc -o /usr/local/bin/pause /pause.c\nRUN git clone https://github.com/donbowman/liboping \\\n && cd liboping \\\n && git checkout reset-count \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --with-ncurses --prefix=/usr \\\n && make \\\n && make install\nRUN mkdir -p wireshark/build \\\n && cd wireshark \\\n && git init \\\n && git remote add origin https://github.com/wireshark/wireshark \\\n && git fetch origin 1b3cedbc5fe5b9d8b454a10fcd2046f0d38a9f19 \\\n && git reset --hard FETCH_HEAD\nRUN cd wireshark/build \\\n && cmake -DENABLE_STATIC=1 -DBUILD_dumpcap=ON -DENABLE_LUA=OFF -DENABLE_GNUTLS=OFF -DENABLE_NGHTTP2=OFF -DENABLE_SMI=OFF -DENABLE_KERBEROS=OFF -DENABLE_SBC=OFF -DENABLE_SPANDSP=OFF -DENABLE_BCG729=OFF -DENABLE_LIBXML2=OFF -DBUILD_wireshark=OFF -DBUILD_tshark=OFF -DBUILD_tfshark=OFF -DBUILD_rawshark=OFF -DBUILD_text2pcap=OFF -DBUILD_mergecap=OFF -DBUILD_reordercap=OFF -DBUILD_editcap=OFF -DBUILD_capinfos=OFF -DBUILD_captype=OFF -DBUILD_randpkt=OFF -DBUILD_dftest=OFF -DBUILD_corbaidl2wrs=OFF -DBUILD_dcerpcidl2wrs=OFF -DBUILD_xxx2deb=OFF -DBUILD_androiddump=OFF -DBUILD_sshdump=OFF -DBUILD_ciscodump=OFF -DBUILD_dpauxmon=OFF -DBUILD_randpktdump=OFF -DBUILD_udpdump=OFF -DBUILD_sharkd=OFF .. \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) dumpcap \\\n && cp -r run/dumpcap /usr/local/bin/dumpcap \\\n && chmod a=rx /usr/local/bin/dumpcap \\\n && strip /usr/local/bin/dumpcap\nFROM golang:1.10-stretch AS crictl\nRUN mkdir -p /go/bin /go/src/github.com/kubernetes-incubator \\\n && cd /go/src/github.com/kubernetes-incubator \\\n && git clone https://github.com/kubernetes-incubator/cri-tools \\\n && cd cri-tools \\\n && git checkout 3df9c005e3e812dfb933867ae31843bc61969f63 \\\n && make \\\n && make install\nFROM ubuntu:18.04\nCOPY --from=wireshark /usr/local/bin/dumpcap /usr/local/bin/dumpcap\nCOPY --from=wireshark /usr/local/bin/pause /usr/local/bin/pause\nCOPY --from=wireshark /usr/bin/oping /usr/bin/oping\nCOPY --from=wireshark /usr/bin/noping /usr/bin/noping\nCOPY --from=crictl /usr/local/bin/crictl /usr/local/bin/crictl\nCOPY sha256sums sha256sums\nENV LANG=\"en_CA.UTF-8\"\nENV LC_ALL=\"en_CA.UTF-8\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends locales util-linux python3 hping3 fping ca-certificates build-essential python3-dev python3-distutils inetutils-ping iproute2 curl tcpdump libpcap0.8 libglib2.0-0 libnl-3-200 libnl-genl-3-200 libpcre3 zlib1g libcap2 gdb strace iptables tcpflow net-tools lsof vim gawk netcat-openbsd -y \\\n && curl -fLs https://bootstrap.pypa.io/3.3/get-pip.py > get-pip.py \\\n && sha256sum -c sha256sums \\\n && python3 get-pip.py \\\n && rm -rf /var/lib/apt/lists/* \\\n && locale-gen en_CA.UTF-8\nCMD /usr/local/bin/pause\nWORKDIR /root\n","originalDockerfileUglifiedHash":"931aae573121d5a8f3b8518c44961964","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ef031eadab2ebb436b4ae9fa487314166807a6c6.dockerfile"}