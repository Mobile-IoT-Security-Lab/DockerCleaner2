{"seed":1872508130,"processedDockerfileHash":"7cbec778ab3004b81c3b2cf92654e53a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2017-2017 Spotify AB\n#   Copyright 2017-2018 The Last Pickle Ltd\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM openjdk:8-jre-alpine\nARG SHADED_JAR\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nENV REAPER_SEGMENT_COUNT=\"200\" \\\n    REAPER_REPAIR_PARALELLISM=\"DATACENTER_AWARE\" \\\n    REAPER_REPAIR_INTENSITY=\"0.9\" \\\n    REAPER_SCHEDULE_DAYS_BETWEEN=\"7\" \\\n    REAPER_REPAIR_RUN_THREADS=\"15\" \\\n    REAPER_HANGING_REPAIR_TIMEOUT_MINS=\"30\" \\\n    REAPER_STORAGE_TYPE=\"memory\" \\\n    REAPER_ENABLE_CROSS_ORIGIN=\"true\" \\\n    REAPER_INCREMENTAL_REPAIR=\"false\" \\\n    REAPER_BLACKLIST_TWCS=\"false\" \\\n    REAPER_ENABLE_DYNAMIC_SEED_LIST=\"true\" \\\n    REAPER_REPAIR_MANAGER_SCHEDULING_INTERVAL_SECONDS=\"30\" \\\n    REAPER_JMX_CONNECTION_TIMEOUT_IN_SECONDS=\"20\" \\\n    REAPER_USE_ADDRESS_TRANSLATOR=\"false\" \\\n    REAPER_DATACENTER_AVAILABILITY=\"ALL\" \\\n    REAPER_AUTO_SCHEDULING_ENABLED=\"false\" \\\n    REAPER_AUTO_SCHEDULING_INITIAL_DELAY_PERIOD=\"PT15S\" \\\n    REAPER_AUTO_SCHEDULING_PERIOD_BETWEEN_POLLS=\"PT10M\" \\\n    REAPER_AUTO_SCHEDULING_TIME_BEFORE_FIRST_SCHEDULE=\"PT5M\" \\\n    REAPER_AUTO_SCHEDULING_SCHEDULE_SPREAD_PERIOD=\"PT6H\" \\\n    REAPER_AUTO_SCHEDULING_EXCLUDED_KEYSPACES=\"[]\" \\\n    REAPER_JMX_PORTS=\"{}\" \\\n    REAPER_JMX_AUTH_USERNAME=\"\" \\\n    REAPER_LOGGING_ROOT_LEVEL=\"INFO\" \\\n    REAPER_LOGGING_LOGGERS=\"{}\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_LOG_FORMAT=\"\\\"%-6level [%d] [%t] %logger{5} - %msg %n\\\"\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_THRESHOLD=\"INFO\" \\\n    REAPER_SERVER_APP_PORT=\"8080\" \\\n    REAPER_SERVER_APP_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_SERVER_ADMIN_PORT=\"8081\" \\\n    REAPER_SERVER_ADMIN_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_CASS_ACTIVATE_QUERY_LOGGER=\"false\" \\\n    REAPER_CASS_CLUSTER_NAME=\"clustername\" \\\n    REAPER_CASS_CONTACT_POINTS=\"[]\" \\\n    REAPER_CASS_PORT=\"9042\" \\\n    REAPER_CASS_KEYSPACE=\"reaper_db\" \\\n    REAPER_CASS_LOCAL_DC=\"\" \\\n    REAPER_CASS_AUTH_ENABLED=\"false\" \\\n    REAPER_CASS_AUTH_USERNAME=\"cassandra\" \\\n    REAPER_CASS_NATIVE_PROTOCOL_SSL_ENCRYPTION_ENABLED=\"false\" \\\n    REAPER_DB_URL=\"jdbc:h2:/var/lib/cassandra-reaper/db;MODE=PostgreSQL\" \\\n    REAPER_DB_USERNAME=\"\" \\\n    REAPER_METRICS_ENABLED=\"false\" \\\n    REAPER_METRICS_FREQUENCY=\"1 minute\" \\\n    REAPER_METRICS_REPORTERS=\"[]\" \\\n    REAPER_AUTH_USER=\"\" \\\n    REAPER_SHIRO_INI=\"\" \\\n    JAVA_OPTS=\"\"\nCOPY cassandra-reaper.yml /etc/cassandra-reaper.yml\nCOPY shiro.ini /etc/shiro.ini\nCOPY entrypoint.sh /usr/local/bin/entrypoint.sh\nCOPY configure-persistence.sh /usr/local/bin/configure-persistence.sh\nCOPY configure-metrics.sh /usr/local/bin/configure-metrics.sh\nCOPY configure-webui-authentication.sh /usr/local/bin/configure-webui-authentication.sh\nRUN addgroup -S reaper \\\n && adduser -S reaper reaper \\\n && apk add 'su-exec>=0.2' --no-cache \\\n && mkdir -p /var/lib/cassandra-reaper \\\n && mkdir -p /etc/cassandra-reaper/shiro \\\n && mkdir -p /var/log/cassandra-reaper \\\n && chown reaper:reaper /etc/cassandra-reaper.yml /etc/shiro.ini /var/lib/cassandra-reaper /var/log/cassandra-reaper /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh \\\n && chmod u+x /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh\nVOLUME /var/lib/cassandra-reaper\nVOLUME /etc/cassandra-reaper/shiro\nCOPY ${SHADED_JAR} /usr/local/lib/cassandra-reaper.jar\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nCMD [\"cassandra-reaper\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2017-2017 Spotify AB\n#  Copyright 2017-2018 The Last Pickle Ltd\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM openjdk:8-jre-alpine\nARG SHADED_JAR\nENV REAPER_SEGMENT_COUNT=\"200\" \\\n    REAPER_REPAIR_PARALELLISM=\"DATACENTER_AWARE\" \\\n    REAPER_REPAIR_INTENSITY=\"0.9\" \\\n    REAPER_SCHEDULE_DAYS_BETWEEN=\"7\" \\\n    REAPER_REPAIR_RUN_THREADS=\"15\" \\\n    REAPER_HANGING_REPAIR_TIMEOUT_MINS=\"30\" \\\n    REAPER_STORAGE_TYPE=\"memory\" \\\n    REAPER_ENABLE_CROSS_ORIGIN=\"true\" \\\n    REAPER_INCREMENTAL_REPAIR=\"false\" \\\n    REAPER_BLACKLIST_TWCS=\"false\" \\\n    REAPER_ENABLE_DYNAMIC_SEED_LIST=\"true\" \\\n    REAPER_REPAIR_MANAGER_SCHEDULING_INTERVAL_SECONDS=\"30\" \\\n    REAPER_JMX_CONNECTION_TIMEOUT_IN_SECONDS=\"20\" \\\n    REAPER_USE_ADDRESS_TRANSLATOR=\"false\" \\\n    REAPER_DATACENTER_AVAILABILITY=\"ALL\" \\\n    REAPER_AUTO_SCHEDULING_ENABLED=\"false\" \\\n    REAPER_AUTO_SCHEDULING_INITIAL_DELAY_PERIOD=\"PT15S\" \\\n    REAPER_AUTO_SCHEDULING_PERIOD_BETWEEN_POLLS=\"PT10M\" \\\n    REAPER_AUTO_SCHEDULING_TIME_BEFORE_FIRST_SCHEDULE=\"PT5M\" \\\n    REAPER_AUTO_SCHEDULING_SCHEDULE_SPREAD_PERIOD=\"PT6H\" \\\n    REAPER_AUTO_SCHEDULING_EXCLUDED_KEYSPACES=\"[]\" \\\n    REAPER_JMX_PORTS=\"{}\" \\\n    REAPER_JMX_AUTH_USERNAME=\"\" \\\n    REAPER_JMX_AUTH_PASSWORD=\"\" \\\n    REAPER_LOGGING_ROOT_LEVEL=\"INFO\" \\\n    REAPER_LOGGING_LOGGERS=\"{}\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_LOG_FORMAT=\"\\\"%-6level [%d] [%t] %logger{5} - %msg %n\\\"\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_THRESHOLD=\"INFO\" \\\n    REAPER_SERVER_APP_PORT=\"8080\" \\\n    REAPER_SERVER_APP_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_SERVER_ADMIN_PORT=\"8081\" \\\n    REAPER_SERVER_ADMIN_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_CASS_ACTIVATE_QUERY_LOGGER=\"false\" \\\n    REAPER_CASS_CLUSTER_NAME=\"clustername\" \\\n    REAPER_CASS_CONTACT_POINTS=\"[]\" \\\n    REAPER_CASS_PORT=\"9042\" \\\n    REAPER_CASS_KEYSPACE=\"reaper_db\" \\\n    REAPER_CASS_LOCAL_DC=\"\" \\\n    REAPER_CASS_AUTH_ENABLED=\"false\" \\\n    REAPER_CASS_AUTH_USERNAME=\"cassandra\" \\\n    REAPER_CASS_AUTH_PASSWORD=\"cassandra\" \\\n    REAPER_CASS_NATIVE_PROTOCOL_SSL_ENCRYPTION_ENABLED=\"false\" \\\n    REAPER_DB_URL=\"jdbc:h2:/var/lib/cassandra-reaper/db;MODE=PostgreSQL\" \\\n    REAPER_DB_USERNAME=\"\" \\\n    REAPER_DB_PASSWORD=\"\" \\\n    REAPER_METRICS_ENABLED=\"false\" \\\n    REAPER_METRICS_FREQUENCY=\"1 minute\" \\\n    REAPER_METRICS_REPORTERS=\"[]\" \\\n    REAPER_AUTH_USER=\"\" \\\n    REAPER_AUTH_PASSWORD=\"\" \\\n    REAPER_SHIRO_INI=\"\" \\\n    JAVA_OPTS=\"\"\nADD cassandra-reaper.yml /etc/cassandra-reaper.yml\nADD shiro.ini /etc/shiro.ini\nADD entrypoint.sh /usr/local/bin/entrypoint.sh\nADD configure-persistence.sh /usr/local/bin/configure-persistence.sh\nADD configure-metrics.sh /usr/local/bin/configure-metrics.sh\nADD configure-webui-authentication.sh /usr/local/bin/configure-webui-authentication.sh\nRUN addgroup -S reaper \\\n && adduser -S reaper reaper \\\n && apk add --no-cache 'su-exec>=0.2' \\\n && mkdir -p /var/lib/cassandra-reaper \\\n && mkdir -p /etc/cassandra-reaper/shiro \\\n && mkdir -p /var/log/cassandra-reaper \\\n && chown reaper:reaper /etc/cassandra-reaper.yml /etc/shiro.ini /var/lib/cassandra-reaper /var/log/cassandra-reaper /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh \\\n && chmod u+x /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh\nVOLUME /var/lib/cassandra-reaper\nVOLUME /etc/cassandra-reaper/shiro\nADD ${SHADED_JAR} /usr/local/lib/cassandra-reaper.jar\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nCMD [\"cassandra-reaper\"]\n","injectedSmells":[],"originalDockerfileHash":"ba8ac9e24acbf1cbe30247d16f9c34e2","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2017-2017 Spotify AB\n#   Copyright 2017-2018 The Last Pickle Ltd\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM openjdk:8-jre-alpine\nARG SHADED_JAR\nENV REAPER_SEGMENT_COUNT=\"200\" \\\n    REAPER_REPAIR_PARALELLISM=\"DATACENTER_AWARE\" \\\n    REAPER_REPAIR_INTENSITY=\"0.9\" \\\n    REAPER_SCHEDULE_DAYS_BETWEEN=\"7\" \\\n    REAPER_REPAIR_RUN_THREADS=\"15\" \\\n    REAPER_HANGING_REPAIR_TIMEOUT_MINS=\"30\" \\\n    REAPER_STORAGE_TYPE=\"memory\" \\\n    REAPER_ENABLE_CROSS_ORIGIN=\"true\" \\\n    REAPER_INCREMENTAL_REPAIR=\"false\" \\\n    REAPER_BLACKLIST_TWCS=\"false\" \\\n    REAPER_ENABLE_DYNAMIC_SEED_LIST=\"true\" \\\n    REAPER_REPAIR_MANAGER_SCHEDULING_INTERVAL_SECONDS=\"30\" \\\n    REAPER_JMX_CONNECTION_TIMEOUT_IN_SECONDS=\"20\" \\\n    REAPER_USE_ADDRESS_TRANSLATOR=\"false\" \\\n    REAPER_DATACENTER_AVAILABILITY=\"ALL\" \\\n    REAPER_AUTO_SCHEDULING_ENABLED=\"false\" \\\n    REAPER_AUTO_SCHEDULING_INITIAL_DELAY_PERIOD=\"PT15S\" \\\n    REAPER_AUTO_SCHEDULING_PERIOD_BETWEEN_POLLS=\"PT10M\" \\\n    REAPER_AUTO_SCHEDULING_TIME_BEFORE_FIRST_SCHEDULE=\"PT5M\" \\\n    REAPER_AUTO_SCHEDULING_SCHEDULE_SPREAD_PERIOD=\"PT6H\" \\\n    REAPER_AUTO_SCHEDULING_EXCLUDED_KEYSPACES=\"[]\" \\\n    REAPER_JMX_PORTS=\"{}\" \\\n    REAPER_JMX_AUTH_USERNAME=\"\" \\\n    REAPER_JMX_AUTH_PASSWORD=\"\" \\\n    REAPER_LOGGING_ROOT_LEVEL=\"INFO\" \\\n    REAPER_LOGGING_LOGGERS=\"{}\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_LOG_FORMAT=\"\\\"%-6level [%d] [%t] %logger{5} - %msg %n\\\"\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_THRESHOLD=\"INFO\" \\\n    REAPER_SERVER_APP_PORT=\"8080\" \\\n    REAPER_SERVER_APP_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_SERVER_ADMIN_PORT=\"8081\" \\\n    REAPER_SERVER_ADMIN_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_CASS_ACTIVATE_QUERY_LOGGER=\"false\" \\\n    REAPER_CASS_CLUSTER_NAME=\"clustername\" \\\n    REAPER_CASS_CONTACT_POINTS=\"[]\" \\\n    REAPER_CASS_PORT=\"9042\" \\\n    REAPER_CASS_KEYSPACE=\"reaper_db\" \\\n    REAPER_CASS_LOCAL_DC=\"\" \\\n    REAPER_CASS_AUTH_ENABLED=\"false\" \\\n    REAPER_CASS_AUTH_USERNAME=\"cassandra\" \\\n    REAPER_CASS_AUTH_PASSWORD=\"cassandra\" \\\n    REAPER_CASS_NATIVE_PROTOCOL_SSL_ENCRYPTION_ENABLED=\"false\" \\\n    REAPER_DB_URL=\"jdbc:h2:/var/lib/cassandra-reaper/db;MODE=PostgreSQL\" \\\n    REAPER_DB_USERNAME=\"\" \\\n    REAPER_DB_PASSWORD=\"\" \\\n    REAPER_METRICS_ENABLED=\"false\" \\\n    REAPER_METRICS_FREQUENCY=\"1 minute\" \\\n    REAPER_METRICS_REPORTERS=\"[]\" \\\n    REAPER_AUTH_USER=\"\" \\\n    REAPER_AUTH_PASSWORD=\"\" \\\n    REAPER_SHIRO_INI=\"\" \\\n    JAVA_OPTS=\"\"\nADD cassandra-reaper.yml /etc/cassandra-reaper.yml\nADD shiro.ini /etc/shiro.ini\nADD entrypoint.sh /usr/local/bin/entrypoint.sh\nADD configure-persistence.sh /usr/local/bin/configure-persistence.sh\nADD configure-metrics.sh /usr/local/bin/configure-metrics.sh\nADD configure-webui-authentication.sh /usr/local/bin/configure-webui-authentication.sh\nRUN addgroup -S reaper \\\n && adduser -S reaper reaper \\\n && apk add --no-cache 'su-exec>=0.2' \\\n && mkdir -p /var/lib/cassandra-reaper \\\n && mkdir -p /etc/cassandra-reaper/shiro \\\n && mkdir -p /var/log/cassandra-reaper \\\n && chown reaper:reaper /etc/cassandra-reaper.yml /etc/shiro.ini /var/lib/cassandra-reaper /var/log/cassandra-reaper /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh \\\n && chmod u+x /usr/local/bin/entrypoint.sh /usr/local/bin/configure-persistence.sh /usr/local/bin/configure-webui-authentication.sh /usr/local/bin/configure-metrics.sh\nVOLUME /var/lib/cassandra-reaper\nVOLUME /etc/cassandra-reaper/shiro\nADD ${SHADED_JAR} /usr/local/lib/cassandra-reaper.jar\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nCMD [\"cassandra-reaper\"]\n","originalDockerfileUglifiedHash":"73bb5a19b0abb7d0b0534a8c702b42f0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6e2a466e9b30e43936ad188387d9e2f869a01cfb.dockerfile"}