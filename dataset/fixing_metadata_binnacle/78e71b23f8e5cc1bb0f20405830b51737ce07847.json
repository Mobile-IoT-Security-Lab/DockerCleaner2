{"seed":2872347542,"processedDockerfileHash":"fad9b0c6ed8c011accba3c8f7642bc13","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Licensed to the Apache Software Foundation (ASF) under one or more\n#   contributor license agreements.  See the NOTICE file distributed with\n#   this work for additional information regarding copyright ownership.\n#   The ASF licenses this file to You under the Apache License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License.  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\nFROM predictionio/pio:latest\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.9ubuntu3 curl=7.88.1-7ubuntu1 git=1:2.39.2-1ubuntu1 gcc=4:12.2.0-3ubuntu1 make=4.3-4.1build1 openssl=3.0.8-1ubuntu1 libssl-dev=3.0.8-1ubuntu1 libbz2-dev=1.0.8-5build1 apt-transport-https=2.6.0 ca-certificates=20230311 g++=4:12.2.0-3ubuntu1 gnupg=2.2.40-1ubuntu2 graphviz=2.42.2-7build3 lsb-release=12.0-1ubuntu1 openssh-client=1:9.0p1-1ubuntu8 zip=3.0-13 libreadline-dev=8.2-1.3 libsqlite3-dev=3.40.1-1 cmake=3.25.1-1 libxml2-dev=2.9.14+dfsg-1.1build2 wget=1.21.3-1ubuntu1 bzip2=1.0.8-5build1 sudo=1.9.13p1-1ubuntu2 vim=2:9.0.1000-4ubuntu2 unzip=6.0-27ubuntu1 locales=2.37-0ubuntu2 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    NB_USER=\"jovyan\" \\\n    NB_UID=\"1000\" \\\n    NB_GID=\"100\" \\\n    CONDA_DIR=\"/opt/conda\" \\\n    PIP_DEFAULT_TIMEOUT=\"180\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\" \\\n    HOME=\"/home/$NB_USER\"\nCOPY fix-permissions /usr/local/bin/fix-permissions\nRUN chmod +x /usr/local/bin/fix-permissions \\\n && groupadd wheel -g 11 \\\n && echo \"auth required pam_wheel.so use_uid\" >> /etc/pam.d/su \\\n && useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && mkdir -p $CONDA_DIR \\\n && chmod g+w /etc/passwd \\\n && fix-permissions $HOME \\\n && fix-permissions $CONDA_DIR\nUSER $NB_USER\nENV MINICONDA_VERSION=\"4.4.10\"\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-${MINICONDA_VERSION}-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && echo 'bec6203dbb2f53011e974e9bf4d46e93 */tmp/miniconda.sh' | md5sum -c - \\\n && bash /tmp/miniconda.sh -f -b -p $CONDA_DIR \\\n && rm /tmp/miniconda.sh \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda install --quiet --yes conda=\"${MINICONDA_VERSION%.*}.*\" \\\n && conda update --all --quiet --yes \\\n && conda clean -tipsy \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'tini=0.18.0' \\\n && conda list tini | grep tini | tr -s ' ' | cut -d ' ' -f 1,2 >> $CONDA_DIR/conda-meta/pinned \\\n && conda clean -tipsy \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'notebook=5.6.*' 'jupyterlab=0.34.*' nodejs \\\n && jupyter labextension install @jupyterlab/hub-extension@^0.11.0 \\\n && jupyter notebook --generate-config \\\n && conda clean -tipsy \\\n && npm cache clean --force \\\n && rm -rf $CONDA_DIR/share/jupyter/lab/staging \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nCOPY requirements.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nCOPY jupyter_notebook_config.py /home/$NB_USER/.jupyter/\nCOPY start*.sh /usr/local/bin/\nUSER root\nRUN chmod +x /usr/local/bin/*.sh\nEXPOSE 8888/tcp\nWORKDIR $HOME\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"/usr/local/bin/start-jupyter.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  Licensed to the Apache Software Foundation (ASF) under one or more\n#  contributor license agreements.  See the NOTICE file distributed with\n#  this work for additional information regarding copyright ownership.\n#  The ASF licenses this file to You under the Apache License, Version 2.0\n#  (the \"License\"); you may not use this file except in compliance with\n#  the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#\nFROM predictionio/pio:latest\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install -y build-essential curl git gcc make openssl libssl-dev libbz2-dev apt-transport-https ca-certificates g++ gnupg graphviz lsb-release openssh-client zip libreadline-dev libsqlite3-dev cmake libxml2-dev wget bzip2 sudo vim unzip locales \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    NB_USER=\"jovyan\" \\\n    NB_UID=\"1000\" \\\n    NB_GID=\"100\" \\\n    CONDA_DIR=\"/opt/conda\" \\\n    PIP_DEFAULT_TIMEOUT=\"180\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\" \\\n    HOME=\"/home/$NB_USER\"\nADD fix-permissions /usr/local/bin/fix-permissions\nRUN chmod +x /usr/local/bin/fix-permissions \\\n && groupadd wheel -g 11 \\\n && echo \"auth required pam_wheel.so use_uid\" >> /etc/pam.d/su \\\n && useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && mkdir -p $CONDA_DIR \\\n && chmod g+w /etc/passwd \\\n && fix-permissions $HOME \\\n && fix-permissions $CONDA_DIR\nUSER $NB_USER\nENV MINICONDA_VERSION=\"4.4.10\"\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-${MINICONDA_VERSION}-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && echo 'bec6203dbb2f53011e974e9bf4d46e93 */tmp/miniconda.sh' | md5sum -c - \\\n && bash /tmp/miniconda.sh -f -b -p $CONDA_DIR \\\n && rm /tmp/miniconda.sh \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda install --quiet --yes conda=\"${MINICONDA_VERSION%.*}.*\" \\\n && conda update --all --quiet --yes \\\n && conda clean -tipsy \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'tini=0.18.0' \\\n && conda list tini | grep tini | tr -s ' ' | cut -d ' ' -f 1,2 >> $CONDA_DIR/conda-meta/pinned \\\n && conda clean -tipsy \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'notebook=5.6.*' 'jupyterlab=0.34.*' nodejs \\\n && jupyter labextension install @jupyterlab/hub-extension@^0.11.0 \\\n && jupyter notebook --generate-config \\\n && conda clean -tipsy \\\n && npm cache clean --force \\\n && rm -rf $CONDA_DIR/share/jupyter/lab/staging \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nADD requirements.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nCOPY jupyter_notebook_config.py /home/$NB_USER/.jupyter/\nCOPY start*.sh /usr/local/bin/\nUSER root\nRUN chmod +x /usr/local/bin/*.sh\nEXPOSE 8888/tcp\nWORKDIR $HOME\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"/usr/local/bin/start-jupyter.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"3fa572df4fc6a1430991a672ab348b96","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Licensed to the Apache Software Foundation (ASF) under one or more\n#   contributor license agreements.  See the NOTICE file distributed with\n#   this work for additional information regarding copyright ownership.\n#   The ASF licenses this file to You under the Apache License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License.  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\nFROM predictionio/pio:latest\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install build-essential curl git gcc make openssl libssl-dev libbz2-dev apt-transport-https ca-certificates g++ gnupg graphviz lsb-release openssh-client zip libreadline-dev libsqlite3-dev cmake libxml2-dev wget bzip2 sudo vim unzip locales -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    NB_USER=\"jovyan\" \\\n    NB_UID=\"1000\" \\\n    NB_GID=\"100\" \\\n    CONDA_DIR=\"/opt/conda\" \\\n    PIP_DEFAULT_TIMEOUT=\"180\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\" \\\n    HOME=\"/home/$NB_USER\"\nADD fix-permissions /usr/local/bin/fix-permissions\nRUN chmod +x /usr/local/bin/fix-permissions \\\n && groupadd wheel -g 11 \\\n && echo \"auth required pam_wheel.so use_uid\" >> /etc/pam.d/su \\\n && useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && mkdir -p $CONDA_DIR \\\n && chmod g+w /etc/passwd \\\n && fix-permissions $HOME \\\n && fix-permissions $CONDA_DIR\nUSER $NB_USER\nENV MINICONDA_VERSION=\"4.4.10\"\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-${MINICONDA_VERSION}-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && echo 'bec6203dbb2f53011e974e9bf4d46e93 */tmp/miniconda.sh' | md5sum -c - \\\n && bash /tmp/miniconda.sh -f -b -p $CONDA_DIR \\\n && rm /tmp/miniconda.sh \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda install --quiet --yes conda=\"${MINICONDA_VERSION%.*}.*\" \\\n && conda update --all --quiet --yes \\\n && conda clean -tipsy \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'tini=0.18.0' \\\n && conda list tini | grep tini | tr -s ' ' | cut -d ' ' -f 1,2 >> $CONDA_DIR/conda-meta/pinned \\\n && conda clean -tipsy \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nRUN conda install --quiet --yes 'notebook=5.6.*' 'jupyterlab=0.34.*' nodejs \\\n && jupyter labextension install @jupyterlab/hub-extension@^0.11.0 \\\n && jupyter notebook --generate-config \\\n && conda clean -tipsy \\\n && npm cache clean --force \\\n && rm -rf $CONDA_DIR/share/jupyter/lab/staging \\\n && rm -rf /home/$NB_USER/.cache/yarn \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nADD requirements.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt \\\n && fix-permissions $CONDA_DIR \\\n && fix-permissions /home/$NB_USER\nCOPY jupyter_notebook_config.py /home/$NB_USER/.jupyter/\nCOPY start*.sh /usr/local/bin/\nUSER root\nRUN chmod +x /usr/local/bin/*.sh\nEXPOSE 8888/tcp\nWORKDIR $HOME\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"/usr/local/bin/start-jupyter.sh\"]\n","originalDockerfileUglifiedHash":"70d883a210e106d4e2484ac066d9c0e5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/78e71b23f8e5cc1bb0f20405830b51737ce07847.dockerfile"}