{"seed":2128648395,"processedDockerfileHash":"88d62ec671e3d4dded7b15fdc2264275","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck"],"processedDockerfile":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ############################## Dockerfile for Elasticsearch version 7.0.1 ##################################\n#\n#   This Dockerfile builds a basic installation of Elasticsearch.\n#\n#   Elasticsearch is a search server based on Lucene. It provides a distributed, multitenant-capable\n#   full-text search engine with an HTTP web interface and schema-free JSON documents.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   Start Elasticsearch container using the below command\n#   docker run --name <container_name> -p 9200:9200 -d <image_name>\n#\n#   Start Elastic search with configuration file\n#   For ex. docker run --name <container_name> -v <path_on_host>/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -p <port>:9200 -d <image_name>\n#\n#  #############################################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\nARG ELASTICSEARCH_VER=7.0.1\n#   The Author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\n#   Set Environment Variables\nENV LANG=\"en_US.UTF-8\" \\\n    JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\" \\\n    _JAVA_OPTIONS=\"-Xmx10g\" \\\n    SOURCE_DIR=\"/tmp/\"\nENV JAVA_HOME=\"/usr/share/jdk-12.0.1+12\"\nENV PATH=\"$JAVA_HOME/bin:$PATH\"\nENV PATCH_URL=\"https://raw.githubusercontent.com/linux-on-ibm-z/scripts/master/Elasticsearch/{ELASTICSEARCH_VER}/patch/\"\nWORKDIR $SOURCE_DIR\n#   Install Dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends ant autoconf automake curl git libtool libx11-dev libxt-dev locales-all make maven patch pkg-config tar texinfo unzip wget sudo patch -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk12-binaries/releases/download/jdk-12.0.1%2B12/OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && tar -C /usr/share/ -xzvf OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/elastic/elasticsearch \\\n && cd elasticsearch \\\n && git checkout v${ELASTICSEARCH_VER} \\\n && sed -i \"170s/linux-x86_64/linux-s390x/\" $SOURCE_DIR/elasticsearch/distribution/archives/build.gradle \\\n && echo \"xpack.ml.enabled: false\" >> $SOURCE_DIR/elasticsearch/distribution/src/config/elasticsearch.yml \\\n && curl -o BuildPlugin.diff $PATCH_URL/BuildPlugin.diff \\\n && patch --ignore-whitespace $SOURCE_DIR/elasticsearch/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy BuildPlugin.diff \\\n && ./gradlew assemble \\\n && cd $SOURCE_DIR/elasticsearch/distribution/archives/linux-tar/build/distributions/ \\\n && tar -C /usr/share/ -xf elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT-linux-s390x.tar.gz \\\n && mv /usr/share/elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT /usr/share/elasticsearch \\\n && apt-get remove -y ant automake git maven patch pkg-config unzip wget patch \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /root/.gradle/* /tmp/elasticsearch \\\n && /usr/sbin/groupadd elasticsearch \\\n && /usr/sbin/useradd -g elasticsearch elasticsearch \\\n && usermod -aG sudo elasticsearch \\\n && chown elasticsearch:elasticsearch -R /usr/share/elasticsearch\n#   Expose the default port\nUSER elasticsearch\nEXPOSE 9200/tcp 9300/tcp\nENV PATH=\"/usr/share/elasticsearch/bin:$PATH\"\n#   Start the elasticsearch server\nCMD [\"elasticsearch\"]\n#   End of Dockerfile\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  © Copyright IBM Corporation 2017, 2019.\n#  LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n# ############################## Dockerfile for Elasticsearch version 7.0.1 ##################################\n#\n#  This Dockerfile builds a basic installation of Elasticsearch.\n#\n#  Elasticsearch is a search server based on Lucene. It provides a distributed, multitenant-capable\n#  full-text search engine with an HTTP web interface and schema-free JSON documents.\n#\n#  To build this image, from the directory containing this Dockerfile\n#  (assuming that the file is named Dockerfile):\n#  docker build -t <image_name> .\n#\n#  Start Elasticsearch container using the below command\n#  docker run --name <container_name> -p 9200:9200 -d <image_name>\n#\n#  Start Elastic search with configuration file\n#  For ex. docker run --name <container_name> -v <path_on_host>/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -p <port>:9200 -d <image_name>\n#\n# #############################################################################################################\n#  Base Image\nFROM s390x/ubuntu:16.04\nARG ELASTICSEARCH_VER=7.0.1\n#  The Author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\n#  Set Environment Variables\nENV LANG=\"en_US.UTF-8\" \\\n    JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\" \\\n    _JAVA_OPTIONS=\"-Xmx10g\" \\\n    SOURCE_DIR=\"/tmp/\"\nENV JAVA_HOME=\"/usr/share/jdk-12.0.1+12\"\nENV PATH=\"$JAVA_HOME/bin:$PATH\"\nENV PATCH_URL=\"https://raw.githubusercontent.com/linux-on-ibm-z/scripts/master/Elasticsearch/{ELASTICSEARCH_VER}/patch/\"\nWORKDIR $SOURCE_DIR\n#  Install Dependencies\nRUN apt-get update \\\n && apt-get install ant autoconf automake curl git libtool libx11-dev libxt-dev locales-all make maven patch pkg-config tar texinfo unzip wget sudo patch -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk12-binaries/releases/download/jdk-12.0.1%2B12/OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && tar -C /usr/share/ -xzvf OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/elastic/elasticsearch \\\n && cd elasticsearch \\\n && git checkout v${ELASTICSEARCH_VER} \\\n && sed -i \"170s/linux-x86_64/linux-s390x/\" $SOURCE_DIR/elasticsearch/distribution/archives/build.gradle \\\n && echo \"xpack.ml.enabled: false\" >> $SOURCE_DIR/elasticsearch/distribution/src/config/elasticsearch.yml \\\n && curl -o BuildPlugin.diff $PATCH_URL/BuildPlugin.diff \\\n && patch --ignore-whitespace $SOURCE_DIR/elasticsearch/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy BuildPlugin.diff \\\n && ./gradlew assemble \\\n && cd $SOURCE_DIR/elasticsearch/distribution/archives/linux-tar/build/distributions/ \\\n && tar -C /usr/share/ -xf elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT-linux-s390x.tar.gz \\\n && mv /usr/share/elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT /usr/share/elasticsearch \\\n && apt-get remove -y ant automake git maven patch pkg-config unzip wget patch \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /root/.gradle/* /tmp/elasticsearch \\\n && /usr/sbin/groupadd elasticsearch \\\n && /usr/sbin/useradd -g elasticsearch elasticsearch \\\n && usermod -aG sudo elasticsearch \\\n && chown elasticsearch:elasticsearch -R /usr/share/elasticsearch\n#  Expose the default port\nUSER elasticsearch\nEXPOSE 9200/tcp 9300/tcp\nENV PATH=\"/usr/share/elasticsearch/bin:$PATH\"\n#  Start the elasticsearch server\nCMD [\"elasticsearch\"]\n#  End of Dockerfile\n","injectedSmells":[],"originalDockerfileHash":"c80a56f179f40bbe14d4fe617ee098cb","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ############################## Dockerfile for Elasticsearch version 7.0.1 ##################################\n#\n#   This Dockerfile builds a basic installation of Elasticsearch.\n#\n#   Elasticsearch is a search server based on Lucene. It provides a distributed, multitenant-capable\n#   full-text search engine with an HTTP web interface and schema-free JSON documents.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   Start Elasticsearch container using the below command\n#   docker run --name <container_name> -p 9200:9200 -d <image_name>\n#\n#   Start Elastic search with configuration file\n#   For ex. docker run --name <container_name> -v <path_on_host>/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -p <port>:9200 -d <image_name>\n#\n#  #############################################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\nARG ELASTICSEARCH_VER=7.0.1\n#   The Author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\n#   Set Environment Variables\nENV LANG=\"en_US.UTF-8\" \\\n    JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\" \\\n    _JAVA_OPTIONS=\"-Xmx10g\" \\\n    SOURCE_DIR=\"/tmp/\"\nENV JAVA_HOME=\"/usr/share/jdk-12.0.1+12\"\nENV PATH=\"$JAVA_HOME/bin:$PATH\"\nENV PATCH_URL=\"https://raw.githubusercontent.com/linux-on-ibm-z/scripts/master/Elasticsearch/{ELASTICSEARCH_VER}/patch/\"\nWORKDIR $SOURCE_DIR\n#   Install Dependencies\nRUN apt-get update \\\n && apt-get install ant autoconf automake curl git libtool libx11-dev libxt-dev locales-all make maven patch pkg-config tar texinfo unzip wget sudo patch -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk12-binaries/releases/download/jdk-12.0.1%2B12/OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && tar -C /usr/share/ -xzvf OpenJDK12U-jdk_s390x_linux_hotspot_12.0.1_12.tar.gz \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/elastic/elasticsearch \\\n && cd elasticsearch \\\n && git checkout v${ELASTICSEARCH_VER} \\\n && sed -i \"170s/linux-x86_64/linux-s390x/\" $SOURCE_DIR/elasticsearch/distribution/archives/build.gradle \\\n && echo \"xpack.ml.enabled: false\" >> $SOURCE_DIR/elasticsearch/distribution/src/config/elasticsearch.yml \\\n && curl -o BuildPlugin.diff $PATCH_URL/BuildPlugin.diff \\\n && patch --ignore-whitespace $SOURCE_DIR/elasticsearch/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy BuildPlugin.diff \\\n && ./gradlew assemble \\\n && cd $SOURCE_DIR/elasticsearch/distribution/archives/linux-tar/build/distributions/ \\\n && tar -C /usr/share/ -xf elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT-linux-s390x.tar.gz \\\n && mv /usr/share/elasticsearch-${ELASTICSEARCH_VER}-SNAPSHOT /usr/share/elasticsearch \\\n && apt-get remove -y ant automake git maven patch pkg-config unzip wget patch \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /root/.gradle/* /tmp/elasticsearch \\\n && /usr/sbin/groupadd elasticsearch \\\n && /usr/sbin/useradd -g elasticsearch elasticsearch \\\n && usermod -aG sudo elasticsearch \\\n && chown elasticsearch:elasticsearch -R /usr/share/elasticsearch\n#   Expose the default port\nUSER elasticsearch\nEXPOSE 9200/tcp 9300/tcp\nENV PATH=\"/usr/share/elasticsearch/bin:$PATH\"\n#   Start the elasticsearch server\nCMD [\"elasticsearch\"]\n#   End of Dockerfile\n","originalDockerfileUglifiedHash":"168062b914d7871b10b12f6bea37b2ff","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ed1d1910c1194bd86acaa0d2ae8a7e289ccc706d.dockerfile"}