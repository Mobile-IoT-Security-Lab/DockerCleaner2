{"seed":739289296,"processedDockerfileHash":"74ee9b1a4aa847ee40366779e0851cad","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:edge AS resource\nRUN apk add bash=5.2.15-r2 curl=8.0.1-r1 git=2.40.0-r0 git-daemon=2.40.0-r0 git-lfs=3.3.0-r1 gnupg=2.4.0-r1 gzip=1.12-r0 jq=1.6-r2 libressl=3.7.2-r0 libressl-dev=3.7.2-r0 make=4.4.1-r0 g++=12.2.1_git20220924-r9 openssh=9.3_p1-r1 perl=5.36.0-r1 tar=1.34-r2 libstdc++=12.2.1_git20220924-r9 --no-cache\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nCOPY assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nCOPY scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl perl5\nWORKDIR /usr/lib\nRUN rm -rf perl perl5\nFROM resource AS tests\nCOPY test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apk add squid=5.7-r0 --no-cache\nCOPY test/ /tests/test\nCOPY integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:edge AS resource\nRUN apk --no-cache add bash curl git git-daemon git-lfs gnupg gzip jq libressl libressl-dev make g++ openssh perl tar libstdc++\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nADD assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nADD scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl perl5\nWORKDIR /usr/lib\nRUN rm -rf perl perl5\nFROM resource AS tests\nADD test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apk --no-cache add squid\nADD test/ /tests/test\nADD integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\n","injectedSmells":[],"originalDockerfileHash":"d62e28106b0a43c94d6c8fb92c10a8d0","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:edge AS resource\nRUN apk --no-cache add bash curl git git-daemon git-lfs gnupg gzip jq libressl libressl-dev make g++ openssh perl tar libstdc++\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nADD assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nADD scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl perl5\nWORKDIR /usr/lib\nRUN rm -rf perl perl5\nFROM resource AS tests\nADD test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apk --no-cache add squid\nADD test/ /tests/test\nADD integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\n","originalDockerfileUglifiedHash":"d62e28106b0a43c94d6c8fb92c10a8d0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9058a35945157b266d4c2ecfa743af07ff681f60.dockerfile"}