{"seed":2477299778,"processedDockerfileHash":"b7ba18482a428228f4e0d47236ddfee3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-gem","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ###########################################################\n#   Dockerfile to build Epictreasure container\n#   Based on Ubuntu\n#  ###########################################################\nFROM ubuntu:16.04\nENV test=\"false\"\nMAINTAINER Maintainer Cory Duplantis\nRUN apt-get update \\\n && apt-get install --no-install-recommends locales=2.23-0ubuntu11.3 -y\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8     \"\nRUN mkdir -p /root/tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-dev=2.7.12-1~16.04 python-pip=8.1.1-2ubuntu0.6 -y \\\n && apt-get install --no-install-recommends python3-dev=3.5.1-3 python3-pip=8.1.1-2ubuntu0.6 -y \\\n && apt-get clean\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.1ubuntu2 curl=7.47.0-1ubuntu2.19 gdb=7.11.1-0ubuntu1~16.5 gdb-multiarch=7.11.1-0ubuntu1~16.5 gdbserver=7.11.1-0ubuntu1~16.5 git=1:2.7.4-0ubuntu1.10 libncursesw5-dev=6.0+20160213-1ubuntu1 python3-setuptools=20.7.0-1 python-setuptools=20.7.0-1 python2.7=2.7.12-1ubuntu0~16.04.18 python3-pip=8.1.1-2ubuntu0.6 tmux=2.1-3build1 tree=1.7.0-3 stow=2.2.2-1 virtualenvwrapper=4.3.1-2 wget=1.17.1-1ubuntu1.5 vim=2:7.4.1689-3ubuntu1.5 unzip=6.0-20ubuntu1.1 python-imaging=3.1.2-0ubuntu1.6 libjpeg8=8c-2ubuntu8 libjpeg62-dev=1:6b2-2 libfreetype6=2.6.1-0.1ubuntu2.5 libfreetype6-dev=2.6.1-0.1ubuntu2.5 squashfs-tools=1:4.3-3ubuntu2.16.04.3 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 liblzma-dev=5.1.1alpha+20120614-2ubuntu2 python-magic=1:5.25-2ubuntu1.4 cmake=3.5.1-1ubuntu3 z3=4.4.0-5 python-lzma=0.5.3-3 net-tools=1.60-26ubuntu1 strace=4.11-1ubuntu3 ltrace=0.7.3-5.1ubuntu4 gcc-multilib=4:5.3.1-1ubuntu1 g++-multilib=4:5.3.1-1ubuntu1 ruby-full=1:2.3.0+1 binutils-mips-linux-gnu=2.26.1-1ubuntu1~16.04.8 sudo=1.8.16-0ubuntu1.10 -y\n#   Personal dotfiles\nRUN cd /root \\\n && rm .bashrc \\\n && git clone --recursive https://github.com/ctfhacker/dotfiles.git \\\n && cd dotfiles \\\n && ./install.sh\n#   Upgrade pip and ipython\nRUN python -m pip install --upgrade pip \\\n && python3 -m pip install --upgrade pip \\\n && pip2 install -Iv ipython==5.3.0 \\\n && pip3 install ipython\n#   Install radare\nRUN git clone https://github.com/radare/radare2 \\\n && cd radare2 \\\n && ./sys/install.sh \\\n && make install \\\n && pip2 install r2pipe \\\n && pip3 install r2pipe\n#   Install pwntools and pwndbg\nRUN pip2 install git+https://github.com/Gallopsled/pwntools \\\n && cd /root/tools \\\n && git clone https://github.com/pwndbg/pwndbg \\\n && cd pwndbg \\\n && ./setup.sh\n#   Install binwalk\nRUN cd /root/tools \\\n && git clone https://github.com/devttys0/binwalk \\\n && cd binwalk \\\n && echo -e \"y\\n12\\n4\\n\" | ./deps.sh \\\n && python setup.py install \\\n && cd /root/tools \\\n && wget https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/firmware-mod-kit/fmk_099.tar.gz \\\n && tar zxvf fmk_099.tar.gz \\\n && rm fmk_099.tar.gz \\\n && cd fmk/src \\\n && ./configure \\\n && make\n#   Install 32bit dependencies\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends libc6:i386 libncurses5:i386 libstdc++6:i386 libc6-dev-i386=2.23-0ubuntu11.3 -y \\\n && apt-get clean\n#   Install apktool\nRUN apt-get update \\\n && apt-get install --no-install-recommends default-jre=2:1.8-56ubuntu2 -y \\\n && wget https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/linux/apktool \\\n && wget https://bitbucket.org/iBotPeaches/apktool/downloads/apktool_2.0.2.jar \\\n && mv apktool_2.0.2.jar /bin/apktool.jar \\\n && mv apktool /bin/ \\\n && chmod 755 /bin/apktool \\\n && chmod 755 /bin/apktool.jar\n#   Install PIL \nRUN pip install Pillow==9.5.0\n#   Install frida and the frida tools\nRUN pip install frida==16.0.13 frida-tools==12.1.1\n#   Install ROPgadget\nRUN cd /root/tools \\\n && git clone https://github.com/JonathanSalwan/ROPgadget.git \\\n && cd ROPgadget \\\n && python setup.py install\n#   Install fzf\nRUN cd /root/tools \\\n && git clone --depth 1 https://github.com/junegunn/fzf.git /root/.fzf \\\n && /root/.fzf/install --all --key-bindings --completion\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.20.10 -y\n#   Install qemu with multiarchs\nRUN apt-get install --no-install-recommends qemu=1:2.5+dfsg-5ubuntu10.51 qemu-user=1:2.5+dfsg-5ubuntu10.51 qemu-user-static=1:2.5+dfsg-5ubuntu10.51 -y \\\n && apt-get update -m \\\n && apt-get install --no-install-recommends libc6-arm64-cross=2.23-0ubuntu3cross1 libcc6-dev-i386 libc6-i386=2.23-0ubuntu11.3 libffi-dev=3.2.1-4 libssl-dev=1.0.2g-1ubuntu4.20 libncurses5-dev=6.0+20160213-1ubuntu1 -y \\\n && apt-get install --no-install-recommends 'binfmt*' -y \\\n && apt-get install --no-install-recommends libc6-armhf-armel-cross=2.23-0ubuntu3cross1 -y \\\n && apt-get install --no-install-recommends debian-keyring=2016.01.20 -y \\\n && apt-get install --no-install-recommends debian-archive-keyring=2014.3 -y \\\n && apt-get install --no-install-recommends emdebian-archive-keyring=2.0.5 -y \\\n && apt-get update -m ; echo 0 \\\n && apt-get install --no-install-recommends libc6-mipsel-cross=2.23-0ubuntu3cross1 -y \\\n && apt-get install --no-install-recommends libc6-armel-cross=2.23-0ubuntu3cross1 libc6-dev-armel-cross=2.23-0ubuntu3cross1 -y \\\n && apt-get install --no-install-recommends libc6-dev-armhf-cross=2.23-0ubuntu3cross1 -y \\\n && apt-get install --no-install-recommends binutils-arm-linux-gnueabi=2.26.1-1ubuntu1~16.04.8 -y \\\n && apt-get install --no-install-recommends libncurses5-dev=6.0+20160213-1ubuntu1 -y \\\n && mkdir /etc/qemu-binfmt \\\n && ln -s /usr/mipsel-linux-gnu /etc/qemu-binfmt/mipsel \\\n && ln -s /usr/arm-linux-gnueabihf /etc/qemu-binfmt/arm \\\n && apt-get clean\n#   Install Rust\nRUN wget https://sh.rustup.rs \\\n && chmod +x index.html \\\n && ./index.html --default-toolchain nightly -y \\\n && rm index.html\n#   Install ripgrep from Releases\nRUN curl -LO https://github.com/BurntSushi/ripgrep/releases/download/0.9.0/ripgrep_0.9.0_amd64.deb \\\n && dpkg -i ripgrep_0.9.0_amd64.deb \\\n && rm ripgrep_0.9.0_amd64.deb\n#   Bash 4.4 for vim mode\nRUN wget http://ftp.gnu.org/gnu/bash/bash-4.4.tar.gz \\\n && tar zxvf bash-4.4.tar.gz \\\n && cd bash-4.4 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm bash-4.4.tar.gz \\\n && rm -rf bash-4.4 \\\n && chsh -s /usr/local/bin/bash \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean\n#   Install one_gadget\nRUN gem install one_gadget --version 1.8.1\n#   Install arm_now\nRUN apt-get update \\\n && apt-get install --no-install-recommends e2tools=0.0.16-6.1 \\\n && python3 -m pip install arm_now \\\n && apt-get clean\n#   Install capstone, keystone, unicorn\nRUN cd /root/tools \\\n && wget https://raw.githubusercontent.com/hugsy/stuff/master/update-trinity.sh \\\n && sed 's/sudo//g' update-trinity.sh > no_sudo_trinity.sh \\\n && chmod +x no_sudo_trinity.sh \\\n && bash ./no_sudo_trinity.sh \\\n && ldconfig\n#   Install DrMemory\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/drmemory/releases/download/release_1.11.0/DrMemory-Linux-1.11.0-2.tar.gz \\\n && tar zxvf DrMemory* \\\n && cd DrMemory* \\\n && ln -s $PWD/bin/drmemory /usr/bin/drmemory-32 \\\n && ln -s $PWD/bin64/drmemory /usr/bin/drmemory-64\n#   Install DynamoRIO\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/dynamorio/releases/download/cronbuild-7.0.17744/DynamoRIO-x86_64-Linux-7.0.17744-0.tar.gz \\\n && tar xvf DynamoRIO* \\\n && rm DynamoRIO*tar.gz\n#   Install Valgrind\nRUN apt-get update \\\n && apt-get install --no-install-recommends valgrind=1:3.11.0-1ubuntu4.2 \\\n && apt-get clean\n#   Install gdb 8.0\nRUN apt-get update \\\n && apt-get install --no-install-recommends texinfo=6.1.0.dfsg.1-5 -y \\\n && cd /root/tools \\\n && wget https://ftp.gnu.org/gnu/gdb/gdb-8.0.tar.xz \\\n && xz -d < gdb-8.0.tar.xz > gdb-8.0.tar \\\n && tar xvf gdb-8.0.tar \\\n && cd gdb-8.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && apt-get clean\n#   Install angr\nRUN python3 -m pip install angr\n#   Install Rust binaries\nRUN /root/.cargo/bin/cargo install ripgrep exa bat\n#   Install gef but keep pwndbg downloaded\nRUN wget -O ~/.gdbinit-gef.py -q https://github.com/hugsy/gef/raw/master/gef.py \\\n && echo source ~/.gdbinit-gef.py > ~/.gdbinit\nRUN wget -O ~/.gdbinit-gef-extras.sh -q https://github.com/hugsy/gef/raw/master/scripts/gef-extras.sh \\\n && chmod +x ~/.gdbinit-gef-extras.sh \\\n && ~/.gdbinit-gef-extras.sh\nCOPY .tmux.conf /root/.tmux.conf\nCOPY test.sh /root/test.sh\nCMD sh -c 'if [ \"$test\" = true ]; then echo \"Running tests\"; chmod +x /root/test.sh; /root/test.sh; else /bin/bash; fi'\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ###########################################################\n#  Dockerfile to build Epictreasure container\n#  Based on Ubuntu\n# ###########################################################\nFROM ubuntu:16.04\nENV test=\"false\"\nMAINTAINER Maintainer Cory Duplantis\nRUN apt-get update \\\n && apt-get -y install locales\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8     \"\nRUN mkdir -p /root/tools\nRUN apt-get update \\\n && apt-get -y install python-dev python-pip \\\n && apt-get -y install python3-dev python3-pip \\\n && apt-get clean\nRUN apt-get update \\\n && apt-get install --no-install-recommends -y build-essential curl gdb gdb-multiarch gdbserver git libncursesw5-dev python3-setuptools python-setuptools python2.7 python3-pip tmux tree stow virtualenvwrapper wget vim unzip python-imaging libjpeg8 libjpeg62-dev libfreetype6 libfreetype6-dev squashfs-tools zlib1g-dev liblzma-dev python-magic cmake z3 python-lzma net-tools strace ltrace gcc-multilib g++-multilib ruby-full binutils-mips-linux-gnu sudo\n#  Personal dotfiles\nRUN cd /root \\\n && rm .bashrc \\\n && git clone --recursive https://github.com/ctfhacker/dotfiles.git \\\n && cd dotfiles \\\n && ./install.sh\n#  Upgrade pip and ipython\nRUN python -m pip install --upgrade pip \\\n && python3 -m pip install --upgrade pip \\\n && pip2 install -Iv ipython==5.3.0 \\\n && pip3 install ipython\n#  Install radare\nRUN git clone https://github.com/radare/radare2 \\\n && cd radare2 \\\n && ./sys/install.sh \\\n && make install \\\n && pip2 install r2pipe \\\n && pip3 install r2pipe\n#  Install pwntools and pwndbg\nRUN pip2 install git+https://github.com/Gallopsled/pwntools \\\n && cd /root/tools \\\n && git clone https://github.com/pwndbg/pwndbg \\\n && cd pwndbg \\\n && ./setup.sh\n#  Install binwalk\nRUN cd /root/tools \\\n && git clone https://github.com/devttys0/binwalk \\\n && cd binwalk \\\n && echo -e \"y\\n12\\n4\\n\" | ./deps.sh \\\n && python setup.py install \\\n && cd /root/tools \\\n && wget https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/firmware-mod-kit/fmk_099.tar.gz \\\n && tar zxvf fmk_099.tar.gz \\\n && rm fmk_099.tar.gz \\\n && cd fmk/src \\\n && ./configure \\\n && make\n#  Install 32bit dependencies\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get --no-install-recommends -y install libc6:i386 libncurses5:i386 libstdc++6:i386 libc6-dev-i386 \\\n && apt-get clean\n#  Install apktool\nRUN apt-get update \\\n && apt-get install --no-install-recommends -y default-jre \\\n && wget https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/linux/apktool \\\n && wget https://bitbucket.org/iBotPeaches/apktool/downloads/apktool_2.0.2.jar \\\n && mv apktool_2.0.2.jar /bin/apktool.jar \\\n && mv apktool /bin/ \\\n && chmod 755 /bin/apktool \\\n && chmod 755 /bin/apktool.jar\n#  Install PIL \nRUN pip install Pillow\n#  Install frida and the frida tools\nRUN pip install frida frida-tools\n#  Install ROPgadget\nRUN cd /root/tools \\\n && git clone https://github.com/JonathanSalwan/ROPgadget.git \\\n && cd ROPgadget \\\n && python setup.py install\n#  Install fzf\nRUN cd /root/tools \\\n && git clone --depth 1 https://github.com/junegunn/fzf.git /root/.fzf \\\n && /root/.fzf/install --all --key-bindings --completion\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y\n#  Install qemu with multiarchs\nRUN apt-get --no-install-recommends -y install qemu qemu-user qemu-user-static \\\n && apt-get -m update \\\n && apt-get install -y libc6-arm64-cross libcc6-dev-i386 libc6-i386 libffi-dev libssl-dev libncurses5-dev \\\n && apt-get --no-install-recommends -y install 'binfmt*' \\\n && apt-get --no-install-recommends -y install libc6-armhf-armel-cross \\\n && apt-get --no-install-recommends -y install debian-keyring \\\n && apt-get --no-install-recommends -y install debian-archive-keyring \\\n && apt-get --no-install-recommends -y install emdebian-archive-keyring \\\n && apt-get -m update ; echo 0 \\\n && apt-get --no-install-recommends -y install libc6-mipsel-cross \\\n && apt-get --no-install-recommends -y install libc6-armel-cross libc6-dev-armel-cross \\\n && apt-get --no-install-recommends -y install libc6-dev-armhf-cross \\\n && apt-get --no-install-recommends -y install binutils-arm-linux-gnueabi \\\n && apt-get --no-install-recommends -y install libncurses5-dev \\\n && mkdir /etc/qemu-binfmt \\\n && ln -s /usr/mipsel-linux-gnu /etc/qemu-binfmt/mipsel \\\n && ln -s /usr/arm-linux-gnueabihf /etc/qemu-binfmt/arm \\\n && apt-get clean\n#  Install Rust\nRUN wget https://sh.rustup.rs \\\n && chmod +x index.html \\\n && ./index.html --default-toolchain nightly -y \\\n && rm index.html\n#  Install ripgrep from Releases\nRUN curl -LO https://github.com/BurntSushi/ripgrep/releases/download/0.9.0/ripgrep_0.9.0_amd64.deb \\\n && dpkg -i ripgrep_0.9.0_amd64.deb \\\n && rm ripgrep_0.9.0_amd64.deb\n#  Bash 4.4 for vim mode\nRUN wget http://ftp.gnu.org/gnu/bash/bash-4.4.tar.gz \\\n && tar zxvf bash-4.4.tar.gz \\\n && cd bash-4.4 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm bash-4.4.tar.gz \\\n && rm -rf bash-4.4 \\\n && chsh -s /usr/local/bin/bash \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean\n#  Install one_gadget\nRUN gem install one_gadget\n#  Install arm_now\nRUN apt-get update \\\n && apt-get install e2tools \\\n && python3 -m pip install arm_now \\\n && apt-get clean\n#  Install capstone, keystone, unicorn\nRUN cd /root/tools \\\n && wget https://raw.githubusercontent.com/hugsy/stuff/master/update-trinity.sh \\\n && sed 's/sudo//g' update-trinity.sh > no_sudo_trinity.sh \\\n && chmod +x no_sudo_trinity.sh \\\n && bash ./no_sudo_trinity.sh \\\n && ldconfig\n#  Install DrMemory\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/drmemory/releases/download/release_1.11.0/DrMemory-Linux-1.11.0-2.tar.gz \\\n && tar zxvf DrMemory* \\\n && cd DrMemory* \\\n && ln -s $PWD/bin/drmemory /usr/bin/drmemory-32 \\\n && ln -s $PWD/bin64/drmemory /usr/bin/drmemory-64\n#  Install DynamoRIO\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/dynamorio/releases/download/cronbuild-7.0.17744/DynamoRIO-x86_64-Linux-7.0.17744-0.tar.gz \\\n && tar xvf DynamoRIO* \\\n && rm DynamoRIO*tar.gz\n#  Install Valgrind\nRUN apt-get update \\\n && apt-get install valgrind \\\n && apt-get clean\n#  Install gdb 8.0\nRUN apt-get update \\\n && apt-get install -y texinfo \\\n && cd /root/tools \\\n && wget https://ftp.gnu.org/gnu/gdb/gdb-8.0.tar.xz \\\n && xz -d < gdb-8.0.tar.xz > gdb-8.0.tar \\\n && tar xvf gdb-8.0.tar \\\n && cd gdb-8.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && apt-get clean\n#  Install angr\nRUN python3 -m pip install angr\n#  Install Rust binaries\nRUN /root/.cargo/bin/cargo install ripgrep exa bat\n#  Install gef but keep pwndbg downloaded\nRUN wget -O ~/.gdbinit-gef.py -q https://github.com/hugsy/gef/raw/master/gef.py \\\n && echo source ~/.gdbinit-gef.py > ~/.gdbinit\nRUN wget -O ~/.gdbinit-gef-extras.sh -q https://github.com/hugsy/gef/raw/master/scripts/gef-extras.sh \\\n && chmod +x ~/.gdbinit-gef-extras.sh \\\n && ~/.gdbinit-gef-extras.sh\nCOPY .tmux.conf /root/.tmux.conf\nCOPY test.sh /root/test.sh\nCMD sh -c 'if [ \"$test\" = true ]; then echo \"Running tests\"; chmod +x /root/test.sh; /root/test.sh; else /bin/bash; fi'\n","injectedSmells":[],"originalDockerfileHash":"160e75c1d14b6a709ff4c33693a89842","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ###########################################################\n#   Dockerfile to build Epictreasure container\n#   Based on Ubuntu\n#  ###########################################################\nFROM ubuntu:16.04\nENV test=\"false\"\nMAINTAINER Maintainer Cory Duplantis\nRUN apt-get update \\\n && apt-get install locales -y\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8     \"\nRUN mkdir -p /root/tools\nRUN apt-get update \\\n && apt-get install python-dev python-pip -y \\\n && apt-get install python3-dev python3-pip -y \\\n && apt-get clean\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential curl gdb gdb-multiarch gdbserver git libncursesw5-dev python3-setuptools python-setuptools python2.7 python3-pip tmux tree stow virtualenvwrapper wget vim unzip python-imaging libjpeg8 libjpeg62-dev libfreetype6 libfreetype6-dev squashfs-tools zlib1g-dev liblzma-dev python-magic cmake z3 python-lzma net-tools strace ltrace gcc-multilib g++-multilib ruby-full binutils-mips-linux-gnu sudo -y\n#   Personal dotfiles\nRUN cd /root \\\n && rm .bashrc \\\n && git clone --recursive https://github.com/ctfhacker/dotfiles.git \\\n && cd dotfiles \\\n && ./install.sh\n#   Upgrade pip and ipython\nRUN python -m pip install --upgrade pip \\\n && python3 -m pip install --upgrade pip \\\n && pip2 install -Iv ipython==5.3.0 \\\n && pip3 install ipython\n#   Install radare\nRUN git clone https://github.com/radare/radare2 \\\n && cd radare2 \\\n && ./sys/install.sh \\\n && make install \\\n && pip2 install r2pipe \\\n && pip3 install r2pipe\n#   Install pwntools and pwndbg\nRUN pip2 install git+https://github.com/Gallopsled/pwntools \\\n && cd /root/tools \\\n && git clone https://github.com/pwndbg/pwndbg \\\n && cd pwndbg \\\n && ./setup.sh\n#   Install binwalk\nRUN cd /root/tools \\\n && git clone https://github.com/devttys0/binwalk \\\n && cd binwalk \\\n && echo -e \"y\\n12\\n4\\n\" | ./deps.sh \\\n && python setup.py install \\\n && cd /root/tools \\\n && wget https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/firmware-mod-kit/fmk_099.tar.gz \\\n && tar zxvf fmk_099.tar.gz \\\n && rm fmk_099.tar.gz \\\n && cd fmk/src \\\n && ./configure \\\n && make\n#   Install 32bit dependencies\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends libc6:i386 libncurses5:i386 libstdc++6:i386 libc6-dev-i386 -y \\\n && apt-get clean\n#   Install apktool\nRUN apt-get update \\\n && apt-get install --no-install-recommends default-jre -y \\\n && wget https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/linux/apktool \\\n && wget https://bitbucket.org/iBotPeaches/apktool/downloads/apktool_2.0.2.jar \\\n && mv apktool_2.0.2.jar /bin/apktool.jar \\\n && mv apktool /bin/ \\\n && chmod 755 /bin/apktool \\\n && chmod 755 /bin/apktool.jar\n#   Install PIL \nRUN pip install Pillow\n#   Install frida and the frida tools\nRUN pip install frida frida-tools\n#   Install ROPgadget\nRUN cd /root/tools \\\n && git clone https://github.com/JonathanSalwan/ROPgadget.git \\\n && cd ROPgadget \\\n && python setup.py install\n#   Install fzf\nRUN cd /root/tools \\\n && git clone --depth 1 https://github.com/junegunn/fzf.git /root/.fzf \\\n && /root/.fzf/install --all --key-bindings --completion\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y\n#   Install qemu with multiarchs\nRUN apt-get install --no-install-recommends qemu qemu-user qemu-user-static -y \\\n && apt-get update -m \\\n && apt-get install libc6-arm64-cross libcc6-dev-i386 libc6-i386 libffi-dev libssl-dev libncurses5-dev -y \\\n && apt-get install --no-install-recommends 'binfmt*' -y \\\n && apt-get install --no-install-recommends libc6-armhf-armel-cross -y \\\n && apt-get install --no-install-recommends debian-keyring -y \\\n && apt-get install --no-install-recommends debian-archive-keyring -y \\\n && apt-get install --no-install-recommends emdebian-archive-keyring -y \\\n && apt-get update -m ; echo 0 \\\n && apt-get install --no-install-recommends libc6-mipsel-cross -y \\\n && apt-get install --no-install-recommends libc6-armel-cross libc6-dev-armel-cross -y \\\n && apt-get install --no-install-recommends libc6-dev-armhf-cross -y \\\n && apt-get install --no-install-recommends binutils-arm-linux-gnueabi -y \\\n && apt-get install --no-install-recommends libncurses5-dev -y \\\n && mkdir /etc/qemu-binfmt \\\n && ln -s /usr/mipsel-linux-gnu /etc/qemu-binfmt/mipsel \\\n && ln -s /usr/arm-linux-gnueabihf /etc/qemu-binfmt/arm \\\n && apt-get clean\n#   Install Rust\nRUN wget https://sh.rustup.rs \\\n && chmod +x index.html \\\n && ./index.html --default-toolchain nightly -y \\\n && rm index.html\n#   Install ripgrep from Releases\nRUN curl -LO https://github.com/BurntSushi/ripgrep/releases/download/0.9.0/ripgrep_0.9.0_amd64.deb \\\n && dpkg -i ripgrep_0.9.0_amd64.deb \\\n && rm ripgrep_0.9.0_amd64.deb\n#   Bash 4.4 for vim mode\nRUN wget http://ftp.gnu.org/gnu/bash/bash-4.4.tar.gz \\\n && tar zxvf bash-4.4.tar.gz \\\n && cd bash-4.4 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm bash-4.4.tar.gz \\\n && rm -rf bash-4.4 \\\n && chsh -s /usr/local/bin/bash \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean\n#   Install one_gadget\nRUN gem install one_gadget\n#   Install arm_now\nRUN apt-get update \\\n && apt-get install e2tools \\\n && python3 -m pip install arm_now \\\n && apt-get clean\n#   Install capstone, keystone, unicorn\nRUN cd /root/tools \\\n && wget https://raw.githubusercontent.com/hugsy/stuff/master/update-trinity.sh \\\n && sed 's/sudo//g' update-trinity.sh > no_sudo_trinity.sh \\\n && chmod +x no_sudo_trinity.sh \\\n && bash ./no_sudo_trinity.sh \\\n && ldconfig\n#   Install DrMemory\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/drmemory/releases/download/release_1.11.0/DrMemory-Linux-1.11.0-2.tar.gz \\\n && tar zxvf DrMemory* \\\n && cd DrMemory* \\\n && ln -s $PWD/bin/drmemory /usr/bin/drmemory-32 \\\n && ln -s $PWD/bin64/drmemory /usr/bin/drmemory-64\n#   Install DynamoRIO\nRUN cd /root/tools \\\n && wget https://github.com/DynamoRIO/dynamorio/releases/download/cronbuild-7.0.17744/DynamoRIO-x86_64-Linux-7.0.17744-0.tar.gz \\\n && tar xvf DynamoRIO* \\\n && rm DynamoRIO*tar.gz\n#   Install Valgrind\nRUN apt-get update \\\n && apt-get install valgrind \\\n && apt-get clean\n#   Install gdb 8.0\nRUN apt-get update \\\n && apt-get install texinfo -y \\\n && cd /root/tools \\\n && wget https://ftp.gnu.org/gnu/gdb/gdb-8.0.tar.xz \\\n && xz -d < gdb-8.0.tar.xz > gdb-8.0.tar \\\n && tar xvf gdb-8.0.tar \\\n && cd gdb-8.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && apt-get clean\n#   Install angr\nRUN python3 -m pip install angr\n#   Install Rust binaries\nRUN /root/.cargo/bin/cargo install ripgrep exa bat\n#   Install gef but keep pwndbg downloaded\nRUN wget -O ~/.gdbinit-gef.py -q https://github.com/hugsy/gef/raw/master/gef.py \\\n && echo source ~/.gdbinit-gef.py > ~/.gdbinit\nRUN wget -O ~/.gdbinit-gef-extras.sh -q https://github.com/hugsy/gef/raw/master/scripts/gef-extras.sh \\\n && chmod +x ~/.gdbinit-gef-extras.sh \\\n && ~/.gdbinit-gef-extras.sh\nCOPY .tmux.conf /root/.tmux.conf\nCOPY test.sh /root/test.sh\nCMD sh -c 'if [ \"$test\" = true ]; then echo \"Running tests\"; chmod +x /root/test.sh; /root/test.sh; else /bin/bash; fi'\n","originalDockerfileUglifiedHash":"c66e36229023b0f5404b22d442c7b941","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/02e44f7cc85381eb2f9e8626cc2eb1f19ce0567d.dockerfile"}