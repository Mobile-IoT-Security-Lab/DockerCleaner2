{"seed":997497060,"processedDockerfileHash":"0edf21af493e1d8f01b0041c9b2fabab","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   ==================================================================\n#   cu80-py36-tf14-t2t129-torch041-utf8\n#   maintrainer: Tianyu He (tim-he@qq.com)\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   tensorflow    1.4.0  (pip)\n#   tensor2tensor 1.2.9  (pip)\n#   pytorch       0.4.1  (pip)\n#   ==================================================================\n#   FROM 10.11.3.8:5000/nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nENV LC_ALL=\"C\"\nENV LANG=\"en_US.UTF8\"\nENV LESSCHARSET=\"UTF-8\"\nENV PYTHONIOENCODING=\"UTF-8\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:jonathonf/python-3.6 \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm cffi urllib3 numba seaborn hypertools fasteners fjcommon sacrebleu==1.2.17 \\\n && $PIP_INSTALL tensorflow-gpu==1.4.0 tensor2tensor==1.2.9 tensorboardX==1.4 \\\n && $PIP_INSTALL http://download.pytorch.org/whl/cu80/torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision\n#   ==================================================================\n#   nccl\n#   ------------------------------------------------------------------\nWORKDIR /opt\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j install \\\n && cd .. \\\n && rm -rf nccl\nWORKDIR /\n#   ==================================================================\n#   config & cleanup\n#   ------------------------------------------------------------------\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  cu80-py36-tf14-t2t129-torch041-utf8\n#  maintrainer: Tianyu He (tim-he@qq.com)\n#  ------------------------------------------------------------------\n#  python        3.6    (apt)\n#  tensorflow    1.4.0  (pip)\n#  tensor2tensor 1.2.9  (pip)\n#  pytorch       0.4.1  (pip)\n#  ==================================================================\n#  FROM 10.11.3.8:5000/nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nENV LC_ALL=\"C\"\nENV LANG=\"en_US.UTF8\"\nENV LESSCHARSET=\"UTF-8\"\nENV PYTHONIOENCODING=\"UTF-8\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:jonathonf/python-3.6 \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm cffi urllib3 numba seaborn hypertools fasteners fjcommon sacrebleu==1.2.17 \\\n && $PIP_INSTALL tensorflow-gpu==1.4.0 tensor2tensor==1.2.9 tensorboardX==1.4 \\\n && $PIP_INSTALL http://download.pytorch.org/whl/cu80/torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision\n#  ==================================================================\n#  nccl\n#  ------------------------------------------------------------------\nWORKDIR /opt\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j install \\\n && cd .. \\\n && rm -rf nccl\nWORKDIR /\n#  ==================================================================\n#  config & cleanup\n#  ------------------------------------------------------------------\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","injectedSmells":[],"originalDockerfileHash":"bc2857eca1ef8148870da4cc3b7498e4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   cu80-py36-tf14-t2t129-torch041-utf8\n#   maintrainer: Tianyu He (tim-he@qq.com)\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   tensorflow    1.4.0  (pip)\n#   tensor2tensor 1.2.9  (pip)\n#   pytorch       0.4.1  (pip)\n#   ==================================================================\n#   FROM 10.11.3.8:5000/nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nENV LC_ALL=\"C\"\nENV LANG=\"en_US.UTF8\"\nENV LESSCHARSET=\"UTF-8\"\nENV PYTHONIOENCODING=\"UTF-8\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:jonathonf/python-3.6 \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm cffi urllib3 numba seaborn hypertools fasteners fjcommon sacrebleu==1.2.17 \\\n && $PIP_INSTALL tensorflow-gpu==1.4.0 tensor2tensor==1.2.9 tensorboardX==1.4 \\\n && $PIP_INSTALL http://download.pytorch.org/whl/cu80/torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision\n#   ==================================================================\n#   nccl\n#   ------------------------------------------------------------------\nWORKDIR /opt\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j install \\\n && cd .. \\\n && rm -rf nccl\nWORKDIR /\n#   ==================================================================\n#   config & cleanup\n#   ------------------------------------------------------------------\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","originalDockerfileUglifiedHash":"f1022ffe4611d7642a0824a6e3e19346","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2e3b990235444d177c9c36c168a635dbf4989959.dockerfile"}