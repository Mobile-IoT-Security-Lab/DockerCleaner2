{"seed":1888403646,"processedDockerfileHash":"c809ecaf10a1b432587ac75c404f85ea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-npm","pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Data Science at the Command Line\nFROM alpine:3.8\nLABEL maintainer=\"\\\"Jeroen Janssens <jeroen@datascienceworkshops.com>\\\"\"\nRUN apk update\nRUN apk add R=3.5.0-r1 R-dev=3.5.0-r1 R-doc=3.5.0-r1 arpack-dev=3.5.0-r1 bash=4.4.19-r1 bash-doc=4.4.19-r1 bc=1.07.1-r0 bc-doc=1.07.1-r0 boost-dev=1.66.0-r0 cmake=3.11.1-r2 coreutils=8.29-r2 coreutils-doc=8.29-r2 curl=7.61.1-r3 curl-doc=7.61.1-r3 curl-dev=7.61.1-r3 findutils=4.6.0-r1 findutils-doc=4.6.0-r1 font-adobe-100dpi=1.0.3-r0 g++=6.4.0-r9 git=2.18.4-r0 git-doc=2.18.4-r0 gnuplot=5.2.2-r1 go=1.10.8-r0 grep=3.1-r2 grep-doc=3.1-r2 groff=1.22.3-r2 jpeg-dev=8-r6 jq=1.6_rc1-r1 jq-doc=1.6_rc1-r1 less=530-r0 less-doc=530-r0 libxml2-dev=2.9.8-r2 m4=1.4.18-r1 man=1.14.3-r0 man-pages=4.16-r0 mdocml-apropos=1.14.3-r0 ncurses=6.1_p20180818-r1 nodejs-lts nodejs-npm openjdk7=7.211.2.6.17-r0 openssl=1.0.2u-r0 p7zip=16.02-r3 p7zip-doc=16.02-r3 parallel=20180622-r0 parallel-doc=20180622-r0 perl-dev=5.26.3-r0 py-lxml=4.2.2-r0 py-pip python3=3.6.9-r1 python3-dev=3.6.9-r1 sed=4.4-r2 sed-doc=4.4-r2 sudo=1.8.23-r4 sudo-doc=1.8.23-r4 tar=1.32-r0 tar-doc=1.32-r0 tree=1.7.0-r1 tree-doc=1.7.0-r1 unrar=5.6.4-r0 unrar-doc=5.6.4-r0 unzip=6.0-r6 unzip-doc=6.0-r6 xmlstarlet=1.6.1-r0 xmlstarlet-doc=1.6.1-r0 zlib-dev=1.2.11-r1 --no-cache\nRUN echo \"install.packages(c('tidyverse','ggmap'),repos='https://cloud.r-project.org')\" | R --slave --no-save --no-restore-history\nRUN easy_install-3.6 pip \\\n && pip3 install --upgrade pip \\\n && pip3 install awscli bigmler csvkit numpy scipy nose\nRUN pip3 install skll\nRUN pip2 install --upgrade pip \\\n && pip2 install cssselect\nRUN npm install cowsay@1.5.0 xml2json-command@0.0.3 -g\n#   tapkee\nRUN curl -sL http://bitbucket.org/eigen/eigen/get/3.2.9.tar.gz > /tmp/eigen.tar.gz \\\n && cd tmp \\\n && mkdir eigen \\\n && tar -xzvf eigen.tar.gz -C eigen --strip-components=1 \\\n && cd eigen \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install\nRUN cd /tmp \\\n && git clone https://github.com/lisitsyn/tapkee.git \\\n && cd tapkee \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && cp -v /tmp/tapkee/bin/tapkee /usr/bin\n#   feedgnuplot\nRUN yes | cpan List::MoreUtils \\\n && git clone https://github.com/dkogan/feedgnuplot.git \\\n && cd feedgnuplot \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -r feedgnuplot\n#   pup\nRUN export GOPATH=/usr \\\n && go get github.com/ericchiang/pup \\\n && go get github.com/jehiah/json2csv\n#   csvfix\nRUN curl https://bitbucket.org/neilb/csvfix/get/version-1.6.zip > /tmp/csvfix.zip \\\n && cd /tmp \\\n && unzip csvfix.zip \\\n && mv neilb* csvfix \\\n && cd csvfix \\\n && make lin \\\n && mv csvfix/bin/csvfix /bin\n#   weka\nRUN cd /tmp \\\n && curl -L https://sourceforge.net/projects/weka/files/weka-3-8/3.8.1/weka-3-8-1.zip > weka.zip \\\n && unzip weka.zip \\\n && mv weka-3-8-1/weka.jar /bin\n#   curlicue\nRUN cd /tmp \\\n && curl -L https://github.com/decklin/curlicue/archive/master.zip > curlicue.zip \\\n && unzip curlicue.zip \\\n && mv curlicue-master/curl* /bin\n#   drake and drip\nRUN curl -L https://raw.githubusercontent.com/Factual/drake/master/bin/drake > /usr/bin/drake \\\n && chmod 755 /usr/bin/drake\nRUN SHELL=/bin/bash drake ; exit 0\nENV JAVA_HOME=\"/usr/lib/jvm/default-jvm\"\nRUN ln -sf \"${JAVA_HOME}/bin/\"* \"/usr/bin/\"\nRUN curl -L https://raw.githubusercontent.com/ninjudd/drip/master/bin/drip > /usr/bin/drip \\\n && chmod 755 /usr/bin/drip \\\n && drip ; exit 0\n#   csvquote\nRUN cd /tmp \\\n && git clone https://github.com/dbro/csvquote.git \\\n && cd csvquote \\\n && make \\\n && make BINDIR=/usr/bin/ install\n#   vowpal wabbit\nRUN cd /tmp \\\n && git clone --depth 1 --branch master --single-branch git://github.com/JohnLangford/vowpal_wabbit.git \\\n && cd vowpal_wabbit \\\n && make \\\n && make install\n#   crush tools\nRUN cd /tmp \\\n && curl -L https://github.com/google/crush-tools/releases/download/20150716/crush-tools-20150716.tar.gz > crush-tools.tar.gz \\\n && tar -xzvf crush-tools.tar.gz \\\n && cd crush-tools-20150716/ \\\n && sed -i '12i#include <sys/types.h>' src/fieldsplit/fieldsplit.c \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\n#   data science at the command line tools, book content, and example data\nRUN cd /tmp \\\n && git clone https://github.com/jeroenjanssens/data-science-at-the-command-line.git \\\n && cp -v data-science-at-the-command-line/tools/* /usr/bin/ \\\n && cp -rv data-science-at-the-command-line/data /home/ \\\n && cp -rv data-science-at-the-command-line/book /home/\nRUN rm -rf /tmp/* /var/cache/apk/*\nRUN echo \"export PAGER='less'\" >> ~/.bashrc \\\n && echo \"export SHELL='/bin/bash'\" >> ~/.bashrc \\\n && echo \"alias l='ls -lph --group-directories-first'\" >> ~/.bashrc \\\n && echo \"alias parallel='parallel --will-cite'\" >> ~/.bashrc \\\n && echo 'export PS1=\"\\[\\033[38;5;6m\\][\\w]$\\[$(tput sgr0)\\] \"' >> ~/.bashrc\nRUN cat $( which weka ;) | sed -ne '/WEKAPATH=/,/complete /p' | cut -c3- | sed -e 's|/home/joe||' >> ~/.bashrc\nRUN apk add msttcorefonts-installer=3.6-r2 fontconfig=2.12.6-r1 --no-cache \\\n && update-ms-fonts \\\n && fc-cache -f\nRUN rm -rf /tmp/* /var/cache/apk/*\nWORKDIR /data\nCMD bash\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Data Science at the Command Line\nFROM alpine:3.8\nLABEL maintainer=\"\\\"Jeroen Janssens <jeroen@datascienceworkshops.com>\\\"\"\nRUN apk update\nRUN apk --no-cache add R R-dev R-doc arpack-dev bash bash-doc bc bc-doc boost-dev cmake coreutils coreutils-doc curl curl-doc curl-dev findutils findutils-doc font-adobe-100dpi g++ git git-doc gnuplot go grep grep-doc groff jpeg-dev jq jq-doc less less-doc libxml2-dev m4 man man-pages mdocml-apropos ncurses nodejs-lts nodejs-npm openjdk7 openssl p7zip p7zip-doc parallel parallel-doc perl-dev py-lxml py-pip python3 python3-dev sed sed-doc sudo sudo-doc tar tar-doc tree tree-doc unrar unrar-doc unzip unzip-doc xmlstarlet xmlstarlet-doc zlib-dev\nRUN echo \"install.packages(c('tidyverse','ggmap'),repos='https://cloud.r-project.org')\" | R --slave --no-save --no-restore-history\nRUN easy_install-3.6 pip \\\n && pip3 install --upgrade pip \\\n && pip3 install awscli bigmler csvkit numpy scipy nose\nRUN pip3 install skll\nRUN pip2 install --upgrade pip \\\n && pip2 install cssselect\nRUN npm install cowsay xml2json-command -g\n#  tapkee\nRUN curl -sL http://bitbucket.org/eigen/eigen/get/3.2.9.tar.gz > /tmp/eigen.tar.gz \\\n && cd tmp \\\n && mkdir eigen \\\n && tar -xzvf eigen.tar.gz -C eigen --strip-components=1 \\\n && cd eigen \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install\nRUN cd /tmp \\\n && git clone https://github.com/lisitsyn/tapkee.git \\\n && cd tapkee \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && cp -v /tmp/tapkee/bin/tapkee /usr/bin\n#  feedgnuplot\nRUN yes | cpan List::MoreUtils \\\n && git clone https://github.com/dkogan/feedgnuplot.git \\\n && cd feedgnuplot \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -r feedgnuplot\n#  pup\nRUN export GOPATH=/usr \\\n && go get github.com/ericchiang/pup \\\n && go get github.com/jehiah/json2csv\n#  csvfix\nRUN curl https://bitbucket.org/neilb/csvfix/get/version-1.6.zip > /tmp/csvfix.zip \\\n && cd /tmp \\\n && unzip csvfix.zip \\\n && mv neilb* csvfix \\\n && cd csvfix \\\n && make lin \\\n && mv csvfix/bin/csvfix /bin\n#  weka\nRUN cd /tmp \\\n && curl -L https://sourceforge.net/projects/weka/files/weka-3-8/3.8.1/weka-3-8-1.zip > weka.zip \\\n && unzip weka.zip \\\n && mv weka-3-8-1/weka.jar /bin\n#  curlicue\nRUN cd /tmp \\\n && curl -L https://github.com/decklin/curlicue/archive/master.zip > curlicue.zip \\\n && unzip curlicue.zip \\\n && mv curlicue-master/curl* /bin\n#  drake and drip\nRUN curl -L https://raw.githubusercontent.com/Factual/drake/master/bin/drake > /usr/bin/drake \\\n && chmod 755 /usr/bin/drake\nRUN SHELL=/bin/bash drake ; exit 0\nENV JAVA_HOME=\"/usr/lib/jvm/default-jvm\"\nRUN ln -sf \"${JAVA_HOME}/bin/\"* \"/usr/bin/\"\nRUN curl -L https://raw.githubusercontent.com/ninjudd/drip/master/bin/drip > /usr/bin/drip \\\n && chmod 755 /usr/bin/drip \\\n && drip ; exit 0\n#  csvquote\nRUN cd /tmp \\\n && git clone https://github.com/dbro/csvquote.git \\\n && cd csvquote \\\n && make \\\n && make BINDIR=/usr/bin/ install\n#  vowpal wabbit\nRUN cd /tmp \\\n && git clone --depth 1 --branch master --single-branch git://github.com/JohnLangford/vowpal_wabbit.git \\\n && cd vowpal_wabbit \\\n && make \\\n && make install\n#  crush tools\nRUN cd /tmp \\\n && curl -L https://github.com/google/crush-tools/releases/download/20150716/crush-tools-20150716.tar.gz > crush-tools.tar.gz \\\n && tar -xzvf crush-tools.tar.gz \\\n && cd crush-tools-20150716/ \\\n && sed -i '12i#include <sys/types.h>' src/fieldsplit/fieldsplit.c \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\n#  data science at the command line tools, book content, and example data\nRUN cd /tmp \\\n && git clone https://github.com/jeroenjanssens/data-science-at-the-command-line.git \\\n && cp -v data-science-at-the-command-line/tools/* /usr/bin/ \\\n && cp -rv data-science-at-the-command-line/data /home/ \\\n && cp -rv data-science-at-the-command-line/book /home/\nRUN rm -rf /tmp/* /var/cache/apk/*\nRUN echo \"export PAGER='less'\" >> ~/.bashrc \\\n && echo \"export SHELL='/bin/bash'\" >> ~/.bashrc \\\n && echo \"alias l='ls -lph --group-directories-first'\" >> ~/.bashrc \\\n && echo \"alias parallel='parallel --will-cite'\" >> ~/.bashrc \\\n && echo 'export PS1=\"\\[\\033[38;5;6m\\][\\w]$\\[$(tput sgr0)\\] \"' >> ~/.bashrc\nRUN cat $( which weka ;) | sed -ne '/WEKAPATH=/,/complete /p' | cut -c3- | sed -e 's|/home/joe||' >> ~/.bashrc\nRUN apk --no-cache add msttcorefonts-installer fontconfig \\\n && update-ms-fonts \\\n && fc-cache -f\nRUN rm -rf /tmp/* /var/cache/apk/*\nWORKDIR /data\nCMD bash\n","injectedSmells":[],"originalDockerfileHash":"93b5b53da923242bc6f97a4b708ec0be","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Data Science at the Command Line\nFROM alpine:3.8\nLABEL maintainer=\"\\\"Jeroen Janssens <jeroen@datascienceworkshops.com>\\\"\"\nRUN apk update\nRUN apk --no-cache add R R-dev R-doc arpack-dev bash bash-doc bc bc-doc boost-dev cmake coreutils coreutils-doc curl curl-doc curl-dev findutils findutils-doc font-adobe-100dpi g++ git git-doc gnuplot go grep grep-doc groff jpeg-dev jq jq-doc less less-doc libxml2-dev m4 man man-pages mdocml-apropos ncurses nodejs-lts nodejs-npm openjdk7 openssl p7zip p7zip-doc parallel parallel-doc perl-dev py-lxml py-pip python3 python3-dev sed sed-doc sudo sudo-doc tar tar-doc tree tree-doc unrar unrar-doc unzip unzip-doc xmlstarlet xmlstarlet-doc zlib-dev\nRUN echo \"install.packages(c('tidyverse','ggmap'),repos='https://cloud.r-project.org')\" | R --slave --no-save --no-restore-history\nRUN easy_install-3.6 pip \\\n && pip3 install --upgrade pip \\\n && pip3 install awscli bigmler csvkit numpy scipy nose\nRUN pip3 install skll\nRUN pip2 install --upgrade pip \\\n && pip2 install cssselect\nRUN npm install cowsay xml2json-command -g\n#   tapkee\nRUN curl -sL http://bitbucket.org/eigen/eigen/get/3.2.9.tar.gz > /tmp/eigen.tar.gz \\\n && cd tmp \\\n && mkdir eigen \\\n && tar -xzvf eigen.tar.gz -C eigen --strip-components=1 \\\n && cd eigen \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install\nRUN cd /tmp \\\n && git clone https://github.com/lisitsyn/tapkee.git \\\n && cd tapkee \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && cp -v /tmp/tapkee/bin/tapkee /usr/bin\n#   feedgnuplot\nRUN yes | cpan List::MoreUtils \\\n && git clone https://github.com/dkogan/feedgnuplot.git \\\n && cd feedgnuplot \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -r feedgnuplot\n#   pup\nRUN export GOPATH=/usr \\\n && go get github.com/ericchiang/pup \\\n && go get github.com/jehiah/json2csv\n#   csvfix\nRUN curl https://bitbucket.org/neilb/csvfix/get/version-1.6.zip > /tmp/csvfix.zip \\\n && cd /tmp \\\n && unzip csvfix.zip \\\n && mv neilb* csvfix \\\n && cd csvfix \\\n && make lin \\\n && mv csvfix/bin/csvfix /bin\n#   weka\nRUN cd /tmp \\\n && curl -L https://sourceforge.net/projects/weka/files/weka-3-8/3.8.1/weka-3-8-1.zip > weka.zip \\\n && unzip weka.zip \\\n && mv weka-3-8-1/weka.jar /bin\n#   curlicue\nRUN cd /tmp \\\n && curl -L https://github.com/decklin/curlicue/archive/master.zip > curlicue.zip \\\n && unzip curlicue.zip \\\n && mv curlicue-master/curl* /bin\n#   drake and drip\nRUN curl -L https://raw.githubusercontent.com/Factual/drake/master/bin/drake > /usr/bin/drake \\\n && chmod 755 /usr/bin/drake\nRUN SHELL=/bin/bash drake ; exit 0\nENV JAVA_HOME=\"/usr/lib/jvm/default-jvm\"\nRUN ln -sf \"${JAVA_HOME}/bin/\"* \"/usr/bin/\"\nRUN curl -L https://raw.githubusercontent.com/ninjudd/drip/master/bin/drip > /usr/bin/drip \\\n && chmod 755 /usr/bin/drip \\\n && drip ; exit 0\n#   csvquote\nRUN cd /tmp \\\n && git clone https://github.com/dbro/csvquote.git \\\n && cd csvquote \\\n && make \\\n && make BINDIR=/usr/bin/ install\n#   vowpal wabbit\nRUN cd /tmp \\\n && git clone --depth 1 --branch master --single-branch git://github.com/JohnLangford/vowpal_wabbit.git \\\n && cd vowpal_wabbit \\\n && make \\\n && make install\n#   crush tools\nRUN cd /tmp \\\n && curl -L https://github.com/google/crush-tools/releases/download/20150716/crush-tools-20150716.tar.gz > crush-tools.tar.gz \\\n && tar -xzvf crush-tools.tar.gz \\\n && cd crush-tools-20150716/ \\\n && sed -i '12i#include <sys/types.h>' src/fieldsplit/fieldsplit.c \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\n#   data science at the command line tools, book content, and example data\nRUN cd /tmp \\\n && git clone https://github.com/jeroenjanssens/data-science-at-the-command-line.git \\\n && cp -v data-science-at-the-command-line/tools/* /usr/bin/ \\\n && cp -rv data-science-at-the-command-line/data /home/ \\\n && cp -rv data-science-at-the-command-line/book /home/\nRUN rm -rf /tmp/* /var/cache/apk/*\nRUN echo \"export PAGER='less'\" >> ~/.bashrc \\\n && echo \"export SHELL='/bin/bash'\" >> ~/.bashrc \\\n && echo \"alias l='ls -lph --group-directories-first'\" >> ~/.bashrc \\\n && echo \"alias parallel='parallel --will-cite'\" >> ~/.bashrc \\\n && echo 'export PS1=\"\\[\\033[38;5;6m\\][\\w]$\\[$(tput sgr0)\\] \"' >> ~/.bashrc\nRUN cat $( which weka ;) | sed -ne '/WEKAPATH=/,/complete /p' | cut -c3- | sed -e 's|/home/joe||' >> ~/.bashrc\nRUN apk --no-cache add msttcorefonts-installer fontconfig \\\n && update-ms-fonts \\\n && fc-cache -f\nRUN rm -rf /tmp/* /var/cache/apk/*\nWORKDIR /data\nCMD bash\n","originalDockerfileUglifiedHash":"9621e19617c4cbbadb286245d752b5f1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fa12afcf1e0d1f9161130bd58593eeab3f05b5ab.dockerfile"}