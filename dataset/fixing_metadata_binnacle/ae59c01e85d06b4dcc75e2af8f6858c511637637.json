{"seed":1583554765,"processedDockerfileHash":"33aa3c7c5b8a1e2d358ff9e045b80db0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\n#  #<autogenerated>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-bin apache2.2-common -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html\n#   Apache + PHP requires preforking Apache for best results\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist \\\n && rm /etc/apache2/conf-enabled/* /etc/apache2/sites-enabled/*\nCOPY apache2.conf /etc/apache2/apache2.conf\n#   it'd be nice if we could not COPY apache2.conf until the end of the Dockerfile, but its contents are checked by PHP during compilation\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2\"\n#  #</autogenerated>##\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0BD78B5F97500D450838F95DFE857D9A90D90EC1 F38252826ACD957EF380D39F2F7956BC5DA04B5D\"\nENV PHP_VERSION=\"5.5.9\"\nENV PHP_FILENAME=\"php-5.5.9.tar.xz\"\nENV PHP_SHA256=\"7f7a7b1189472e59b234233daab9aa9692bb5eb8404485e9a78221f75ee4664a\"\nENV PHP_MD5=\"139e2ac02fddd4c80cc31de000c6f7e3\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_MD5 *$PHP_FILENAME\" | md5sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --enable-mbstring --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nCOPY docker-php-ext-* /usr/local/bin/\n#  #<autogenerated>##\nCOPY apache2-foreground /usr/local/bin/\nWORKDIR /var/www/html\nEXPOSE 80/tcp\nCMD [\"apache2-foreground\"]\n#  #</autogenerated>##\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\n#  phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#  persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\n# #<autogenerated>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-bin apache2.2-common -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html\n#  Apache + PHP requires preforking Apache for best results\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist \\\n && rm /etc/apache2/conf-enabled/* /etc/apache2/sites-enabled/*\nCOPY apache2.conf /etc/apache2/apache2.conf\n#  it'd be nice if we could not COPY apache2.conf until the end of the Dockerfile, but its contents are checked by PHP during compilation\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2\"\n# #</autogenerated>##\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0BD78B5F97500D450838F95DFE857D9A90D90EC1 F38252826ACD957EF380D39F2F7956BC5DA04B5D\"\nENV PHP_VERSION=\"5.5.9\"\nENV PHP_FILENAME=\"php-5.5.9.tar.xz\"\nENV PHP_SHA256=\"7f7a7b1189472e59b234233daab9aa9692bb5eb8404485e9a78221f75ee4664a\"\nENV PHP_MD5=\"139e2ac02fddd4c80cc31de000c6f7e3\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_MD5 *$PHP_FILENAME\" | md5sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --enable-mbstring --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nCOPY docker-php-ext-* /usr/local/bin/\n# #<autogenerated>##\nCOPY apache2-foreground /usr/local/bin/\nWORKDIR /var/www/html\nEXPOSE 80/tcp\nCMD [\"apache2-foreground\"]\n# #</autogenerated>##\n","injectedSmells":[],"originalDockerfileHash":"665450b381caa5e97108ec635e6320cd","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\n#  #<autogenerated>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-bin apache2.2-common -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html\n#   Apache + PHP requires preforking Apache for best results\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist \\\n && rm /etc/apache2/conf-enabled/* /etc/apache2/sites-enabled/*\nCOPY apache2.conf /etc/apache2/apache2.conf\n#   it'd be nice if we could not COPY apache2.conf until the end of the Dockerfile, but its contents are checked by PHP during compilation\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2\"\n#  #</autogenerated>##\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0BD78B5F97500D450838F95DFE857D9A90D90EC1 F38252826ACD957EF380D39F2F7956BC5DA04B5D\"\nENV PHP_VERSION=\"5.5.9\"\nENV PHP_FILENAME=\"php-5.5.9.tar.xz\"\nENV PHP_SHA256=\"7f7a7b1189472e59b234233daab9aa9692bb5eb8404485e9a78221f75ee4664a\"\nENV PHP_MD5=\"139e2ac02fddd4c80cc31de000c6f7e3\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_MD5 *$PHP_FILENAME\" | md5sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --enable-mbstring --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nCOPY docker-php-ext-* /usr/local/bin/\n#  #<autogenerated>##\nCOPY apache2-foreground /usr/local/bin/\nWORKDIR /var/www/html\nEXPOSE 80/tcp\nCMD [\"apache2-foreground\"]\n#  #</autogenerated>##\n","originalDockerfileUglifiedHash":"f3ce0a240f697464b32ec2118e78e036","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ae59c01e85d06b4dcc75e2af8f6858c511637637.dockerfile"}