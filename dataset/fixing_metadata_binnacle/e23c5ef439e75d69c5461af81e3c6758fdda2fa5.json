{"seed":3992322519,"processedDockerfileHash":"1c73d686918ae25aa290b439e4d79d18","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM cusdeb/stretch:armhf\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV BOOKMARKS_VERSION=\"v0.11.0\"\nENV CALENDAR_VERSION=\"v1.6.1\"\nENV CONTACTS_VERSION=\"v2.1.3\"\nENV NEXTCLOUD_VERSION=\"v13.0.2\"\nENV OCSMS_VERSION=\"1.12.7\"\nENV SPREED_VERSION=\"v3.2.1\"\nENV TERM=\"linux\"\nCOPY ./fix_phantomjs_on_armv7l.sh /usr/bin/fix_phantomjs_on_armv7l.sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https build-essential curl git gnupg2 less make memcached nano nginx patch php-apcu php-curl php-gd php-fpm php-ldap php-mbstring php-memcached php-mysql php-xml php-zip sudo supervisor wget cron -y \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && wget -qO- https://deb.nodesource.com/setup_8.x | sudo bash - \\\n && apt-get install --no-install-recommends nodejs \\\n && wget -qO - https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends yarn -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && cd /var/www \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/server.git nc \\\n && cd /var/www/nc \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/3rdparty.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/apps.git apps2 \\\n && cd /var/www/nc/apps2 \\\n && git clone -b $CALENDAR_VERSION --depth 1 https://github.com/nextcloud/calendar.git \\\n && git clone -b $CONTACTS_VERSION --depth 1 https://github.com/nextcloud/contacts.git \\\n && git clone -b $BOOKMARKS_VERSION --depth 1 https://github.com/nextcloud/bookmarks.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_pdfviewer.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_videoplayer.git \\\n && rm -r /var/www/nc/apps2/files_videoviewer \\\n && rm -r /var/www/nc/apps2/files_odfviewer \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/notifications.git \\\n && git clone -b $OCSMS_VERSION --depth 1 https://github.com/nextcloud/ocsms.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/gallery.git \\\n && git clone -b $SPREED_VERSION --depth 1 https://github.com/nextcloud/spreed.git \\\n && chown -R www-data:www-data /var/www \\\n && cd /var/www/nc/apps2/calendar \\\n && sudo -u www-data make \\\n && cd ../contacts \\\n && sudo -u www-data make \\\n && rm -r /var/www/.cache \\\n && rm -r /var/www/.node-gyp \\\n && rm -r /var/www/.npm \\\n && rm -r /var/www/nc/apps2/calendar/js/node_modules \\\n && rm -r /var/www/nc/apps2/contacts/node_modules \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && apt-get purge -y apt-transport-https build-essential curl git gnupg2 make wget nodejs yarn \\\n && apt-get autoremove -y\nCOPY ./patches /var/www/nc/patches\nCOPY ./rollout_fixes.sh /usr/bin/rollout_fixes.sh\nCOPY ./config/cron /tmp/cron\nCOPY ./config/default /etc/nginx/sites-available/default\nCOPY ./config/www.conf /etc/php/7.0/fpm/pool.d/www.conf\nCOPY ./config/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY ./run_nginx.sh /usr/bin/run_nginx.sh\nRUN /usr/bin/rollout_fixes.sh\nRUN crontab -u www-data /tmp/cron\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM cusdeb/stretch:armhf\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV BOOKMARKS_VERSION=\"v0.11.0\"\nENV CALENDAR_VERSION=\"v1.6.1\"\nENV CONTACTS_VERSION=\"v2.1.3\"\nENV NEXTCLOUD_VERSION=\"v13.0.2\"\nENV OCSMS_VERSION=\"1.12.7\"\nENV SPREED_VERSION=\"v3.2.1\"\nENV TERM=\"linux\"\nCOPY ./fix_phantomjs_on_armv7l.sh /usr/bin/fix_phantomjs_on_armv7l.sh\nRUN apt-get update \\\n && apt-get install apt-transport-https build-essential curl git gnupg2 less make memcached nano nginx patch php-apcu php-curl php-gd php-fpm php-ldap php-mbstring php-memcached php-mysql php-xml php-zip sudo supervisor wget cron -y \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && wget -qO- https://deb.nodesource.com/setup_8.x | sudo bash - \\\n && apt-get install nodejs \\\n && wget -qO - https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list \\\n && apt-get update \\\n && apt-get install yarn -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && cd /var/www \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/server.git nc \\\n && cd /var/www/nc \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/3rdparty.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/apps.git apps2 \\\n && cd /var/www/nc/apps2 \\\n && git clone -b $CALENDAR_VERSION --depth 1 https://github.com/nextcloud/calendar.git \\\n && git clone -b $CONTACTS_VERSION --depth 1 https://github.com/nextcloud/contacts.git \\\n && git clone -b $BOOKMARKS_VERSION --depth 1 https://github.com/nextcloud/bookmarks.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_pdfviewer.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_videoplayer.git \\\n && rm -r /var/www/nc/apps2/files_videoviewer \\\n && rm -r /var/www/nc/apps2/files_odfviewer \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/notifications.git \\\n && git clone -b $OCSMS_VERSION --depth 1 https://github.com/nextcloud/ocsms.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/gallery.git \\\n && git clone -b $SPREED_VERSION --depth 1 https://github.com/nextcloud/spreed.git \\\n && chown -R www-data:www-data /var/www \\\n && cd /var/www/nc/apps2/calendar \\\n && sudo -u www-data make \\\n && cd ../contacts \\\n && sudo -u www-data make \\\n && rm -r /var/www/.cache \\\n && rm -r /var/www/.node-gyp \\\n && rm -r /var/www/.npm \\\n && rm -r /var/www/nc/apps2/calendar/js/node_modules \\\n && rm -r /var/www/nc/apps2/contacts/node_modules \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && apt-get purge -y apt-transport-https build-essential curl git gnupg2 make wget nodejs yarn \\\n && apt-get autoremove -y\nCOPY ./patches /var/www/nc/patches\nCOPY ./rollout_fixes.sh /usr/bin/rollout_fixes.sh\nCOPY ./config/cron /tmp/cron\nCOPY ./config/default /etc/nginx/sites-available/default\nCOPY ./config/www.conf /etc/php/7.0/fpm/pool.d/www.conf\nCOPY ./config/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY ./run_nginx.sh /usr/bin/run_nginx.sh\nRUN /usr/bin/rollout_fixes.sh\nRUN crontab -u www-data /tmp/cron\n","injectedSmells":[],"originalDockerfileHash":"427d7eb187babebffae23e77edf601d7","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM cusdeb/stretch:armhf\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV BOOKMARKS_VERSION=\"v0.11.0\"\nENV CALENDAR_VERSION=\"v1.6.1\"\nENV CONTACTS_VERSION=\"v2.1.3\"\nENV NEXTCLOUD_VERSION=\"v13.0.2\"\nENV OCSMS_VERSION=\"1.12.7\"\nENV SPREED_VERSION=\"v3.2.1\"\nENV TERM=\"linux\"\nCOPY ./fix_phantomjs_on_armv7l.sh /usr/bin/fix_phantomjs_on_armv7l.sh\nRUN apt-get update \\\n && apt-get install apt-transport-https build-essential curl git gnupg2 less make memcached nano nginx patch php-apcu php-curl php-gd php-fpm php-ldap php-mbstring php-memcached php-mysql php-xml php-zip sudo supervisor wget cron -y \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && wget -qO- https://deb.nodesource.com/setup_8.x | sudo bash - \\\n && apt-get install nodejs \\\n && wget -qO - https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list \\\n && apt-get update \\\n && apt-get install yarn -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && cd /var/www \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/server.git nc \\\n && cd /var/www/nc \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/3rdparty.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/apps.git apps2 \\\n && cd /var/www/nc/apps2 \\\n && git clone -b $CALENDAR_VERSION --depth 1 https://github.com/nextcloud/calendar.git \\\n && git clone -b $CONTACTS_VERSION --depth 1 https://github.com/nextcloud/contacts.git \\\n && git clone -b $BOOKMARKS_VERSION --depth 1 https://github.com/nextcloud/bookmarks.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_pdfviewer.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/files_videoplayer.git \\\n && rm -r /var/www/nc/apps2/files_videoviewer \\\n && rm -r /var/www/nc/apps2/files_odfviewer \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/notifications.git \\\n && git clone -b $OCSMS_VERSION --depth 1 https://github.com/nextcloud/ocsms.git \\\n && git clone -b $NEXTCLOUD_VERSION --depth 1 https://github.com/nextcloud/gallery.git \\\n && git clone -b $SPREED_VERSION --depth 1 https://github.com/nextcloud/spreed.git \\\n && chown -R www-data:www-data /var/www \\\n && cd /var/www/nc/apps2/calendar \\\n && sudo -u www-data make \\\n && cd ../contacts \\\n && sudo -u www-data make \\\n && rm -r /var/www/.cache \\\n && rm -r /var/www/.node-gyp \\\n && rm -r /var/www/.npm \\\n && rm -r /var/www/nc/apps2/calendar/js/node_modules \\\n && rm -r /var/www/nc/apps2/contacts/node_modules \\\n && /usr/bin/fix_phantomjs_on_armv7l.sh \\\n && apt-get purge -y apt-transport-https build-essential curl git gnupg2 make wget nodejs yarn \\\n && apt-get autoremove -y\nCOPY ./patches /var/www/nc/patches\nCOPY ./rollout_fixes.sh /usr/bin/rollout_fixes.sh\nCOPY ./config/cron /tmp/cron\nCOPY ./config/default /etc/nginx/sites-available/default\nCOPY ./config/www.conf /etc/php/7.0/fpm/pool.d/www.conf\nCOPY ./config/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY ./run_nginx.sh /usr/bin/run_nginx.sh\nRUN /usr/bin/rollout_fixes.sh\nRUN crontab -u www-data /tmp/cron\n","originalDockerfileUglifiedHash":"427d7eb187babebffae23e77edf601d7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e23c5ef439e75d69c5461af81e3c6758fdda2fa5.dockerfile"}