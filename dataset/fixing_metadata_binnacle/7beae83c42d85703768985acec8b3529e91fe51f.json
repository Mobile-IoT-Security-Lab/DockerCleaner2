{"seed":2998262841,"processedDockerfileHash":"e361ee391aa547b744d8706e4fed0b84","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:6.8\nMAINTAINER lion <lion.net@163.com>\n#   -----------------------------------------------------------------------------\n#   Ensure UTF-8\n#   -----------------------------------------------------------------------------\nENV LANG=\"en_US.UTF-8\"\n#   -----------------------------------------------------------------------------\n#   解决出现 Package 'dialog' has no installation candidate 的提示\n#   -----------------------------------------------------------------------------\nARG DEBIAN_FRONTEND=noninteractive\n#   -----------------------------------------------------------------------------\n#   将系统时间改为上海时间\n#   -----------------------------------------------------------------------------\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n && useradd -r -m work \\\n && echo \"work:123456\" | chpasswd \\\n && echo \"root:123456\" | chpasswd\n#   -----------------------------------------------------------------------------\n#   安装 axel 多线程下载工具\n#   -----------------------------------------------------------------------------\nCOPY axel-2.4-1.el6.rf.x86_64.rpm /home/work/_src/\nCOPY axelget.conf /etc/yum/pluginconf.d/\nCOPY axelget.py /usr/lib/yum-plugins/\nRUN cd /home/work/_src \\\n && rpm -ivh axel-2.4-1.el6.rf.x86_64.rpm\n#   -----------------------------------------------------------------------------\n#   更改源为阿里云\n#   -----------------------------------------------------------------------------\nRUN yum install -y wget \\\n && yum clean all \\\n && yum makecache\n#   -----------------------------------------------------------------------------\n#   安装基础组件\n#   -----------------------------------------------------------------------------\nRUN yum install -y wget python-setuptools iputils bash-completion \\\n && yum install -y net-tools vim arping \\\n && yum install -y zlib zlib-devel openssl openssl--devel openssh-clients pcre pcre-devel libtool \\\n && yum install -y tar unzip man cmake patch lsof \\\n && yum install -y cyrus-sasl-plain cyrus-sasl cyrus-sasl-devel cyrus-sasl-lib \\\n && yum install -y autoconf file gcc gcc-c++ make pkg-config re2c pkg-config\n#   -----------------------------------------------------------------------------\n#   安装supervisor\n#   -----------------------------------------------------------------------------   \nCOPY supervisor-3.3.0.tar.gz /home/work/_src\nRUN cd /home/work/_src/supervisor-3.3.0 \\\n && python setup.py install \\\n && mkdir -p /home/work/_app/supervisord/ /home/work/_logs/supervisord/ \\\n && echo_supervisord_conf > /home/work/_app/supervisord/supervisord.ini \\\n && echo \"[include]\" >> /home/work/_app/supervisord/supervisord.ini \\\n && echo \"files = /home/work/_app/supervisord/conf.d/*.ini\" >> /home/work/_app/supervisord/supervisord.ini \\\n && sed -i \"s/logfile=\\/tmp\\/supervisord.log/logfile=\\/home\\/work\\/_logs\\/supervisord\\/supervisord.log/\" /home/work/_app/supervisord/supervisord.ini\n#   -----------------------------------------------------------------------------\n#   安装 meld3-1.0.2/\n#   -----------------------------------------------------------------------------  \nCOPY meld3-1.0.2.tar.gz /home/work/_src\nRUN cd /home/work/_src/meld3-1.0.2 \\\n && python setup.py install\n#   -----------------------------------------------------------------------------\n#   将 supervisor 将入启动项\n#   -----------------------------------------------------------------------------  \nCOPY supervisord /etc/init.d/supervisord\nRUN chmod +x /etc/init.d/supervisord \\\n && chkconfig --add supervisord \\\n && chkconfig supervisord on \\\n && service supervisord start\n#   -----------------------------------------------------------------------------\n#   安装sshd\n#   -----------------------------------------------------------------------------   \nRUN yum install -y openssh-server openssh-client \\\n && sed -i 's/#RSAAuthentication yes/RSAAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#PubkeyAuthentication yes/PubkeyAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#AuthorizedKeysFile/AuthorizedKeysFile/g' /etc/ssh/sshd_config \\\n && ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key \\\n && ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key \\\n && ssh-keygen -q -t rsa -P '' -f /root/.ssh/id_rsa \\\n && cat /root/.ssh/id_rsa.pub > /root/.ssh/authorized_keys\n#   -----------------------------------------------------------------------------\n#   删除多余文件\n#   -----------------------------------------------------------------------------\nRUN mkdir -p /home/work/_script/ \\\n && yum clean all \\\n && rm -rf /home/work/_src/*\n#   -----------------------------------------------------------------------------\n#   设置work目录的用户和用户组\n#   -----------------------------------------------------------------------------\nRUN chown -R work:work /home/work/*\n#   -----------------------------------------------------------------------------\n#   Define working directory.\n#   -----------------------------------------------------------------------------\nWORKDIR /home/work\n#   -----------------------------------------------------------------------------\n#   映射端口\n#   -----------------------------------------------------------------------------\nEXPOSE 22/tcp\n#   -----------------------------------------------------------------------------\n#   添加执行文件\n#   -----------------------------------------------------------------------------\nCOPY run.sh /\nRUN chmod +x /run.sh\nCMD [\"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:6.8\nMAINTAINER lion <lion.net@163.com>\n#  -----------------------------------------------------------------------------\n#  Ensure UTF-8\n#  -----------------------------------------------------------------------------\nENV LANG=\"en_US.UTF-8\"\n#  -----------------------------------------------------------------------------\n#  解决出现 Package 'dialog' has no installation candidate 的提示\n#  -----------------------------------------------------------------------------\nARG DEBIAN_FRONTEND=noninteractive\n#  -----------------------------------------------------------------------------\n#  将系统时间改为上海时间\n#  -----------------------------------------------------------------------------\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n && useradd -r -m work \\\n && echo \"work:123456\" | chpasswd \\\n && echo \"root:123456\" | chpasswd\n#  -----------------------------------------------------------------------------\n#  安装 axel 多线程下载工具\n#  -----------------------------------------------------------------------------\nADD axel-2.4-1.el6.rf.x86_64.rpm /home/work/_src/\nADD axelget.conf /etc/yum/pluginconf.d/\nADD axelget.py /usr/lib/yum-plugins/\nRUN cd /home/work/_src \\\n && rpm -ivh axel-2.4-1.el6.rf.x86_64.rpm\n#  -----------------------------------------------------------------------------\n#  更改源为阿里云\n#  -----------------------------------------------------------------------------\nRUN yum install -y wget \\\n && yum clean all \\\n && yum makecache\n#  -----------------------------------------------------------------------------\n#  安装基础组件\n#  -----------------------------------------------------------------------------\nRUN yum install -y wget python-setuptools iputils bash-completion \\\n && yum install -y net-tools vim arping \\\n && yum install -y zlib zlib-devel openssl openssl--devel openssh-clients pcre pcre-devel libtool \\\n && yum install -y tar unzip man cmake patch lsof \\\n && yum install -y cyrus-sasl-plain cyrus-sasl cyrus-sasl-devel cyrus-sasl-lib \\\n && yum install -y autoconf file gcc gcc-c++ make pkg-config re2c pkg-config\n#  -----------------------------------------------------------------------------\n#  安装supervisor\n#  -----------------------------------------------------------------------------   \nADD supervisor-3.3.0.tar.gz /home/work/_src\nRUN cd /home/work/_src/supervisor-3.3.0 \\\n && python setup.py install \\\n && mkdir -p /home/work/_app/supervisord/ /home/work/_logs/supervisord/ \\\n && echo_supervisord_conf > /home/work/_app/supervisord/supervisord.ini \\\n && echo \"[include]\" >> /home/work/_app/supervisord/supervisord.ini \\\n && echo \"files = /home/work/_app/supervisord/conf.d/*.ini\" >> /home/work/_app/supervisord/supervisord.ini \\\n && sed -i \"s/logfile=\\/tmp\\/supervisord.log/logfile=\\/home\\/work\\/_logs\\/supervisord\\/supervisord.log/\" /home/work/_app/supervisord/supervisord.ini\n#  -----------------------------------------------------------------------------\n#  安装 meld3-1.0.2/\n#  -----------------------------------------------------------------------------  \nADD meld3-1.0.2.tar.gz /home/work/_src\nRUN cd /home/work/_src/meld3-1.0.2 \\\n && python setup.py install\n#  -----------------------------------------------------------------------------\n#  将 supervisor 将入启动项\n#  -----------------------------------------------------------------------------  \nADD supervisord /etc/init.d/supervisord\nRUN chmod +x /etc/init.d/supervisord \\\n && chkconfig --add supervisord \\\n && chkconfig supervisord on \\\n && service supervisord start\n#  -----------------------------------------------------------------------------\n#  安装sshd\n#  -----------------------------------------------------------------------------   \nRUN yum install -y openssh-server openssh-client \\\n && sed -i 's/#RSAAuthentication yes/RSAAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#PubkeyAuthentication yes/PubkeyAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#AuthorizedKeysFile/AuthorizedKeysFile/g' /etc/ssh/sshd_config \\\n && ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key \\\n && ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key \\\n && ssh-keygen -q -t rsa -P '' -f /root/.ssh/id_rsa \\\n && cat /root/.ssh/id_rsa.pub > /root/.ssh/authorized_keys\n#  -----------------------------------------------------------------------------\n#  删除多余文件\n#  -----------------------------------------------------------------------------\nRUN mkdir -p /home/work/_script/ \\\n && yum clean all \\\n && rm -rf /home/work/_src/*\n#  -----------------------------------------------------------------------------\n#  设置work目录的用户和用户组\n#  -----------------------------------------------------------------------------\nRUN chown -R work:work /home/work/*\n#  -----------------------------------------------------------------------------\n#  Define working directory.\n#  -----------------------------------------------------------------------------\nWORKDIR /home/work\n#  -----------------------------------------------------------------------------\n#  映射端口\n#  -----------------------------------------------------------------------------\nEXPOSE 22/tcp\n#  -----------------------------------------------------------------------------\n#  添加执行文件\n#  -----------------------------------------------------------------------------\nADD run.sh /\nRUN chmod +x /run.sh\nCMD [\"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"185ffb034fb472b81c794800b2b5dc39","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:6.8\nMAINTAINER lion <lion.net@163.com>\n#   -----------------------------------------------------------------------------\n#   Ensure UTF-8\n#   -----------------------------------------------------------------------------\nENV LANG=\"en_US.UTF-8\"\n#   -----------------------------------------------------------------------------\n#   解决出现 Package 'dialog' has no installation candidate 的提示\n#   -----------------------------------------------------------------------------\nARG DEBIAN_FRONTEND=noninteractive\n#   -----------------------------------------------------------------------------\n#   将系统时间改为上海时间\n#   -----------------------------------------------------------------------------\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n && useradd -r -m work \\\n && echo \"work:123456\" | chpasswd \\\n && echo \"root:123456\" | chpasswd\n#   -----------------------------------------------------------------------------\n#   安装 axel 多线程下载工具\n#   -----------------------------------------------------------------------------\nADD axel-2.4-1.el6.rf.x86_64.rpm /home/work/_src/\nADD axelget.conf /etc/yum/pluginconf.d/\nADD axelget.py /usr/lib/yum-plugins/\nRUN cd /home/work/_src \\\n && rpm -ivh axel-2.4-1.el6.rf.x86_64.rpm\n#   -----------------------------------------------------------------------------\n#   更改源为阿里云\n#   -----------------------------------------------------------------------------\nRUN yum install -y wget \\\n && yum clean all \\\n && yum makecache\n#   -----------------------------------------------------------------------------\n#   安装基础组件\n#   -----------------------------------------------------------------------------\nRUN yum install -y wget python-setuptools iputils bash-completion \\\n && yum install -y net-tools vim arping \\\n && yum install -y zlib zlib-devel openssl openssl--devel openssh-clients pcre pcre-devel libtool \\\n && yum install -y tar unzip man cmake patch lsof \\\n && yum install -y cyrus-sasl-plain cyrus-sasl cyrus-sasl-devel cyrus-sasl-lib \\\n && yum install -y autoconf file gcc gcc-c++ make pkg-config re2c pkg-config\n#   -----------------------------------------------------------------------------\n#   安装supervisor\n#   -----------------------------------------------------------------------------   \nADD supervisor-3.3.0.tar.gz /home/work/_src\nRUN cd /home/work/_src/supervisor-3.3.0 \\\n && python setup.py install \\\n && mkdir -p /home/work/_app/supervisord/ /home/work/_logs/supervisord/ \\\n && echo_supervisord_conf > /home/work/_app/supervisord/supervisord.ini \\\n && echo \"[include]\" >> /home/work/_app/supervisord/supervisord.ini \\\n && echo \"files = /home/work/_app/supervisord/conf.d/*.ini\" >> /home/work/_app/supervisord/supervisord.ini \\\n && sed -i \"s/logfile=\\/tmp\\/supervisord.log/logfile=\\/home\\/work\\/_logs\\/supervisord\\/supervisord.log/\" /home/work/_app/supervisord/supervisord.ini\n#   -----------------------------------------------------------------------------\n#   安装 meld3-1.0.2/\n#   -----------------------------------------------------------------------------  \nADD meld3-1.0.2.tar.gz /home/work/_src\nRUN cd /home/work/_src/meld3-1.0.2 \\\n && python setup.py install\n#   -----------------------------------------------------------------------------\n#   将 supervisor 将入启动项\n#   -----------------------------------------------------------------------------  \nADD supervisord /etc/init.d/supervisord\nRUN chmod +x /etc/init.d/supervisord \\\n && chkconfig --add supervisord \\\n && chkconfig supervisord on \\\n && service supervisord start\n#   -----------------------------------------------------------------------------\n#   安装sshd\n#   -----------------------------------------------------------------------------   \nRUN yum install -y openssh-server openssh-client \\\n && sed -i 's/#RSAAuthentication yes/RSAAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#PubkeyAuthentication yes/PubkeyAuthentication yes/g' /etc/ssh/sshd_config \\\n && sed -i 's/#AuthorizedKeysFile/AuthorizedKeysFile/g' /etc/ssh/sshd_config \\\n && ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key \\\n && ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key \\\n && ssh-keygen -q -t rsa -P '' -f /root/.ssh/id_rsa \\\n && cat /root/.ssh/id_rsa.pub > /root/.ssh/authorized_keys\n#   -----------------------------------------------------------------------------\n#   删除多余文件\n#   -----------------------------------------------------------------------------\nRUN mkdir -p /home/work/_script/ \\\n && yum clean all \\\n && rm -rf /home/work/_src/*\n#   -----------------------------------------------------------------------------\n#   设置work目录的用户和用户组\n#   -----------------------------------------------------------------------------\nRUN chown -R work:work /home/work/*\n#   -----------------------------------------------------------------------------\n#   Define working directory.\n#   -----------------------------------------------------------------------------\nWORKDIR /home/work\n#   -----------------------------------------------------------------------------\n#   映射端口\n#   -----------------------------------------------------------------------------\nEXPOSE 22/tcp\n#   -----------------------------------------------------------------------------\n#   添加执行文件\n#   -----------------------------------------------------------------------------\nADD run.sh /\nRUN chmod +x /run.sh\nCMD [\"/run.sh\"]\n","originalDockerfileUglifiedHash":"a5a29c303809257be7c38fa0092843d7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7beae83c42d85703768985acec8b3529e91fe51f.dockerfile"}