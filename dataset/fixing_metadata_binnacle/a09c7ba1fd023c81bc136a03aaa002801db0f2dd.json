{"seed":977691068,"processedDockerfileHash":"466e0bb5eaef784d6281e2540a3af842","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck"],"processedDockerfile":"#   Copyright (c) 2016-present Sonatype, Inc.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM docker.io/centos:7\nMAINTAINER Sonatype <cloud-ops@sonatype.com>\n#   Atomic Labels\nLABEL name=\"Nexus Repository Manager\" \\\n      vendor=\"Sonatype\" \\\n      version=\"3.2.1-01\" \\\n      release=\"3.2.1\" \\\n      url=\"https://sonatype.com\" \\\n      summary=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      run=\"docker run -d --name NAME  -p 8081:8081  IMAGE\" \\\n      stop=\"docker stop NAME\"\n#   OpenShift Labels\nLABEL io.k8s.description=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      io.k8s.display-name=\"Nexus Repository Manager\" \\\n      io.openshift.expose-services=\"8081:8081\" \\\n      io.openshift.tags=\"Sonatype,Nexus\"\n#   Sonatype Labels\nLABEL com.sonatype.license=\"Apache License, Version 2.0\"\n#   Install Runtime Environment\nENV JAVA_VERSION_MAJOR=\"8\" \\\n    JAVA_VERSION_MINOR=\"131\" \\\n    JAVA_VERSION_BUILD=\"11\" \\\n    JAVA_DOWNLOAD_HASH=\"d54c1d3a095b4ff2b6607d096fa80163\"\nENV JAVA_URL=\"http://download.oracle.com/otn-pub/java/jdk/${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-b${JAVA_VERSION_BUILD}/${JAVA_DOWNLOAD_HASH}/\" \\\n    JAVA_RPM=\"jdk-${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-linux-x64.rpm\"\nCOPY help.1 uid_entrypoint /\nRUN yum install -y --setopt=tsflags=nodocs curl tar \\\n && yum clean all \\\n && curl --remote-name --fail --silent --location --retry 3 --header \"Cookie: oraclelicense=accept-securebackup-cookie; \" ${JAVA_URL}${JAVA_RPM} \\\n && yum localinstall -y ${JAVA_RPM} \\\n && yum clean all \\\n && rm ${JAVA_RPM}\n#   Install Nexus\nENV SONATYPE_DIR=\"/opt/sonatype\"\nENV NEXUS_DATA=\"/nexus-data\" \\\n    NEXUS_HOME=\"${SONATYPE_DIR}/nexus\" \\\n    NEXUS_VERSION=\"3.2.1-01\" \\\n    SONATYPE_WORK=\"${SONATYPE_DIR}/sonatype-work\" \\\n    NEXUS_CONTEXT=\"\" \\\n    USER_NAME=\"nexus\" \\\n    USER_UID=\"200\"\n#   Install Nexus and Configure Nexus Runtime Environment\nRUN mkdir -p ${NEXUS_HOME} \\\n && curl --fail --silent --location --retry 3 https://download.sonatype.com/nexus/3/nexus-${NEXUS_VERSION}-unix.tar.gz | gunzip | tar x -C ${NEXUS_HOME} --strip-components=1 nexus-${NEXUS_VERSION} \\\n && chown -R root:root ${NEXUS_HOME} \\\n && sed -e '/^nexus-context/ s:$:${NEXUS_CONTEXT}:' -i ${NEXUS_HOME}/etc/nexus-default.properties \\\n && useradd -l -u ${USER_UID} -r -g 0 -m -d ${NEXUS_DATA} -s /sbin/no-login -c \"${USER_NAME} application user\" ${USER_NAME} \\\n && mkdir -p ${NEXUS_DATA}/etc ${NEXUS_DATA}/log ${NEXUS_DATA}/tmp ${SONATYPE_WORK} \\\n && ln -s ${NEXUS_DATA} ${SONATYPE_WORK}/nexus3 \\\n && chown -R ${USER_NAME}:0 ${NEXUS_DATA} \\\n && chmod -R g+rw ${NEXUS_DATA} /etc/passwd \\\n && chmod ug+x /uid_entrypoint \\\n && find ${NEXUS_DATA} -type d -exec chmod g+x {} +\nVOLUME ${NEXUS_DATA}\n#   arbitrary uid recognition at runtime - for OpenShift deployments\nRUN sed \"s@${USER_NAME}:x:${USER_UID}:@${USER_NAME}:x:${USER_ID}:@g\" /etc/passwd > /etc/passwd.template\n#   Supply non variable to USER command ${USER_NAME}\nUSER 200\nWORKDIR ${NEXUS_HOME}\nENV JAVA_MAX_MEM=\"1200m\" \\\n    JAVA_MIN_MEM=\"1200m\"\nEXPOSE 8081/tcp\nENTRYPOINT [\"/uid_entrypoint\"]\nCMD [\"bin/nexus\", \"run\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (c) 2016-present Sonatype, Inc.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM docker.io/centos:7\nMAINTAINER Sonatype <cloud-ops@sonatype.com>\n#  Atomic Labels\nLABEL name=\"Nexus Repository Manager\" \\\n      vendor=\"Sonatype\" \\\n      version=\"3.2.1-01\" \\\n      release=\"3.2.1\" \\\n      url=\"https://sonatype.com\" \\\n      summary=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      run=\"docker run -d --name NAME  -p 8081:8081  IMAGE\" \\\n      stop=\"docker stop NAME\"\n#  OpenShift Labels\nLABEL io.k8s.description=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      io.k8s.display-name=\"Nexus Repository Manager\" \\\n      io.openshift.expose-services=\"8081:8081\" \\\n      io.openshift.tags=\"Sonatype,Nexus\"\n#  Sonatype Labels\nLABEL com.sonatype.license=\"Apache License, Version 2.0\"\n#  Install Runtime Environment\nENV JAVA_VERSION_MAJOR=\"8\" \\\n    JAVA_VERSION_MINOR=\"131\" \\\n    JAVA_VERSION_BUILD=\"11\" \\\n    JAVA_DOWNLOAD_HASH=\"d54c1d3a095b4ff2b6607d096fa80163\"\nENV JAVA_URL=\"http://download.oracle.com/otn-pub/java/jdk/${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-b${JAVA_VERSION_BUILD}/${JAVA_DOWNLOAD_HASH}/\" \\\n    JAVA_RPM=\"jdk-${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-linux-x64.rpm\"\nCOPY help.1 uid_entrypoint /\nRUN yum install -y --setopt=tsflags=nodocs curl tar \\\n && yum clean all \\\n && curl --remote-name --fail --silent --location --retry 3 --header \"Cookie: oraclelicense=accept-securebackup-cookie; \" ${JAVA_URL}${JAVA_RPM} \\\n && yum localinstall -y ${JAVA_RPM} \\\n && yum clean all \\\n && rm ${JAVA_RPM}\n#  Install Nexus\nENV SONATYPE_DIR=\"/opt/sonatype\"\nENV NEXUS_DATA=\"/nexus-data\" \\\n    NEXUS_HOME=\"${SONATYPE_DIR}/nexus\" \\\n    NEXUS_VERSION=\"3.2.1-01\" \\\n    SONATYPE_WORK=\"${SONATYPE_DIR}/sonatype-work\" \\\n    NEXUS_CONTEXT=\"\" \\\n    USER_NAME=\"nexus\" \\\n    USER_UID=\"200\"\n#  Install Nexus and Configure Nexus Runtime Environment\nRUN mkdir -p ${NEXUS_HOME} \\\n && curl --fail --silent --location --retry 3 https://download.sonatype.com/nexus/3/nexus-${NEXUS_VERSION}-unix.tar.gz | gunzip | tar x -C ${NEXUS_HOME} --strip-components=1 nexus-${NEXUS_VERSION} \\\n && chown -R root:root ${NEXUS_HOME} \\\n && sed -e '/^nexus-context/ s:$:${NEXUS_CONTEXT}:' -i ${NEXUS_HOME}/etc/nexus-default.properties \\\n && useradd -l -u ${USER_UID} -r -g 0 -m -d ${NEXUS_DATA} -s /sbin/no-login -c \"${USER_NAME} application user\" ${USER_NAME} \\\n && mkdir -p ${NEXUS_DATA}/etc ${NEXUS_DATA}/log ${NEXUS_DATA}/tmp ${SONATYPE_WORK} \\\n && ln -s ${NEXUS_DATA} ${SONATYPE_WORK}/nexus3 \\\n && chown -R ${USER_NAME}:0 ${NEXUS_DATA} \\\n && chmod -R g+rw ${NEXUS_DATA} /etc/passwd \\\n && chmod ug+x /uid_entrypoint \\\n && find ${NEXUS_DATA} -type d -exec chmod g+x {} +\nVOLUME ${NEXUS_DATA}\n#  arbitrary uid recognition at runtime - for OpenShift deployments\nRUN sed \"s@${USER_NAME}:x:${USER_UID}:@${USER_NAME}:x:${USER_ID}:@g\" /etc/passwd > /etc/passwd.template\n#  Supply non variable to USER command ${USER_NAME}\nUSER 200\nWORKDIR ${NEXUS_HOME}\nENV JAVA_MAX_MEM=\"1200m\" \\\n    JAVA_MIN_MEM=\"1200m\"\nEXPOSE 8081/tcp\nENTRYPOINT [\"/uid_entrypoint\"]\nCMD [\"bin/nexus\", \"run\"]\n","injectedSmells":[],"originalDockerfileHash":"a25c3c8a2292b27c17852da23a4661bc","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (c) 2016-present Sonatype, Inc.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM docker.io/centos:7\nMAINTAINER Sonatype <cloud-ops@sonatype.com>\n#   Atomic Labels\nLABEL name=\"Nexus Repository Manager\" \\\n      vendor=\"Sonatype\" \\\n      version=\"3.2.1-01\" \\\n      release=\"3.2.1\" \\\n      url=\"https://sonatype.com\" \\\n      summary=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      run=\"docker run -d --name NAME  -p 8081:8081  IMAGE\" \\\n      stop=\"docker stop NAME\"\n#   OpenShift Labels\nLABEL io.k8s.description=\"The Nexus Repository Manager server  with universal support for popular component formats.\" \\\n      io.k8s.display-name=\"Nexus Repository Manager\" \\\n      io.openshift.expose-services=\"8081:8081\" \\\n      io.openshift.tags=\"Sonatype,Nexus\"\n#   Sonatype Labels\nLABEL com.sonatype.license=\"Apache License, Version 2.0\"\n#   Install Runtime Environment\nENV JAVA_VERSION_MAJOR=\"8\" \\\n    JAVA_VERSION_MINOR=\"131\" \\\n    JAVA_VERSION_BUILD=\"11\" \\\n    JAVA_DOWNLOAD_HASH=\"d54c1d3a095b4ff2b6607d096fa80163\"\nENV JAVA_URL=\"http://download.oracle.com/otn-pub/java/jdk/${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-b${JAVA_VERSION_BUILD}/${JAVA_DOWNLOAD_HASH}/\" \\\n    JAVA_RPM=\"jdk-${JAVA_VERSION_MAJOR}u${JAVA_VERSION_MINOR}-linux-x64.rpm\"\nCOPY help.1 uid_entrypoint /\nRUN yum install -y --setopt=tsflags=nodocs curl tar \\\n && yum clean all \\\n && curl --remote-name --fail --silent --location --retry 3 --header \"Cookie: oraclelicense=accept-securebackup-cookie; \" ${JAVA_URL}${JAVA_RPM} \\\n && yum localinstall -y ${JAVA_RPM} \\\n && yum clean all \\\n && rm ${JAVA_RPM}\n#   Install Nexus\nENV SONATYPE_DIR=\"/opt/sonatype\"\nENV NEXUS_DATA=\"/nexus-data\" \\\n    NEXUS_HOME=\"${SONATYPE_DIR}/nexus\" \\\n    NEXUS_VERSION=\"3.2.1-01\" \\\n    SONATYPE_WORK=\"${SONATYPE_DIR}/sonatype-work\" \\\n    NEXUS_CONTEXT=\"\" \\\n    USER_NAME=\"nexus\" \\\n    USER_UID=\"200\"\n#   Install Nexus and Configure Nexus Runtime Environment\nRUN mkdir -p ${NEXUS_HOME} \\\n && curl --fail --silent --location --retry 3 https://download.sonatype.com/nexus/3/nexus-${NEXUS_VERSION}-unix.tar.gz | gunzip | tar x -C ${NEXUS_HOME} --strip-components=1 nexus-${NEXUS_VERSION} \\\n && chown -R root:root ${NEXUS_HOME} \\\n && sed -e '/^nexus-context/ s:$:${NEXUS_CONTEXT}:' -i ${NEXUS_HOME}/etc/nexus-default.properties \\\n && useradd -l -u ${USER_UID} -r -g 0 -m -d ${NEXUS_DATA} -s /sbin/no-login -c \"${USER_NAME} application user\" ${USER_NAME} \\\n && mkdir -p ${NEXUS_DATA}/etc ${NEXUS_DATA}/log ${NEXUS_DATA}/tmp ${SONATYPE_WORK} \\\n && ln -s ${NEXUS_DATA} ${SONATYPE_WORK}/nexus3 \\\n && chown -R ${USER_NAME}:0 ${NEXUS_DATA} \\\n && chmod -R g+rw ${NEXUS_DATA} /etc/passwd \\\n && chmod ug+x /uid_entrypoint \\\n && find ${NEXUS_DATA} -type d -exec chmod g+x {} +\nVOLUME ${NEXUS_DATA}\n#   arbitrary uid recognition at runtime - for OpenShift deployments\nRUN sed \"s@${USER_NAME}:x:${USER_UID}:@${USER_NAME}:x:${USER_ID}:@g\" /etc/passwd > /etc/passwd.template\n#   Supply non variable to USER command ${USER_NAME}\nUSER 200\nWORKDIR ${NEXUS_HOME}\nENV JAVA_MAX_MEM=\"1200m\" \\\n    JAVA_MIN_MEM=\"1200m\"\nEXPOSE 8081/tcp\nENTRYPOINT [\"/uid_entrypoint\"]\nCMD [\"bin/nexus\", \"run\"]\n","originalDockerfileUglifiedHash":"74e1222a765a6eb62750660b8265dd2c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a09c7ba1fd023c81bc136a03aaa002801db0f2dd.dockerfile"}