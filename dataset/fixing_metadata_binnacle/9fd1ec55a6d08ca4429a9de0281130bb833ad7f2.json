{"seed":2862782047,"processedDockerfileHash":"ea09ae435e135bab92a9afc89825e01e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN : \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Hotfixes php-4.4\n#  # Install libdb4.6 from lucid\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6_4.6.21-16_amd64.deb \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6-dev_4.6.21-16_amd64.deb \\\n && echo \"2f03a50d72f66d6c6ac976cb0ff1131a libdb4.6-dev_4.6.21-16_amd64.deb\" > md5sums \\\n && echo \"3f4d7da181ad71d89011983019687929 libdb4.6_4.6.21-16_amd64.deb\" >> md5sums \\\n && md5sum -c md5sums \\\n && dpkg -i libdb4.6-dev_4.6.21-16_amd64.deb libdb4.6_4.6.21-16_amd64.deb \\\n && cd \\\n && rm -rf /tmp/install\n#  # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n#  # Symlink libraries\nRUN for i in /usr/lib/x86_64-linux-gnu/*.so; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\nRUN for i in /usr/lib/x86_64-linux-gnu/*.a; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\n#   Download PHP\nENV PHP_VERSION=\"4.4.9\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php4/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e3b2a0e27f10cb84fd00e5ecd7a1880 php-4.4.9.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-fastcgi --with-config-file-path=/etc/php4 --with-config-file-scan-dir=/etc/php4/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local --with-xsl \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php4/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php4/conf.d/10_timezone.ini\n#   Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php4/conf.d/30_gd.ini\n#   Build module mailparse\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/mailparse-2.1.6.tgz \\\n && echo \"0f84e1da1d074a4915a9bcfe2319ce84 mailparse-2.1.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz mailparse-2.1.6.tgz \\\n && cd mailparse-2.1.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=mailparse.so\" > /etc/php4/conf.d/30_mailparse.ini\n#   Build module pecl_http\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/pecl_http-1.7.6.tgz \\\n && echo \"4926c17a24a11a9b1cf3ec613fad97cb pecl_http-1.7.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz pecl_http-1.7.6.tgz \\\n && cd pecl_http-1.7.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=http.so\" > /etc/php4/conf.d/30_http.ini\n#   Build module xdebug\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xdebug-2.0.5.tgz \\\n && echo \"2d87dab7b6c499a80f0961af602d030c xdebug-2.0.5.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xdebug-2.0.5.tgz \\\n && cd xdebug-2.0.5 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#  Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#  Hotfixes php-4.4\n# # Install libdb4.6 from lucid\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6_4.6.21-16_amd64.deb \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6-dev_4.6.21-16_amd64.deb \\\n && echo \"2f03a50d72f66d6c6ac976cb0ff1131a libdb4.6-dev_4.6.21-16_amd64.deb\" > md5sums \\\n && echo \"3f4d7da181ad71d89011983019687929 libdb4.6_4.6.21-16_amd64.deb\" >> md5sums \\\n && md5sum -c md5sums \\\n && dpkg -i libdb4.6-dev_4.6.21-16_amd64.deb libdb4.6_4.6.21-16_amd64.deb \\\n && cd \\\n && rm -rf /tmp/install\n# # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n# # Symlink libraries\nRUN for i in /usr/lib/x86_64-linux-gnu/*.so; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\nRUN for i in /usr/lib/x86_64-linux-gnu/*.a; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\n#  Download PHP\nENV PHP_VERSION=\"4.4.9\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php4/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e3b2a0e27f10cb84fd00e5ecd7a1880 php-4.4.9.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-fastcgi --with-config-file-path=/etc/php4 --with-config-file-scan-dir=/etc/php4/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local --with-xsl \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#  Create config directory\nRUN mkdir -p /etc/php4/conf.d/\n#  Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php4/conf.d/10_timezone.ini\n#  Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php4/conf.d/30_gd.ini\n#  Build module mailparse\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/mailparse-2.1.6.tgz \\\n && echo \"0f84e1da1d074a4915a9bcfe2319ce84 mailparse-2.1.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz mailparse-2.1.6.tgz \\\n && cd mailparse-2.1.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=mailparse.so\" > /etc/php4/conf.d/30_mailparse.ini\n#  Build module pecl_http\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/pecl_http-1.7.6.tgz \\\n && echo \"4926c17a24a11a9b1cf3ec613fad97cb pecl_http-1.7.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz pecl_http-1.7.6.tgz \\\n && cd pecl_http-1.7.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=http.so\" > /etc/php4/conf.d/30_http.ini\n#  Build module xdebug\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xdebug-2.0.5.tgz \\\n && echo \"2d87dab7b6c499a80f0961af602d030c xdebug-2.0.5.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xdebug-2.0.5.tgz \\\n && cd xdebug-2.0.5 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#  Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#  Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n","injectedSmells":[],"originalDockerfileHash":"d6f6808f27400abfc543cd82aaa2965f","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Hotfixes php-4.4\n#  # Install libdb4.6 from lucid\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6_4.6.21-16_amd64.deb \\\n && wget http://de.archive.ubuntu.com/ubuntu/pool/universe/d/db4.6/libdb4.6-dev_4.6.21-16_amd64.deb \\\n && echo \"2f03a50d72f66d6c6ac976cb0ff1131a libdb4.6-dev_4.6.21-16_amd64.deb\" > md5sums \\\n && echo \"3f4d7da181ad71d89011983019687929 libdb4.6_4.6.21-16_amd64.deb\" >> md5sums \\\n && md5sum -c md5sums \\\n && dpkg -i libdb4.6-dev_4.6.21-16_amd64.deb libdb4.6_4.6.21-16_amd64.deb \\\n && cd \\\n && rm -rf /tmp/install\n#  # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n#  # Symlink libraries\nRUN for i in /usr/lib/x86_64-linux-gnu/*.so; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\nRUN for i in /usr/lib/x86_64-linux-gnu/*.a; do f=`basename $i ` ;ln -sf x86_64-linux-gnu/$f /usr/lib/$f ; done\n#   Download PHP\nENV PHP_VERSION=\"4.4.9\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php4/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e3b2a0e27f10cb84fd00e5ecd7a1880 php-4.4.9.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-fastcgi --with-config-file-path=/etc/php4 --with-config-file-scan-dir=/etc/php4/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local --with-xsl \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php4/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php4/conf.d/10_timezone.ini\n#   Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php4/conf.d/30_gd.ini\n#   Build module mailparse\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/mailparse-2.1.6.tgz \\\n && echo \"0f84e1da1d074a4915a9bcfe2319ce84 mailparse-2.1.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz mailparse-2.1.6.tgz \\\n && cd mailparse-2.1.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=mailparse.so\" > /etc/php4/conf.d/30_mailparse.ini\n#   Build module pecl_http\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/pecl_http-1.7.6.tgz \\\n && echo \"4926c17a24a11a9b1cf3ec613fad97cb pecl_http-1.7.6.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz pecl_http-1.7.6.tgz \\\n && cd pecl_http-1.7.6 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN echo \"extension=http.so\" > /etc/php4/conf.d/30_http.ini\n#   Build module xdebug\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xdebug-2.0.5.tgz \\\n && echo \"2d87dab7b6c499a80f0961af602d030c xdebug-2.0.5.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xdebug-2.0.5.tgz \\\n && cd xdebug-2.0.5 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n","originalDockerfileUglifiedHash":"34cf53b3968d55c611990e663581462a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9fd1ec55a6d08ca4429a9de0281130bb833ad7f2.dockerfile"}