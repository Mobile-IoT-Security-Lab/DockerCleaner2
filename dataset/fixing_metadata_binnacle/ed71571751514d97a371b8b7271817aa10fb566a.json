{"seed":2877726666,"processedDockerfileHash":"4d62112ac8c928c7703846508f7eaa91","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-gem","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   million12/nginx-php\n#\nFROM million12/nginx:latest\nMAINTAINER Marcin Ryzycki <marcin@m12.io>\nENV NVM_DIR=\"/usr/local/nvm\" \\\n    NODE_VERSION=\"6.3.0\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\"\n#   Add install scripts needed by the next RUN command\nCOPY container-files/config/install* /config/\nCOPY container-files/etc/yum.repos.d/* /etc/yum.repos.d/\nRUN yum update -y \\\n && `` yum install -y wget patch tar bzip2 unzip openssh-clients MariaDB-client \\\n && `` rpm -Uvh http://rpms.remirepo.net/enterprise/remi-release-7.rpm \\\n && yum install -y php70-php php70-php-bcmath php70-php-cli php70-php-common php70-php-devel php70-php-fpm php70-php-gd php70-php-gmp php70-php-intl php70-php-json php70-php-mbstring php70-php-mcrypt php70-php-mysqlnd php70-php-opcache php70-php-pdo php70-php-pear php70-php-process php70-php-pspell php70-php-xml `` php70-php-pecl-imagick php70-php-pecl-mysql php70-php-pecl-uploadprogress php70-php-pecl-uuid php70-php-pecl-zip `` || true \\\n && `` ln -sfF /opt/remi/php70/enable /etc/profile.d/php70-paths.sh \\\n && `` `` ln -sfF /opt/remi/php70/root/usr/bin/{pear,pecl,phar,php,php-cgi,php-config,phpize} /usr/local/bin/. \\\n && php --version \\\n && `` mv -f /etc/opt/remi/php70/php.ini /etc/php.ini \\\n && ln -s /etc/php.ini /etc/opt/remi/php70/php.ini \\\n && rm -rf /etc/php.d \\\n && mv /etc/opt/remi/php70/php.d /etc/. \\\n && ln -s /etc/php.d /etc/opt/remi/php70/php.d \\\n && echo 'PHP 7 installed.' \\\n && `` yum install -y ImageMagick GraphicsMagick gcc gcc-c++ libffi-devel libpng-devel zlib-devel \\\n && `` `` yum install -y ruby ruby-devel \\\n && echo 'gem: --no-document' > /etc/gemrc \\\n && gem update --system \\\n && gem install bundler --version 2.4.12 \\\n && `` source /config/install.sh \\\n && `` export PROFILE=/etc/profile.d/nvm.sh \\\n && touch $PROFILE \\\n && curl -sSL https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash \\\n && source $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && `` npm install -g gulp grunt-cli bower browser-sync \\\n && `` echo -e \"StrictHostKeyChecking no\" >> /etc/ssh/ssh_config \\\n && `` `` yum install -y libmemcached-devel \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=memcached.so\" > /etc/php.d/50-memcached.ini \\\n && `` git clone https://github.com/phpredis/phpredis.git \\\n && cd phpredis \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=redis.so\" > /etc/php.d/50-redis.ini \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && chown www /usr/local/bin/composer \\\n && composer --version \\\n && `` yum clean all \\\n && rm -rf /tmp/yum*\nCOPY container-files /\n#   Add NodeJS/npm to PATH (must be separate ENV instruction as we want to use $NVM_DIR)\nENV NODE_PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/lib/node_modules\" \\\n    PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  million12/nginx-php\n#\nFROM million12/nginx:latest\nMAINTAINER Marcin Ryzycki <marcin@m12.io>\nENV NVM_DIR=\"/usr/local/nvm\" \\\n    NODE_VERSION=\"6.3.0\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\"\n#  Add install scripts needed by the next RUN command\nADD container-files/config/install* /config/\nADD container-files/etc/yum.repos.d/* /etc/yum.repos.d/\nRUN yum update -y \\\n && `` yum install -y wget patch tar bzip2 unzip openssh-clients MariaDB-client \\\n && `` rpm -Uvh http://rpms.remirepo.net/enterprise/remi-release-7.rpm \\\n && yum install -y php70-php php70-php-bcmath php70-php-cli php70-php-common php70-php-devel php70-php-fpm php70-php-gd php70-php-gmp php70-php-intl php70-php-json php70-php-mbstring php70-php-mcrypt php70-php-mysqlnd php70-php-opcache php70-php-pdo php70-php-pear php70-php-process php70-php-pspell php70-php-xml `` php70-php-pecl-imagick php70-php-pecl-mysql php70-php-pecl-uploadprogress php70-php-pecl-uuid php70-php-pecl-zip `` || true \\\n && `` ln -sfF /opt/remi/php70/enable /etc/profile.d/php70-paths.sh \\\n && `` `` ln -sfF /opt/remi/php70/root/usr/bin/{pear,pecl,phar,php,php-cgi,php-config,phpize} /usr/local/bin/. \\\n && php --version \\\n && `` mv -f /etc/opt/remi/php70/php.ini /etc/php.ini \\\n && ln -s /etc/php.ini /etc/opt/remi/php70/php.ini \\\n && rm -rf /etc/php.d \\\n && mv /etc/opt/remi/php70/php.d /etc/. \\\n && ln -s /etc/php.d /etc/opt/remi/php70/php.d \\\n && echo 'PHP 7 installed.' \\\n && `` yum install -y ImageMagick GraphicsMagick gcc gcc-c++ libffi-devel libpng-devel zlib-devel \\\n && `` `` yum install -y ruby ruby-devel \\\n && echo 'gem: --no-document' > /etc/gemrc \\\n && gem update --system \\\n && gem install bundler \\\n && `` source /config/install.sh \\\n && `` export PROFILE=/etc/profile.d/nvm.sh \\\n && touch $PROFILE \\\n && curl -sSL https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash \\\n && source $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && `` npm install -g gulp grunt-cli bower browser-sync \\\n && `` echo -e \"StrictHostKeyChecking no\" >> /etc/ssh/ssh_config \\\n && `` `` yum install -y libmemcached-devel \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=memcached.so\" > /etc/php.d/50-memcached.ini \\\n && `` git clone https://github.com/phpredis/phpredis.git \\\n && cd phpredis \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=redis.so\" > /etc/php.d/50-redis.ini \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && chown www /usr/local/bin/composer \\\n && composer --version \\\n && `` yum clean all \\\n && rm -rf /tmp/yum*\nADD container-files /\n#  Add NodeJS/npm to PATH (must be separate ENV instruction as we want to use $NVM_DIR)\nENV NODE_PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/lib/node_modules\" \\\n    PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH\"\n","injectedSmells":[],"originalDockerfileHash":"4ff84470f9e918573fad21ddab869fca","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   million12/nginx-php\n#\nFROM million12/nginx:latest\nMAINTAINER Marcin Ryzycki <marcin@m12.io>\nENV NVM_DIR=\"/usr/local/nvm\" \\\n    NODE_VERSION=\"6.3.0\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\"\n#   Add install scripts needed by the next RUN command\nADD container-files/config/install* /config/\nADD container-files/etc/yum.repos.d/* /etc/yum.repos.d/\nRUN yum update -y \\\n && `` yum install -y wget patch tar bzip2 unzip openssh-clients MariaDB-client \\\n && `` rpm -Uvh http://rpms.remirepo.net/enterprise/remi-release-7.rpm \\\n && yum install -y php70-php php70-php-bcmath php70-php-cli php70-php-common php70-php-devel php70-php-fpm php70-php-gd php70-php-gmp php70-php-intl php70-php-json php70-php-mbstring php70-php-mcrypt php70-php-mysqlnd php70-php-opcache php70-php-pdo php70-php-pear php70-php-process php70-php-pspell php70-php-xml `` php70-php-pecl-imagick php70-php-pecl-mysql php70-php-pecl-uploadprogress php70-php-pecl-uuid php70-php-pecl-zip `` || true \\\n && `` ln -sfF /opt/remi/php70/enable /etc/profile.d/php70-paths.sh \\\n && `` `` ln -sfF /opt/remi/php70/root/usr/bin/{pear,pecl,phar,php,php-cgi,php-config,phpize} /usr/local/bin/. \\\n && php --version \\\n && `` mv -f /etc/opt/remi/php70/php.ini /etc/php.ini \\\n && ln -s /etc/php.ini /etc/opt/remi/php70/php.ini \\\n && rm -rf /etc/php.d \\\n && mv /etc/opt/remi/php70/php.d /etc/. \\\n && ln -s /etc/php.d /etc/opt/remi/php70/php.d \\\n && echo 'PHP 7 installed.' \\\n && `` yum install -y ImageMagick GraphicsMagick gcc gcc-c++ libffi-devel libpng-devel zlib-devel \\\n && `` `` yum install -y ruby ruby-devel \\\n && echo 'gem: --no-document' > /etc/gemrc \\\n && gem update --system \\\n && gem install bundler \\\n && `` source /config/install.sh \\\n && `` export PROFILE=/etc/profile.d/nvm.sh \\\n && touch $PROFILE \\\n && curl -sSL https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash \\\n && source $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && `` npm install -g gulp grunt-cli bower browser-sync \\\n && `` echo -e \"StrictHostKeyChecking no\" >> /etc/ssh/ssh_config \\\n && `` `` yum install -y libmemcached-devel \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=memcached.so\" > /etc/php.d/50-memcached.ini \\\n && `` git clone https://github.com/phpredis/phpredis.git \\\n && cd phpredis \\\n && git checkout php7 \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=redis.so\" > /etc/php.d/50-redis.ini \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && chown www /usr/local/bin/composer \\\n && composer --version \\\n && `` yum clean all \\\n && rm -rf /tmp/yum*\nADD container-files /\n#   Add NodeJS/npm to PATH (must be separate ENV instruction as we want to use $NVM_DIR)\nENV NODE_PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/lib/node_modules\" \\\n    PATH=\"$NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH\"\n","originalDockerfileUglifiedHash":"9eea2c8529b5b901d98c5903bdc5cb3e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ed71571751514d97a371b8b7271817aa10fb566a.dockerfile"}