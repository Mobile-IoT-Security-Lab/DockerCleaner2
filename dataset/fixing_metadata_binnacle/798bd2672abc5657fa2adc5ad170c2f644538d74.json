{"seed":972498979,"processedDockerfileHash":"1bbb0cea98d9bcd2bde06b2f4318792a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM python:2-stretch\nMAINTAINER Jacopo Mauro\n#   Install packages for compiling the feature extractor and minizin suite\nRUN apt-get update \\\n && apt-get install --no-install-recommends flex bison libgl1 openjdk-8-jre-headless -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install psutil==5.9.4 click==8.1.3\n#   minizinc + gecode + chuffed\nCOPY --from=jacopomauro/minizinc:v2.2.1 /tool/MiniZincIDE /tool/MiniZincIDE\nENV PATH=\"\\\"$PATH:/tool/MiniZincIDE/bin\\\"\"\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/MiniZincIDE/lib\\\"\"\n#   Install feature extractor\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/mzn2feat.git \\\n && cd mzn2feat \\\n && bash install --no-xcsp\nENV MZN2FEAT_HOME=\"/tool/mzn2feat\"\nENV PATH=\"/tool/mzn2feat/bin:$PATH\"\n#   install sunny-cp (basic one with only minizinc solvers)\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/sunny-cp.git \\\n && cd sunny-cp \\\n && bash install.sh\nENV PATH=\"/tool/sunny-cp/bin:$PATH\"\n#   or-tools\nCOPY --from=jacopomauro/or-tools:v6.9.1 /tool/or-tools /tool/ortools\nRUN mkdir -p /tool/sunny-cp/solvers/ortools \\\n && ln -s /tool/ortools/ortools/flatzinc/mznlib_sat /tool/sunny-cp/solvers/ortools/mzn-lib \\\n && ln -s /tool/ortools/bin/fzn-or-tools /tool/sunny-cp/solvers/ortools/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/ortools/opts\n#   Install choco\nCOPY --from=jacopomauro/choco:v4.0.4 /tool/choco /tool/choco\nRUN mkdir -p /tool/sunny-cp/solvers/choco \\\n && ln -s /tool/choco/mzn-lib /tool/sunny-cp/solvers/choco/mzn-lib \\\n && ln -s /tool/choco/fzn-choco /tool/sunny-cp/solvers/choco/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/choco/opts\n#   Install picat\nCOPY --from=jacopomauro/picat:v2.5 /tool/picat /tool/picat\nRUN mkdir -p /tool/sunny-cp/solvers/picat \\\n && ln -s /tool/picat/mzn-lib /tool/sunny-cp/solvers/picat/mzn-lib \\\n && ln -s /tool/picat/fzn-picat /tool/sunny-cp/solvers/picat/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/picat/opts\n#   Install jacop\nCOPY --from=jacopomauro/jacop:v4.4.0 /tool/jacop /tool/jacop\nRUN mkdir -p /tool/sunny-cp/solvers/jacop \\\n && ln -s /tool/jacop/mzn-lib /tool/sunny-cp/solvers/jacop/mzn-lib \\\n && ln -s /tool/jacop/fzn-jacop /tool/sunny-cp/solvers/jacop/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/jacop/opts\n#   Install minisatid\nCOPY --from=jacopomauro/minisatid:v3.11.0 /tool/minisatid /tool/minisatid\nRUN mkdir -p /tool/sunny-cp/solvers/minisatid \\\n && mkdir -p /tool/sunny-cp/solvers/minisatid/mzn-lib \\\n && ln -s /tool/minisatid/fzn-minisatid /tool/sunny-cp/solvers/minisatid/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = ''\" > /tool/sunny-cp/solvers/minisatid/opts\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/minisatid/lib\\\"\"\n#   Install haifacsp\nCOPY --from=jacopomauro/haifacsp:v1.3.0 /tool/haifacsp /tool/haifacsp\nRUN mkdir -p /tool/sunny-cp/solvers/haifacsp \\\n && ln -s /tool/haifacsp/mzn-lib /tool/sunny-cp/solvers/haifacsp/mzn-lib \\\n && ln -s /tool/haifacsp/fzn-haifacsp /tool/sunny-cp/solvers/haifacsp/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/haifacsp/opts\n#   Install yuck\nCOPY --from=jacopomauro/yuck:v20180303 /tool/yuck /tool/yuck\nRUN mkdir -p /tool/sunny-cp/solvers/yuck \\\n && ln -s /tool/yuck/mzn-lib /tool/sunny-cp/solvers/yuck/mzn-lib \\\n && ln -s /tool/yuck/fzn-yuck /tool/sunny-cp/solvers/yuck/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/yuck/opts\n#   Install mistral\n#   Compiles but does not print output on zebra instance and other instances\n#  COPY --from=jacopomauro/mistral /tool/mistral /tool/mistral\n#  RUN mkdir -p /tool/sunny-cp/solvers/mistral && \\\n#      ln -s /tool/mistral/mzn-lib /tool/sunny-cp/solvers/mistral/mzn-lib && \\\n#      ln -s /tool/mistral/fzn-mistral /tool/sunny-cp/solvers/mistral/fzn-exec && \\\n#      echo \"all_opt = '-a'\\n\\\n#  free_opt  = '-f'\" > /tool/sunny-cp/solvers/mistral/opts\n#   expose port 9001 for the sunny-cp server\nEXPOSE 9001/tcp\nRUN cd /tool/sunny-cp \\\n && bash install.sh\nWORKDIR /tool/sunny-cp\nCMD [\"python\", \"/tool/sunny-cp/src/sunny_server.py\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM python:2-stretch\nMAINTAINER Jacopo Mauro\n#  Install packages for compiling the feature extractor and minizin suite\nRUN apt-get update \\\n && apt-get install flex bison libgl1 openjdk-8-jre-headless -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install psutil click\n#  minizinc + gecode + chuffed\nCOPY --from=jacopomauro/minizinc:v2.2.1 /tool/MiniZincIDE /tool/MiniZincIDE\nENV PATH=\"\\\"$PATH:/tool/MiniZincIDE/bin\\\"\"\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/MiniZincIDE/lib\\\"\"\n#  Install feature extractor\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/mzn2feat.git \\\n && cd mzn2feat \\\n && bash install --no-xcsp\nENV MZN2FEAT_HOME=\"/tool/mzn2feat\"\nENV PATH=\"/tool/mzn2feat/bin:$PATH\"\n#  install sunny-cp (basic one with only minizinc solvers)\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/sunny-cp.git \\\n && cd sunny-cp \\\n && bash install.sh\nENV PATH=\"/tool/sunny-cp/bin:$PATH\"\n#  or-tools\nCOPY --from=jacopomauro/or-tools:v6.9.1 /tool/or-tools /tool/ortools\nRUN mkdir -p /tool/sunny-cp/solvers/ortools \\\n && ln -s /tool/ortools/ortools/flatzinc/mznlib_sat /tool/sunny-cp/solvers/ortools/mzn-lib \\\n && ln -s /tool/ortools/bin/fzn-or-tools /tool/sunny-cp/solvers/ortools/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/ortools/opts\n#  Install choco\nCOPY --from=jacopomauro/choco:v4.0.4 /tool/choco /tool/choco\nRUN mkdir -p /tool/sunny-cp/solvers/choco \\\n && ln -s /tool/choco/mzn-lib /tool/sunny-cp/solvers/choco/mzn-lib \\\n && ln -s /tool/choco/fzn-choco /tool/sunny-cp/solvers/choco/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/choco/opts\n#  Install picat\nCOPY --from=jacopomauro/picat:v2.5 /tool/picat /tool/picat\nRUN mkdir -p /tool/sunny-cp/solvers/picat \\\n && ln -s /tool/picat/mzn-lib /tool/sunny-cp/solvers/picat/mzn-lib \\\n && ln -s /tool/picat/fzn-picat /tool/sunny-cp/solvers/picat/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/picat/opts\n#  Install jacop\nCOPY --from=jacopomauro/jacop:v4.4.0 /tool/jacop /tool/jacop\nRUN mkdir -p /tool/sunny-cp/solvers/jacop \\\n && ln -s /tool/jacop/mzn-lib /tool/sunny-cp/solvers/jacop/mzn-lib \\\n && ln -s /tool/jacop/fzn-jacop /tool/sunny-cp/solvers/jacop/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/jacop/opts\n#  Install minisatid\nCOPY --from=jacopomauro/minisatid:v3.11.0 /tool/minisatid /tool/minisatid\nRUN mkdir -p /tool/sunny-cp/solvers/minisatid \\\n && mkdir -p /tool/sunny-cp/solvers/minisatid/mzn-lib \\\n && ln -s /tool/minisatid/fzn-minisatid /tool/sunny-cp/solvers/minisatid/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = ''\" > /tool/sunny-cp/solvers/minisatid/opts\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/minisatid/lib\\\"\"\n#  Install haifacsp\nCOPY --from=jacopomauro/haifacsp:v1.3.0 /tool/haifacsp /tool/haifacsp\nRUN mkdir -p /tool/sunny-cp/solvers/haifacsp \\\n && ln -s /tool/haifacsp/mzn-lib /tool/sunny-cp/solvers/haifacsp/mzn-lib \\\n && ln -s /tool/haifacsp/fzn-haifacsp /tool/sunny-cp/solvers/haifacsp/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/haifacsp/opts\n#  Install yuck\nCOPY --from=jacopomauro/yuck:v20180303 /tool/yuck /tool/yuck\nRUN mkdir -p /tool/sunny-cp/solvers/yuck \\\n && ln -s /tool/yuck/mzn-lib /tool/sunny-cp/solvers/yuck/mzn-lib \\\n && ln -s /tool/yuck/fzn-yuck /tool/sunny-cp/solvers/yuck/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/yuck/opts\n#  Install mistral\n#  Compiles but does not print output on zebra instance and other instances\n# COPY --from=jacopomauro/mistral /tool/mistral /tool/mistral\n# RUN mkdir -p /tool/sunny-cp/solvers/mistral && \\\n#     ln -s /tool/mistral/mzn-lib /tool/sunny-cp/solvers/mistral/mzn-lib && \\\n#     ln -s /tool/mistral/fzn-mistral /tool/sunny-cp/solvers/mistral/fzn-exec && \\\n#     echo \"all_opt = '-a'\\n\\\n# free_opt  = '-f'\" > /tool/sunny-cp/solvers/mistral/opts\n#  expose port 9001 for the sunny-cp server\nEXPOSE 9001/tcp\nRUN cd /tool/sunny-cp \\\n && bash install.sh\nWORKDIR /tool/sunny-cp\nCMD [\"python\", \"/tool/sunny-cp/src/sunny_server.py\"]\n","injectedSmells":[],"originalDockerfileHash":"8de5225c1d7e8d8c7d84384639f72823","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM python:2-stretch\nMAINTAINER Jacopo Mauro\n#   Install packages for compiling the feature extractor and minizin suite\nRUN apt-get update \\\n && apt-get install flex bison libgl1 openjdk-8-jre-headless -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install psutil click\n#   minizinc + gecode + chuffed\nCOPY --from=jacopomauro/minizinc:v2.2.1 /tool/MiniZincIDE /tool/MiniZincIDE\nENV PATH=\"\\\"$PATH:/tool/MiniZincIDE/bin\\\"\"\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/MiniZincIDE/lib\\\"\"\n#   Install feature extractor\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/mzn2feat.git \\\n && cd mzn2feat \\\n && bash install --no-xcsp\nENV MZN2FEAT_HOME=\"/tool/mzn2feat\"\nENV PATH=\"/tool/mzn2feat/bin:$PATH\"\n#   install sunny-cp (basic one with only minizinc solvers)\nRUN cd /tool \\\n && git clone --depth=1 https://github.com/CP-Unibo/sunny-cp.git \\\n && cd sunny-cp \\\n && bash install.sh\nENV PATH=\"/tool/sunny-cp/bin:$PATH\"\n#   or-tools\nCOPY --from=jacopomauro/or-tools:v6.9.1 /tool/or-tools /tool/ortools\nRUN mkdir -p /tool/sunny-cp/solvers/ortools \\\n && ln -s /tool/ortools/ortools/flatzinc/mznlib_sat /tool/sunny-cp/solvers/ortools/mzn-lib \\\n && ln -s /tool/ortools/bin/fzn-or-tools /tool/sunny-cp/solvers/ortools/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/ortools/opts\n#   Install choco\nCOPY --from=jacopomauro/choco:v4.0.4 /tool/choco /tool/choco\nRUN mkdir -p /tool/sunny-cp/solvers/choco \\\n && ln -s /tool/choco/mzn-lib /tool/sunny-cp/solvers/choco/mzn-lib \\\n && ln -s /tool/choco/fzn-choco /tool/sunny-cp/solvers/choco/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/choco/opts\n#   Install picat\nCOPY --from=jacopomauro/picat:v2.5 /tool/picat /tool/picat\nRUN mkdir -p /tool/sunny-cp/solvers/picat \\\n && ln -s /tool/picat/mzn-lib /tool/sunny-cp/solvers/picat/mzn-lib \\\n && ln -s /tool/picat/fzn-picat /tool/sunny-cp/solvers/picat/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/picat/opts\n#   Install jacop\nCOPY --from=jacopomauro/jacop:v4.4.0 /tool/jacop /tool/jacop\nRUN mkdir -p /tool/sunny-cp/solvers/jacop \\\n && ln -s /tool/jacop/mzn-lib /tool/sunny-cp/solvers/jacop/mzn-lib \\\n && ln -s /tool/jacop/fzn-jacop /tool/sunny-cp/solvers/jacop/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/jacop/opts\n#   Install minisatid\nCOPY --from=jacopomauro/minisatid:v3.11.0 /tool/minisatid /tool/minisatid\nRUN mkdir -p /tool/sunny-cp/solvers/minisatid \\\n && mkdir -p /tool/sunny-cp/solvers/minisatid/mzn-lib \\\n && ln -s /tool/minisatid/fzn-minisatid /tool/sunny-cp/solvers/minisatid/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = ''\" > /tool/sunny-cp/solvers/minisatid/opts\nENV LD_LIBRARY_PATH=\"\\\"$LD_LIBRARY_PATH:/tool/minisatid/lib\\\"\"\n#   Install haifacsp\nCOPY --from=jacopomauro/haifacsp:v1.3.0 /tool/haifacsp /tool/haifacsp\nRUN mkdir -p /tool/sunny-cp/solvers/haifacsp \\\n && ln -s /tool/haifacsp/mzn-lib /tool/sunny-cp/solvers/haifacsp/mzn-lib \\\n && ln -s /tool/haifacsp/fzn-haifacsp /tool/sunny-cp/solvers/haifacsp/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/haifacsp/opts\n#   Install yuck\nCOPY --from=jacopomauro/yuck:v20180303 /tool/yuck /tool/yuck\nRUN mkdir -p /tool/sunny-cp/solvers/yuck \\\n && ln -s /tool/yuck/mzn-lib /tool/sunny-cp/solvers/yuck/mzn-lib \\\n && ln -s /tool/yuck/fzn-yuck /tool/sunny-cp/solvers/yuck/fzn-exec \\\n && echo \"all_opt = '-a'\\nfree_opt = '-f'\" > /tool/sunny-cp/solvers/yuck/opts\n#   Install mistral\n#   Compiles but does not print output on zebra instance and other instances\n#  COPY --from=jacopomauro/mistral /tool/mistral /tool/mistral\n#  RUN mkdir -p /tool/sunny-cp/solvers/mistral && \\\n#      ln -s /tool/mistral/mzn-lib /tool/sunny-cp/solvers/mistral/mzn-lib && \\\n#      ln -s /tool/mistral/fzn-mistral /tool/sunny-cp/solvers/mistral/fzn-exec && \\\n#      echo \"all_opt = '-a'\\n\\\n#  free_opt  = '-f'\" > /tool/sunny-cp/solvers/mistral/opts\n#   expose port 9001 for the sunny-cp server\nEXPOSE 9001/tcp\nRUN cd /tool/sunny-cp \\\n && bash install.sh\nWORKDIR /tool/sunny-cp\nCMD [\"python\", \"/tool/sunny-cp/src/sunny_server.py\"]\n","originalDockerfileUglifiedHash":"dc1d2007a1397ba1e13c539e3056dbe9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/798bd2672abc5657fa2adc5ad170c2f644538d74.dockerfile"}