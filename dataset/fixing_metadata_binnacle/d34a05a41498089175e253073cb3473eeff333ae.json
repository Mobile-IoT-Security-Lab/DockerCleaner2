{"seed":983136676,"processedDockerfileHash":"9d470a34f29b9fae4356290d02a7e483","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   OData producer on top of MySQL and Apache\n#\n#   VERSION               0.0.1\nFROM ubuntu:14.10\n#   Format: MAINTAINER Name <email@addr.ess>\nMAINTAINER Jonas Colmsjö <jonas@gizur.com>\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends wget nano curl git -y )\n#\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN (apt-get update ;apt-get install --no-install-recommends python python-setuptools -y )\nRUN easy_install supervisor\nCOPY ./etc-supervisord.conf /etc/supervisord.conf\nCOPY ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#   Install Apache\n#   ---------------\nRUN (apt-get update ;apt-get install --no-install-recommends apache2 php5 php5-curl php5-mysql php5-mcrypt -y )\nRUN a2enmod rewrite status\nCOPY ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nCOPY ./etc-apache2-ports.conf /etc/apache2/ports.conf\nCOPY ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#   Install phpMyAdmin\nCOPY ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nCOPY ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#\n#   Install NodeJS\n#   --------------\nRUN curl https://raw.githubusercontent.com/creationix/nvm/v0.13.1/install.sh | bash\n#   RUN echo \"[ -s $HOME/.nvm/nvm.sh ] && . $HOME/.nvm/nvm.sh\" >> $HOME/.profile\nRUN /bin/bash -c \"source $HOME/.profile \\\n && nvm install v0.11.9\"\nCOPY ./init-node.sh /src/\nRUN /src/init-node.sh\n#\n#   Install MySQL\n#   -------------\n#   init script and test db\nCOPY ./init-mysql.sh /src/\nCOPY ./test-wp.sql /src/\nCOPY ./test-vtiger.sql /src/\n#   Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server\n#   Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#   Setup admin user\nRUN /src/init-mysql.sh\n#\n#   Add jsbin\n#   ----------\nCOPY ./init-jsbin.sh /src\nRUN /src/init-jsbin.sh\n#\n#   Start things\n#   -----------\n#   Add batches here since it changes often (use cache when building)\nCOPY ./batches.py /\nCOPY ./batches.sh /\n#   RUN apt-get clean && rm -rf /var/lib/apt/lists/*\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\nRUN mkdir /volume\nVOLUME /volume\nEXPOSE 80/tcp 81/tcp 443/tcp 3306/tcp\nCOPY ./start.sh /\nCMD [\"/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  OData producer on top of MySQL and Apache\n#\n#  VERSION               0.0.1\nFROM ubuntu:14.10\n#  Format: MAINTAINER Name <email@addr.ess>\nMAINTAINER Jonas Colmsjö <jonas@gizur.com>\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#  Install supervisord (used to handle processes)\n#  ----------------------------------------------\n#\n#  Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#  Install Apache\n#  ---------------\nRUN apt-get install apache2 php5 php5-curl php5-mysql php5-mcrypt -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-ports.conf /etc/apache2/ports.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#  Install phpMyAdmin\nADD ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nADD ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#\n#  Install NodeJS\n#  --------------\nRUN curl https://raw.githubusercontent.com/creationix/nvm/v0.13.1/install.sh | bash\n#  RUN echo \"[ -s $HOME/.nvm/nvm.sh ] && . $HOME/.nvm/nvm.sh\" >> $HOME/.profile\nRUN /bin/bash -c \"source $HOME/.profile \\\n && nvm install v0.11.9\"\nADD ./init-node.sh /src/\nRUN /src/init-node.sh\n#\n#  Install MySQL\n#  -------------\n#  init script and test db\nADD ./init-mysql.sh /src/\nADD ./test-wp.sql /src/\nADD ./test-vtiger.sql /src/\n#  Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server\n#  Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#  Setup admin user\nRUN /src/init-mysql.sh\n#\n#  Add jsbin\n#  ----------\nADD ./init-jsbin.sh /src\nRUN /src/init-jsbin.sh\n#\n#  Start things\n#  -----------\n#  Add batches here since it changes often (use cache when building)\nADD ./batches.py /\nADD ./batches.sh /\n#  RUN apt-get clean && rm -rf /var/lib/apt/lists/*\n#  Fix permissions\nRUN chown -R www-data:www-data /var/www/html\nRUN mkdir /volume\nVOLUME /volume\nEXPOSE 80/tcp 81/tcp 443/tcp 3306/tcp\nADD ./start.sh /\nCMD [\"/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"9765557817e2c991375cf41b3a9979a4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   OData producer on top of MySQL and Apache\n#\n#   VERSION               0.0.1\nFROM ubuntu:14.10\n#   Format: MAINTAINER Name <email@addr.ess>\nMAINTAINER Jonas Colmsjö <jonas@gizur.com>\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#   Install Apache\n#   ---------------\nRUN apt-get install apache2 php5 php5-curl php5-mysql php5-mcrypt -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-ports.conf /etc/apache2/ports.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#   Install phpMyAdmin\nADD ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nADD ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#\n#   Install NodeJS\n#   --------------\nRUN curl https://raw.githubusercontent.com/creationix/nvm/v0.13.1/install.sh | bash\n#   RUN echo \"[ -s $HOME/.nvm/nvm.sh ] && . $HOME/.nvm/nvm.sh\" >> $HOME/.profile\nRUN /bin/bash -c \"source $HOME/.profile \\\n && nvm install v0.11.9\"\nADD ./init-node.sh /src/\nRUN /src/init-node.sh\n#\n#   Install MySQL\n#   -------------\n#   init script and test db\nADD ./init-mysql.sh /src/\nADD ./test-wp.sql /src/\nADD ./test-vtiger.sql /src/\n#   Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server\n#   Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#   Setup admin user\nRUN /src/init-mysql.sh\n#\n#   Add jsbin\n#   ----------\nADD ./init-jsbin.sh /src\nRUN /src/init-jsbin.sh\n#\n#   Start things\n#   -----------\n#   Add batches here since it changes often (use cache when building)\nADD ./batches.py /\nADD ./batches.sh /\n#   RUN apt-get clean && rm -rf /var/lib/apt/lists/*\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\nRUN mkdir /volume\nVOLUME /volume\nEXPOSE 80/tcp 81/tcp 443/tcp 3306/tcp\nADD ./start.sh /\nCMD [\"/start.sh\"]\n","originalDockerfileUglifiedHash":"13a4b36748d6b46cfb8523e5c17ffafc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d34a05a41498089175e253073cb3473eeff333ae.dockerfile"}