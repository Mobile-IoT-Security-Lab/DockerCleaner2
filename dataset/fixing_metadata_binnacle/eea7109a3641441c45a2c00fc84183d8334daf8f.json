{"seed":3056007893,"processedDockerfileHash":"1183d098e62929545a34647dad319189","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM circleci/ubuntu-server:trusty-latest\nENV VERBOSE=\"true\"\nCOPY circleci-install /usr/local/bin/circleci-install\nCOPY circleci-provision-scripts/base.sh circleci-provision-scripts/circleci-specific.sh /opt/circleci-provision-scripts/\nRUN circleci-install base_requirements \\\n && circleci-install circleci_specific\n#   Installing java early beacuse a few things have the dependency to java (i.g. cassandra)\nCOPY circleci-provision-scripts/java.sh /opt/circleci-provision-scripts/java.sh\nRUN circleci-install java oraclejdk8 \\\n && circleci-install java openjdk8\n#   Browsers\nCOPY circleci-provision-scripts/firefox.sh circleci-provision-scripts/chrome.sh circleci-provision-scripts/phantomjs.sh /opt/circleci-provision-scripts/\nRUN circleci-install firefox \\\n && circleci-install chrome \\\n && circleci-install phantomjs\n#   Android\n#   Android\nCOPY circleci-provision-scripts/android-sdk.sh /opt/circleci-provision-scripts/android-sdk.sh\nRUN circleci-install android_sdk platform-tools\nRUN circleci-install android_sdk extra-android-support\nRUN for package in android-25 android-24 android-23 android-22; do circleci-install android_sdk $package ; done\nRUN for package in sys-img-armeabi-v7a-android-24 sys-img-armeabi-v7a-android-22; do circleci-install android_sdk $package ; done\nRUN for package in build-tools-25.0.1 build-tools-25.0.0 build-tools-24.0.3 build-tools-24.0.2 build-tools-24.0.1 build-tools-24.0.0 build-tools-23.0.3 build-tools-23.0.2 build-tools-22.0.1; do circleci-install android_sdk $package ; done\nRUN for package in android_sdk extra-android-m2repository android_sdk extra-google-m2repository android_sdk extra-google-google_play_services android_sdk addon-google_apis-google-23 android_sdk addon-google_apis-google-22; do circleci-install android_sdk $package ; done\n#   Qt\nCOPY circleci-provision-scripts/qt.sh /opt/circleci-provision-scripts/qt.sh\nRUN circleci-install qt\n#   Install deployment tools\nCOPY circleci-provision-scripts/awscli.sh circleci-provision-scripts/gcloud.sh circleci-provision-scripts/heroku.sh /opt/circleci-provision-scripts/\nRUN for package in awscli gcloud heroku; do circleci-install $package ; done\n#   Languages\nARG use_precompile=true\nENV USE_PRECOMPILE=\"$use_precompile\" \\\n    RUN_APT_UPDATE=\"true\"\nRUN curl -s https://packagecloud.io/install/repositories/circleci/trusty/script.deb.sh | sudo bash\nCOPY circleci-provision-scripts/python.sh /opt/circleci-provision-scripts/python.sh\nRUN circleci-install python 2.7.10\nRUN circleci-install python 2.7.11\nRUN circleci-install python 2.7.12\nRUN circleci-install python 3.1.4\nRUN circleci-install python 3.1.5\nRUN circleci-install python 3.2.5\nRUN circleci-install python 3.2.6\nRUN circleci-install python 3.3.5\nRUN circleci-install python 3.3.6\nRUN circleci-install python 3.4.3\nRUN circleci-install python 3.4.4\nRUN circleci-install python 3.5.1\nRUN circleci-install python 3.5.2\nRUN circleci-install python pypy-1.9\nRUN circleci-install python pypy-2.6.1\nRUN circleci-install python pypy-4.0.1\nRUN sudo -H -i -u ubuntu pyenv global 2.7.11\nCOPY circleci-provision-scripts/nodejs.sh /opt/circleci-provision-scripts/nodejs.sh\nRUN circleci-install nodejs 0.12.9\nRUN circleci-install nodejs 4.0.0\nRUN circleci-install nodejs 4.1.2\nRUN circleci-install nodejs 4.2.6\nRUN circleci-install nodejs 4.3.0\nRUN circleci-install nodejs 4.5.0\nRUN circleci-install nodejs 5.0.0\nRUN circleci-install nodejs 5.1.1\nRUN circleci-install nodejs 5.2.0\nRUN circleci-install nodejs 5.3.0\nRUN circleci-install nodejs 5.4.1\nRUN circleci-install nodejs 5.5.0\nRUN circleci-install nodejs 5.6.0\nRUN circleci-install nodejs 5.7.0\nRUN circleci-install nodejs 6.1.0\nRUN sudo -H -i -u ubuntu nvm alias default 4.2.6\nCOPY circleci-provision-scripts/go.sh /opt/circleci-provision-scripts/go.sh\nRUN circleci-install golang 1.6.2\nCOPY circleci-provision-scripts/ruby.sh /opt/circleci-provision-scripts/ruby.sh\nRUN circleci-install ruby 2.1.8\nRUN circleci-install ruby 2.1.9\nRUN circleci-install ruby 2.2.4\nRUN circleci-install ruby 2.2.5\nRUN circleci-install ruby 2.3.0\nRUN circleci-install ruby 2.3.1\nRUN sudo -H -i -u ubuntu rvm use 2.2.4 --default\nCOPY circleci-provision-scripts/php.sh /opt/circleci-provision-scripts/php.sh\nRUN circleci-install php 5.5.31\nRUN circleci-install php 5.5.32\nRUN circleci-install php 5.5.36\nRUN circleci-install php 5.6.17\nRUN circleci-install php 5.6.18\nRUN circleci-install php 5.6.22\nRUN circleci-install php 7.0.4\nRUN circleci-install php 7.0.7\nRUN circleci-install php 7.0.11\nRUN circleci-install php 7.1.0\nRUN sudo -H -i -u ubuntu phpenv global 5.6.17\nCOPY circleci-provision-scripts/clojure.sh /opt/circleci-provision-scripts/clojure.sh\nRUN circleci-install clojure\nCOPY circleci-provision-scripts/scala.sh /opt/circleci-provision-scripts/scala.sh\nRUN circleci-install scala\nCOPY circleci-provision-scripts/haskell.sh /opt/circleci-provision-scripts/haskell.sh\nRUN circleci-install ghc 8.0.1\n#   Add rest of provisioning files -- add at end to avoid cache invalidation\nCOPY circleci-provision-scripts /opt/circleci-provision-scripts\n#   We need Dockerfile because unit test parses Dockerfile to make sure all versions are installed\nCOPY targets/ubuntu-14.04-XL/Dockerfile /opt/circleci/Dockerfile\nARG IMAGE_TAG\nRUN echo $IMAGE_TAG > /opt/circleci/image_version\nCOPY targets/ubuntu-14.04-XL/pkg-versions.sh /opt/circleci/bin/pkg-versions.sh\nUSER ubuntu\nCMD [\"/bin/bash\"]\nLABEL circleci.user=\"ubuntu\"\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM circleci/ubuntu-server:trusty-latest\nENV VERBOSE=\"true\"\nADD circleci-install /usr/local/bin/circleci-install\nADD circleci-provision-scripts/base.sh circleci-provision-scripts/circleci-specific.sh /opt/circleci-provision-scripts/\nRUN circleci-install base_requirements \\\n && circleci-install circleci_specific\n#  Installing java early beacuse a few things have the dependency to java (i.g. cassandra)\nADD circleci-provision-scripts/java.sh /opt/circleci-provision-scripts/java.sh\nRUN circleci-install java oraclejdk8 \\\n && circleci-install java openjdk8\n#  Browsers\nADD circleci-provision-scripts/firefox.sh circleci-provision-scripts/chrome.sh circleci-provision-scripts/phantomjs.sh /opt/circleci-provision-scripts/\nRUN circleci-install firefox \\\n && circleci-install chrome \\\n && circleci-install phantomjs\n#  Android\n#  Android\nADD circleci-provision-scripts/android-sdk.sh /opt/circleci-provision-scripts/android-sdk.sh\nRUN circleci-install android_sdk platform-tools\nRUN circleci-install android_sdk extra-android-support\nRUN for package in android-25 android-24 android-23 android-22; do circleci-install android_sdk $package ; done\nRUN for package in sys-img-armeabi-v7a-android-24 sys-img-armeabi-v7a-android-22; do circleci-install android_sdk $package ; done\nRUN for package in build-tools-25.0.1 build-tools-25.0.0 build-tools-24.0.3 build-tools-24.0.2 build-tools-24.0.1 build-tools-24.0.0 build-tools-23.0.3 build-tools-23.0.2 build-tools-22.0.1; do circleci-install android_sdk $package ; done\nRUN for package in android_sdk extra-android-m2repository android_sdk extra-google-m2repository android_sdk extra-google-google_play_services android_sdk addon-google_apis-google-23 android_sdk addon-google_apis-google-22; do circleci-install android_sdk $package ; done\n#  Qt\nADD circleci-provision-scripts/qt.sh /opt/circleci-provision-scripts/qt.sh\nRUN circleci-install qt\n#  Install deployment tools\nADD circleci-provision-scripts/awscli.sh circleci-provision-scripts/gcloud.sh circleci-provision-scripts/heroku.sh /opt/circleci-provision-scripts/\nRUN for package in awscli gcloud heroku; do circleci-install $package ; done\n#  Languages\nARG use_precompile=true\nENV USE_PRECOMPILE=\"$use_precompile\" \\\n    RUN_APT_UPDATE=\"true\"\nRUN curl -s https://packagecloud.io/install/repositories/circleci/trusty/script.deb.sh | sudo bash\nADD circleci-provision-scripts/python.sh /opt/circleci-provision-scripts/python.sh\nRUN circleci-install python 2.7.10\nRUN circleci-install python 2.7.11\nRUN circleci-install python 2.7.12\nRUN circleci-install python 3.1.4\nRUN circleci-install python 3.1.5\nRUN circleci-install python 3.2.5\nRUN circleci-install python 3.2.6\nRUN circleci-install python 3.3.5\nRUN circleci-install python 3.3.6\nRUN circleci-install python 3.4.3\nRUN circleci-install python 3.4.4\nRUN circleci-install python 3.5.1\nRUN circleci-install python 3.5.2\nRUN circleci-install python pypy-1.9\nRUN circleci-install python pypy-2.6.1\nRUN circleci-install python pypy-4.0.1\nRUN sudo -H -i -u ubuntu pyenv global 2.7.11\nADD circleci-provision-scripts/nodejs.sh /opt/circleci-provision-scripts/nodejs.sh\nRUN circleci-install nodejs 0.12.9\nRUN circleci-install nodejs 4.0.0\nRUN circleci-install nodejs 4.1.2\nRUN circleci-install nodejs 4.2.6\nRUN circleci-install nodejs 4.3.0\nRUN circleci-install nodejs 4.5.0\nRUN circleci-install nodejs 5.0.0\nRUN circleci-install nodejs 5.1.1\nRUN circleci-install nodejs 5.2.0\nRUN circleci-install nodejs 5.3.0\nRUN circleci-install nodejs 5.4.1\nRUN circleci-install nodejs 5.5.0\nRUN circleci-install nodejs 5.6.0\nRUN circleci-install nodejs 5.7.0\nRUN circleci-install nodejs 6.1.0\nRUN sudo -H -i -u ubuntu nvm alias default 4.2.6\nADD circleci-provision-scripts/go.sh /opt/circleci-provision-scripts/go.sh\nRUN circleci-install golang 1.6.2\nADD circleci-provision-scripts/ruby.sh /opt/circleci-provision-scripts/ruby.sh\nRUN circleci-install ruby 2.1.8\nRUN circleci-install ruby 2.1.9\nRUN circleci-install ruby 2.2.4\nRUN circleci-install ruby 2.2.5\nRUN circleci-install ruby 2.3.0\nRUN circleci-install ruby 2.3.1\nRUN sudo -H -i -u ubuntu rvm use 2.2.4 --default\nADD circleci-provision-scripts/php.sh /opt/circleci-provision-scripts/php.sh\nRUN circleci-install php 5.5.31\nRUN circleci-install php 5.5.32\nRUN circleci-install php 5.5.36\nRUN circleci-install php 5.6.17\nRUN circleci-install php 5.6.18\nRUN circleci-install php 5.6.22\nRUN circleci-install php 7.0.4\nRUN circleci-install php 7.0.7\nRUN circleci-install php 7.0.11\nRUN circleci-install php 7.1.0\nRUN sudo -H -i -u ubuntu phpenv global 5.6.17\nADD circleci-provision-scripts/clojure.sh /opt/circleci-provision-scripts/clojure.sh\nRUN circleci-install clojure\nADD circleci-provision-scripts/scala.sh /opt/circleci-provision-scripts/scala.sh\nRUN circleci-install scala\nADD circleci-provision-scripts/haskell.sh /opt/circleci-provision-scripts/haskell.sh\nRUN circleci-install ghc 8.0.1\n#  Add rest of provisioning files -- add at end to avoid cache invalidation\nADD circleci-provision-scripts /opt/circleci-provision-scripts\n#  We need Dockerfile because unit test parses Dockerfile to make sure all versions are installed\nADD targets/ubuntu-14.04-XL/Dockerfile /opt/circleci/Dockerfile\nARG IMAGE_TAG\nRUN echo $IMAGE_TAG > /opt/circleci/image_version\nADD targets/ubuntu-14.04-XL/pkg-versions.sh /opt/circleci/bin/pkg-versions.sh\nUSER ubuntu\nCMD [\"/bin/bash\"]\nLABEL circleci.user=\"ubuntu\"\n","injectedSmells":[],"originalDockerfileHash":"1e7b86a317b4e378c55b1f54b626fad5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM circleci/ubuntu-server:trusty-latest\nENV VERBOSE=\"true\"\nADD circleci-install /usr/local/bin/circleci-install\nADD circleci-provision-scripts/base.sh circleci-provision-scripts/circleci-specific.sh /opt/circleci-provision-scripts/\nRUN circleci-install base_requirements \\\n && circleci-install circleci_specific\n#   Installing java early beacuse a few things have the dependency to java (i.g. cassandra)\nADD circleci-provision-scripts/java.sh /opt/circleci-provision-scripts/java.sh\nRUN circleci-install java oraclejdk8 \\\n && circleci-install java openjdk8\n#   Browsers\nADD circleci-provision-scripts/firefox.sh circleci-provision-scripts/chrome.sh circleci-provision-scripts/phantomjs.sh /opt/circleci-provision-scripts/\nRUN circleci-install firefox \\\n && circleci-install chrome \\\n && circleci-install phantomjs\n#   Android\n#   Android\nADD circleci-provision-scripts/android-sdk.sh /opt/circleci-provision-scripts/android-sdk.sh\nRUN circleci-install android_sdk platform-tools\nRUN circleci-install android_sdk extra-android-support\nRUN for package in android-25 android-24 android-23 android-22; do circleci-install android_sdk $package ; done\nRUN for package in sys-img-armeabi-v7a-android-24 sys-img-armeabi-v7a-android-22; do circleci-install android_sdk $package ; done\nRUN for package in build-tools-25.0.1 build-tools-25.0.0 build-tools-24.0.3 build-tools-24.0.2 build-tools-24.0.1 build-tools-24.0.0 build-tools-23.0.3 build-tools-23.0.2 build-tools-22.0.1; do circleci-install android_sdk $package ; done\nRUN for package in android_sdk extra-android-m2repository android_sdk extra-google-m2repository android_sdk extra-google-google_play_services android_sdk addon-google_apis-google-23 android_sdk addon-google_apis-google-22; do circleci-install android_sdk $package ; done\n#   Qt\nADD circleci-provision-scripts/qt.sh /opt/circleci-provision-scripts/qt.sh\nRUN circleci-install qt\n#   Install deployment tools\nADD circleci-provision-scripts/awscli.sh circleci-provision-scripts/gcloud.sh circleci-provision-scripts/heroku.sh /opt/circleci-provision-scripts/\nRUN for package in awscli gcloud heroku; do circleci-install $package ; done\n#   Languages\nARG use_precompile=true\nENV USE_PRECOMPILE=\"$use_precompile\" \\\n    RUN_APT_UPDATE=\"true\"\nRUN curl -s https://packagecloud.io/install/repositories/circleci/trusty/script.deb.sh | sudo bash\nADD circleci-provision-scripts/python.sh /opt/circleci-provision-scripts/python.sh\nRUN circleci-install python 2.7.10\nRUN circleci-install python 2.7.11\nRUN circleci-install python 2.7.12\nRUN circleci-install python 3.1.4\nRUN circleci-install python 3.1.5\nRUN circleci-install python 3.2.5\nRUN circleci-install python 3.2.6\nRUN circleci-install python 3.3.5\nRUN circleci-install python 3.3.6\nRUN circleci-install python 3.4.3\nRUN circleci-install python 3.4.4\nRUN circleci-install python 3.5.1\nRUN circleci-install python 3.5.2\nRUN circleci-install python pypy-1.9\nRUN circleci-install python pypy-2.6.1\nRUN circleci-install python pypy-4.0.1\nRUN sudo -H -i -u ubuntu pyenv global 2.7.11\nADD circleci-provision-scripts/nodejs.sh /opt/circleci-provision-scripts/nodejs.sh\nRUN circleci-install nodejs 0.12.9\nRUN circleci-install nodejs 4.0.0\nRUN circleci-install nodejs 4.1.2\nRUN circleci-install nodejs 4.2.6\nRUN circleci-install nodejs 4.3.0\nRUN circleci-install nodejs 4.5.0\nRUN circleci-install nodejs 5.0.0\nRUN circleci-install nodejs 5.1.1\nRUN circleci-install nodejs 5.2.0\nRUN circleci-install nodejs 5.3.0\nRUN circleci-install nodejs 5.4.1\nRUN circleci-install nodejs 5.5.0\nRUN circleci-install nodejs 5.6.0\nRUN circleci-install nodejs 5.7.0\nRUN circleci-install nodejs 6.1.0\nRUN sudo -H -i -u ubuntu nvm alias default 4.2.6\nADD circleci-provision-scripts/go.sh /opt/circleci-provision-scripts/go.sh\nRUN circleci-install golang 1.6.2\nADD circleci-provision-scripts/ruby.sh /opt/circleci-provision-scripts/ruby.sh\nRUN circleci-install ruby 2.1.8\nRUN circleci-install ruby 2.1.9\nRUN circleci-install ruby 2.2.4\nRUN circleci-install ruby 2.2.5\nRUN circleci-install ruby 2.3.0\nRUN circleci-install ruby 2.3.1\nRUN sudo -H -i -u ubuntu rvm use 2.2.4 --default\nADD circleci-provision-scripts/php.sh /opt/circleci-provision-scripts/php.sh\nRUN circleci-install php 5.5.31\nRUN circleci-install php 5.5.32\nRUN circleci-install php 5.5.36\nRUN circleci-install php 5.6.17\nRUN circleci-install php 5.6.18\nRUN circleci-install php 5.6.22\nRUN circleci-install php 7.0.4\nRUN circleci-install php 7.0.7\nRUN circleci-install php 7.0.11\nRUN circleci-install php 7.1.0\nRUN sudo -H -i -u ubuntu phpenv global 5.6.17\nADD circleci-provision-scripts/clojure.sh /opt/circleci-provision-scripts/clojure.sh\nRUN circleci-install clojure\nADD circleci-provision-scripts/scala.sh /opt/circleci-provision-scripts/scala.sh\nRUN circleci-install scala\nADD circleci-provision-scripts/haskell.sh /opt/circleci-provision-scripts/haskell.sh\nRUN circleci-install ghc 8.0.1\n#   Add rest of provisioning files -- add at end to avoid cache invalidation\nADD circleci-provision-scripts /opt/circleci-provision-scripts\n#   We need Dockerfile because unit test parses Dockerfile to make sure all versions are installed\nADD targets/ubuntu-14.04-XL/Dockerfile /opt/circleci/Dockerfile\nARG IMAGE_TAG\nRUN echo $IMAGE_TAG > /opt/circleci/image_version\nADD targets/ubuntu-14.04-XL/pkg-versions.sh /opt/circleci/bin/pkg-versions.sh\nUSER ubuntu\nCMD [\"/bin/bash\"]\nLABEL circleci.user=\"ubuntu\"\n","originalDockerfileUglifiedHash":"72f666d9743ada7bfc1d5071b1b76c3b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/eea7109a3641441c45a2c00fc84183d8334daf8f.dockerfile"}