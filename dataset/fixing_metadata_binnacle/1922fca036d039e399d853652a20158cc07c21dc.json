{"seed":1196863898,"processedDockerfileHash":"c0f27dcf20de528719eefb864cfcc0d8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   sshd\n#\n#   VERSION               0.0.2\nFROM ubuntu:14.04\nMAINTAINER InteractiveShell Team <trym2@googlegroups.com>\n#   For ssh server and up-to-date ubuntu.\nRUN apt-get update \\\n && apt-get install --no-install-recommends openssh-server=1:6.6p1-2ubuntu2.13 wget=1.15-1ubuntu1.14.04.5 -y ; apt-get upgrade -y\nRUN mkdir /build\n#   Prerequisites\n#\n#   polymake\nRUN apt-get install --no-install-recommends g++=4:4.8.2-1ubuntu6 libboost-dev=1.54.0.1ubuntu1 libgmp-dev=2:5.1.3+dfsg-1ubuntu1 libgmpxx4ldbl=2:5.1.3+dfsg-1ubuntu1 libmpfr-dev=3.1.2-1 libperl-dev=5.18.2-2ubuntu1.7 libsvn-perl=1.8.8-1ubuntu3.3 libterm-readline-gnu-perl=1.20-2build2 libxml-libxml-perl=2.0108+dfsg-1ubuntu0.2 libxml-libxslt-perl=1.84-1 libxml-perl=0.08-2 libxml-writer-perl=0.623-1 libxml2-dev=2.9.1+dfsg1-3ubuntu4.13 w3c-dtd-xhtml=1.2-4 xsltproc=1.1.28-2ubuntu0.2 clang=1:3.4-0ubuntu1 bliss=0.72-5 libbliss-dev=0.72-5 make=3.81-8.2ubuntu3 -y\n#   Singular\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:1.9.1-1ubuntu0.10 build-essential=11.6ubuntu6 autoconf=2.69-6 autogen=1:5.18-2ubuntu2 libtool=2.4.2-1.7ubuntu1 libreadline6-dev=6.3-4ubuntu2 libglpk-dev=4.52.1-2build1 libgmp-dev=2:5.1.3+dfsg-1ubuntu1 libmpfr-dev=3.1.2-1 libcdd-dev=094g-5 libntl-dev=5.5.2-2 -y\n#   normaliz\nRUN apt-get install --no-install-recommends zip=3.0-8 -y\n#   Installing 4ti2\nWORKDIR /build\nENV FOURTITWO_VERSION=\"1.6.6\"\nRUN wget http://www.4ti2.de/version_$FOURTITWO_VERSION/4ti2-$FOURTITWO_VERSION.tar.gz ; tar xzf 4ti2-$FOURTITWO_VERSION.tar.gz\nWORKDIR /build/4ti2-$FOURTITWO_VERSION\nRUN ./configure ; make -j3 ; make install\n#   Installing normaliz\nWORKDIR /build\nENV NORMALIZ_VERSION=\"2.12.2\"\nENV NORMALIZ_VERSION_SHORT=\"2.12\"\nRUN wget http://www.home.uni-osnabrueck.de/wbruns/normaliz/Normaliz${NORMALIZ_VERSION}/Normaliz${NORMALIZ_VERSION}.zip ; unzip Normaliz${NORMALIZ_VERSION}.zip\nWORKDIR /build/Normaliz${NORMALIZ_VERSION_SHORT}/source\nRUN make -j3 ; cp /build/Normaliz${NORMALIZ_VERSION_SHORT}/source/normaliz /usr/local/bin\n#   Installing polymake\nWORKDIR /build\nENV POLYMAKE_VERSION=\"2.14\"\nRUN wget http://www.polymake.org/lib/exe/fetch.php/download/polymake-$POLYMAKE_VERSION.tar.bz2 ; tar jxf polymake-$POLYMAKE_VERSION.tar.bz2\nWORKDIR /build/polymake-$POLYMAKE_VERSION\nRUN ./configure CC=clang CXX=clang++ --without-java --without-javaview ; make -j2 ; make install\n#   Installing Singular\nWORKDIR /build\nENV LD_LIBRARY_PATH=\"$LIBRARY_PATH:/usr/local/lib\"\nRUN git clone https://github.com/Singular/Sources.git singular_sources\nWORKDIR /build/singular_sources\nRUN export PATH=$PATH:/usr/local/lib ; ./autogen.sh ; ./configure CXXFLAGS=-fopenmp --enable-gfanlib --enable-polymake ; make -j7 ; make install ; Singular -v\nRUN ldconfig\n#   Userland\nWORKDIR /\nRUN useradd -m -d /home/singularUser singularUser\nRUN mkdir /home/singularUser/.ssh\nCOPY id_rsa.pub /home/singularUser/.ssh/authorized_keys\nRUN chown -R singularUser:singularUser /home/singularUser/.ssh\nRUN chmod 755 /home/singularUser/.ssh\nRUN chmod 644 /home/singularUser/.ssh/authorized_keys\nRUN mkdir /var/run/sshd\n#   RUN echo 'root:screencast' | chpasswd\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin no/' /etc/ssh/sshd_config\n#   SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\nENV NOTVISIBLE=\"\\\"in users profile\\\"\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\nRUN echo \"UseDNS no\" >> /etc/ssh/sshd_config\n#   copy open\n#   COPY open /usr/bin/open\n#   RUN ln -s /usr/bin/open /usr/bin/display\nWORKDIR /home/singularUser\n#   USER singularUser\nEXPOSE 22/tcp\n#   CMD [\"/usr/sbin/sshd\", \"-D\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  sshd\n#\n#  VERSION               0.0.2\nFROM ubuntu:14.04\nMAINTAINER InteractiveShell Team <trym2@googlegroups.com>\n#  For ssh server and up-to-date ubuntu.\nRUN apt-get update \\\n && apt-get install openssh-server wget -y ; apt-get upgrade -y\nRUN mkdir /build\n#  Prerequisites\n#\n#  polymake\nRUN apt-get install g++ libboost-dev libgmp-dev libgmpxx4ldbl libmpfr-dev libperl-dev libsvn-perl libterm-readline-gnu-perl libxml-libxml-perl libxml-libxslt-perl libxml-perl libxml-writer-perl libxml2-dev w3c-dtd-xhtml xsltproc clang bliss libbliss-dev make -y\n#  Singular\nRUN apt-get update \\\n && apt-get install git build-essential autoconf autogen libtool libreadline6-dev libglpk-dev libgmp-dev libmpfr-dev libcdd-dev libntl-dev -y\n#  normaliz\nRUN apt-get install zip -y\n#  Installing 4ti2\nWORKDIR /build\nENV FOURTITWO_VERSION=\"1.6.6\"\nRUN wget http://www.4ti2.de/version_$FOURTITWO_VERSION/4ti2-$FOURTITWO_VERSION.tar.gz ; tar xzf 4ti2-$FOURTITWO_VERSION.tar.gz\nWORKDIR /build/4ti2-$FOURTITWO_VERSION\nRUN ./configure ; make -j3 ; make install\n#  Installing normaliz\nWORKDIR /build\nENV NORMALIZ_VERSION=\"2.12.2\"\nENV NORMALIZ_VERSION_SHORT=\"2.12\"\nRUN wget http://www.home.uni-osnabrueck.de/wbruns/normaliz/Normaliz${NORMALIZ_VERSION}/Normaliz${NORMALIZ_VERSION}.zip ; unzip Normaliz${NORMALIZ_VERSION}.zip\nWORKDIR /build/Normaliz${NORMALIZ_VERSION_SHORT}/source\nRUN make -j3 ; cp /build/Normaliz${NORMALIZ_VERSION_SHORT}/source/normaliz /usr/local/bin\n#  Installing polymake\nWORKDIR /build\nENV POLYMAKE_VERSION=\"2.14\"\nRUN wget http://www.polymake.org/lib/exe/fetch.php/download/polymake-$POLYMAKE_VERSION.tar.bz2 ; tar jxf polymake-$POLYMAKE_VERSION.tar.bz2\nWORKDIR /build/polymake-$POLYMAKE_VERSION\nRUN ./configure CC=clang CXX=clang++ --without-java --without-javaview ; make -j2 ; make install\n#  Installing Singular\nWORKDIR /build\nENV LD_LIBRARY_PATH=\"$LIBRARY_PATH:/usr/local/lib\"\nRUN git clone https://github.com/Singular/Sources.git singular_sources\nWORKDIR /build/singular_sources\nRUN export PATH=$PATH:/usr/local/lib ; ./autogen.sh ; ./configure CXXFLAGS=-fopenmp --enable-gfanlib --enable-polymake ; make -j7 ; make install ; Singular -v\nRUN ldconfig\n#  Userland\nWORKDIR /\nRUN useradd -m -d /home/singularUser singularUser\nRUN mkdir /home/singularUser/.ssh\nCOPY id_rsa.pub /home/singularUser/.ssh/authorized_keys\nRUN chown -R singularUser:singularUser /home/singularUser/.ssh\nRUN chmod 755 /home/singularUser/.ssh\nRUN chmod 644 /home/singularUser/.ssh/authorized_keys\nRUN mkdir /var/run/sshd\n#  RUN echo 'root:screencast' | chpasswd\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin no/' /etc/ssh/sshd_config\n#  SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\nENV NOTVISIBLE=\"\\\"in users profile\\\"\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\nRUN echo \"UseDNS no\" >> /etc/ssh/sshd_config\n#  copy open\n#  COPY open /usr/bin/open\n#  RUN ln -s /usr/bin/open /usr/bin/display\nWORKDIR /home/singularUser\n#  USER singularUser\nEXPOSE 22/tcp\n#  CMD [\"/usr/sbin/sshd\", \"-D\"]\n","injectedSmells":[],"originalDockerfileHash":"23bdb06e3391b929c4e187e54756b19a","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   sshd\n#\n#   VERSION               0.0.2\nFROM ubuntu:14.04\nMAINTAINER InteractiveShell Team <trym2@googlegroups.com>\n#   For ssh server and up-to-date ubuntu.\nRUN apt-get update \\\n && apt-get install openssh-server wget -y ; apt-get upgrade -y\nRUN mkdir /build\n#   Prerequisites\n#\n#   polymake\nRUN apt-get install g++ libboost-dev libgmp-dev libgmpxx4ldbl libmpfr-dev libperl-dev libsvn-perl libterm-readline-gnu-perl libxml-libxml-perl libxml-libxslt-perl libxml-perl libxml-writer-perl libxml2-dev w3c-dtd-xhtml xsltproc clang bliss libbliss-dev make -y\n#   Singular\nRUN apt-get update \\\n && apt-get install git build-essential autoconf autogen libtool libreadline6-dev libglpk-dev libgmp-dev libmpfr-dev libcdd-dev libntl-dev -y\n#   normaliz\nRUN apt-get install zip -y\n#   Installing 4ti2\nWORKDIR /build\nENV FOURTITWO_VERSION=\"1.6.6\"\nRUN wget http://www.4ti2.de/version_$FOURTITWO_VERSION/4ti2-$FOURTITWO_VERSION.tar.gz ; tar xzf 4ti2-$FOURTITWO_VERSION.tar.gz\nWORKDIR /build/4ti2-$FOURTITWO_VERSION\nRUN ./configure ; make -j3 ; make install\n#   Installing normaliz\nWORKDIR /build\nENV NORMALIZ_VERSION=\"2.12.2\"\nENV NORMALIZ_VERSION_SHORT=\"2.12\"\nRUN wget http://www.home.uni-osnabrueck.de/wbruns/normaliz/Normaliz${NORMALIZ_VERSION}/Normaliz${NORMALIZ_VERSION}.zip ; unzip Normaliz${NORMALIZ_VERSION}.zip\nWORKDIR /build/Normaliz${NORMALIZ_VERSION_SHORT}/source\nRUN make -j3 ; cp /build/Normaliz${NORMALIZ_VERSION_SHORT}/source/normaliz /usr/local/bin\n#   Installing polymake\nWORKDIR /build\nENV POLYMAKE_VERSION=\"2.14\"\nRUN wget http://www.polymake.org/lib/exe/fetch.php/download/polymake-$POLYMAKE_VERSION.tar.bz2 ; tar jxf polymake-$POLYMAKE_VERSION.tar.bz2\nWORKDIR /build/polymake-$POLYMAKE_VERSION\nRUN ./configure CC=clang CXX=clang++ --without-java --without-javaview ; make -j2 ; make install\n#   Installing Singular\nWORKDIR /build\nENV LD_LIBRARY_PATH=\"$LIBRARY_PATH:/usr/local/lib\"\nRUN git clone https://github.com/Singular/Sources.git singular_sources\nWORKDIR /build/singular_sources\nRUN export PATH=$PATH:/usr/local/lib ; ./autogen.sh ; ./configure CXXFLAGS=-fopenmp --enable-gfanlib --enable-polymake ; make -j7 ; make install ; Singular -v\nRUN ldconfig\n#   Userland\nWORKDIR /\nRUN useradd -m -d /home/singularUser singularUser\nRUN mkdir /home/singularUser/.ssh\nCOPY id_rsa.pub /home/singularUser/.ssh/authorized_keys\nRUN chown -R singularUser:singularUser /home/singularUser/.ssh\nRUN chmod 755 /home/singularUser/.ssh\nRUN chmod 644 /home/singularUser/.ssh/authorized_keys\nRUN mkdir /var/run/sshd\n#   RUN echo 'root:screencast' | chpasswd\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin no/' /etc/ssh/sshd_config\n#   SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\nENV NOTVISIBLE=\"\\\"in users profile\\\"\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\nRUN echo \"UseDNS no\" >> /etc/ssh/sshd_config\n#   copy open\n#   COPY open /usr/bin/open\n#   RUN ln -s /usr/bin/open /usr/bin/display\nWORKDIR /home/singularUser\n#   USER singularUser\nEXPOSE 22/tcp\n#   CMD [\"/usr/sbin/sshd\", \"-D\"]\n","originalDockerfileUglifiedHash":"43a292293367ebee2f0f51eb97b691a3","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1922fca036d039e399d853652a20158cc07c21dc.dockerfile"}