{"seed":1900239658,"processedDockerfileHash":"176a24c1e8fec1b86f22b0b910f5e06d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM REPLACE_BASE_VANILLA_CENTOS\nRUN yum -y update\nRUN yum -y install openssh-server\nRUN yum -y install passwd\nRUN yum -y install sudo\nRUN yum -y install rsync\nRUN useradd -ms /bin/bash REPLACE_USERNAME\nRUN echo \"REPLACE_USERNAME ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers\n#  ENV OBJECTSTORE_PORT=10000\n#  ENV METRICSTORE_PORT=20000\n#  ENV LOGSTORE_PORT=30000\n#  ENV FILESTORE_PORT=40000\n#  ENV GUI_PORT=50000\n#  ENV API_PORT=60000\n#  ENV VPN_PORT=65000\n#  EXPOSE $OBJECTSTORE_PORT\n#  EXPOSE $METRICSTORE_PORT\n#  EXPOSE $LOGSTORE_PORT\n#  EXPOSE $FILESTORE_PORT\n#  EXPOSE $GUI_PORT\n#  EXPOSE $API_PORT\n#  EXPOSE $VPN_PORT\n#   sudo-install-man\nRUN yum install -y sudo\n#   echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#   sudo-install-man\n#   ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#   ifconfig-install-sl\n#   ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#   ip-install-sl\n#   pkill-install-pm\nRUN yum install -y psmisc coreutils\n#   pkill-install-pm\n#   which-install-pm\nRUN /bin/true\n#   which-install-pm\n#   ntp-install-pm\nRUN yum install -y ntp ntpdate\n#   ntp-install-pm\n#   git-install-pm\nRUN yum install -y git\n#   git-install-pm\n#   wget-install-pm\nRUN yum install -y wget\n#   wget-install-pm\n#   pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#   pip-install-pm\n#   gcc-install-pm\nRUN yum install -y gcc gcc-c++\n#   gcc-install-pm\n#   make-install-pm\nRUN yum install -y make\n#   make-install-pm\n#   bc-install-pm\nRUN yum install -y bc\n#   bc-install-pm\n#   sshpass-install-pm\nRUN yum install -y sshpass\n#   sshpass-install-pm\n#   curl-install-pm\nRUN yum install -y curl\n#   curl-install-pm\n#   screen-install-pm\nRUN yum install -y screen\n#   screen-install-pm\n#   rsync-install-pm\nRUN yum install -y rsync\n#   rsync-install-pm\n#   ncftp-install-pm\nRUN yum install -y ncftp\n#   ncftp-install-pm\n#   lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#   lftp-install-pm\n#   haproxy-install-pm\nRUN yum install -y haproxy\n#   service_stop_disable haproxy\n#   haproxy-install-pm\nRUN yum install -y vim\n#   netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#   netcat-install-man\n#   nmap-install-pm\nRUN yum install -y nmap\n#   nmap-install-pm\n#   openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#   openvpn-install-pm\n#   gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#   service_stop_disable gmond\n#   gmond-install-pm\n#   rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s /sbin/rsyslogd /usr/local/bin/rsyslogd\n#   rsyslog-install-pm\n#   apache-install-pm\nRUN yum -y install httpd ; /bin/true\n#   apache-install-pm\n#   redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#   redis-install-pm\nRUN sed -i \"s/.*port.*/port $OBJECTSTORE_PORT/\" /etc/redis.conf\n#   mongodb-install-pm\nRUN yum install -y mongodb mongodb-server\nRUN sed -i \"s/.*bind_ip.*/bind_ip=0.0.0.0/\" /etc/mongod.conf\n#   mongodb-install-pm\nRUN sed -i \"s/.*port.*/port = $METRICSTORE_PORT/\" /etc/mongod.conf\n#   pylibvirt-install-pm\nRUN yum install -y libvirt-python\n#   pylibvirt-install-pm\n#   pypureomapi-install-pip\nRUN pip install pypureomapi==0.8 --upgrade\n#   pypureomapi-install-pip\n#   python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#   python-devel-install-pm \n#   python-prettytable-install-pip\nRUN pip install docutils==0.19 prettytable==3.7.0 --upgrade\n#   python-prettytable-install-pip\n#   python-daemon-install-pip\nRUN pip install python-daemon==3.0.1 --upgrade\n#   python-daemon-install-pip\n#   python-twisted-install-pip\nRUN pip install twisted==22.10.0 service_identity==21.1.0 --upgrade\n#   python-twisted-install-pip\n#   python-beaker-install-pip\nRUN pip install beaker==1.12.1 --upgrade\n#   python-beaker-install-pip\n#   python-webob-install-pip\nRUN pip install webob==1.8.7 --upgrade\n#   python-webob-install-pip\n#   pyredis-install-pip\nRUN pip install redis==2.10.6\n#   pyredis-install-pip\n#   pymongo-install-pip\nRUN pip install mongo==0.2.0 --upgrade\n#   pymongo-install-pip\n#   pssh-install-pm\nRUN yum install -y pssh\n#   pssh-install-pm\n#   docutils-install-pip\nRUN pip install docutils==0.19 --upgrade\n#   docutils-install-pip\n#   python-setuptools-install-pip\nRUN pip install setuptools==67.6.1 --upgrade\n#   python-setuptools-install-pip \n#   markup-install-pip\nRUN pip install markup==0.2 --upgrade\n#   markup-install-pip \n#   pyyaml-install-pip\nRUN pip install pyyaml==6.0 --upgrade\n#   pyyaml-install-pip \n#   ruamelyaml-install-pip\nRUN pip install ruamel.yaml==0.17.21 --upgrade\n#   ruamelyaml-install-pip\n#   urllib3-install-pip\nRUN pip install urllib3[secure] --upgrade\n#   urllib3-install-pip\n#   jq-install-pm\nRUN yum install -y jq\n#   jq-install-pm\n#   httplib2shim-install-pip\nRUN pip install httplib2shim==0.0.3 --upgrade\n#   httplib2shim-install-pip\n#   iptables-install-pm\nRUN yum install -y iptables\n#   service_stop_disable iptables\n#   iptables-install-pm\n#   sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#   sshd-install-pm\n#   novaclient-install-pip\nRUN pip install pbr==5.11.1 --upgrade\nRUN pip install netifaces==0.11.0 --upgrade\nRUN pip install python-novaclient==9.1.1 --upgrade\n#   novaclient-install-pip\n#   neutronclient-install-pip\nRUN pip install python-neutronclient==6.5.0 --upgrade\n#   neutronclient-install-pip\n#   cinderclient-install-pip\nRUN pip install python-cinderclient==3.2.0 --upgrade\n#   cinderclient-install-pip\n#   glanceclient-install-pip\nRUN pip install python-glanceclient==2.8.0 --upgrade\n#   glanceclient-install-pip\n#   softlayer-install-pip\nRUN pip install softlayer==6.1.6 --upgrade\n#   softlayer-install-pip\n#   boto-install-pip\nRUN pip install boto==2.49.0 --upgrade\n#   boto-install-pip\n#   libcloud-install-pip\nRUN pip install apache-libcloud==3.7.0 --upgrade\n#   libcloud-install-pip\n#   pygce-install-pip\nRUN pip install gcloud==0.18.3 google-api-python-client==2.85.0 --upgrade\n#   pygce-install-pip\n#   pydocker-install-pip\nRUN pip install docker-py==1.8.1 wget==3.2 --upgrade\n#   pydocker-install-pip\n#   pylxd-install-pip\nRUN pip install pylxd==2.3.1 --upgrade\n#   pylxd-install-pip\n#   pykube-install-pip\nRUN pip install pykube==0.15.0 --upgrade\n#   pykube-install-pip\n#   R-install-pm\nRUN yum install -y R\n#   R-install-pm\n#   rrdtool-install-pm\nRUN yum install -y rrdtool\n#   rrdtool-install-pm\n#   python-rrdtool-install-pm\nRUN yum install -y rrdtool-python\n#   python-rrdtool-install-pm\n#   python-dateutil-install-pip\nRUN pip install python-dateutil==2.8.2 --upgrade\n#   python-dateutil-install-pip\n#   python-pillow-install-pip\nRUN pip install Pillow==9.5.0 --upgrade\n#   python-pillow-install-pip\n#   python-jsonschema-install-pip\nRUN pip install jsonschema==4.17.3 --upgrade\n#   python-jsonschema-install-pip\nUSER REPLACE_USERNAME\n#   gcloud-install-man\nENV CLOUDSDK_CORE_DISABLE_PROMPTS=\"1\"\nRUN curl https://sdk.cloud.google.com | bash\nRUN sudo ln -s /home/REPLACE_USERNAME/google-cloud-sdk/bin/gcloud /usr/local/bin/gcloud\n#   gcloud-install-man\nWORKDIR /home/REPLACE_USERNAME/\n#   gmetad-python-install-git\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party/workload\nRUN cp____-f____/home/REPLACE_USERNAME/cbtool/util/manually_download_files.txt____/home/REPLACE_USERNAME/cbtool/3rd_party/workload ; /bin/true\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#   gmetad-python-install-git\n#   pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n#   pyhtml-install-git\n#   bootstrap-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/bootstrap.git\n#   bootstrap-install-git\n#   bootstrap-wizard-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/Bootstrap-Wizard.git\n#   bootstrap-wizard-install-git\n#   streamprox-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/StreamProx.git\n#   streamprox-install-git\n#   d3-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/d3.git\n#   d3-install-git\nWORKDIR /home/REPLACE_USERNAME\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/lib/clouds/\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/configs/templates/\nCOPY cloud_definitions.txt /home/REPLACE_USERNAME/cbtool/configs/\nRUN sudo chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\nRUN mv /home/REPLACE_USERNAME/cbtool /home/REPLACE_USERNAME/cbtooltmp\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM REPLACE_BASE_VANILLA_CENTOS\nRUN yum -y update\nRUN yum -y install openssh-server\nRUN yum -y install passwd\nRUN yum -y install sudo\nRUN yum -y install rsync\nRUN useradd -ms /bin/bash REPLACE_USERNAME\nRUN echo \"REPLACE_USERNAME ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers\n# ENV OBJECTSTORE_PORT=10000\n# ENV METRICSTORE_PORT=20000\n# ENV LOGSTORE_PORT=30000\n# ENV FILESTORE_PORT=40000\n# ENV GUI_PORT=50000\n# ENV API_PORT=60000\n# ENV VPN_PORT=65000\n# EXPOSE $OBJECTSTORE_PORT\n# EXPOSE $METRICSTORE_PORT\n# EXPOSE $LOGSTORE_PORT\n# EXPOSE $FILESTORE_PORT\n# EXPOSE $GUI_PORT\n# EXPOSE $API_PORT\n# EXPOSE $VPN_PORT\n#  sudo-install-man\nRUN yum install -y sudo\n#  echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#  sudo-install-man\n#  ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#  ifconfig-install-sl\n#  ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#  ip-install-sl\n#  pkill-install-pm\nRUN yum install -y psmisc coreutils\n#  pkill-install-pm\n#  which-install-pm\nRUN /bin/true\n#  which-install-pm\n#  ntp-install-pm\nRUN yum install -y ntp ntpdate\n#  ntp-install-pm\n#  git-install-pm\nRUN yum install -y git\n#  git-install-pm\n#  wget-install-pm\nRUN yum install -y wget\n#  wget-install-pm\n#  pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#  pip-install-pm\n#  gcc-install-pm\nRUN yum install -y gcc gcc-c++\n#  gcc-install-pm\n#  make-install-pm\nRUN yum install -y make\n#  make-install-pm\n#  bc-install-pm\nRUN yum install -y bc\n#  bc-install-pm\n#  sshpass-install-pm\nRUN yum install -y sshpass\n#  sshpass-install-pm\n#  curl-install-pm\nRUN yum install -y curl\n#  curl-install-pm\n#  screen-install-pm\nRUN yum install -y screen\n#  screen-install-pm\n#  rsync-install-pm\nRUN yum install -y rsync\n#  rsync-install-pm\n#  ncftp-install-pm\nRUN yum install -y ncftp\n#  ncftp-install-pm\n#  lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#  lftp-install-pm\n#  haproxy-install-pm\nRUN yum install -y haproxy\n#  service_stop_disable haproxy\n#  haproxy-install-pm\nRUN yum install -y vim\n#  netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#  netcat-install-man\n#  nmap-install-pm\nRUN yum install -y nmap\n#  nmap-install-pm\n#  openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#  openvpn-install-pm\n#  gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#  service_stop_disable gmond\n#  gmond-install-pm\n#  rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s /sbin/rsyslogd /usr/local/bin/rsyslogd\n#  rsyslog-install-pm\n#  apache-install-pm\nRUN yum -y install httpd ; /bin/true\n#  apache-install-pm\n#  redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#  redis-install-pm\nRUN sed -i \"s/.*port.*/port $OBJECTSTORE_PORT/\" /etc/redis.conf\n#  mongodb-install-pm\nRUN yum install -y mongodb mongodb-server\nRUN sed -i \"s/.*bind_ip.*/bind_ip=0.0.0.0/\" /etc/mongod.conf\n#  mongodb-install-pm\nRUN sed -i \"s/.*port.*/port = $METRICSTORE_PORT/\" /etc/mongod.conf\n#  pylibvirt-install-pm\nRUN yum install -y libvirt-python\n#  pylibvirt-install-pm\n#  pypureomapi-install-pip\nRUN pip install pypureomapi --upgrade\n#  pypureomapi-install-pip\n#  python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#  python-devel-install-pm \n#  python-prettytable-install-pip\nRUN pip install docutils prettytable --upgrade\n#  python-prettytable-install-pip\n#  python-daemon-install-pip\nRUN pip install python-daemon --upgrade\n#  python-daemon-install-pip\n#  python-twisted-install-pip\nRUN pip install twisted service_identity --upgrade\n#  python-twisted-install-pip\n#  python-beaker-install-pip\nRUN pip install beaker --upgrade\n#  python-beaker-install-pip\n#  python-webob-install-pip\nRUN pip install webob --upgrade\n#  python-webob-install-pip\n#  pyredis-install-pip\nRUN pip install redis==2.10.6\n#  pyredis-install-pip\n#  pymongo-install-pip\nRUN pip install mongo --upgrade\n#  pymongo-install-pip\n#  pssh-install-pm\nRUN yum install -y pssh\n#  pssh-install-pm\n#  docutils-install-pip\nRUN pip install docutils --upgrade\n#  docutils-install-pip\n#  python-setuptools-install-pip\nRUN pip install setuptools --upgrade\n#  python-setuptools-install-pip \n#  markup-install-pip\nRUN pip install markup --upgrade\n#  markup-install-pip \n#  pyyaml-install-pip\nRUN pip install pyyaml --upgrade\n#  pyyaml-install-pip \n#  ruamelyaml-install-pip\nRUN pip install ruamel.yaml --upgrade\n#  ruamelyaml-install-pip\n#  urllib3-install-pip\nRUN pip install urllib3[secure] --upgrade\n#  urllib3-install-pip\n#  jq-install-pm\nRUN yum install -y jq\n#  jq-install-pm\n#  httplib2shim-install-pip\nRUN pip install httplib2shim --upgrade\n#  httplib2shim-install-pip\n#  iptables-install-pm\nRUN yum install -y iptables\n#  service_stop_disable iptables\n#  iptables-install-pm\n#  sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#  sshd-install-pm\n#  novaclient-install-pip\nRUN pip install pbr --upgrade\nRUN pip install netifaces --upgrade\nRUN pip install python-novaclient==9.1.1 --upgrade\n#  novaclient-install-pip\n#  neutronclient-install-pip\nRUN pip install python-neutronclient==6.5.0 --upgrade\n#  neutronclient-install-pip\n#  cinderclient-install-pip\nRUN pip install python-cinderclient==3.2.0 --upgrade\n#  cinderclient-install-pip\n#  glanceclient-install-pip\nRUN pip install python-glanceclient==2.8.0 --upgrade\n#  glanceclient-install-pip\n#  softlayer-install-pip\nRUN pip install softlayer --upgrade\n#  softlayer-install-pip\n#  boto-install-pip\nRUN pip install boto --upgrade\n#  boto-install-pip\n#  libcloud-install-pip\nRUN pip install apache-libcloud --upgrade\n#  libcloud-install-pip\n#  pygce-install-pip\nRUN pip install gcloud google-api-python-client --upgrade\n#  pygce-install-pip\n#  pydocker-install-pip\nRUN pip install docker-py==1.8.1 wget --upgrade\n#  pydocker-install-pip\n#  pylxd-install-pip\nRUN pip install pylxd --upgrade\n#  pylxd-install-pip\n#  pykube-install-pip\nRUN pip install pykube --upgrade\n#  pykube-install-pip\n#  R-install-pm\nRUN yum install -y R\n#  R-install-pm\n#  rrdtool-install-pm\nRUN yum install -y rrdtool\n#  rrdtool-install-pm\n#  python-rrdtool-install-pm\nRUN yum install -y rrdtool-python\n#  python-rrdtool-install-pm\n#  python-dateutil-install-pip\nRUN pip install python-dateutil --upgrade\n#  python-dateutil-install-pip\n#  python-pillow-install-pip\nRUN pip install Pillow --upgrade\n#  python-pillow-install-pip\n#  python-jsonschema-install-pip\nRUN pip install jsonschema --upgrade\n#  python-jsonschema-install-pip\nUSER REPLACE_USERNAME\n#  gcloud-install-man\nENV CLOUDSDK_CORE_DISABLE_PROMPTS=\"1\"\nRUN curl https://sdk.cloud.google.com | bash\nRUN sudo ln -s /home/REPLACE_USERNAME/google-cloud-sdk/bin/gcloud /usr/local/bin/gcloud\n#  gcloud-install-man\nWORKDIR /home/REPLACE_USERNAME/\n#  gmetad-python-install-git\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party/workload\nRUN cp____-f____/home/REPLACE_USERNAME/cbtool/util/manually_download_files.txt____/home/REPLACE_USERNAME/cbtool/3rd_party/workload ; /bin/true\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#  gmetad-python-install-git\n#  pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n#  pyhtml-install-git\n#  bootstrap-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/bootstrap.git\n#  bootstrap-install-git\n#  bootstrap-wizard-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/Bootstrap-Wizard.git\n#  bootstrap-wizard-install-git\n#  streamprox-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/StreamProx.git\n#  streamprox-install-git\n#  d3-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/d3.git\n#  d3-install-git\nWORKDIR /home/REPLACE_USERNAME\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/lib/clouds/\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/configs/templates/\nCOPY cloud_definitions.txt /home/REPLACE_USERNAME/cbtool/configs/\nRUN sudo chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\nRUN mv /home/REPLACE_USERNAME/cbtool /home/REPLACE_USERNAME/cbtooltmp\n","injectedSmells":[],"originalDockerfileHash":"5f02a97322e6699b611ceaf771435b2a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM REPLACE_BASE_VANILLA_CENTOS\nRUN yum -y update\nRUN yum -y install openssh-server\nRUN yum -y install passwd\nRUN yum -y install sudo\nRUN yum -y install rsync\nRUN useradd -ms /bin/bash REPLACE_USERNAME\nRUN echo \"REPLACE_USERNAME ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers\n#  ENV OBJECTSTORE_PORT=10000\n#  ENV METRICSTORE_PORT=20000\n#  ENV LOGSTORE_PORT=30000\n#  ENV FILESTORE_PORT=40000\n#  ENV GUI_PORT=50000\n#  ENV API_PORT=60000\n#  ENV VPN_PORT=65000\n#  EXPOSE $OBJECTSTORE_PORT\n#  EXPOSE $METRICSTORE_PORT\n#  EXPOSE $LOGSTORE_PORT\n#  EXPOSE $FILESTORE_PORT\n#  EXPOSE $GUI_PORT\n#  EXPOSE $API_PORT\n#  EXPOSE $VPN_PORT\n#   sudo-install-man\nRUN yum install -y sudo\n#   echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#   sudo-install-man\n#   ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#   ifconfig-install-sl\n#   ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#   ip-install-sl\n#   pkill-install-pm\nRUN yum install -y psmisc coreutils\n#   pkill-install-pm\n#   which-install-pm\nRUN /bin/true\n#   which-install-pm\n#   ntp-install-pm\nRUN yum install -y ntp ntpdate\n#   ntp-install-pm\n#   git-install-pm\nRUN yum install -y git\n#   git-install-pm\n#   wget-install-pm\nRUN yum install -y wget\n#   wget-install-pm\n#   pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#   pip-install-pm\n#   gcc-install-pm\nRUN yum install -y gcc gcc-c++\n#   gcc-install-pm\n#   make-install-pm\nRUN yum install -y make\n#   make-install-pm\n#   bc-install-pm\nRUN yum install -y bc\n#   bc-install-pm\n#   sshpass-install-pm\nRUN yum install -y sshpass\n#   sshpass-install-pm\n#   curl-install-pm\nRUN yum install -y curl\n#   curl-install-pm\n#   screen-install-pm\nRUN yum install -y screen\n#   screen-install-pm\n#   rsync-install-pm\nRUN yum install -y rsync\n#   rsync-install-pm\n#   ncftp-install-pm\nRUN yum install -y ncftp\n#   ncftp-install-pm\n#   lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#   lftp-install-pm\n#   haproxy-install-pm\nRUN yum install -y haproxy\n#   service_stop_disable haproxy\n#   haproxy-install-pm\nRUN yum install -y vim\n#   netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#   netcat-install-man\n#   nmap-install-pm\nRUN yum install -y nmap\n#   nmap-install-pm\n#   openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#   openvpn-install-pm\n#   gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#   service_stop_disable gmond\n#   gmond-install-pm\n#   rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s /sbin/rsyslogd /usr/local/bin/rsyslogd\n#   rsyslog-install-pm\n#   apache-install-pm\nRUN yum -y install httpd ; /bin/true\n#   apache-install-pm\n#   redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#   redis-install-pm\nRUN sed -i \"s/.*port.*/port $OBJECTSTORE_PORT/\" /etc/redis.conf\n#   mongodb-install-pm\nRUN yum install -y mongodb mongodb-server\nRUN sed -i \"s/.*bind_ip.*/bind_ip=0.0.0.0/\" /etc/mongod.conf\n#   mongodb-install-pm\nRUN sed -i \"s/.*port.*/port = $METRICSTORE_PORT/\" /etc/mongod.conf\n#   pylibvirt-install-pm\nRUN yum install -y libvirt-python\n#   pylibvirt-install-pm\n#   pypureomapi-install-pip\nRUN pip install pypureomapi --upgrade\n#   pypureomapi-install-pip\n#   python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#   python-devel-install-pm \n#   python-prettytable-install-pip\nRUN pip install docutils prettytable --upgrade\n#   python-prettytable-install-pip\n#   python-daemon-install-pip\nRUN pip install python-daemon --upgrade\n#   python-daemon-install-pip\n#   python-twisted-install-pip\nRUN pip install twisted service_identity --upgrade\n#   python-twisted-install-pip\n#   python-beaker-install-pip\nRUN pip install beaker --upgrade\n#   python-beaker-install-pip\n#   python-webob-install-pip\nRUN pip install webob --upgrade\n#   python-webob-install-pip\n#   pyredis-install-pip\nRUN pip install redis==2.10.6\n#   pyredis-install-pip\n#   pymongo-install-pip\nRUN pip install mongo --upgrade\n#   pymongo-install-pip\n#   pssh-install-pm\nRUN yum install -y pssh\n#   pssh-install-pm\n#   docutils-install-pip\nRUN pip install docutils --upgrade\n#   docutils-install-pip\n#   python-setuptools-install-pip\nRUN pip install setuptools --upgrade\n#   python-setuptools-install-pip \n#   markup-install-pip\nRUN pip install markup --upgrade\n#   markup-install-pip \n#   pyyaml-install-pip\nRUN pip install pyyaml --upgrade\n#   pyyaml-install-pip \n#   ruamelyaml-install-pip\nRUN pip install ruamel.yaml --upgrade\n#   ruamelyaml-install-pip\n#   urllib3-install-pip\nRUN pip install urllib3[secure] --upgrade\n#   urllib3-install-pip\n#   jq-install-pm\nRUN yum install -y jq\n#   jq-install-pm\n#   httplib2shim-install-pip\nRUN pip install httplib2shim --upgrade\n#   httplib2shim-install-pip\n#   iptables-install-pm\nRUN yum install -y iptables\n#   service_stop_disable iptables\n#   iptables-install-pm\n#   sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#   sshd-install-pm\n#   novaclient-install-pip\nRUN pip install pbr --upgrade\nRUN pip install netifaces --upgrade\nRUN pip install python-novaclient==9.1.1 --upgrade\n#   novaclient-install-pip\n#   neutronclient-install-pip\nRUN pip install python-neutronclient==6.5.0 --upgrade\n#   neutronclient-install-pip\n#   cinderclient-install-pip\nRUN pip install python-cinderclient==3.2.0 --upgrade\n#   cinderclient-install-pip\n#   glanceclient-install-pip\nRUN pip install python-glanceclient==2.8.0 --upgrade\n#   glanceclient-install-pip\n#   softlayer-install-pip\nRUN pip install softlayer --upgrade\n#   softlayer-install-pip\n#   boto-install-pip\nRUN pip install boto --upgrade\n#   boto-install-pip\n#   libcloud-install-pip\nRUN pip install apache-libcloud --upgrade\n#   libcloud-install-pip\n#   pygce-install-pip\nRUN pip install gcloud google-api-python-client --upgrade\n#   pygce-install-pip\n#   pydocker-install-pip\nRUN pip install docker-py==1.8.1 wget --upgrade\n#   pydocker-install-pip\n#   pylxd-install-pip\nRUN pip install pylxd --upgrade\n#   pylxd-install-pip\n#   pykube-install-pip\nRUN pip install pykube --upgrade\n#   pykube-install-pip\n#   R-install-pm\nRUN yum install -y R\n#   R-install-pm\n#   rrdtool-install-pm\nRUN yum install -y rrdtool\n#   rrdtool-install-pm\n#   python-rrdtool-install-pm\nRUN yum install -y rrdtool-python\n#   python-rrdtool-install-pm\n#   python-dateutil-install-pip\nRUN pip install python-dateutil --upgrade\n#   python-dateutil-install-pip\n#   python-pillow-install-pip\nRUN pip install Pillow --upgrade\n#   python-pillow-install-pip\n#   python-jsonschema-install-pip\nRUN pip install jsonschema --upgrade\n#   python-jsonschema-install-pip\nUSER REPLACE_USERNAME\n#   gcloud-install-man\nENV CLOUDSDK_CORE_DISABLE_PROMPTS=\"1\"\nRUN curl https://sdk.cloud.google.com | bash\nRUN sudo ln -s /home/REPLACE_USERNAME/google-cloud-sdk/bin/gcloud /usr/local/bin/gcloud\n#   gcloud-install-man\nWORKDIR /home/REPLACE_USERNAME/\n#   gmetad-python-install-git\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party/workload\nRUN cp____-f____/home/REPLACE_USERNAME/cbtool/util/manually_download_files.txt____/home/REPLACE_USERNAME/cbtool/3rd_party/workload ; /bin/true\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#   gmetad-python-install-git\n#   pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n#   pyhtml-install-git\n#   bootstrap-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/bootstrap.git\n#   bootstrap-install-git\n#   bootstrap-wizard-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/Bootstrap-Wizard.git\n#   bootstrap-wizard-install-git\n#   streamprox-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/StreamProx.git\n#   streamprox-install-git\n#   d3-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/d3.git\n#   d3-install-git\nWORKDIR /home/REPLACE_USERNAME\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/lib/clouds/\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/configs/templates/\nCOPY cloud_definitions.txt /home/REPLACE_USERNAME/cbtool/configs/\nRUN sudo chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\nRUN mv /home/REPLACE_USERNAME/cbtool /home/REPLACE_USERNAME/cbtooltmp\n","originalDockerfileUglifiedHash":"97f7f87723f3496993d2d8de8c25c640","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/30c80ee799253675e39e840a35d02bc0fe9db164.dockerfile"}