{"seed":3980471994,"processedDockerfileHash":"a798842fa7940049a4ad15e6a6936034","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   theano        latest (git)\n#   lasagne       latest (git)\n#   ==================================================================\nFROM nvidia/cuda:10.0-cudnn7-devel-ubuntu18.04\nENV LANG=\"C.UTF-8\"\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates wget git vim \\\n && $GIT_CLONE https://github.com/Kitware/CMake ~/cmake \\\n && cd ~/cmake \\\n && ./bootstrap \\\n && make -j\"$( nproc ;)\" install \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3-distutils-extra \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy scipy pandas cloudpickle scikit-learn matplotlib Cython \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL libblas-dev \\\n && wget -qO- https://github.com/Theano/libgpuarray/archive/v0.7.6.tar.gz | tar xz -C ~ \\\n && cd ~/libgpuarray* \\\n && mkdir -p build \\\n && cd build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make -j\"$( nproc ;)\" install \\\n && cd ~/libgpuarray* \\\n && python setup.py build \\\n && python setup.py install \\\n && printf '[global]\\nfloatX = float32\\ndevice = cuda0\\n\\n[dnn]\\ninclude_path = /usr/local/cuda/targets/x86_64-linux/include\\n' > ~/.theanorc \\\n && $PIP_INSTALL https://github.com/Theano/Theano/archive/master.zip \\\n && $GIT_CLONE https://github.com/Lasagne/Lasagne ~/lasagne \\\n && cd ~/lasagne \\\n && $PIP_INSTALL . \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  module list\n#  ------------------------------------------------------------------\n#  python        3.6    (apt)\n#  theano        latest (git)\n#  lasagne       latest (git)\n#  ==================================================================\nFROM nvidia/cuda:10.0-cudnn7-devel-ubuntu18.04\nENV LANG=\"C.UTF-8\"\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates wget git vim \\\n && $GIT_CLONE https://github.com/Kitware/CMake ~/cmake \\\n && cd ~/cmake \\\n && ./bootstrap \\\n && make -j\"$( nproc ;)\" install \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3-distutils-extra \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy scipy pandas cloudpickle scikit-learn matplotlib Cython \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL libblas-dev \\\n && wget -qO- https://github.com/Theano/libgpuarray/archive/v0.7.6.tar.gz | tar xz -C ~ \\\n && cd ~/libgpuarray* \\\n && mkdir -p build \\\n && cd build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make -j\"$( nproc ;)\" install \\\n && cd ~/libgpuarray* \\\n && python setup.py build \\\n && python setup.py install \\\n && printf '[global]\\nfloatX = float32\\ndevice = cuda0\\n\\n[dnn]\\ninclude_path = /usr/local/cuda/targets/x86_64-linux/include\\n' > ~/.theanorc \\\n && $PIP_INSTALL https://github.com/Theano/Theano/archive/master.zip \\\n && $GIT_CLONE https://github.com/Lasagne/Lasagne ~/lasagne \\\n && cd ~/lasagne \\\n && $PIP_INSTALL . \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n","injectedSmells":[],"originalDockerfileHash":"f55215a8953ac9718e297672ed412eba","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   theano        latest (git)\n#   lasagne       latest (git)\n#   ==================================================================\nFROM nvidia/cuda:10.0-cudnn7-devel-ubuntu18.04\nENV LANG=\"C.UTF-8\"\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates wget git vim \\\n && $GIT_CLONE https://github.com/Kitware/CMake ~/cmake \\\n && cd ~/cmake \\\n && ./bootstrap \\\n && make -j\"$( nproc ;)\" install \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3-distutils-extra \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy scipy pandas cloudpickle scikit-learn matplotlib Cython \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL libblas-dev \\\n && wget -qO- https://github.com/Theano/libgpuarray/archive/v0.7.6.tar.gz | tar xz -C ~ \\\n && cd ~/libgpuarray* \\\n && mkdir -p build \\\n && cd build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make -j\"$( nproc ;)\" install \\\n && cd ~/libgpuarray* \\\n && python setup.py build \\\n && python setup.py install \\\n && printf '[global]\\nfloatX = float32\\ndevice = cuda0\\n\\n[dnn]\\ninclude_path = /usr/local/cuda/targets/x86_64-linux/include\\n' > ~/.theanorc \\\n && $PIP_INSTALL https://github.com/Theano/Theano/archive/master.zip \\\n && $GIT_CLONE https://github.com/Lasagne/Lasagne ~/lasagne \\\n && cd ~/lasagne \\\n && $PIP_INSTALL . \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n","originalDockerfileUglifiedHash":"174ac1225c40fb87d8777db9bfbf33ea","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/87c2203dd3c9ecce97fa380ba55d6233414f75ba.dockerfile"}