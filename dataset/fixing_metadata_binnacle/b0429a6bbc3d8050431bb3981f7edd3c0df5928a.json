{"seed":2752938910,"processedDockerfileHash":"2d4908b9119968e8b966d27fa35dc713","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck"],"processedDockerfile":"#   (C) Copyright IBM Corporation 2019.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM ibmjava:8-jre\nLABEL org.opencontainers.image.authors=\"Arthur De Magalhaes, Andy Naumann\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"19.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl190320190321-1636\"\nRUN yum makecache fast \\\n && yum -y install unzip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf /var/tmp/yum-* \\\n && mkdir /licenses \\\n && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default\n#   Install WebSphere Liberty\nENV LIBERTY_VERSION=\"19.0.0_03\"\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\nRUN LIBERTY_URL=${LIBERTY_URL:-$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' ;)} \\\n && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n && rm /tmp/wlp.zip \\\n && chown -R 1001:0 /opt/ibm/wlp \\\n && chmod -R g+rw /opt/ibm/wlp\nENV PATH=\"/opt/ibm/wlp/bin:/opt/ibm/helpers/build:$PATH\"\n#   Add labels for consumption by IBM Product Insights\nLABEL ProductID=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      ProductName=\"WebSphere Application Server Liberty\" \\\n      ProductVersion=\"19.0.0.3\" \\\n      BuildLabel=\"cl190320190321-1636\"\n#   Set Path Shortcuts\nENV LOG_DIR=\"/logs\" \\\n    WLP_OUTPUT_DIR=\"/opt/ibm/wlp/output\"\n#   Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n#   Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n && mkdir /etc/wlp \\\n && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n && mkdir -p /home/default \\\n && mkdir /output \\\n && chmod -t /output \\\n && rm -rf /output \\\n && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n && ln -s /opt/ibm /liberty \\\n && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n && mkdir -p /config/configDropins/defaults \\\n && mkdir -p /config/configDropins/overrides \\\n && chown -R 1001:0 /config \\\n && chmod -R g+rw /config \\\n && chown -R 1001:0 /opt/ibm/helpers \\\n && chmod -R g+rwx /opt/ibm/helpers \\\n && chown -R 1001:0 /opt/ibm/fixes \\\n && chmod -R g+rwx /opt/ibm/fixes \\\n && chown -R 1001:0 /opt/ibm/wlp/usr \\\n && chmod -R g+rw /opt/ibm/wlp/usr \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rw /opt/ibm/wlp/output \\\n && chown -R 1001:0 /logs \\\n && chmod -R g+rw /logs \\\n && chown -R 1001:0 /etc/wlp \\\n && chmod -R g+rw /etc/wlp \\\n && chown -R 1001:0 /home/default \\\n && chmod -R g+rw /home/default\n#  These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=\"/tmp/.rnd\" \\\n    IBM_JAVA_OPTIONS=\"-Xshareclasses:name=liberty,nonfatal,cacheDir=/output/.classCache/ ${IBM_JAVA_OPTIONS}\"\nUSER 1001\nEXPOSE 9080/tcp 9443/tcp\nENV KEYSTORE_REQUIRED=\"true\"\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  (C) Copyright IBM Corporation 2019.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM ibmjava:8-jre\nLABEL org.opencontainers.image.authors=\"Arthur De Magalhaes, Andy Naumann\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"19.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl190320190321-1636\"\nRUN yum makecache fast \\\n && yum -y install unzip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf /var/tmp/yum-* \\\n && mkdir /licenses \\\n && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default\n#  Install WebSphere Liberty\nENV LIBERTY_VERSION=\"19.0.0_03\"\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\nRUN LIBERTY_URL=${LIBERTY_URL:-$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' ;)} \\\n && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n && rm /tmp/wlp.zip \\\n && chown -R 1001:0 /opt/ibm/wlp \\\n && chmod -R g+rw /opt/ibm/wlp\nENV PATH=\"/opt/ibm/wlp/bin:/opt/ibm/helpers/build:$PATH\"\n#  Add labels for consumption by IBM Product Insights\nLABEL ProductID=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      ProductName=\"WebSphere Application Server Liberty\" \\\n      ProductVersion=\"19.0.0.3\" \\\n      BuildLabel=\"cl190320190321-1636\"\n#  Set Path Shortcuts\nENV LOG_DIR=\"/logs\" \\\n    WLP_OUTPUT_DIR=\"/opt/ibm/wlp/output\"\n#  Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n#  Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n && mkdir /etc/wlp \\\n && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n && mkdir -p /home/default \\\n && mkdir /output \\\n && chmod -t /output \\\n && rm -rf /output \\\n && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n && ln -s /opt/ibm /liberty \\\n && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n && mkdir -p /config/configDropins/defaults \\\n && mkdir -p /config/configDropins/overrides \\\n && chown -R 1001:0 /config \\\n && chmod -R g+rw /config \\\n && chown -R 1001:0 /opt/ibm/helpers \\\n && chmod -R g+rwx /opt/ibm/helpers \\\n && chown -R 1001:0 /opt/ibm/fixes \\\n && chmod -R g+rwx /opt/ibm/fixes \\\n && chown -R 1001:0 /opt/ibm/wlp/usr \\\n && chmod -R g+rw /opt/ibm/wlp/usr \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rw /opt/ibm/wlp/output \\\n && chown -R 1001:0 /logs \\\n && chmod -R g+rw /logs \\\n && chown -R 1001:0 /etc/wlp \\\n && chmod -R g+rw /etc/wlp \\\n && chown -R 1001:0 /home/default \\\n && chmod -R g+rw /home/default\n# These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=\"/tmp/.rnd\" \\\n    IBM_JAVA_OPTIONS=\"-Xshareclasses:name=liberty,nonfatal,cacheDir=/output/.classCache/ ${IBM_JAVA_OPTIONS}\"\nUSER 1001\nEXPOSE 9080/tcp 9443/tcp\nENV KEYSTORE_REQUIRED=\"true\"\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n","injectedSmells":[],"originalDockerfileHash":"7e4e64e6c7aab4545adcc1a0a416839e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   (C) Copyright IBM Corporation 2019.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM ibmjava:8-jre\nLABEL org.opencontainers.image.authors=\"Arthur De Magalhaes, Andy Naumann\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"19.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl190320190321-1636\"\nRUN yum makecache fast \\\n && yum -y install unzip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf /var/tmp/yum-* \\\n && mkdir /licenses \\\n && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default\n#   Install WebSphere Liberty\nENV LIBERTY_VERSION=\"19.0.0_03\"\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\nRUN LIBERTY_URL=${LIBERTY_URL:-$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' ;)} \\\n && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n && rm /tmp/wlp.zip \\\n && chown -R 1001:0 /opt/ibm/wlp \\\n && chmod -R g+rw /opt/ibm/wlp\nENV PATH=\"/opt/ibm/wlp/bin:/opt/ibm/helpers/build:$PATH\"\n#   Add labels for consumption by IBM Product Insights\nLABEL ProductID=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      ProductName=\"WebSphere Application Server Liberty\" \\\n      ProductVersion=\"19.0.0.3\" \\\n      BuildLabel=\"cl190320190321-1636\"\n#   Set Path Shortcuts\nENV LOG_DIR=\"/logs\" \\\n    WLP_OUTPUT_DIR=\"/opt/ibm/wlp/output\"\n#   Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n#   Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n && mkdir /etc/wlp \\\n && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n && mkdir -p /home/default \\\n && mkdir /output \\\n && chmod -t /output \\\n && rm -rf /output \\\n && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n && ln -s /opt/ibm /liberty \\\n && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n && mkdir -p /config/configDropins/defaults \\\n && mkdir -p /config/configDropins/overrides \\\n && chown -R 1001:0 /config \\\n && chmod -R g+rw /config \\\n && chown -R 1001:0 /opt/ibm/helpers \\\n && chmod -R g+rwx /opt/ibm/helpers \\\n && chown -R 1001:0 /opt/ibm/fixes \\\n && chmod -R g+rwx /opt/ibm/fixes \\\n && chown -R 1001:0 /opt/ibm/wlp/usr \\\n && chmod -R g+rw /opt/ibm/wlp/usr \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rw /opt/ibm/wlp/output \\\n && chown -R 1001:0 /logs \\\n && chmod -R g+rw /logs \\\n && chown -R 1001:0 /etc/wlp \\\n && chmod -R g+rw /etc/wlp \\\n && chown -R 1001:0 /home/default \\\n && chmod -R g+rw /home/default\n#  These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=\"/tmp/.rnd\" \\\n    IBM_JAVA_OPTIONS=\"-Xshareclasses:name=liberty,nonfatal,cacheDir=/output/.classCache/ ${IBM_JAVA_OPTIONS}\"\nUSER 1001\nEXPOSE 9080/tcp 9443/tcp\nENV KEYSTORE_REQUIRED=\"true\"\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n","originalDockerfileUglifiedHash":"68cbef662c75bcc3c3156d472d0b5f71","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b0429a6bbc3d8050431bb3981f7edd3c0df5928a.dockerfile"}