{"seed":3022712747,"processedDockerfileHash":"25d2197d00c9451c3ebcd5783e59c18d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   SciDB 14.3.0.7383\n#\n#   VERSION 1.0\n#\n#\n#\n#\n#\n#\n#  PORT MAPPING\n#  SERVICE\t\tDEFAULT\t\tMAPPED\n#  ssh \t\t\t22\t\t\t49901\n#  Postgresql \t5432\t\t49902\n#  shim\t\t\t8080\t\t49903\n#  shim\t\t\t8083s\t\t49904\n#  SciDB\t\t\t1239\t\t49910\nFROM ubuntu:12.04\nMAINTAINER Alber Sanchez\n#   install\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends openssh-server sudo wget gdebi gcc libc-dev-bin libc6-dev libgomp1 libssl-dev linux-libc-dev zlib1g-dev nano gedit postgresql-8.4 dialog curl libcurl3-dev sshpass --fix-missing -y --force-yes\n#   Set environment\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV SCIDB_VER=\"14.3\"\nENV PATH=\"$PATH:/opt/scidb/$SCIDB_VER/bin:/opt/scidb/$SCIDB_VER/share/scidb\"\nENV LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/opt/scidb/$SCIDB_VER/lib:/opt/scidb/$SCIDB_VER/3rdparty/boost/lib\"\nRUN env\n#   Configure users\nRUN useradd --home /home/scidb --create-home --uid 1005 --group sudo --shell /bin/bash scidb\nRUN echo 'root:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'postgres:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'scidb:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'xxxx.xxxx.xxxx' >> /home/scidb/pass.txt\nRUN chown scidb:scidb /home/scidb/pass.txt\nRUN mkdir /home/scidb/data\nRUN mkdir /home/scidb/catalog\nRUN chown scidb:scidb /home/scidb/data\nRUN chown scidb:scidb /home/scidb/catalog\n#   install SCIDB & R\nRUN echo 'deb http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo 'deb-src http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo \"deb http://cran.r-project.org/bin/linux/ubuntu precise/\" >> /etc/apt/sources.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN wget -O- http://downloads.paradigm4.com/key | sudo apt-key add -\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends scidb-14.3-all-coord r-base r-cran-spatial -y --force-yes\n#   Install SHIM\nRUN wget http://paradigm4.github.io/shim/shim_14.3-2_amd64.deb\nRUN yes | gdebi -q shim_14.3-2_amd64.deb\nRUN rm /var/lib/shim/conf\nCOPY conf /var/lib/shim/conf\nRUN chown root:root /var/lib/shim/conf\nRUN rm shim_14.3-2_amd64.deb\n#   Configure SSH\nRUN mkdir /var/run/sshd\nRUN sed -i 's/22/49901/g' /etc/ssh/sshd_config\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config\n#   Configure Postgres \nRUN echo 'host all all 255.255.0.0/16 md5' >> /etc/postgresql/8.4/main/pg_hba.conf\nRUN sed -i 's/5432/49902/g' /etc/postgresql/8.4/main/postgresql.conf\n#   Configure SciDB\nCOPY config.ini /opt/scidb/14.3/etc/config.ini\nCOPY containerSetup.sh /home/root/containerSetup.sh\nCOPY iquery.conf /home/root/.config/scidb/iquery.conf\nCOPY iquery.conf /home/scidb/.config/scidb/iquery.conf\nCOPY startScidb.sh /home/scidb/startScidb.sh\nCOPY stopScidb.sh /home/scidb/stopScidb.sh\nCOPY .pam_environment /home/scidb/.pam_environment\nRUN chown root:root /opt/scidb/14.3/etc/config.ini\nRUN chown root:root /home/root/.config/scidb/iquery.conf\nRUN chown scidb:scidb /home/scidb/.config/scidb/iquery.conf\nRUN chmod +x /home/scidb/startScidb.sh /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/startScidb.sh\nRUN chown scidb:scidb /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/.pam_environment\n#   Restarting services\nRUN stop ssh\nRUN start ssh\nRUN /etc/init.d/postgresql restart\nRUN /etc/init.d/shimsvc qqstart\nEXPOSE 49901/tcp\nEXPOSE 49903/tcp\nEXPOSE 49904/tcp\nCMD [\"/usr/sbin/sshd\", \"-D\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  SciDB 14.3.0.7383\n#\n#  VERSION 1.0\n#\n#\n#\n#\n#\n#\n# PORT MAPPING\n# SERVICE\t\tDEFAULT\t\tMAPPED\n# ssh \t\t\t22\t\t\t49901\n# Postgresql \t5432\t\t49902\n# shim\t\t\t8080\t\t49903\n# shim\t\t\t8083s\t\t49904\n# SciDB\t\t\t1239\t\t49910\nFROM ubuntu:12.04\nMAINTAINER Alber Sanchez\n#  install\nRUN apt-get update -qq \\\n && apt-get install openssh-server sudo wget gdebi gcc libc-dev-bin libc6-dev libgomp1 libssl-dev linux-libc-dev zlib1g-dev nano gedit postgresql-8.4 dialog curl libcurl3-dev sshpass --fix-missing -y --force-yes\n#  Set environment\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV SCIDB_VER=\"14.3\"\nENV PATH=\"$PATH:/opt/scidb/$SCIDB_VER/bin:/opt/scidb/$SCIDB_VER/share/scidb\"\nENV LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/opt/scidb/$SCIDB_VER/lib:/opt/scidb/$SCIDB_VER/3rdparty/boost/lib\"\nRUN env\n#  Configure users\nRUN useradd --home /home/scidb --create-home --uid 1005 --group sudo --shell /bin/bash scidb\nRUN echo 'root:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'postgres:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'scidb:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'xxxx.xxxx.xxxx' >> /home/scidb/pass.txt\nRUN chown scidb:scidb /home/scidb/pass.txt\nRUN mkdir /home/scidb/data\nRUN mkdir /home/scidb/catalog\nRUN chown scidb:scidb /home/scidb/data\nRUN chown scidb:scidb /home/scidb/catalog\n#  install SCIDB & R\nRUN echo 'deb http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo 'deb-src http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo \"deb http://cran.r-project.org/bin/linux/ubuntu precise/\" >> /etc/apt/sources.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN wget -O- http://downloads.paradigm4.com/key | sudo apt-key add -\nRUN apt-get update -qq \\\n && apt-get install scidb-14.3-all-coord r-base r-cran-spatial -y --force-yes\n#  Install SHIM\nRUN wget http://paradigm4.github.io/shim/shim_14.3-2_amd64.deb\nRUN yes | gdebi -q shim_14.3-2_amd64.deb\nRUN rm /var/lib/shim/conf\nADD conf /var/lib/shim/conf\nRUN chown root:root /var/lib/shim/conf\nRUN rm shim_14.3-2_amd64.deb\n#  Configure SSH\nRUN mkdir /var/run/sshd\nRUN sed -i 's/22/49901/g' /etc/ssh/sshd_config\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config\n#  Configure Postgres \nRUN echo 'host all all 255.255.0.0/16 md5' >> /etc/postgresql/8.4/main/pg_hba.conf\nRUN sed -i 's/5432/49902/g' /etc/postgresql/8.4/main/postgresql.conf\n#  Configure SciDB\nADD config.ini /opt/scidb/14.3/etc/config.ini\nADD containerSetup.sh /home/root/containerSetup.sh\nADD iquery.conf /home/root/.config/scidb/iquery.conf\nADD iquery.conf /home/scidb/.config/scidb/iquery.conf\nADD startScidb.sh /home/scidb/startScidb.sh\nADD stopScidb.sh /home/scidb/stopScidb.sh\nADD .pam_environment /home/scidb/.pam_environment\nRUN chown root:root /opt/scidb/14.3/etc/config.ini\nRUN chown root:root /home/root/.config/scidb/iquery.conf\nRUN chown scidb:scidb /home/scidb/.config/scidb/iquery.conf\nRUN chmod +x /home/scidb/startScidb.sh /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/startScidb.sh\nRUN chown scidb:scidb /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/.pam_environment\n#  Restarting services\nRUN stop ssh\nRUN start ssh\nRUN /etc/init.d/postgresql restart\nRUN /etc/init.d/shimsvc qqstart\nEXPOSE 49901/tcp\nEXPOSE 49903/tcp\nEXPOSE 49904/tcp\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n","injectedSmells":[],"originalDockerfileHash":"45740bac4704ae9e0e14bd31b42aefab","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   SciDB 14.3.0.7383\n#\n#   VERSION 1.0\n#\n#\n#\n#\n#\n#\n#  PORT MAPPING\n#  SERVICE\t\tDEFAULT\t\tMAPPED\n#  ssh \t\t\t22\t\t\t49901\n#  Postgresql \t5432\t\t49902\n#  shim\t\t\t8080\t\t49903\n#  shim\t\t\t8083s\t\t49904\n#  SciDB\t\t\t1239\t\t49910\nFROM ubuntu:12.04\nMAINTAINER Alber Sanchez\n#   install\nRUN apt-get update -qq \\\n && apt-get install openssh-server sudo wget gdebi gcc libc-dev-bin libc6-dev libgomp1 libssl-dev linux-libc-dev zlib1g-dev nano gedit postgresql-8.4 dialog curl libcurl3-dev sshpass --fix-missing -y --force-yes\n#   Set environment\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV SCIDB_VER=\"14.3\"\nENV PATH=\"$PATH:/opt/scidb/$SCIDB_VER/bin:/opt/scidb/$SCIDB_VER/share/scidb\"\nENV LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/opt/scidb/$SCIDB_VER/lib:/opt/scidb/$SCIDB_VER/3rdparty/boost/lib\"\nRUN env\n#   Configure users\nRUN useradd --home /home/scidb --create-home --uid 1005 --group sudo --shell /bin/bash scidb\nRUN echo 'root:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'postgres:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'scidb:xxxx.xxxx.xxxx' | chpasswd\nRUN echo 'xxxx.xxxx.xxxx' >> /home/scidb/pass.txt\nRUN chown scidb:scidb /home/scidb/pass.txt\nRUN mkdir /home/scidb/data\nRUN mkdir /home/scidb/catalog\nRUN chown scidb:scidb /home/scidb/data\nRUN chown scidb:scidb /home/scidb/catalog\n#   install SCIDB & R\nRUN echo 'deb http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo 'deb-src http://downloads.paradigm4.com/ ubuntu12.04/14.3/' >> /etc/apt/sources.list.d/scidb.list\nRUN echo \"deb http://cran.r-project.org/bin/linux/ubuntu precise/\" >> /etc/apt/sources.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN wget -O- http://downloads.paradigm4.com/key | sudo apt-key add -\nRUN apt-get update -qq \\\n && apt-get install scidb-14.3-all-coord r-base r-cran-spatial -y --force-yes\n#   Install SHIM\nRUN wget http://paradigm4.github.io/shim/shim_14.3-2_amd64.deb\nRUN yes | gdebi -q shim_14.3-2_amd64.deb\nRUN rm /var/lib/shim/conf\nADD conf /var/lib/shim/conf\nRUN chown root:root /var/lib/shim/conf\nRUN rm shim_14.3-2_amd64.deb\n#   Configure SSH\nRUN mkdir /var/run/sshd\nRUN sed -i 's/22/49901/g' /etc/ssh/sshd_config\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config\n#   Configure Postgres \nRUN echo 'host all all 255.255.0.0/16 md5' >> /etc/postgresql/8.4/main/pg_hba.conf\nRUN sed -i 's/5432/49902/g' /etc/postgresql/8.4/main/postgresql.conf\n#   Configure SciDB\nADD config.ini /opt/scidb/14.3/etc/config.ini\nADD containerSetup.sh /home/root/containerSetup.sh\nADD iquery.conf /home/root/.config/scidb/iquery.conf\nADD iquery.conf /home/scidb/.config/scidb/iquery.conf\nADD startScidb.sh /home/scidb/startScidb.sh\nADD stopScidb.sh /home/scidb/stopScidb.sh\nADD .pam_environment /home/scidb/.pam_environment\nRUN chown root:root /opt/scidb/14.3/etc/config.ini\nRUN chown root:root /home/root/.config/scidb/iquery.conf\nRUN chown scidb:scidb /home/scidb/.config/scidb/iquery.conf\nRUN chmod +x /home/scidb/startScidb.sh /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/startScidb.sh\nRUN chown scidb:scidb /home/scidb/stopScidb.sh\nRUN chown scidb:scidb /home/scidb/.pam_environment\n#   Restarting services\nRUN stop ssh\nRUN start ssh\nRUN /etc/init.d/postgresql restart\nRUN /etc/init.d/shimsvc qqstart\nEXPOSE 49901/tcp\nEXPOSE 49903/tcp\nEXPOSE 49904/tcp\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n","originalDockerfileUglifiedHash":"3899dcfada78433be9a93d79a13c6be6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d08c9c78fe88fbcc1464df35db868d1e8e40ae70.dockerfile"}