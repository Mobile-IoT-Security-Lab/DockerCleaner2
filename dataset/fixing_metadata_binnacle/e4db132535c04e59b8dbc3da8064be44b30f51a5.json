{"seed":4069070624,"processedDockerfileHash":"7eeaa53d6c4aa3a375f9c5b885ba933e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-gem","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Set up the basics \n#   Leverage Kali Base Image\nFROM kalilinux/kali-linux-docker:latest\n#   Update off the bat. Don't dist-upgrade with docker.\nRUN : \\\n && apt-get upgrade -y\n#   Install the Core\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends sudo=1.9.13p1-1ubuntu2 git=1:2.39.2-1ubuntu1 wget=1.21.3-1ubuntu1 curl=7.88.1-7ubuntu1 git=1:2.39.2-1ubuntu1 zip=3.0-13 ccze=0.2.1-7 byobu=5.133-1.1 zsh=5.9-4 golang=2:1.20~0ubuntu1 ufw=0.36.1-4.1 python-pip nikto=1:2.1.5-3.1 dotdotpwn jsql nmap=7.93+dfsg1-1 sqlmap=1.7.3-1 sqlninja thc-ipv6=3.8-1build1 hydra=9.4-1 dirb=2.22+dfsg-5 -y )\n#   Make Directory Structure\nRUN mkdir /usr/share/wordlists \\\n && mkdir -p /usr/share/tools/scripts/\n#   Pull Wordlists\nRUN git clone https://github.com/danielmiessler/SecLists /usr/share/wordlists/seclists\nRUN git clone https://github.com/danielmiessler/RobotsDisallowed /usr/share/wordlists/robotsdisallowed\nRUN cd /usr/share/wordlists/seclists/Passwords/Leaked-Databases \\\n && tar xvzf rockyou.txt.tar.gz\n#   Set up DNS Tooling\n#  ## Building Aquatone\nFROM ruby\nWORKDIR /\n#   Prepare\nRUN : \\\n && apt-get upgrade -y\n#   Install normal Packages needed\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends apt-utils=2.6.0 unzip=6.0-27ubuntu1 nodejs=18.13.0+dfsg1-1ubuntu2 wget=1.21.3-1ubuntu1 curl=7.88.1-7ubuntu1 jruby=9.3.9.0+ds-1 nano=7.2-1 screen=4.9.0-4 htop=3.2.2-1 openssl=3.0.8-1ubuntu1 git=1:2.39.2-1ubuntu1 -y -u )\n#   Install nodejs\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash -\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends nodejs=18.13.0+dfsg1-1ubuntu2 -y )\n#   Installing the packages needed to run Nightmare\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends xvfb=2:21.1.7-1ubuntu2 x11-xkb-utils=7.7+7 xfonts-100dpi=1:1.0.5 xfonts-75dpi=1:1.0.5 xfonts-scalable=1:1.0.3-1.3 xfonts-cyrillic=1:1.0.5 x11-apps=7.7+9 clang=1:15.0-56~exp2 libdbus-1-dev=1.14.4-1ubuntu1 libgtk2.0-dev=2.24.33-2ubuntu2 libnotify-dev=0.8.1-1 libgnome-keyring-dev libgconf2-dev=3.2.6-8ubuntu1 libasound2-dev=1.2.8-1build1 libcap-dev=1:2.66-3ubuntu2 libcups2-dev=2.4.2-1ubuntu4 libxtst-dev=2:1.2.3-1.1 libxss1=1:1.2.3-1build2 libnss3-dev=2:3.87.1-1 gcc-multilib=4:12.2.0-3ubuntu1 g++-multilib=4:12.2.0-3ubuntu1 -y )\n#   Use aq domain.com to automated all options of aquatone.\nRUN wget \"https://gist.githubusercontent.com/random-robbie/beae1991e9ad139c6168c385d8a31f7d/raw/\" -O /bin/aq\nRUN chmod 777 /bin/aq\n#  install aquatone\nRUN gem install aquatone --version 0.5.0\n#   Clone down other DNS tooling\nRUN mkdir -p /usr/share/tools/DNS\nRUN git clone https://github.com/lorenzog/dns-parallel-prober /usr/share/tools/DNS/dnsq\nRUN git clone https://github.com/aboul3la/Sublist3r /usr/share/tools/DNS/sublist3r\nRUN git clone https://github.com/guelfoweb/knock /usr/share/tools/DNS/knock\nRUN git clone https://github.com/anshumanbh/brutesubs /usr/share/tools/DNS/brutesubs\nRUN git clone https://github.com/jhaddix/domain /usr/share/tools/DNS/domain\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends fierce=1.5.0-1 -y ) || true\n#   CMS Tooling\nRUN mkdir -p /usr/share/tools/CMS\nRUN git clone https://github.com/droope/droopescan /usr/share/tools/CMS/droopscan\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends wpscan -y ) || true\nRUN git clone https://github.com/Dionach/CMSmap /usr/share/tools/CMS/cmsmap\n#   Directory Busting\nRUN mkdir -p /usr/share/tools/DirBusting\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends dirb=2.22+dfsg-5 -y ) || true\nRUN git clone https://github.com/OJ/gobuster /usr/share/tools/DirBusting/gobuster\nRUN git clone https://github.com/henshin/filebuster /usr/share/tools/DirBusting/filebuster\n#   Git Recon\nRUN mkdir /usr/share/tools/gitint\nRUN git clone https://github.com/libcrack/gitrecon /usr/share/tools/gitint/gitrecon\nRUN git clone https://github.com/dxa4481/truffleHog /usr/share/tools/gitint/trufflehog\nRUN git clone https://github.com/michenriksen/gitrob /usr/share/tools/gitint/gitrob\n#   OSINT Tooling \nRUN mkdir -p /usr/share/tools/OSINT\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends recon-ng=5.1.2-1 -y ) || true\nRUN git clone https://github.com/smicallef/spiderfoot /usr/share/tools/OSINT/spiderfoot\nRUN git clone https://github.com/ZephrFish/GoogD0rker /usr/share/tools/OSINT/googd0rk\nRUN git clone https://github.com/GerbenJavado/LinkFinder /usr/share/tools/OSINT/linkfinder\n#   HTTP Analysis\nRUN mkdir /usr/share/tools/HTTPAnal\nRUN git clone https://github.com/ChrisTruncer/EyeWitness /usr/share/tools/HTTPAnal/eyewitness\nRUN git clone https://github.com/robertdavidgraham/masscan /usr/share/tools/HTTPAnal/masscan\n#   Optional\n#   BBF Tooling (There will be some dupes SORRY!\nRUN mkdir -p /usr/share/tools/BBF \\\n && cd /usr/share/tools/BBF \\\n && for y in $( wget https://bugbountyforum.com/tools/ \\\n && grep \"/tools/\" index.html | cut -d \"=\" -f 2 | cut -d \"/\" -f 2,3 | grep -v \">\" ;); do wget https://bugbountyforum.com/$y ; done \\\n && for x in $( ls ;); do grep \"href=\" $x | cut -d \"=\" -f 2 | grep github.com | cut -d \"/\" -f 3,4,5 | cut -d \" \" -f 1 | sed -e 's/^\"//' -e 's/\"$//' | grep -v \"gist\" >> Repos.txt; done \\\n && for a in $( cat Repos.txt ;); do git clone https://$a ; done \\\n && find . -maxdepth 1 -type f -delete\nRUN echo \"That's all folks! You're good to go hack the planet!\"\n#   set to bash so you can set keys before running aquatone.\nENTRYPOINT [\"/bin/bash\"]\n#    Set working directory\nWORKDIR /root/\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Set up the basics \n#  Leverage Kali Base Image\nFROM kalilinux/kali-linux-docker:latest\n#  Update off the bat. Don't dist-upgrade with docker.\nRUN apt-get update \\\n && apt-get upgrade -y\n#  Install the Core\nRUN apt-get update \\\n && apt-get install sudo git wget curl git zip ccze byobu zsh golang ufw python-pip nikto dotdotpwn jsql nmap sqlmap sqlninja thc-ipv6 hydra dirb -y\n#  Make Directory Structure\nRUN mkdir /usr/share/wordlists \\\n && mkdir -p /usr/share/tools/scripts/\n#  Pull Wordlists\nRUN git clone https://github.com/danielmiessler/SecLists /usr/share/wordlists/seclists\nRUN git clone https://github.com/danielmiessler/RobotsDisallowed /usr/share/wordlists/robotsdisallowed\nRUN cd /usr/share/wordlists/seclists/Passwords/Leaked-Databases \\\n && tar xvzf rockyou.txt.tar.gz\n#  Set up DNS Tooling\n# ## Building Aquatone\nFROM ruby\nWORKDIR /\n#  Prepare\nRUN apt-get update \\\n && apt-get upgrade -y\n#  Install normal Packages needed\nRUN apt-get update \\\n && apt-get install apt-utils unzip nodejs wget curl jruby nano screen htop openssl git -y -u\n#  Install nodejs\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash -\nRUN apt-get update \\\n && apt-get install nodejs -y\n#  Installing the packages needed to run Nightmare\nRUN apt-get update \\\n && apt-get install xvfb x11-xkb-utils xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic x11-apps clang libdbus-1-dev libgtk2.0-dev libnotify-dev libgnome-keyring-dev libgconf2-dev libasound2-dev libcap-dev libcups2-dev libxtst-dev libxss1 libnss3-dev gcc-multilib g++-multilib -y\n#  Use aq domain.com to automated all options of aquatone.\nRUN wget \"https://gist.githubusercontent.com/random-robbie/beae1991e9ad139c6168c385d8a31f7d/raw/\" -O /bin/aq\nRUN chmod 777 /bin/aq\n# install aquatone\nRUN gem install aquatone\n#  Clone down other DNS tooling\nRUN mkdir -p /usr/share/tools/DNS\nRUN git clone https://github.com/lorenzog/dns-parallel-prober /usr/share/tools/DNS/dnsq\nRUN git clone https://github.com/aboul3la/Sublist3r /usr/share/tools/DNS/sublist3r\nRUN git clone https://github.com/guelfoweb/knock /usr/share/tools/DNS/knock\nRUN git clone https://github.com/anshumanbh/brutesubs /usr/share/tools/DNS/brutesubs\nRUN git clone https://github.com/jhaddix/domain /usr/share/tools/DNS/domain\nRUN apt-get update \\\n && apt-get install fierce -y || true\n#  CMS Tooling\nRUN mkdir -p /usr/share/tools/CMS\nRUN git clone https://github.com/droope/droopescan /usr/share/tools/CMS/droopscan\nRUN apt-get update \\\n && apt-get install wpscan -y || true\nRUN git clone https://github.com/Dionach/CMSmap /usr/share/tools/CMS/cmsmap\n#  Directory Busting\nRUN mkdir -p /usr/share/tools/DirBusting\nRUN apt-get update \\\n && apt-get install dirb -y || true\nRUN git clone https://github.com/OJ/gobuster /usr/share/tools/DirBusting/gobuster\nRUN git clone https://github.com/henshin/filebuster /usr/share/tools/DirBusting/filebuster\n#  Git Recon\nRUN mkdir /usr/share/tools/gitint\nRUN git clone https://github.com/libcrack/gitrecon /usr/share/tools/gitint/gitrecon\nRUN git clone https://github.com/dxa4481/truffleHog /usr/share/tools/gitint/trufflehog\nRUN git clone https://github.com/michenriksen/gitrob /usr/share/tools/gitint/gitrob\n#  OSINT Tooling \nRUN mkdir -p /usr/share/tools/OSINT\nRUN apt-get update \\\n && apt-get install recon-ng -y || true\nRUN git clone https://github.com/smicallef/spiderfoot /usr/share/tools/OSINT/spiderfoot\nRUN git clone https://github.com/ZephrFish/GoogD0rker /usr/share/tools/OSINT/googd0rk\nRUN git clone https://github.com/GerbenJavado/LinkFinder /usr/share/tools/OSINT/linkfinder\n#  HTTP Analysis\nRUN mkdir /usr/share/tools/HTTPAnal\nRUN git clone https://github.com/ChrisTruncer/EyeWitness /usr/share/tools/HTTPAnal/eyewitness\nRUN git clone https://github.com/robertdavidgraham/masscan /usr/share/tools/HTTPAnal/masscan\n#  Optional\n#  BBF Tooling (There will be some dupes SORRY!\nRUN mkdir -p /usr/share/tools/BBF \\\n && cd /usr/share/tools/BBF \\\n && for y in $( wget https://bugbountyforum.com/tools/ \\\n && grep \"/tools/\" index.html | cut -d \"=\" -f 2 | cut -d \"/\" -f 2,3 | grep -v \">\" ;); do wget https://bugbountyforum.com/$y ; done \\\n && for x in $( ls ;); do grep \"href=\" $x | cut -d \"=\" -f 2 | grep github.com | cut -d \"/\" -f 3,4,5 | cut -d \" \" -f 1 | sed -e 's/^\"//' -e 's/\"$//' | grep -v \"gist\" >> Repos.txt; done \\\n && for a in $( cat Repos.txt ;); do git clone https://$a ; done \\\n && find . -maxdepth 1 -type f -delete\nRUN echo \"That's all folks! You're good to go hack the planet!\"\n#  set to bash so you can set keys before running aquatone.\nENTRYPOINT [\"/bin/bash\"]\n#   Set working directory\nWORKDIR /root/\n","injectedSmells":[],"originalDockerfileHash":"de64f2c74b91f2990d5612a3f2891720","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Set up the basics \n#   Leverage Kali Base Image\nFROM kalilinux/kali-linux-docker:latest\n#   Update off the bat. Don't dist-upgrade with docker.\nRUN apt-get update \\\n && apt-get upgrade -y\n#   Install the Core\nRUN apt-get update \\\n && apt-get install sudo git wget curl git zip ccze byobu zsh golang ufw python-pip nikto dotdotpwn jsql nmap sqlmap sqlninja thc-ipv6 hydra dirb -y\n#   Make Directory Structure\nRUN mkdir /usr/share/wordlists \\\n && mkdir -p /usr/share/tools/scripts/\n#   Pull Wordlists\nRUN git clone https://github.com/danielmiessler/SecLists /usr/share/wordlists/seclists\nRUN git clone https://github.com/danielmiessler/RobotsDisallowed /usr/share/wordlists/robotsdisallowed\nRUN cd /usr/share/wordlists/seclists/Passwords/Leaked-Databases \\\n && tar xvzf rockyou.txt.tar.gz\n#   Set up DNS Tooling\n#  ## Building Aquatone\nFROM ruby\nWORKDIR /\n#   Prepare\nRUN apt-get update \\\n && apt-get upgrade -y\n#   Install normal Packages needed\nRUN apt-get update \\\n && apt-get install apt-utils unzip nodejs wget curl jruby nano screen htop openssl git -y -u\n#   Install nodejs\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash -\nRUN apt-get update \\\n && apt-get install nodejs -y\n#   Installing the packages needed to run Nightmare\nRUN apt-get update \\\n && apt-get install xvfb x11-xkb-utils xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic x11-apps clang libdbus-1-dev libgtk2.0-dev libnotify-dev libgnome-keyring-dev libgconf2-dev libasound2-dev libcap-dev libcups2-dev libxtst-dev libxss1 libnss3-dev gcc-multilib g++-multilib -y\n#   Use aq domain.com to automated all options of aquatone.\nRUN wget \"https://gist.githubusercontent.com/random-robbie/beae1991e9ad139c6168c385d8a31f7d/raw/\" -O /bin/aq\nRUN chmod 777 /bin/aq\n#  install aquatone\nRUN gem install aquatone\n#   Clone down other DNS tooling\nRUN mkdir -p /usr/share/tools/DNS\nRUN git clone https://github.com/lorenzog/dns-parallel-prober /usr/share/tools/DNS/dnsq\nRUN git clone https://github.com/aboul3la/Sublist3r /usr/share/tools/DNS/sublist3r\nRUN git clone https://github.com/guelfoweb/knock /usr/share/tools/DNS/knock\nRUN git clone https://github.com/anshumanbh/brutesubs /usr/share/tools/DNS/brutesubs\nRUN git clone https://github.com/jhaddix/domain /usr/share/tools/DNS/domain\nRUN apt-get update \\\n && apt-get install fierce -y || true\n#   CMS Tooling\nRUN mkdir -p /usr/share/tools/CMS\nRUN git clone https://github.com/droope/droopescan /usr/share/tools/CMS/droopscan\nRUN apt-get update \\\n && apt-get install wpscan -y || true\nRUN git clone https://github.com/Dionach/CMSmap /usr/share/tools/CMS/cmsmap\n#   Directory Busting\nRUN mkdir -p /usr/share/tools/DirBusting\nRUN apt-get update \\\n && apt-get install dirb -y || true\nRUN git clone https://github.com/OJ/gobuster /usr/share/tools/DirBusting/gobuster\nRUN git clone https://github.com/henshin/filebuster /usr/share/tools/DirBusting/filebuster\n#   Git Recon\nRUN mkdir /usr/share/tools/gitint\nRUN git clone https://github.com/libcrack/gitrecon /usr/share/tools/gitint/gitrecon\nRUN git clone https://github.com/dxa4481/truffleHog /usr/share/tools/gitint/trufflehog\nRUN git clone https://github.com/michenriksen/gitrob /usr/share/tools/gitint/gitrob\n#   OSINT Tooling \nRUN mkdir -p /usr/share/tools/OSINT\nRUN apt-get update \\\n && apt-get install recon-ng -y || true\nRUN git clone https://github.com/smicallef/spiderfoot /usr/share/tools/OSINT/spiderfoot\nRUN git clone https://github.com/ZephrFish/GoogD0rker /usr/share/tools/OSINT/googd0rk\nRUN git clone https://github.com/GerbenJavado/LinkFinder /usr/share/tools/OSINT/linkfinder\n#   HTTP Analysis\nRUN mkdir /usr/share/tools/HTTPAnal\nRUN git clone https://github.com/ChrisTruncer/EyeWitness /usr/share/tools/HTTPAnal/eyewitness\nRUN git clone https://github.com/robertdavidgraham/masscan /usr/share/tools/HTTPAnal/masscan\n#   Optional\n#   BBF Tooling (There will be some dupes SORRY!\nRUN mkdir -p /usr/share/tools/BBF \\\n && cd /usr/share/tools/BBF \\\n && for y in $( wget https://bugbountyforum.com/tools/ \\\n && grep \"/tools/\" index.html | cut -d \"=\" -f 2 | cut -d \"/\" -f 2,3 | grep -v \">\" ;); do wget https://bugbountyforum.com/$y ; done \\\n && for x in $( ls ;); do grep \"href=\" $x | cut -d \"=\" -f 2 | grep github.com | cut -d \"/\" -f 3,4,5 | cut -d \" \" -f 1 | sed -e 's/^\"//' -e 's/\"$//' | grep -v \"gist\" >> Repos.txt; done \\\n && for a in $( cat Repos.txt ;); do git clone https://$a ; done \\\n && find . -maxdepth 1 -type f -delete\nRUN echo \"That's all folks! You're good to go hack the planet!\"\n#   set to bash so you can set keys before running aquatone.\nENTRYPOINT [\"/bin/bash\"]\n#    Set working directory\nWORKDIR /root/\n","originalDockerfileUglifiedHash":"12d5e041130489cdbcc28c02d4b1b6d9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e4db132535c04e59b8dbc3da8064be44b30f51a5.dockerfile"}