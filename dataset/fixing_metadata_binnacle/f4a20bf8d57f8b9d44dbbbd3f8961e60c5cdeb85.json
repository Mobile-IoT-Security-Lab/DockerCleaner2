{"seed":2606263513,"processedDockerfileHash":"5a40cf283c8b38cbe69ea61476310592","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ##########################################################\n#   Gargamelle WEB\n#  ##########################################################\n#  Build an image starting with debian:stretch image\n#   wich contains all the source code of the app\nFROM debian:stretch\nMAINTAINER ISCPIF <gargantext@iscpif.fr>\nUSER root\n#  ## Update and install base dependencies\nRUN echo \"############ DEBIAN LIBS ###############\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends apt-utils=1.4.11 ca-certificates=20200601~deb9u2 locales=2.24-11+deb9u4 sudo=1.8.19p1-2.1+deb9u3 aptitude=0.8.7-1 gcc=4:6.3.0-4 g++=4:6.3.0-4 wget=1.18-5+deb9u3 git=1:2.11.0-3+deb9u7 vim=2:8.0.0197-4+deb9u7 build-essential=12.3 make=4.1-9.1 curl=7.52.1-5+deb9u16 -y )\n#      postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6 \\\n#      postgresql-server-dev-9.6 libpq-dev libxml2                  \\\n#      postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6\n#   Install Stack\n#  ## Configure timezone and locale\nRUN echo \"########### LOCALES & TZ #################\"\nRUN echo \"Europe/Paris\" > /etc/timezone\nENV TZ=\"\\\"Europe/Paris\\\"\"\nRUN sed -i -e 's/# en_GB.UTF-8 UTF-8/en_GB.UTF-8 UTF-8/' /etc/locale.gen \\\n && sed -i -e 's/# fr_FR.UTF-8 UTF-8/fr_FR.UTF-8 UTF-8/' /etc/locale.gen \\\n && dpkg-reconfigure --frontend=noninteractive locales \\\n && echo 'LANG=\"fr_FR.UTF-8\"' > /etc/default/locale\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR.UTF-8\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n#  ## Install main dependencies and python packages based on Debian distrib\nRUN echo \"############# PYTHON DEPENDENCIES ###############\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends libxml2-dev=2.9.4+dfsg1-2.2+deb9u7 xml-core=0.17 libgfortran-6-dev=6.3.0-18+deb9u1 libpq-dev=9.6.24-0+deb9u1 python3.5=3.5.3-1+deb9u5 python3-dev=3.5.3-1 python3-six=1.10.0-3 python3-numpy=1:1.12.1-3 python3-setuptools=33.1.1-1 python3-numexpr=2.6.1-4 python3-pip=9.0.1-2+deb9u2 libxml2-dev=2.9.4+dfsg1-2.2+deb9u7 libxslt-dev libxslt1-dev=1.1.29-2.1+deb9u2 zlib1g-dev=1:1.2.8.dfsg-5+deb9u1 -y )\n#   UPDATE AND CLEAN\nRUN : \\\n && apt-get autoclean \\\n && rm -rf /var/lib/apt/lists/*\n#  NB: removing /var/lib will avoid to significantly fill up your /var/ folder on your native system\n#  #######################################################################\n#  ## PYTHON ENVIRONNEMENT (as ROOT)\n#  #######################################################################\nRUN adduser --disabled-password --gecos \"\" notebooks\nRUN pip3 install virtualenv\nRUN virtualenv /env_3-5\nRUN echo 'alias venv=\"source /env_3-5/bin/activate\"' >> ~/.bashrc\n#   CONFIG FILES\nCOPY requirements.txt /\n#  ADD psql_configure.sh /\nCOPY django_configure.sh /\nRUN . /env_3-5/bin/activate \\\n && pip3 install -r requirements.txt \\\n && pip3 install git+https://github.com/zzzeek/sqlalchemy.git@rel_1_1 \\\n && python3 -m nltk.downloader averaged_perceptron_tagger -d /usr/local/share/nltk_data\n#  RUN ./psql_configure.sh\n#  RUN ./django_configure.sh\nRUN chown notebooks:notebooks -R /env_3-5\n#  #######################################################################\n#  ## POSTGRESQL DATA (as ROOT)\n#  #######################################################################\n#  RUN sed -iP \"s%^data_directory.*%data_directory = \\'\\/srv\\/gargandata\\'%\" /etc/postgresql/9.5/main/postgresql.conf\n#  RUN echo \"host all  all    0.0.0.0/0  md5\" >> /etc/postgresql/9.5/main/pg_hba.conf\n#  RUN echo \"listen_addresses='*'\" >> /etc/postgresql/9.5/main/postgresql.conf\nEXPOSE 5432/tcp 8899/tcp\nVOLUME [\"/srv/\",\"/home/notebooks/\"]\n#  #######################################################################\n#  ## Notebook IHaskell and IPYTHON ENVIRONNEMENT\n#  #######################################################################\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends libtinfo-dev=6.0+20161126-1+deb9u2 libzmq3-dev=4.2.1-4+deb9u4 libcairo2-dev=1.14.8-1+deb9u1 libpango1.0-dev=1.40.5-1 libmagic-dev=1:5.30-1+deb9u3 libblas-dev=3.7.0-2 liblapack-dev=3.7.0-2 -y )\n#  USER notebooks\n#\n#  RUN cd  /home/notebooks                              \\\n#      &&  curl -sSL https://get.haskellstack.org/ | sh  \\\n#      &&  stack setup                                    \\\n#      &&  git clone https://github.com/gibiansky/IHaskell \\\n#      &&  . /env_3-5/bin/activate                          \\\n#      &&  cd IHaskell                                       \\\n#      &&  stack install gtk2hs-buildtools                    \\\n#      &&  stack install --fast                                \\\n#      &&  /root/.local/bin/ihaskell install --stack\n#\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ##########################################################\n#  Gargamelle WEB\n# ##########################################################\n# Build an image starting with debian:stretch image\n#  wich contains all the source code of the app\nFROM debian:stretch\nMAINTAINER ISCPIF <gargantext@iscpif.fr>\nUSER root\n# ## Update and install base dependencies\nRUN echo \"############ DEBIAN LIBS ###############\"\nRUN apt-get update \\\n && apt-get install apt-utils ca-certificates locales sudo aptitude gcc g++ wget git vim build-essential make curl -y\n#     postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6 \\\n#     postgresql-server-dev-9.6 libpq-dev libxml2                  \\\n#     postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6\n#  Install Stack\n# ## Configure timezone and locale\nRUN echo \"########### LOCALES & TZ #################\"\nRUN echo \"Europe/Paris\" > /etc/timezone\nENV TZ=\"\\\"Europe/Paris\\\"\"\nRUN sed -i -e 's/# en_GB.UTF-8 UTF-8/en_GB.UTF-8 UTF-8/' /etc/locale.gen \\\n && sed -i -e 's/# fr_FR.UTF-8 UTF-8/fr_FR.UTF-8 UTF-8/' /etc/locale.gen \\\n && dpkg-reconfigure --frontend=noninteractive locales \\\n && echo 'LANG=\"fr_FR.UTF-8\"' > /etc/default/locale\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR.UTF-8\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n# ## Install main dependencies and python packages based on Debian distrib\nRUN echo \"############# PYTHON DEPENDENCIES ###############\"\nRUN apt-get update \\\n && apt-get install libxml2-dev xml-core libgfortran-6-dev libpq-dev python3.5 python3-dev python3-six python3-numpy python3-setuptools python3-numexpr python3-pip libxml2-dev libxslt-dev libxslt1-dev zlib1g-dev -y\n#  UPDATE AND CLEAN\nRUN apt-get update \\\n && apt-get autoclean \\\n && rm -rf /var/lib/apt/lists/*\n# NB: removing /var/lib will avoid to significantly fill up your /var/ folder on your native system\n# #######################################################################\n# ## PYTHON ENVIRONNEMENT (as ROOT)\n# #######################################################################\nRUN adduser --disabled-password --gecos \"\" notebooks\nRUN pip3 install virtualenv\nRUN virtualenv /env_3-5\nRUN echo 'alias venv=\"source /env_3-5/bin/activate\"' >> ~/.bashrc\n#  CONFIG FILES\nADD requirements.txt /\n# ADD psql_configure.sh /\nADD django_configure.sh /\nRUN . /env_3-5/bin/activate \\\n && pip3 install -r requirements.txt \\\n && pip3 install git+https://github.com/zzzeek/sqlalchemy.git@rel_1_1 \\\n && python3 -m nltk.downloader averaged_perceptron_tagger -d /usr/local/share/nltk_data\n# RUN ./psql_configure.sh\n# RUN ./django_configure.sh\nRUN chown notebooks:notebooks -R /env_3-5\n# #######################################################################\n# ## POSTGRESQL DATA (as ROOT)\n# #######################################################################\n# RUN sed -iP \"s%^data_directory.*%data_directory = \\'\\/srv\\/gargandata\\'%\" /etc/postgresql/9.5/main/postgresql.conf\n# RUN echo \"host all  all    0.0.0.0/0  md5\" >> /etc/postgresql/9.5/main/pg_hba.conf\n# RUN echo \"listen_addresses='*'\" >> /etc/postgresql/9.5/main/postgresql.conf\nEXPOSE 5432/tcp 8899/tcp\nVOLUME [\"/srv/\",\"/home/notebooks/\"]\n# #######################################################################\n# ## Notebook IHaskell and IPYTHON ENVIRONNEMENT\n# #######################################################################\nRUN apt-get update \\\n && apt-get install libtinfo-dev libzmq3-dev libcairo2-dev libpango1.0-dev libmagic-dev libblas-dev liblapack-dev -y\n# USER notebooks\n#\n# RUN cd  /home/notebooks                              \\\n#     &&  curl -sSL https://get.haskellstack.org/ | sh  \\\n#     &&  stack setup                                    \\\n#     &&  git clone https://github.com/gibiansky/IHaskell \\\n#     &&  . /env_3-5/bin/activate                          \\\n#     &&  cd IHaskell                                       \\\n#     &&  stack install gtk2hs-buildtools                    \\\n#     &&  stack install --fast                                \\\n#     &&  /root/.local/bin/ihaskell install --stack\n#\n","injectedSmells":[],"originalDockerfileHash":"f91f4597d944329227d7e39b9b586cd9","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ##########################################################\n#   Gargamelle WEB\n#  ##########################################################\n#  Build an image starting with debian:stretch image\n#   wich contains all the source code of the app\nFROM debian:stretch\nMAINTAINER ISCPIF <gargantext@iscpif.fr>\nUSER root\n#  ## Update and install base dependencies\nRUN echo \"############ DEBIAN LIBS ###############\"\nRUN apt-get update \\\n && apt-get install apt-utils ca-certificates locales sudo aptitude gcc g++ wget git vim build-essential make curl -y\n#      postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6 \\\n#      postgresql-server-dev-9.6 libpq-dev libxml2                  \\\n#      postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6\n#   Install Stack\n#  ## Configure timezone and locale\nRUN echo \"########### LOCALES & TZ #################\"\nRUN echo \"Europe/Paris\" > /etc/timezone\nENV TZ=\"\\\"Europe/Paris\\\"\"\nRUN sed -i -e 's/# en_GB.UTF-8 UTF-8/en_GB.UTF-8 UTF-8/' /etc/locale.gen \\\n && sed -i -e 's/# fr_FR.UTF-8 UTF-8/fr_FR.UTF-8 UTF-8/' /etc/locale.gen \\\n && dpkg-reconfigure --frontend=noninteractive locales \\\n && echo 'LANG=\"fr_FR.UTF-8\"' > /etc/default/locale\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR.UTF-8\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n#  ## Install main dependencies and python packages based on Debian distrib\nRUN echo \"############# PYTHON DEPENDENCIES ###############\"\nRUN apt-get update \\\n && apt-get install libxml2-dev xml-core libgfortran-6-dev libpq-dev python3.5 python3-dev python3-six python3-numpy python3-setuptools python3-numexpr python3-pip libxml2-dev libxslt-dev libxslt1-dev zlib1g-dev -y\n#   UPDATE AND CLEAN\nRUN apt-get update \\\n && apt-get autoclean \\\n && rm -rf /var/lib/apt/lists/*\n#  NB: removing /var/lib will avoid to significantly fill up your /var/ folder on your native system\n#  #######################################################################\n#  ## PYTHON ENVIRONNEMENT (as ROOT)\n#  #######################################################################\nRUN adduser --disabled-password --gecos \"\" notebooks\nRUN pip3 install virtualenv\nRUN virtualenv /env_3-5\nRUN echo 'alias venv=\"source /env_3-5/bin/activate\"' >> ~/.bashrc\n#   CONFIG FILES\nADD requirements.txt /\n#  ADD psql_configure.sh /\nADD django_configure.sh /\nRUN . /env_3-5/bin/activate \\\n && pip3 install -r requirements.txt \\\n && pip3 install git+https://github.com/zzzeek/sqlalchemy.git@rel_1_1 \\\n && python3 -m nltk.downloader averaged_perceptron_tagger -d /usr/local/share/nltk_data\n#  RUN ./psql_configure.sh\n#  RUN ./django_configure.sh\nRUN chown notebooks:notebooks -R /env_3-5\n#  #######################################################################\n#  ## POSTGRESQL DATA (as ROOT)\n#  #######################################################################\n#  RUN sed -iP \"s%^data_directory.*%data_directory = \\'\\/srv\\/gargandata\\'%\" /etc/postgresql/9.5/main/postgresql.conf\n#  RUN echo \"host all  all    0.0.0.0/0  md5\" >> /etc/postgresql/9.5/main/pg_hba.conf\n#  RUN echo \"listen_addresses='*'\" >> /etc/postgresql/9.5/main/postgresql.conf\nEXPOSE 5432/tcp 8899/tcp\nVOLUME [\"/srv/\",\"/home/notebooks/\"]\n#  #######################################################################\n#  ## Notebook IHaskell and IPYTHON ENVIRONNEMENT\n#  #######################################################################\nRUN apt-get update \\\n && apt-get install libtinfo-dev libzmq3-dev libcairo2-dev libpango1.0-dev libmagic-dev libblas-dev liblapack-dev -y\n#  USER notebooks\n#\n#  RUN cd  /home/notebooks                              \\\n#      &&  curl -sSL https://get.haskellstack.org/ | sh  \\\n#      &&  stack setup                                    \\\n#      &&  git clone https://github.com/gibiansky/IHaskell \\\n#      &&  . /env_3-5/bin/activate                          \\\n#      &&  cd IHaskell                                       \\\n#      &&  stack install gtk2hs-buildtools                    \\\n#      &&  stack install --fast                                \\\n#      &&  /root/.local/bin/ihaskell install --stack\n#\n","originalDockerfileUglifiedHash":"b638c15b5416a0281e45cbf39ba798b6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f4a20bf8d57f8b9d44dbbbd3f8961e60c5cdeb85.dockerfile"}