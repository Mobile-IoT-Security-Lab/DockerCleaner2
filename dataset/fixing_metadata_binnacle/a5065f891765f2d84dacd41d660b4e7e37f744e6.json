{"seed":837813039,"processedDockerfileHash":"d76e2f638cb76fce4415377e44f78f91","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   ***** BEGIN LICENSE BLOCK *****\n#   \n#   Copyright (C) 2009-2019 Olof Hagsand and Benny Holmgren\n#\n#   This file is part of CLIXON\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#   Alternatively, the contents of this file may be used under the terms of\n#   the GNU General Public License Version 3 or later (the \"GPL\"),\n#   in which case the provisions of the GPL are applicable instead\n#   of those above. If you wish to allow use of your version of this file only\n#   under the terms of the GPL, and not to allow others to\n#   use your version of this file under the terms of Apache License version 2, \n#   indicate your decision by deleting the provisions above and replace them with\n#   the notice and other provisions required by the GPL. If you do not delete\n#   the provisions above, a recipient may use your version of this file under\n#   the terms of any one of the Apache License version 2 or the GPL.\n#\n#   ***** END LICENSE BLOCK *****\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#   For clixon and cligen\nRUN apk add git=2.38.4-r1 make=4.3-r1 build-base=0.5-r3 gcc=12.2.1_git20220924-r4 flex=2.6.4-r3 bison=3.8.2-r0 fcgi-dev=2.4.2-r2 curl-dev=7.88.1-r1 --update\n#   Create a directory to hold source-code, dependencies etc\nRUN mkdir /clixon\nRUN mkdir /clixon/build\nWORKDIR /clixon\n#   Clone cligen\nRUN git clone https://github.com/olofhagsand/cligen.git\n#   Build cligen\nWORKDIR /clixon/cligen\nRUN ./configure --prefix=/clixon/build\nRUN make\nRUN make install\n#   Copy Clixon from local dir\nRUN mkdir /clixon/clixon\nWORKDIR /clixon/clixon\nCOPY clixon .\n#   Need to add www user manually\nRUN adduser -D -H www-data\n#   nginx adds group www-data\nRUN apk add nginx=1.22.1-r0 --update\n#   Configure, build and install clixon\nRUN ./configure --prefix=/clixon/build --with-cligen=/clixon/build --with-wwwuser=www-data\nRUN make\nRUN make install\nRUN make install-include\n#   Install utils\nWORKDIR /clixon/clixon/util\nRUN make\nRUN make install\n#   Build and install the clixon example\nWORKDIR /clixon/clixon/example/main\nRUN make\nRUN make install\nRUN install example.xml /clixon/build/etc/clixon.xml\n#   Copy tests\nWORKDIR /clixon/clixon/test\nRUN install -d /clixon/build/bin/test\nRUN install *.sh /clixon/build/bin/test\n#   Copy startscript\nWORKDIR /clixon\nCOPY startsystem.sh startsystem.sh\nRUN install startsystem.sh /clixon/build/bin/\n#\n#   Stage 2\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#   For clixon and cligen\nRUN apk add flex=2.6.4-r3 bison=3.8.2-r0 fcgi-dev=2.4.2-r2 --update\n#   need to add www user manually\nRUN adduser -D -H www-data\n#   nginx adds group www-data\nRUN apk add nginx=1.22.1-r0 --update\n#   Test-specific (for test scripts)\nRUN apk add sudo=1.9.12_p2-r1 curl=7.88.1-r1 procps=3.3.17-r2 grep=3.8-r1 make=4.3-r1 bash=5.2.15-r0 --update\n#   Expose nginx port for restconf\nEXPOSE 80/tcp\n#   Create clicon group\nRUN addgroup clicon\nRUN adduser nginx clicon\nRUN adduser www-data clicon\nCOPY --from=0 /clixon/build/ /usr/local/\nCOPY --from=0 /www-data /www-data\n#   Manually created\nRUN chown www-data /www-data\nRUN chgrp www-data /www-data\n#   Log to stderr.\nCMD /usr/local/bin/startsystem.sh\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  ***** BEGIN LICENSE BLOCK *****\n#  \n#  Copyright (C) 2009-2019 Olof Hagsand and Benny Holmgren\n#\n#  This file is part of CLIXON\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#\n#  Alternatively, the contents of this file may be used under the terms of\n#  the GNU General Public License Version 3 or later (the \"GPL\"),\n#  in which case the provisions of the GPL are applicable instead\n#  of those above. If you wish to allow use of your version of this file only\n#  under the terms of the GPL, and not to allow others to\n#  use your version of this file under the terms of Apache License version 2, \n#  indicate your decision by deleting the provisions above and replace them with\n#  the notice and other provisions required by the GPL. If you do not delete\n#  the provisions above, a recipient may use your version of this file under\n#  the terms of any one of the Apache License version 2 or the GPL.\n#\n#  ***** END LICENSE BLOCK *****\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#  For clixon and cligen\nRUN apk add --update git make build-base gcc flex bison fcgi-dev curl-dev\n#  Create a directory to hold source-code, dependencies etc\nRUN mkdir /clixon\nRUN mkdir /clixon/build\nWORKDIR /clixon\n#  Clone cligen\nRUN git clone https://github.com/olofhagsand/cligen.git\n#  Build cligen\nWORKDIR /clixon/cligen\nRUN ./configure --prefix=/clixon/build\nRUN make\nRUN make install\n#  Copy Clixon from local dir\nRUN mkdir /clixon/clixon\nWORKDIR /clixon/clixon\nCOPY clixon .\n#  Need to add www user manually\nRUN adduser -D -H www-data\n#  nginx adds group www-data\nRUN apk add --update nginx\n#  Configure, build and install clixon\nRUN ./configure --prefix=/clixon/build --with-cligen=/clixon/build --with-wwwuser=www-data\nRUN make\nRUN make install\nRUN make install-include\n#  Install utils\nWORKDIR /clixon/clixon/util\nRUN make\nRUN make install\n#  Build and install the clixon example\nWORKDIR /clixon/clixon/example/main\nRUN make\nRUN make install\nRUN install example.xml /clixon/build/etc/clixon.xml\n#  Copy tests\nWORKDIR /clixon/clixon/test\nRUN install -d /clixon/build/bin/test\nRUN install *.sh /clixon/build/bin/test\n#  Copy startscript\nWORKDIR /clixon\nCOPY startsystem.sh startsystem.sh\nRUN install startsystem.sh /clixon/build/bin/\n#\n#  Stage 2\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#  For clixon and cligen\nRUN apk add --update flex bison fcgi-dev\n#  need to add www user manually\nRUN adduser -D -H www-data\n#  nginx adds group www-data\nRUN apk add --update nginx\n#  Test-specific (for test scripts)\nRUN apk add --update sudo curl procps grep make bash\n#  Expose nginx port for restconf\nEXPOSE 80/tcp\n#  Create clicon group\nRUN addgroup clicon\nRUN adduser nginx clicon\nRUN adduser www-data clicon\nCOPY --from=0 /clixon/build/ /usr/local/\nCOPY --from=0 /www-data /www-data\n#  Manually created\nRUN chown www-data /www-data\nRUN chgrp www-data /www-data\n#  Log to stderr.\nCMD /usr/local/bin/startsystem.sh\n","injectedSmells":[],"originalDockerfileHash":"c01f45010751b7311e1192a831f0032f","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   ***** BEGIN LICENSE BLOCK *****\n#   \n#   Copyright (C) 2009-2019 Olof Hagsand and Benny Holmgren\n#\n#   This file is part of CLIXON\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#   Alternatively, the contents of this file may be used under the terms of\n#   the GNU General Public License Version 3 or later (the \"GPL\"),\n#   in which case the provisions of the GPL are applicable instead\n#   of those above. If you wish to allow use of your version of this file only\n#   under the terms of the GPL, and not to allow others to\n#   use your version of this file under the terms of Apache License version 2, \n#   indicate your decision by deleting the provisions above and replace them with\n#   the notice and other provisions required by the GPL. If you do not delete\n#   the provisions above, a recipient may use your version of this file under\n#   the terms of any one of the Apache License version 2 or the GPL.\n#\n#   ***** END LICENSE BLOCK *****\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#   For clixon and cligen\nRUN apk add --update git make build-base gcc flex bison fcgi-dev curl-dev\n#   Create a directory to hold source-code, dependencies etc\nRUN mkdir /clixon\nRUN mkdir /clixon/build\nWORKDIR /clixon\n#   Clone cligen\nRUN git clone https://github.com/olofhagsand/cligen.git\n#   Build cligen\nWORKDIR /clixon/cligen\nRUN ./configure --prefix=/clixon/build\nRUN make\nRUN make install\n#   Copy Clixon from local dir\nRUN mkdir /clixon/clixon\nWORKDIR /clixon/clixon\nCOPY clixon .\n#   Need to add www user manually\nRUN adduser -D -H www-data\n#   nginx adds group www-data\nRUN apk add --update nginx\n#   Configure, build and install clixon\nRUN ./configure --prefix=/clixon/build --with-cligen=/clixon/build --with-wwwuser=www-data\nRUN make\nRUN make install\nRUN make install-include\n#   Install utils\nWORKDIR /clixon/clixon/util\nRUN make\nRUN make install\n#   Build and install the clixon example\nWORKDIR /clixon/clixon/example/main\nRUN make\nRUN make install\nRUN install example.xml /clixon/build/etc/clixon.xml\n#   Copy tests\nWORKDIR /clixon/clixon/test\nRUN install -d /clixon/build/bin/test\nRUN install *.sh /clixon/build/bin/test\n#   Copy startscript\nWORKDIR /clixon\nCOPY startsystem.sh startsystem.sh\nRUN install startsystem.sh /clixon/build/bin/\n#\n#   Stage 2\n#\nFROM alpine\nMAINTAINER Olof Hagsand <olof@hagsand.se>\n#   For clixon and cligen\nRUN apk add --update flex bison fcgi-dev\n#   need to add www user manually\nRUN adduser -D -H www-data\n#   nginx adds group www-data\nRUN apk add --update nginx\n#   Test-specific (for test scripts)\nRUN apk add --update sudo curl procps grep make bash\n#   Expose nginx port for restconf\nEXPOSE 80/tcp\n#   Create clicon group\nRUN addgroup clicon\nRUN adduser nginx clicon\nRUN adduser www-data clicon\nCOPY --from=0 /clixon/build/ /usr/local/\nCOPY --from=0 /www-data /www-data\n#   Manually created\nRUN chown www-data /www-data\nRUN chgrp www-data /www-data\n#   Log to stderr.\nCMD /usr/local/bin/startsystem.sh\n","originalDockerfileUglifiedHash":"03d72e83dc3a7091dc61a9d771c3367c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a5065f891765f2d84dacd41d660b4e7e37f744e6.dockerfile"}