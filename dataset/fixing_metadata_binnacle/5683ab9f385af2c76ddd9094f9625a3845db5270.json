{"seed":1600040682,"processedDockerfileHash":"329cfdcc13dee40660e8fb4cae655ba6","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends apt-utils=1.6.14 -y \\\n && echo yes\nRUN DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends make gcc git file pkg-config wget swig netpbm wcslib-dev wcslib-tools zlib1g-dev libbz2-dev libcairo2-dev libcfitsio-dev libcfitsio-bin libgsl-dev libjpeg-dev libnetpbm10-dev libpng-dev libeigen3-dev libgoogle-glog-dev libceres-dev g++ python3 python3-dev python3-pip python3-pil python3-tk \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   multiprocessing.pool from official python 3.6.8 release\n#   The python 3.6.7 version shipped in current Ubuntu 18.04 breaks the\n#   Astrometry.net \"timingpool\" class.  This changed from 3.6.6 to 3.6.7 and\n#   then was reverted in 3.6.8.\nCOPY pool.py /usr/lib/python3.6/multiprocessing/pool.py\n#   Python related stuff\nRUN echo \"../site-packages\" > /usr/local/lib/python3.6/dist-packages/site-packages.pth\n#   Pip installs\nRUN for x in setuptools wheel intel-numpy intel-scipy psycopg2 fitsio matplotlib astropy photutils zmq; do pip3 install $x ; done \\\n && rm -Rf /root/.cache/pip\n#   Astrometry.net\nRUN mkdir -p /src \\\n && export PYTHON=python3 \\\n && export PYTHON_SCRIPT=\"/usr/bin/env python3\" \\\n && cd /src \\\n && git clone http://github.com/dstndstn/astrometry.net.git astrometry \\\n && cd astrometry \\\n && make \\\n && make py \\\n && make extra \\\n && make install INSTALL_DIR=/usr/local \\\n && make clean \\\n && echo up\n#   The Tractor\nRUN cd /src \\\n && git clone http://github.com/dstndstn/tractor.git tractor \\\n && cd tractor \\\n && export PYTHON=python3 \\\n && export PYTHON_CONFIG=python3-config \\\n && make \\\n && make ceres \\\n && make install INSTALL_DIR=/usr/local \\\n && rm -R $( find . -name \"*.o\" -o -name \"*.so\" ;)\n#   QDO\nRUN cd /src/ \\\n && git clone https://bitbucket.org/berkeleylab/qdo.git qdo \\\n && cd qdo \\\n && python3 setup.py install\n#   python = python3\nRUN ln -s /usr/bin/python3 /usr/bin/python\n#   Legacypipe\nRUN cd /src \\\n && git clone http://github.com/legacysurvey/legacypipe.git legacypipe \\\n && echo 1\n#   up!\nRUN cd /src/legacypipe \\\n && git pull \\\n && echo 9\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nRUN apt-get -y update \\\n && apt-get install -y apt-utils \\\n && echo yes\nRUN DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends make gcc git file pkg-config wget swig netpbm wcslib-dev wcslib-tools zlib1g-dev libbz2-dev libcairo2-dev libcfitsio-dev libcfitsio-bin libgsl-dev libjpeg-dev libnetpbm10-dev libpng-dev libeigen3-dev libgoogle-glog-dev libceres-dev g++ python3 python3-dev python3-pip python3-pil python3-tk \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  multiprocessing.pool from official python 3.6.8 release\n#  The python 3.6.7 version shipped in current Ubuntu 18.04 breaks the\n#  Astrometry.net \"timingpool\" class.  This changed from 3.6.6 to 3.6.7 and\n#  then was reverted in 3.6.8.\nCOPY pool.py /usr/lib/python3.6/multiprocessing/pool.py\n#  Python related stuff\nRUN echo \"../site-packages\" > /usr/local/lib/python3.6/dist-packages/site-packages.pth\n#  Pip installs\nRUN for x in setuptools wheel intel-numpy intel-scipy psycopg2 fitsio matplotlib astropy photutils zmq; do pip3 install $x ; done \\\n && rm -Rf /root/.cache/pip\n#  Astrometry.net\nRUN mkdir -p /src \\\n && export PYTHON=python3 \\\n && export PYTHON_SCRIPT=\"/usr/bin/env python3\" \\\n && cd /src \\\n && git clone http://github.com/dstndstn/astrometry.net.git astrometry \\\n && cd astrometry \\\n && make \\\n && make py \\\n && make extra \\\n && make install INSTALL_DIR=/usr/local \\\n && make clean \\\n && echo up\n#  The Tractor\nRUN cd /src \\\n && git clone http://github.com/dstndstn/tractor.git tractor \\\n && cd tractor \\\n && export PYTHON=python3 \\\n && export PYTHON_CONFIG=python3-config \\\n && make \\\n && make ceres \\\n && make install INSTALL_DIR=/usr/local \\\n && rm -R $( find . -name \"*.o\" -o -name \"*.so\" ;)\n#  QDO\nRUN cd /src/ \\\n && git clone https://bitbucket.org/berkeleylab/qdo.git qdo \\\n && cd qdo \\\n && python3 setup.py install\n#  python = python3\nRUN ln -s /usr/bin/python3 /usr/bin/python\n#  Legacypipe\nRUN cd /src \\\n && git clone http://github.com/legacysurvey/legacypipe.git legacypipe \\\n && echo 1\n#  up!\nRUN cd /src/legacypipe \\\n && git pull \\\n && echo 9\n","injectedSmells":[],"originalDockerfileHash":"c26466332b1fa29b2d84e9015f5eaeea","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nRUN apt-get update -y \\\n && apt-get install apt-utils -y \\\n && echo yes\nRUN DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends make gcc git file pkg-config wget swig netpbm wcslib-dev wcslib-tools zlib1g-dev libbz2-dev libcairo2-dev libcfitsio-dev libcfitsio-bin libgsl-dev libjpeg-dev libnetpbm10-dev libpng-dev libeigen3-dev libgoogle-glog-dev libceres-dev g++ python3 python3-dev python3-pip python3-pil python3-tk \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   multiprocessing.pool from official python 3.6.8 release\n#   The python 3.6.7 version shipped in current Ubuntu 18.04 breaks the\n#   Astrometry.net \"timingpool\" class.  This changed from 3.6.6 to 3.6.7 and\n#   then was reverted in 3.6.8.\nCOPY pool.py /usr/lib/python3.6/multiprocessing/pool.py\n#   Python related stuff\nRUN echo \"../site-packages\" > /usr/local/lib/python3.6/dist-packages/site-packages.pth\n#   Pip installs\nRUN for x in setuptools wheel intel-numpy intel-scipy psycopg2 fitsio matplotlib astropy photutils zmq; do pip3 install $x ; done \\\n && rm -Rf /root/.cache/pip\n#   Astrometry.net\nRUN mkdir -p /src \\\n && export PYTHON=python3 \\\n && export PYTHON_SCRIPT=\"/usr/bin/env python3\" \\\n && cd /src \\\n && git clone http://github.com/dstndstn/astrometry.net.git astrometry \\\n && cd astrometry \\\n && make \\\n && make py \\\n && make extra \\\n && make install INSTALL_DIR=/usr/local \\\n && make clean \\\n && echo up\n#   The Tractor\nRUN cd /src \\\n && git clone http://github.com/dstndstn/tractor.git tractor \\\n && cd tractor \\\n && export PYTHON=python3 \\\n && export PYTHON_CONFIG=python3-config \\\n && make \\\n && make ceres \\\n && make install INSTALL_DIR=/usr/local \\\n && rm -R $( find . -name \"*.o\" -o -name \"*.so\" ;)\n#   QDO\nRUN cd /src/ \\\n && git clone https://bitbucket.org/berkeleylab/qdo.git qdo \\\n && cd qdo \\\n && python3 setup.py install\n#   python = python3\nRUN ln -s /usr/bin/python3 /usr/bin/python\n#   Legacypipe\nRUN cd /src \\\n && git clone http://github.com/legacysurvey/legacypipe.git legacypipe \\\n && echo 1\n#   up!\nRUN cd /src/legacypipe \\\n && git pull \\\n && echo 9\n","originalDockerfileUglifiedHash":"273849a2b1cf24d6a91256c366e88744","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5683ab9f385af2c76ddd9094f9625a3845db5270.dockerfile"}