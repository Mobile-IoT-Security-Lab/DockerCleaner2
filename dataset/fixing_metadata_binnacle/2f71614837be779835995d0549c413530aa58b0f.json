{"seed":211445003,"processedDockerfileHash":"a1f5c87a5eccebd228290a0ceb77552e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM w251/tensorflow:dev-tx2-4.2_b158-py3\n#   FROM tensorflow\n#  + numpy\n#  +  nltk==3.2.5\n#   resampy\n#  +  python_speech_features\n#  + pandas==0.23.0\n#   + six\n#   + mpi4py\n#   librosa==0.6.1\n#  + matplotlib\n#   + joblib==0.11\n#  +  sentencepiece\n#   + sacrebleu\n#   + h5py\n#   + tqdm\n#   Need python 3..\nRUN :\n#   RUN apt-get install -y git\n#   RUN apt-get install -y libfreetype6-dev pkg-config\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   numpy, pandas, matplotlib\nRUN (apt-get update ;apt-get install --no-install-recommends python3-numpy python3-scipy python3-matplotlib python3-pandas python3-nose python3-sympy -y )\n#   nltk\nRUN pip3 install nltk==3.2.5\nWORKDIR /tmp\n#   sentencepiece\nRUN (apt-get update ;apt-get install --no-install-recommends cmake build-essential pkg-config libgoogle-perftools-dev -y )\nRUN git clone https://github.com/google/sentencepiece\n#   google switched to Bazel for building but we haven't\nWORKDIR /tmp/sentencepiece\nRUN git checkout tags/v0.1.82\nRUN mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j 6 \\\n && make install\nRUN ldconfig -v\nWORKDIR /tmp/sentencepiece/python\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN rm -fr /tmp/sentencepiece\nRUN pip3 install python_speech_features\nRUN pip3 install tqdm\nRUN (apt-get update ;apt-get install --no-install-recommends libhdf5-dev -y )\nRUN pip3 install h5py\nRUN pip3 install joblib==0.11\nRUN pip3 install sacrebleu\nRUN pip3 install six\nRUN (apt-get update ;apt-get install --no-install-recommends libopenmpi-dev -y )\nRUN pip3 install mpi4py\n#   RUN pip3 install resampy\nRUN (apt-get update ;apt-get install --no-install-recommends wget xz-utils -y )\nWORKDIR /tmp\nRUN wget http://releases.llvm.org/7.0.1/llvm-7.0.1.src.tar.xz\nRUN tar Jxvf *.xz\nRUN git clone https://github.com/numba/llvmlite.git\nWORKDIR /tmp/llvm-7.0.1.src\nRUN mkdir build\nWORKDIR /tmp/llvm-7.0.1.src/build\nRUN cmake .. -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=\"ARM;X86;AArch64\" -\"DCMAKE_C_FLAGS=-mcpu=cortex-a57\"\nRUN make -j6\nRUN make install\nWORKDIR /tmp/llvmlite\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN (apt-get update ;apt-get install --no-install-recommends python3-sklearn -y )\nRUN pip3 install numba\nRUN pip3 install resampy\nRUN pip3 install librosa==0.6.1\nRUN rm -rf /tmp/llvmlite\nRUN rm -rf /tmp/llvm-7.0.1.src\nRUN rm -rf /tmp/llvm-7.0.1.src.tar.xz\nWORKDIR /\nRUN git clone https://github.com/NVIDIA/OpenSeq2Seq\nWORKDIR /OpenSeq2Seq\n#   unit tests\n#   RUN python3 -m unittest discover -s open_seq2seq -p '*_test.py'\nWORKDIR /\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM w251/tensorflow:dev-tx2-4.2_b158-py3\n#  FROM tensorflow\n# + numpy\n# +  nltk==3.2.5\n#  resampy\n# +  python_speech_features\n# + pandas==0.23.0\n#  + six\n#  + mpi4py\n#  librosa==0.6.1\n# + matplotlib\n#  + joblib==0.11\n# +  sentencepiece\n#  + sacrebleu\n#  + h5py\n#  + tqdm\n#  Need python 3..\nRUN apt-get update\n#  RUN apt-get install -y git\n#  RUN apt-get install -y libfreetype6-dev pkg-config\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  numpy, pandas, matplotlib\nRUN apt-get install -y python3-numpy python3-scipy python3-matplotlib python3-pandas python3-nose python3-sympy\n#  nltk\nRUN pip3 install nltk==3.2.5\nWORKDIR /tmp\n#  sentencepiece\nRUN apt-get install cmake build-essential pkg-config libgoogle-perftools-dev -y\nRUN git clone https://github.com/google/sentencepiece\n#  google switched to Bazel for building but we haven't\nWORKDIR /tmp/sentencepiece\nRUN git checkout tags/v0.1.82\nRUN mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j 6 \\\n && make install\nRUN ldconfig -v\nWORKDIR /tmp/sentencepiece/python\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN rm -fr /tmp/sentencepiece\nRUN pip3 install python_speech_features\nRUN pip3 install tqdm\nRUN apt-get install -y libhdf5-dev\nRUN pip3 install h5py\nRUN pip3 install joblib==0.11\nRUN pip3 install sacrebleu\nRUN pip3 install six\nRUN apt-get -y install libopenmpi-dev\nRUN pip3 install mpi4py\n#  RUN pip3 install resampy\nRUN apt-get install -y wget xz-utils\nWORKDIR /tmp\nRUN wget http://releases.llvm.org/7.0.1/llvm-7.0.1.src.tar.xz\nRUN tar Jxvf *.xz\nRUN git clone https://github.com/numba/llvmlite.git\nWORKDIR /tmp/llvm-7.0.1.src\nRUN mkdir build\nWORKDIR /tmp/llvm-7.0.1.src/build\nRUN cmake .. -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=\"ARM;X86;AArch64\" -\"DCMAKE_C_FLAGS=-mcpu=cortex-a57\"\nRUN make -j6\nRUN make install\nWORKDIR /tmp/llvmlite\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN apt-get install -y python3-sklearn\nRUN pip3 install numba\nRUN pip3 install resampy\nRUN pip3 install librosa==0.6.1\nRUN rm -rf /tmp/llvmlite\nRUN rm -rf /tmp/llvm-7.0.1.src\nRUN rm -rf /tmp/llvm-7.0.1.src.tar.xz\nWORKDIR /\nRUN git clone https://github.com/NVIDIA/OpenSeq2Seq\nWORKDIR /OpenSeq2Seq\n#  unit tests\n#  RUN python3 -m unittest discover -s open_seq2seq -p '*_test.py'\nWORKDIR /\n","injectedSmells":[],"originalDockerfileHash":"d6a0a438b686c66314951da30c9a650b","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM w251/tensorflow:dev-tx2-4.2_b158-py3\n#   FROM tensorflow\n#  + numpy\n#  +  nltk==3.2.5\n#   resampy\n#  +  python_speech_features\n#  + pandas==0.23.0\n#   + six\n#   + mpi4py\n#   librosa==0.6.1\n#  + matplotlib\n#   + joblib==0.11\n#  +  sentencepiece\n#   + sacrebleu\n#   + h5py\n#   + tqdm\n#   Need python 3..\nRUN apt-get update\n#   RUN apt-get install -y git\n#   RUN apt-get install -y libfreetype6-dev pkg-config\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   numpy, pandas, matplotlib\nRUN apt-get install python3-numpy python3-scipy python3-matplotlib python3-pandas python3-nose python3-sympy -y\n#   nltk\nRUN pip3 install nltk==3.2.5\nWORKDIR /tmp\n#   sentencepiece\nRUN apt-get install cmake build-essential pkg-config libgoogle-perftools-dev -y\nRUN git clone https://github.com/google/sentencepiece\n#   google switched to Bazel for building but we haven't\nWORKDIR /tmp/sentencepiece\nRUN git checkout tags/v0.1.82\nRUN mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j 6 \\\n && make install\nRUN ldconfig -v\nWORKDIR /tmp/sentencepiece/python\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN rm -fr /tmp/sentencepiece\nRUN pip3 install python_speech_features\nRUN pip3 install tqdm\nRUN apt-get install libhdf5-dev -y\nRUN pip3 install h5py\nRUN pip3 install joblib==0.11\nRUN pip3 install sacrebleu\nRUN pip3 install six\nRUN apt-get install libopenmpi-dev -y\nRUN pip3 install mpi4py\n#   RUN pip3 install resampy\nRUN apt-get install wget xz-utils -y\nWORKDIR /tmp\nRUN wget http://releases.llvm.org/7.0.1/llvm-7.0.1.src.tar.xz\nRUN tar Jxvf *.xz\nRUN git clone https://github.com/numba/llvmlite.git\nWORKDIR /tmp/llvm-7.0.1.src\nRUN mkdir build\nWORKDIR /tmp/llvm-7.0.1.src/build\nRUN cmake .. -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=\"ARM;X86;AArch64\" -\"DCMAKE_C_FLAGS=-mcpu=cortex-a57\"\nRUN make -j6\nRUN make install\nWORKDIR /tmp/llvmlite\nRUN python3 setup.py build\nRUN python3 setup.py install\nRUN apt-get install python3-sklearn -y\nRUN pip3 install numba\nRUN pip3 install resampy\nRUN pip3 install librosa==0.6.1\nRUN rm -rf /tmp/llvmlite\nRUN rm -rf /tmp/llvm-7.0.1.src\nRUN rm -rf /tmp/llvm-7.0.1.src.tar.xz\nWORKDIR /\nRUN git clone https://github.com/NVIDIA/OpenSeq2Seq\nWORKDIR /OpenSeq2Seq\n#   unit tests\n#   RUN python3 -m unittest discover -s open_seq2seq -p '*_test.py'\nWORKDIR /\n","originalDockerfileUglifiedHash":"bc48360eba432098574cb5852a97c8ef","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2f71614837be779835995d0549c413530aa58b0f.dockerfile"}