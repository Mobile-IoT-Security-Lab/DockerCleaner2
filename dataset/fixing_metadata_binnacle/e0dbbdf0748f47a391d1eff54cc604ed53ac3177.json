{"seed":3071031010,"processedDockerfileHash":"e44f3ec991cd8527ae4ce0c2f6beb0ea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Based on ubuntu 14.04\nFROM ubuntu:trusty\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN : \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libpspell-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev libgmp-dev libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb-dev libtidy-dev libxslt-dev libgeoip-dev libicu-dev spawn-fcgi re2c \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Ubuntu Fixes to compile\n#  # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n#  # Symlink gmp header\nRUN ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h\n#   Download PHP\nENV PHP_VERSION=\"5.6.7\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de2.php.net/distributions/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e4b0534d4b8aa9aabedeef12e7c0aa8 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd --enable-gd-native-ttf --with-imap-ssl --with-ldap --with-mcrypt --with-mhash --with-snmp=shared --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-gmp --enable-opcache --with-pspell \\\n && make -j 4 \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#   Enable opcache\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/opcache.so\" > /etc/php5/conf.d/20_opcache.ini\n#   Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#  # TODO Inactive as xcache is php 5.6 incompatible \n#  # Build module xcache 3.1.0 \n#  RUN mkdir -p /tmp/install/ && \\\n#      cd /tmp/install && \\\n#      wget http://xcache.lighttpd.net/pub/Releases/3.1.0/xcache-3.1.0.tar.bz2 && \\\n#      echo \"e5816d47d52be200b959bf69a673ff74  xcache-3.1.0.tar.bz2\" > md5sums && \\\n#      md5sum -c md5sums && \\\n#      tar xfj xcache-3.1.0.tar.bz2 && \\\n#      cd xcache-3.1.0 && \\\n#      phpize && \\\n#      ./configure && \\\n#      make && \\\n#      make install && \\\n#      rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.2.0RC1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apcu-4.0.6\nRUN echo \"extension=apcu.so\" > /etc/php5/conf.d/30_acpu.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n#  # TODO Inactive as ioncube has not released a php 5.6 compatible binary\n#  # Install ioncube\n#  RUN mkdir -p /tmp/install/ && \\\n#      cd /tmp/install && \\\n#      wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#      tar xfj ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#      mv ioncube/ioncube_loader_lin_5.6.so $(php-config --extension-dir)/ioncube_loader.so && \\\n#      rm -rf /tmp/install\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Based on ubuntu 14.04\nFROM ubuntu:trusty\nMAINTAINER Christian Simon <simon@swine.de>\n#  Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libpspell-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev libgmp-dev libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb-dev libtidy-dev libxslt-dev libgeoip-dev libicu-dev spawn-fcgi re2c \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#  Ubuntu Fixes to compile\n# # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n# # Symlink gmp header\nRUN ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h\n#  Download PHP\nENV PHP_VERSION=\"5.6.7\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de2.php.net/distributions/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e4b0534d4b8aa9aabedeef12e7c0aa8 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd --enable-gd-native-ttf --with-imap-ssl --with-ldap --with-mcrypt --with-mhash --with-snmp=shared --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-gmp --enable-opcache --with-pspell \\\n && make -j 4 \\\n && make install \\\n && rm -rf /tmp/install\n#  Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#  Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#  Enable opcache\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/opcache.so\" > /etc/php5/conf.d/20_opcache.ini\n#  Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n# # TODO Inactive as xcache is php 5.6 incompatible \n# # Build module xcache 3.1.0 \n# RUN mkdir -p /tmp/install/ && \\\n#     cd /tmp/install && \\\n#     wget http://xcache.lighttpd.net/pub/Releases/3.1.0/xcache-3.1.0.tar.bz2 && \\\n#     echo \"e5816d47d52be200b959bf69a673ff74  xcache-3.1.0.tar.bz2\" > md5sums && \\\n#     md5sum -c md5sums && \\\n#     tar xfj xcache-3.1.0.tar.bz2 && \\\n#     cd xcache-3.1.0 && \\\n#     phpize && \\\n#     ./configure && \\\n#     make && \\\n#     make install && \\\n#     rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.2.0RC1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apcu-4.0.6\nRUN echo \"extension=apcu.so\" > /etc/php5/conf.d/30_acpu.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n# # TODO Inactive as ioncube has not released a php 5.6 compatible binary\n# # Install ioncube\n# RUN mkdir -p /tmp/install/ && \\\n#     cd /tmp/install && \\\n#     wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#     tar xfj ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#     mv ioncube/ioncube_loader_lin_5.6.so $(php-config --extension-dir)/ioncube_loader.so && \\\n#     rm -rf /tmp/install\n#  Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n#  Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n","injectedSmells":[],"originalDockerfileHash":"890d46c33ffd9454e3709d50b70c36e2","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Based on ubuntu 14.04\nFROM ubuntu:trusty\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libpspell-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev libgmp-dev libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb-dev libtidy-dev libxslt-dev libgeoip-dev libicu-dev spawn-fcgi re2c \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Ubuntu Fixes to compile\n#  # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n#  # Symlink gmp header\nRUN ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h\n#   Download PHP\nENV PHP_VERSION=\"5.6.7\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://de2.php.net/distributions/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"2e4b0534d4b8aa9aabedeef12e7c0aa8 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd --enable-gd-native-ttf --with-imap-ssl --with-ldap --with-mcrypt --with-mhash --with-snmp=shared --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-db4 --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-openssl --enable-intl --with-pgsql --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-gmp --enable-opcache --with-pspell \\\n && make -j 4 \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#   Enable opcache\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/opcache.so\" > /etc/php5/conf.d/20_opcache.ini\n#   Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#  # TODO Inactive as xcache is php 5.6 incompatible \n#  # Build module xcache 3.1.0 \n#  RUN mkdir -p /tmp/install/ && \\\n#      cd /tmp/install && \\\n#      wget http://xcache.lighttpd.net/pub/Releases/3.1.0/xcache-3.1.0.tar.bz2 && \\\n#      echo \"e5816d47d52be200b959bf69a673ff74  xcache-3.1.0.tar.bz2\" > md5sums && \\\n#      md5sum -c md5sums && \\\n#      tar xfj xcache-3.1.0.tar.bz2 && \\\n#      cd xcache-3.1.0 && \\\n#      phpize && \\\n#      ./configure && \\\n#      make && \\\n#      make install && \\\n#      rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.2.0RC1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apcu-4.0.6\nRUN echo \"extension=apcu.so\" > /etc/php5/conf.d/30_acpu.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n#  # TODO Inactive as ioncube has not released a php 5.6 compatible binary\n#  # Install ioncube\n#  RUN mkdir -p /tmp/install/ && \\\n#      cd /tmp/install && \\\n#      wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#      tar xfj ioncube_loaders_lin_x86-64.tar.bz2 && \\\n#      mv ioncube/ioncube_loader_lin_5.6.so $(php-config --extension-dir)/ioncube_loader.so && \\\n#      rm -rf /tmp/install\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n","originalDockerfileUglifiedHash":"1e196f8e17da4ba482806df6417766b4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e0dbbdf0748f47a391d1eff54cc604ed53ac3177.dockerfile"}