{"seed":2418123233,"processedDockerfileHash":"793ffeef245ad68b52c548aafa938a82","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  FROM centos:centos6.8\nFROM daocloud.io/centos:6.8\nMAINTAINER yjc@52fhy.com\n#   php\nENV PHP_VERSION=\"5.6.33\"\nENV PHP_URL=\"http://cn2.php.net/distributions/php-${PHP_VERSION}.tar.bz2\"\n#   nginx\nENV NGINX_VERSION=\"1.12.2\"\n#   redis\nENV REDIS_VER=\"3.2.6\"\n#   php-ext\t\nENV SWOOLE_VER=\"1.10.1\"\n#   https://github.com/swoole/swoole-src/archive/v1.10.1.tar.gz\nENV PHPREDIS_VER=\"3.1.2\"\n#   php5 need yar < 2.0\nENV YAR_VER=\"1.2.5\"\nENV PHP_INI_FILE=\"/usr/local/php/etc/php.ini\"\nENV TZ=\"Asia/Shanghai\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN yum install -y gcc gcc-c++ bison autoconf wget lrzsz \\\n && yum install -y make cmake libtool libtool-ltdl-devel \\\n && yum install -y libjpeg-devel libpng-devel freetype-devel gd-devel \\\n && yum install -y python-devel patch \\\n && yum install -y openssl openssl-devel ncurses-devel \\\n && yum install -y bzip2 bzip2-devel.x86_64 unzip zlib-devel \\\n && yum install -y libxml2 libxml2-devel \\\n && yum install -y curl-devel \\\n && yum install -y readline-devel \\\n && yum install -y pcre-devel \\\n && yum clean all\nRUN wget -O /libmcrypt-2.5.7.tar.gz ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/libmcrypt/libmcrypt-2.5.7.tar.gz \\\n && wget -O /mcrypt-2.6.8.tar.gz https://jaist.dl.sourceforge.net/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz \\\n && wget -O /mhash-0.9.9.9.tar.gz https://jaist.dl.sourceforge.net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz \\\n && tar zxvf /libmcrypt-2.5.7.tar.gz \\\n && cd /libmcrypt-2.5.7 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /libmcrypt* \\\n && tar zxvf /mhash-0.9.9.9.tar.gz \\\n && cd mhash-0.9.9.9 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mhash* \\\n && tar zxvf /mcrypt-2.6.8.tar.gz \\\n && cd mcrypt-2.6.8 \\\n && LD_LIBRARY_PATH=/usr/local/lib ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mcrypt*\nRUN wget -O /php-${PHP_VERSION}.tar.bz2 \"$PHP_URL\" \\\n && tar jxvf /php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION}/ \\\n && ./configure --prefix=/usr/local/php --with-config-file-scan-dir=/usr/local/php/etc/ --enable-inline-optimization --enable-opcache --enable-session --enable-fpm --with-fpm-user=www --with-fpm-group=www --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-pdo-sqlite --with-sqlite3 --with-gettext --enable-mbregex --enable-mbstring --enable-xml --with-iconv --with-mcrypt --with-mhash --with-openssl --enable-bcmath --enable-soap --with-xmlrpc --with-libxml-dir --enable-pcntl --enable-shmop --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-sockets --with-curl --with-curlwrappers --with-zlib --enable-zip --with-bz2 --with-gd --enable-gd-native-ttf --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-readline \\\n && make \\\n && make install \\\n && cp php.ini-production php.ini \\\n && cp php.ini* /usr/local/php/etc/ \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && make clean \\\n && yum clean all \\\n && cd - \\\n && rm -rf /php-${PHP_VERSION}* \\\n && ln -sf /usr/local/php/bin/* /usr/bin/ \\\n && ln -sf /usr/local/php/sbin/* /usr/bin/ \\\n && sed -i \"s/;date.timezone =/date.timezone =PRC/\" /usr/local/php/etc/php.ini\nRUN useradd www\nRUN wget -O /nginx-${NGINX_VERSION}.tar.gz http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz \\\n && echo 'install nginx' \\\n && tar zxvf /nginx-${NGINX_VERSION}.tar.gz \\\n && cd nginx-${NGINX_VERSION} \\\n && ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_sub_module --with-http_gzip_static_module --with-pcre \\\n && make \\\n && make install \\\n && ln -sf /usr/local/nginx/sbin/nginx /usr/bin \\\n && make clean \\\n && yum clean all \\\n && cd ../ \\\n && rm -rf nginx-${NGINX_VERSION}*\nRUN /usr/local/php/bin/pecl install redis swoole \\\n && echo \"extension=swoole.so\" >> \"$PHP_INI_FILE\" \\\n && echo \"extension=redis.so\" >> \"$PHP_INI_FILE\"\nRUN echo 'install yar' \\\n && wget http://pecl.php.net/get/yar-${YAR_VER}.tgz \\\n && tar xzf yar-${YAR_VER}.tgz \\\n && cd yar-${YAR_VER}/ \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=yar.so\" >> \"$PHP_INI_FILE\" \\\n && cd ../ \\\n && rm -rf yar-${YAR_VER}*\nRUN wget http://download.redis.io/releases/redis-${REDIS_VER}.tar.gz -O /redis-${REDIS_VER}.tar.gz \\\n && echo 'install redis' \\\n && tar xzf /redis-${REDIS_VER}.tar.gz \\\n && cd redis-${REDIS_VER} \\\n && make \\\n && mkdir /usr/local/redis \\\n && cp redis.conf /usr/local/redis/ \\\n && cd src \\\n && cp redis-benchmark redis-check-aof redis-check-rdb redis-cli redis-sentinel redis-server redis-trib.rb /usr/local/redis \\\n && cd / \\\n && rm -rf redis-${REDIS_VER}*\nCOPY ./run.sh /run.sh\nRUN chmod 755 /run.sh\nCMD /run.sh \\\n && tail -f\nEXPOSE 80/tcp\nEXPOSE 9000/tcp\n#  docker build -t php56-fpm-centos68 -f Dockerfile_online .\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# FROM centos:centos6.8\nFROM daocloud.io/centos:6.8\nMAINTAINER yjc@52fhy.com\n#  php\nENV PHP_VERSION=\"5.6.33\"\nENV PHP_URL=\"http://cn2.php.net/distributions/php-${PHP_VERSION}.tar.bz2\"\n#  nginx\nENV NGINX_VERSION=\"1.12.2\"\n#  redis\nENV REDIS_VER=\"3.2.6\"\n#  php-ext\t\nENV SWOOLE_VER=\"1.10.1\"\n#  https://github.com/swoole/swoole-src/archive/v1.10.1.tar.gz\nENV PHPREDIS_VER=\"3.1.2\"\n#  php5 need yar < 2.0\nENV YAR_VER=\"1.2.5\"\nENV PHP_INI_FILE=\"/usr/local/php/etc/php.ini\"\nENV TZ=\"Asia/Shanghai\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN yum install -y gcc gcc-c++ bison autoconf wget lrzsz \\\n && yum install -y make cmake libtool libtool-ltdl-devel \\\n && yum install -y libjpeg-devel libpng-devel freetype-devel gd-devel \\\n && yum install -y python-devel patch \\\n && yum install -y openssl openssl-devel ncurses-devel \\\n && yum install -y bzip2 bzip2-devel.x86_64 unzip zlib-devel \\\n && yum install -y libxml2 libxml2-devel \\\n && yum install -y curl-devel \\\n && yum install -y readline-devel \\\n && yum install -y pcre-devel \\\n && yum clean all\nRUN wget -O /libmcrypt-2.5.7.tar.gz ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/libmcrypt/libmcrypt-2.5.7.tar.gz \\\n && wget -O /mcrypt-2.6.8.tar.gz https://jaist.dl.sourceforge.net/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz \\\n && wget -O /mhash-0.9.9.9.tar.gz https://jaist.dl.sourceforge.net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz \\\n && tar zxvf /libmcrypt-2.5.7.tar.gz \\\n && cd /libmcrypt-2.5.7 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /libmcrypt* \\\n && tar zxvf /mhash-0.9.9.9.tar.gz \\\n && cd mhash-0.9.9.9 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mhash* \\\n && tar zxvf /mcrypt-2.6.8.tar.gz \\\n && cd mcrypt-2.6.8 \\\n && LD_LIBRARY_PATH=/usr/local/lib ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mcrypt*\nRUN wget -O /php-${PHP_VERSION}.tar.bz2 \"$PHP_URL\" \\\n && tar jxvf /php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION}/ \\\n && ./configure --prefix=/usr/local/php --with-config-file-scan-dir=/usr/local/php/etc/ --enable-inline-optimization --enable-opcache --enable-session --enable-fpm --with-fpm-user=www --with-fpm-group=www --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-pdo-sqlite --with-sqlite3 --with-gettext --enable-mbregex --enable-mbstring --enable-xml --with-iconv --with-mcrypt --with-mhash --with-openssl --enable-bcmath --enable-soap --with-xmlrpc --with-libxml-dir --enable-pcntl --enable-shmop --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-sockets --with-curl --with-curlwrappers --with-zlib --enable-zip --with-bz2 --with-gd --enable-gd-native-ttf --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-readline \\\n && make \\\n && make install \\\n && cp php.ini-production php.ini \\\n && cp php.ini* /usr/local/php/etc/ \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && make clean \\\n && yum clean all \\\n && cd - \\\n && rm -rf /php-${PHP_VERSION}* \\\n && ln -sf /usr/local/php/bin/* /usr/bin/ \\\n && ln -sf /usr/local/php/sbin/* /usr/bin/ \\\n && sed -i \"s/;date.timezone =/date.timezone =PRC/\" /usr/local/php/etc/php.ini\nRUN useradd www\nRUN wget -O /nginx-${NGINX_VERSION}.tar.gz http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz \\\n && echo 'install nginx' \\\n && tar zxvf /nginx-${NGINX_VERSION}.tar.gz \\\n && cd nginx-${NGINX_VERSION} \\\n && ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_sub_module --with-http_gzip_static_module --with-pcre \\\n && make \\\n && make install \\\n && ln -sf /usr/local/nginx/sbin/nginx /usr/bin \\\n && make clean \\\n && yum clean all \\\n && cd ../ \\\n && rm -rf nginx-${NGINX_VERSION}*\nRUN /usr/local/php/bin/pecl install redis swoole \\\n && echo \"extension=swoole.so\" >> \"$PHP_INI_FILE\" \\\n && echo \"extension=redis.so\" >> \"$PHP_INI_FILE\"\nRUN echo 'install yar' \\\n && wget http://pecl.php.net/get/yar-${YAR_VER}.tgz \\\n && tar xzf yar-${YAR_VER}.tgz \\\n && cd yar-${YAR_VER}/ \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=yar.so\" >> \"$PHP_INI_FILE\" \\\n && cd ../ \\\n && rm -rf yar-${YAR_VER}*\nRUN wget http://download.redis.io/releases/redis-${REDIS_VER}.tar.gz -O /redis-${REDIS_VER}.tar.gz \\\n && echo 'install redis' \\\n && tar xzf /redis-${REDIS_VER}.tar.gz \\\n && cd redis-${REDIS_VER} \\\n && make \\\n && mkdir /usr/local/redis \\\n && cp redis.conf /usr/local/redis/ \\\n && cd src \\\n && cp redis-benchmark redis-check-aof redis-check-rdb redis-cli redis-sentinel redis-server redis-trib.rb /usr/local/redis \\\n && cd / \\\n && rm -rf redis-${REDIS_VER}*\nADD ./run.sh /run.sh\nRUN chmod 755 /run.sh\nCMD /run.sh \\\n && tail -f\nEXPOSE 80/tcp\nEXPOSE 9000/tcp\n# docker build -t php56-fpm-centos68 -f Dockerfile_online .\n","injectedSmells":[],"originalDockerfileHash":"7a51e87d5b44125c2a28bcdf9021a1e1","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  FROM centos:centos6.8\nFROM daocloud.io/centos:6.8\nMAINTAINER yjc@52fhy.com\n#   php\nENV PHP_VERSION=\"5.6.33\"\nENV PHP_URL=\"http://cn2.php.net/distributions/php-${PHP_VERSION}.tar.bz2\"\n#   nginx\nENV NGINX_VERSION=\"1.12.2\"\n#   redis\nENV REDIS_VER=\"3.2.6\"\n#   php-ext\t\nENV SWOOLE_VER=\"1.10.1\"\n#   https://github.com/swoole/swoole-src/archive/v1.10.1.tar.gz\nENV PHPREDIS_VER=\"3.1.2\"\n#   php5 need yar < 2.0\nENV YAR_VER=\"1.2.5\"\nENV PHP_INI_FILE=\"/usr/local/php/etc/php.ini\"\nENV TZ=\"Asia/Shanghai\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN yum install -y gcc gcc-c++ bison autoconf wget lrzsz \\\n && yum install -y make cmake libtool libtool-ltdl-devel \\\n && yum install -y libjpeg-devel libpng-devel freetype-devel gd-devel \\\n && yum install -y python-devel patch \\\n && yum install -y openssl openssl-devel ncurses-devel \\\n && yum install -y bzip2 bzip2-devel.x86_64 unzip zlib-devel \\\n && yum install -y libxml2 libxml2-devel \\\n && yum install -y curl-devel \\\n && yum install -y readline-devel \\\n && yum install -y pcre-devel \\\n && yum clean all\nRUN wget -O /libmcrypt-2.5.7.tar.gz ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/libmcrypt/libmcrypt-2.5.7.tar.gz \\\n && wget -O /mcrypt-2.6.8.tar.gz https://jaist.dl.sourceforge.net/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz \\\n && wget -O /mhash-0.9.9.9.tar.gz https://jaist.dl.sourceforge.net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz \\\n && tar zxvf /libmcrypt-2.5.7.tar.gz \\\n && cd /libmcrypt-2.5.7 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /libmcrypt* \\\n && tar zxvf /mhash-0.9.9.9.tar.gz \\\n && cd mhash-0.9.9.9 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mhash* \\\n && tar zxvf /mcrypt-2.6.8.tar.gz \\\n && cd mcrypt-2.6.8 \\\n && LD_LIBRARY_PATH=/usr/local/lib ./configure \\\n && make \\\n && make install \\\n && cd - / \\\n && rm -rf /mcrypt*\nRUN wget -O /php-${PHP_VERSION}.tar.bz2 \"$PHP_URL\" \\\n && tar jxvf /php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION}/ \\\n && ./configure --prefix=/usr/local/php --with-config-file-scan-dir=/usr/local/php/etc/ --enable-inline-optimization --enable-opcache --enable-session --enable-fpm --with-fpm-user=www --with-fpm-group=www --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-pdo-sqlite --with-sqlite3 --with-gettext --enable-mbregex --enable-mbstring --enable-xml --with-iconv --with-mcrypt --with-mhash --with-openssl --enable-bcmath --enable-soap --with-xmlrpc --with-libxml-dir --enable-pcntl --enable-shmop --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-sockets --with-curl --with-curlwrappers --with-zlib --enable-zip --with-bz2 --with-gd --enable-gd-native-ttf --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-readline \\\n && make \\\n && make install \\\n && cp php.ini-production php.ini \\\n && cp php.ini* /usr/local/php/etc/ \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && make clean \\\n && yum clean all \\\n && cd - \\\n && rm -rf /php-${PHP_VERSION}* \\\n && ln -sf /usr/local/php/bin/* /usr/bin/ \\\n && ln -sf /usr/local/php/sbin/* /usr/bin/ \\\n && sed -i \"s/;date.timezone =/date.timezone =PRC/\" /usr/local/php/etc/php.ini\nRUN useradd www\nRUN wget -O /nginx-${NGINX_VERSION}.tar.gz http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz \\\n && echo 'install nginx' \\\n && tar zxvf /nginx-${NGINX_VERSION}.tar.gz \\\n && cd nginx-${NGINX_VERSION} \\\n && ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_sub_module --with-http_gzip_static_module --with-pcre \\\n && make \\\n && make install \\\n && ln -sf /usr/local/nginx/sbin/nginx /usr/bin \\\n && make clean \\\n && yum clean all \\\n && cd ../ \\\n && rm -rf nginx-${NGINX_VERSION}*\nRUN /usr/local/php/bin/pecl install redis swoole \\\n && echo \"extension=swoole.so\" >> \"$PHP_INI_FILE\" \\\n && echo \"extension=redis.so\" >> \"$PHP_INI_FILE\"\nRUN echo 'install yar' \\\n && wget http://pecl.php.net/get/yar-${YAR_VER}.tgz \\\n && tar xzf yar-${YAR_VER}.tgz \\\n && cd yar-${YAR_VER}/ \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=yar.so\" >> \"$PHP_INI_FILE\" \\\n && cd ../ \\\n && rm -rf yar-${YAR_VER}*\nRUN wget http://download.redis.io/releases/redis-${REDIS_VER}.tar.gz -O /redis-${REDIS_VER}.tar.gz \\\n && echo 'install redis' \\\n && tar xzf /redis-${REDIS_VER}.tar.gz \\\n && cd redis-${REDIS_VER} \\\n && make \\\n && mkdir /usr/local/redis \\\n && cp redis.conf /usr/local/redis/ \\\n && cd src \\\n && cp redis-benchmark redis-check-aof redis-check-rdb redis-cli redis-sentinel redis-server redis-trib.rb /usr/local/redis \\\n && cd / \\\n && rm -rf redis-${REDIS_VER}*\nADD ./run.sh /run.sh\nRUN chmod 755 /run.sh\nCMD /run.sh \\\n && tail -f\nEXPOSE 80/tcp\nEXPOSE 9000/tcp\n#  docker build -t php56-fpm-centos68 -f Dockerfile_online .\n","originalDockerfileUglifiedHash":"9efd4faf9f8d1fafcd843f43bbd73911","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/57467339125341ba57bb0b4cacaa7214c4f02583.dockerfile"}