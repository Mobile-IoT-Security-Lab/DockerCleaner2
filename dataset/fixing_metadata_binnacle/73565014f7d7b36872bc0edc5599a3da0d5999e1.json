{"seed":2732554780,"processedDockerfileHash":"14f45b0f65f30548284c3f23ed5cb36e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile for GTEx RNA-seq pipeline\nFROM ubuntu:16.04\nMAINTAINER Francois Aguet\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.20.10 -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.1ubuntu2 cmake=3.5.1-1ubuntu3 curl=7.47.0-1ubuntu2.19 libboost-all-dev=1.58.0.1ubuntu1 libbz2-dev=1.0.6-8ubuntu0.2 libcurl3-dev liblzma-dev=5.1.1alpha+20120614-2ubuntu2 libncurses5-dev=6.0+20160213-1ubuntu1 libssl-dev=1.0.2g-1ubuntu4.20 openjdk-7-jdk openjdk-8-jdk=8u292-b10-0ubuntu1~16.04.1 python3=3.5.1-3 python3-pip=8.1.1-2ubuntu0.6 unzip=6.0-20ubuntu1.1 vim-common=2:7.4.1689-3ubuntu1.5 wget=1.17.1-1ubuntu1.5 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 -y \\\n && rm -rf /var/lib/apt/lists/*\n#  -----------------------------\n#   Pipeline components\n#  -----------------------------\n#   htslib\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/htslib/releases/download/1.8/htslib-1.8.tar.bz2 \\\n && tar -xf htslib-1.8.tar.bz2 \\\n && rm htslib-1.8.tar.bz2 \\\n && cd htslib-1.8 \\\n && ./configure --enable-libcurl --enable-s3 --enable-plugins --enable-gcs \\\n && make \\\n && make install \\\n && make clean\n#   samtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/samtools/releases/download/1.8/samtools-1.8.tar.bz2 \\\n && tar -xf samtools-1.8.tar.bz2 \\\n && rm samtools-1.8.tar.bz2 \\\n && cd samtools-1.8 \\\n && ./configure --with-htslib=/opt/htslib-1.8 \\\n && make \\\n && make install \\\n && make clean\n#   bamtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/pezmaster31/bamtools/archive/v2.4.1.tar.gz \\\n && tar -xf v2.4.1.tar.gz \\\n && rm v2.4.1.tar.gz \\\n && cd bamtools-2.4.1 \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install \\\n && make clean\nENV LD_LIBRARY_PATH=\"/usr/local/lib/bamtools:$LD_LIBRARY_PATH\"\n#   Picard tools\nRUN mkdir /opt/picard-tools \\\n && wget --no-check-certificate -P /opt/picard-tools/ https://github.com/broadinstitute/picard/releases/download/2.9.0/picard.jar\n#   STAR v2.5.3a\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz \\\n && tar -xf 2.5.3a.tar.gz \\\n && rm 2.5.3a.tar.gz \\\n && make STAR -C STAR-2.5.3a/source \\\n && make STARlong -C STAR-2.5.3a/source \\\n && mv STAR-2.5.3a/source/STAR* STAR-2.5.3a/bin/Linux_x86_64/\nENV PATH=\"/opt/STAR-2.5.3a/bin/Linux_x86_64:$PATH\"\n#   RSEM v1.3.0\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/deweylab/RSEM/archive/v1.3.0.tar.gz \\\n && tar -xvf v1.3.0.tar.gz \\\n && rm v1.3.0.tar.gz \\\n && cd RSEM-1.3.0 \\\n && make\nENV PATH=\"/opt/RSEM-1.3.0:$PATH\"\n#   RNA-SeQC\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/francois-a/rnaseqc/releases/download/v1.1.9/RNA-SeQC_1.1.9.zip \\\n && unzip RNA-SeQC_1.1.9.zip -d RNA-SeQC_1.1.9 \\\n && rm RNA-SeQC_1.1.9.zip\n#   bamsync\nCOPY bamsync /opt/bamsync\nRUN cd /opt/bamsync \\\n && make\nENV PATH=\"/opt/bamsync:$PATH\"\n#   python modules\nRUN pip3 install --upgrade pip\nRUN pip3 install tables numpy pandas feather-format\n#   numpy dependencies:\nRUN pip3 install pyBigWig\n#   kallisto v0.43.1\nRUN cd /opt \\\n && wget https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz \\\n && tar -xf kallisto_linux-v0.43.1.tar.gz \\\n && rm kallisto_linux-v0.43.1.tar.gz\nENV PATH=\"$PATH:/opt/kallisto_linux-v0.43.1\"\n#   bedtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz \\\n && tar -xf bedtools-2.27.1.tar.gz \\\n && rm bedtools-2.27.1.tar.gz \\\n && cd bedtools2 \\\n && make \\\n && make install \\\n && make clean\n#   UCSC tools\nRUN mkdir /opt/ucsc \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bigWigToBedGraph \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bedGraphToBigWig \\\n && chmod 755 /opt/ucsc/*\nENV PATH=\"/opt/ucsc:$PATH\"\n#   gcloud\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends google-cloud-sdk -y\n#   clean up\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/\n#   scripts\nCOPY src src/\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile for GTEx RNA-seq pipeline\nFROM ubuntu:16.04\nMAINTAINER Francois Aguet\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install build-essential cmake curl libboost-all-dev libbz2-dev libcurl3-dev liblzma-dev libncurses5-dev libssl-dev openjdk-7-jdk openjdk-8-jdk python3 python3-pip unzip vim-common wget zlib1g-dev -y \\\n && rm -rf /var/lib/apt/lists/*\n# -----------------------------\n#  Pipeline components\n# -----------------------------\n#  htslib\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/htslib/releases/download/1.8/htslib-1.8.tar.bz2 \\\n && tar -xf htslib-1.8.tar.bz2 \\\n && rm htslib-1.8.tar.bz2 \\\n && cd htslib-1.8 \\\n && ./configure --enable-libcurl --enable-s3 --enable-plugins --enable-gcs \\\n && make \\\n && make install \\\n && make clean\n#  samtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/samtools/releases/download/1.8/samtools-1.8.tar.bz2 \\\n && tar -xf samtools-1.8.tar.bz2 \\\n && rm samtools-1.8.tar.bz2 \\\n && cd samtools-1.8 \\\n && ./configure --with-htslib=/opt/htslib-1.8 \\\n && make \\\n && make install \\\n && make clean\n#  bamtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/pezmaster31/bamtools/archive/v2.4.1.tar.gz \\\n && tar -xf v2.4.1.tar.gz \\\n && rm v2.4.1.tar.gz \\\n && cd bamtools-2.4.1 \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install \\\n && make clean\nENV LD_LIBRARY_PATH=\"/usr/local/lib/bamtools:$LD_LIBRARY_PATH\"\n#  Picard tools\nRUN mkdir /opt/picard-tools \\\n && wget --no-check-certificate -P /opt/picard-tools/ https://github.com/broadinstitute/picard/releases/download/2.9.0/picard.jar\n#  STAR v2.5.3a\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz \\\n && tar -xf 2.5.3a.tar.gz \\\n && rm 2.5.3a.tar.gz \\\n && make STAR -C STAR-2.5.3a/source \\\n && make STARlong -C STAR-2.5.3a/source \\\n && mv STAR-2.5.3a/source/STAR* STAR-2.5.3a/bin/Linux_x86_64/\nENV PATH=\"/opt/STAR-2.5.3a/bin/Linux_x86_64:$PATH\"\n#  RSEM v1.3.0\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/deweylab/RSEM/archive/v1.3.0.tar.gz \\\n && tar -xvf v1.3.0.tar.gz \\\n && rm v1.3.0.tar.gz \\\n && cd RSEM-1.3.0 \\\n && make\nENV PATH=\"/opt/RSEM-1.3.0:$PATH\"\n#  RNA-SeQC\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/francois-a/rnaseqc/releases/download/v1.1.9/RNA-SeQC_1.1.9.zip \\\n && unzip RNA-SeQC_1.1.9.zip -d RNA-SeQC_1.1.9 \\\n && rm RNA-SeQC_1.1.9.zip\n#  bamsync\nCOPY bamsync /opt/bamsync\nRUN cd /opt/bamsync \\\n && make\nENV PATH=\"/opt/bamsync:$PATH\"\n#  python modules\nRUN pip3 install --upgrade pip\nRUN pip3 install tables numpy pandas feather-format\n#  numpy dependencies:\nRUN pip3 install pyBigWig\n#  kallisto v0.43.1\nRUN cd /opt \\\n && wget https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz \\\n && tar -xf kallisto_linux-v0.43.1.tar.gz \\\n && rm kallisto_linux-v0.43.1.tar.gz\nENV PATH=\"$PATH:/opt/kallisto_linux-v0.43.1\"\n#  bedtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz \\\n && tar -xf bedtools-2.27.1.tar.gz \\\n && rm bedtools-2.27.1.tar.gz \\\n && cd bedtools2 \\\n && make \\\n && make install \\\n && make clean\n#  UCSC tools\nRUN mkdir /opt/ucsc \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bigWigToBedGraph \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bedGraphToBigWig \\\n && chmod 755 /opt/ucsc/*\nENV PATH=\"/opt/ucsc:$PATH\"\n#  gcloud\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update -y \\\n && apt-get install google-cloud-sdk -y\n#  clean up\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/\n#  scripts\nCOPY src src/\n","injectedSmells":[],"originalDockerfileHash":"3f26234a84c97dccb57aac28a2df7a1c","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile for GTEx RNA-seq pipeline\nFROM ubuntu:16.04\nMAINTAINER Francois Aguet\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install build-essential cmake curl libboost-all-dev libbz2-dev libcurl3-dev liblzma-dev libncurses5-dev libssl-dev openjdk-7-jdk openjdk-8-jdk python3 python3-pip unzip vim-common wget zlib1g-dev -y \\\n && rm -rf /var/lib/apt/lists/*\n#  -----------------------------\n#   Pipeline components\n#  -----------------------------\n#   htslib\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/htslib/releases/download/1.8/htslib-1.8.tar.bz2 \\\n && tar -xf htslib-1.8.tar.bz2 \\\n && rm htslib-1.8.tar.bz2 \\\n && cd htslib-1.8 \\\n && ./configure --enable-libcurl --enable-s3 --enable-plugins --enable-gcs \\\n && make \\\n && make install \\\n && make clean\n#   samtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/samtools/samtools/releases/download/1.8/samtools-1.8.tar.bz2 \\\n && tar -xf samtools-1.8.tar.bz2 \\\n && rm samtools-1.8.tar.bz2 \\\n && cd samtools-1.8 \\\n && ./configure --with-htslib=/opt/htslib-1.8 \\\n && make \\\n && make install \\\n && make clean\n#   bamtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/pezmaster31/bamtools/archive/v2.4.1.tar.gz \\\n && tar -xf v2.4.1.tar.gz \\\n && rm v2.4.1.tar.gz \\\n && cd bamtools-2.4.1 \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make \\\n && make install \\\n && make clean\nENV LD_LIBRARY_PATH=\"/usr/local/lib/bamtools:$LD_LIBRARY_PATH\"\n#   Picard tools\nRUN mkdir /opt/picard-tools \\\n && wget --no-check-certificate -P /opt/picard-tools/ https://github.com/broadinstitute/picard/releases/download/2.9.0/picard.jar\n#   STAR v2.5.3a\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz \\\n && tar -xf 2.5.3a.tar.gz \\\n && rm 2.5.3a.tar.gz \\\n && make STAR -C STAR-2.5.3a/source \\\n && make STARlong -C STAR-2.5.3a/source \\\n && mv STAR-2.5.3a/source/STAR* STAR-2.5.3a/bin/Linux_x86_64/\nENV PATH=\"/opt/STAR-2.5.3a/bin/Linux_x86_64:$PATH\"\n#   RSEM v1.3.0\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/deweylab/RSEM/archive/v1.3.0.tar.gz \\\n && tar -xvf v1.3.0.tar.gz \\\n && rm v1.3.0.tar.gz \\\n && cd RSEM-1.3.0 \\\n && make\nENV PATH=\"/opt/RSEM-1.3.0:$PATH\"\n#   RNA-SeQC\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/francois-a/rnaseqc/releases/download/v1.1.9/RNA-SeQC_1.1.9.zip \\\n && unzip RNA-SeQC_1.1.9.zip -d RNA-SeQC_1.1.9 \\\n && rm RNA-SeQC_1.1.9.zip\n#   bamsync\nCOPY bamsync /opt/bamsync\nRUN cd /opt/bamsync \\\n && make\nENV PATH=\"/opt/bamsync:$PATH\"\n#   python modules\nRUN pip3 install --upgrade pip\nRUN pip3 install tables numpy pandas feather-format\n#   numpy dependencies:\nRUN pip3 install pyBigWig\n#   kallisto v0.43.1\nRUN cd /opt \\\n && wget https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz \\\n && tar -xf kallisto_linux-v0.43.1.tar.gz \\\n && rm kallisto_linux-v0.43.1.tar.gz\nENV PATH=\"$PATH:/opt/kallisto_linux-v0.43.1\"\n#   bedtools\nRUN cd /opt \\\n && wget --no-check-certificate https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz \\\n && tar -xf bedtools-2.27.1.tar.gz \\\n && rm bedtools-2.27.1.tar.gz \\\n && cd bedtools2 \\\n && make \\\n && make install \\\n && make clean\n#   UCSC tools\nRUN mkdir /opt/ucsc \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bigWigToBedGraph \\\n && wget --no-check-certificate -P /opt/ucsc/ http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bedGraphToBigWig \\\n && chmod 755 /opt/ucsc/*\nENV PATH=\"/opt/ucsc:$PATH\"\n#   gcloud\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update -y \\\n && apt-get install google-cloud-sdk -y\n#   clean up\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/\n#   scripts\nCOPY src src/\n","originalDockerfileUglifiedHash":"b33b80c946092b4590b863e4a23e2d28","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/73565014f7d7b36872bc0edc5599a3da0d5999e1.dockerfile"}