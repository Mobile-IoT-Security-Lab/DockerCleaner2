{"seed":630801025,"processedDockerfileHash":"a9acbb711e2d2e0a6ae71406d2536231","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Dockerfile for Apache/PHP/MySQL\n#\nFROM ubuntu:16.04\nMAINTAINER Azure App Service Container Images <appsvc-images@microsoft.com>\n#   ========\n#   ENV vars\n#   ========\n#   apache httpd\nENV HTTPD_VERSION=\"\\\"2.4.25\\\"\"\nENV HTTPD_DOWNLOAD_URL=\"\\\"https://www.apache.org/dist/httpd/httpd-$HTTPD_VERSION.tar.gz\\\"\"\nENV HTTPD_SHA1=\"\\\"377c62dc6b25c9378221111dec87c28f8fe6ac69\\\"\"\nENV HTTPD_SOURCE=\"\\\"/usr/src/httpd\\\"\"\nENV HTTPD_HOME=\"\\\"/usr/local/httpd\\\"\"\nENV HTTPD_CONF_DIR=\"\\\"$HTTPD_HOME/conf\\\"\"\nENV HTTPD_CONF_FILE=\"\\\"$HTTPD_CONF_DIR/httpd.conf\\\"\"\nENV HTTPD_LOG_DIR=\"/home/LogFiles/httpd\"\nENV PATH=\"\\\"$HTTPD_HOME/bin\\\":$PATH\"\n#   mariadb\nENV MARIADB_DATA_DIR=\"/home/data/mysql\"\nENV MARIADB_LOG_DIR=\"/home/LogFiles/mysql\"\n#   php\nENV PHP_VERSION=\"\\\"7.1.2\\\"\"\nENV PHP_DOWNLOAD_URL=\"\\\"https://secure.php.net/get/php-$PHP_VERSION.tar.gz/from/this/mirror\\\"\"\nENV PHP_SHA256=\"\\\"e6773217c9c719ca22abb104ae3d437d53daceaf31faf2e5eeb1f9f5028005d8\\\"\"\nENV PHP_SOURCE=\"\\\"/usr/src/php\\\"\"\nENV PHP_HOME=\"\\\"/usr/local/php\\\"\"\nENV PHP_CONF_DIR=\"\\\"$PHP_HOME/etc\\\"\"\nENV PHP_CONF_DIR_SCAN=\"\\\"$PHP_CONF_DIR/conf.d\\\"\"\nENV PATH=\"\\\"$PHP_HOME/bin\\\":$PATH\"\n#   phpmyadmin\nENV PHPMYADMIN_VERSION=\"\\\"4.6.6\\\"\"\nENV PHPMYADMIN_DOWNLOAD_URL=\"\\\"https://files.phpmyadmin.net/phpMyAdmin/$PHPMYADMIN_VERSION/phpMyAdmin-$PHPMYADMIN_VERSION-all-languages.tar.gz\\\"\"\nENV PHPMYADMIN_SHA256=\"\\\"54086600558613b31c4daddf4ae58fbc1c252a2b8e3e6fae12f851f78677d72e\\\"\"\nENV PHPMYADMIN_SOURCE=\"\\\"/usr/src/phpmyadmin\\\"\"\nENV PHPMYADMIN_HOME=\"\\\"/home/phpmyadmin\\\"\"\n#   ssh\nENV SSH_PASSWD=\"\\\"root:Docker!\\\"\"\n#   app\nENV APP_HOME=\"\\\"/home/site/wwwroot\\\"\"\n#\nENV DOCKER_BUILD_HOME=\"\\\"/dockerbuild\\\"\"\n#   ====================\n#   Download and Install\n#   ~. tools\n#   1. essentials\n#   2. apache httpd\n#   3. mariadb\n#   4. php\n#   5. phpmyadmin\n#   6. ssh\n#   ====================\nWORKDIR $DOCKER_BUILD_HOME\nRUN set -ex \\\n && tools=\" g++ gcc make pkg-config wget \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $tools -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && essentials=\" ca-certificates \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $essentials -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $HTTPD_SOURCE \\\n && mkdir -p $HTTPD_HOME \\\n && httpdBuildtimeDeps=\" libpcre++-dev libssl-dev \" \\\n && httpdRuntimeDeps=\" libapr1 libaprutil1 libaprutil1-ldap libapr1-dev libaprutil1-dev \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $httpdBuildtimeDeps $httpdRuntimeDeps -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O httpd.tar.gz \"$HTTPD_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$HTTPD_SHA1 *httpd.tar.gz\" | sha1sum -c - \\\n && tar -xf httpd.tar.gz -C $HTTPD_SOURCE --strip-components=1 \\\n && cd $HTTPD_SOURCE \\\n && ./configure --prefix=$HTTPD_HOME --with-mpm=prefork --enable-mods-shared=reallyall --enable-ssl \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $HTTPD_SOURCE $HTTPD_HOME/man $HTTPD_HOME/manual \\\n && rm $DOCKER_BUILD_HOME/httpd.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $httpdBuildtimeDeps \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install mariadb-server -y -V --no-install-recommends \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $PHP_SOURCE \\\n && mkdir -p $PHP_HOME \\\n && phpBuildtimeDeps=\" libbz2-dev libgmp-dev libicu-dev libjpeg-dev libpng12-dev libldap2-dev libmcrypt-dev libmhash-dev libssl-dev libxml2-dev libxslt-dev \" \\\n && phpRuntimeDeps=\" libcurl4-openssl-dev libjpeg8 libpng12-0 libmcrypt4 libxml2 libxslt1.1 \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $phpBuildtimeDeps $phpRuntimeDeps -y -V \\\n && rm -rf /var/lib/apt/lists/* \\\n && ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n && ln -s /usr/lib/x86_64-linux-gnu/libldap.so /usr/lib/libldap.so \\\n && ln -s /usr/lib/x86_64-linux-gnu/liblber.so /usr/lib/liblber.so \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O php.tar.gz \"$PHP_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHP_SHA256 *php.tar.gz\" | sha256sum -c - \\\n && tar -xf php.tar.gz -C $PHP_SOURCE --strip-components=1 \\\n && cd $PHP_SOURCE \\\n && ./configure --prefix=$PHP_HOME --disable-cgi --enable-bcmath --enable-intl --enable-ftp --enable-mbstring --enable-soap --enable-zip --with-apxs2=$HTTPD_HOME/bin/apxs --with-bz2 --with-config-file-path=$PHP_CONF_DIR --with-config-file-scan-dir=$PHP_CONF_DIR_SCAN --with-curl --with-gd --with-jpeg-dir --with-png-dir --with-gmp --with-ldap --with-mcrypt --with-mhash --with-mysqli=mysqlnd --with-openssl --with-pdo-mysql=mysqlnd --with-xsl --with-zlib \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $PHP_SOURCE \\\n && rm -rf $PHP_HOME/php/man \\\n && rm $DOCKER_BUILD_HOME/php.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $phpBuildtimeDeps \\\n && mkdir -p $PHPMYADMIN_SOURCE \\\n && cd $PHPMYADMIN_SOURCE \\\n && wget -O phpmyadmin.tar.gz \"$PHPMYADMIN_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHPMYADMIN_SHA256 *phpmyadmin.tar.gz\" | sha256sum -c - \\\n && apt-get update \\\n && apt-get install --no-install-recommends openssh-server=1:7.2p2-4ubuntu2.10 -y \\\n && echo \"$SSH_PASSWD\" | chpasswd \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $tools \\\n && apt-get autoremove -y\n#   =========\n#   Configure\n#   =========\n#   httpd\nCOPY httpd.conf $HTTPD_CONF_DIR/\nCOPY httpd-modules.conf $HTTPD_CONF_DIR/\nCOPY httpd-php.conf $HTTPD_CONF_DIR/\n#   php\nCOPY php.ini $PHP_CONF_DIR/\nCOPY php-opcache.ini $PHP_CONF_DIR_SCAN/\n#   phpmyadmin\nCOPY httpd-phpmyadmin.conf $HTTPD_CONF_DIR/\nCOPY phpmyadmin-config.inc.php $PHPMYADMIN_SOURCE/\nCOPY mariadb.cnf /etc/mysql/\n#   ssh\nCOPY sshd_config /etc/ssh/\nRUN set -ex \\\n && echo 'Include conf/httpd-php.conf' >> $HTTPD_CONF_FILE \\\n && test ! -d /var/lib/php/sessions \\\n && mkdir -p /var/lib/php/sessions \\\n && chown www-data:www-data /var/lib/php/sessions \\\n && test ! -d /var/www \\\n && mkdir -p /var/www \\\n && chown -R www-data:www-data /var/www \\\n && rm -rf /var/log/httpd \\\n && ln -s $HTTPD_LOG_DIR /var/log/httpd \\\n && rm -rf /var/log/mysql \\\n && ln -s $MARIADB_LOG_DIR /var/log/mysql \\\n && ln -s $PHPMYADMIN_HOME /var/www/phpmyadmin \\\n && ln -s $APP_HOME /var/www/wwwroot\n#   =====\n#   final\n#   =====\nCOPY entrypoint.sh /usr/local/bin/\nRUN chmod u+x /usr/local/bin/entrypoint.sh\nEXPOSE 2222/tcp 80/tcp\nENTRYPOINT [\"entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  Dockerfile for Apache/PHP/MySQL\n#\nFROM ubuntu:16.04\nMAINTAINER Azure App Service Container Images <appsvc-images@microsoft.com>\n#  ========\n#  ENV vars\n#  ========\n#  apache httpd\nENV HTTPD_VERSION=\"\\\"2.4.25\\\"\"\nENV HTTPD_DOWNLOAD_URL=\"\\\"https://www.apache.org/dist/httpd/httpd-$HTTPD_VERSION.tar.gz\\\"\"\nENV HTTPD_SHA1=\"\\\"377c62dc6b25c9378221111dec87c28f8fe6ac69\\\"\"\nENV HTTPD_SOURCE=\"\\\"/usr/src/httpd\\\"\"\nENV HTTPD_HOME=\"\\\"/usr/local/httpd\\\"\"\nENV HTTPD_CONF_DIR=\"\\\"$HTTPD_HOME/conf\\\"\"\nENV HTTPD_CONF_FILE=\"\\\"$HTTPD_CONF_DIR/httpd.conf\\\"\"\nENV HTTPD_LOG_DIR=\"/home/LogFiles/httpd\"\nENV PATH=\"\\\"$HTTPD_HOME/bin\\\":$PATH\"\n#  mariadb\nENV MARIADB_DATA_DIR=\"/home/data/mysql\"\nENV MARIADB_LOG_DIR=\"/home/LogFiles/mysql\"\n#  php\nENV PHP_VERSION=\"\\\"7.1.2\\\"\"\nENV PHP_DOWNLOAD_URL=\"\\\"https://secure.php.net/get/php-$PHP_VERSION.tar.gz/from/this/mirror\\\"\"\nENV PHP_SHA256=\"\\\"e6773217c9c719ca22abb104ae3d437d53daceaf31faf2e5eeb1f9f5028005d8\\\"\"\nENV PHP_SOURCE=\"\\\"/usr/src/php\\\"\"\nENV PHP_HOME=\"\\\"/usr/local/php\\\"\"\nENV PHP_CONF_DIR=\"\\\"$PHP_HOME/etc\\\"\"\nENV PHP_CONF_DIR_SCAN=\"\\\"$PHP_CONF_DIR/conf.d\\\"\"\nENV PATH=\"\\\"$PHP_HOME/bin\\\":$PATH\"\n#  phpmyadmin\nENV PHPMYADMIN_VERSION=\"\\\"4.6.6\\\"\"\nENV PHPMYADMIN_DOWNLOAD_URL=\"\\\"https://files.phpmyadmin.net/phpMyAdmin/$PHPMYADMIN_VERSION/phpMyAdmin-$PHPMYADMIN_VERSION-all-languages.tar.gz\\\"\"\nENV PHPMYADMIN_SHA256=\"\\\"54086600558613b31c4daddf4ae58fbc1c252a2b8e3e6fae12f851f78677d72e\\\"\"\nENV PHPMYADMIN_SOURCE=\"\\\"/usr/src/phpmyadmin\\\"\"\nENV PHPMYADMIN_HOME=\"\\\"/home/phpmyadmin\\\"\"\n#  ssh\nENV SSH_PASSWD=\"\\\"root:Docker!\\\"\"\n#  app\nENV APP_HOME=\"\\\"/home/site/wwwroot\\\"\"\n#\nENV DOCKER_BUILD_HOME=\"\\\"/dockerbuild\\\"\"\n#  ====================\n#  Download and Install\n#  ~. tools\n#  1. essentials\n#  2. apache httpd\n#  3. mariadb\n#  4. php\n#  5. phpmyadmin\n#  6. ssh\n#  ====================\nWORKDIR $DOCKER_BUILD_HOME\nRUN set -ex \\\n && tools=\" g++ gcc make pkg-config wget \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $tools -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && essentials=\" ca-certificates \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $essentials -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $HTTPD_SOURCE \\\n && mkdir -p $HTTPD_HOME \\\n && httpdBuildtimeDeps=\" libpcre++-dev libssl-dev \" \\\n && httpdRuntimeDeps=\" libapr1 libaprutil1 libaprutil1-ldap libapr1-dev libaprutil1-dev \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $httpdBuildtimeDeps $httpdRuntimeDeps -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O httpd.tar.gz \"$HTTPD_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$HTTPD_SHA1 *httpd.tar.gz\" | sha1sum -c - \\\n && tar -xf httpd.tar.gz -C $HTTPD_SOURCE --strip-components=1 \\\n && cd $HTTPD_SOURCE \\\n && ./configure --prefix=$HTTPD_HOME --with-mpm=prefork --enable-mods-shared=reallyall --enable-ssl \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $HTTPD_SOURCE $HTTPD_HOME/man $HTTPD_HOME/manual \\\n && rm $DOCKER_BUILD_HOME/httpd.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $httpdBuildtimeDeps \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install mariadb-server -y -V --no-install-recommends \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $PHP_SOURCE \\\n && mkdir -p $PHP_HOME \\\n && phpBuildtimeDeps=\" libbz2-dev libgmp-dev libicu-dev libjpeg-dev libpng12-dev libldap2-dev libmcrypt-dev libmhash-dev libssl-dev libxml2-dev libxslt-dev \" \\\n && phpRuntimeDeps=\" libcurl4-openssl-dev libjpeg8 libpng12-0 libmcrypt4 libxml2 libxslt1.1 \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $phpBuildtimeDeps $phpRuntimeDeps -y -V \\\n && rm -rf /var/lib/apt/lists/* \\\n && ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n && ln -s /usr/lib/x86_64-linux-gnu/libldap.so /usr/lib/libldap.so \\\n && ln -s /usr/lib/x86_64-linux-gnu/liblber.so /usr/lib/liblber.so \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O php.tar.gz \"$PHP_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHP_SHA256 *php.tar.gz\" | sha256sum -c - \\\n && tar -xf php.tar.gz -C $PHP_SOURCE --strip-components=1 \\\n && cd $PHP_SOURCE \\\n && ./configure --prefix=$PHP_HOME --disable-cgi --enable-bcmath --enable-intl --enable-ftp --enable-mbstring --enable-soap --enable-zip --with-apxs2=$HTTPD_HOME/bin/apxs --with-bz2 --with-config-file-path=$PHP_CONF_DIR --with-config-file-scan-dir=$PHP_CONF_DIR_SCAN --with-curl --with-gd --with-jpeg-dir --with-png-dir --with-gmp --with-ldap --with-mcrypt --with-mhash --with-mysqli=mysqlnd --with-openssl --with-pdo-mysql=mysqlnd --with-xsl --with-zlib \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $PHP_SOURCE \\\n && rm -rf $PHP_HOME/php/man \\\n && rm $DOCKER_BUILD_HOME/php.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $phpBuildtimeDeps \\\n && mkdir -p $PHPMYADMIN_SOURCE \\\n && cd $PHPMYADMIN_SOURCE \\\n && wget -O phpmyadmin.tar.gz \"$PHPMYADMIN_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHPMYADMIN_SHA256 *phpmyadmin.tar.gz\" | sha256sum -c - \\\n && apt-get update \\\n && apt-get install --no-install-recommends openssh-server -y \\\n && echo \"$SSH_PASSWD\" | chpasswd \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $tools \\\n && apt-get autoremove -y\n#  =========\n#  Configure\n#  =========\n#  httpd\nCOPY httpd.conf $HTTPD_CONF_DIR/\nCOPY httpd-modules.conf $HTTPD_CONF_DIR/\nCOPY httpd-php.conf $HTTPD_CONF_DIR/\n#  php\nCOPY php.ini $PHP_CONF_DIR/\nCOPY php-opcache.ini $PHP_CONF_DIR_SCAN/\n#  phpmyadmin\nCOPY httpd-phpmyadmin.conf $HTTPD_CONF_DIR/\nCOPY phpmyadmin-config.inc.php $PHPMYADMIN_SOURCE/\nCOPY mariadb.cnf /etc/mysql/\n#  ssh\nCOPY sshd_config /etc/ssh/\nRUN set -ex \\\n && echo 'Include conf/httpd-php.conf' >> $HTTPD_CONF_FILE \\\n && test ! -d /var/lib/php/sessions \\\n && mkdir -p /var/lib/php/sessions \\\n && chown www-data:www-data /var/lib/php/sessions \\\n && test ! -d /var/www \\\n && mkdir -p /var/www \\\n && chown -R www-data:www-data /var/www \\\n && rm -rf /var/log/httpd \\\n && ln -s $HTTPD_LOG_DIR /var/log/httpd \\\n && rm -rf /var/log/mysql \\\n && ln -s $MARIADB_LOG_DIR /var/log/mysql \\\n && ln -s $PHPMYADMIN_HOME /var/www/phpmyadmin \\\n && ln -s $APP_HOME /var/www/wwwroot\n#  =====\n#  final\n#  =====\nCOPY entrypoint.sh /usr/local/bin/\nRUN chmod u+x /usr/local/bin/entrypoint.sh\nEXPOSE 2222/tcp 80/tcp\nENTRYPOINT [\"entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"346a0f981b2ee60e4b708fda25994281","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Dockerfile for Apache/PHP/MySQL\n#\nFROM ubuntu:16.04\nMAINTAINER Azure App Service Container Images <appsvc-images@microsoft.com>\n#   ========\n#   ENV vars\n#   ========\n#   apache httpd\nENV HTTPD_VERSION=\"\\\"2.4.25\\\"\"\nENV HTTPD_DOWNLOAD_URL=\"\\\"https://www.apache.org/dist/httpd/httpd-$HTTPD_VERSION.tar.gz\\\"\"\nENV HTTPD_SHA1=\"\\\"377c62dc6b25c9378221111dec87c28f8fe6ac69\\\"\"\nENV HTTPD_SOURCE=\"\\\"/usr/src/httpd\\\"\"\nENV HTTPD_HOME=\"\\\"/usr/local/httpd\\\"\"\nENV HTTPD_CONF_DIR=\"\\\"$HTTPD_HOME/conf\\\"\"\nENV HTTPD_CONF_FILE=\"\\\"$HTTPD_CONF_DIR/httpd.conf\\\"\"\nENV HTTPD_LOG_DIR=\"/home/LogFiles/httpd\"\nENV PATH=\"\\\"$HTTPD_HOME/bin\\\":$PATH\"\n#   mariadb\nENV MARIADB_DATA_DIR=\"/home/data/mysql\"\nENV MARIADB_LOG_DIR=\"/home/LogFiles/mysql\"\n#   php\nENV PHP_VERSION=\"\\\"7.1.2\\\"\"\nENV PHP_DOWNLOAD_URL=\"\\\"https://secure.php.net/get/php-$PHP_VERSION.tar.gz/from/this/mirror\\\"\"\nENV PHP_SHA256=\"\\\"e6773217c9c719ca22abb104ae3d437d53daceaf31faf2e5eeb1f9f5028005d8\\\"\"\nENV PHP_SOURCE=\"\\\"/usr/src/php\\\"\"\nENV PHP_HOME=\"\\\"/usr/local/php\\\"\"\nENV PHP_CONF_DIR=\"\\\"$PHP_HOME/etc\\\"\"\nENV PHP_CONF_DIR_SCAN=\"\\\"$PHP_CONF_DIR/conf.d\\\"\"\nENV PATH=\"\\\"$PHP_HOME/bin\\\":$PATH\"\n#   phpmyadmin\nENV PHPMYADMIN_VERSION=\"\\\"4.6.6\\\"\"\nENV PHPMYADMIN_DOWNLOAD_URL=\"\\\"https://files.phpmyadmin.net/phpMyAdmin/$PHPMYADMIN_VERSION/phpMyAdmin-$PHPMYADMIN_VERSION-all-languages.tar.gz\\\"\"\nENV PHPMYADMIN_SHA256=\"\\\"54086600558613b31c4daddf4ae58fbc1c252a2b8e3e6fae12f851f78677d72e\\\"\"\nENV PHPMYADMIN_SOURCE=\"\\\"/usr/src/phpmyadmin\\\"\"\nENV PHPMYADMIN_HOME=\"\\\"/home/phpmyadmin\\\"\"\n#   ssh\nENV SSH_PASSWD=\"\\\"root:Docker!\\\"\"\n#   app\nENV APP_HOME=\"\\\"/home/site/wwwroot\\\"\"\n#\nENV DOCKER_BUILD_HOME=\"\\\"/dockerbuild\\\"\"\n#   ====================\n#   Download and Install\n#   ~. tools\n#   1. essentials\n#   2. apache httpd\n#   3. mariadb\n#   4. php\n#   5. phpmyadmin\n#   6. ssh\n#   ====================\nWORKDIR $DOCKER_BUILD_HOME\nRUN set -ex \\\n && tools=\" g++ gcc make pkg-config wget \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $tools -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && essentials=\" ca-certificates \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $essentials -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $HTTPD_SOURCE \\\n && mkdir -p $HTTPD_HOME \\\n && httpdBuildtimeDeps=\" libpcre++-dev libssl-dev \" \\\n && httpdRuntimeDeps=\" libapr1 libaprutil1 libaprutil1-ldap libapr1-dev libaprutil1-dev \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $httpdBuildtimeDeps $httpdRuntimeDeps -y -V \\\n && rm -r /var/lib/apt/lists/* \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O httpd.tar.gz \"$HTTPD_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$HTTPD_SHA1 *httpd.tar.gz\" | sha1sum -c - \\\n && tar -xf httpd.tar.gz -C $HTTPD_SOURCE --strip-components=1 \\\n && cd $HTTPD_SOURCE \\\n && ./configure --prefix=$HTTPD_HOME --with-mpm=prefork --enable-mods-shared=reallyall --enable-ssl \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $HTTPD_SOURCE $HTTPD_HOME/man $HTTPD_HOME/manual \\\n && rm $DOCKER_BUILD_HOME/httpd.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $httpdBuildtimeDeps \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install mariadb-server -y -V --no-install-recommends \\\n && rm -r /var/lib/apt/lists/* \\\n && mkdir -p $PHP_SOURCE \\\n && mkdir -p $PHP_HOME \\\n && phpBuildtimeDeps=\" libbz2-dev libgmp-dev libicu-dev libjpeg-dev libpng12-dev libldap2-dev libmcrypt-dev libmhash-dev libssl-dev libxml2-dev libxslt-dev \" \\\n && phpRuntimeDeps=\" libcurl4-openssl-dev libjpeg8 libpng12-0 libmcrypt4 libxml2 libxslt1.1 \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $phpBuildtimeDeps $phpRuntimeDeps -y -V \\\n && rm -rf /var/lib/apt/lists/* \\\n && ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n && ln -s /usr/lib/x86_64-linux-gnu/libldap.so /usr/lib/libldap.so \\\n && ln -s /usr/lib/x86_64-linux-gnu/liblber.so /usr/lib/liblber.so \\\n && cd $DOCKER_BUILD_HOME \\\n && wget -O php.tar.gz \"$PHP_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHP_SHA256 *php.tar.gz\" | sha256sum -c - \\\n && tar -xf php.tar.gz -C $PHP_SOURCE --strip-components=1 \\\n && cd $PHP_SOURCE \\\n && ./configure --prefix=$PHP_HOME --disable-cgi --enable-bcmath --enable-intl --enable-ftp --enable-mbstring --enable-soap --enable-zip --with-apxs2=$HTTPD_HOME/bin/apxs --with-bz2 --with-config-file-path=$PHP_CONF_DIR --with-config-file-scan-dir=$PHP_CONF_DIR_SCAN --with-curl --with-gd --with-jpeg-dir --with-png-dir --with-gmp --with-ldap --with-mcrypt --with-mhash --with-mysqli=mysqlnd --with-openssl --with-pdo-mysql=mysqlnd --with-xsl --with-zlib \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && rm -rf $PHP_SOURCE \\\n && rm -rf $PHP_HOME/php/man \\\n && rm $DOCKER_BUILD_HOME/php.tar.gz \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $phpBuildtimeDeps \\\n && mkdir -p $PHPMYADMIN_SOURCE \\\n && cd $PHPMYADMIN_SOURCE \\\n && wget -O phpmyadmin.tar.gz \"$PHPMYADMIN_DOWNLOAD_URL\" --no-check-certificate \\\n && echo \"$PHPMYADMIN_SHA256 *phpmyadmin.tar.gz\" | sha256sum -c - \\\n && apt-get update \\\n && apt-get install --no-install-recommends openssh-server -y \\\n && echo \"$SSH_PASSWD\" | chpasswd \\\n && apt-get purge -y -V -o APT::AutoRemove::RecommendsImportant=false --auto-remove $tools \\\n && apt-get autoremove -y\n#   =========\n#   Configure\n#   =========\n#   httpd\nCOPY httpd.conf $HTTPD_CONF_DIR/\nCOPY httpd-modules.conf $HTTPD_CONF_DIR/\nCOPY httpd-php.conf $HTTPD_CONF_DIR/\n#   php\nCOPY php.ini $PHP_CONF_DIR/\nCOPY php-opcache.ini $PHP_CONF_DIR_SCAN/\n#   phpmyadmin\nCOPY httpd-phpmyadmin.conf $HTTPD_CONF_DIR/\nCOPY phpmyadmin-config.inc.php $PHPMYADMIN_SOURCE/\nCOPY mariadb.cnf /etc/mysql/\n#   ssh\nCOPY sshd_config /etc/ssh/\nRUN set -ex \\\n && echo 'Include conf/httpd-php.conf' >> $HTTPD_CONF_FILE \\\n && test ! -d /var/lib/php/sessions \\\n && mkdir -p /var/lib/php/sessions \\\n && chown www-data:www-data /var/lib/php/sessions \\\n && test ! -d /var/www \\\n && mkdir -p /var/www \\\n && chown -R www-data:www-data /var/www \\\n && rm -rf /var/log/httpd \\\n && ln -s $HTTPD_LOG_DIR /var/log/httpd \\\n && rm -rf /var/log/mysql \\\n && ln -s $MARIADB_LOG_DIR /var/log/mysql \\\n && ln -s $PHPMYADMIN_HOME /var/www/phpmyadmin \\\n && ln -s $APP_HOME /var/www/wwwroot\n#   =====\n#   final\n#   =====\nCOPY entrypoint.sh /usr/local/bin/\nRUN chmod u+x /usr/local/bin/entrypoint.sh\nEXPOSE 2222/tcp 80/tcp\nENTRYPOINT [\"entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"2a8eeec3699dec1962abfe58e492d52e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f9fa26720575cd3ad12ab95d200d8036db53f357.dockerfile"}