{"seed":1093220296,"processedDockerfileHash":"812aa2af72c7625531662fee05ddfdf6","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#  #  \n#  # MariaDB 10.1  \n#  #  \nFROM centos:7\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>  \n#  #  \n#  # Labels  \n#  #  \nLABEL name=\"cytopia's MariaDB 10.1 Image\" \\\n      image=\"mariadb-10.1\" \\\n      vendor=\"cytopia\" \\\n      license=\"MIT\" \\\n      build-date=\"2017-09-28\"\n#  ##  \n#  ## Envs  \n#  ##  \n#   User/Group  \nENV MY_USER=\"mysql\"\nENV MY_GROUP=\"mysql\"\nENV MY_UID=\"48\"\nENV MY_GID=\"48\"\n#   Files  \nENV MYSQL_BASE_INCL=\"/etc/my.cnf.d\"\nENV MYSQL_CUST_INCL1=\"/etc/mysql/conf.d\"\nENV MYSQL_CUST_INCL2=\"/etc/mysql/docker-default.d\"\nENV MYSQL_DEF_DAT=\"/var/lib/mysql\"\nENV MYSQL_DEF_LOG=\"/var/log/mysql\"\nENV MYSQL_DEF_PID=\"/var/run/mysqld\"\nENV MYSQL_DEF_SCK=\"/var/sock/mysqld\"\nENV MYSQL_LOG_SLOW=\"${MYSQL_DEF_LOG}/slow.log\"\nENV MYSQL_LOG_ERROR=\"${MYSQL_DEF_LOG}/error.log\"\nENV MYSQL_LOG_QUERY=\"${MYSQL_DEF_LOG}/query.log\"\n#  ##  \n#  ## Install  \n#  ##  \nRUN groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && adduser ${MY_USER} -u ${MY_UID} -M -s /sbin/nologin -g ${MY_GROUP}\nRUN { echo \"# MariaDB 10.1 CentOS repository list - created 2016-10-28 06:40 UTC\" ;echo \"# http://downloads.mariadb.org/mariadb/repositories/\" ;echo \"[mariadb]\" ;echo \"name = MariaDB\" ;echo \"baseurl = http://yum.mariadb.org/10.1/centos7-amd64\" ;echo \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" ;echo \"gpgcheck=1\" ; } > /etc/yum.repos.d/mariadb-10.1.repo \\\n && yum clean all\nRUN yum -y update \\\n && yum -y install MariaDB-server\nRUN yum -y autoremove \\\n && yum clean metadata \\\n && yum clean all \\\n && yum -y install hostname \\\n && yum clean all\n#  #  \n#  # Configure  \n#  #  \nRUN rm -rf ${MYSQL_BASE_INCL} \\\n && rm -rf ${MYSQL_CUST_INCL1} \\\n && rm -rf ${MYSQL_CUST_INCL2} \\\n && rm -rf ${MYSQL_DEF_DAT} \\\n && rm -rf ${MYSQL_DEF_SCK} \\\n && rm -rf ${MYSQL_DEF_PID} \\\n && rm -rf ${MYSQL_DEF_LOG} \\\n && mkdir -p ${MYSQL_BASE_INCL} \\\n && mkdir -p ${MYSQL_CUST_INCL1} \\\n && mkdir -p ${MYSQL_CUST_INCL2} \\\n && mkdir -p ${MYSQL_DEF_DAT} \\\n && mkdir -p ${MYSQL_DEF_SCK} \\\n && mkdir -p ${MYSQL_DEF_PID} \\\n && mkdir -p ${MYSQL_DEF_LOG} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_BASE_INCL} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL1} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL2} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_DAT} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_SCK} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_PID} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_LOG} \\\n && chmod 0775 ${MYSQL_BASE_INCL} \\\n && chmod 0775 ${MYSQL_CUST_INCL1} \\\n && chmod 0775 ${MYSQL_CUST_INCL2} \\\n && chmod 0775 ${MYSQL_DEF_DAT} \\\n && chmod 0775 ${MYSQL_DEF_SCK} \\\n && chmod 0775 ${MYSQL_DEF_PID} \\\n && chmod 0775 ${MYSQL_DEF_LOG}\nRUN echo \"[client]\" > /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysql]\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysqld]\" >> /etc/my.cnf \\\n && echo \"skip-host-cache\" >> /etc/my.cnf \\\n && echo \"skip-name-resolve\" >> /etc/my.cnf \\\n && echo \"datadir = ${MYSQL_DEF_DAT}\" >> /etc/my.cnf \\\n && echo \"user = ${MY_USER}\" >> /etc/my.cnf \\\n && echo \"port = 3306\" >> /etc/my.cnf \\\n && echo \"bind-address = 0.0.0.0\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"pid-file = ${MYSQL_DEF_PID}/mysqld.pid\" >> /etc/my.cnf \\\n && echo \"general_log_file = ${MYSQL_LOG_QUERY}\" >> /etc/my.cnf \\\n && echo \"slow_query_log_file = ${MYSQL_LOG_SLOW}\" >> /etc/my.cnf \\\n && echo \"log-error = ${MYSQL_LOG_ERROR}\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_BASE_INCL}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL1}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL2}/\" >> /etc/my.cnf\n#  #  \n#  # Bootstrap Scipts  \n#  #  \nCOPY ./scripts/docker-entrypoint.sh /\n#  #  \n#  # Ports  \n#  #  \nEXPOSE 3306/tcp\n#  #  \n#  # Volumes  \n#  #  \nVOLUME /var/lib/mysql  \nVOLUME /var/log/mysql  \nVOLUME /var/sock/mysqld  \nVOLUME /etc/mysql/conf.d  \nVOLUME /etc/mysql/docker-default.d  \n#  #  \n#  # Entrypoint  \n#  #  \nENTRYPOINT [\"/docker-entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# #  \n# # MariaDB 10.1  \n# #  \nFROM centos:7\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>  \n# #  \n# # Labels  \n# #  \nLABEL name=\"cytopia's MariaDB 10.1 Image\" \\\n      image=\"mariadb-10.1\" \\\n      vendor=\"cytopia\" \\\n      license=\"MIT\" \\\n      build-date=\"2017-09-28\"\n# ##  \n# ## Envs  \n# ##  \n#  User/Group  \nENV MY_USER=\"mysql\"\nENV MY_GROUP=\"mysql\"\nENV MY_UID=\"48\"\nENV MY_GID=\"48\"\n#  Files  \nENV MYSQL_BASE_INCL=\"/etc/my.cnf.d\"\nENV MYSQL_CUST_INCL1=\"/etc/mysql/conf.d\"\nENV MYSQL_CUST_INCL2=\"/etc/mysql/docker-default.d\"\nENV MYSQL_DEF_DAT=\"/var/lib/mysql\"\nENV MYSQL_DEF_LOG=\"/var/log/mysql\"\nENV MYSQL_DEF_PID=\"/var/run/mysqld\"\nENV MYSQL_DEF_SCK=\"/var/sock/mysqld\"\nENV MYSQL_LOG_SLOW=\"${MYSQL_DEF_LOG}/slow.log\"\nENV MYSQL_LOG_ERROR=\"${MYSQL_DEF_LOG}/error.log\"\nENV MYSQL_LOG_QUERY=\"${MYSQL_DEF_LOG}/query.log\"\n# ##  \n# ## Install  \n# ##  \nRUN groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && adduser ${MY_USER} -u ${MY_UID} -M -s /sbin/nologin -g ${MY_GROUP}\nRUN { echo \"# MariaDB 10.1 CentOS repository list - created 2016-10-28 06:40 UTC\" ;echo \"# http://downloads.mariadb.org/mariadb/repositories/\" ;echo \"[mariadb]\" ;echo \"name = MariaDB\" ;echo \"baseurl = http://yum.mariadb.org/10.1/centos7-amd64\" ;echo \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" ;echo \"gpgcheck=1\" ; } > /etc/yum.repos.d/mariadb-10.1.repo \\\n && yum clean all\nRUN yum -y update \\\n && yum -y install MariaDB-server\nRUN yum -y autoremove \\\n && yum clean metadata \\\n && yum clean all \\\n && yum -y install hostname \\\n && yum clean all\n# #  \n# # Configure  \n# #  \nRUN rm -rf ${MYSQL_BASE_INCL} \\\n && rm -rf ${MYSQL_CUST_INCL1} \\\n && rm -rf ${MYSQL_CUST_INCL2} \\\n && rm -rf ${MYSQL_DEF_DAT} \\\n && rm -rf ${MYSQL_DEF_SCK} \\\n && rm -rf ${MYSQL_DEF_PID} \\\n && rm -rf ${MYSQL_DEF_LOG} \\\n && mkdir -p ${MYSQL_BASE_INCL} \\\n && mkdir -p ${MYSQL_CUST_INCL1} \\\n && mkdir -p ${MYSQL_CUST_INCL2} \\\n && mkdir -p ${MYSQL_DEF_DAT} \\\n && mkdir -p ${MYSQL_DEF_SCK} \\\n && mkdir -p ${MYSQL_DEF_PID} \\\n && mkdir -p ${MYSQL_DEF_LOG} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_BASE_INCL} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL1} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL2} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_DAT} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_SCK} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_PID} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_LOG} \\\n && chmod 0775 ${MYSQL_BASE_INCL} \\\n && chmod 0775 ${MYSQL_CUST_INCL1} \\\n && chmod 0775 ${MYSQL_CUST_INCL2} \\\n && chmod 0775 ${MYSQL_DEF_DAT} \\\n && chmod 0775 ${MYSQL_DEF_SCK} \\\n && chmod 0775 ${MYSQL_DEF_PID} \\\n && chmod 0775 ${MYSQL_DEF_LOG}\nRUN echo \"[client]\" > /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysql]\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysqld]\" >> /etc/my.cnf \\\n && echo \"skip-host-cache\" >> /etc/my.cnf \\\n && echo \"skip-name-resolve\" >> /etc/my.cnf \\\n && echo \"datadir = ${MYSQL_DEF_DAT}\" >> /etc/my.cnf \\\n && echo \"user = ${MY_USER}\" >> /etc/my.cnf \\\n && echo \"port = 3306\" >> /etc/my.cnf \\\n && echo \"bind-address = 0.0.0.0\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"pid-file = ${MYSQL_DEF_PID}/mysqld.pid\" >> /etc/my.cnf \\\n && echo \"general_log_file = ${MYSQL_LOG_QUERY}\" >> /etc/my.cnf \\\n && echo \"slow_query_log_file = ${MYSQL_LOG_SLOW}\" >> /etc/my.cnf \\\n && echo \"log-error = ${MYSQL_LOG_ERROR}\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_BASE_INCL}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL1}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL2}/\" >> /etc/my.cnf\n# #  \n# # Bootstrap Scipts  \n# #  \nCOPY ./scripts/docker-entrypoint.sh /\n# #  \n# # Ports  \n# #  \nEXPOSE 3306/tcp\n# #  \n# # Volumes  \n# #  \nVOLUME /var/lib/mysql  \nVOLUME /var/log/mysql  \nVOLUME /var/sock/mysqld  \nVOLUME /etc/mysql/conf.d  \nVOLUME /etc/mysql/docker-default.d  \n# #  \n# # Entrypoint  \n# #  \nENTRYPOINT [\"/docker-entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"aa2728c779d10324350f2457412937c8","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  #  \n#  # MariaDB 10.1  \n#  #  \nFROM centos:7\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>  \n#  #  \n#  # Labels  \n#  #  \nLABEL name=\"cytopia's MariaDB 10.1 Image\" \\\n      image=\"mariadb-10.1\" \\\n      vendor=\"cytopia\" \\\n      license=\"MIT\" \\\n      build-date=\"2017-09-28\"\n#  ##  \n#  ## Envs  \n#  ##  \n#   User/Group  \nENV MY_USER=\"mysql\"\nENV MY_GROUP=\"mysql\"\nENV MY_UID=\"48\"\nENV MY_GID=\"48\"\n#   Files  \nENV MYSQL_BASE_INCL=\"/etc/my.cnf.d\"\nENV MYSQL_CUST_INCL1=\"/etc/mysql/conf.d\"\nENV MYSQL_CUST_INCL2=\"/etc/mysql/docker-default.d\"\nENV MYSQL_DEF_DAT=\"/var/lib/mysql\"\nENV MYSQL_DEF_LOG=\"/var/log/mysql\"\nENV MYSQL_DEF_PID=\"/var/run/mysqld\"\nENV MYSQL_DEF_SCK=\"/var/sock/mysqld\"\nENV MYSQL_LOG_SLOW=\"${MYSQL_DEF_LOG}/slow.log\"\nENV MYSQL_LOG_ERROR=\"${MYSQL_DEF_LOG}/error.log\"\nENV MYSQL_LOG_QUERY=\"${MYSQL_DEF_LOG}/query.log\"\n#  ##  \n#  ## Install  \n#  ##  \nRUN groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && adduser ${MY_USER} -u ${MY_UID} -M -s /sbin/nologin -g ${MY_GROUP}\nRUN { echo \"# MariaDB 10.1 CentOS repository list - created 2016-10-28 06:40 UTC\" ;echo \"# http://downloads.mariadb.org/mariadb/repositories/\" ;echo \"[mariadb]\" ;echo \"name = MariaDB\" ;echo \"baseurl = http://yum.mariadb.org/10.1/centos7-amd64\" ;echo \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" ;echo \"gpgcheck=1\" ; } > /etc/yum.repos.d/mariadb-10.1.repo \\\n && yum clean all\nRUN yum -y update \\\n && yum -y install MariaDB-server\nRUN yum -y autoremove \\\n && yum clean metadata \\\n && yum clean all \\\n && yum -y install hostname \\\n && yum clean all\n#  #  \n#  # Configure  \n#  #  \nRUN rm -rf ${MYSQL_BASE_INCL} \\\n && rm -rf ${MYSQL_CUST_INCL1} \\\n && rm -rf ${MYSQL_CUST_INCL2} \\\n && rm -rf ${MYSQL_DEF_DAT} \\\n && rm -rf ${MYSQL_DEF_SCK} \\\n && rm -rf ${MYSQL_DEF_PID} \\\n && rm -rf ${MYSQL_DEF_LOG} \\\n && mkdir -p ${MYSQL_BASE_INCL} \\\n && mkdir -p ${MYSQL_CUST_INCL1} \\\n && mkdir -p ${MYSQL_CUST_INCL2} \\\n && mkdir -p ${MYSQL_DEF_DAT} \\\n && mkdir -p ${MYSQL_DEF_SCK} \\\n && mkdir -p ${MYSQL_DEF_PID} \\\n && mkdir -p ${MYSQL_DEF_LOG} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_BASE_INCL} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL1} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_CUST_INCL2} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_DAT} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_SCK} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_PID} \\\n && chown -R ${MY_USER}:${MY_GROUP} ${MYSQL_DEF_LOG} \\\n && chmod 0775 ${MYSQL_BASE_INCL} \\\n && chmod 0775 ${MYSQL_CUST_INCL1} \\\n && chmod 0775 ${MYSQL_CUST_INCL2} \\\n && chmod 0775 ${MYSQL_DEF_DAT} \\\n && chmod 0775 ${MYSQL_DEF_SCK} \\\n && chmod 0775 ${MYSQL_DEF_PID} \\\n && chmod 0775 ${MYSQL_DEF_LOG}\nRUN echo \"[client]\" > /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysql]\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"[mysqld]\" >> /etc/my.cnf \\\n && echo \"skip-host-cache\" >> /etc/my.cnf \\\n && echo \"skip-name-resolve\" >> /etc/my.cnf \\\n && echo \"datadir = ${MYSQL_DEF_DAT}\" >> /etc/my.cnf \\\n && echo \"user = ${MY_USER}\" >> /etc/my.cnf \\\n && echo \"port = 3306\" >> /etc/my.cnf \\\n && echo \"bind-address = 0.0.0.0\" >> /etc/my.cnf \\\n && echo \"socket = ${MYSQL_DEF_SCK}/mysqld.sock\" >> /etc/my.cnf \\\n && echo \"pid-file = ${MYSQL_DEF_PID}/mysqld.pid\" >> /etc/my.cnf \\\n && echo \"general_log_file = ${MYSQL_LOG_QUERY}\" >> /etc/my.cnf \\\n && echo \"slow_query_log_file = ${MYSQL_LOG_SLOW}\" >> /etc/my.cnf \\\n && echo \"log-error = ${MYSQL_LOG_ERROR}\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_BASE_INCL}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL1}/\" >> /etc/my.cnf \\\n && echo \"!includedir ${MYSQL_CUST_INCL2}/\" >> /etc/my.cnf\n#  #  \n#  # Bootstrap Scipts  \n#  #  \nCOPY ./scripts/docker-entrypoint.sh /\n#  #  \n#  # Ports  \n#  #  \nEXPOSE 3306/tcp\n#  #  \n#  # Volumes  \n#  #  \nVOLUME /var/lib/mysql  \nVOLUME /var/log/mysql  \nVOLUME /var/sock/mysqld  \nVOLUME /etc/mysql/conf.d  \nVOLUME /etc/mysql/docker-default.d  \n#  #  \n#  # Entrypoint  \n#  #  \nENTRYPOINT [\"/docker-entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"576b0797d2333e087bc69da89df25252","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/294aba1e0d43c5a879ca7052664c0b19b5306c02.dockerfile"}