{"seed":1087735478,"processedDockerfileHash":"befb240170bba61aac105be0eb887095","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ###########################################################\n#   Dockerfile for the BachBot project\n#   Based on Ubuntu\n#\n#   Building, pushing, and running:\n#     docker build -f Dockerfile -t bachbot:base .\n#     docker tag <tag of last container> fliang/bachbot:base\n#     docker push fliang/bachbot:base\n#     docker run -it --net=host fliang/bachbot:base\n#   visit localhost:8888\n#  ###########################################################\nFROM ubuntu:14.04\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nMAINTAINER Feynman Liang \"feynman.liang@gmail.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBCONF_NONINTERACTIVE_SEEN=\"true\"\n#   Required packages\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends build-essential=11.6ubuntu6 python2.7-dev=2.7.6-8ubuntu0.5 git=1:1.9.1-1ubuntu0.10 ssh=1:6.6p1-2ubuntu2.13 libhdf5-dev=1.8.11-5ubuntu7.1 libssl-dev=1.0.1f-1ubuntu2.27 libxml2-dev=2.9.1+dfsg1-3ubuntu4.13 libxslt-dev software-properties-common=0.92.37.8 vim=2:7.4.052-1ubuntu3.1 pkg-config=0.26-1ubuntu4 gfortran=4:4.8.2-1ubuntu6 libopenblas-dev=0.2.8-6ubuntu1 liblapack-dev=3.5.0-2ubuntu1 python-numpy=1:1.8.2-0ubuntu0.1 python-scipy=0.13.3-1build1 python-matplotlib=1.3.1-1ubuntu5.1 python-nose=1.3.1-2 libbz2-dev=1.0.6-5 libfreetype6-dev=2.5.2-1ubuntu2.8 zsh=5.0.2-3ubuntu6.3 -y )\n#   Torch and luarocks\nRUN git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b\nENV LUA_PATH=\"~/.luarocks/share/lua/5.1/?.lua;~/.luarocks/share/lua/5.1/?/init.lua;~/torch/install/share/lua/5.1/?.lua;~/torch/install/share/lua/5.1/?/init.lua;./?.lua;~/torch/install/share/luajit-2.1.0-beta1/?.lua;/usr/local/share/lua/5.1/?.lua;/usr/local/share/lua/5.1/?/init.lua\"\nENV LUA_CPATH=\"~/.luarocks/lib/lua/5.1/?.so;~/torch/install/lib/lua/5.1/?.so;./?.so;/usr/local/lib/lua/5.1/?.so;/usr/local/lib/lua/5.1/loadall.so\"\nENV PATH=\"~/torch/install/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"~/torch/install/lib:$LD_LIBRARY_PATH\"\nENV DYLD_LIBRARY_PATH=\"~/torch/install/lib:$DYLD_LIBRARY_PATH\"\nENV LUA_CPATH=\"~/torch/install/lib/?.so;$LUA_CPATH\"\n#  Lua requirements\nRUN luarocks install nn\nRUN luarocks install optim\nRUN luarocks install lua-cjson\n#   Torch-hdf5\nRUN git clone https://github.com/deepmind/torch-hdf5 ~/torch-hdf5 \\\n && cd ~/torch-hdf5 \\\n && luarocks make hdf5-0-0.rockspec\n#   pip\nRUN (apt-get update ;apt-get install --no-install-recommends python-pip=1.5.4-1ubuntu4 -y )\nRUN pip install pip==23.1 --upgrade\n#  torch-rnn and python requirements\nRUN luarocks install luautf8\nRUN git clone https://github.com/feynmanliang/torch-rnn ~/torch-rnn\nRUN pip install -r ~/torch-rnn/requirements.txt\n#  Element-Research/rnn\n#   RUN luarocks install rnn\n#  BachBot\nRUN git clone https://github.com/feynmanliang/bachbot.git ~/bachbot\nRUN cd ~/bachbot \\\n && pip install -r requirements.txt \\\n && pip install --editable scripts\n#   Clean tmps\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* ~/torch-hdf5\n#   Make Required DIRs\nRUN mkdir ~/bachbot/scratch\nRUN mkdir ~/bachbot/scratch/out\nRUN mkdir ~/bachbot/logs\n#  #################### INSTALLATION END #####################\nEXPOSE 8888/tcp\nWORKDIR /root/bachbot\nCOPY start.sh .\n#  CMD [\"jupyter\", \"notebook\", \"--port=8888\", \"--no-browser\", \"--ip=0.0.0.0\"]\nCMD [\"./start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ###########################################################\n#  Dockerfile for the BachBot project\n#  Based on Ubuntu\n#\n#  Building, pushing, and running:\n#    docker build -f Dockerfile -t bachbot:base .\n#    docker tag <tag of last container> fliang/bachbot:base\n#    docker push fliang/bachbot:base\n#    docker run -it --net=host fliang/bachbot:base\n#  visit localhost:8888\n# ###########################################################\nFROM ubuntu:14.04\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nMAINTAINER Feynman Liang \"feynman.liang@gmail.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBCONF_NONINTERACTIVE_SEEN=\"true\"\n#  Required packages\nRUN apt-get update\nRUN apt-get install build-essential python2.7-dev git ssh libhdf5-dev libssl-dev libxml2-dev libxslt-dev software-properties-common vim pkg-config gfortran libopenblas-dev liblapack-dev python-numpy python-scipy python-matplotlib python-nose libbz2-dev libfreetype6-dev zsh -y\n#  Torch and luarocks\nRUN git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b\nENV LUA_PATH=\"~/.luarocks/share/lua/5.1/?.lua;~/.luarocks/share/lua/5.1/?/init.lua;~/torch/install/share/lua/5.1/?.lua;~/torch/install/share/lua/5.1/?/init.lua;./?.lua;~/torch/install/share/luajit-2.1.0-beta1/?.lua;/usr/local/share/lua/5.1/?.lua;/usr/local/share/lua/5.1/?/init.lua\"\nENV LUA_CPATH=\"~/.luarocks/lib/lua/5.1/?.so;~/torch/install/lib/lua/5.1/?.so;./?.so;/usr/local/lib/lua/5.1/?.so;/usr/local/lib/lua/5.1/loadall.so\"\nENV PATH=\"~/torch/install/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"~/torch/install/lib:$LD_LIBRARY_PATH\"\nENV DYLD_LIBRARY_PATH=\"~/torch/install/lib:$DYLD_LIBRARY_PATH\"\nENV LUA_CPATH=\"~/torch/install/lib/?.so;$LUA_CPATH\"\n# Lua requirements\nRUN luarocks install nn\nRUN luarocks install optim\nRUN luarocks install lua-cjson\n#  Torch-hdf5\nRUN git clone https://github.com/deepmind/torch-hdf5 ~/torch-hdf5 \\\n && cd ~/torch-hdf5 \\\n && luarocks make hdf5-0-0.rockspec\n#  pip\nRUN apt-get install python-pip -y\nRUN pip install pip --upgrade\n# torch-rnn and python requirements\nRUN luarocks install luautf8\nRUN git clone https://github.com/feynmanliang/torch-rnn ~/torch-rnn\nRUN pip install -r ~/torch-rnn/requirements.txt\n# Element-Research/rnn\n#  RUN luarocks install rnn\n# BachBot\nRUN git clone https://github.com/feynmanliang/bachbot.git ~/bachbot\nRUN cd ~/bachbot \\\n && pip install -r requirements.txt \\\n && pip install --editable scripts\n#  Clean tmps\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* ~/torch-hdf5\n#  Make Required DIRs\nRUN mkdir ~/bachbot/scratch\nRUN mkdir ~/bachbot/scratch/out\nRUN mkdir ~/bachbot/logs\n# #################### INSTALLATION END #####################\nEXPOSE 8888/tcp\nWORKDIR /root/bachbot\nCOPY start.sh .\n# CMD [\"jupyter\", \"notebook\", \"--port=8888\", \"--no-browser\", \"--ip=0.0.0.0\"]\nCMD [\"./start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"abc7d864571672e80b3d356840d586b6","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ###########################################################\n#   Dockerfile for the BachBot project\n#   Based on Ubuntu\n#\n#   Building, pushing, and running:\n#     docker build -f Dockerfile -t bachbot:base .\n#     docker tag <tag of last container> fliang/bachbot:base\n#     docker push fliang/bachbot:base\n#     docker run -it --net=host fliang/bachbot:base\n#   visit localhost:8888\n#  ###########################################################\nFROM ubuntu:14.04\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nMAINTAINER Feynman Liang \"feynman.liang@gmail.com\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBCONF_NONINTERACTIVE_SEEN=\"true\"\n#   Required packages\nRUN apt-get update\nRUN apt-get install build-essential python2.7-dev git ssh libhdf5-dev libssl-dev libxml2-dev libxslt-dev software-properties-common vim pkg-config gfortran libopenblas-dev liblapack-dev python-numpy python-scipy python-matplotlib python-nose libbz2-dev libfreetype6-dev zsh -y\n#   Torch and luarocks\nRUN git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b\nENV LUA_PATH=\"~/.luarocks/share/lua/5.1/?.lua;~/.luarocks/share/lua/5.1/?/init.lua;~/torch/install/share/lua/5.1/?.lua;~/torch/install/share/lua/5.1/?/init.lua;./?.lua;~/torch/install/share/luajit-2.1.0-beta1/?.lua;/usr/local/share/lua/5.1/?.lua;/usr/local/share/lua/5.1/?/init.lua\"\nENV LUA_CPATH=\"~/.luarocks/lib/lua/5.1/?.so;~/torch/install/lib/lua/5.1/?.so;./?.so;/usr/local/lib/lua/5.1/?.so;/usr/local/lib/lua/5.1/loadall.so\"\nENV PATH=\"~/torch/install/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"~/torch/install/lib:$LD_LIBRARY_PATH\"\nENV DYLD_LIBRARY_PATH=\"~/torch/install/lib:$DYLD_LIBRARY_PATH\"\nENV LUA_CPATH=\"~/torch/install/lib/?.so;$LUA_CPATH\"\n#  Lua requirements\nRUN luarocks install nn\nRUN luarocks install optim\nRUN luarocks install lua-cjson\n#   Torch-hdf5\nRUN git clone https://github.com/deepmind/torch-hdf5 ~/torch-hdf5 \\\n && cd ~/torch-hdf5 \\\n && luarocks make hdf5-0-0.rockspec\n#   pip\nRUN apt-get install python-pip -y\nRUN pip install pip --upgrade\n#  torch-rnn and python requirements\nRUN luarocks install luautf8\nRUN git clone https://github.com/feynmanliang/torch-rnn ~/torch-rnn\nRUN pip install -r ~/torch-rnn/requirements.txt\n#  Element-Research/rnn\n#   RUN luarocks install rnn\n#  BachBot\nRUN git clone https://github.com/feynmanliang/bachbot.git ~/bachbot\nRUN cd ~/bachbot \\\n && pip install -r requirements.txt \\\n && pip install --editable scripts\n#   Clean tmps\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* ~/torch-hdf5\n#   Make Required DIRs\nRUN mkdir ~/bachbot/scratch\nRUN mkdir ~/bachbot/scratch/out\nRUN mkdir ~/bachbot/logs\n#  #################### INSTALLATION END #####################\nEXPOSE 8888/tcp\nWORKDIR /root/bachbot\nCOPY start.sh .\n#  CMD [\"jupyter\", \"notebook\", \"--port=8888\", \"--no-browser\", \"--ip=0.0.0.0\"]\nCMD [\"./start.sh\"]\n","originalDockerfileUglifiedHash":"5126422728fa1c2608ebb3623ee116bb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cc8d817f38acbcc0169cbbd111fb3da4440e246e.dockerfile"}