{"seed":1382219972,"processedDockerfileHash":"f308b2ebc486462e19ebed5fdc5fca03","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:wheezy\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2 apache2-utils apache2-mpm-prefork apache2-prefork-dev -y \\\n && rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && rm -rf /var/lib/apt/lists/*\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist\nCOPY apache2.conf /etc/apache2/apache2.conf\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2=/usr/bin/apxs2\"\nENV PHP_VERSION=\"5.6.6\"\nENV buildDeps=\"  bzip2  file  libcurl4-openssl-dev  libreadline6-dev  libssl-dev  libxml2-dev  ca-certificates  curl  libxml2  autoconf  gcc  libc-dev  make  pkg-config  \"\nRUN gpg --keyserver pool.sks-keyservers.net --recv-keys 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 0BD78B5F97500D450838F95DFE857D9A90D90EC1\nRUN set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o php.tar.bz2 \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o php.tar.bz2.asc \\\n && gpg --verify php.tar.bz2.asc \\\n && mkdir -p /usr/src/php \\\n && tar -xf php.tar.bz2 -C /usr/src/php --strip-components=1 \\\n && rm php.tar.bz2* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  autoconf  gcc  make  rsync  libpng12-dev  libmcrypt-dev  libxml2-dev  libssl-dev  curl  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  curl  libssl-dev  libxml2-dev  ca-certificates  make  autoconf  gcc  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nRUN apt-get update \\\n && apt-get install --no-install-recommends libxml2 libpng12-dev mcrypt curl libmcrypt4 less -y \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 9000/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile written by 10up <sales@10up.com>\n#\n#  Work derived from official PHP Docker Library:\n#  Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:wheezy\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2 apache2-utils apache2-mpm-prefork apache2-prefork-dev -y \\\n && rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && rm -rf /var/lib/apt/lists/*\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist\nCOPY apache2.conf /etc/apache2/apache2.conf\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2=/usr/bin/apxs2\"\nENV PHP_VERSION=\"5.6.6\"\nENV buildDeps=\"  bzip2  file  libcurl4-openssl-dev  libreadline6-dev  libssl-dev  libxml2-dev  ca-certificates  curl  libxml2  autoconf  gcc  libc-dev  make  pkg-config  \"\nRUN gpg --keyserver pool.sks-keyservers.net --recv-keys 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 0BD78B5F97500D450838F95DFE857D9A90D90EC1\nRUN set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o php.tar.bz2 \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o php.tar.bz2.asc \\\n && gpg --verify php.tar.bz2.asc \\\n && mkdir -p /usr/src/php \\\n && tar -xf php.tar.bz2 -C /usr/src/php --strip-components=1 \\\n && rm php.tar.bz2* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  autoconf  gcc  make  rsync  libpng12-dev  libmcrypt-dev  libxml2-dev  libssl-dev  curl  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  curl  libssl-dev  libxml2-dev  ca-certificates  make  autoconf  gcc  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nRUN apt-get update \\\n && apt-get install --no-install-recommends libxml2 libpng12-dev mcrypt curl libmcrypt4 less -y \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 9000/tcp\n","injectedSmells":[],"originalDockerfileHash":"2dd084585c9b9b1d649dc5d0526300c4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:wheezy\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2 apache2-utils apache2-mpm-prefork apache2-prefork-dev -y \\\n && rm -rf /var/www/html \\\n && mkdir -p /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && chown -R www-data:www-data /var/lock/apache2 /var/run/apache2 /var/log/apache2 /var/www/html \\\n && rm -rf /var/lib/apt/lists/*\nRUN mv /etc/apache2/apache2.conf /etc/apache2/apache2.conf.dist\nCOPY apache2.conf /etc/apache2/apache2.conf\nENV PHP_EXTRA_BUILD_DEPS=\"apache2-dev\"\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--with-apxs2=/usr/bin/apxs2\"\nENV PHP_VERSION=\"5.6.6\"\nENV buildDeps=\"  bzip2  file  libcurl4-openssl-dev  libreadline6-dev  libssl-dev  libxml2-dev  ca-certificates  curl  libxml2  autoconf  gcc  libc-dev  make  pkg-config  \"\nRUN gpg --keyserver pool.sks-keyservers.net --recv-keys 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 0BD78B5F97500D450838F95DFE857D9A90D90EC1\nRUN set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o php.tar.bz2 \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o php.tar.bz2.asc \\\n && gpg --verify php.tar.bz2.asc \\\n && mkdir -p /usr/src/php \\\n && tar -xf php.tar.bz2 -C /usr/src/php --strip-components=1 \\\n && rm php.tar.bz2* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  autoconf  gcc  make  rsync  libpng12-dev  libmcrypt-dev  libxml2-dev  libssl-dev  curl  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  curl  libssl-dev  libxml2-dev  ca-certificates  make  autoconf  gcc  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nRUN apt-get update \\\n && apt-get install --no-install-recommends libxml2 libpng12-dev mcrypt curl libmcrypt4 less -y \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 9000/tcp\n","originalDockerfileUglifiedHash":"d083d1678818d325c148a3c74a2f87a9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/116a43e71c0997fbe52266cbe0f93cac7fb53a8a.dockerfile"}