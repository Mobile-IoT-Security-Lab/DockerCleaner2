{"seed":4145805901,"processedDockerfileHash":"db1e34fc2a6b0bbfe80707d36ba7e8cd","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM php:7.2-cli\nENV PHP_MEMORY_LIMIT=\"2G\"\nENV MAGENTO_ROOT=\"/app\"\nENV DEBUG=\"false\"\nENV MAGENTO_RUN_MODE=\"production\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV PHP_EXTENSIONS=\"bcmath bz2 calendar exif gd gettext intl mysqli opcache pdo_mysql redis soap sockets sysvmsg sysvsem sysvshm xsl zip pcntl\"\n#   Install dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends apt-utils=1.8.2.3 sendmail-bin=8.15.2-14~deb10u1 sendmail=8.15.2-14~deb10u1 sudo=1.8.27-1+deb10u5 cron=3.0pl1-134+deb10u1 rsyslog=8.1901.0-1+deb10u2 mysql-client git=1:2.20.1-2+deb10u8 redis-tools=5:5.0.14-1+deb10u3 nano=3.2-3 unzip=6.0-23+deb10u3 vim=2:8.1.0875-5+deb10u4 libbz2-dev=1.0.6-9.2~deb10u2 libjpeg62-turbo-dev=1:1.5.2-2+deb10u1 libpng-dev=1.6.36-6 libfreetype6-dev=2.9.1-3+deb10u3 libgeoip-dev=1.6.12-1 wget=1.20.1-1.1 libgmp-dev=2:6.1.2+dfsg-4+deb10u1 libmagickwand-dev=8:6.9.10.23+dfsg-2.1+deb10u4 libmagickcore-dev=8:6.9.10.23+dfsg-2.1+deb10u4 libc-client-dev libkrb5-dev=1.17-3+deb10u5 libicu-dev=63.1-6+deb10u3 libldap2-dev=2.4.47+dfsg-3+deb10u7 libpspell-dev=0.60.7~20110707-6+deb10u1 librecode0=3.6-23 librecode-dev=3.6-23 libssh2-1=1.8.0-2.1 libssh2-1-dev=1.8.0-2.1 libtidy-dev=2:5.6.0-10 libxslt1-dev=1.1.32-2.2~deb10u2 libyaml-dev=0.2.1-1 libzip-dev=1.5.1-4 zip=3.0-11+b1 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Configure the gd library\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/\nRUN docker-php-ext-configure imap --with-kerberos --with-imap-ssl\nRUN docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu\nRUN docker-php-ext-configure opcache --enable-opcache\nRUN docker-php-ext-configure zip --with-libzip\n#   Install required PHP extensions\nRUN docker-php-ext-install -j$( nproc ;) bcmath bz2 calendar exif gd gettext gmp imap intl ldap mysqli opcache pdo_mysql pspell recode shmop soap sockets sysvmsg sysvsem sysvshm tidy xmlrpc xsl zip pcntl\nRUN pecl install -o -f geoip-1.1.1 igbinary imagick mailparse msgpack oauth propro raphf redis ssh2-1.1.2 xdebug-2.6.1 yaml\nRUN rm -f /usr/local/etc/php/conf.d/*sodium.ini \\\n && rm -f /usr/local/lib/php/extensions/*/*sodium.so \\\n && apt-get remove libsodium* -y \\\n && mkdir -p /tmp/libsodium \\\n && curl -sL https://github.com/jedisct1/libsodium/archive/1.0.18-RELEASE.tar.gz | tar xzf - -C /tmp/libsodium \\\n && cd /tmp/libsodium/libsodium-1.0.18-RELEASE/ \\\n && ./configure \\\n && make \\\n && make check \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/libsodium \\\n && pecl install -o -f libsodium\nRUN docker-php-ext-enable bcmath bz2 calendar exif gd geoip gettext gmp igbinary imagick imap intl ldap mailparse msgpack mysqli oauth opcache pdo_mysql propro pspell raphf recode redis shmop soap sockets sodium ssh2 sysvmsg sysvsem sysvshm tidy xdebug xmlrpc xsl yaml zip pcntl\nCOPY etc/php-cli.ini /usr/local/etc/php/conf.d/zz-magento.ini\nCOPY etc/php-xdebug.ini /usr/local/etc/php/conf.d/zz-xdebug-settings.ini\nCOPY etc/mail.ini /usr/local/etc/php/conf.d/zz-mail.ini\nVOLUME /root/.composer/cache\n#   Get composer installed to /usr/local/bin/composer\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nCOPY bin/* /usr/local/bin/\nCOPY docker-entrypoint.sh /docker-entrypoint.sh\nRUN [\"chmod\", \"+x\", \"/docker-entrypoint.sh\"]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-installer\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/ece-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-build\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-deploy\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/run-cron\"]\nWORKDIR ${MAGENTO_ROOT}\nCMD [\"bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"FROM php:7.2-cli\nENV PHP_MEMORY_LIMIT=\"2G\"\nENV MAGENTO_ROOT=\"/app\"\nENV DEBUG=\"false\"\nENV MAGENTO_RUN_MODE=\"production\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV PHP_EXTENSIONS=\"bcmath bz2 calendar exif gd gettext intl mysqli opcache pdo_mysql redis soap sockets sysvmsg sysvsem sysvshm xsl zip pcntl\"\n#  Install dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends apt-utils sendmail-bin sendmail sudo cron rsyslog mysql-client git redis-tools nano unzip vim libbz2-dev libjpeg62-turbo-dev libpng-dev libfreetype6-dev libgeoip-dev wget libgmp-dev libmagickwand-dev libmagickcore-dev libc-client-dev libkrb5-dev libicu-dev libldap2-dev libpspell-dev librecode0 librecode-dev libssh2-1 libssh2-1-dev libtidy-dev libxslt1-dev libyaml-dev libzip-dev zip -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Configure the gd library\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/\nRUN docker-php-ext-configure imap --with-kerberos --with-imap-ssl\nRUN docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu\nRUN docker-php-ext-configure opcache --enable-opcache\nRUN docker-php-ext-configure zip --with-libzip\n#  Install required PHP extensions\nRUN docker-php-ext-install -j$( nproc ;) bcmath bz2 calendar exif gd gettext gmp imap intl ldap mysqli opcache pdo_mysql pspell recode shmop soap sockets sysvmsg sysvsem sysvshm tidy xmlrpc xsl zip pcntl\nRUN pecl install -o -f geoip-1.1.1 igbinary imagick mailparse msgpack oauth propro raphf redis ssh2-1.1.2 xdebug-2.6.1 yaml\nRUN rm -f /usr/local/etc/php/conf.d/*sodium.ini \\\n && rm -f /usr/local/lib/php/extensions/*/*sodium.so \\\n && apt-get remove libsodium* -y \\\n && mkdir -p /tmp/libsodium \\\n && curl -sL https://github.com/jedisct1/libsodium/archive/1.0.18-RELEASE.tar.gz | tar xzf - -C /tmp/libsodium \\\n && cd /tmp/libsodium/libsodium-1.0.18-RELEASE/ \\\n && ./configure \\\n && make \\\n && make check \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/libsodium \\\n && pecl install -o -f libsodium\nRUN docker-php-ext-enable bcmath bz2 calendar exif gd geoip gettext gmp igbinary imagick imap intl ldap mailparse msgpack mysqli oauth opcache pdo_mysql propro pspell raphf recode redis shmop soap sockets sodium ssh2 sysvmsg sysvsem sysvshm tidy xdebug xmlrpc xsl yaml zip pcntl\nADD etc/php-cli.ini /usr/local/etc/php/conf.d/zz-magento.ini\nADD etc/php-xdebug.ini /usr/local/etc/php/conf.d/zz-xdebug-settings.ini\nADD etc/mail.ini /usr/local/etc/php/conf.d/zz-mail.ini\nVOLUME /root/.composer/cache\n#  Get composer installed to /usr/local/bin/composer\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nADD bin/* /usr/local/bin/\nADD docker-entrypoint.sh /docker-entrypoint.sh\nRUN [\"chmod\", \"+x\", \"/docker-entrypoint.sh\"]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-installer\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/ece-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-build\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-deploy\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/run-cron\"]\nWORKDIR ${MAGENTO_ROOT}\nCMD [\"bash\"]\n","injectedSmells":[],"originalDockerfileHash":"4d1d741d2ad3d4cad40fb4c2f71bfa4d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM php:7.2-cli\nENV PHP_MEMORY_LIMIT=\"2G\"\nENV MAGENTO_ROOT=\"/app\"\nENV DEBUG=\"false\"\nENV MAGENTO_RUN_MODE=\"production\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV PHP_EXTENSIONS=\"bcmath bz2 calendar exif gd gettext intl mysqli opcache pdo_mysql redis soap sockets sysvmsg sysvsem sysvshm xsl zip pcntl\"\n#   Install dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends apt-utils sendmail-bin sendmail sudo cron rsyslog mysql-client git redis-tools nano unzip vim libbz2-dev libjpeg62-turbo-dev libpng-dev libfreetype6-dev libgeoip-dev wget libgmp-dev libmagickwand-dev libmagickcore-dev libc-client-dev libkrb5-dev libicu-dev libldap2-dev libpspell-dev librecode0 librecode-dev libssh2-1 libssh2-1-dev libtidy-dev libxslt1-dev libyaml-dev libzip-dev zip -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Configure the gd library\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/\nRUN docker-php-ext-configure imap --with-kerberos --with-imap-ssl\nRUN docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu\nRUN docker-php-ext-configure opcache --enable-opcache\nRUN docker-php-ext-configure zip --with-libzip\n#   Install required PHP extensions\nRUN docker-php-ext-install -j$( nproc ;) bcmath bz2 calendar exif gd gettext gmp imap intl ldap mysqli opcache pdo_mysql pspell recode shmop soap sockets sysvmsg sysvsem sysvshm tidy xmlrpc xsl zip pcntl\nRUN pecl install -o -f geoip-1.1.1 igbinary imagick mailparse msgpack oauth propro raphf redis ssh2-1.1.2 xdebug-2.6.1 yaml\nRUN rm -f /usr/local/etc/php/conf.d/*sodium.ini \\\n && rm -f /usr/local/lib/php/extensions/*/*sodium.so \\\n && apt-get remove libsodium* -y \\\n && mkdir -p /tmp/libsodium \\\n && curl -sL https://github.com/jedisct1/libsodium/archive/1.0.18-RELEASE.tar.gz | tar xzf - -C /tmp/libsodium \\\n && cd /tmp/libsodium/libsodium-1.0.18-RELEASE/ \\\n && ./configure \\\n && make \\\n && make check \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/libsodium \\\n && pecl install -o -f libsodium\nRUN docker-php-ext-enable bcmath bz2 calendar exif gd geoip gettext gmp igbinary imagick imap intl ldap mailparse msgpack mysqli oauth opcache pdo_mysql propro pspell raphf recode redis shmop soap sockets sodium ssh2 sysvmsg sysvsem sysvshm tidy xdebug xmlrpc xsl yaml zip pcntl\nADD etc/php-cli.ini /usr/local/etc/php/conf.d/zz-magento.ini\nADD etc/php-xdebug.ini /usr/local/etc/php/conf.d/zz-xdebug-settings.ini\nADD etc/mail.ini /usr/local/etc/php/conf.d/zz-mail.ini\nVOLUME /root/.composer/cache\n#   Get composer installed to /usr/local/bin/composer\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nADD bin/* /usr/local/bin/\nADD docker-entrypoint.sh /docker-entrypoint.sh\nRUN [\"chmod\", \"+x\", \"/docker-entrypoint.sh\"]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-installer\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/magento-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/ece-command\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-build\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/cloud-deploy\"]\nRUN [\"chmod\", \"+x\", \"/usr/local/bin/run-cron\"]\nWORKDIR ${MAGENTO_ROOT}\nCMD [\"bash\"]\n","originalDockerfileUglifiedHash":"0311a21e5859a75b40b928e4735a0193","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1e410500c9034fe8c77900c9a4c77e199d1c0b76.dockerfile"}