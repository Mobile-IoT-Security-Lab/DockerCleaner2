{"seed":2422476784,"processedDockerfileHash":"e4b27f3b1d6c7dffd741ad538370138c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   template with supervisord\n#\n#   VERSION               0.0.1\n#\n#\nFROM ubuntu:trusty\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\n#   Mirros: http://ftp.acc.umu.se/ubuntu/ http://us.archive.ubuntu.com/ubuntu/\nRUN echo \"deb http://ftp.acc.umu.se/ubuntu/ trusty-updates main restricted\" >> /etc/apt/source.list\nRUN :\n#   Some good utils\nRUN (apt-get update ;apt-get install --no-install-recommends wget=1.15-1ubuntu1.14.04.5 nano=2.2.6-1ubuntu1 curl=7.35.0-1ubuntu2.20 git=1:1.9.1-1ubuntu0.10 -y )\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN (apt-get update ;apt-get install --no-install-recommends python=2.7.5-5ubuntu3 python-setuptools=3.3-1ubuntu2 -y )\nRUN easy_install supervisor\nCOPY ./etc-supervisord.conf /etc/supervisord.conf\nCOPY ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#   Install pip (for python)\n#\nRUN easy_install pip\n#\n#   Install rsyslog\n#   ---------------\nRUN (apt-get update ;apt-get install --no-install-recommends rsyslog=7.4.4-1ubuntu2.7 -y )\nCOPY ./etc-rsyslog.conf /etc/rsyslog.conf\n#\n#   Install cron and batches\n#   ------------------------\n#   Run backup job every hour\n#  ADD ./backup.sh /\n#  RUN echo '0 1 * * *  /bin/bash -c \"/backup.sh\"' > /mycron\n#   Run job every minute\nRUN echo '*/1 * * * * /bin/bash -c \"/batches.sh\"' >> /mycron\n#  RUN crontab /mycron\nCOPY ./etc-pam.d-cron /etc/pam.d/cron\n#\n#   Install Apache\n#   ---------------\nRUN (apt-get update ;apt-get install --no-install-recommends apache2=2.4.7-1ubuntu4.22 apache2-dev=2.4.7-1ubuntu4.22 -y )\nRUN a2enmod rewrite status\nCOPY ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nCOPY ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Some pre-requisites\n#   ------------------\nRUN (apt-get update ;apt-get install --no-install-recommends build-essential=11.6ubuntu6 python-dev=2.7.5-5ubuntu3 -y )\nRUN (apt-get update ;apt-get install --no-install-recommends python-cairo=1.8.8-1ubuntu5 python-django=1.6.11-0ubuntu1.3 python-twisted=13.2.0-1ubuntu1.2 -y )\nRUN pip install django-tagging==0.5.0\nRUN easy_install --upgrade pytz\nRUN (apt-get update ;apt-get install --no-install-recommends fontconfig=2.11.0-0ubuntu4.2 python-fontconfig=0.5.1-1build1 -y )\n#\n#   Install graphite\n#   ----------------\nRUN pip install https://github.com/graphite-project/ceres/tarball/master\nRUN pip install whisper==1.1.10\nRUN pip install carbon==1.1.10\nRUN pip install graphite-web==1.1.10\nEXPOSE 80/tcp 443/tcp\nCMD [\"supervisord\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  template with supervisord\n#\n#  VERSION               0.0.1\n#\n#\nFROM ubuntu:trusty\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\n#  Mirros: http://ftp.acc.umu.se/ubuntu/ http://us.archive.ubuntu.com/ubuntu/\nRUN echo \"deb http://ftp.acc.umu.se/ubuntu/ trusty-updates main restricted\" >> /etc/apt/source.list\nRUN apt-get update\n#  Some good utils\nRUN apt-get install wget nano curl git -y\n#  Install supervisord (used to handle processes)\n#  ----------------------------------------------\n#\n#  Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#  Install pip (for python)\n#\nRUN easy_install pip\n#\n#  Install rsyslog\n#  ---------------\nRUN apt-get install rsyslog -y\nADD ./etc-rsyslog.conf /etc/rsyslog.conf\n#\n#  Install cron and batches\n#  ------------------------\n#  Run backup job every hour\n# ADD ./backup.sh /\n# RUN echo '0 1 * * *  /bin/bash -c \"/backup.sh\"' > /mycron\n#  Run job every minute\nRUN echo '*/1 * * * * /bin/bash -c \"/batches.sh\"' >> /mycron\n# RUN crontab /mycron\nADD ./etc-pam.d-cron /etc/pam.d/cron\n#\n#  Install Apache\n#  ---------------\nRUN apt-get install apache2 apache2-dev -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#  Some pre-requisites\n#  ------------------\nRUN apt-get install build-essential python-dev -y\nRUN apt-get install python-cairo python-django python-twisted -y\nRUN pip install django-tagging\nRUN easy_install --upgrade pytz\nRUN apt-get install fontconfig python-fontconfig -y\n#\n#  Install graphite\n#  ----------------\nRUN pip install https://github.com/graphite-project/ceres/tarball/master\nRUN pip install whisper\nRUN pip install carbon\nRUN pip install graphite-web\nEXPOSE 80/tcp 443/tcp\nCMD [\"supervisord\"]\n","injectedSmells":[],"originalDockerfileHash":"225477326490fcc21bd5465d90640ff0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   template with supervisord\n#\n#   VERSION               0.0.1\n#\n#\nFROM ubuntu:trusty\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\n#   Mirros: http://ftp.acc.umu.se/ubuntu/ http://us.archive.ubuntu.com/ubuntu/\nRUN echo \"deb http://ftp.acc.umu.se/ubuntu/ trusty-updates main restricted\" >> /etc/apt/source.list\nRUN apt-get update\n#   Some good utils\nRUN apt-get install wget nano curl git -y\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\n#\n#   Install pip (for python)\n#\nRUN easy_install pip\n#\n#   Install rsyslog\n#   ---------------\nRUN apt-get install rsyslog -y\nADD ./etc-rsyslog.conf /etc/rsyslog.conf\n#\n#   Install cron and batches\n#   ------------------------\n#   Run backup job every hour\n#  ADD ./backup.sh /\n#  RUN echo '0 1 * * *  /bin/bash -c \"/backup.sh\"' > /mycron\n#   Run job every minute\nRUN echo '*/1 * * * * /bin/bash -c \"/batches.sh\"' >> /mycron\n#  RUN crontab /mycron\nADD ./etc-pam.d-cron /etc/pam.d/cron\n#\n#   Install Apache\n#   ---------------\nRUN apt-get install apache2 apache2-dev -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Some pre-requisites\n#   ------------------\nRUN apt-get install build-essential python-dev -y\nRUN apt-get install python-cairo python-django python-twisted -y\nRUN pip install django-tagging\nRUN easy_install --upgrade pytz\nRUN apt-get install fontconfig python-fontconfig -y\n#\n#   Install graphite\n#   ----------------\nRUN pip install https://github.com/graphite-project/ceres/tarball/master\nRUN pip install whisper\nRUN pip install carbon\nRUN pip install graphite-web\nEXPOSE 80/tcp 443/tcp\nCMD [\"supervisord\"]\n","originalDockerfileUglifiedHash":"53d7b864a820579cc842f4e304aae380","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ecee0fb803b150ea316c844d7695fea3afdc2702.dockerfile"}