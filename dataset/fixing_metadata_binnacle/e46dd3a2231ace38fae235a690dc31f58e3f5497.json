{"seed":233020692,"processedDockerfileHash":"8778dab0e53e637bbb9747eb0e8789bd","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7\nMAINTAINER Andrew Bauer <zonexpertconsulting@outlook.com>\n#   Get the entrypoint script\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /usr/local/bin/ https://raw.githubusercontent.com/ZoneMinder/zmdockerfiles/master/utils/entrypoint.sh\n#  # Dependencies layer\nRUN yum -y install epel-release \\\n && yum -y localinstall --nogpgcheck https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm \\\n && yum -y install mariadb-server mod_ssl zip file \\\n && yum clean all \\\n && chmod 755 /usr/local/bin/entrypoint.sh\n#  # ZoneMinder layer\nRUN yum -y install zoneminder \\\n && yum clean all \\\n && ln -sf /etc/zm/www/zoneminder.conf /etc/httpd/conf.d/ \\\n && echo \"ServerName localhost\" > /etc/httpd/conf.d/servername.conf \\\n && echo -e \"# Redirect the webroot to /zm\\nRedirectMatch permanent ^/$ /zm\" > /etc/httpd/conf.d/redirect.conf\n#   Set our volumes before we do anything else\nVOLUME /var/lib/zoneminder/events /var/lib/mysql /var/log/zoneminder\n#   Expose https port\nEXPOSE 443/tcp\n#   This is run each time the container is started\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n#  ###############\n#   RUN EXAMPLES #\n#  ###############\n#   ZoneMinder uses /dev/shm for shared memory and many users will need to increase \n#   the size significantly at runtime like so:\n#\n#   docker run -d -t -p 1080:443 \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder checks the TZ environment variable at runtime to determine the timezone.\n#   If this variable is not set, then ZoneMinder will default to UTC.\n#   Alternaitvely, the timezone can be set manually like so:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder can write its data to folders outside the container using volumes.\n#\n#   docker run -d -t -p 1080:443 \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder can use an external database by setting the appropriate environment variables.\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e ZM_DB_USER='zmuser' \\\n#      -e ZM_DB_PASS='zmpassword' \\\n#      -e ZM_DB_NAME='zoneminder_database' \\\n#      -e ZM_DB_HOST='my_central_db_server' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   Here is an example using the options described above with the internal database:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   Here is an example using the options described above with an external database:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      -e ZM_DB_USER='zmuser' \\\n#      -e ZM_DB_PASS='zmpassword' \\\n#      -e ZM_DB_NAME='zoneminder_database' \\\n#      -e ZM_DB_HOST='my_central_db_server' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7\nMAINTAINER Andrew Bauer <zonexpertconsulting@outlook.com>\n#  Get the entrypoint script\nADD https://raw.githubusercontent.com/ZoneMinder/zmdockerfiles/master/utils/entrypoint.sh /usr/local/bin/\n# # Dependencies layer\nRUN yum -y install epel-release \\\n && yum -y localinstall --nogpgcheck https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm \\\n && yum -y install mariadb-server mod_ssl zip file \\\n && yum clean all \\\n && chmod 755 /usr/local/bin/entrypoint.sh\n# # ZoneMinder layer\nRUN yum -y install zoneminder \\\n && yum clean all \\\n && ln -sf /etc/zm/www/zoneminder.conf /etc/httpd/conf.d/ \\\n && echo \"ServerName localhost\" > /etc/httpd/conf.d/servername.conf \\\n && echo -e \"# Redirect the webroot to /zm\\nRedirectMatch permanent ^/$ /zm\" > /etc/httpd/conf.d/redirect.conf\n#  Set our volumes before we do anything else\nVOLUME /var/lib/zoneminder/events /var/lib/mysql /var/log/zoneminder\n#  Expose https port\nEXPOSE 443/tcp\n#  This is run each time the container is started\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n# ###############\n#  RUN EXAMPLES #\n# ###############\n#  ZoneMinder uses /dev/shm for shared memory and many users will need to increase \n#  the size significantly at runtime like so:\n#\n#  docker run -d -t -p 1080:443 \\\n#     --shm-size=\"512m\" \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n#  ZoneMinder checks the TZ environment variable at runtime to determine the timezone.\n#  If this variable is not set, then ZoneMinder will default to UTC.\n#  Alternaitvely, the timezone can be set manually like so:\n#\n#  docker run -d -t -p 1080:443 \\\n#     -e TZ='America/Los_Angeles' \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n#  ZoneMinder can write its data to folders outside the container using volumes.\n#\n#  docker run -d -t -p 1080:443 \\\n#     -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#     -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#     -v /disk/zoneminder/logs:/var/log/zm \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n#  ZoneMinder can use an external database by setting the appropriate environment variables.\n#\n#  docker run -d -t -p 1080:443 \\\n#     -e ZM_DB_USER='zmuser' \\\n#     -e ZM_DB_PASS='zmpassword' \\\n#     -e ZM_DB_NAME='zoneminder_database' \\\n#     -e ZM_DB_HOST='my_central_db_server' \\\n#     -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#     -v /disk/zoneminder/logs:/var/log/zm \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n#  Here is an example using the options described above with the internal database:\n#\n#  docker run -d -t -p 1080:443 \\\n#     -e TZ='America/Los_Angeles' \\\n#     -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#     -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#     -v /disk/zoneminder/logs:/var/log/zm \\\n#     --shm-size=\"512m\" \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n#  Here is an example using the options described above with an external database:\n#\n#  docker run -d -t -p 1080:443 \\\n#     -e TZ='America/Los_Angeles' \\\n#     -e ZM_DB_USER='zmuser' \\\n#     -e ZM_DB_PASS='zmpassword' \\\n#     -e ZM_DB_NAME='zoneminder_database' \\\n#     -e ZM_DB_HOST='my_central_db_server' \\\n#     -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#     -v /disk/zoneminder/logs:/var/log/zm \\\n#     --shm-size=\"512m\" \\\n#     --name zoneminder \\\n#     zoneminder/zoneminder\n","injectedSmells":[],"originalDockerfileHash":"eee7e248ff8417a3ab26dc0e0de39d14","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7\nMAINTAINER Andrew Bauer <zonexpertconsulting@outlook.com>\n#   Get the entrypoint script\nADD https://raw.githubusercontent.com/ZoneMinder/zmdockerfiles/master/utils/entrypoint.sh /usr/local/bin/\n#  # Dependencies layer\nRUN yum -y install epel-release \\\n && yum -y localinstall --nogpgcheck https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm \\\n && yum -y install mariadb-server mod_ssl zip file \\\n && yum clean all \\\n && chmod 755 /usr/local/bin/entrypoint.sh\n#  # ZoneMinder layer\nRUN yum -y install zoneminder \\\n && yum clean all \\\n && ln -sf /etc/zm/www/zoneminder.conf /etc/httpd/conf.d/ \\\n && echo \"ServerName localhost\" > /etc/httpd/conf.d/servername.conf \\\n && echo -e \"# Redirect the webroot to /zm\\nRedirectMatch permanent ^/$ /zm\" > /etc/httpd/conf.d/redirect.conf\n#   Set our volumes before we do anything else\nVOLUME /var/lib/zoneminder/events /var/lib/mysql /var/log/zoneminder\n#   Expose https port\nEXPOSE 443/tcp\n#   This is run each time the container is started\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n#  ###############\n#   RUN EXAMPLES #\n#  ###############\n#   ZoneMinder uses /dev/shm for shared memory and many users will need to increase \n#   the size significantly at runtime like so:\n#\n#   docker run -d -t -p 1080:443 \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder checks the TZ environment variable at runtime to determine the timezone.\n#   If this variable is not set, then ZoneMinder will default to UTC.\n#   Alternaitvely, the timezone can be set manually like so:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder can write its data to folders outside the container using volumes.\n#\n#   docker run -d -t -p 1080:443 \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   ZoneMinder can use an external database by setting the appropriate environment variables.\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e ZM_DB_USER='zmuser' \\\n#      -e ZM_DB_PASS='zmpassword' \\\n#      -e ZM_DB_NAME='zoneminder_database' \\\n#      -e ZM_DB_HOST='my_central_db_server' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   Here is an example using the options described above with the internal database:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/mysql:/var/lib/mysql \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n#   Here is an example using the options described above with an external database:\n#\n#   docker run -d -t -p 1080:443 \\\n#      -e TZ='America/Los_Angeles' \\\n#      -e ZM_DB_USER='zmuser' \\\n#      -e ZM_DB_PASS='zmpassword' \\\n#      -e ZM_DB_NAME='zoneminder_database' \\\n#      -e ZM_DB_HOST='my_central_db_server' \\\n#      -v /disk/zoneminder/events:/var/lib/zoneminder/events \\\n#      -v /disk/zoneminder/logs:/var/log/zm \\\n#      --shm-size=\"512m\" \\\n#      --name zoneminder \\\n#      zoneminder/zoneminder\n","originalDockerfileUglifiedHash":"546e63a63a7ebb9205ccdfbef9ef9cdc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e46dd3a2231ace38fae235a690dc31f58e3f5497.dockerfile"}