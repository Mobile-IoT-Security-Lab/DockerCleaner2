{"seed":519004225,"processedDockerfileHash":"396cbef82ae25a5e79db545e1708a03c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM lambci/lambda:build-python3.6\n#   Install deps\nRUN touch /var/lib/rpm/* \\\n && yum install -y automake16 libcurl-devel sqlite-devel libpng-devel\n#   Fetch PROJ.4\nRUN curl -L http://download.osgeo.org/proj/proj-4.9.3.tar.gz | tar zxf - -C /tmp\n#   Build and install PROJ.4\nWORKDIR /tmp/proj-4.9.3\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#   Fetch GEOS\nRUN curl -L http://download.osgeo.org/geos/geos-3.6.1.tar.bz2 | tar jxf - -C /tmp\n#   Build and install GEOS\nWORKDIR /tmp/geos-3.6.1\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#   Fetch GDAL\nRUN mkdir -p /tmp/gdal-2.1.3 \\\n && curl -L https://github.com/OSGeo/gdal/archive/tags/2.1.3.tar.gz | tar zxf - -C /tmp/gdal-2.1.3 --strip-components=1\n#   Build + install GDAL\nWORKDIR /tmp/gdal-2.1.3/gdal\nRUN ./configure --prefix=/var/task --with-geos=/var/task/bin/geos-config --datarootdir=/var/task/share/gdal --with-jpeg=internal --with-sqlite3 --without-qhull --without-mrf --without-grib --without-pcraster --without-png --without-gif --without-pcidsk \\\n && make -j $( nproc ;) \\\n && make install\n#   Add GDAL libs to the function tarball\nWORKDIR /var/task\nRUN strip lib/libgdal.so.20.1.3 \\\n && strip lib/libgeos_c.so.1.10.1 \\\n && strip lib/libgeos-3.6.1.so \\\n && strip lib/libproj.so.12.0.0\nRUN tar -cvf /tmp/task.tar lib/libgdal.so* lib/libgeos_c.so* lib/libgeos-3.6.1.so lib/libproj.so* share/gdal/\n#   Install Python deps in a virtualenv\nRUN pip install virtualenv==20.21.0 \\\n && virtualenv /tmp/virtualenv\nENV PATH=\"/tmp/virtualenv/bin:/var/task/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\nRUN pip install 'GDAL == 2.1.3'\n#   Add Python deps to the function tarball\nWORKDIR /tmp/virtualenv/lib/python3.6/site-packages\nRUN tar -rvf /tmp/task.tar gdalconst.py ogr.py osr.py osgeo/*.so osgeo/*.py gdal.py __pycache__/gdalconst.cpython-36.pyc __pycache__/ogr.cpython-36.pyc __pycache__/osr.cpython-36.pyc osgeo/__pycache__/*.cpython-36.pyc __pycache__/gdal.cpython-36.pyc\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM lambci/lambda:build-python3.6\n#  Install deps\nRUN touch /var/lib/rpm/* \\\n && yum install -y automake16 libcurl-devel sqlite-devel libpng-devel\n#  Fetch PROJ.4\nRUN curl -L http://download.osgeo.org/proj/proj-4.9.3.tar.gz | tar zxf - -C /tmp\n#  Build and install PROJ.4\nWORKDIR /tmp/proj-4.9.3\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#  Fetch GEOS\nRUN curl -L http://download.osgeo.org/geos/geos-3.6.1.tar.bz2 | tar jxf - -C /tmp\n#  Build and install GEOS\nWORKDIR /tmp/geos-3.6.1\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#  Fetch GDAL\nRUN mkdir -p /tmp/gdal-2.1.3 \\\n && curl -L https://github.com/OSGeo/gdal/archive/tags/2.1.3.tar.gz | tar zxf - -C /tmp/gdal-2.1.3 --strip-components=1\n#  Build + install GDAL\nWORKDIR /tmp/gdal-2.1.3/gdal\nRUN ./configure --prefix=/var/task --with-geos=/var/task/bin/geos-config --datarootdir=/var/task/share/gdal --with-jpeg=internal --with-sqlite3 --without-qhull --without-mrf --without-grib --without-pcraster --without-png --without-gif --without-pcidsk \\\n && make -j $( nproc ;) \\\n && make install\n#  Add GDAL libs to the function tarball\nWORKDIR /var/task\nRUN strip lib/libgdal.so.20.1.3 \\\n && strip lib/libgeos_c.so.1.10.1 \\\n && strip lib/libgeos-3.6.1.so \\\n && strip lib/libproj.so.12.0.0\nRUN tar -cvf /tmp/task.tar lib/libgdal.so* lib/libgeos_c.so* lib/libgeos-3.6.1.so lib/libproj.so* share/gdal/\n#  Install Python deps in a virtualenv\nRUN pip install virtualenv \\\n && virtualenv /tmp/virtualenv\nENV PATH=\"/tmp/virtualenv/bin:/var/task/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\nRUN pip install 'GDAL == 2.1.3'\n#  Add Python deps to the function tarball\nWORKDIR /tmp/virtualenv/lib/python3.6/site-packages\nRUN tar -rvf /tmp/task.tar gdalconst.py ogr.py osr.py osgeo/*.so osgeo/*.py gdal.py __pycache__/gdalconst.cpython-36.pyc __pycache__/ogr.cpython-36.pyc __pycache__/osr.cpython-36.pyc osgeo/__pycache__/*.cpython-36.pyc __pycache__/gdal.cpython-36.pyc\n","injectedSmells":[],"originalDockerfileHash":"4b1918962a2d4010578a41e51eef6041","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM lambci/lambda:build-python3.6\n#   Install deps\nRUN touch /var/lib/rpm/* \\\n && yum install -y automake16 libcurl-devel sqlite-devel libpng-devel\n#   Fetch PROJ.4\nRUN curl -L http://download.osgeo.org/proj/proj-4.9.3.tar.gz | tar zxf - -C /tmp\n#   Build and install PROJ.4\nWORKDIR /tmp/proj-4.9.3\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#   Fetch GEOS\nRUN curl -L http://download.osgeo.org/geos/geos-3.6.1.tar.bz2 | tar jxf - -C /tmp\n#   Build and install GEOS\nWORKDIR /tmp/geos-3.6.1\nRUN ./configure --prefix=/var/task \\\n && make -j $( nproc ;) \\\n && make install\n#   Fetch GDAL\nRUN mkdir -p /tmp/gdal-2.1.3 \\\n && curl -L https://github.com/OSGeo/gdal/archive/tags/2.1.3.tar.gz | tar zxf - -C /tmp/gdal-2.1.3 --strip-components=1\n#   Build + install GDAL\nWORKDIR /tmp/gdal-2.1.3/gdal\nRUN ./configure --prefix=/var/task --with-geos=/var/task/bin/geos-config --datarootdir=/var/task/share/gdal --with-jpeg=internal --with-sqlite3 --without-qhull --without-mrf --without-grib --without-pcraster --without-png --without-gif --without-pcidsk \\\n && make -j $( nproc ;) \\\n && make install\n#   Add GDAL libs to the function tarball\nWORKDIR /var/task\nRUN strip lib/libgdal.so.20.1.3 \\\n && strip lib/libgeos_c.so.1.10.1 \\\n && strip lib/libgeos-3.6.1.so \\\n && strip lib/libproj.so.12.0.0\nRUN tar -cvf /tmp/task.tar lib/libgdal.so* lib/libgeos_c.so* lib/libgeos-3.6.1.so lib/libproj.so* share/gdal/\n#   Install Python deps in a virtualenv\nRUN pip install virtualenv \\\n && virtualenv /tmp/virtualenv\nENV PATH=\"/tmp/virtualenv/bin:/var/task/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\nRUN pip install 'GDAL == 2.1.3'\n#   Add Python deps to the function tarball\nWORKDIR /tmp/virtualenv/lib/python3.6/site-packages\nRUN tar -rvf /tmp/task.tar gdalconst.py ogr.py osr.py osgeo/*.so osgeo/*.py gdal.py __pycache__/gdalconst.cpython-36.pyc __pycache__/ogr.cpython-36.pyc __pycache__/osr.cpython-36.pyc osgeo/__pycache__/*.cpython-36.pyc __pycache__/gdal.cpython-36.pyc\n","originalDockerfileUglifiedHash":"3e4abdda09c046a741b45d4d5ffdf8b7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a2b876aa8c809898a1c9d98e648d8de9516148d5.dockerfile"}