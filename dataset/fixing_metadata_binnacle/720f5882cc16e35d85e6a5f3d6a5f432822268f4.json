{"seed":2713592597,"processedDockerfileHash":"644461ab825d09ee1d1419468122db89","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos7.6.1810\nMAINTAINER FIWARE Orion Context Broker Team. Telefónica I+D\nENV ORION_USER=\"orion\"\nENV GIT_REV_ORION=\"master\"\nENV CLEAN_DEV_TOOLS=\"1\"\nWORKDIR /opt\nRUN adduser --comment \"${ORION_USER}\" ${ORION_USER} \\\n && yum -y install epel-release \\\n && yum -y install boost-devel bzip2 cmake gnutls-devel libgcrypt-devel libcurl-devel openssl-devel libuuid-devel make nc git gcc-c++ scons tar which cyrus-sasl-devel \\\n && curl -kOL http://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.9.48.tar.gz \\\n && tar xvf libmicrohttpd-0.9.48.tar.gz \\\n && cd libmicrohttpd-0.9.48 \\\n && ./configure --disable-messages --disable-postprocessor --disable-dauth \\\n && make \\\n && make install \\\n && ldconfig \\\n && curl -kOL https://github.com/mongodb/mongo-cxx-driver/archive/legacy-1.1.2.tar.gz \\\n && tar xfz legacy-1.1.2.tar.gz \\\n && cd mongo-cxx-driver-legacy-1.1.2 \\\n && scons --use-sasl-client --ssl \\\n && scons install --prefix=/usr/local --use-sasl-client --ssl \\\n && curl -kOL https://github.com/miloyip/rapidjson/archive/v1.0.2.tar.gz \\\n && tar xfz v1.0.2.tar.gz \\\n && mv rapidjson-1.0.2/include/rapidjson/ /usr/local/include \\\n && git clone https://github.com/telefonicaid/fiware-orion \\\n && cd fiware-orion \\\n && git checkout ${GIT_REV_ORION} \\\n && make \\\n && make install \\\n && strip /usr/bin/contextBroker \\\n && mkdir -p /var/log/contextBroker \\\n && mkdir -p /var/run/contextBroker \\\n && chown ${ORION_USER} /var/log/contextBroker \\\n && chown ${ORION_USER} /var/run/contextBroker \\\n && cd /opt \\\n && if [ ${CLEAN_DEV_TOOLS} -eq 0 ] ; then yum clean all \\\n && exit 0 ; fi \\\n && rm -rf /opt/libmicrohttpd-0.9.48.tar.gz /usr/local/include/microhttpd.h /usr/local/lib/libmicrohttpd.* /opt/libmicrohttpd-0.9.48 /opt/legacy-1.1.2.tar.gz /opt/mongo-cxx-driver-legacy-1.1.2 /usr/local/include/mongo /usr/local/lib/libmongoclient.a /opt/rapidjson-1.0.2 /opt/v1.0.2.tar.gz /usr/local/include/rapidjson /opt/fiware-orion /usr/share/cracklib /usr/share/i18n /usr/{lib,lib64}/gconv \\\n && yum -y erase git perl* rsync cmake libarchive gcc-c++ cloog-ppl cpp gcc glibc-devel glibc-headers kernel-headers libgomp libstdc++-devel mpfr ppl scons boost-devel libcurl-devel gnutls-devel libgcrypt-devel clang llvm llvm-libs CUnit-devel CUnit autoconf automake m4 libidn-devel boost-wave boost-serialization boost-python boost-iostreams boost boost-date-time boost-test boost-graph boost-signals boost-program-options boost-math openssh openssh-clients libedit hwdata dbus-glib fipscheck* *devel sysvinit-tools \\\n && rpm -qa groff | xargs -r rpm -e --nodeps \\\n && yum clean all \\\n && rm -rf /var/lib/yum/yumdb \\\n && rm -rf /var/lib/yum/history \\\n && rpm -vv --rebuilddb \\\n && find /usr/share/locale -mindepth 1 -maxdepth 1 ! -name 'en_US' ! -name 'locale.alias' | xargs -r rm -r \\\n && bash -c 'localedef --list-archive | grep -v -e \"en_US\" | xargs localedef --delete-from-archive' \\\n && /bin/cp -f /usr/lib/locale/locale-archive /usr/lib/locale/locale-archive.tmpl \\\n && build-locale-archive \\\n && rm -f /var/log/*log\nWORKDIR /\nENTRYPOINT [\"/usr/bin/contextBroker\", \"-fg\", \"-multiservice\", \"-ngsiv1Autocast\"]\nEXPOSE 1026/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos7.6.1810\nMAINTAINER FIWARE Orion Context Broker Team. Telefónica I+D\nENV ORION_USER=\"orion\"\nENV GIT_REV_ORION=\"master\"\nENV CLEAN_DEV_TOOLS=\"1\"\nWORKDIR /opt\nRUN adduser --comment \"${ORION_USER}\" ${ORION_USER} \\\n && yum -y install epel-release \\\n && yum -y install boost-devel bzip2 cmake gnutls-devel libgcrypt-devel libcurl-devel openssl-devel libuuid-devel make nc git gcc-c++ scons tar which cyrus-sasl-devel \\\n && curl -kOL http://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.9.48.tar.gz \\\n && tar xvf libmicrohttpd-0.9.48.tar.gz \\\n && cd libmicrohttpd-0.9.48 \\\n && ./configure --disable-messages --disable-postprocessor --disable-dauth \\\n && make \\\n && make install \\\n && ldconfig \\\n && curl -kOL https://github.com/mongodb/mongo-cxx-driver/archive/legacy-1.1.2.tar.gz \\\n && tar xfz legacy-1.1.2.tar.gz \\\n && cd mongo-cxx-driver-legacy-1.1.2 \\\n && scons --use-sasl-client --ssl \\\n && scons install --prefix=/usr/local --use-sasl-client --ssl \\\n && curl -kOL https://github.com/miloyip/rapidjson/archive/v1.0.2.tar.gz \\\n && tar xfz v1.0.2.tar.gz \\\n && mv rapidjson-1.0.2/include/rapidjson/ /usr/local/include \\\n && git clone https://github.com/telefonicaid/fiware-orion \\\n && cd fiware-orion \\\n && git checkout ${GIT_REV_ORION} \\\n && make \\\n && make install \\\n && strip /usr/bin/contextBroker \\\n && mkdir -p /var/log/contextBroker \\\n && mkdir -p /var/run/contextBroker \\\n && chown ${ORION_USER} /var/log/contextBroker \\\n && chown ${ORION_USER} /var/run/contextBroker \\\n && cd /opt \\\n && if [ ${CLEAN_DEV_TOOLS} -eq 0 ] ; then yum clean all \\\n && exit 0 ; fi \\\n && rm -rf /opt/libmicrohttpd-0.9.48.tar.gz /usr/local/include/microhttpd.h /usr/local/lib/libmicrohttpd.* /opt/libmicrohttpd-0.9.48 /opt/legacy-1.1.2.tar.gz /opt/mongo-cxx-driver-legacy-1.1.2 /usr/local/include/mongo /usr/local/lib/libmongoclient.a /opt/rapidjson-1.0.2 /opt/v1.0.2.tar.gz /usr/local/include/rapidjson /opt/fiware-orion /usr/share/cracklib /usr/share/i18n /usr/{lib,lib64}/gconv \\\n && yum -y erase git perl* rsync cmake libarchive gcc-c++ cloog-ppl cpp gcc glibc-devel glibc-headers kernel-headers libgomp libstdc++-devel mpfr ppl scons boost-devel libcurl-devel gnutls-devel libgcrypt-devel clang llvm llvm-libs CUnit-devel CUnit autoconf automake m4 libidn-devel boost-wave boost-serialization boost-python boost-iostreams boost boost-date-time boost-test boost-graph boost-signals boost-program-options boost-math openssh openssh-clients libedit hwdata dbus-glib fipscheck* *devel sysvinit-tools \\\n && rpm -qa groff | xargs -r rpm -e --nodeps \\\n && yum clean all \\\n && rm -rf /var/lib/yum/yumdb \\\n && rm -rf /var/lib/yum/history \\\n && rpm -vv --rebuilddb \\\n && find /usr/share/locale -mindepth 1 -maxdepth 1 ! -name 'en_US' ! -name 'locale.alias' | xargs -r rm -r \\\n && bash -c 'localedef --list-archive | grep -v -e \"en_US\" | xargs localedef --delete-from-archive' \\\n && /bin/cp -f /usr/lib/locale/locale-archive /usr/lib/locale/locale-archive.tmpl \\\n && build-locale-archive \\\n && rm -f /var/log/*log\nWORKDIR /\nENTRYPOINT [\"/usr/bin/contextBroker\", \"-fg\", \"-multiservice\", \"-ngsiv1Autocast\"]\nEXPOSE 1026/tcp\n","injectedSmells":[],"originalDockerfileHash":"e63b833ad496175870c97764a1be2315","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos7.6.1810\nMAINTAINER FIWARE Orion Context Broker Team. Telefónica I+D\nENV ORION_USER=\"orion\"\nENV GIT_REV_ORION=\"master\"\nENV CLEAN_DEV_TOOLS=\"1\"\nWORKDIR /opt\nRUN adduser --comment \"${ORION_USER}\" ${ORION_USER} \\\n && yum -y install epel-release \\\n && yum -y install boost-devel bzip2 cmake gnutls-devel libgcrypt-devel libcurl-devel openssl-devel libuuid-devel make nc git gcc-c++ scons tar which cyrus-sasl-devel \\\n && curl -kOL http://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.9.48.tar.gz \\\n && tar xvf libmicrohttpd-0.9.48.tar.gz \\\n && cd libmicrohttpd-0.9.48 \\\n && ./configure --disable-messages --disable-postprocessor --disable-dauth \\\n && make \\\n && make install \\\n && ldconfig \\\n && curl -kOL https://github.com/mongodb/mongo-cxx-driver/archive/legacy-1.1.2.tar.gz \\\n && tar xfz legacy-1.1.2.tar.gz \\\n && cd mongo-cxx-driver-legacy-1.1.2 \\\n && scons --use-sasl-client --ssl \\\n && scons install --prefix=/usr/local --use-sasl-client --ssl \\\n && curl -kOL https://github.com/miloyip/rapidjson/archive/v1.0.2.tar.gz \\\n && tar xfz v1.0.2.tar.gz \\\n && mv rapidjson-1.0.2/include/rapidjson/ /usr/local/include \\\n && git clone https://github.com/telefonicaid/fiware-orion \\\n && cd fiware-orion \\\n && git checkout ${GIT_REV_ORION} \\\n && make \\\n && make install \\\n && strip /usr/bin/contextBroker \\\n && mkdir -p /var/log/contextBroker \\\n && mkdir -p /var/run/contextBroker \\\n && chown ${ORION_USER} /var/log/contextBroker \\\n && chown ${ORION_USER} /var/run/contextBroker \\\n && cd /opt \\\n && if [ ${CLEAN_DEV_TOOLS} -eq 0 ] ; then yum clean all \\\n && exit 0 ; fi \\\n && rm -rf /opt/libmicrohttpd-0.9.48.tar.gz /usr/local/include/microhttpd.h /usr/local/lib/libmicrohttpd.* /opt/libmicrohttpd-0.9.48 /opt/legacy-1.1.2.tar.gz /opt/mongo-cxx-driver-legacy-1.1.2 /usr/local/include/mongo /usr/local/lib/libmongoclient.a /opt/rapidjson-1.0.2 /opt/v1.0.2.tar.gz /usr/local/include/rapidjson /opt/fiware-orion /usr/share/cracklib /usr/share/i18n /usr/{lib,lib64}/gconv \\\n && yum -y erase git perl* rsync cmake libarchive gcc-c++ cloog-ppl cpp gcc glibc-devel glibc-headers kernel-headers libgomp libstdc++-devel mpfr ppl scons boost-devel libcurl-devel gnutls-devel libgcrypt-devel clang llvm llvm-libs CUnit-devel CUnit autoconf automake m4 libidn-devel boost-wave boost-serialization boost-python boost-iostreams boost boost-date-time boost-test boost-graph boost-signals boost-program-options boost-math openssh openssh-clients libedit hwdata dbus-glib fipscheck* *devel sysvinit-tools \\\n && rpm -qa groff | xargs -r rpm -e --nodeps \\\n && yum clean all \\\n && rm -rf /var/lib/yum/yumdb \\\n && rm -rf /var/lib/yum/history \\\n && rpm -vv --rebuilddb \\\n && find /usr/share/locale -mindepth 1 -maxdepth 1 ! -name 'en_US' ! -name 'locale.alias' | xargs -r rm -r \\\n && bash -c 'localedef --list-archive | grep -v -e \"en_US\" | xargs localedef --delete-from-archive' \\\n && /bin/cp -f /usr/lib/locale/locale-archive /usr/lib/locale/locale-archive.tmpl \\\n && build-locale-archive \\\n && rm -f /var/log/*log\nWORKDIR /\nENTRYPOINT [\"/usr/bin/contextBroker\", \"-fg\", \"-multiservice\", \"-ngsiv1Autocast\"]\nEXPOSE 1026/tcp\n","originalDockerfileUglifiedHash":"e63b833ad496175870c97764a1be2315","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/720f5882cc16e35d85e6a5f3d6a5f432822268f4.dockerfile"}