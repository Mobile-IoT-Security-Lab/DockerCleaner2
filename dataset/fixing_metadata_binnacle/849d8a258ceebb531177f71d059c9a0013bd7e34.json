{"seed":2142617202,"processedDockerfileHash":"12de1c14e79ce7b81d4a31f1a3378d5f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:latest\nLABEL maintainer=\"contact@ocsinventory-ng.org\"\nLABEL version=\"2.3\"\nLABEL description=\"OCS (Open Computers and Software Inventory Next Generation)\"\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends apache2=2.4.55-1ubuntu2 apache2-doc=2.4.55-1ubuntu2 apt-utils=2.6.0 php5 php5-gd php5-mysql php5-cgi php5-curl perl=5.36.0-7 build-essential=12.9ubuntu3 libapache2-mod-php5 libxml2=2.9.14+dfsg-1.1build2 libxml-simple-perl=2.25-2 libc6-dev=2.37-0ubuntu2 libnet-ip-perl=1.26-3 libxml-libxml-perl=2.0207+dfsg+really+2.0134-1build1 libapache2-mod-perl2=2.0.12-1build2 libdbi-perl=1.643-4 libapache-dbi-perl=1.12-3 libdbd-mysql-perl=4.050-5build1 libio-compress-perl=2.201-2 libxml-simple-perl=2.25-2 libsoap-lite-perl=1.27-2 libarchive-zip-perl=1.68-1 libnet-ip-perl=1.26-3 libphp-pclzip libsoap-lite-perl=1.27-2 libarchive-zip-perl=1.68-1 htop=3.2.2-1 git=1:2.39.2-1ubuntu1 wget=1.21.3-1ubuntu1 tar=1.34+dfsg-1.1 unzip=6.0-27ubuntu1 nano=7.2-1 make=4.3-4.1build1 -y )\nRUN cpan -i XML::Entities\nVOLUME /var/lib/mysql\nRUN cp /usr/share/zoneinfo/Europe/Paris /etc/localtime\nRUN /usr/sbin/a2dissite 000-default ; /usr/sbin/a2enmod rewrite ; /usr/sbin/a2enmod ssl ; /usr/sbin/a2enmod authz_user\nRUN wget https://raw.githubusercontent.com/OCSInventory-NG/OCSInventory-Server/master/binutils/docker-download.sh\nRUN sh docker-download.sh 2.3\nWORKDIR /tmp/ocs/Apache\nRUN perl Makefile.PL ; make ; make install\nRUN cp -R blib/lib/Apache /usr/local/share/perl/5.20.2/ ; cp -R Ocsinventory /usr/local/share/perl/5.20.2/ ; cp /tmp/ocs/etc/logrotate.d/ocsinventory-server /etc/logrotate.d/\nRUN mkdir -p /etc/ocsinventory-server/plugins ; mkdir -p /etc/ocsinventory-server/perl ; mkdir -p /usr/share/ocsinventory-reports/ocsreports\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV APACHE_RUN_DIR=\"/var/run/apache2f\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nWORKDIR /tmp/ocs\nRUN cp -R ocsreports/* /usr/share/ocsinventory-reports/ocsreports\nRUN chown -R www-data: /usr/share/ocsinventory-reports/\nRUN bash -c 'mkdir -p /var/lib/ocsinventory-reports/{download,ipd,logs,scripts,snmp}'\nRUN chmod -R +w /var/lib/ocsinventory-reports ; chown www-data: -R /var/lib/ocsinventory-reports\nCOPY dbconfig.inc.php /usr/share/ocsinventory-reports/ocsreports/\nRUN cp binutils/ipdiscover-util.pl /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl\nRUN chown www-data: /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod 755 /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod +w /usr/share/ocsinventory-reports/ocsreports/dbconfig.inc.php ; mkdir -p /var/log/ocsinventory-server/ ; chmod +w /var/log/ocsinventory-server/\nCOPY /conf/ocsinventory-reports.conf /etc/apache2/conf-available/\nCOPY /conf/z-ocsinventory-server.conf /etc/apache2/conf-available/\nCOPY ./scripts/run.sh /root/run.sh\nRUN chmod +x /root/run.sh\nRUN ln -s /etc/apache2/conf-available/ocsinventory-reports.conf /etc/apache2/conf-enabled/ocsinventory-reports.conf\nRUN ln -s /etc/apache2/conf-available/z-ocsinventory-server.conf /etc/apache2/conf-enabled/z-ocsinventory-server.conf\nRUN rm /usr/share/ocsinventory-reports/ocsreports/install.php ; rm -rf /tmp/ocs\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD [\"/bin/bash\", \"/root/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:latest\nLABEL maintainer=\"contact@ocsinventory-ng.org\"\nLABEL version=\"2.3\"\nLABEL description=\"OCS (Open Computers and Software Inventory Next Generation)\"\nRUN apt-get update\nRUN apt-get install apache2 apache2-doc apt-utils php5 php5-gd php5-mysql php5-cgi php5-curl perl build-essential libapache2-mod-php5 libxml2 libxml-simple-perl libc6-dev libnet-ip-perl libxml-libxml-perl libapache2-mod-perl2 libdbi-perl libapache-dbi-perl libdbd-mysql-perl libio-compress-perl libxml-simple-perl libsoap-lite-perl libarchive-zip-perl libnet-ip-perl libphp-pclzip libsoap-lite-perl libarchive-zip-perl htop git wget tar unzip nano make -y\nRUN cpan -i XML::Entities\nVOLUME /var/lib/mysql\nRUN cp /usr/share/zoneinfo/Europe/Paris /etc/localtime\nRUN /usr/sbin/a2dissite 000-default ; /usr/sbin/a2enmod rewrite ; /usr/sbin/a2enmod ssl ; /usr/sbin/a2enmod authz_user\nRUN wget https://raw.githubusercontent.com/OCSInventory-NG/OCSInventory-Server/master/binutils/docker-download.sh\nRUN sh docker-download.sh 2.3\nWORKDIR /tmp/ocs/Apache\nRUN perl Makefile.PL ; make ; make install\nRUN cp -R blib/lib/Apache /usr/local/share/perl/5.20.2/ ; cp -R Ocsinventory /usr/local/share/perl/5.20.2/ ; cp /tmp/ocs/etc/logrotate.d/ocsinventory-server /etc/logrotate.d/\nRUN mkdir -p /etc/ocsinventory-server/plugins ; mkdir -p /etc/ocsinventory-server/perl ; mkdir -p /usr/share/ocsinventory-reports/ocsreports\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV APACHE_RUN_DIR=\"/var/run/apache2f\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nWORKDIR /tmp/ocs\nRUN cp -R ocsreports/* /usr/share/ocsinventory-reports/ocsreports\nRUN chown -R www-data: /usr/share/ocsinventory-reports/\nRUN bash -c 'mkdir -p /var/lib/ocsinventory-reports/{download,ipd,logs,scripts,snmp}'\nRUN chmod -R +w /var/lib/ocsinventory-reports ; chown www-data: -R /var/lib/ocsinventory-reports\nCOPY dbconfig.inc.php /usr/share/ocsinventory-reports/ocsreports/\nRUN cp binutils/ipdiscover-util.pl /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl\nRUN chown www-data: /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod 755 /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod +w /usr/share/ocsinventory-reports/ocsreports/dbconfig.inc.php ; mkdir -p /var/log/ocsinventory-server/ ; chmod +w /var/log/ocsinventory-server/\nCOPY /conf/ocsinventory-reports.conf /etc/apache2/conf-available/\nCOPY /conf/z-ocsinventory-server.conf /etc/apache2/conf-available/\nCOPY ./scripts/run.sh /root/run.sh\nRUN chmod +x /root/run.sh\nRUN ln -s /etc/apache2/conf-available/ocsinventory-reports.conf /etc/apache2/conf-enabled/ocsinventory-reports.conf\nRUN ln -s /etc/apache2/conf-available/z-ocsinventory-server.conf /etc/apache2/conf-enabled/z-ocsinventory-server.conf\nRUN rm /usr/share/ocsinventory-reports/ocsreports/install.php ; rm -rf /tmp/ocs\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD [\"/bin/bash\", \"/root/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"d97d0cec272e467a0cfb243e7fb5be72","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:latest\nLABEL maintainer=\"contact@ocsinventory-ng.org\"\nLABEL version=\"2.3\"\nLABEL description=\"OCS (Open Computers and Software Inventory Next Generation)\"\nRUN apt-get update\nRUN apt-get install apache2 apache2-doc apt-utils php5 php5-gd php5-mysql php5-cgi php5-curl perl build-essential libapache2-mod-php5 libxml2 libxml-simple-perl libc6-dev libnet-ip-perl libxml-libxml-perl libapache2-mod-perl2 libdbi-perl libapache-dbi-perl libdbd-mysql-perl libio-compress-perl libxml-simple-perl libsoap-lite-perl libarchive-zip-perl libnet-ip-perl libphp-pclzip libsoap-lite-perl libarchive-zip-perl htop git wget tar unzip nano make -y\nRUN cpan -i XML::Entities\nVOLUME /var/lib/mysql\nRUN cp /usr/share/zoneinfo/Europe/Paris /etc/localtime\nRUN /usr/sbin/a2dissite 000-default ; /usr/sbin/a2enmod rewrite ; /usr/sbin/a2enmod ssl ; /usr/sbin/a2enmod authz_user\nRUN wget https://raw.githubusercontent.com/OCSInventory-NG/OCSInventory-Server/master/binutils/docker-download.sh\nRUN sh docker-download.sh 2.3\nWORKDIR /tmp/ocs/Apache\nRUN perl Makefile.PL ; make ; make install\nRUN cp -R blib/lib/Apache /usr/local/share/perl/5.20.2/ ; cp -R Ocsinventory /usr/local/share/perl/5.20.2/ ; cp /tmp/ocs/etc/logrotate.d/ocsinventory-server /etc/logrotate.d/\nRUN mkdir -p /etc/ocsinventory-server/plugins ; mkdir -p /etc/ocsinventory-server/perl ; mkdir -p /usr/share/ocsinventory-reports/ocsreports\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV APACHE_RUN_DIR=\"/var/run/apache2f\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nWORKDIR /tmp/ocs\nRUN cp -R ocsreports/* /usr/share/ocsinventory-reports/ocsreports\nRUN chown -R www-data: /usr/share/ocsinventory-reports/\nRUN bash -c 'mkdir -p /var/lib/ocsinventory-reports/{download,ipd,logs,scripts,snmp}'\nRUN chmod -R +w /var/lib/ocsinventory-reports ; chown www-data: -R /var/lib/ocsinventory-reports\nCOPY dbconfig.inc.php /usr/share/ocsinventory-reports/ocsreports/\nRUN cp binutils/ipdiscover-util.pl /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl\nRUN chown www-data: /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod 755 /usr/share/ocsinventory-reports/ocsreports/ipdiscover-util.pl ; chmod +w /usr/share/ocsinventory-reports/ocsreports/dbconfig.inc.php ; mkdir -p /var/log/ocsinventory-server/ ; chmod +w /var/log/ocsinventory-server/\nCOPY /conf/ocsinventory-reports.conf /etc/apache2/conf-available/\nCOPY /conf/z-ocsinventory-server.conf /etc/apache2/conf-available/\nCOPY ./scripts/run.sh /root/run.sh\nRUN chmod +x /root/run.sh\nRUN ln -s /etc/apache2/conf-available/ocsinventory-reports.conf /etc/apache2/conf-enabled/ocsinventory-reports.conf\nRUN ln -s /etc/apache2/conf-available/z-ocsinventory-server.conf /etc/apache2/conf-enabled/z-ocsinventory-server.conf\nRUN rm /usr/share/ocsinventory-reports/ocsreports/install.php ; rm -rf /tmp/ocs\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD [\"/bin/bash\", \"/root/run.sh\"]\n","originalDockerfileUglifiedHash":"d97d0cec272e467a0cfb243e7fb5be72","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/849d8a258ceebb531177f71d059c9a0013bd7e34.dockerfile"}