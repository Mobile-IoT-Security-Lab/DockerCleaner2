{"seed":1234838153,"processedDockerfileHash":"a1d987b4d2bce59c7c2677c2b3c166f5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM fedora\nMAINTAINER Buttetsu Batou <doubledense@gmail.com>\n#   Install dependencies and audio tools\nRUN dnf groupinstall -y \"C Development Tools and Libraries\"\nRUN dnf install -y git zsh wget man sudo\nRUN dnf install -y libsndfile-devel libsamplerate-devel liblo-devel jack-audio-connection-kit-devel jack-audio-connection-kit-example-clients alsa-lib-devel xz htop grep procps-ng yasm screen supervisor openssh-server\nRUN dnf install -y cabal-install ghc-Cabal-devel\n#   Install editor\nRUN dnf -y install emacs-nox emacs-haskell-mode\n#   Build Dirt synth\nWORKDIR /repos\nRUN git clone --recursive https://github.com/tidalcycles/Dirt.git\nWORKDIR Dirt\nRUN make\n#   Build & Install libmp3lame\nWORKDIR /repos\nRUN git clone https://github.com/rbrito/lame.git\nWORKDIR lame\nRUN ./configure --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr lame\n#   Build & Install ffmpeg, ffserver\nWORKDIR /repos\nRUN git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg\nWORKDIR ffmpeg\nRUN ./configure --enable-indev=jack --enable-libmp3lame --enable-nonfree --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr ffmpeg\n#   Install Tidebox supervisord config\nCOPY configs/tidebox.ini /etc/supervisord.d/tidebox.ini\n#   Initialize and configure sshd\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_key\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -b 1024 -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN sed -i 's/UsePAM\\syes/UsePAM no/' /etc/ssh/sshd_config\n#   Expose sshd service\nEXPOSE 22/tcp\n#   Expose ffserver streaming service\nEXPOSE 8090/tcp\n#   Pull Tidal Emacs binding\nRUN mkdir /repos/tidal\nWORKDIR /repos\nWORKDIR tidal\nRUN wget https://raw.github.com/yaxu/Tidal/master/tidal.el\n#   Create and configure Tidal user\nRUN useradd tidal -s /bin/zsh\nRUN echo 'tidal:livecoding' | chpasswd\nRUN echo \"tidal ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\nUSER tidal\nENV HOME=\"/home/tidal\"\nWORKDIR /home/tidal\nRUN ln -s /repos /home/tidal/repos\nRUN ln -s /work /home/tidal/work\n#   Install Tidal\nRUN cabal update\nRUN cabal install tidal\n#   Install Oh-My-Zsh\nRUN sh -c \"$( curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh ;)\"\n#   Disable Zsh automatic window titling\nRUN sed -i 's/# DISABLE_AUTO_TITLE=\"true\"/DISABLE_AUTO_TITLE=\"true\"/g' /home/tidal/.zshrc\n#   Install default configurations\nCOPY configs/emacsrc /home/tidal/.emacs\nCOPY configs/screenrc /home/tidal/.screenrc\nCOPY configs/ffserver.conf /home/tidal/ffserver.conf\n#   Install default Tidal files\nCOPY tidal/init.tidal /home/tidal/init.tidal\nCOPY tidal/hello.tidal /home/tidal/hello.tidal\n#   Prepare scratch workspace for version control\nRUN sudo mkdir /work\nRUN sudo chown -R tidal:tidal /work\nWORKDIR /work\nRUN mkdir /home/tidal/.ssh\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /home/tidal/.ssh/id_rsa https://raw.githubusercontent.com/DoubleDensity/scratchpool/master/id_rsa-scratchpool\nRUN sudo chmod 600 /home/tidal/.ssh/id_rsa\nRUN sudo chown tidal.tidal /home/tidal/.ssh/id_rsa\nCOPY configs/sshconfig /home/tidal/.ssh/config\nRUN sudo chmod 600 /home/tidal/.ssh/config\nRUN sudo chown tidal.tidal /home/tidal/.ssh/config\nRUN ssh-keyscan -H github.com >> ~/.ssh/known_hosts\nRUN git clone git@github.com:DoubleDensity/scratchpool.git\nWORKDIR /work/scratchpool\nRUN git config user.name \"Tidebox User\"\nRUN git config user.email \"tidal@jankycloud.com\"\n#   Set Tidal shell to Screen\nUSER root\nRUN echo \"/usr/bin/screen\" >> /etc/shells\nRUN usermod -s /usr/bin/screen tidal\nRUN chown -R tidal.tidal /home/tidal/*.tidal\nCMD [\"/usr/bin/supervisord\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM fedora\nMAINTAINER Buttetsu Batou <doubledense@gmail.com>\n#  Install dependencies and audio tools\nRUN dnf groupinstall -y \"C Development Tools and Libraries\"\nRUN dnf install -y git zsh wget man sudo\nRUN dnf install -y libsndfile-devel libsamplerate-devel liblo-devel jack-audio-connection-kit-devel jack-audio-connection-kit-example-clients alsa-lib-devel xz htop grep procps-ng yasm screen supervisor openssh-server\nRUN dnf install -y cabal-install ghc-Cabal-devel\n#  Install editor\nRUN dnf -y install emacs-nox emacs-haskell-mode\n#  Build Dirt synth\nWORKDIR /repos\nRUN git clone --recursive https://github.com/tidalcycles/Dirt.git\nWORKDIR Dirt\nRUN make\n#  Build & Install libmp3lame\nWORKDIR /repos\nRUN git clone https://github.com/rbrito/lame.git\nWORKDIR lame\nRUN ./configure --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr lame\n#  Build & Install ffmpeg, ffserver\nWORKDIR /repos\nRUN git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg\nWORKDIR ffmpeg\nRUN ./configure --enable-indev=jack --enable-libmp3lame --enable-nonfree --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr ffmpeg\n#  Install Tidebox supervisord config\nCOPY configs/tidebox.ini /etc/supervisord.d/tidebox.ini\n#  Initialize and configure sshd\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_key\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -b 1024 -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN sed -i 's/UsePAM\\syes/UsePAM no/' /etc/ssh/sshd_config\n#  Expose sshd service\nEXPOSE 22/tcp\n#  Expose ffserver streaming service\nEXPOSE 8090/tcp\n#  Pull Tidal Emacs binding\nRUN mkdir /repos/tidal\nWORKDIR /repos\nWORKDIR tidal\nRUN wget https://raw.github.com/yaxu/Tidal/master/tidal.el\n#  Create and configure Tidal user\nRUN useradd tidal -s /bin/zsh\nRUN echo 'tidal:livecoding' | chpasswd\nRUN echo \"tidal ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\nUSER tidal\nENV HOME=\"/home/tidal\"\nWORKDIR /home/tidal\nRUN ln -s /repos /home/tidal/repos\nRUN ln -s /work /home/tidal/work\n#  Install Tidal\nRUN cabal update\nRUN cabal install tidal\n#  Install Oh-My-Zsh\nRUN sh -c \"$( curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh ;)\"\n#  Disable Zsh automatic window titling\nRUN sed -i 's/# DISABLE_AUTO_TITLE=\"true\"/DISABLE_AUTO_TITLE=\"true\"/g' /home/tidal/.zshrc\n#  Install default configurations\nCOPY configs/emacsrc /home/tidal/.emacs\nCOPY configs/screenrc /home/tidal/.screenrc\nCOPY configs/ffserver.conf /home/tidal/ffserver.conf\n#  Install default Tidal files\nCOPY tidal/init.tidal /home/tidal/init.tidal\nCOPY tidal/hello.tidal /home/tidal/hello.tidal\n#  Prepare scratch workspace for version control\nRUN sudo mkdir /work\nRUN sudo chown -R tidal:tidal /work\nWORKDIR /work\nRUN mkdir /home/tidal/.ssh\nADD https://raw.githubusercontent.com/DoubleDensity/scratchpool/master/id_rsa-scratchpool /home/tidal/.ssh/id_rsa\nRUN sudo chmod 600 /home/tidal/.ssh/id_rsa\nRUN sudo chown tidal.tidal /home/tidal/.ssh/id_rsa\nCOPY configs/sshconfig /home/tidal/.ssh/config\nRUN sudo chmod 600 /home/tidal/.ssh/config\nRUN sudo chown tidal.tidal /home/tidal/.ssh/config\nRUN ssh-keyscan -H github.com >> ~/.ssh/known_hosts\nRUN git clone git@github.com:DoubleDensity/scratchpool.git\nWORKDIR /work/scratchpool\nRUN git config user.name \"Tidebox User\"\nRUN git config user.email \"tidal@jankycloud.com\"\n#  Set Tidal shell to Screen\nUSER root\nRUN echo \"/usr/bin/screen\" >> /etc/shells\nRUN usermod -s /usr/bin/screen tidal\nRUN chown -R tidal.tidal /home/tidal/*.tidal\nCMD [\"/usr/bin/supervisord\"]\n","injectedSmells":[],"originalDockerfileHash":"741c0cbdfb61d14a88aba191499a2289","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM fedora\nMAINTAINER Buttetsu Batou <doubledense@gmail.com>\n#   Install dependencies and audio tools\nRUN dnf groupinstall -y \"C Development Tools and Libraries\"\nRUN dnf install -y git zsh wget man sudo\nRUN dnf install -y libsndfile-devel libsamplerate-devel liblo-devel jack-audio-connection-kit-devel jack-audio-connection-kit-example-clients alsa-lib-devel xz htop grep procps-ng yasm screen supervisor openssh-server\nRUN dnf install -y cabal-install ghc-Cabal-devel\n#   Install editor\nRUN dnf -y install emacs-nox emacs-haskell-mode\n#   Build Dirt synth\nWORKDIR /repos\nRUN git clone --recursive https://github.com/tidalcycles/Dirt.git\nWORKDIR Dirt\nRUN make\n#   Build & Install libmp3lame\nWORKDIR /repos\nRUN git clone https://github.com/rbrito/lame.git\nWORKDIR lame\nRUN ./configure --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr lame\n#   Build & Install ffmpeg, ffserver\nWORKDIR /repos\nRUN git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg\nWORKDIR ffmpeg\nRUN ./configure --enable-indev=jack --enable-libmp3lame --enable-nonfree --prefix=/usr\nRUN make install\nWORKDIR /repos\nRUN rm -fr ffmpeg\n#   Install Tidebox supervisord config\nCOPY configs/tidebox.ini /etc/supervisord.d/tidebox.ini\n#   Initialize and configure sshd\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_key\nRUN ssh-keygen -b 1024 -t rsa -f /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -b 1024 -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN sed -i 's/UsePAM\\syes/UsePAM no/' /etc/ssh/sshd_config\n#   Expose sshd service\nEXPOSE 22/tcp\n#   Expose ffserver streaming service\nEXPOSE 8090/tcp\n#   Pull Tidal Emacs binding\nRUN mkdir /repos/tidal\nWORKDIR /repos\nWORKDIR tidal\nRUN wget https://raw.github.com/yaxu/Tidal/master/tidal.el\n#   Create and configure Tidal user\nRUN useradd tidal -s /bin/zsh\nRUN echo 'tidal:livecoding' | chpasswd\nRUN echo \"tidal ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\nUSER tidal\nENV HOME=\"/home/tidal\"\nWORKDIR /home/tidal\nRUN ln -s /repos /home/tidal/repos\nRUN ln -s /work /home/tidal/work\n#   Install Tidal\nRUN cabal update\nRUN cabal install tidal\n#   Install Oh-My-Zsh\nRUN sh -c \"$( curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh ;)\"\n#   Disable Zsh automatic window titling\nRUN sed -i 's/# DISABLE_AUTO_TITLE=\"true\"/DISABLE_AUTO_TITLE=\"true\"/g' /home/tidal/.zshrc\n#   Install default configurations\nCOPY configs/emacsrc /home/tidal/.emacs\nCOPY configs/screenrc /home/tidal/.screenrc\nCOPY configs/ffserver.conf /home/tidal/ffserver.conf\n#   Install default Tidal files\nCOPY tidal/init.tidal /home/tidal/init.tidal\nCOPY tidal/hello.tidal /home/tidal/hello.tidal\n#   Prepare scratch workspace for version control\nRUN sudo mkdir /work\nRUN sudo chown -R tidal:tidal /work\nWORKDIR /work\nRUN mkdir /home/tidal/.ssh\nADD https://raw.githubusercontent.com/DoubleDensity/scratchpool/master/id_rsa-scratchpool /home/tidal/.ssh/id_rsa\nRUN sudo chmod 600 /home/tidal/.ssh/id_rsa\nRUN sudo chown tidal.tidal /home/tidal/.ssh/id_rsa\nCOPY configs/sshconfig /home/tidal/.ssh/config\nRUN sudo chmod 600 /home/tidal/.ssh/config\nRUN sudo chown tidal.tidal /home/tidal/.ssh/config\nRUN ssh-keyscan -H github.com >> ~/.ssh/known_hosts\nRUN git clone git@github.com:DoubleDensity/scratchpool.git\nWORKDIR /work/scratchpool\nRUN git config user.name \"Tidebox User\"\nRUN git config user.email \"tidal@jankycloud.com\"\n#   Set Tidal shell to Screen\nUSER root\nRUN echo \"/usr/bin/screen\" >> /etc/shells\nRUN usermod -s /usr/bin/screen tidal\nRUN chown -R tidal.tidal /home/tidal/*.tidal\nCMD [\"/usr/bin/supervisord\"]\n","originalDockerfileUglifiedHash":"d2a117b170cffd192486f1befc0fc77d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6a89cd5f69d6d0ef4ca550d6600f1a241a90a740.dockerfile"}