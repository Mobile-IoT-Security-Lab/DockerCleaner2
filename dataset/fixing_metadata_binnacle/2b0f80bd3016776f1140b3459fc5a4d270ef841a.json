{"seed":3425930173,"processedDockerfileHash":"06706c9eb1f9b74fa99215353eb748e9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN : \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb4.8-dev libtidy-dev libxslt-dev libgeoip-dev spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Hotfixes php-5.2\n#  # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n#  # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n#   Download PHP\nENV PHP_VERSION=\"5.2.17\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php5/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"b27947f3045220faf16e4d9158cbfe13 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-db4 --enable-fastcgi --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#   Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php5/conf.d/30_gd.ini\n#   Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/pecl_http-1.7.6\nRUN echo \"extension=http.so\" > /etc/php5/conf.d/30_http.ini\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.0.1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apc-3.1.13\nRUN echo \"extension=apc.so\\napc.enabled=1\" > /etc/php5/conf.d/30_apc.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n#   Install ioncube\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 \\\n && tar xfj ioncube_loaders_lin_x86-64.tar.bz2 \\\n && mv ioncube/ioncube_loader_lin_5.2.so $( php-config --extension-dir ;)/ioncube_loader.so \\\n && rm -rf /tmp/install\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#   Enable ioncube\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/ioncube_loader.so\" > /etc/php5/conf.d/20_ioncube_loder.ini\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#  Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb4.8-dev libtidy-dev libxslt-dev libgeoip-dev spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#  Hotfixes php-5.2\n# # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n# # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n#  Download PHP\nENV PHP_VERSION=\"5.2.17\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php5/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"b27947f3045220faf16e4d9158cbfe13 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-db4 --enable-fastcgi --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#  Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#  Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#  Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php5/conf.d/30_gd.ini\n#  Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/pecl_http-1.7.6\nRUN echo \"extension=http.so\" > /etc/php5/conf.d/30_http.ini\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.0.1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apc-3.1.13\nRUN echo \"extension=apc.so\\napc.enabled=1\" > /etc/php5/conf.d/30_apc.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n#  Install ioncube\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 \\\n && tar xfj ioncube_loaders_lin_x86-64.tar.bz2 \\\n && mv ioncube/ioncube_loader_lin_5.2.so $( php-config --extension-dir ;)/ioncube_loader.so \\\n && rm -rf /tmp/install\n#  Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#  Enable ioncube\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/ioncube_loader.so\" > /etc/php5/conf.d/20_ioncube_loder.ini\n#  Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n","injectedSmells":[],"originalDockerfileHash":"dbfd29ae6ce9640beda9e2bfcc338bbd","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Based on ubuntu 12.04\nFROM ubuntu:precise\nMAINTAINER Christian Simon <simon@swine.de>\n#   Update everything & install prequesites\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install build-essential wget bzip2 libpng-dev libmcrypt-dev libmcrypt4 libmhash-dev libmysqlclient-dev libjpeg-dev zlib1g-dev libfreetype6-dev libfontconfig1-dev re2c libgpg-error-dev uuid-dev libt1-dev libsnmp-dev libc-client2007e-dev libaspell-dev libbz2-dev libc-client2007e-dev flex bison libsqlite3-dev libpq-dev libcurl4-openssl-dev libmagickwand-dev libgd2-xpm-dev autoconf imagemagick graphicsmagick libdb4.8-dev libtidy-dev libxslt-dev libgeoip-dev spawn-fcgi \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y dist-upgrade \\\n && apt-get clean \\\n && rm /var/lib/apt/lists/*_*\n#   Hotfixes php-5.2\n#  # Copy libc-client to x86_64-dir\nRUN cp /usr/lib/libc-client.so /usr/lib/x86_64-linux-gnu/\nRUN cp /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/\n#  # Install compatible openssl 0.9.8\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://www.openssl.org/source/openssl-0.9.8za.tar.gz \\\n && echo \"2f989915f8fea49aa1bc37aa58500cce openssl-0.9.8za.tar.gz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz openssl-0.9.8za.tar.gz \\\n && cd openssl-0.9.8za \\\n && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n && make \\\n && make test \\\n && make install \\\n && cd \\\n && rm -rf /tmp/install\n#   Download PHP\nENV PHP_VERSION=\"5.2.17\"\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://museum.php.net/php5/php-${PHP_VERSION}.tar.bz2 \\\n && echo \"b27947f3045220faf16e4d9158cbfe13 php-${PHP_VERSION}.tar.bz2\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfj php-${PHP_VERSION}.tar.bz2 \\\n && cd php-${PHP_VERSION} \\\n && ./configure --enable-cgi --with-config-file-path=/etc/php5 --with-config-file-scan-dir=/etc/php5/conf.d --with-libdir=lib/x86_64-linux-gnu --with-db4 --enable-fastcgi --with-mcrypt --with-zlib --with-curl --disable-debug --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --with-mhash --enable-zip --with-pcre-regex --with-mysqli --with-mysql --with-gd=shared,/usr --enable-gd-native-ttf --with-ldap --with-mcrypt --with-mhash --with-snmp --enable-ctype --with-freetype-dir=shared,/usr --with-jpeg-dir=/usr --with-t1lib=/usr --enable-bcmath --with-bz2 --enable-ctype --with-iconv --enable-exif --enable-ftp --with-gettext --enable-mbstring --with-imap --with-imap-ssl --with-kerberos --with-pdo-mysql --enable-soap --with-tidy --with-xsl --with-libxml-dir=/usr --with-openssl --with-openssl-dir=/usr/local \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\n#   Create config directory\nRUN mkdir -p /etc/php5/conf.d/\n#   Set location and timestamp\nRUN echo \"date.timezone=Europe/Berlin\\ndate.default_latitude=49.08\\ndate.default_longitude=11.22\" > /etc/php5/conf.d/10_timezone.ini\n#   Enable gd lib\nRUN echo \"extension=gd.so\" > /etc/php5/conf.d/30_gd.ini\n#   Build module xhprof-0.9.4\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://pecl.php.net/get/xhprof-0.9.4.tgz \\\n && echo \"ab4062a7337e3bdaa2fd7065a7942b8d xhprof-0.9.4.tgz\" > md5sums \\\n && md5sum -c md5sums \\\n && tar xfz xhprof-0.9.4.tgz \\\n && cd xhprof-0.9.4/extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf /tmp/install\nRUN pecl install channel://pecl.php.net/pecl_http-1.7.6\nRUN echo \"extension=http.so\" > /etc/php5/conf.d/30_http.ini\nRUN pecl install channel://pecl.php.net/xdebug-2.2.5\nRUN pecl install channel://pecl.php.net/imagick-3.0.1\nRUN echo \"extension=imagick.so\" > /etc/php5/conf.d/30_imagick.ini\nRUN pecl install channel://pecl.php.net/apc-3.1.13\nRUN echo \"extension=apc.so\\napc.enabled=1\" > /etc/php5/conf.d/30_apc.ini\nRUN pecl install channel://pecl.php.net/mailparse-2.1.6\nRUN echo \"extension=mailparse.so\" > /etc/php5/conf.d/30_mailparse.ini\nRUN pecl install channel://pecl.php.net/geoip-1.0.8\nRUN echo \"extension=geoip.so\" > /etc/php5/conf.d/30_geoip.ini\nRUN pecl install channel://pecl.php.net/memcache-3.0.8\nRUN echo \"extension=memcache.so\" > /etc/php5/conf.d/30_memcache.ini\n#   Install ioncube\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget http://downloads3.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.bz2 \\\n && tar xfj ioncube_loaders_lin_x86-64.tar.bz2 \\\n && mv ioncube/ioncube_loader_lin_5.2.so $( php-config --extension-dir ;)/ioncube_loader.so \\\n && rm -rf /tmp/install\n#   Install sendmail replacement / set ip address of real mailserver to 172.17.42.1\nRUN mkdir -p /tmp/install/ \\\n && cd /tmp/install \\\n && wget https://github.com/simonswine/mini_sendmail/archive/1.3.8-1.tar.gz \\\n && tar xvfz 1.3.8-1.tar.gz \\\n && cd mini_sendmail*/ \\\n && make SMTP_HOST=172.17.42.1 \\\n && cp -v mini_sendmail /usr/sbin/sendmail \\\n && rm -rf /tmp/install\n#   Enable ioncube\nRUN echo \"zend_extension=$( php-config --extension-dir ;)/ioncube_loader.so\" > /etc/php5/conf.d/20_ioncube_loder.ini\n#   Test if there is stderr output\nRUN bash -c \"[[ $( php -i 2>&1 > /dev/null | wc -l ;) -ne 0 ]] \\\n && php -i > /dev/null \\\n && exit 1; exit 0\"\n","originalDockerfileUglifiedHash":"0cea393e9c7401823db2d731564166af","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2b0f80bd3016776f1140b3459fc5a4d270ef841a.dockerfile"}