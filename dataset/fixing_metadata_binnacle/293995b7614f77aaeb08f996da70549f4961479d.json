{"seed":2199249992,"processedDockerfileHash":"488439ea3f907946d9e6f562b46fda18","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:xenial\nMAINTAINER ttickle@broadinstitute.org\n#  #####################\n#  # Environment\n#  #####################\n#  # Constants\n#  ## SOFTWARE versions\nENV BCFTOOLS_VERSION=\"1.3.1\"\nENV SAMTOOLS_VERSION=\"1.3.1\"\nENV STAR_VERSION=\"2.5.2a\"\nENV SNPEFF_VERSION=\"v4_3b_core\"\nENV PICARD_VERSION=\"2.0.1\"\n#  ## locations\nENV BIN=\"/usr/local/bin\"\nENV SRC=\"/usr/local/src\"\nENV MUTATION_HOME=\"${SRC}/Trinity_CTAT/mutation\"\nENV STAR_HOME=\"${BIN}/STAR\"\n#  ## URLS\nENV BCFTOOLS_URL=\"https://github.com/samtools/bcftools/releases/download/${BCFTOOLS_VERSION}/bcftools-${BCFTOOLS_VERSION}.tar.bz2\"\nENV PICARD_URL=\"https://github.com/broadinstitute/picard/releases/download/${PICARD_VERSION}/picard-tools-${PICARD_VERSION}.zip\"\nENV SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\"\nENV SNPEFF_URL=\"https://sourceforge.net/projects/snpeff/files/snpEff_${SNPEFF_VERSION}.zip/download\"\nENV STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\"\n#  # Set path\nENV PATH=\"${BIN}:${MUTATION_HOME}:${MUTATION_HOME}/src:${STAR_HOME}:${SRC}:${PATH}\"\n#  #####################\n#  # Dependencies\n#  #####################\n#  #############\n#  # Helper tools\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends git=1:2.7.4-0ubuntu1.10 unzip=6.0-20ubuntu1.1 wget=1.17.1-1ubuntu1.5 software-properties-common=0.96.20.10 -y )\n#  #############\n#  # GenomeAnalysisTK-3.1-1-g07a4bf8\n#   This is pulled in during the build\n#   If you are using this container / image please make sure to register a license for GATK at\n#   https://software.broadinstitute.org/gatk/download/licensing.php\nCOPY GenomeAnalysisTK.jar /usr/local/bin\n#  #############\n#  # Java 1.7 for GATK\n#  # /usr/lib/jvm/java-8-oracle/jre/bin/java\n#  # JAVA 1.8 for PICARD tools\n#  # /usr/lib/jvm/java-8-oracle/jre/bin/java\nRUN echo \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee -a /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886 \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends oracle-java7-installer -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends oracle-java8-installer -y )\n#  #############\n#  # PICARD tools 1.764\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${PICARD_URL} \\\n && unzip ${SRC}/picard-tools-${PICARD_VERSION}.zip \\\n && mv ${SRC}/picard-tools-${PICARD_VERSION}/* ${BIN} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION}.zip\n#  # Pulling in some old jars until the code is updated.\nCOPY AddOrReplaceReadGroups.jar /usr/local/bin\nCOPY MarkDuplicates.jar /usr/local/bin\nCOPY SortSam.jar /usr/local/bin\n#  #############\n#  # Python 2.7.9\nRUN (apt-get update ;apt-get install --no-install-recommends python=2.7.11-1 -y )\n#  # Requests\nWORKDIR ${BIN}\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install requests==2.28.2\n#  #############\n#  # R version 3.1.1\nRUN (apt-get update ;apt-get install --no-install-recommends r-base=3.2.3-4 -y )\n#  #############\n#  # Samtools\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SAMTOOLS_URL} \\\n && tar -jxvf ${BIN}/samtools-${SAMTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\n#  #############\n#  # STAR\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${STAR_URL} \\\n && tar -xvf ${SRC}/${STAR_VERSION}.tar.gz -C ${SRC} \\\n && mv ${SRC}/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR ${BIN} \\\n && rm -r ${SRC}/STAR-${STAR_VERSION} \\\n && rm ${SRC}/${STAR_VERSION}.tar.gz\n#  #############\n#  # BCFTOOLS\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${BCFTOOLS_URL} \\\n && tar -xvf ${BIN}/bcftools-${BCFTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/bcftools-${BCFTOOLS_VERSION}\nRUN make \\\n && make install\n#  ############\n#  # SNPEFF\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SNPEFF_URL} \\\n && unzip ${BIN}/download \\\n && rm download\nWORKDIR ${BIN}/snpEff\nRUN java -jar snpEff.jar download hg19\n#  #####################\n#  # Tool installation\n#  #####################\n#  ##############\n#  # CTAT Mutation\nWORKDIR ${SRC}\nRUN git clone --recursive https://github.com/NCIP/Trinity_CTAT.git\n#  #####################\n#   Specify default behavior\n#   -h ?\n#  #####################\nCMD rnaseq_mutation_pipeline.py --help\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:xenial\nMAINTAINER ttickle@broadinstitute.org\n# #####################\n# # Environment\n# #####################\n# # Constants\n# ## SOFTWARE versions\nENV BCFTOOLS_VERSION=\"1.3.1\"\nENV SAMTOOLS_VERSION=\"1.3.1\"\nENV STAR_VERSION=\"2.5.2a\"\nENV SNPEFF_VERSION=\"v4_3b_core\"\nENV PICARD_VERSION=\"2.0.1\"\n# ## locations\nENV BIN=\"/usr/local/bin\"\nENV SRC=\"/usr/local/src\"\nENV MUTATION_HOME=\"${SRC}/Trinity_CTAT/mutation\"\nENV STAR_HOME=\"${BIN}/STAR\"\n# ## URLS\nENV BCFTOOLS_URL=\"https://github.com/samtools/bcftools/releases/download/${BCFTOOLS_VERSION}/bcftools-${BCFTOOLS_VERSION}.tar.bz2\"\nENV PICARD_URL=\"https://github.com/broadinstitute/picard/releases/download/${PICARD_VERSION}/picard-tools-${PICARD_VERSION}.zip\"\nENV SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\"\nENV SNPEFF_URL=\"https://sourceforge.net/projects/snpeff/files/snpEff_${SNPEFF_VERSION}.zip/download\"\nENV STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\"\n# # Set path\nENV PATH=\"${BIN}:${MUTATION_HOME}:${MUTATION_HOME}/src:${STAR_HOME}:${SRC}:${PATH}\"\n# #####################\n# # Dependencies\n# #####################\n# #############\n# # Helper tools\nRUN apt-get update\nRUN apt-get install git unzip wget software-properties-common -y\n# #############\n# # GenomeAnalysisTK-3.1-1-g07a4bf8\n#  This is pulled in during the build\n#  If you are using this container / image please make sure to register a license for GATK at\n#  https://software.broadinstitute.org/gatk/download/licensing.php\nCOPY GenomeAnalysisTK.jar /usr/local/bin\n# #############\n# # Java 1.7 for GATK\n# # /usr/lib/jvm/java-8-oracle/jre/bin/java\n# # JAVA 1.8 for PICARD tools\n# # /usr/lib/jvm/java-8-oracle/jre/bin/java\nRUN echo \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee -a /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886 \\\n && apt-get update \\\n && apt-get install oracle-java7-installer -y \\\n && apt-get install oracle-java8-installer -y\n# #############\n# # PICARD tools 1.764\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${PICARD_URL} \\\n && unzip ${SRC}/picard-tools-${PICARD_VERSION}.zip \\\n && mv ${SRC}/picard-tools-${PICARD_VERSION}/* ${BIN} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION}.zip\n# # Pulling in some old jars until the code is updated.\nCOPY AddOrReplaceReadGroups.jar /usr/local/bin\nCOPY MarkDuplicates.jar /usr/local/bin\nCOPY SortSam.jar /usr/local/bin\n# #############\n# # Python 2.7.9\nRUN apt-get install python=2.7.11-1 -y\n# # Requests\nWORKDIR ${BIN}\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install requests\n# #############\n# # R version 3.1.1\nRUN apt-get install r-base=3.2.3-4 -y\n# #############\n# # Samtools\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SAMTOOLS_URL} \\\n && tar -jxvf ${BIN}/samtools-${SAMTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\n# #############\n# # STAR\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${STAR_URL} \\\n && tar -xvf ${SRC}/${STAR_VERSION}.tar.gz -C ${SRC} \\\n && mv ${SRC}/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR ${BIN} \\\n && rm -r ${SRC}/STAR-${STAR_VERSION} \\\n && rm ${SRC}/${STAR_VERSION}.tar.gz\n# #############\n# # BCFTOOLS\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${BCFTOOLS_URL} \\\n && tar -xvf ${BIN}/bcftools-${BCFTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/bcftools-${BCFTOOLS_VERSION}\nRUN make \\\n && make install\n# ############\n# # SNPEFF\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SNPEFF_URL} \\\n && unzip ${BIN}/download \\\n && rm download\nWORKDIR ${BIN}/snpEff\nRUN java -jar snpEff.jar download hg19\n# #####################\n# # Tool installation\n# #####################\n# ##############\n# # CTAT Mutation\nWORKDIR ${SRC}\nRUN git clone --recursive https://github.com/NCIP/Trinity_CTAT.git\n# #####################\n#  Specify default behavior\n#  -h ?\n# #####################\nCMD rnaseq_mutation_pipeline.py --help\n","injectedSmells":[],"originalDockerfileHash":"55e70e5090d7b6f2ef19d9608315e448","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:xenial\nMAINTAINER ttickle@broadinstitute.org\n#  #####################\n#  # Environment\n#  #####################\n#  # Constants\n#  ## SOFTWARE versions\nENV BCFTOOLS_VERSION=\"1.3.1\"\nENV SAMTOOLS_VERSION=\"1.3.1\"\nENV STAR_VERSION=\"2.5.2a\"\nENV SNPEFF_VERSION=\"v4_3b_core\"\nENV PICARD_VERSION=\"2.0.1\"\n#  ## locations\nENV BIN=\"/usr/local/bin\"\nENV SRC=\"/usr/local/src\"\nENV MUTATION_HOME=\"${SRC}/Trinity_CTAT/mutation\"\nENV STAR_HOME=\"${BIN}/STAR\"\n#  ## URLS\nENV BCFTOOLS_URL=\"https://github.com/samtools/bcftools/releases/download/${BCFTOOLS_VERSION}/bcftools-${BCFTOOLS_VERSION}.tar.bz2\"\nENV PICARD_URL=\"https://github.com/broadinstitute/picard/releases/download/${PICARD_VERSION}/picard-tools-${PICARD_VERSION}.zip\"\nENV SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\"\nENV SNPEFF_URL=\"https://sourceforge.net/projects/snpeff/files/snpEff_${SNPEFF_VERSION}.zip/download\"\nENV STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\"\n#  # Set path\nENV PATH=\"${BIN}:${MUTATION_HOME}:${MUTATION_HOME}/src:${STAR_HOME}:${SRC}:${PATH}\"\n#  #####################\n#  # Dependencies\n#  #####################\n#  #############\n#  # Helper tools\nRUN apt-get update\nRUN apt-get install git unzip wget software-properties-common -y\n#  #############\n#  # GenomeAnalysisTK-3.1-1-g07a4bf8\n#   This is pulled in during the build\n#   If you are using this container / image please make sure to register a license for GATK at\n#   https://software.broadinstitute.org/gatk/download/licensing.php\nCOPY GenomeAnalysisTK.jar /usr/local/bin\n#  #############\n#  # Java 1.7 for GATK\n#  # /usr/lib/jvm/java-8-oracle/jre/bin/java\n#  # JAVA 1.8 for PICARD tools\n#  # /usr/lib/jvm/java-8-oracle/jre/bin/java\nRUN echo \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu xenial main\" | tee -a /etc/apt/sources.list.d/webupd8team-java.list \\\n && echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886 \\\n && apt-get update \\\n && apt-get install oracle-java7-installer -y \\\n && apt-get install oracle-java8-installer -y\n#  #############\n#  # PICARD tools 1.764\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${PICARD_URL} \\\n && unzip ${SRC}/picard-tools-${PICARD_VERSION}.zip \\\n && mv ${SRC}/picard-tools-${PICARD_VERSION}/* ${BIN} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION} \\\n && rm -r ${SRC}/picard-tools-${PICARD_VERSION}.zip\n#  # Pulling in some old jars until the code is updated.\nCOPY AddOrReplaceReadGroups.jar /usr/local/bin\nCOPY MarkDuplicates.jar /usr/local/bin\nCOPY SortSam.jar /usr/local/bin\n#  #############\n#  # Python 2.7.9\nRUN apt-get install python=2.7.11-1 -y\n#  # Requests\nWORKDIR ${BIN}\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install requests\n#  #############\n#  # R version 3.1.1\nRUN apt-get install r-base=3.2.3-4 -y\n#  #############\n#  # Samtools\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SAMTOOLS_URL} \\\n && tar -jxvf ${BIN}/samtools-${SAMTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\nWORKDIR ${BIN}/samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION}\nRUN make prefix=/usr/local install\n#  #############\n#  # STAR\nWORKDIR ${SRC}\nRUN wget -P ${SRC} ${STAR_URL} \\\n && tar -xvf ${SRC}/${STAR_VERSION}.tar.gz -C ${SRC} \\\n && mv ${SRC}/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR ${BIN} \\\n && rm -r ${SRC}/STAR-${STAR_VERSION} \\\n && rm ${SRC}/${STAR_VERSION}.tar.gz\n#  #############\n#  # BCFTOOLS\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${BCFTOOLS_URL} \\\n && tar -xvf ${BIN}/bcftools-${BCFTOOLS_VERSION}.tar.bz2 -C ${BIN}\nWORKDIR ${BIN}/bcftools-${BCFTOOLS_VERSION}\nRUN make \\\n && make install\n#  ############\n#  # SNPEFF\nWORKDIR ${BIN}\nRUN wget -P ${BIN} ${SNPEFF_URL} \\\n && unzip ${BIN}/download \\\n && rm download\nWORKDIR ${BIN}/snpEff\nRUN java -jar snpEff.jar download hg19\n#  #####################\n#  # Tool installation\n#  #####################\n#  ##############\n#  # CTAT Mutation\nWORKDIR ${SRC}\nRUN git clone --recursive https://github.com/NCIP/Trinity_CTAT.git\n#  #####################\n#   Specify default behavior\n#   -h ?\n#  #####################\nCMD rnaseq_mutation_pipeline.py --help\n","originalDockerfileUglifiedHash":"7b91179f0d0b378963f6690834f377fd","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/293995b7614f77aaeb08f996da70549f4961479d.dockerfile"}