{"seed":3018683644,"processedDockerfileHash":"cf201c677609b164a8c6bf18ee3e27ae","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Base image, official docker PHP image\nFROM php:7.0-fpm\n#  ###########################################################################\n#  ### This installes following extensions:                               ####\n#  ###########################################################################\n#  ### - pgsql                                                            ####\n#  ### - iconv                                                            ####\n#  ### - intl                                                             ####\n#  ### - redis                                                            ####\n#  ### - apcu                                                             ####\n#  ### - apc-bc                                                           ####\n#  ### - sockets                                                          ####\n#  ### - memcached                                                        ####\n#  ### - imagick                                                          ####\n#  ###########################################################################\n#   default PHP config\nRUN if [ -f /usr/local/etc/php/php.ini ] ; then rm /usr/local/etc/php/php.ini ; fi\nCOPY config/php.ini /usr/local/etc/php/\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends zlib1g-dev libicu-dev g++ libmcrypt-dev libpq-dev libmagickwand-dev imagemagick libmemcached-dev libevent-dev openssl -my\n#   Install basic extensions\nRUN docker-php-ext-install sockets mcrypt iconv\n#   Install intl extensions\nRUN docker-php-ext-configure intl \\\n && docker-php-ext-install intl\n#   Install postgres extension\nRUN docker-php-ext-configure pdo_pgsql \\\n && docker-php-ext-install pdo_pgsql\n#   Install event extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/event.tar.gz https://pecl.php.net/get/event-2.0.3.tgz\nRUN mkdir -p /usr/src/php/ext/event \\\n && tar xf /tmp/event.tar.gz -C /usr/src/php/ext/event --strip-components=1\nRUN rm -rd /usr/src/php/ext/event \\\n && rm /tmp/event.tar.gz\n#   Install redis extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/phpredis.tar.gz https://github.com/phpredis/phpredis/archive/php7.tar.gz\nRUN mkdir -p /usr/src/php/ext/redis \\\n && tar xf /tmp/phpredis.tar.gz -C /usr/src/php/ext/redis --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure redis \\\n && docker-php-ext-install redis\n#   cleanup\nRUN rm -rd /usr/src/php/ext/redis \\\n && rm /tmp/phpredis.tar.gz\n#   Install imagick extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/phpimagick.tar.gz https://github.com/mkoppanen/imagick/archive/phpseven.tar.gz\nRUN mkdir -p /usr/src/php/ext/imagick \\\n && tar xf /tmp/phpimagick.tar.gz -C /usr/src/php/ext/imagick --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure imagick \\\n && docker-php-ext-install imagick\n#   cleanup\nRUN rm -rd /usr/src/php/ext/imagick \\\n && rm /tmp/phpimagick.tar.gz\n#   Install memcached extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/phpmemcached.tar.gz https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz\nRUN mkdir -p /usr/src/php/ext/memcached \\\n && tar xf /tmp/phpmemcached.tar.gz -C /usr/src/php/ext/memcached --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure memcached \\\n && docker-php-ext-install memcached\n#   cleanup\nRUN rm -rd /usr/src/php/ext/memcached \\\n && rm /tmp/phpmemcached.tar.gz\n#   Install APCu extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/apcu.tar.gz https://pecl.php.net/get/apcu-5.1.3.tgz\nRUN mkdir -p /usr/src/php/ext/apcu \\\n && tar xf /tmp/apcu.tar.gz -C /usr/src/php/ext/apcu --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure apcu \\\n && docker-php-ext-install apcu\nRUN rm -rd /usr/src/php/ext/apcu \\\n && rm /tmp/apcu.tar.gz\n#   Install APCu-BC extension\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/apcu_bc.tar.gz https://pecl.php.net/get/apcu_bc-1.0.3.tgz\nRUN mkdir -p /usr/src/php/ext/apcu-bc \\\n && tar xf /tmp/apcu_bc.tar.gz -C /usr/src/php/ext/apcu-bc --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure apcu-bc \\\n && docker-php-ext-install apcu-bc\nRUN rm -rd /usr/src/php/ext/apcu-bc \\\n && rm /tmp/apcu_bc.tar.gz\n#  Load APCU.ini before APC.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apcu.ini\nRUN echo extension=apcu.so > /usr/local/etc/php/conf.d/20-php-ext-apcu.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apc.ini\nRUN echo extension=apc.so > /usr/local/etc/php/conf.d/21-php-ext-apc.ini\nVOLUME [\"/usr/local/etc\"]\nRUN usermod -u 1000 www-data\nEXPOSE 9000/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"#  Base image, official docker PHP image\nFROM php:7.0-fpm\n# ###########################################################################\n# ### This installes following extensions:                               ####\n# ###########################################################################\n# ### - pgsql                                                            ####\n# ### - iconv                                                            ####\n# ### - intl                                                             ####\n# ### - redis                                                            ####\n# ### - apcu                                                             ####\n# ### - apc-bc                                                           ####\n# ### - sockets                                                          ####\n# ### - memcached                                                        ####\n# ### - imagick                                                          ####\n# ###########################################################################\n#  default PHP config\nRUN if [ -f /usr/local/etc/php/php.ini ] ; then rm /usr/local/etc/php/php.ini ; fi\nCOPY config/php.ini /usr/local/etc/php/\n#  Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends zlib1g-dev libicu-dev g++ libmcrypt-dev libpq-dev libmagickwand-dev imagemagick libmemcached-dev libevent-dev openssl -my\n#  Install basic extensions\nRUN docker-php-ext-install sockets mcrypt iconv\n#  Install intl extensions\nRUN docker-php-ext-configure intl \\\n && docker-php-ext-install intl\n#  Install postgres extension\nRUN docker-php-ext-configure pdo_pgsql \\\n && docker-php-ext-install pdo_pgsql\n#  Install event extension\nADD https://pecl.php.net/get/event-2.0.3.tgz /tmp/event.tar.gz\nRUN mkdir -p /usr/src/php/ext/event \\\n && tar xf /tmp/event.tar.gz -C /usr/src/php/ext/event --strip-components=1\nRUN rm -rd /usr/src/php/ext/event \\\n && rm /tmp/event.tar.gz\n#  Install redis extension\nADD https://github.com/phpredis/phpredis/archive/php7.tar.gz /tmp/phpredis.tar.gz\nRUN mkdir -p /usr/src/php/ext/redis \\\n && tar xf /tmp/phpredis.tar.gz -C /usr/src/php/ext/redis --strip-components=1\n#  configure and install\nRUN docker-php-ext-configure redis \\\n && docker-php-ext-install redis\n#  cleanup\nRUN rm -rd /usr/src/php/ext/redis \\\n && rm /tmp/phpredis.tar.gz\n#  Install imagick extension\nADD https://github.com/mkoppanen/imagick/archive/phpseven.tar.gz /tmp/phpimagick.tar.gz\nRUN mkdir -p /usr/src/php/ext/imagick \\\n && tar xf /tmp/phpimagick.tar.gz -C /usr/src/php/ext/imagick --strip-components=1\n#  configure and install\nRUN docker-php-ext-configure imagick \\\n && docker-php-ext-install imagick\n#  cleanup\nRUN rm -rd /usr/src/php/ext/imagick \\\n && rm /tmp/phpimagick.tar.gz\n#  Install memcached extension\nADD https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz /tmp/phpmemcached.tar.gz\nRUN mkdir -p /usr/src/php/ext/memcached \\\n && tar xf /tmp/phpmemcached.tar.gz -C /usr/src/php/ext/memcached --strip-components=1\n#  configure and install\nRUN docker-php-ext-configure memcached \\\n && docker-php-ext-install memcached\n#  cleanup\nRUN rm -rd /usr/src/php/ext/memcached \\\n && rm /tmp/phpmemcached.tar.gz\n#  Install APCu extension\nADD https://pecl.php.net/get/apcu-5.1.3.tgz /tmp/apcu.tar.gz\nRUN mkdir -p /usr/src/php/ext/apcu \\\n && tar xf /tmp/apcu.tar.gz -C /usr/src/php/ext/apcu --strip-components=1\n#  configure and install\nRUN docker-php-ext-configure apcu \\\n && docker-php-ext-install apcu\nRUN rm -rd /usr/src/php/ext/apcu \\\n && rm /tmp/apcu.tar.gz\n#  Install APCu-BC extension\nADD https://pecl.php.net/get/apcu_bc-1.0.3.tgz /tmp/apcu_bc.tar.gz\nRUN mkdir -p /usr/src/php/ext/apcu-bc \\\n && tar xf /tmp/apcu_bc.tar.gz -C /usr/src/php/ext/apcu-bc --strip-components=1\n#  configure and install\nRUN docker-php-ext-configure apcu-bc \\\n && docker-php-ext-install apcu-bc\nRUN rm -rd /usr/src/php/ext/apcu-bc \\\n && rm /tmp/apcu_bc.tar.gz\n# Load APCU.ini before APC.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apcu.ini\nRUN echo extension=apcu.so > /usr/local/etc/php/conf.d/20-php-ext-apcu.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apc.ini\nRUN echo extension=apc.so > /usr/local/etc/php/conf.d/21-php-ext-apc.ini\nVOLUME [\"/usr/local/etc\"]\nRUN usermod -u 1000 www-data\nEXPOSE 9000/tcp\n","injectedSmells":[],"originalDockerfileHash":"e71e86156cc8f4c920544468b3ed74fc","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Base image, official docker PHP image\nFROM php:7.0-fpm\n#  ###########################################################################\n#  ### This installes following extensions:                               ####\n#  ###########################################################################\n#  ### - pgsql                                                            ####\n#  ### - iconv                                                            ####\n#  ### - intl                                                             ####\n#  ### - redis                                                            ####\n#  ### - apcu                                                             ####\n#  ### - apc-bc                                                           ####\n#  ### - sockets                                                          ####\n#  ### - memcached                                                        ####\n#  ### - imagick                                                          ####\n#  ###########################################################################\n#   default PHP config\nRUN if [ -f /usr/local/etc/php/php.ini ] ; then rm /usr/local/etc/php/php.ini ; fi\nCOPY config/php.ini /usr/local/etc/php/\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends zlib1g-dev libicu-dev g++ libmcrypt-dev libpq-dev libmagickwand-dev imagemagick libmemcached-dev libevent-dev openssl -my\n#   Install basic extensions\nRUN docker-php-ext-install sockets mcrypt iconv\n#   Install intl extensions\nRUN docker-php-ext-configure intl \\\n && docker-php-ext-install intl\n#   Install postgres extension\nRUN docker-php-ext-configure pdo_pgsql \\\n && docker-php-ext-install pdo_pgsql\n#   Install event extension\nADD https://pecl.php.net/get/event-2.0.3.tgz /tmp/event.tar.gz\nRUN mkdir -p /usr/src/php/ext/event \\\n && tar xf /tmp/event.tar.gz -C /usr/src/php/ext/event --strip-components=1\nRUN rm -rd /usr/src/php/ext/event \\\n && rm /tmp/event.tar.gz\n#   Install redis extension\nADD https://github.com/phpredis/phpredis/archive/php7.tar.gz /tmp/phpredis.tar.gz\nRUN mkdir -p /usr/src/php/ext/redis \\\n && tar xf /tmp/phpredis.tar.gz -C /usr/src/php/ext/redis --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure redis \\\n && docker-php-ext-install redis\n#   cleanup\nRUN rm -rd /usr/src/php/ext/redis \\\n && rm /tmp/phpredis.tar.gz\n#   Install imagick extension\nADD https://github.com/mkoppanen/imagick/archive/phpseven.tar.gz /tmp/phpimagick.tar.gz\nRUN mkdir -p /usr/src/php/ext/imagick \\\n && tar xf /tmp/phpimagick.tar.gz -C /usr/src/php/ext/imagick --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure imagick \\\n && docker-php-ext-install imagick\n#   cleanup\nRUN rm -rd /usr/src/php/ext/imagick \\\n && rm /tmp/phpimagick.tar.gz\n#   Install memcached extension\nADD https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz /tmp/phpmemcached.tar.gz\nRUN mkdir -p /usr/src/php/ext/memcached \\\n && tar xf /tmp/phpmemcached.tar.gz -C /usr/src/php/ext/memcached --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure memcached \\\n && docker-php-ext-install memcached\n#   cleanup\nRUN rm -rd /usr/src/php/ext/memcached \\\n && rm /tmp/phpmemcached.tar.gz\n#   Install APCu extension\nADD https://pecl.php.net/get/apcu-5.1.3.tgz /tmp/apcu.tar.gz\nRUN mkdir -p /usr/src/php/ext/apcu \\\n && tar xf /tmp/apcu.tar.gz -C /usr/src/php/ext/apcu --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure apcu \\\n && docker-php-ext-install apcu\nRUN rm -rd /usr/src/php/ext/apcu \\\n && rm /tmp/apcu.tar.gz\n#   Install APCu-BC extension\nADD https://pecl.php.net/get/apcu_bc-1.0.3.tgz /tmp/apcu_bc.tar.gz\nRUN mkdir -p /usr/src/php/ext/apcu-bc \\\n && tar xf /tmp/apcu_bc.tar.gz -C /usr/src/php/ext/apcu-bc --strip-components=1\n#   configure and install\nRUN docker-php-ext-configure apcu-bc \\\n && docker-php-ext-install apcu-bc\nRUN rm -rd /usr/src/php/ext/apcu-bc \\\n && rm /tmp/apcu_bc.tar.gz\n#  Load APCU.ini before APC.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apcu.ini\nRUN echo extension=apcu.so > /usr/local/etc/php/conf.d/20-php-ext-apcu.ini\nRUN rm /usr/local/etc/php/conf.d/docker-php-ext-apc.ini\nRUN echo extension=apc.so > /usr/local/etc/php/conf.d/21-php-ext-apc.ini\nVOLUME [\"/usr/local/etc\"]\nRUN usermod -u 1000 www-data\nEXPOSE 9000/tcp\n","originalDockerfileUglifiedHash":"24d8f883c4c4326e75608f04e27234aa","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/54139c1af90f0d707e77ad466518eb46240c27d2.dockerfile"}