{"seed":3289411819,"processedDockerfileHash":"6595a2453459ca968b1f5ece7b33ad72","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7\n#   Update existing packages\nRUN yum -y update\n#   Add some repos\nRUN yum -y install epel-release centos-release-scl-rh\nRUN rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-*\n#   Add some COPRs\nRUN yum -y install yum-plugin-copr\nRUN yum -y copr enable cottsay/colcon\nRUN yum -y copr enable cottsay/devtoolset-8-make-nonblocking\n#   Install foundation packages\nRUN yum install @buildsys-build asio-devel ccache cmake cmake3 devtoolset-8 devtoolset-8-liblsan-devel devtoolset-8-make-nonblocking git matchbox-window-manager mesa-dri-drivers net-tools python36-colcon-common-extensions python36-cryptography python36-devel python36-docutils python36-pip python36-pytest-repeat python36-vcstool python36-virtualenv python-rosdep sudo tinyxml2-devel wget xorg-x11-server-Xvfb -y\n#   Install some packages still in testing\nRUN yum install --enablerepo=epel-testing python36-lark-parser -y\n#   Install some stuff via Pip which we don't have available in EPEL\nRUN pip3.6 install flake8 lxml matplotlib pep8 pydocstyle pydot pytest-rerunfailures\n#   Some support vars for building\nENV CMAKE_COMMAND=\"/usr/bin/cmake3\"\nENV ROS_PYTHON_VERSION=\"3\"\nENV CFLAGS=\"-I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV CXXFLAGS=\"-Wno-error=int-in-bool-context -I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV LANG=\"en_US.UTF-8\"\n#   Set up rosdep\nRUN rosdep init\n#   automatic invalidation once every day.\nRUN echo \"@today_str\"\nRUN yum -y update\n#   These dependencies were generated by invoking rosdep on the latest version of the target workspace:\nRUN yum install assimp-devel clang console-bridge-devel cppcheck cppunit-devel curl eigen3-devel freetype freetype-devel libcurl-devel libsq3-devel libX11-devel libXaw-devel libxml2 libXrandr-devel libyaml-devel log4cxx-devel mesa-libGL-devel mesa-libGLU-devel opencv-devel openssl pcre-devel pkgconfig poco-devel python36-catkin_pkg python36-empy python36-lark-parser python36-mock python36-numpy python36-psutil python36-pyflakes python36-pygraphviz python36-pytest python36-PyYAML python36-setuptools qt5-qtbase qt5-qtbase-devel qt5-qtbase-gui tinyxml2-devel tinyxml-devel uncrustify zlib-devel -y\n#   Create a user to own the build output.\nRUN useradd -u 1234 -m rosbuild\nRUN sudo -H -u rosbuild -- git config --global user.email \"jenkins@ci.ros2.org\"\nRUN sudo -H -u rosbuild -- git config --global user.name \"Jenkins ROS 2\"\nRUN echo 'rosbuild ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\nWORKDIR \"@workdir\"\n#   Add an entry point which changes rosbuild's UID from 1234 to the UID of the invoking user.\n#   This means that the generated files will have the same ownership as the host OS user.\nCOPY entry_point.sh /entry_point.sh\nRUN chmod 755 /entry_point.sh\nENTRYPOINT [\"/entry_point.sh\"]\nCMD [\"matchbox-window-manager\", \">\", \"/dev/null\", \"2>&1&;\", \"scl\", \"enable\", \"devtoolset-8\", \"--\", \"python36\", \"-u\", \"run_ros2_batch.py\", \"$CI_ARGS\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7\n#  Update existing packages\nRUN yum -y update\n#  Add some repos\nRUN yum -y install epel-release centos-release-scl-rh\nRUN rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-*\n#  Add some COPRs\nRUN yum -y install yum-plugin-copr\nRUN yum -y copr enable cottsay/colcon\nRUN yum -y copr enable cottsay/devtoolset-8-make-nonblocking\n#  Install foundation packages\nRUN yum install @buildsys-build asio-devel ccache cmake cmake3 devtoolset-8 devtoolset-8-liblsan-devel devtoolset-8-make-nonblocking git matchbox-window-manager mesa-dri-drivers net-tools python36-colcon-common-extensions python36-cryptography python36-devel python36-docutils python36-pip python36-pytest-repeat python36-vcstool python36-virtualenv python-rosdep sudo tinyxml2-devel wget xorg-x11-server-Xvfb -y\n#  Install some packages still in testing\nRUN yum install --enablerepo=epel-testing python36-lark-parser -y\n#  Install some stuff via Pip which we don't have available in EPEL\nRUN pip3.6 install flake8 lxml matplotlib pep8 pydocstyle pydot pytest-rerunfailures\n#  Some support vars for building\nENV CMAKE_COMMAND=\"/usr/bin/cmake3\"\nENV ROS_PYTHON_VERSION=\"3\"\nENV CFLAGS=\"-I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV CXXFLAGS=\"-Wno-error=int-in-bool-context -I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV LANG=\"en_US.UTF-8\"\n#  Set up rosdep\nRUN rosdep init\n#  automatic invalidation once every day.\nRUN echo \"@today_str\"\nRUN yum -y update\n#  These dependencies were generated by invoking rosdep on the latest version of the target workspace:\nRUN yum install assimp-devel clang console-bridge-devel cppcheck cppunit-devel curl eigen3-devel freetype freetype-devel libcurl-devel libsq3-devel libX11-devel libXaw-devel libxml2 libXrandr-devel libyaml-devel log4cxx-devel mesa-libGL-devel mesa-libGLU-devel opencv-devel openssl pcre-devel pkgconfig poco-devel python36-catkin_pkg python36-empy python36-lark-parser python36-mock python36-numpy python36-psutil python36-pyflakes python36-pygraphviz python36-pytest python36-PyYAML python36-setuptools qt5-qtbase qt5-qtbase-devel qt5-qtbase-gui tinyxml2-devel tinyxml-devel uncrustify zlib-devel -y\n#  Create a user to own the build output.\nRUN useradd -u 1234 -m rosbuild\nRUN sudo -H -u rosbuild -- git config --global user.email \"jenkins@ci.ros2.org\"\nRUN sudo -H -u rosbuild -- git config --global user.name \"Jenkins ROS 2\"\nRUN echo 'rosbuild ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\nWORKDIR \"@workdir\"\n#  Add an entry point which changes rosbuild's UID from 1234 to the UID of the invoking user.\n#  This means that the generated files will have the same ownership as the host OS user.\nADD entry_point.sh /entry_point.sh\nRUN chmod 755 /entry_point.sh\nENTRYPOINT [\"/entry_point.sh\"]\nCMD [\"matchbox-window-manager\", \">\", \"/dev/null\", \"2>&1&;\", \"scl\", \"enable\", \"devtoolset-8\", \"--\", \"python36\", \"-u\", \"run_ros2_batch.py\", \"$CI_ARGS\"]\n","injectedSmells":[],"originalDockerfileHash":"05fb46b6b7025c46ab5618d0c41070eb","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7\n#   Update existing packages\nRUN yum -y update\n#   Add some repos\nRUN yum -y install epel-release centos-release-scl-rh\nRUN rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-*\n#   Add some COPRs\nRUN yum -y install yum-plugin-copr\nRUN yum -y copr enable cottsay/colcon\nRUN yum -y copr enable cottsay/devtoolset-8-make-nonblocking\n#   Install foundation packages\nRUN yum install @buildsys-build asio-devel ccache cmake cmake3 devtoolset-8 devtoolset-8-liblsan-devel devtoolset-8-make-nonblocking git matchbox-window-manager mesa-dri-drivers net-tools python36-colcon-common-extensions python36-cryptography python36-devel python36-docutils python36-pip python36-pytest-repeat python36-vcstool python36-virtualenv python-rosdep sudo tinyxml2-devel wget xorg-x11-server-Xvfb -y\n#   Install some packages still in testing\nRUN yum install --enablerepo=epel-testing python36-lark-parser -y\n#   Install some stuff via Pip which we don't have available in EPEL\nRUN pip3.6 install flake8 lxml matplotlib pep8 pydocstyle pydot pytest-rerunfailures\n#   Some support vars for building\nENV CMAKE_COMMAND=\"/usr/bin/cmake3\"\nENV ROS_PYTHON_VERSION=\"3\"\nENV CFLAGS=\"-I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV CXXFLAGS=\"-Wno-error=int-in-bool-context -I/usr/lib64/python3.6/site-packages/numpy/core/include\"\nENV LANG=\"en_US.UTF-8\"\n#   Set up rosdep\nRUN rosdep init\n#   automatic invalidation once every day.\nRUN echo \"@today_str\"\nRUN yum -y update\n#   These dependencies were generated by invoking rosdep on the latest version of the target workspace:\nRUN yum install assimp-devel clang console-bridge-devel cppcheck cppunit-devel curl eigen3-devel freetype freetype-devel libcurl-devel libsq3-devel libX11-devel libXaw-devel libxml2 libXrandr-devel libyaml-devel log4cxx-devel mesa-libGL-devel mesa-libGLU-devel opencv-devel openssl pcre-devel pkgconfig poco-devel python36-catkin_pkg python36-empy python36-lark-parser python36-mock python36-numpy python36-psutil python36-pyflakes python36-pygraphviz python36-pytest python36-PyYAML python36-setuptools qt5-qtbase qt5-qtbase-devel qt5-qtbase-gui tinyxml2-devel tinyxml-devel uncrustify zlib-devel -y\n#   Create a user to own the build output.\nRUN useradd -u 1234 -m rosbuild\nRUN sudo -H -u rosbuild -- git config --global user.email \"jenkins@ci.ros2.org\"\nRUN sudo -H -u rosbuild -- git config --global user.name \"Jenkins ROS 2\"\nRUN echo 'rosbuild ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\nWORKDIR \"@workdir\"\n#   Add an entry point which changes rosbuild's UID from 1234 to the UID of the invoking user.\n#   This means that the generated files will have the same ownership as the host OS user.\nADD entry_point.sh /entry_point.sh\nRUN chmod 755 /entry_point.sh\nENTRYPOINT [\"/entry_point.sh\"]\nCMD [\"matchbox-window-manager\", \">\", \"/dev/null\", \"2>&1&;\", \"scl\", \"enable\", \"devtoolset-8\", \"--\", \"python36\", \"-u\", \"run_ros2_batch.py\", \"$CI_ARGS\"]\n","originalDockerfileUglifiedHash":"8c93ff125cf347cabd14f7af1fae0711","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/46103a61109bcd4fabd9feedd87f36387fa05b8a.dockerfile"}