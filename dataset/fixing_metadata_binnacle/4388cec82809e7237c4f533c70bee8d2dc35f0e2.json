{"seed":960861441,"processedDockerfileHash":"d30d484bc092a85002705ee9ba63e1df","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#    \n#   Define base image and maintainer  \n#    \nFROM phusion/baseimage:0.9.15\nMAINTAINER Deny Dias <deny@macpress.com.br>  \n#    \n#   Start baseimage-docker's init system  \n#    \nCMD [\"/sbin/my_init\"]\n#    \n#   Define Metadata  \n#    \nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"GPLv3\" \\\n      org.label-schema.name=\"BYOD Baseimage\" \\\n      org.label-schema.url=\"https://hub.docker.com/r/denydias/byod-baseimage/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/denydias/byod-baseimage\"\n#    \n#   Set default environment  \n#    \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    DEF_RUNAS_USER=\"www-data\" \\\n    DEF_RUNAS_UID=\"33\" \\\n    DEF_RUNAS_GROUP=\"users\" \\\n    DEF_NGINX_MAX_WORKER_PROCESSES=\"8\" \\\n    DEF_NGINX_UPLOAD_MAX_SIZE=\"50M\" \\\n    DEF_TIMEZONE=\"America/Sao_Paulo\" \\\n    DEF_DR_RT=\"development\" \\\n    TERM=\"linux\" \\\n    WWW_DIR=\"/opt/drupal\" \\\n    TWIG_VER=\"1.24.0\"\n#    \n#   Install nginx, php-fpm and extensions for Drupal  \n#    \nRUN add-apt-repository -y ppa:nginx/stable \\\n && : \\\n && apt-get upgrade -y\nRUN (apt-get update ;apt-get install --no-install-recommends git htop make mysql-client nginx php-pear php5 php5-cli php5-fpm php5-curl php5-dev php5-gd php5-imagick php5-imap php5-intl php5-mcrypt php5-ming php5-mysql php5-ps php5-pspell php5-recode php5-sqlite php5-tidy php5-xmlrpc php5-xsl pwgen re2c tree wget -y ) \\\n && apt-get clean \\\n && pecl install uploadprogress \\\n && echo \"extension=uploadprogress.so\" > /etc/php5/mods-available/uploadprogress.ini \\\n && php5enmod uploadprogress \\\n && wget -qO- https://github.com/twigphp/Twig/archive/v${TWIG_VER}.tar.gz | tar xz -C /tmp/ \\\n && cd /tmp/Twig-${TWIG_VER}/ext/twig \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=twig.so\" > /etc/php5/mods-available/twig.ini \\\n && php5enmod twig \\\n && rm -rf /etc/nginx /var/lib/apt/lists/* /tmp/* /var/tmp/* /tmp/Twig-${TWIG_VER} \\\n && mkdir -p /var/log/nginx /var/cache/nginx\n#    \n#   Install Drush  \n#    \nRUN wget -q http://files.drush.org/drush.phar \\\n && chmod +x drush.phar \\\n && mv drush.phar /usr/local/bin/drush\n#    \n#   Install Drupal Console  \n#    \nRUN wget -q https://drupalconsole.com/installer -O drupal.phar \\\n && chmod +x drupal.phar \\\n && mv drupal.phar /usr/local/bin/drupal\n#    \n#   Copy and set permissions for configuration and initialization scripts  \n#    \nCOPY etc /etc\nRUN chmod 750 /etc/my_init.d/*.sh \\\n && chmod 750 /etc/service/*/run\n#    \n#   Open ports  \n#    \nEXPOSE 80/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#   \n#  Define base image and maintainer  \n#   \nFROM phusion/baseimage:0.9.15\nMAINTAINER Deny Dias <deny@macpress.com.br>  \n#   \n#  Start baseimage-docker's init system  \n#   \nCMD [\"/sbin/my_init\"]\n#   \n#  Define Metadata  \n#   \nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"GPLv3\" \\\n      org.label-schema.name=\"BYOD Baseimage\" \\\n      org.label-schema.url=\"https://hub.docker.com/r/denydias/byod-baseimage/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/denydias/byod-baseimage\"\n#   \n#  Set default environment  \n#   \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    DEF_RUNAS_USER=\"www-data\" \\\n    DEF_RUNAS_UID=\"33\" \\\n    DEF_RUNAS_GROUP=\"users\" \\\n    DEF_NGINX_MAX_WORKER_PROCESSES=\"8\" \\\n    DEF_NGINX_UPLOAD_MAX_SIZE=\"50M\" \\\n    DEF_TIMEZONE=\"America/Sao_Paulo\" \\\n    DEF_DR_RT=\"development\" \\\n    TERM=\"linux\" \\\n    WWW_DIR=\"/opt/drupal\" \\\n    TWIG_VER=\"1.24.0\"\n#   \n#  Install nginx, php-fpm and extensions for Drupal  \n#   \nRUN add-apt-repository -y ppa:nginx/stable \\\n && apt-get update \\\n && apt-get upgrade -y\nRUN apt-get install --no-install-recommends git htop make mysql-client nginx php-pear php5 php5-cli php5-fpm php5-curl php5-dev php5-gd php5-imagick php5-imap php5-intl php5-mcrypt php5-ming php5-mysql php5-ps php5-pspell php5-recode php5-sqlite php5-tidy php5-xmlrpc php5-xsl pwgen re2c tree wget -y \\\n && apt-get clean \\\n && pecl install uploadprogress \\\n && echo \"extension=uploadprogress.so\" > /etc/php5/mods-available/uploadprogress.ini \\\n && php5enmod uploadprogress \\\n && wget -qO- https://github.com/twigphp/Twig/archive/v${TWIG_VER}.tar.gz | tar xz -C /tmp/ \\\n && cd /tmp/Twig-${TWIG_VER}/ext/twig \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=twig.so\" > /etc/php5/mods-available/twig.ini \\\n && php5enmod twig \\\n && rm -rf /etc/nginx /var/lib/apt/lists/* /tmp/* /var/tmp/* /tmp/Twig-${TWIG_VER} \\\n && mkdir -p /var/log/nginx /var/cache/nginx\n#   \n#  Install Drush  \n#   \nRUN wget -q http://files.drush.org/drush.phar \\\n && chmod +x drush.phar \\\n && mv drush.phar /usr/local/bin/drush\n#   \n#  Install Drupal Console  \n#   \nRUN wget -q https://drupalconsole.com/installer -O drupal.phar \\\n && chmod +x drupal.phar \\\n && mv drupal.phar /usr/local/bin/drupal\n#   \n#  Copy and set permissions for configuration and initialization scripts  \n#   \nCOPY etc /etc\nRUN chmod 750 /etc/my_init.d/*.sh \\\n && chmod 750 /etc/service/*/run\n#   \n#  Open ports  \n#   \nEXPOSE 80/tcp\n","injectedSmells":[],"originalDockerfileHash":"b80debb68b01bfb8b888980039459501","successfullyInjectedSmells":[],"originalDockerfileUglified":"#    \n#   Define base image and maintainer  \n#    \nFROM phusion/baseimage:0.9.15\nMAINTAINER Deny Dias <deny@macpress.com.br>  \n#    \n#   Start baseimage-docker's init system  \n#    \nCMD [\"/sbin/my_init\"]\n#    \n#   Define Metadata  \n#    \nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"GPLv3\" \\\n      org.label-schema.name=\"BYOD Baseimage\" \\\n      org.label-schema.url=\"https://hub.docker.com/r/denydias/byod-baseimage/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/denydias/byod-baseimage\"\n#    \n#   Set default environment  \n#    \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    DEF_RUNAS_USER=\"www-data\" \\\n    DEF_RUNAS_UID=\"33\" \\\n    DEF_RUNAS_GROUP=\"users\" \\\n    DEF_NGINX_MAX_WORKER_PROCESSES=\"8\" \\\n    DEF_NGINX_UPLOAD_MAX_SIZE=\"50M\" \\\n    DEF_TIMEZONE=\"America/Sao_Paulo\" \\\n    DEF_DR_RT=\"development\" \\\n    TERM=\"linux\" \\\n    WWW_DIR=\"/opt/drupal\" \\\n    TWIG_VER=\"1.24.0\"\n#    \n#   Install nginx, php-fpm and extensions for Drupal  \n#    \nRUN add-apt-repository -y ppa:nginx/stable \\\n && apt-get update \\\n && apt-get upgrade -y\nRUN apt-get install --no-install-recommends git htop make mysql-client nginx php-pear php5 php5-cli php5-fpm php5-curl php5-dev php5-gd php5-imagick php5-imap php5-intl php5-mcrypt php5-ming php5-mysql php5-ps php5-pspell php5-recode php5-sqlite php5-tidy php5-xmlrpc php5-xsl pwgen re2c tree wget -y \\\n && apt-get clean \\\n && pecl install uploadprogress \\\n && echo \"extension=uploadprogress.so\" > /etc/php5/mods-available/uploadprogress.ini \\\n && php5enmod uploadprogress \\\n && wget -qO- https://github.com/twigphp/Twig/archive/v${TWIG_VER}.tar.gz | tar xz -C /tmp/ \\\n && cd /tmp/Twig-${TWIG_VER}/ext/twig \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=twig.so\" > /etc/php5/mods-available/twig.ini \\\n && php5enmod twig \\\n && rm -rf /etc/nginx /var/lib/apt/lists/* /tmp/* /var/tmp/* /tmp/Twig-${TWIG_VER} \\\n && mkdir -p /var/log/nginx /var/cache/nginx\n#    \n#   Install Drush  \n#    \nRUN wget -q http://files.drush.org/drush.phar \\\n && chmod +x drush.phar \\\n && mv drush.phar /usr/local/bin/drush\n#    \n#   Install Drupal Console  \n#    \nRUN wget -q https://drupalconsole.com/installer -O drupal.phar \\\n && chmod +x drupal.phar \\\n && mv drupal.phar /usr/local/bin/drupal\n#    \n#   Copy and set permissions for configuration and initialization scripts  \n#    \nCOPY etc /etc\nRUN chmod 750 /etc/my_init.d/*.sh \\\n && chmod 750 /etc/service/*/run\n#    \n#   Open ports  \n#    \nEXPOSE 80/tcp\n","originalDockerfileUglifiedHash":"52cd0abe5c3c518ae46370602a79c2d0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4388cec82809e7237c4f533c70bee8d2dc35f0e2.dockerfile"}