{"seed":1787705940,"processedDockerfileHash":"f0c1a14afa29c832eb64309dbab463f3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Alejandro Gomez <agommor@gmail.com>\n#  ==========================\n#   Build arguments\n#  ==========================\nARG ANDROID_SDK_VERSION=23\nARG JAVA_VERSION=8\nARG APPIUM_VERSION=1.5.2\nARG CHROMEDRIVER_VERSION=2.21.0\nARG VNC_PASSWD=1234\n#  ==========================\n#   Env variables\n#  ==========================\nENV SHELL=\"\\\"/bin/bash\\\"\"\nENV X11_RESOLUTION=\"\\\"480x600x24\\\"\"\nENV DISPLAY=\":1\"\nENV VNC_PASSWD=\"${VNC_PASSWD}\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV ANDROID_SDK_VERSION=\"${ANDROID_SDK_VERSION}\"\nENV ANDROID_SDKTOOLS_VERSION=\"24.4.1\"\nENV JAVA_VERSION=\"${JAVA_VERSION}\"\nENV APPIUM_VERSION=\"${APPIUM_VERSION}\"\nENV CHROMEDRIVER_VERSION=\"${CHROMEDRIVER_VERSION}\"\nENV ANDROID_HOME=\"/opt/android-sdk-linux\"\nENV APPIUM_HOME=\"/opt/appium\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools\"\nENV SDK_PACKAGES=\"platform-tools,build-tools-23.0.3,build-tools-23.0.2,build-tools-23.0.1,build-tools-22.0.1,android-23,android-22,sys-img-armeabi-v7a-android-$ANDROID_SDK_VERSION,sys-img-x86_64-android-$ANDROID_SDK_VERSION,sys-img-x86-android-$ANDROID_SDK_VERSION,sys-img-armeabi-v7a-google_apis-$ANDROID_SDK_VERSION,sys-img-x86_64-google_apis-$ANDROID_SDK_VERSION,sys-img-x86-google_apis-$ANDROID_SDK_VERSION,addon-google_apis-google-$ANDROID_SDK_VERSION,source-$ANDROID_SDK_VERSION,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository\"\n#  ==========================\n#   Add external files\n#  ==========================\nCOPY assets/etc/apt/apt.conf.d/99norecommends /etc/apt/apt.conf.d/99norecommends\nCOPY assets/etc/apt/sources.list /etc/apt/sources.list\n#  ==========================\n#   Install necessary packages, Appium and NPM\n#  ==========================\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EB9B1D8886F44E2A \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends apt-transport-https=1.0.1ubuntu2.24 build-essential=11.6ubuntu6 curl=7.35.0-1ubuntu2.20 g++=4:4.8.2-1ubuntu6 lib32gcc1=1:4.9.3-0ubuntu4 lib32ncurses5=5.9+20140118-1ubuntu1 lib32stdc++6=4.8.4-2ubuntu1~14.04.4 lib32z1=1:1.2.8.dfsg-1ubuntu1.1 libc6-i386=2.19-0ubuntu6.15 libgconf-2-4=3.2.6-0ubuntu2 libvirt-bin=1.2.2-0ubuntu13.1.28 libxi6=2:1.7.1.901-1ubuntu1.1 make=3.81-8.2ubuntu3 maven=3.0.5-1 psmisc=22.20-1ubuntu2 python=2.7.5-5ubuntu3 python-software-properties=0.92.37.8 qemu-kvm=2.0.0+dfsg-2ubuntu1.46 software-properties-common=0.92.37.8 unzip=6.0-9ubuntu1.5 wget=1.15-1ubuntu1.14.04.5 x11vnc=0.9.13-1.1 xvfb=2:1.15.1-0ubuntu2.11 openjdk-${JAVA_VERSION}-jdk -y \\\n && curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - \\\n && apt-get install --no-install-recommends nodejs=0.10.25~dfsg2-2ubuntu1.2 -y \\\n && apt-get -qqy clean \\\n && rm -rf /var/cache/apt/* \\\n && mkdir $APPIUM_HOME \\\n && cd $APPIUM_HOME \\\n && npm install appium@$APPIUM_VERSION chromedriver@$CHROMEDRIVER_VERSION \\\n && ln -s $APPIUM_HOME/node_modules/.bin/appium /usr/bin/appium \\\n && ln -s $ANDROID_HOME/platform-tools/adb /usr/local/sbin/adb\n#  ==========================\n#   Install Android SDK's and Platform tools\n#  ==========================\nRUN wget --progress=dot:giga -O /opt/android-sdk-linux.tgz https://dl.google.com/android/android-sdk_r$ANDROID_SDKTOOLS_VERSION-linux.tgz \\\n && tar xzf /opt/android-sdk-linux.tgz -C /tmp \\\n && rm /opt/android-sdk-linux.tgz \\\n && mv /tmp/android-sdk-linux $ANDROID_HOME \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t ${SDK_PACKAGES} \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t tools \\\n && if [ -f $ANDROID_HOME/temp/tools_*.zip ] ; then mv $ANDROID_HOME/temp/tools_*.zip $ANDROID_HOME/tools.zip \\\n && unzip $ANDROID_HOME/tools.zip -d $ANDROID_HOME/ ; fi\n#  ==========================\n#   Final steps\n#  ==========================\nEXPOSE 5900/tcp\nCOPY assets/bin/entrypoint /entrypoint\nRUN chmod +x /entrypoint \\\n && cat /entrypoint\nENTRYPOINT [\"/bin/bash\", \"/entrypoint\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Alejandro Gomez <agommor@gmail.com>\n# ==========================\n#  Build arguments\n# ==========================\nARG ANDROID_SDK_VERSION=23\nARG JAVA_VERSION=8\nARG APPIUM_VERSION=1.5.2\nARG CHROMEDRIVER_VERSION=2.21.0\nARG VNC_PASSWD=1234\n# ==========================\n#  Env variables\n# ==========================\nENV SHELL=\"\\\"/bin/bash\\\"\"\nENV X11_RESOLUTION=\"\\\"480x600x24\\\"\"\nENV DISPLAY=\":1\"\nENV VNC_PASSWD=\"${VNC_PASSWD}\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV ANDROID_SDK_VERSION=\"${ANDROID_SDK_VERSION}\"\nENV ANDROID_SDKTOOLS_VERSION=\"24.4.1\"\nENV JAVA_VERSION=\"${JAVA_VERSION}\"\nENV APPIUM_VERSION=\"${APPIUM_VERSION}\"\nENV CHROMEDRIVER_VERSION=\"${CHROMEDRIVER_VERSION}\"\nENV ANDROID_HOME=\"/opt/android-sdk-linux\"\nENV APPIUM_HOME=\"/opt/appium\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools\"\nENV SDK_PACKAGES=\"platform-tools,build-tools-23.0.3,build-tools-23.0.2,build-tools-23.0.1,build-tools-22.0.1,android-23,android-22,sys-img-armeabi-v7a-android-$ANDROID_SDK_VERSION,sys-img-x86_64-android-$ANDROID_SDK_VERSION,sys-img-x86-android-$ANDROID_SDK_VERSION,sys-img-armeabi-v7a-google_apis-$ANDROID_SDK_VERSION,sys-img-x86_64-google_apis-$ANDROID_SDK_VERSION,sys-img-x86-google_apis-$ANDROID_SDK_VERSION,addon-google_apis-google-$ANDROID_SDK_VERSION,source-$ANDROID_SDK_VERSION,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository\"\n# ==========================\n#  Add external files\n# ==========================\nADD assets/etc/apt/apt.conf.d/99norecommends /etc/apt/apt.conf.d/99norecommends\nADD assets/etc/apt/sources.list /etc/apt/sources.list\n# ==========================\n#  Install necessary packages, Appium and NPM\n# ==========================\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EB9B1D8886F44E2A \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends apt-transport-https build-essential curl g++ lib32gcc1 lib32ncurses5 lib32stdc++6 lib32z1 libc6-i386 libgconf-2-4 libvirt-bin libxi6 make maven psmisc python python-software-properties qemu-kvm software-properties-common unzip wget x11vnc xvfb openjdk-${JAVA_VERSION}-jdk -y \\\n && curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - \\\n && apt-get install --no-install-recommends nodejs -y \\\n && apt-get -qqy clean \\\n && rm -rf /var/cache/apt/* \\\n && mkdir $APPIUM_HOME \\\n && cd $APPIUM_HOME \\\n && npm install appium@$APPIUM_VERSION chromedriver@$CHROMEDRIVER_VERSION \\\n && ln -s $APPIUM_HOME/node_modules/.bin/appium /usr/bin/appium \\\n && ln -s $ANDROID_HOME/platform-tools/adb /usr/local/sbin/adb\n# ==========================\n#  Install Android SDK's and Platform tools\n# ==========================\nRUN wget --progress=dot:giga -O /opt/android-sdk-linux.tgz https://dl.google.com/android/android-sdk_r$ANDROID_SDKTOOLS_VERSION-linux.tgz \\\n && tar xzf /opt/android-sdk-linux.tgz -C /tmp \\\n && rm /opt/android-sdk-linux.tgz \\\n && mv /tmp/android-sdk-linux $ANDROID_HOME \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t ${SDK_PACKAGES} \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t tools \\\n && if [ -f $ANDROID_HOME/temp/tools_*.zip ] ; then mv $ANDROID_HOME/temp/tools_*.zip $ANDROID_HOME/tools.zip \\\n && unzip $ANDROID_HOME/tools.zip -d $ANDROID_HOME/ ; fi\n# ==========================\n#  Final steps\n# ==========================\nEXPOSE 5900/tcp\nADD assets/bin/entrypoint /entrypoint\nRUN chmod +x /entrypoint \\\n && cat /entrypoint\nENTRYPOINT [\"/bin/bash\", \"/entrypoint\"]\n","injectedSmells":[],"originalDockerfileHash":"2476c496b2f60e8328ecd6636a8e3a54","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Alejandro Gomez <agommor@gmail.com>\n#  ==========================\n#   Build arguments\n#  ==========================\nARG ANDROID_SDK_VERSION=23\nARG JAVA_VERSION=8\nARG APPIUM_VERSION=1.5.2\nARG CHROMEDRIVER_VERSION=2.21.0\nARG VNC_PASSWD=1234\n#  ==========================\n#   Env variables\n#  ==========================\nENV SHELL=\"\\\"/bin/bash\\\"\"\nENV X11_RESOLUTION=\"\\\"480x600x24\\\"\"\nENV DISPLAY=\":1\"\nENV VNC_PASSWD=\"${VNC_PASSWD}\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV ANDROID_SDK_VERSION=\"${ANDROID_SDK_VERSION}\"\nENV ANDROID_SDKTOOLS_VERSION=\"24.4.1\"\nENV JAVA_VERSION=\"${JAVA_VERSION}\"\nENV APPIUM_VERSION=\"${APPIUM_VERSION}\"\nENV CHROMEDRIVER_VERSION=\"${CHROMEDRIVER_VERSION}\"\nENV ANDROID_HOME=\"/opt/android-sdk-linux\"\nENV APPIUM_HOME=\"/opt/appium\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools\"\nENV SDK_PACKAGES=\"platform-tools,build-tools-23.0.3,build-tools-23.0.2,build-tools-23.0.1,build-tools-22.0.1,android-23,android-22,sys-img-armeabi-v7a-android-$ANDROID_SDK_VERSION,sys-img-x86_64-android-$ANDROID_SDK_VERSION,sys-img-x86-android-$ANDROID_SDK_VERSION,sys-img-armeabi-v7a-google_apis-$ANDROID_SDK_VERSION,sys-img-x86_64-google_apis-$ANDROID_SDK_VERSION,sys-img-x86-google_apis-$ANDROID_SDK_VERSION,addon-google_apis-google-$ANDROID_SDK_VERSION,source-$ANDROID_SDK_VERSION,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository\"\n#  ==========================\n#   Add external files\n#  ==========================\nADD assets/etc/apt/apt.conf.d/99norecommends /etc/apt/apt.conf.d/99norecommends\nADD assets/etc/apt/sources.list /etc/apt/sources.list\n#  ==========================\n#   Install necessary packages, Appium and NPM\n#  ==========================\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EB9B1D8886F44E2A \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends apt-transport-https build-essential curl g++ lib32gcc1 lib32ncurses5 lib32stdc++6 lib32z1 libc6-i386 libgconf-2-4 libvirt-bin libxi6 make maven psmisc python python-software-properties qemu-kvm software-properties-common unzip wget x11vnc xvfb openjdk-${JAVA_VERSION}-jdk -y \\\n && curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - \\\n && apt-get install --no-install-recommends nodejs -y \\\n && apt-get -qqy clean \\\n && rm -rf /var/cache/apt/* \\\n && mkdir $APPIUM_HOME \\\n && cd $APPIUM_HOME \\\n && npm install appium@$APPIUM_VERSION chromedriver@$CHROMEDRIVER_VERSION \\\n && ln -s $APPIUM_HOME/node_modules/.bin/appium /usr/bin/appium \\\n && ln -s $ANDROID_HOME/platform-tools/adb /usr/local/sbin/adb\n#  ==========================\n#   Install Android SDK's and Platform tools\n#  ==========================\nRUN wget --progress=dot:giga -O /opt/android-sdk-linux.tgz https://dl.google.com/android/android-sdk_r$ANDROID_SDKTOOLS_VERSION-linux.tgz \\\n && tar xzf /opt/android-sdk-linux.tgz -C /tmp \\\n && rm /opt/android-sdk-linux.tgz \\\n && mv /tmp/android-sdk-linux $ANDROID_HOME \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t ${SDK_PACKAGES} \\\n && echo 'y' | $ANDROID_HOME/tools/android update sdk -s -u -a -t tools \\\n && if [ -f $ANDROID_HOME/temp/tools_*.zip ] ; then mv $ANDROID_HOME/temp/tools_*.zip $ANDROID_HOME/tools.zip \\\n && unzip $ANDROID_HOME/tools.zip -d $ANDROID_HOME/ ; fi\n#  ==========================\n#   Final steps\n#  ==========================\nEXPOSE 5900/tcp\nADD assets/bin/entrypoint /entrypoint\nRUN chmod +x /entrypoint \\\n && cat /entrypoint\nENTRYPOINT [\"/bin/bash\", \"/entrypoint\"]\n","originalDockerfileUglifiedHash":"c60ddde712795a259ffa3929d9ce5f1f","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b95f48430732992bbf6446d91b6b8dfceb4c6608.dockerfile"}