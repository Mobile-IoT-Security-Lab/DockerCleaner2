{"seed":652710911,"processedDockerfileHash":"0d96cf41380d9c696a7e316c71f3d999","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-gem","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ##########################################################################\n#   Dugong - Scientific Linux Containers for Bioinformatics\n#   ========================================================\n#\n#   Current development is led by Fabiano Menegidio.\n#\n#   Bioinformatician/Bioinformaticist at the Laboratory of Functional \n#   and Structural Genomics of the Integrated Nucleus of Biotechnology \n#   at the University of Mogi das Cruzes, Brazil.\n#   \n#   Contact: fabiano.menegidio@biology.bio.br\n#   GitHub: https://github.com/fabianomenegidio\n#\n#\n#  ##########################################################################\nFROM ubuntu:wily\nMAINTAINER Fabiano Menegidio <fabiano.menegidio@biology.bio.br>\n#  ############## Metadata\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"e.g. https://github.com/fabianomenegidio/dugong-bioinformatics/tree/master/DugongGUI/XFCE\"\nLABEL base.image=\"ubuntu:latest\" \\\n      version=\"2017040\" \\\n      name=\"DugongGUI\" \\\n      flavour=\"Xfce4\" \\\n      base=\"Ubuntu latest\" \\\n      description=\"Scientific Linux Container\" \\\n      website=\"https://fabianomenegidio.github.io/dugong-bioinformatics/\" \\\n      repository=\"https://github.com/fabianomenegidio/dugong-bioinformatics\" \\\n      license=\"MIT\" \\\n      tags=\"Bioinformatics\"\n#  ############## Environment config\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/headless\"\nENV STARTUPDIR=\"/dockerstartup\"\nENV INST_SCRIPTS=\"$HOME/install\"\nENV NB_USER=\"dugong\"\nENV NB_UID=\"1000\"\nENV CONDA_DIR=\"$HOME/.conda2/\"\nCOPY .config/scripts $STARTUPDIR\nCOPY .config/scripts/.bashrc $HOME/.bashrc\nCOPY .config/scripts/.bash_profile $HOME/.bash_profile\nCOPY .config/install/ $INST_SCRIPTS/\nCOPY tty.js /tty.js/\nCOPY config/start.sh /usr/local/bin/\nCOPY config/start-notebook.sh /usr/local/bin/\nCOPY config/start-singleuser.sh /usr/local/bin/\nCOPY config/jupyter_notebook_config.py $HOME/.jupyter/\nWORKDIR $HOME\n#  ############## Add dependencies and update packages\nRUN apt-key adv --recv-key --keyserver keyserver.ubuntu.com \"A6616109451BBBF2\" \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n && echo \"deb http://packages.linuxmint.com sarah main upstream import backport\" >> /etc/apt/sources.list.d/mint.list \\\n && echo 'deb http://nebc.nerc.ac.uk/bio-linux/ unstable bio-linux' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb-src http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://cran.r-project.org/bin/linux/ubuntu precise/' >> /etc/apt/sources.list.d/biolinux.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends bio-linux-keyring -y --allow-unauthenticated --force-yes \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get update \\\n && apt-get install --no-install-recommends make grep sed sudo dpkg git wget zip build-essential python python-dev bzip2 locales ca-certificates vim gdebi-core bash-completion apt-utils openjdk-7-jre openssh-server unzip curl net-tools icedtea-7-plugin zlib1g-dev libqt4-dbus libqt4-network nodejs ruby-dev rubygems ruby screen mlocate nano asciinema python-pip python-numpy -y --allow-unauthenticated \\\n && wget --quiet https://github.com/krallin/tini/releases/download/v0.10.0/tini \\\n && echo \"1361527f39190a7338a0b434bd8c88ff7233ce7b9a4876f3315c22fce7eca1b0 *tini\" | sha256sum -c - \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini \\\n && wget https://mega.nz/linux/MEGAsync/xUbuntu_16.04/amd64/megacmd-xUbuntu_16.04_amd64.deb \\\n && gdebi -n megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get install --no-install-recommends -f \\\n && rm megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get autoremove -y \\\n && apt-get clean -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && locale-gen en_US.UTF-8 \\\n && git clone https://github.com/Linuxbrew/linuxbrew.git ~/.linuxbrew \\\n && bash -c \"$( curl -L https://basemount.basespace.illumina.com/install ;)\" \\\n && gem install showterm --version 0.6.0 \\\n && wget --quiet https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh \\\n && /bin/bash Miniconda2-latest-Linux-x86_64.sh -b -p ~/.conda2 \\\n && rm Miniconda2-latest-Linux-x86_64.sh \\\n && ~/.conda2/bin/conda config --add channels defaults \\\n && ~/.conda2/bin/conda config --add channels conda-forge \\\n && ~/.conda2/bin/conda config --add channels r \\\n && ~/.conda2/bin/conda config --add channels bioconda \\\n && ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda clean -tipsy \\\n && chmod +X /dockerstartup/*.sh \\\n && chmod 755 /dockerstartup/*.sh \\\n && /dockerstartup/generate_container_user.sh \\\n && chmod +x /usr/local/bin/start.sh \\\n && chmod +x /usr/local/bin/start-notebook.sh \\\n && chmod +x /usr/local/bin/start-singleuser.sh \\\n && /bin/bash /headless/install/set_user_permission.sh /dockerstartup /headless\nUSER dugong\nRUN ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda install jupyter ipython nb_conda \\\n && ~/.conda2/bin/conda clean -tipsy\nUSER root\n#  ############## http://bugs.python.org/issue19846\n#   > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"C.UTF-8\"\nVOLUME [\"$HOME/data\"]\nENTRYPOINT [\"tini\", \"--\"]\nENTRYPOINT [\"/dockerstartup/startup.sh\"]\nEXPOSE 22/tcp\nEXPOSE 3000/tcp\nEXPOSE 8888/tcp\nRUN chmod 777 /var/tmp \\\n && chown -R root:root /var/tmp \\\n && chmod 777 /tmp \\\n && chown -R root:root /tmp \\\n && chown -R $USER:$USER $HOME/data\nWORKDIR $HOME/data\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ##########################################################################\n#  Dugong - Scientific Linux Containers for Bioinformatics\n#  ========================================================\n#\n#  Current development is led by Fabiano Menegidio.\n#\n#  Bioinformatician/Bioinformaticist at the Laboratory of Functional \n#  and Structural Genomics of the Integrated Nucleus of Biotechnology \n#  at the University of Mogi das Cruzes, Brazil.\n#  \n#  Contact: fabiano.menegidio@biology.bio.br\n#  GitHub: https://github.com/fabianomenegidio\n#\n#\n# ##########################################################################\nFROM ubuntu:wily\nMAINTAINER Fabiano Menegidio <fabiano.menegidio@biology.bio.br>\n# ############## Metadata\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"e.g. https://github.com/fabianomenegidio/dugong-bioinformatics/tree/master/DugongGUI/XFCE\"\nLABEL base.image=\"ubuntu:latest\" \\\n      version=\"2017040\" \\\n      name=\"DugongGUI\" \\\n      flavour=\"Xfce4\" \\\n      base=\"Ubuntu latest\" \\\n      description=\"Scientific Linux Container\" \\\n      website=\"https://fabianomenegidio.github.io/dugong-bioinformatics/\" \\\n      repository=\"https://github.com/fabianomenegidio/dugong-bioinformatics\" \\\n      license=\"MIT\" \\\n      tags=\"Bioinformatics\"\n# ############## Environment config\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/headless\"\nENV STARTUPDIR=\"/dockerstartup\"\nENV INST_SCRIPTS=\"$HOME/install\"\nENV NB_USER=\"dugong\"\nENV NB_UID=\"1000\"\nENV CONDA_DIR=\"$HOME/.conda2/\"\nADD .config/scripts $STARTUPDIR\nADD .config/scripts/.bashrc $HOME/.bashrc\nADD .config/scripts/.bash_profile $HOME/.bash_profile\nADD .config/install/ $INST_SCRIPTS/\nADD tty.js /tty.js/\nCOPY config/start.sh /usr/local/bin/\nCOPY config/start-notebook.sh /usr/local/bin/\nCOPY config/start-singleuser.sh /usr/local/bin/\nCOPY config/jupyter_notebook_config.py $HOME/.jupyter/\nWORKDIR $HOME\n# ############## Add dependencies and update packages\nRUN apt-key adv --recv-key --keyserver keyserver.ubuntu.com \"A6616109451BBBF2\" \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n && echo \"deb http://packages.linuxmint.com sarah main upstream import backport\" >> /etc/apt/sources.list.d/mint.list \\\n && echo 'deb http://nebc.nerc.ac.uk/bio-linux/ unstable bio-linux' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb-src http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://cran.r-project.org/bin/linux/ubuntu precise/' >> /etc/apt/sources.list.d/biolinux.list \\\n && apt-get update \\\n && apt-get install bio-linux-keyring -y --allow-unauthenticated --force-yes \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get update \\\n && apt-get install make grep sed sudo dpkg git wget zip build-essential python python-dev bzip2 locales ca-certificates vim gdebi-core bash-completion apt-utils openjdk-7-jre openssh-server unzip curl net-tools icedtea-7-plugin zlib1g-dev libqt4-dbus libqt4-network nodejs ruby-dev rubygems ruby screen mlocate nano asciinema python-pip python-numpy -y --allow-unauthenticated \\\n && wget --quiet https://github.com/krallin/tini/releases/download/v0.10.0/tini \\\n && echo \"1361527f39190a7338a0b434bd8c88ff7233ce7b9a4876f3315c22fce7eca1b0 *tini\" | sha256sum -c - \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini \\\n && wget https://mega.nz/linux/MEGAsync/xUbuntu_16.04/amd64/megacmd-xUbuntu_16.04_amd64.deb \\\n && gdebi -n megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get install -f \\\n && rm megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get autoremove -y \\\n && apt-get clean -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && locale-gen en_US.UTF-8 \\\n && git clone https://github.com/Linuxbrew/linuxbrew.git ~/.linuxbrew \\\n && bash -c \"$( curl -L https://basemount.basespace.illumina.com/install ;)\" \\\n && gem install showterm \\\n && wget --quiet https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh \\\n && /bin/bash Miniconda2-latest-Linux-x86_64.sh -b -p ~/.conda2 \\\n && rm Miniconda2-latest-Linux-x86_64.sh \\\n && ~/.conda2/bin/conda config --add channels defaults \\\n && ~/.conda2/bin/conda config --add channels conda-forge \\\n && ~/.conda2/bin/conda config --add channels r \\\n && ~/.conda2/bin/conda config --add channels bioconda \\\n && ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda clean -tipsy \\\n && chmod +X /dockerstartup/*.sh \\\n && chmod 755 /dockerstartup/*.sh \\\n && /dockerstartup/generate_container_user.sh \\\n && chmod +x /usr/local/bin/start.sh \\\n && chmod +x /usr/local/bin/start-notebook.sh \\\n && chmod +x /usr/local/bin/start-singleuser.sh \\\n && /bin/bash /headless/install/set_user_permission.sh /dockerstartup /headless\nUSER dugong\nRUN ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda install jupyter ipython nb_conda \\\n && ~/.conda2/bin/conda clean -tipsy\nUSER root\n# ############## http://bugs.python.org/issue19846\n#  > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"C.UTF-8\"\nVOLUME [\"$HOME/data\"]\nENTRYPOINT [\"tini\", \"--\"]\nENTRYPOINT [\"/dockerstartup/startup.sh\"]\nEXPOSE 22/tcp\nEXPOSE 3000/tcp\nEXPOSE 8888/tcp\nRUN chmod 777 /var/tmp \\\n && chown -R root:root /var/tmp \\\n && chmod 777 /tmp \\\n && chown -R root:root /tmp \\\n && chown -R $USER:$USER $HOME/data\nWORKDIR $HOME/data\n","injectedSmells":[],"originalDockerfileHash":"3a439e611894469fbec7804626e793ff","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ##########################################################################\n#   Dugong - Scientific Linux Containers for Bioinformatics\n#   ========================================================\n#\n#   Current development is led by Fabiano Menegidio.\n#\n#   Bioinformatician/Bioinformaticist at the Laboratory of Functional \n#   and Structural Genomics of the Integrated Nucleus of Biotechnology \n#   at the University of Mogi das Cruzes, Brazil.\n#   \n#   Contact: fabiano.menegidio@biology.bio.br\n#   GitHub: https://github.com/fabianomenegidio\n#\n#\n#  ##########################################################################\nFROM ubuntu:wily\nMAINTAINER Fabiano Menegidio <fabiano.menegidio@biology.bio.br>\n#  ############## Metadata\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"e.g. https://github.com/fabianomenegidio/dugong-bioinformatics/tree/master/DugongGUI/XFCE\"\nLABEL base.image=\"ubuntu:latest\" \\\n      version=\"2017040\" \\\n      name=\"DugongGUI\" \\\n      flavour=\"Xfce4\" \\\n      base=\"Ubuntu latest\" \\\n      description=\"Scientific Linux Container\" \\\n      website=\"https://fabianomenegidio.github.io/dugong-bioinformatics/\" \\\n      repository=\"https://github.com/fabianomenegidio/dugong-bioinformatics\" \\\n      license=\"MIT\" \\\n      tags=\"Bioinformatics\"\n#  ############## Environment config\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/headless\"\nENV STARTUPDIR=\"/dockerstartup\"\nENV INST_SCRIPTS=\"$HOME/install\"\nENV NB_USER=\"dugong\"\nENV NB_UID=\"1000\"\nENV CONDA_DIR=\"$HOME/.conda2/\"\nADD .config/scripts $STARTUPDIR\nADD .config/scripts/.bashrc $HOME/.bashrc\nADD .config/scripts/.bash_profile $HOME/.bash_profile\nADD .config/install/ $INST_SCRIPTS/\nADD tty.js /tty.js/\nCOPY config/start.sh /usr/local/bin/\nCOPY config/start-notebook.sh /usr/local/bin/\nCOPY config/start-singleuser.sh /usr/local/bin/\nCOPY config/jupyter_notebook_config.py $HOME/.jupyter/\nWORKDIR $HOME\n#  ############## Add dependencies and update packages\nRUN apt-key adv --recv-key --keyserver keyserver.ubuntu.com \"A6616109451BBBF2\" \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n && echo \"deb http://packages.linuxmint.com sarah main upstream import backport\" >> /etc/apt/sources.list.d/mint.list \\\n && echo 'deb http://nebc.nerc.ac.uk/bio-linux/ unstable bio-linux' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb-src http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n && echo 'deb http://cran.r-project.org/bin/linux/ubuntu precise/' >> /etc/apt/sources.list.d/biolinux.list \\\n && apt-get update \\\n && apt-get install bio-linux-keyring -y --allow-unauthenticated --force-yes \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get update \\\n && apt-get install make grep sed sudo dpkg git wget zip build-essential python python-dev bzip2 locales ca-certificates vim gdebi-core bash-completion apt-utils openjdk-7-jre openssh-server unzip curl net-tools icedtea-7-plugin zlib1g-dev libqt4-dbus libqt4-network nodejs ruby-dev rubygems ruby screen mlocate nano asciinema python-pip python-numpy -y --allow-unauthenticated \\\n && wget --quiet https://github.com/krallin/tini/releases/download/v0.10.0/tini \\\n && echo \"1361527f39190a7338a0b434bd8c88ff7233ce7b9a4876f3315c22fce7eca1b0 *tini\" | sha256sum -c - \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini \\\n && wget https://mega.nz/linux/MEGAsync/xUbuntu_16.04/amd64/megacmd-xUbuntu_16.04_amd64.deb \\\n && gdebi -n megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get install -f \\\n && rm megacmd-xUbuntu_16.04_amd64.deb \\\n && apt-get autoremove -y \\\n && apt-get clean -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && locale-gen en_US.UTF-8 \\\n && git clone https://github.com/Linuxbrew/linuxbrew.git ~/.linuxbrew \\\n && bash -c \"$( curl -L https://basemount.basespace.illumina.com/install ;)\" \\\n && gem install showterm \\\n && wget --quiet https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh \\\n && /bin/bash Miniconda2-latest-Linux-x86_64.sh -b -p ~/.conda2 \\\n && rm Miniconda2-latest-Linux-x86_64.sh \\\n && ~/.conda2/bin/conda config --add channels defaults \\\n && ~/.conda2/bin/conda config --add channels conda-forge \\\n && ~/.conda2/bin/conda config --add channels r \\\n && ~/.conda2/bin/conda config --add channels bioconda \\\n && ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda clean -tipsy \\\n && chmod +X /dockerstartup/*.sh \\\n && chmod 755 /dockerstartup/*.sh \\\n && /dockerstartup/generate_container_user.sh \\\n && chmod +x /usr/local/bin/start.sh \\\n && chmod +x /usr/local/bin/start-notebook.sh \\\n && chmod +x /usr/local/bin/start-singleuser.sh \\\n && /bin/bash /headless/install/set_user_permission.sh /dockerstartup /headless\nUSER dugong\nRUN ~/.conda2/bin/conda update --all \\\n && ~/.conda2/bin/conda install jupyter ipython nb_conda \\\n && ~/.conda2/bin/conda clean -tipsy\nUSER root\n#  ############## http://bugs.python.org/issue19846\n#   > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\nENV LANG=\"en_US.UTF-8  \"\nENV LANGUAGE=\"en_US:en  \"\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"C.UTF-8\"\nVOLUME [\"$HOME/data\"]\nENTRYPOINT [\"tini\", \"--\"]\nENTRYPOINT [\"/dockerstartup/startup.sh\"]\nEXPOSE 22/tcp\nEXPOSE 3000/tcp\nEXPOSE 8888/tcp\nRUN chmod 777 /var/tmp \\\n && chown -R root:root /var/tmp \\\n && chmod 777 /tmp \\\n && chown -R root:root /tmp \\\n && chown -R $USER:$USER $HOME/data\nWORKDIR $HOME/data\n","originalDockerfileUglifiedHash":"73952067279726573dc29cf70fa6cdef","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a396cb0898515485315a39a025a10da978346d9f.dockerfile"}