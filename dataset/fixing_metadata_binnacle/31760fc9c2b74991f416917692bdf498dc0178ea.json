{"seed":3388948122,"processedDockerfileHash":"ec9c84eabb3248e02ae48d15d94865f9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM python:3.6-stretch\nRUN mkdir -p /provisioning\nWORKDIR /provisioning\n#   Install OS dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential dialog curl less nano unzip vim htop gcc libgeos-dev zlib1g-dev -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Get libgeos for Python Shapely package\n#   https://trac.osgeo.org/geos/\nARG GEOS_VERSION=3.6.2\nRUN echo \"Installing GEOS libraries...\" \\\n && mkdir -p /provisioning/geos \\\n && cd /provisioning/geos \\\n && curl -# -O http://download.osgeo.org/geos/geos-${GEOS_VERSION}.tar.bz2 \\\n && tar -xjf geos-${GEOS_VERSION}.tar.bz2 \\\n && cd geos-${GEOS_VERSION} \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/geos*\n#   Get ESRI FileGDB libraries for Fiona/Geopandas Python packages\n#   http://appsforms.esri.com/products/download/\nARG FILEGDB_VERSION=1_5\nRUN echo \"Installing ESRI FileGDB libraries...\" \\\n && mkdir -p /provisioning/filegdb \\\n && curl -L -o filegdb_api_${FILEGDB_VERSION}-64.tar.gz https://www.dropbox.com/s/xi11vshwt9uojsy/FileGDB_API_1_5_64gcc51.tar.gz?dl=1 \\\n && tar -zxvf filegdb_api_${FILEGDB_VERSION}-64.tar.gz \\\n && cp -r FileGDB_API-64gcc51/lib/* /usr/local/lib \\\n && cp -r FileGDB_API-64gcc51/include/* /usr/local/include \\\n && ldconfig -v \\\n && rm -rf /provisioning/filegdb* /provisioning/FileGDB*\n#   Compile GDAL with FileGDB support for Fiona/Geopandas Python packages\nRUN echo \"Installing GDAL libraries...\" \\\n && mkdir -p /provisioning/gdal \\\n && cd /provisioning/gdal \\\n && curl -# -o gdal-2.2.1.tar.gz http://download.osgeo.org/gdal/2.2.1/gdal-2.2.1.tar.gz \\\n && tar -zxvf gdal-2.2.1.tar.gz \\\n && cd /provisioning/gdal/gdal-2.2.1 \\\n && ./configure --prefix=/usr/ --with-python --with-fgdb \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && rm -rf /provisioning/gdal*\nRUN echo \"Installing Spatial Index library...\" \\\n && mkdir -p /provisioning/spatialindex \\\n && cd /provisioning/spatialindex \\\n && curl -# -O http://download.osgeo.org/libspatialindex/spatialindex-src-1.8.5.tar.gz \\\n && tar -xzf spatialindex-src-1.8.5.tar.gz \\\n && cd spatialindex-src-1.8.5 \\\n && ./configure --prefix=/usr/local \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig \\\n && rm -rf /provisioning/spatialindex*\nRUN echo \"Installing Proj4 library...\" \\\n && mkdir -p /provisioning/proj4 \\\n && cd /provisioning/proj4 \\\n && curl -# -O http://download.osgeo.org/proj/proj-4.9.3.tar.gz \\\n && tar -xzf proj-4.9.3.tar.gz \\\n && cd proj-4.9.3 \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/proj4\n#   basemap (incorrectly) requires numpy to be installed *before* installing it\nRUN pip install numpy==1.24.2 --upgrade \\\n && echo \"Installing Basemap plotting library...\" \\\n && mkdir -p /provisioning/matplotlib-basemap \\\n && cd /provisioning/matplotlib-basemap \\\n && curl -# -o basemap-1.0.7rel.tar.gz https://codeload.github.com/matplotlib/basemap/tar.gz/v1.0.7rel \\\n && tar -xzf basemap-1.0.7rel.tar.gz \\\n && cd basemap-1.0.7rel \\\n && python setup.py install \\\n && rm -rf /provisioning/matplotlib-basemap\nRUN echo \"Installing graph-tool\" \\\n && echo \"deb http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && echo \"deb-src http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && apt-key adv --keyserver pgp.skewed.de --recv-key 612DEFB798507F25 \\\n && apt-get update \\\n && apt-get install --no-install-recommends python3-graph-tool -y \\\n && echo \"export PYTHONPATH=/usr/lib/python3/dist-packages/\" >> ~/.bashrc \\\n && pip install pycairo==1.23.0\nRUN echo \"Installing graphviz\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends xdg-utils -y \\\n && apt-get install --no-install-recommends graphviz -y \\\n && pip install pygraphviz==1.10\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM python:3.6-stretch\nRUN mkdir -p /provisioning\nWORKDIR /provisioning\n#  Install OS dependencies\nRUN apt-get update \\\n && apt-get install build-essential dialog curl less nano unzip vim htop gcc libgeos-dev zlib1g-dev -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Get libgeos for Python Shapely package\n#  https://trac.osgeo.org/geos/\nARG GEOS_VERSION=3.6.2\nRUN echo \"Installing GEOS libraries...\" \\\n && mkdir -p /provisioning/geos \\\n && cd /provisioning/geos \\\n && curl -# -O http://download.osgeo.org/geos/geos-${GEOS_VERSION}.tar.bz2 \\\n && tar -xjf geos-${GEOS_VERSION}.tar.bz2 \\\n && cd geos-${GEOS_VERSION} \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/geos*\n#  Get ESRI FileGDB libraries for Fiona/Geopandas Python packages\n#  http://appsforms.esri.com/products/download/\nARG FILEGDB_VERSION=1_5\nRUN echo \"Installing ESRI FileGDB libraries...\" \\\n && mkdir -p /provisioning/filegdb \\\n && curl -L -o filegdb_api_${FILEGDB_VERSION}-64.tar.gz https://www.dropbox.com/s/xi11vshwt9uojsy/FileGDB_API_1_5_64gcc51.tar.gz?dl=1 \\\n && tar -zxvf filegdb_api_${FILEGDB_VERSION}-64.tar.gz \\\n && cp -r FileGDB_API-64gcc51/lib/* /usr/local/lib \\\n && cp -r FileGDB_API-64gcc51/include/* /usr/local/include \\\n && ldconfig -v \\\n && rm -rf /provisioning/filegdb* /provisioning/FileGDB*\n#  Compile GDAL with FileGDB support for Fiona/Geopandas Python packages\nRUN echo \"Installing GDAL libraries...\" \\\n && mkdir -p /provisioning/gdal \\\n && cd /provisioning/gdal \\\n && curl -# -o gdal-2.2.1.tar.gz http://download.osgeo.org/gdal/2.2.1/gdal-2.2.1.tar.gz \\\n && tar -zxvf gdal-2.2.1.tar.gz \\\n && cd /provisioning/gdal/gdal-2.2.1 \\\n && ./configure --prefix=/usr/ --with-python --with-fgdb \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && rm -rf /provisioning/gdal*\nRUN echo \"Installing Spatial Index library...\" \\\n && mkdir -p /provisioning/spatialindex \\\n && cd /provisioning/spatialindex \\\n && curl -# -O http://download.osgeo.org/libspatialindex/spatialindex-src-1.8.5.tar.gz \\\n && tar -xzf spatialindex-src-1.8.5.tar.gz \\\n && cd spatialindex-src-1.8.5 \\\n && ./configure --prefix=/usr/local \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig \\\n && rm -rf /provisioning/spatialindex*\nRUN echo \"Installing Proj4 library...\" \\\n && mkdir -p /provisioning/proj4 \\\n && cd /provisioning/proj4 \\\n && curl -# -O http://download.osgeo.org/proj/proj-4.9.3.tar.gz \\\n && tar -xzf proj-4.9.3.tar.gz \\\n && cd proj-4.9.3 \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/proj4\n#  basemap (incorrectly) requires numpy to be installed *before* installing it\nRUN pip install numpy --upgrade \\\n && echo \"Installing Basemap plotting library...\" \\\n && mkdir -p /provisioning/matplotlib-basemap \\\n && cd /provisioning/matplotlib-basemap \\\n && curl -# -o basemap-1.0.7rel.tar.gz https://codeload.github.com/matplotlib/basemap/tar.gz/v1.0.7rel \\\n && tar -xzf basemap-1.0.7rel.tar.gz \\\n && cd basemap-1.0.7rel \\\n && python setup.py install \\\n && rm -rf /provisioning/matplotlib-basemap\nRUN echo \"Installing graph-tool\" \\\n && echo \"deb http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && echo \"deb-src http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && apt-key adv --keyserver pgp.skewed.de --recv-key 612DEFB798507F25 \\\n && apt-get update \\\n && apt-get install python3-graph-tool -y \\\n && echo \"export PYTHONPATH=/usr/lib/python3/dist-packages/\" >> ~/.bashrc \\\n && pip install pycairo\nRUN echo \"Installing graphviz\" \\\n && apt-get update \\\n && apt-get install xdg-utils -y \\\n && apt-get install graphviz -y \\\n && pip install pygraphviz\n","injectedSmells":[],"originalDockerfileHash":"b5c64e8d169ed2d03049c005c9ff3e9a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM python:3.6-stretch\nRUN mkdir -p /provisioning\nWORKDIR /provisioning\n#   Install OS dependencies\nRUN apt-get update \\\n && apt-get install build-essential dialog curl less nano unzip vim htop gcc libgeos-dev zlib1g-dev -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Get libgeos for Python Shapely package\n#   https://trac.osgeo.org/geos/\nARG GEOS_VERSION=3.6.2\nRUN echo \"Installing GEOS libraries...\" \\\n && mkdir -p /provisioning/geos \\\n && cd /provisioning/geos \\\n && curl -# -O http://download.osgeo.org/geos/geos-${GEOS_VERSION}.tar.bz2 \\\n && tar -xjf geos-${GEOS_VERSION}.tar.bz2 \\\n && cd geos-${GEOS_VERSION} \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/geos*\n#   Get ESRI FileGDB libraries for Fiona/Geopandas Python packages\n#   http://appsforms.esri.com/products/download/\nARG FILEGDB_VERSION=1_5\nRUN echo \"Installing ESRI FileGDB libraries...\" \\\n && mkdir -p /provisioning/filegdb \\\n && curl -L -o filegdb_api_${FILEGDB_VERSION}-64.tar.gz https://www.dropbox.com/s/xi11vshwt9uojsy/FileGDB_API_1_5_64gcc51.tar.gz?dl=1 \\\n && tar -zxvf filegdb_api_${FILEGDB_VERSION}-64.tar.gz \\\n && cp -r FileGDB_API-64gcc51/lib/* /usr/local/lib \\\n && cp -r FileGDB_API-64gcc51/include/* /usr/local/include \\\n && ldconfig -v \\\n && rm -rf /provisioning/filegdb* /provisioning/FileGDB*\n#   Compile GDAL with FileGDB support for Fiona/Geopandas Python packages\nRUN echo \"Installing GDAL libraries...\" \\\n && mkdir -p /provisioning/gdal \\\n && cd /provisioning/gdal \\\n && curl -# -o gdal-2.2.1.tar.gz http://download.osgeo.org/gdal/2.2.1/gdal-2.2.1.tar.gz \\\n && tar -zxvf gdal-2.2.1.tar.gz \\\n && cd /provisioning/gdal/gdal-2.2.1 \\\n && ./configure --prefix=/usr/ --with-python --with-fgdb \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && rm -rf /provisioning/gdal*\nRUN echo \"Installing Spatial Index library...\" \\\n && mkdir -p /provisioning/spatialindex \\\n && cd /provisioning/spatialindex \\\n && curl -# -O http://download.osgeo.org/libspatialindex/spatialindex-src-1.8.5.tar.gz \\\n && tar -xzf spatialindex-src-1.8.5.tar.gz \\\n && cd spatialindex-src-1.8.5 \\\n && ./configure --prefix=/usr/local \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig \\\n && rm -rf /provisioning/spatialindex*\nRUN echo \"Installing Proj4 library...\" \\\n && mkdir -p /provisioning/proj4 \\\n && cd /provisioning/proj4 \\\n && curl -# -O http://download.osgeo.org/proj/proj-4.9.3.tar.gz \\\n && tar -xzf proj-4.9.3.tar.gz \\\n && cd proj-4.9.3 \\\n && ./configure \\\n && make -j$( python -c 'import multiprocessing; print(multiprocessing.cpu_count())' ;) \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /provisioning/proj4\n#   basemap (incorrectly) requires numpy to be installed *before* installing it\nRUN pip install numpy --upgrade \\\n && echo \"Installing Basemap plotting library...\" \\\n && mkdir -p /provisioning/matplotlib-basemap \\\n && cd /provisioning/matplotlib-basemap \\\n && curl -# -o basemap-1.0.7rel.tar.gz https://codeload.github.com/matplotlib/basemap/tar.gz/v1.0.7rel \\\n && tar -xzf basemap-1.0.7rel.tar.gz \\\n && cd basemap-1.0.7rel \\\n && python setup.py install \\\n && rm -rf /provisioning/matplotlib-basemap\nRUN echo \"Installing graph-tool\" \\\n && echo \"deb http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && echo \"deb-src http://downloads.skewed.de/apt/stretch stretch main\" | tee -a /etc/apt/sources.list \\\n && apt-key adv --keyserver pgp.skewed.de --recv-key 612DEFB798507F25 \\\n && apt-get update \\\n && apt-get install python3-graph-tool -y \\\n && echo \"export PYTHONPATH=/usr/lib/python3/dist-packages/\" >> ~/.bashrc \\\n && pip install pycairo\nRUN echo \"Installing graphviz\" \\\n && apt-get update \\\n && apt-get install xdg-utils -y \\\n && apt-get install graphviz -y \\\n && pip install pygraphviz\n","originalDockerfileUglifiedHash":"4a674e3407465b27168abff7aa8957ad","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/31760fc9c2b74991f416917692bdf498dc0178ea.dockerfile"}