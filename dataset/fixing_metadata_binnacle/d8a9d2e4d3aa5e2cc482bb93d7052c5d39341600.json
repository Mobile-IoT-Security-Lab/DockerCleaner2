{"seed":4086392153,"processedDockerfileHash":"940e5e5cab2641d39d86ccc8a5aa53f9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:stretch-slim\nLABEL maintainer=\"\\\"Andre Peters <andre.peters@servercow.de>\\\"\"\nARG DEBIAN_FRONTEND=noninteractive\nENV LC_ALL=\"C\"\nENV DOVECOT_VERSION=\"2.3.6\"\nENV PIGEONHOLE_VERSION=\"0.5.6\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends automake autotools-dev build-essential ca-certificates cpanminus cron curl default-libmysqlclient-dev dnsutils gettext jq libauthen-ntlm-perl libbz2-dev libcgi-pm-perl libcrypt-openssl-rsa-perl libcrypt-ssleay-perl libcurl4-openssl-dev libdata-uniqid-perl libdbd-mysql-perl libdbi-perl libdigest-hmac-perl libdist-checkconflicts-perl libexpat1-dev libfile-copy-recursive-perl libfile-tail-perl libhtml-parser-perl libio-compress-perl libio-socket-inet6-perl libio-socket-ssl-perl libio-tee-perl libipc-run-perl libjson-webtoken-perl libldap2-dev liblockfile-simple-perl liblz-dev liblz4-dev liblzma-dev libmail-imapclient-perl libmodule-implementation-perl libmodule-scandeps-perl libnet-ssleay-perl libpackage-stash-perl libpackage-stash-xs-perl libpam-dev libpar-packer-perl libparse-recdescent-perl libproc-processtable-perl libreadonly-perl libregexp-common-perl libssl-dev libsys-meminfo-perl libterm-readkey-perl libtest-deep-perl libtest-fatal-perl libtest-mock-guard-perl libtest-mockobject-perl libtest-nowarnings-perl libtest-pod-perl libtest-requires-perl libtest-simple-perl libtest-warn-perl libtry-tiny-perl libunicode-string-perl liburi-perl libwww-perl lzma-dev make mysql-client procps python-html2text python-jinja2 python-mysql.connector python-redis redis-server supervisor syslog-ng syslog-ng-core syslog-ng-mod-redis -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl https://dovecot.org/releases/2.3/dovecot-$DOVECOT_VERSION.tar.gz | tar xvz \\\n && cd dovecot-$DOVECOT_VERSION \\\n && ./configure --with-solr --with-mysql --with-ldap --with-lzma --with-lz4 --with-ssl=openssl --with-notify=inotify --with-storages=mdbox,sdbox,maildir,mbox,imapc,pop3c --with-bzlib --with-zlib --enable-hardening \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-$DOVECOT_VERSION \\\n && curl https://pigeonhole.dovecot.org/releases/2.3/dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION.tar.gz | tar xvz \\\n && cd dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && ./configure \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && groupadd -g 5000 vmail \\\n && groupadd -g 401 dovecot \\\n && groupadd -g 402 dovenull \\\n && useradd -g vmail -u 5000 vmail -d /var/vmail \\\n && useradd -c \"Dovecot unprivileged user\" -d /dev/null -u 401 -g dovecot -s /bin/false dovecot \\\n && useradd -c \"Dovecot login user\" -d /dev/null -u 402 -g dovenull -s /bin/false dovenull \\\n && touch /etc/default/locale \\\n && apt-get purge -y build-essential automake autotools-dev default-libmysqlclient-dev libbz2-dev libcurl4-openssl-dev libexpat1-dev liblz-dev liblz4-dev liblzma-dev libpam-dev libssl-dev lzma-dev \\\n && apt-get autoremove --purge -y \\\n && rm -rf /tmp/* /var/tmp/*\nCOPY trim_logs.sh /usr/local/bin/trim_logs.sh\nCOPY clean_q_aged.sh /usr/local/bin/clean_q_aged.sh\nCOPY syslog-ng.conf /etc/syslog-ng/syslog-ng.conf\nCOPY imapsync /usr/local/bin/imapsync\nCOPY postlogin.sh /usr/local/bin/postlogin.sh\nCOPY imapsync_cron.pl /usr/local/bin/imapsync_cron.pl\nCOPY report-spam.sieve /usr/local/lib/dovecot/sieve/report-spam.sieve\nCOPY report-ham.sieve /usr/local/lib/dovecot/sieve/report-ham.sieve\nCOPY rspamd-pipe-ham /usr/local/lib/dovecot/sieve/rspamd-pipe-ham\nCOPY rspamd-pipe-spam /usr/local/lib/dovecot/sieve/rspamd-pipe-spam\nCOPY sa-rules.sh /usr/local/bin/sa-rules.sh\nCOPY maildir_gc.sh /usr/local/bin/maildir_gc.sh\nCOPY docker-entrypoint.sh /\nCOPY supervisord.conf /etc/supervisor/supervisord.conf\nCOPY stop-supervisor.sh /usr/local/sbin/stop-supervisor.sh\nCOPY quarantine_notify.py /usr/local/bin/quarantine_notify.py\nCOPY quota_notify.py /usr/local/bin/quota_notify.py\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD exec /usr/bin/supervisord -c /etc/supervisor/supervisord.conf\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:stretch-slim\nLABEL maintainer=\"\\\"Andre Peters <andre.peters@servercow.de>\\\"\"\nARG DEBIAN_FRONTEND=noninteractive\nENV LC_ALL=\"C\"\nENV DOVECOT_VERSION=\"2.3.6\"\nENV PIGEONHOLE_VERSION=\"0.5.6\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends automake autotools-dev build-essential ca-certificates cpanminus cron curl default-libmysqlclient-dev dnsutils gettext jq libauthen-ntlm-perl libbz2-dev libcgi-pm-perl libcrypt-openssl-rsa-perl libcrypt-ssleay-perl libcurl4-openssl-dev libdata-uniqid-perl libdbd-mysql-perl libdbi-perl libdigest-hmac-perl libdist-checkconflicts-perl libexpat1-dev libfile-copy-recursive-perl libfile-tail-perl libhtml-parser-perl libio-compress-perl libio-socket-inet6-perl libio-socket-ssl-perl libio-tee-perl libipc-run-perl libjson-webtoken-perl libldap2-dev liblockfile-simple-perl liblz-dev liblz4-dev liblzma-dev libmail-imapclient-perl libmodule-implementation-perl libmodule-scandeps-perl libnet-ssleay-perl libpackage-stash-perl libpackage-stash-xs-perl libpam-dev libpar-packer-perl libparse-recdescent-perl libproc-processtable-perl libreadonly-perl libregexp-common-perl libssl-dev libsys-meminfo-perl libterm-readkey-perl libtest-deep-perl libtest-fatal-perl libtest-mock-guard-perl libtest-mockobject-perl libtest-nowarnings-perl libtest-pod-perl libtest-requires-perl libtest-simple-perl libtest-warn-perl libtry-tiny-perl libunicode-string-perl liburi-perl libwww-perl lzma-dev make mysql-client procps python-html2text python-jinja2 python-mysql.connector python-redis redis-server supervisor syslog-ng syslog-ng-core syslog-ng-mod-redis -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl https://dovecot.org/releases/2.3/dovecot-$DOVECOT_VERSION.tar.gz | tar xvz \\\n && cd dovecot-$DOVECOT_VERSION \\\n && ./configure --with-solr --with-mysql --with-ldap --with-lzma --with-lz4 --with-ssl=openssl --with-notify=inotify --with-storages=mdbox,sdbox,maildir,mbox,imapc,pop3c --with-bzlib --with-zlib --enable-hardening \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-$DOVECOT_VERSION \\\n && curl https://pigeonhole.dovecot.org/releases/2.3/dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION.tar.gz | tar xvz \\\n && cd dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && ./configure \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && groupadd -g 5000 vmail \\\n && groupadd -g 401 dovecot \\\n && groupadd -g 402 dovenull \\\n && useradd -g vmail -u 5000 vmail -d /var/vmail \\\n && useradd -c \"Dovecot unprivileged user\" -d /dev/null -u 401 -g dovecot -s /bin/false dovecot \\\n && useradd -c \"Dovecot login user\" -d /dev/null -u 402 -g dovenull -s /bin/false dovenull \\\n && touch /etc/default/locale \\\n && apt-get purge -y build-essential automake autotools-dev default-libmysqlclient-dev libbz2-dev libcurl4-openssl-dev libexpat1-dev liblz-dev liblz4-dev liblzma-dev libpam-dev libssl-dev lzma-dev \\\n && apt-get autoremove --purge -y \\\n && rm -rf /tmp/* /var/tmp/*\nCOPY trim_logs.sh /usr/local/bin/trim_logs.sh\nCOPY clean_q_aged.sh /usr/local/bin/clean_q_aged.sh\nCOPY syslog-ng.conf /etc/syslog-ng/syslog-ng.conf\nCOPY imapsync /usr/local/bin/imapsync\nCOPY postlogin.sh /usr/local/bin/postlogin.sh\nCOPY imapsync_cron.pl /usr/local/bin/imapsync_cron.pl\nCOPY report-spam.sieve /usr/local/lib/dovecot/sieve/report-spam.sieve\nCOPY report-ham.sieve /usr/local/lib/dovecot/sieve/report-ham.sieve\nCOPY rspamd-pipe-ham /usr/local/lib/dovecot/sieve/rspamd-pipe-ham\nCOPY rspamd-pipe-spam /usr/local/lib/dovecot/sieve/rspamd-pipe-spam\nCOPY sa-rules.sh /usr/local/bin/sa-rules.sh\nCOPY maildir_gc.sh /usr/local/bin/maildir_gc.sh\nCOPY docker-entrypoint.sh /\nCOPY supervisord.conf /etc/supervisor/supervisord.conf\nCOPY stop-supervisor.sh /usr/local/sbin/stop-supervisor.sh\nCOPY quarantine_notify.py /usr/local/bin/quarantine_notify.py\nCOPY quota_notify.py /usr/local/bin/quota_notify.py\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD exec /usr/bin/supervisord -c /etc/supervisor/supervisord.conf\n","injectedSmells":[],"originalDockerfileHash":"71fccd0e7cabdde93222960bf3916559","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:stretch-slim\nLABEL maintainer=\"\\\"Andre Peters <andre.peters@servercow.de>\\\"\"\nARG DEBIAN_FRONTEND=noninteractive\nENV LC_ALL=\"C\"\nENV DOVECOT_VERSION=\"2.3.6\"\nENV PIGEONHOLE_VERSION=\"0.5.6\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends automake autotools-dev build-essential ca-certificates cpanminus cron curl default-libmysqlclient-dev dnsutils gettext jq libauthen-ntlm-perl libbz2-dev libcgi-pm-perl libcrypt-openssl-rsa-perl libcrypt-ssleay-perl libcurl4-openssl-dev libdata-uniqid-perl libdbd-mysql-perl libdbi-perl libdigest-hmac-perl libdist-checkconflicts-perl libexpat1-dev libfile-copy-recursive-perl libfile-tail-perl libhtml-parser-perl libio-compress-perl libio-socket-inet6-perl libio-socket-ssl-perl libio-tee-perl libipc-run-perl libjson-webtoken-perl libldap2-dev liblockfile-simple-perl liblz-dev liblz4-dev liblzma-dev libmail-imapclient-perl libmodule-implementation-perl libmodule-scandeps-perl libnet-ssleay-perl libpackage-stash-perl libpackage-stash-xs-perl libpam-dev libpar-packer-perl libparse-recdescent-perl libproc-processtable-perl libreadonly-perl libregexp-common-perl libssl-dev libsys-meminfo-perl libterm-readkey-perl libtest-deep-perl libtest-fatal-perl libtest-mock-guard-perl libtest-mockobject-perl libtest-nowarnings-perl libtest-pod-perl libtest-requires-perl libtest-simple-perl libtest-warn-perl libtry-tiny-perl libunicode-string-perl liburi-perl libwww-perl lzma-dev make mysql-client procps python-html2text python-jinja2 python-mysql.connector python-redis redis-server supervisor syslog-ng syslog-ng-core syslog-ng-mod-redis -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl https://dovecot.org/releases/2.3/dovecot-$DOVECOT_VERSION.tar.gz | tar xvz \\\n && cd dovecot-$DOVECOT_VERSION \\\n && ./configure --with-solr --with-mysql --with-ldap --with-lzma --with-lz4 --with-ssl=openssl --with-notify=inotify --with-storages=mdbox,sdbox,maildir,mbox,imapc,pop3c --with-bzlib --with-zlib --enable-hardening \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-$DOVECOT_VERSION \\\n && curl https://pigeonhole.dovecot.org/releases/2.3/dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION.tar.gz | tar xvz \\\n && cd dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && ./configure \\\n && make -j3 \\\n && make install \\\n && make clean \\\n && cd .. \\\n && rm -rf dovecot-2.3-pigeonhole-$PIGEONHOLE_VERSION \\\n && groupadd -g 5000 vmail \\\n && groupadd -g 401 dovecot \\\n && groupadd -g 402 dovenull \\\n && useradd -g vmail -u 5000 vmail -d /var/vmail \\\n && useradd -c \"Dovecot unprivileged user\" -d /dev/null -u 401 -g dovecot -s /bin/false dovecot \\\n && useradd -c \"Dovecot login user\" -d /dev/null -u 402 -g dovenull -s /bin/false dovenull \\\n && touch /etc/default/locale \\\n && apt-get purge -y build-essential automake autotools-dev default-libmysqlclient-dev libbz2-dev libcurl4-openssl-dev libexpat1-dev liblz-dev liblz4-dev liblzma-dev libpam-dev libssl-dev lzma-dev \\\n && apt-get autoremove --purge -y \\\n && rm -rf /tmp/* /var/tmp/*\nCOPY trim_logs.sh /usr/local/bin/trim_logs.sh\nCOPY clean_q_aged.sh /usr/local/bin/clean_q_aged.sh\nCOPY syslog-ng.conf /etc/syslog-ng/syslog-ng.conf\nCOPY imapsync /usr/local/bin/imapsync\nCOPY postlogin.sh /usr/local/bin/postlogin.sh\nCOPY imapsync_cron.pl /usr/local/bin/imapsync_cron.pl\nCOPY report-spam.sieve /usr/local/lib/dovecot/sieve/report-spam.sieve\nCOPY report-ham.sieve /usr/local/lib/dovecot/sieve/report-ham.sieve\nCOPY rspamd-pipe-ham /usr/local/lib/dovecot/sieve/rspamd-pipe-ham\nCOPY rspamd-pipe-spam /usr/local/lib/dovecot/sieve/rspamd-pipe-spam\nCOPY sa-rules.sh /usr/local/bin/sa-rules.sh\nCOPY maildir_gc.sh /usr/local/bin/maildir_gc.sh\nCOPY docker-entrypoint.sh /\nCOPY supervisord.conf /etc/supervisor/supervisord.conf\nCOPY stop-supervisor.sh /usr/local/sbin/stop-supervisor.sh\nCOPY quarantine_notify.py /usr/local/bin/quarantine_notify.py\nCOPY quota_notify.py /usr/local/bin/quota_notify.py\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD exec /usr/bin/supervisord -c /etc/supervisor/supervisord.conf\n","originalDockerfileUglifiedHash":"71fccd0e7cabdde93222960bf3916559","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d8a9d2e4d3aa5e2cc482bb93d7052c5d39341600.dockerfile"}