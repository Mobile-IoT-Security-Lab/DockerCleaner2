{"seed":3659028261,"processedDockerfileHash":"45a6a9bff0e1cb454a903b15212cc252","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\n#  #######################################\n#   System Stuff\n#  #######################################\nENV TERM=\"screen-256color\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Update and install\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.47.0-1ubuntu2.19 software-properties-common=0.96.20.10 git=1:2.7.4-0ubuntu1.10 locales=2.23-0ubuntu11.3 python-dev=2.7.12-1~16.04 python-pip=8.1.1-2ubuntu0.6 python3-dev=3.5.1-3 python3-pip=8.1.1-2ubuntu0.6 ctags shellcheck=0.3.7-5 build-essential=12.1ubuntu2 openssh-client=1:7.2p2-4ubuntu2.10 openssh-server=1:7.2p2-4ubuntu2.10 silversearcher-ag=0.31.0-2 -y\n#   setting up ssh\nRUN mkdir -p /var/run/sshd\nRUN useradd vim -m -p idatadev -s /bin/bash\nRUN echo \"vim:idatadev\" | chpasswd\nRUN echo \"vim ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n#   Generally a good idea to have these, extensions sometimes need them\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install vim8 and neovim, must vim first, or neovim will replace vim\n#   https://github.com/PegasusWang/vim-config\nRUN add-apt-repository ppa:jonathonf/vim\nRUN apt-get update \\\n && apt-get install --no-install-recommends vim=2:7.4.1689-3ubuntu1.5 -y\nRUN add-apt-repository ppa:neovim-ppa/stable\nRUN apt-get update \\\n && apt-get install --no-install-recommends neovim -y\nRUN mkdir ~/.config\nRUN git clone https://github.com/pegasuswang/vim-config ~/.config/nvim\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n#   install https://github.com/junegunn/vim-plug\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n#  #######################################\n#   Python\n#  #######################################\n#   Install python linting and neovim plugin\nRUN pip install pip==23.1 --upgrade\nRUN pip3 install --upgrade pip\nRUN pip install neovim==0.3.1 jedi==0.18.2 flake8==6.0.0 flake8-docstrings==1.7.0 flake8-isort==6.0.0 flake8-quotes==3.3.2 pep8-naming==0.13.3 pep257==0.7.0 isort==5.12.0 autopep8==2.0.2 PyYAML==6.0\nRUN pip3 install neovim jedi flake8 flake8-docstrings flake8-isort flake8-quotes pep8-naming pep257 isort mypy ansible-lint autopep8 PyYAML\n#  #######################################\n#   Install nvm nodejs\n#   https://stackoverflow.com/questions/25899912/install-nvm-in-docker\n#  #######################################\n#   Replace shell with bash so we can source files\nENV NVM_DIR=\"/root/.nvm\"\nENV NODE_VERSION=\"8.9.0\"\n#   Install nvm with node and npm install plugins for vim\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh \\\n && curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && npm install eslint@8.38.0 prettier@2.8.7 jsctags@5.2.2 tern@0.24.3 -g\nENV NODE_PATH=\"$NVM_DIR/v$NODE_VERSION/lib/node_modules\"\nENV PATH=\"$NVM_DIR/v$NODE_VERSION/bin:$PATH\"\n#  #######################################\n#   Personalizations\n#  #######################################\nCOPY .vimrc /root/.vimrc\nRUN vim +silent +PlugInstall +qall\n#   RUN cd /root/.config/nvim && make test && make\nRUN cd /root/.config/nvim \\\n && git pull origin master \\\n && make silent_install\n#   ENTRYPOINT [ \"nvim\" ]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\n# #######################################\n#  System Stuff\n# #######################################\nENV TERM=\"screen-256color\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  Update and install\nRUN apt-get update \\\n && apt-get install curl software-properties-common git locales python-dev python-pip python3-dev python3-pip ctags shellcheck build-essential openssh-client openssh-server silversearcher-ag -y\n#  setting up ssh\nRUN mkdir -p /var/run/sshd\nRUN useradd vim -m -p idatadev -s /bin/bash\nRUN echo \"vim:idatadev\" | chpasswd\nRUN echo \"vim ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n#  Generally a good idea to have these, extensions sometimes need them\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#  Install vim8 and neovim, must vim first, or neovim will replace vim\n#  https://github.com/PegasusWang/vim-config\nRUN add-apt-repository ppa:jonathonf/vim\nRUN apt-get update \\\n && apt-get install vim -y\nRUN add-apt-repository ppa:neovim-ppa/stable\nRUN apt-get update \\\n && apt-get install neovim -y\nRUN mkdir ~/.config\nRUN git clone https://github.com/pegasuswang/vim-config ~/.config/nvim\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n#  install https://github.com/junegunn/vim-plug\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n# #######################################\n#  Python\n# #######################################\n#  Install python linting and neovim plugin\nRUN pip install pip --upgrade\nRUN pip3 install --upgrade pip\nRUN pip install neovim jedi flake8 flake8-docstrings flake8-isort flake8-quotes pep8-naming pep257 isort autopep8 PyYAML\nRUN pip3 install neovim jedi flake8 flake8-docstrings flake8-isort flake8-quotes pep8-naming pep257 isort mypy ansible-lint autopep8 PyYAML\n# #######################################\n#  Install nvm nodejs\n#  https://stackoverflow.com/questions/25899912/install-nvm-in-docker\n# #######################################\n#  Replace shell with bash so we can source files\nENV NVM_DIR=\"/root/.nvm\"\nENV NODE_VERSION=\"8.9.0\"\n#  Install nvm with node and npm install plugins for vim\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh \\\n && curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && npm install eslint prettier jsctags tern -g\nENV NODE_PATH=\"$NVM_DIR/v$NODE_VERSION/lib/node_modules\"\nENV PATH=\"$NVM_DIR/v$NODE_VERSION/bin:$PATH\"\n# #######################################\n#  Personalizations\n# #######################################\nCOPY .vimrc /root/.vimrc\nRUN vim +silent +PlugInstall +qall\n#  RUN cd /root/.config/nvim && make test && make\nRUN cd /root/.config/nvim \\\n && git pull origin master \\\n && make silent_install\n#  ENTRYPOINT [ \"nvim\" ]\n","injectedSmells":[],"originalDockerfileHash":"a041514f00ee4dec124c5311da185725","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\n#  #######################################\n#   System Stuff\n#  #######################################\nENV TERM=\"screen-256color\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Update and install\nRUN apt-get update \\\n && apt-get install curl software-properties-common git locales python-dev python-pip python3-dev python3-pip ctags shellcheck build-essential openssh-client openssh-server silversearcher-ag -y\n#   setting up ssh\nRUN mkdir -p /var/run/sshd\nRUN useradd vim -m -p idatadev -s /bin/bash\nRUN echo \"vim:idatadev\" | chpasswd\nRUN echo \"vim ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n#   Generally a good idea to have these, extensions sometimes need them\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install vim8 and neovim, must vim first, or neovim will replace vim\n#   https://github.com/PegasusWang/vim-config\nRUN add-apt-repository ppa:jonathonf/vim\nRUN apt-get update \\\n && apt-get install vim -y\nRUN add-apt-repository ppa:neovim-ppa/stable\nRUN apt-get update \\\n && apt-get install neovim -y\nRUN mkdir ~/.config\nRUN git clone https://github.com/pegasuswang/vim-config ~/.config/nvim\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n#   install https://github.com/junegunn/vim-plug\nRUN curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n#  #######################################\n#   Python\n#  #######################################\n#   Install python linting and neovim plugin\nRUN pip install pip --upgrade\nRUN pip3 install --upgrade pip\nRUN pip install neovim jedi flake8 flake8-docstrings flake8-isort flake8-quotes pep8-naming pep257 isort autopep8 PyYAML\nRUN pip3 install neovim jedi flake8 flake8-docstrings flake8-isort flake8-quotes pep8-naming pep257 isort mypy ansible-lint autopep8 PyYAML\n#  #######################################\n#   Install nvm nodejs\n#   https://stackoverflow.com/questions/25899912/install-nvm-in-docker\n#  #######################################\n#   Replace shell with bash so we can source files\nENV NVM_DIR=\"/root/.nvm\"\nENV NODE_VERSION=\"8.9.0\"\n#   Install nvm with node and npm install plugins for vim\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh \\\n && curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install $NODE_VERSION \\\n && nvm alias default $NODE_VERSION \\\n && nvm use default \\\n && npm install eslint prettier jsctags tern -g\nENV NODE_PATH=\"$NVM_DIR/v$NODE_VERSION/lib/node_modules\"\nENV PATH=\"$NVM_DIR/v$NODE_VERSION/bin:$PATH\"\n#  #######################################\n#   Personalizations\n#  #######################################\nCOPY .vimrc /root/.vimrc\nRUN vim +silent +PlugInstall +qall\n#   RUN cd /root/.config/nvim && make test && make\nRUN cd /root/.config/nvim \\\n && git pull origin master \\\n && make silent_install\n#   ENTRYPOINT [ \"nvim\" ]\n","originalDockerfileUglifiedHash":"1064dcfb97dd82e88eaae2e6171a1c01","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7b4ce75fc7a716f7321ddb1d6013234a42ff6efa.dockerfile"}