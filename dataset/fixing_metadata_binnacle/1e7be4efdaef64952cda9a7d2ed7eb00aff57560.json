{"seed":3085298995,"processedDockerfileHash":"c2a2a928b4edd625e09169441e97b7e2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:7\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends build-essential bison flex cmake rpm alien nsis pkg-config libglib2.0-dev libgnutls-dev libpcap0.8-dev libgpgme11 libgpgme11-dev libhiredis-dev libssh-dev openssh-client doxygen libuuid1 uuid-dev sqlfairy xmltoman sqlite3 libsqlite3-dev libsqlite3-tcl libxml2-dev libxslt1.1 libxslt1-dev libcurl4-gnutls-dev libkrb5-dev libpopt-dev libssl-dev heimdal-multidev mingw32 xsltproc libmicrohttpd-dev wget rsync texlive-latex-base texlive-latex-recommended texlive-latex-extra unzip wapiti nmap redis-server gnupg libpq-dev postgresql-server-dev-all postgresql-client postgresql-contrib postgresql -y --force-yes \\\n && mkdir /openvas-src \\\n && cd /openvas-src \\\n && wget http://wald.intevation.org/frs/download.php/2125/openvas-libraries-8.0.5.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2129/openvas-scanner-5.0.4.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2169/openvas-manager-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2173/greenbone-security-assistant-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2141/openvas-cli-1.4.3.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/1975/openvas-smb-1.0.1.tar.gz \\\n && cd /openvas-src/ \\\n && tar zxvf openvas-libraries-8.*.tar.gz \\\n && tar zxvf openvas-scanner-5.*.tar.gz \\\n && tar zxvf openvas-manager-6.*.tar.gz \\\n && tar zxvf greenbone-security-assistant-6.*.tar.gz \\\n && tar zxvf openvas-cli-1.*.tar.gz \\\n && tar zxvf openvas-smb-1.*.tar.gz \\\n && LDFLAGS=\"$LDFLAGS -Wl,--no-as-needed\" \\\n && cd /openvas-src/openvas-smb-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-libraries-8.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-scanner-5.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-manager-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake -DBACKEND=POSTGRESQL .. \\\n && make \\\n && make install \\\n && cd /openvas-src/greenbone-security-assistant-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-cli-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && rm -rf /openvas-src \\\n && mkdir /dirb \\\n && cd /dirb \\\n && wget http://downloads.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz \\\n && tar -zxvf dirb222.tar.gz \\\n && cd dirb222 \\\n && chmod 700 -R * \\\n && ./configure \\\n && make \\\n && make install \\\n && cd / \\\n && cd /tmp \\\n && wget https://github.com/Arachni/arachni/releases/download/v1.2.1/arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && tar -zxvf arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && mv arachni-1.2.1-0.5.7.1 /opt/arachni \\\n && ln -s /opt/arachni/bin/* /usr/local/bin/ \\\n && cd ~ \\\n && wget https://github.com/sullo/nikto/archive/master.zip \\\n && unzip master.zip -d /tmp \\\n && mv /tmp/nikto-master/program /opt/nikto \\\n && rm -rf /tmp/nikto-master \\\n && echo \"EXECDIR=/opt/nikto\\nPLUGINDIR=/opt/nikto/plugins\\nDBDIR=/opt/nikto/databases\\nTEMPLATEDIR=/opt/nikto/templates\\nDOCDIR=/opt/nikto/docs\" >> /opt/nikto/nikto.conf \\\n && ln -s /opt/nikto/nikto.pl /usr/local/bin/nikto.pl \\\n && ln -s /opt/nikto/nikto.conf /etc/nikto.conf \\\n && mkdir -p /openvas \\\n && wget https://svn.wald.intevation.org/svn/openvas/trunk/tools/openvas-check-setup --no-check-certificate -O /openvas/openvas-check-setup \\\n && chmod a+x /openvas/openvas-check-setup \\\n && apt-get clean -yq \\\n && apt-get autoremove -yq \\\n && apt-get purge -y --auto-remove build-essential cmake\nCOPY bin/setup.sh /openvas/\nRUN chmod 700 /openvas/*.sh \\\n && bash /openvas/setup.sh\n#  Setup redis config\nRUN sed -i 's|^# unixsocketperm 755|unixsocketperm 755|;s|^# unixsocket /var/run/redis/redis.sock|unixsocket /tmp/redis.sock|;s|^port 6379|#port 6379|' /etc/redis/redis.conf\nCOPY bin/start.sh /openvas/\nRUN chmod 700 /openvas/*.sh\n#   Expose UI\nEXPOSE 443/tcp 9390/tcp 9391/tcp 9392/tcp\nCMD [\"/bin/bash\", \"/openvas/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:7\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends build-essential bison flex cmake rpm alien nsis pkg-config libglib2.0-dev libgnutls-dev libpcap0.8-dev libgpgme11 libgpgme11-dev libhiredis-dev libssh-dev openssh-client doxygen libuuid1 uuid-dev sqlfairy xmltoman sqlite3 libsqlite3-dev libsqlite3-tcl libxml2-dev libxslt1.1 libxslt1-dev libcurl4-gnutls-dev libkrb5-dev libpopt-dev libssl-dev heimdal-multidev mingw32 xsltproc libmicrohttpd-dev wget rsync texlive-latex-base texlive-latex-recommended texlive-latex-extra unzip wapiti nmap redis-server gnupg libpq-dev postgresql-server-dev-all postgresql-client postgresql-contrib postgresql -y --force-yes \\\n && mkdir /openvas-src \\\n && cd /openvas-src \\\n && wget http://wald.intevation.org/frs/download.php/2125/openvas-libraries-8.0.5.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2129/openvas-scanner-5.0.4.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2169/openvas-manager-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2173/greenbone-security-assistant-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2141/openvas-cli-1.4.3.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/1975/openvas-smb-1.0.1.tar.gz \\\n && cd /openvas-src/ \\\n && tar zxvf openvas-libraries-8.*.tar.gz \\\n && tar zxvf openvas-scanner-5.*.tar.gz \\\n && tar zxvf openvas-manager-6.*.tar.gz \\\n && tar zxvf greenbone-security-assistant-6.*.tar.gz \\\n && tar zxvf openvas-cli-1.*.tar.gz \\\n && tar zxvf openvas-smb-1.*.tar.gz \\\n && LDFLAGS=\"$LDFLAGS -Wl,--no-as-needed\" \\\n && cd /openvas-src/openvas-smb-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-libraries-8.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-scanner-5.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-manager-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake -DBACKEND=POSTGRESQL .. \\\n && make \\\n && make install \\\n && cd /openvas-src/greenbone-security-assistant-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-cli-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && rm -rf /openvas-src \\\n && mkdir /dirb \\\n && cd /dirb \\\n && wget http://downloads.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz \\\n && tar -zxvf dirb222.tar.gz \\\n && cd dirb222 \\\n && chmod 700 -R * \\\n && ./configure \\\n && make \\\n && make install \\\n && cd / \\\n && cd /tmp \\\n && wget https://github.com/Arachni/arachni/releases/download/v1.2.1/arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && tar -zxvf arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && mv arachni-1.2.1-0.5.7.1 /opt/arachni \\\n && ln -s /opt/arachni/bin/* /usr/local/bin/ \\\n && cd ~ \\\n && wget https://github.com/sullo/nikto/archive/master.zip \\\n && unzip master.zip -d /tmp \\\n && mv /tmp/nikto-master/program /opt/nikto \\\n && rm -rf /tmp/nikto-master \\\n && echo \"EXECDIR=/opt/nikto\\nPLUGINDIR=/opt/nikto/plugins\\nDBDIR=/opt/nikto/databases\\nTEMPLATEDIR=/opt/nikto/templates\\nDOCDIR=/opt/nikto/docs\" >> /opt/nikto/nikto.conf \\\n && ln -s /opt/nikto/nikto.pl /usr/local/bin/nikto.pl \\\n && ln -s /opt/nikto/nikto.conf /etc/nikto.conf \\\n && mkdir -p /openvas \\\n && wget https://svn.wald.intevation.org/svn/openvas/trunk/tools/openvas-check-setup --no-check-certificate -O /openvas/openvas-check-setup \\\n && chmod a+x /openvas/openvas-check-setup \\\n && apt-get clean -yq \\\n && apt-get autoremove -yq \\\n && apt-get purge -y --auto-remove build-essential cmake\nADD bin/setup.sh /openvas/\nRUN chmod 700 /openvas/*.sh \\\n && bash /openvas/setup.sh\n# Setup redis config\nRUN sed -i 's|^# unixsocketperm 755|unixsocketperm 755|;s|^# unixsocket /var/run/redis/redis.sock|unixsocket /tmp/redis.sock|;s|^port 6379|#port 6379|' /etc/redis/redis.conf\nADD bin/start.sh /openvas/\nRUN chmod 700 /openvas/*.sh\n#  Expose UI\nEXPOSE 443/tcp 9390/tcp 9391/tcp 9392/tcp\nCMD [\"/bin/bash\", \"/openvas/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"e674ac4f4b1a13c2f9f37b09b7e5ed33","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:7\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends build-essential bison flex cmake rpm alien nsis pkg-config libglib2.0-dev libgnutls-dev libpcap0.8-dev libgpgme11 libgpgme11-dev libhiredis-dev libssh-dev openssh-client doxygen libuuid1 uuid-dev sqlfairy xmltoman sqlite3 libsqlite3-dev libsqlite3-tcl libxml2-dev libxslt1.1 libxslt1-dev libcurl4-gnutls-dev libkrb5-dev libpopt-dev libssl-dev heimdal-multidev mingw32 xsltproc libmicrohttpd-dev wget rsync texlive-latex-base texlive-latex-recommended texlive-latex-extra unzip wapiti nmap redis-server gnupg libpq-dev postgresql-server-dev-all postgresql-client postgresql-contrib postgresql -y --force-yes \\\n && mkdir /openvas-src \\\n && cd /openvas-src \\\n && wget http://wald.intevation.org/frs/download.php/2125/openvas-libraries-8.0.5.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2129/openvas-scanner-5.0.4.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2169/openvas-manager-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2173/greenbone-security-assistant-6.0.6.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/2141/openvas-cli-1.4.3.tar.gz \\\n && wget http://wald.intevation.org/frs/download.php/1975/openvas-smb-1.0.1.tar.gz \\\n && cd /openvas-src/ \\\n && tar zxvf openvas-libraries-8.*.tar.gz \\\n && tar zxvf openvas-scanner-5.*.tar.gz \\\n && tar zxvf openvas-manager-6.*.tar.gz \\\n && tar zxvf greenbone-security-assistant-6.*.tar.gz \\\n && tar zxvf openvas-cli-1.*.tar.gz \\\n && tar zxvf openvas-smb-1.*.tar.gz \\\n && LDFLAGS=\"$LDFLAGS -Wl,--no-as-needed\" \\\n && cd /openvas-src/openvas-smb-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-libraries-8.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-scanner-5.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-manager-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake -DBACKEND=POSTGRESQL .. \\\n && make \\\n && make install \\\n && cd /openvas-src/greenbone-security-assistant-6.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && cd /openvas-src/openvas-cli-1.* \\\n && mkdir source \\\n && cd source \\\n && cmake .. \\\n && make \\\n && make install \\\n && rm -rf /openvas-src \\\n && mkdir /dirb \\\n && cd /dirb \\\n && wget http://downloads.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz \\\n && tar -zxvf dirb222.tar.gz \\\n && cd dirb222 \\\n && chmod 700 -R * \\\n && ./configure \\\n && make \\\n && make install \\\n && cd / \\\n && cd /tmp \\\n && wget https://github.com/Arachni/arachni/releases/download/v1.2.1/arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && tar -zxvf arachni-1.2.1-0.5.7.1-linux-x86_64.tar.gz \\\n && mv arachni-1.2.1-0.5.7.1 /opt/arachni \\\n && ln -s /opt/arachni/bin/* /usr/local/bin/ \\\n && cd ~ \\\n && wget https://github.com/sullo/nikto/archive/master.zip \\\n && unzip master.zip -d /tmp \\\n && mv /tmp/nikto-master/program /opt/nikto \\\n && rm -rf /tmp/nikto-master \\\n && echo \"EXECDIR=/opt/nikto\\nPLUGINDIR=/opt/nikto/plugins\\nDBDIR=/opt/nikto/databases\\nTEMPLATEDIR=/opt/nikto/templates\\nDOCDIR=/opt/nikto/docs\" >> /opt/nikto/nikto.conf \\\n && ln -s /opt/nikto/nikto.pl /usr/local/bin/nikto.pl \\\n && ln -s /opt/nikto/nikto.conf /etc/nikto.conf \\\n && mkdir -p /openvas \\\n && wget https://svn.wald.intevation.org/svn/openvas/trunk/tools/openvas-check-setup --no-check-certificate -O /openvas/openvas-check-setup \\\n && chmod a+x /openvas/openvas-check-setup \\\n && apt-get clean -yq \\\n && apt-get autoremove -yq \\\n && apt-get purge -y --auto-remove build-essential cmake\nADD bin/setup.sh /openvas/\nRUN chmod 700 /openvas/*.sh \\\n && bash /openvas/setup.sh\n#  Setup redis config\nRUN sed -i 's|^# unixsocketperm 755|unixsocketperm 755|;s|^# unixsocket /var/run/redis/redis.sock|unixsocket /tmp/redis.sock|;s|^port 6379|#port 6379|' /etc/redis/redis.conf\nADD bin/start.sh /openvas/\nRUN chmod 700 /openvas/*.sh\n#   Expose UI\nEXPOSE 443/tcp 9390/tcp 9391/tcp 9392/tcp\nCMD [\"/bin/bash\", \"/openvas/start.sh\"]\n","originalDockerfileUglifiedHash":"7df9ad80307e9ee10e923f1901357a2d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1e7be4efdaef64952cda9a7d2ed7eb00aff57560.dockerfile"}