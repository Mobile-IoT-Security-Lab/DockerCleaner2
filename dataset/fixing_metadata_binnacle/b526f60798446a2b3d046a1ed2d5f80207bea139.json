{"seed":14834429,"processedDockerfileHash":"dc564a4a1fed04da5ac75767f1a4ce2a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Licensed to the Apache Software Foundation (ASF) under one or more\n#   contributor license agreements. See the NOTICE file distributed with\n#   this work for additional information regarding copyright ownership.\n#   The ASF licenses this file to You under the Apache License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   This Dockerfile will build the required environment and stack to easily \n#   get up and running with running LegisGATE\n#   For more documentation please see https://github.com/lewismc/legisgate\nFROM google/debian:wheezy\nMAINTAINER Lewis John McGibbney <lewis.j.mcgibbney@jpl.nasa.gov>\n#   Get the package containing apt-add-repository installed for adding repositories\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y\n#   Install openJDK 1.7\nRUN apt-get install --no-install-recommends openjdk-7-jdk -y\n#   Install various dependencies\nRUN apt-get install --no-install-recommends ant wget maven openssh-server openssh-client git vim telnet subversion rsync curl build-essential -y\nRUN echo \"JAVA_HOME=/usr/bin\" >> /etc/environment\nRUN echo 'PATH=$PATH:HOME/bin:$JAVA_HOME/bin' >> /etc/profile \\\n && echo 'export JAVA_HOME' >> /etc/profile \\\n && echo 'export PATH' >> /etc/profile\nRUN addgroup hadoop\nRUN adduser -ingroup hadoop --gecos \"\" --disabled-password hduser\nRUN rm -rf /etc/ssh/ssh_host_dsa_key /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -q -N \"\" -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN ssh-keygen -q -N \"\" -t rsa -f /etc/ssh/ssh_host_rsa_key\nUSER hduser\nRUN ssh-keygen -q -N \"\" -t rsa -f /home/hduser/.ssh/id_rsa\nRUN cp /home/hduser/.ssh/id_rsa.pub /home/hduser/.ssh/authorized_keys\n#   add localhost to hduser's list of known_hosts files without need ssh login\nRUN ssh-keyscan -H localhost >> ~/.ssh/known_hosts\nUSER root\nWORKDIR /tmp\n#  #######################\n#   Apache Mahout 0.10.0 #\n#  #######################\nENV MAHOUT_PKG_NAME=\"mahout-distribution-0.10.0\"\nRUN wget http://archive.apache.org/dist/mahout/0.10.0/$MAHOUT_PKG_NAME.tar.gz \\\n && tar -xvzf $MAHOUT_PKG_NAME.tar.gz \\\n && rm -f $MAHOUT_PKG_NAME.tar.gz \\\n && mv $MAHOUT_PKG_NAME /usr/local/mahout\n#   Needed to specify that we are running without a cluster\nENV MAHOUT_LOCAL=\"true\"\nENV MAHOUT_HOME=\"/usr/local/mahout\"\n#   SSH login fix so user isn't kicked after login\nRUN sed 's#session\\s*required\\s*pam_loginuid.so#session optional pam_loginuid.so#g' -i /etc/pam.d/sshd\n#   so you can call 'mahout'\nENV PATH=\"$PATH:/usr/local/mahout/bin\"\n#  #######################\n#   Apache Hadoop 2.2.0  #\n#  #######################\nENV HADOOP_PKG_NAME=\"hadoop-2.2.0\"\nRUN wget http://archive.apache.org/dist/hadoop/core/hadoop-2.2.0/$HADOOP_PKG_NAME.tar.gz \\\n && tar -xvzf $HADOOP_PKG_NAME.tar.gz \\\n && rm -f $HADOOP_PKG_NAME.tar.gz \\\n && mv $HADOOP_PKG_NAME /usr/local/hadoop\nWORKDIR /usr/local\nRUN chown -R hduser:hadoop hadoop\n#   ENV needs to be used, as the above doesn't seem to be visible from cli\nENV JAVA_HOME=\"/usr\"\nENV HADOOP_HOME=\"/usr/local/hadoop\"\n#   so you can call 'hadoop', etc\nENV PATH=\"$PATH:/usr/local/hadoop/bin\"\n#  ######################\n#   Elasticsearch 1.5.0 #\n#  ######################\nENV ES_PKG_NAME=\"elasticsearch-1.5.0\"\nRUN wget https://download.elasticsearch.org/elasticsearch/elasticsearch/$ES_PKG_NAME.tar.gz \\\n && tar -xvzf $ES_PKG_NAME.tar.gz \\\n && rm -f $ES_PKG_NAME.tar.gz \\\n && mv $ES_PKG_NAME /usr/local/elasticsearch\n#   Define mountable directories.\nVOLUME [\"/data\"]\n#   Mount elasticsearch.yml config\nCOPY config/elasticsearch.yml /usr/local/elasticsearch/config/elasticsearch.yml\n#   Define default command.\nCMD [\"/usr/local/elasticsearch/bin/elasticsearch\"]\n#   Expose ports.\n#   - 9200: HTTP\n#   - 9300: transport\nEXPOSE 9200/tcp\nEXPOSE 9300/tcp\n#   Obtain the sources for DigitalPebble's Behemoth\n#  WORKDIR /usr/local\n#  RUN git clone https://github.com/DigitalPebble/behemoth.git\n#  cd behemoth && mvn clean install -DskipTests\n#  ############\n#   MemexGATE #\n#  ############\nWORKDIR /usr/local\nRUN git clone https://github.com/memex-explorer/memex-gate.git\nENV MEMEXGATE_HOME=\"/usr/local/memex-gate \"\n#  so you can call 'memexgate'\nENV PATH=\"$PATH:$MEMEXGATE_HOME/bin\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Licensed to the Apache Software Foundation (ASF) under one or more\n#  contributor license agreements. See the NOTICE file distributed with\n#  this work for additional information regarding copyright ownership.\n#  The ASF licenses this file to You under the Apache License, Version 2.0\n#  (the \"License\"); you may not use this file except in compliance with\n#  the License. You may obtain a copy of the License at\n#\n#  http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#  This Dockerfile will build the required environment and stack to easily \n#  get up and running with running LegisGATE\n#  For more documentation please see https://github.com/lewismc/legisgate\nFROM google/debian:wheezy\nMAINTAINER Lewis John McGibbney <lewis.j.mcgibbney@jpl.nasa.gov>\n#  Get the package containing apt-add-repository installed for adding repositories\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#  Install openJDK 1.7\nRUN apt-get install openjdk-7-jdk -y\n#  Install various dependencies\nRUN apt-get install ant wget maven openssh-server openssh-client git vim telnet subversion rsync curl build-essential -y\nRUN echo \"JAVA_HOME=/usr/bin\" >> /etc/environment\nRUN echo 'PATH=$PATH:HOME/bin:$JAVA_HOME/bin' >> /etc/profile \\\n && echo 'export JAVA_HOME' >> /etc/profile \\\n && echo 'export PATH' >> /etc/profile\nRUN addgroup hadoop\nRUN adduser -ingroup hadoop --gecos \"\" --disabled-password hduser\nRUN rm -rf /etc/ssh/ssh_host_dsa_key /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -q -N \"\" -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN ssh-keygen -q -N \"\" -t rsa -f /etc/ssh/ssh_host_rsa_key\nUSER hduser\nRUN ssh-keygen -q -N \"\" -t rsa -f /home/hduser/.ssh/id_rsa\nRUN cp /home/hduser/.ssh/id_rsa.pub /home/hduser/.ssh/authorized_keys\n#  add localhost to hduser's list of known_hosts files without need ssh login\nRUN ssh-keyscan -H localhost >> ~/.ssh/known_hosts\nUSER root\nWORKDIR /tmp\n# #######################\n#  Apache Mahout 0.10.0 #\n# #######################\nENV MAHOUT_PKG_NAME=\"mahout-distribution-0.10.0\"\nRUN wget http://archive.apache.org/dist/mahout/0.10.0/$MAHOUT_PKG_NAME.tar.gz \\\n && tar -xvzf $MAHOUT_PKG_NAME.tar.gz \\\n && rm -f $MAHOUT_PKG_NAME.tar.gz \\\n && mv $MAHOUT_PKG_NAME /usr/local/mahout\n#  Needed to specify that we are running without a cluster\nENV MAHOUT_LOCAL=\"true\"\nENV MAHOUT_HOME=\"/usr/local/mahout\"\n#  SSH login fix so user isn't kicked after login\nRUN sed 's#session\\s*required\\s*pam_loginuid.so#session optional pam_loginuid.so#g' -i /etc/pam.d/sshd\n#  so you can call 'mahout'\nENV PATH=\"$PATH:/usr/local/mahout/bin\"\n# #######################\n#  Apache Hadoop 2.2.0  #\n# #######################\nENV HADOOP_PKG_NAME=\"hadoop-2.2.0\"\nRUN wget http://archive.apache.org/dist/hadoop/core/hadoop-2.2.0/$HADOOP_PKG_NAME.tar.gz \\\n && tar -xvzf $HADOOP_PKG_NAME.tar.gz \\\n && rm -f $HADOOP_PKG_NAME.tar.gz \\\n && mv $HADOOP_PKG_NAME /usr/local/hadoop\nWORKDIR /usr/local\nRUN chown -R hduser:hadoop hadoop\n#  ENV needs to be used, as the above doesn't seem to be visible from cli\nENV JAVA_HOME=\"/usr\"\nENV HADOOP_HOME=\"/usr/local/hadoop\"\n#  so you can call 'hadoop', etc\nENV PATH=\"$PATH:/usr/local/hadoop/bin\"\n# ######################\n#  Elasticsearch 1.5.0 #\n# ######################\nENV ES_PKG_NAME=\"elasticsearch-1.5.0\"\nRUN wget https://download.elasticsearch.org/elasticsearch/elasticsearch/$ES_PKG_NAME.tar.gz \\\n && tar -xvzf $ES_PKG_NAME.tar.gz \\\n && rm -f $ES_PKG_NAME.tar.gz \\\n && mv $ES_PKG_NAME /usr/local/elasticsearch\n#  Define mountable directories.\nVOLUME [\"/data\"]\n#  Mount elasticsearch.yml config\nADD config/elasticsearch.yml /usr/local/elasticsearch/config/elasticsearch.yml\n#  Define default command.\nCMD [\"/usr/local/elasticsearch/bin/elasticsearch\"]\n#  Expose ports.\n#  - 9200: HTTP\n#  - 9300: transport\nEXPOSE 9200/tcp\nEXPOSE 9300/tcp\n#  Obtain the sources for DigitalPebble's Behemoth\n# WORKDIR /usr/local\n# RUN git clone https://github.com/DigitalPebble/behemoth.git\n# cd behemoth && mvn clean install -DskipTests\n# ############\n#  MemexGATE #\n# ############\nWORKDIR /usr/local\nRUN git clone https://github.com/memex-explorer/memex-gate.git\nENV MEMEXGATE_HOME=\"/usr/local/memex-gate \"\n# so you can call 'memexgate'\nENV PATH=\"$PATH:$MEMEXGATE_HOME/bin\"\n","injectedSmells":[],"originalDockerfileHash":"ad45584028b42b51f0a3b8d800e25afd","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Licensed to the Apache Software Foundation (ASF) under one or more\n#   contributor license agreements. See the NOTICE file distributed with\n#   this work for additional information regarding copyright ownership.\n#   The ASF licenses this file to You under the Apache License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   This Dockerfile will build the required environment and stack to easily \n#   get up and running with running LegisGATE\n#   For more documentation please see https://github.com/lewismc/legisgate\nFROM google/debian:wheezy\nMAINTAINER Lewis John McGibbney <lewis.j.mcgibbney@jpl.nasa.gov>\n#   Get the package containing apt-add-repository installed for adding repositories\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#   Install openJDK 1.7\nRUN apt-get install openjdk-7-jdk -y\n#   Install various dependencies\nRUN apt-get install ant wget maven openssh-server openssh-client git vim telnet subversion rsync curl build-essential -y\nRUN echo \"JAVA_HOME=/usr/bin\" >> /etc/environment\nRUN echo 'PATH=$PATH:HOME/bin:$JAVA_HOME/bin' >> /etc/profile \\\n && echo 'export JAVA_HOME' >> /etc/profile \\\n && echo 'export PATH' >> /etc/profile\nRUN addgroup hadoop\nRUN adduser -ingroup hadoop --gecos \"\" --disabled-password hduser\nRUN rm -rf /etc/ssh/ssh_host_dsa_key /etc/ssh/ssh_host_rsa_key\nRUN ssh-keygen -q -N \"\" -t dsa -f /etc/ssh/ssh_host_dsa_key\nRUN ssh-keygen -q -N \"\" -t rsa -f /etc/ssh/ssh_host_rsa_key\nUSER hduser\nRUN ssh-keygen -q -N \"\" -t rsa -f /home/hduser/.ssh/id_rsa\nRUN cp /home/hduser/.ssh/id_rsa.pub /home/hduser/.ssh/authorized_keys\n#   add localhost to hduser's list of known_hosts files without need ssh login\nRUN ssh-keyscan -H localhost >> ~/.ssh/known_hosts\nUSER root\nWORKDIR /tmp\n#  #######################\n#   Apache Mahout 0.10.0 #\n#  #######################\nENV MAHOUT_PKG_NAME=\"mahout-distribution-0.10.0\"\nRUN wget http://archive.apache.org/dist/mahout/0.10.0/$MAHOUT_PKG_NAME.tar.gz \\\n && tar -xvzf $MAHOUT_PKG_NAME.tar.gz \\\n && rm -f $MAHOUT_PKG_NAME.tar.gz \\\n && mv $MAHOUT_PKG_NAME /usr/local/mahout\n#   Needed to specify that we are running without a cluster\nENV MAHOUT_LOCAL=\"true\"\nENV MAHOUT_HOME=\"/usr/local/mahout\"\n#   SSH login fix so user isn't kicked after login\nRUN sed 's#session\\s*required\\s*pam_loginuid.so#session optional pam_loginuid.so#g' -i /etc/pam.d/sshd\n#   so you can call 'mahout'\nENV PATH=\"$PATH:/usr/local/mahout/bin\"\n#  #######################\n#   Apache Hadoop 2.2.0  #\n#  #######################\nENV HADOOP_PKG_NAME=\"hadoop-2.2.0\"\nRUN wget http://archive.apache.org/dist/hadoop/core/hadoop-2.2.0/$HADOOP_PKG_NAME.tar.gz \\\n && tar -xvzf $HADOOP_PKG_NAME.tar.gz \\\n && rm -f $HADOOP_PKG_NAME.tar.gz \\\n && mv $HADOOP_PKG_NAME /usr/local/hadoop\nWORKDIR /usr/local\nRUN chown -R hduser:hadoop hadoop\n#   ENV needs to be used, as the above doesn't seem to be visible from cli\nENV JAVA_HOME=\"/usr\"\nENV HADOOP_HOME=\"/usr/local/hadoop\"\n#   so you can call 'hadoop', etc\nENV PATH=\"$PATH:/usr/local/hadoop/bin\"\n#  ######################\n#   Elasticsearch 1.5.0 #\n#  ######################\nENV ES_PKG_NAME=\"elasticsearch-1.5.0\"\nRUN wget https://download.elasticsearch.org/elasticsearch/elasticsearch/$ES_PKG_NAME.tar.gz \\\n && tar -xvzf $ES_PKG_NAME.tar.gz \\\n && rm -f $ES_PKG_NAME.tar.gz \\\n && mv $ES_PKG_NAME /usr/local/elasticsearch\n#   Define mountable directories.\nVOLUME [\"/data\"]\n#   Mount elasticsearch.yml config\nADD config/elasticsearch.yml /usr/local/elasticsearch/config/elasticsearch.yml\n#   Define default command.\nCMD [\"/usr/local/elasticsearch/bin/elasticsearch\"]\n#   Expose ports.\n#   - 9200: HTTP\n#   - 9300: transport\nEXPOSE 9200/tcp\nEXPOSE 9300/tcp\n#   Obtain the sources for DigitalPebble's Behemoth\n#  WORKDIR /usr/local\n#  RUN git clone https://github.com/DigitalPebble/behemoth.git\n#  cd behemoth && mvn clean install -DskipTests\n#  ############\n#   MemexGATE #\n#  ############\nWORKDIR /usr/local\nRUN git clone https://github.com/memex-explorer/memex-gate.git\nENV MEMEXGATE_HOME=\"/usr/local/memex-gate \"\n#  so you can call 'memexgate'\nENV PATH=\"$PATH:$MEMEXGATE_HOME/bin\"\n","originalDockerfileUglifiedHash":"96e459ec65e97148c5087d111060bc2c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b526f60798446a2b3d046a1ed2d5f80207bea139.dockerfile"}