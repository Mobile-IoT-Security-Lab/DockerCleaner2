{"seed":647148110,"processedDockerfileHash":"ca2b776c1effcae0a82a5418d9ee83b5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  Base image\nFROM ubuntu:18.04\n#  Labels and Credits\nLABEL name=\"MobSF\" \\\n      author=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      maintainer=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      contributor_1=\"OscarAkaElvis <oscar.alfonso.diaz@gmail.com>\" \\\n      contributor_2=\"Vincent Nadal <vincent.nadal@orange.fr>\" \\\n      description=\"Mobile Security Framework is an intelligent, all-in-one open source mobile application (Android/iOS/Windows) automated pen-testing framework capable of performing static, dynamic analysis and web API testing\"\n#  Environment vars\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV PDFGEN_PKGFILE=\"wkhtmltox_0.12.5-1.bionic_amd64.deb\"\nENV PDFGEN_URL=\"https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/${PDFGEN_PKGFILE}\"\n#  Update the repository sources list\n#  Install Required Libs\n#  see https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#run\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends build-essential=12.4ubuntu1 libssl-dev=1.1.1-1ubuntu2.1~18.04.21 libffi-dev=3.2.1-8 libxml2-dev=2.9.4+dfsg1-6.1ubuntu1.8 libxslt1-dev=1.1.29-5ubuntu0.3 locales=2.27-3ubuntu1.6 -y\n#  set locales\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  Install Oracle JDK12\nRUN apt-get install --no-install-recommends software-properties-common=0.96.24.32.20 -y \\\n && add-apt-repository ppa:linuxuprising/java -y \\\n && apt-get update \\\n && echo oracle-java12-installer shared/accepted-oracle-license-v1-2 select true | /usr/bin/debconf-set-selections \\\n && apt-get install --no-install-recommends oracle-java12-installer -y\n#  Install Python 3\nRUN apt-get install --no-install-recommends python3.6=3.6.9-1~18.04ubuntu1.12 python3-dev=3.6.7-1~18.04 python3-setuptools=39.0.1-2ubuntu0.1 -y \\\n && python3 /usr/lib/python3/dist-packages/easy_install.py pip\n#  Install git, sqlite3 client and pdf generator needed dependencies\nRUN apt-get install --no-install-recommends sqlite3=3.22.0-1ubuntu0.7 fontconfig-config=2.12.6-0ubuntu2 libjpeg-turbo8=1.5.2-0ubuntu5.18.04.6 fontconfig=2.12.6-0ubuntu2 xorg=1:7.7+19ubuntu7.1 xfonts-75dpi=1:1.0.4+nmu1 git=1:2.17.1-1ubuntu0.17 -y\n#  Install wkhtmltopdf for PDF Reports\nWORKDIR /tmp\nRUN wget ${PDFGEN_URL} \\\n && dpkg -i ${PDFGEN_PKGFILE} \\\n && rm -rf ${PDFGEN_PKGFILE}\n#  Add MobSF master\nCOPY . /root/Mobile-Security-Framework-MobSF\nWORKDIR /root/Mobile-Security-Framework-MobSF\n#  Enable Use Home Directory\nRUN sed -i 's/USE_HOME = False/USE_HOME = True/g' MobSF/settings.py\n#  Kali fix to support 32 bit execution\nRUN ./scripts/kali_fix.sh\n#  Postgres support is set to false by default\nARG POSTGRES=False\n#  check if Postgres support needs to be enabled \nRUN cd scripts \\\n && chmod +x postgres_support.sh ; sync ; ./postgres_support.sh $POSTGRES\n#  Add apktool working path\nRUN mkdir -p /root/.local/share/apktool/framework\n#  Install APKiD dependencies\nRUN pip3 install wheel\nRUN pip3 wheel --wheel-dir=/tmp/yara-python --build-option=\"build\" --build-option=\"--enable-dex\" git+https://github.com/VirusTotal/yara-python.git@v3.10.0\nRUN pip3 install --no-index --find-links=/tmp/yara-python yara-python\n#  Install Dependencies\nRUN pip3 install -r requirements.txt\n#  Cleanup\nRUN apt-get remove -y git \\\n && apt-get clean \\\n && apt-get autoclean \\\n && apt-get autoremove -y\nRUN rm -rf /var/lib/apt/lists/* /tmp/* > /dev/null 2>&1\n#  Expose MobSF Port\nEXPOSE 8000/tcp\nRUN python3 manage.py makemigrations\nRUN python3 manage.py migrate\n#  Run MobSF\nCMD [\"gunicorn\", \"-b\", \"0.0.0.0:8000\", \"MobSF.wsgi:application\", \"--workers=1\", \"--threads=4\", \"--timeout=1800\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# Base image\nFROM ubuntu:18.04\n# Labels and Credits\nLABEL name=\"MobSF\" \\\n      author=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      maintainer=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      contributor_1=\"OscarAkaElvis <oscar.alfonso.diaz@gmail.com>\" \\\n      contributor_2=\"Vincent Nadal <vincent.nadal@orange.fr>\" \\\n      description=\"Mobile Security Framework is an intelligent, all-in-one open source mobile application (Android/iOS/Windows) automated pen-testing framework capable of performing static, dynamic analysis and web API testing\"\n# Environment vars\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV PDFGEN_PKGFILE=\"wkhtmltox_0.12.5-1.bionic_amd64.deb\"\nENV PDFGEN_URL=\"https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/${PDFGEN_PKGFILE}\"\n# Update the repository sources list\n# Install Required Libs\n# see https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#run\nRUN apt-get update -y \\\n && apt-get install -y build-essential libssl-dev libffi-dev libxml2-dev libxslt1-dev locales\n# set locales\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n# Install Oracle JDK12\nRUN apt-get install -y software-properties-common \\\n && add-apt-repository ppa:linuxuprising/java -y \\\n && apt-get update \\\n && echo oracle-java12-installer shared/accepted-oracle-license-v1-2 select true | /usr/bin/debconf-set-selections \\\n && apt-get install -y oracle-java12-installer\n# Install Python 3\nRUN apt-get install -y python3.6 python3-dev python3-setuptools \\\n && python3 /usr/lib/python3/dist-packages/easy_install.py pip\n# Install git, sqlite3 client and pdf generator needed dependencies\nRUN apt-get install -y sqlite3 fontconfig-config libjpeg-turbo8 fontconfig xorg xfonts-75dpi git\n# Install wkhtmltopdf for PDF Reports\nWORKDIR /tmp\nRUN wget ${PDFGEN_URL} \\\n && dpkg -i ${PDFGEN_PKGFILE} \\\n && rm -rf ${PDFGEN_PKGFILE}\n# Add MobSF master\nCOPY . /root/Mobile-Security-Framework-MobSF\nWORKDIR /root/Mobile-Security-Framework-MobSF\n# Enable Use Home Directory\nRUN sed -i 's/USE_HOME = False/USE_HOME = True/g' MobSF/settings.py\n# Kali fix to support 32 bit execution\nRUN ./scripts/kali_fix.sh\n# Postgres support is set to false by default\nARG POSTGRES=False\n# check if Postgres support needs to be enabled \nRUN cd scripts \\\n && chmod +x postgres_support.sh ; sync ; ./postgres_support.sh $POSTGRES\n# Add apktool working path\nRUN mkdir -p /root/.local/share/apktool/framework\n# Install APKiD dependencies\nRUN pip3 install wheel\nRUN pip3 wheel --wheel-dir=/tmp/yara-python --build-option=\"build\" --build-option=\"--enable-dex\" git+https://github.com/VirusTotal/yara-python.git@v3.10.0\nRUN pip3 install --no-index --find-links=/tmp/yara-python yara-python\n# Install Dependencies\nRUN pip3 install -r requirements.txt\n# Cleanup\nRUN apt-get remove -y git \\\n && apt-get clean \\\n && apt-get autoclean \\\n && apt-get autoremove -y\nRUN rm -rf /var/lib/apt/lists/* /tmp/* > /dev/null 2>&1\n# Expose MobSF Port\nEXPOSE 8000/tcp\nRUN python3 manage.py makemigrations\nRUN python3 manage.py migrate\n# Run MobSF\nCMD [\"gunicorn\", \"-b\", \"0.0.0.0:8000\", \"MobSF.wsgi:application\", \"--workers=1\", \"--threads=4\", \"--timeout=1800\"]\n","injectedSmells":[],"originalDockerfileHash":"a5e90ccd625fda112eb49fb32692b24e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  Base image\nFROM ubuntu:18.04\n#  Labels and Credits\nLABEL name=\"MobSF\" \\\n      author=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      maintainer=\"Ajin Abraham <ajin25@gmail.com>\" \\\n      contributor_1=\"OscarAkaElvis <oscar.alfonso.diaz@gmail.com>\" \\\n      contributor_2=\"Vincent Nadal <vincent.nadal@orange.fr>\" \\\n      description=\"Mobile Security Framework is an intelligent, all-in-one open source mobile application (Android/iOS/Windows) automated pen-testing framework capable of performing static, dynamic analysis and web API testing\"\n#  Environment vars\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV PDFGEN_PKGFILE=\"wkhtmltox_0.12.5-1.bionic_amd64.deb\"\nENV PDFGEN_URL=\"https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/${PDFGEN_PKGFILE}\"\n#  Update the repository sources list\n#  Install Required Libs\n#  see https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#run\nRUN apt-get update -y \\\n && apt-get install build-essential libssl-dev libffi-dev libxml2-dev libxslt1-dev locales -y\n#  set locales\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  Install Oracle JDK12\nRUN apt-get install software-properties-common -y \\\n && add-apt-repository ppa:linuxuprising/java -y \\\n && apt-get update \\\n && echo oracle-java12-installer shared/accepted-oracle-license-v1-2 select true | /usr/bin/debconf-set-selections \\\n && apt-get install oracle-java12-installer -y\n#  Install Python 3\nRUN apt-get install python3.6 python3-dev python3-setuptools -y \\\n && python3 /usr/lib/python3/dist-packages/easy_install.py pip\n#  Install git, sqlite3 client and pdf generator needed dependencies\nRUN apt-get install sqlite3 fontconfig-config libjpeg-turbo8 fontconfig xorg xfonts-75dpi git -y\n#  Install wkhtmltopdf for PDF Reports\nWORKDIR /tmp\nRUN wget ${PDFGEN_URL} \\\n && dpkg -i ${PDFGEN_PKGFILE} \\\n && rm -rf ${PDFGEN_PKGFILE}\n#  Add MobSF master\nCOPY . /root/Mobile-Security-Framework-MobSF\nWORKDIR /root/Mobile-Security-Framework-MobSF\n#  Enable Use Home Directory\nRUN sed -i 's/USE_HOME = False/USE_HOME = True/g' MobSF/settings.py\n#  Kali fix to support 32 bit execution\nRUN ./scripts/kali_fix.sh\n#  Postgres support is set to false by default\nARG POSTGRES=False\n#  check if Postgres support needs to be enabled \nRUN cd scripts \\\n && chmod +x postgres_support.sh ; sync ; ./postgres_support.sh $POSTGRES\n#  Add apktool working path\nRUN mkdir -p /root/.local/share/apktool/framework\n#  Install APKiD dependencies\nRUN pip3 install wheel\nRUN pip3 wheel --wheel-dir=/tmp/yara-python --build-option=\"build\" --build-option=\"--enable-dex\" git+https://github.com/VirusTotal/yara-python.git@v3.10.0\nRUN pip3 install --no-index --find-links=/tmp/yara-python yara-python\n#  Install Dependencies\nRUN pip3 install -r requirements.txt\n#  Cleanup\nRUN apt-get remove -y git \\\n && apt-get clean \\\n && apt-get autoclean \\\n && apt-get autoremove -y\nRUN rm -rf /var/lib/apt/lists/* /tmp/* > /dev/null 2>&1\n#  Expose MobSF Port\nEXPOSE 8000/tcp\nRUN python3 manage.py makemigrations\nRUN python3 manage.py migrate\n#  Run MobSF\nCMD [\"gunicorn\", \"-b\", \"0.0.0.0:8000\", \"MobSF.wsgi:application\", \"--workers=1\", \"--threads=4\", \"--timeout=1800\"]\n","originalDockerfileUglifiedHash":"13e1a7ddcc111b4dce07762fce683b7a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/13930883e6e9e1013e489b137a68cb1186f94dd1.dockerfile"}