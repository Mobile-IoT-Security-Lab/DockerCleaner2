{"seed":3957894883,"processedDockerfileHash":"69bc39f116caa432860417ac82c6aa4f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  AUTHOR Aviral Takkar <aviraltakkar@cs.ucsb.edu>\nFROM phusion/baseimage:0.9.15\nMAINTAINER Aviral Takkar\nENV HOME=\"/root\"\nCMD [\"/sbin/my_init\"]\nRUN :\n#   RUN apt-get install -yy libxml2\n#   Install dependencies\nRUN (apt-get update ;apt-get install --no-install-recommends libxml2 cmake flex g++ gfortran git ipython libatlas-base-dev libboost-all-dev libcln-dev libcppunit-dev libeigen3-dev libginac-dev liblapack-dev libmpfr-dev libopenmpi-dev petsc-dev libptscotch-dev libsuitesparse-dev openmpi-bin pkg-config python-dev python-numpy python-scientific python-pip python-six python-vtk subversion swig wget bison libhwloc-dev python-ply libvtk5-dev python-netcdf libhdf5-openmpi-dev libeigen3-dev libcgal-dev unzip -yy )\n#   TODO: Parmetis, SLEPC, PETSc4py, PASTIX?\n#   Trilinos has been deprecated, for now.\n#   Sphinx is not necessary for this build.\n#   Install sympy using pip instead of Ubuntu packages, much smaller footprint.\nRUN pip install sympy==1.11.1\nRUN (apt-get update ;apt-get install --no-install-recommends python-software-properties -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends software-properties-common -y ) \\\n && add-apt-repository ppa:fenics-packages/fenics \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends fenics -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends cython python-h5py -y )\n#   Cleanup to save space\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Set the HOME environment variable, otherwise import dolfin crashes\n#  RUN echo \"/root\" > /etc/container_environment/HOME\n#   Enable X11 forwarding for plotting\n#   RUN echo \"X11Forwarding yes\" >> /etc/ssh/sshd_config\n#   Set LIBGL_ALWAYS_INDIRECT to suppress libGL warning message.\n#  RUN echo \"y\" > /etc/container_environment/LIBGL_ALWAYS_INDIRECT\n#   Put environment variables into\n#  RUN echo \"source /usr/local/share/dolfin/dolfin.conf\" >> /etc/bash.bashrc # not needed, causes errors\n#  ..................................................................................\n#   Install packages for StochSS\nRUN wget https://github.com/StochSS/stochss/archive/develop.tar.gz \\\n && tar xfz develop.tar.gz \\\n && mv stochss-develop stochss-master \\\n && cd stochss-master \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends curl -yy ) \\\n && (apt-get update ;apt-get install --no-install-recommends libbz2-dev -yy ) \\\n && (apt-get update ;apt-get install --no-install-recommends uuid-runtime libpng12-dev libffi-dev -yy ) \\\n && pip install python-libsbml==5.20.0 \\\n && pip install boto==2.49.0 \\\n && pip install celery==5.2.7 \\\n && pip install setuptools==67.6.1 --upgrade \\\n && pip install http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip \\\n && (apt-get update ;apt-get install --no-install-recommends gcc-multilib gcc g++ make libxml2-dev git r-base-core libgsl0-dev build-essential python-dev python-setuptools cython libbz2-dev vim docker libhdf5-mpi-dev -yy ) \\\n && pip install docker-py==1.10.6 -yy \\\n && chmod 777 run.ubuntu.sh \\\n && ./run.ubuntu.sh --install\n#  md5=3df394d89300db95163f17c843ef49df\nEXPOSE 8000/tcp\nEXPOSE 8080/tcp\nCMD [\"./stochss-master/run.ubuntu.sh\", \"-yy\", \"-a\", \"0.0.0.0\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# AUTHOR Aviral Takkar <aviraltakkar@cs.ucsb.edu>\nFROM phusion/baseimage:0.9.15\nMAINTAINER Aviral Takkar\nENV HOME=\"/root\"\nCMD [\"/sbin/my_init\"]\nRUN apt-get update\n#  RUN apt-get install -yy libxml2\n#  Install dependencies\nRUN apt-get install libxml2 cmake flex g++ gfortran git ipython libatlas-base-dev libboost-all-dev libcln-dev libcppunit-dev libeigen3-dev libginac-dev liblapack-dev libmpfr-dev libopenmpi-dev petsc-dev libptscotch-dev libsuitesparse-dev openmpi-bin pkg-config python-dev python-numpy python-scientific python-pip python-six python-vtk subversion swig wget bison libhwloc-dev python-ply libvtk5-dev python-netcdf libhdf5-openmpi-dev libeigen3-dev libcgal-dev unzip -yy\n#  TODO: Parmetis, SLEPC, PETSc4py, PASTIX?\n#  Trilinos has been deprecated, for now.\n#  Sphinx is not necessary for this build.\n#  Install sympy using pip instead of Ubuntu packages, much smaller footprint.\nRUN pip install sympy\nRUN apt-get install python-software-properties -y \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository ppa:fenics-packages/fenics \\\n && apt-get update \\\n && apt-get install fenics -y \\\n && apt-get install cython python-h5py -y\n#  Cleanup to save space\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Set the HOME environment variable, otherwise import dolfin crashes\n# RUN echo \"/root\" > /etc/container_environment/HOME\n#  Enable X11 forwarding for plotting\n#  RUN echo \"X11Forwarding yes\" >> /etc/ssh/sshd_config\n#  Set LIBGL_ALWAYS_INDIRECT to suppress libGL warning message.\n# RUN echo \"y\" > /etc/container_environment/LIBGL_ALWAYS_INDIRECT\n#  Put environment variables into\n# RUN echo \"source /usr/local/share/dolfin/dolfin.conf\" >> /etc/bash.bashrc # not needed, causes errors\n# ..................................................................................\n#  Install packages for StochSS\nRUN wget https://github.com/StochSS/stochss/archive/develop.tar.gz \\\n && tar xfz develop.tar.gz \\\n && mv stochss-develop stochss-master \\\n && cd stochss-master \\\n && apt-get update \\\n && apt-get install curl -yy \\\n && apt-get install libbz2-dev -yy \\\n && apt-get install uuid-runtime libpng12-dev libffi-dev -yy \\\n && pip install python-libsbml \\\n && pip install boto \\\n && pip install celery \\\n && pip install setuptools --upgrade \\\n && pip install http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip \\\n && apt-get install gcc-multilib gcc g++ make libxml2-dev git r-base-core libgsl0-dev build-essential python-dev python-setuptools cython libbz2-dev vim docker libhdf5-mpi-dev -yy \\\n && pip install docker-py -yy \\\n && chmod 777 run.ubuntu.sh \\\n && ./run.ubuntu.sh --install\n# md5=3df394d89300db95163f17c843ef49df\nEXPOSE 8000/tcp\nEXPOSE 8080/tcp\nCMD [\"./stochss-master/run.ubuntu.sh\", \"-yy\", \"-a\", \"0.0.0.0\"]\n","injectedSmells":[],"originalDockerfileHash":"7c56ecb62ca13cba28d07983ebe8aee3","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  AUTHOR Aviral Takkar <aviraltakkar@cs.ucsb.edu>\nFROM phusion/baseimage:0.9.15\nMAINTAINER Aviral Takkar\nENV HOME=\"/root\"\nCMD [\"/sbin/my_init\"]\nRUN apt-get update\n#   RUN apt-get install -yy libxml2\n#   Install dependencies\nRUN apt-get install libxml2 cmake flex g++ gfortran git ipython libatlas-base-dev libboost-all-dev libcln-dev libcppunit-dev libeigen3-dev libginac-dev liblapack-dev libmpfr-dev libopenmpi-dev petsc-dev libptscotch-dev libsuitesparse-dev openmpi-bin pkg-config python-dev python-numpy python-scientific python-pip python-six python-vtk subversion swig wget bison libhwloc-dev python-ply libvtk5-dev python-netcdf libhdf5-openmpi-dev libeigen3-dev libcgal-dev unzip -yy\n#   TODO: Parmetis, SLEPC, PETSc4py, PASTIX?\n#   Trilinos has been deprecated, for now.\n#   Sphinx is not necessary for this build.\n#   Install sympy using pip instead of Ubuntu packages, much smaller footprint.\nRUN pip install sympy\nRUN apt-get install python-software-properties -y \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository ppa:fenics-packages/fenics \\\n && apt-get update \\\n && apt-get install fenics -y \\\n && apt-get install cython python-h5py -y\n#   Cleanup to save space\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Set the HOME environment variable, otherwise import dolfin crashes\n#  RUN echo \"/root\" > /etc/container_environment/HOME\n#   Enable X11 forwarding for plotting\n#   RUN echo \"X11Forwarding yes\" >> /etc/ssh/sshd_config\n#   Set LIBGL_ALWAYS_INDIRECT to suppress libGL warning message.\n#  RUN echo \"y\" > /etc/container_environment/LIBGL_ALWAYS_INDIRECT\n#   Put environment variables into\n#  RUN echo \"source /usr/local/share/dolfin/dolfin.conf\" >> /etc/bash.bashrc # not needed, causes errors\n#  ..................................................................................\n#   Install packages for StochSS\nRUN wget https://github.com/StochSS/stochss/archive/develop.tar.gz \\\n && tar xfz develop.tar.gz \\\n && mv stochss-develop stochss-master \\\n && cd stochss-master \\\n && apt-get update \\\n && apt-get install curl -yy \\\n && apt-get install libbz2-dev -yy \\\n && apt-get install uuid-runtime libpng12-dev libffi-dev -yy \\\n && pip install python-libsbml \\\n && pip install boto \\\n && pip install celery \\\n && pip install setuptools --upgrade \\\n && pip install http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip \\\n && apt-get install gcc-multilib gcc g++ make libxml2-dev git r-base-core libgsl0-dev build-essential python-dev python-setuptools cython libbz2-dev vim docker libhdf5-mpi-dev -yy \\\n && pip install docker-py -yy \\\n && chmod 777 run.ubuntu.sh \\\n && ./run.ubuntu.sh --install\n#  md5=3df394d89300db95163f17c843ef49df\nEXPOSE 8000/tcp\nEXPOSE 8080/tcp\nCMD [\"./stochss-master/run.ubuntu.sh\", \"-yy\", \"-a\", \"0.0.0.0\"]\n","originalDockerfileUglifiedHash":"f86be84ba9de13f67a6e6821f0730dbb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a8fdee054b39979ead616e13771285b0691100ad.dockerfile"}