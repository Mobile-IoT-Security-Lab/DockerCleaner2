{"seed":460014964,"processedDockerfileHash":"7564544b392a9023d0ac0fd0156f7bda","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nARG BART_URL=https://github.com/mrirecon/bart\nARG BART_BRANCH=master\nRUN apt-get update --quiet \\\n && (apt-get update ;apt-get install --no-install-recommends software-properties-common --no-install-suggests --yes )\nRUN add-apt-repository ppa:lkoppel/ceres\nRUN apt-get update --quiet \\\n && (apt-get update ;apt-get install --no-install-recommends apt-utils wget build-essential emacs python-dev python-pip python3-dev python3-pip libhdf5-serial-dev cmake git-core libfftw3-dev h5utils jq libzmq-dev hdf5-tools liblapack-dev libxml2-dev libfreetype6-dev pkg-config libxslt-dev libace-dev gcc-multilib libgtest-dev python-dev liblapack-dev liblapacke-dev libopenblas-base libplplot-dev libdcmtk-dev libceres-dev libopenblas-dev supervisor net-tools cpio --no-install-suggests --yes )\n#  Update gcc to something remotely recent\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends gcc-6 g++-6 -y )\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 100 --slave /usr/bin/g++ g++ /usr/bin/g++-6\n#  Python stuff\nRUN pip install pip==23.1 --upgrade\nRUN pip install setuptools==67.6.1\nRUN pip install Cython==0.29.34\nRUN pip install numpy==1.24.2\nRUN pip install pyxb==1.2.6 psutil==5.9.4 lxml==4.9.2 pydicom==2.3.1\nRUN pip install 'h5py==2.5.0'\nRUN pip3 install --upgrade pip\nRUN pip3 install -U pip setuptools\nRUN (apt-get update ;apt-get install --no-install-recommends python3-psutil python3-pyxb python3-lxml python3-numpy --no-install-suggests --yes )\nRUN (apt-get update ;apt-get install --no-install-recommends python3-pil --no-install-suggests --yes )\nRUN (apt-get update ;apt-get install --no-install-recommends python3-configargparse --no-install-suggests --yes )\nRUN pip3 install Cython scipy tk-tools matplotlib scikit-image opencv_python pydicom scikit-learn\nRUN pip3 uninstall h5py\nRUN (apt-get update ;apt-get install --no-install-recommends python3-h5py -y )\nRUN pip3 install --upgrade tensorflow tensorflow-gpu\nRUN pip3 install torch torchvision\nRUN pip3 install tensorboardx visdom\n#   Compile boost\nRUN cd /opt \\\n && wget https://dl.bintray.com/boostorg/release/1.67.0/source/boost_1_67_0.tar.gz \\\n && tar -xzvf boost_1_67_0.tar.gz \\\n && cd boost_1_67_0 \\\n && ./bootstrap.sh --with-python=/usr/bin/python3 --prefix=/usr \\\n && ./b2 -j$( nproc ;) address-model=64 stage \\\n && ./b2 install\n#   since cmake has problems to find python3 and boost-python3\nRUN ln -s /usr/lib/libboost_python35.so /usr/lib/libboost_python3.so\n#   Compile armadillo\nRUN cd /opt \\\n && wget http://sourceforge.net/projects/arma/files/armadillo-8.600.0.tar.xz \\\n && tar xvf armadillo-8.600.0.tar.xz \\\n && cd armadillo-8.600.0 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release ../ \\\n && make -j$( nproc ;) \\\n && make install\n#   fix the  qhull reentrant problem\n#   RUN pip uninstall -y scipy\n#  ZFP\nRUN cd /opt \\\n && git clone https://github.com/hansenms/ZFP.git \\\n && cd ZFP \\\n && mkdir lib \\\n && make \\\n && make shared \\\n && make -j $( nproc ;) install\n#   BART\nRUN cd /opt/code \\\n && git clone ${BART_URL} --branch ${BART_BRANCH} --single-branch \\\n && cd bart \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DBART_FPIC=ON -DBART_ENABLE_MEM_CFL=ON -DBART_REDEFINE_PRINTF_FOR_TRACE=ON -DBART_LOG_BACKEND=ON -DBART_LOG_GADGETRON_BACKEND=ON \\\n && make -j $( nproc ;) \\\n && make install\n#  Set more environment variables in preparation for Gadgetron installation\nENV GADGETRON_HOME=\"/usr/local\" \\\n    ISMRMRD_HOME=\"/usr/local\"\nENV PATH=\"$PATH:$GADGETRON_HOME/bin:$ISMRMRD_HOME/bin\" \\\n    LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:$ISMRMRD_HOME/lib:$GADGETRON_HOME/lib\"\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#   Clean up packages.\n#  RUN  apt-get clean && \\\n#     rm -rf /var/lib/apt/lists/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nARG BART_URL=https://github.com/mrirecon/bart\nARG BART_BRANCH=master\nRUN apt-get update --quiet \\\n && apt-get install --no-install-recommends software-properties-common --no-install-suggests --yes\nRUN add-apt-repository ppa:lkoppel/ceres\nRUN apt-get update --quiet \\\n && apt-get install --no-install-recommends apt-utils wget build-essential emacs python-dev python-pip python3-dev python3-pip libhdf5-serial-dev cmake git-core libfftw3-dev h5utils jq libzmq-dev hdf5-tools liblapack-dev libxml2-dev libfreetype6-dev pkg-config libxslt-dev libace-dev gcc-multilib libgtest-dev python-dev liblapack-dev liblapacke-dev libopenblas-base libplplot-dev libdcmtk-dev libceres-dev libopenblas-dev supervisor net-tools cpio --no-install-suggests --yes\n# Update gcc to something remotely recent\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN apt-get update\nRUN apt-get install gcc-6 g++-6 -y\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 100 --slave /usr/bin/g++ g++ /usr/bin/g++-6\n# Python stuff\nRUN pip install pip --upgrade\nRUN pip install setuptools\nRUN pip install Cython\nRUN pip install numpy\nRUN pip install pyxb psutil lxml pydicom\nRUN pip install 'h5py==2.5.0'\nRUN pip3 install --upgrade pip\nRUN pip3 install -U pip setuptools\nRUN apt-get install --no-install-recommends python3-psutil python3-pyxb python3-lxml python3-numpy --no-install-suggests --yes\nRUN apt-get install --no-install-recommends python3-pil --no-install-suggests --yes\nRUN apt-get install --no-install-recommends python3-configargparse --no-install-suggests --yes\nRUN pip3 install Cython scipy tk-tools matplotlib scikit-image opencv_python pydicom scikit-learn\nRUN pip3 uninstall h5py\nRUN apt-get install python3-h5py -y\nRUN pip3 install --upgrade tensorflow tensorflow-gpu\nRUN pip3 install torch torchvision\nRUN pip3 install tensorboardx visdom\n#  Compile boost\nRUN cd /opt \\\n && wget https://dl.bintray.com/boostorg/release/1.67.0/source/boost_1_67_0.tar.gz \\\n && tar -xzvf boost_1_67_0.tar.gz \\\n && cd boost_1_67_0 \\\n && ./bootstrap.sh --with-python=/usr/bin/python3 --prefix=/usr \\\n && ./b2 -j$( nproc ;) address-model=64 stage \\\n && ./b2 install\n#  since cmake has problems to find python3 and boost-python3\nRUN ln -s /usr/lib/libboost_python35.so /usr/lib/libboost_python3.so\n#  Compile armadillo\nRUN cd /opt \\\n && wget http://sourceforge.net/projects/arma/files/armadillo-8.600.0.tar.xz \\\n && tar xvf armadillo-8.600.0.tar.xz \\\n && cd armadillo-8.600.0 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release ../ \\\n && make -j$( nproc ;) \\\n && make install\n#  fix the  qhull reentrant problem\n#  RUN pip uninstall -y scipy\n# ZFP\nRUN cd /opt \\\n && git clone https://github.com/hansenms/ZFP.git \\\n && cd ZFP \\\n && mkdir lib \\\n && make \\\n && make shared \\\n && make -j $( nproc ;) install\n#  BART\nRUN cd /opt/code \\\n && git clone ${BART_URL} --branch ${BART_BRANCH} --single-branch \\\n && cd bart \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DBART_FPIC=ON -DBART_ENABLE_MEM_CFL=ON -DBART_REDEFINE_PRINTF_FOR_TRACE=ON -DBART_LOG_BACKEND=ON -DBART_LOG_GADGETRON_BACKEND=ON \\\n && make -j $( nproc ;) \\\n && make install\n# Set more environment variables in preparation for Gadgetron installation\nENV GADGETRON_HOME=\"/usr/local\" \\\n    ISMRMRD_HOME=\"/usr/local\"\nENV PATH=\"$PATH:$GADGETRON_HOME/bin:$ISMRMRD_HOME/bin\" \\\n    LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:$ISMRMRD_HOME/lib:$GADGETRON_HOME/lib\"\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#  Clean up packages.\n# RUN  apt-get clean && \\\n#    rm -rf /var/lib/apt/lists/*\n","injectedSmells":[],"originalDockerfileHash":"04594d40fe56420996010c091b6b4574","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nARG BART_URL=https://github.com/mrirecon/bart\nARG BART_BRANCH=master\nRUN apt-get update --quiet \\\n && apt-get install --no-install-recommends software-properties-common --no-install-suggests --yes\nRUN add-apt-repository ppa:lkoppel/ceres\nRUN apt-get update --quiet \\\n && apt-get install --no-install-recommends apt-utils wget build-essential emacs python-dev python-pip python3-dev python3-pip libhdf5-serial-dev cmake git-core libfftw3-dev h5utils jq libzmq-dev hdf5-tools liblapack-dev libxml2-dev libfreetype6-dev pkg-config libxslt-dev libace-dev gcc-multilib libgtest-dev python-dev liblapack-dev liblapacke-dev libopenblas-base libplplot-dev libdcmtk-dev libceres-dev libopenblas-dev supervisor net-tools cpio --no-install-suggests --yes\n#  Update gcc to something remotely recent\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN apt-get update\nRUN apt-get install gcc-6 g++-6 -y\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 100 --slave /usr/bin/g++ g++ /usr/bin/g++-6\n#  Python stuff\nRUN pip install pip --upgrade\nRUN pip install setuptools\nRUN pip install Cython\nRUN pip install numpy\nRUN pip install pyxb psutil lxml pydicom\nRUN pip install 'h5py==2.5.0'\nRUN pip3 install --upgrade pip\nRUN pip3 install -U pip setuptools\nRUN apt-get install --no-install-recommends python3-psutil python3-pyxb python3-lxml python3-numpy --no-install-suggests --yes\nRUN apt-get install --no-install-recommends python3-pil --no-install-suggests --yes\nRUN apt-get install --no-install-recommends python3-configargparse --no-install-suggests --yes\nRUN pip3 install Cython scipy tk-tools matplotlib scikit-image opencv_python pydicom scikit-learn\nRUN pip3 uninstall h5py\nRUN apt-get install python3-h5py -y\nRUN pip3 install --upgrade tensorflow tensorflow-gpu\nRUN pip3 install torch torchvision\nRUN pip3 install tensorboardx visdom\n#   Compile boost\nRUN cd /opt \\\n && wget https://dl.bintray.com/boostorg/release/1.67.0/source/boost_1_67_0.tar.gz \\\n && tar -xzvf boost_1_67_0.tar.gz \\\n && cd boost_1_67_0 \\\n && ./bootstrap.sh --with-python=/usr/bin/python3 --prefix=/usr \\\n && ./b2 -j$( nproc ;) address-model=64 stage \\\n && ./b2 install\n#   since cmake has problems to find python3 and boost-python3\nRUN ln -s /usr/lib/libboost_python35.so /usr/lib/libboost_python3.so\n#   Compile armadillo\nRUN cd /opt \\\n && wget http://sourceforge.net/projects/arma/files/armadillo-8.600.0.tar.xz \\\n && tar xvf armadillo-8.600.0.tar.xz \\\n && cd armadillo-8.600.0 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release ../ \\\n && make -j$( nproc ;) \\\n && make install\n#   fix the  qhull reentrant problem\n#   RUN pip uninstall -y scipy\n#  ZFP\nRUN cd /opt \\\n && git clone https://github.com/hansenms/ZFP.git \\\n && cd ZFP \\\n && mkdir lib \\\n && make \\\n && make shared \\\n && make -j $( nproc ;) install\n#   BART\nRUN cd /opt/code \\\n && git clone ${BART_URL} --branch ${BART_BRANCH} --single-branch \\\n && cd bart \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DBART_FPIC=ON -DBART_ENABLE_MEM_CFL=ON -DBART_REDEFINE_PRINTF_FOR_TRACE=ON -DBART_LOG_BACKEND=ON -DBART_LOG_GADGETRON_BACKEND=ON \\\n && make -j $( nproc ;) \\\n && make install\n#  Set more environment variables in preparation for Gadgetron installation\nENV GADGETRON_HOME=\"/usr/local\" \\\n    ISMRMRD_HOME=\"/usr/local\"\nENV PATH=\"$PATH:$GADGETRON_HOME/bin:$ISMRMRD_HOME/bin\" \\\n    LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:$ISMRMRD_HOME/lib:$GADGETRON_HOME/lib\"\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#   Clean up packages.\n#  RUN  apt-get clean && \\\n#     rm -rf /var/lib/apt/lists/*\n","originalDockerfileUglifiedHash":"57ace2f12d9beeb31a11b8d5f226bfb0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/aa8b6d816e215bddd0daa8ee546c3628a657c0e2.dockerfile"}