{"seed":3147619368,"processedDockerfileHash":"cf7285e398d701efd8726579009209cd","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM jupyter/pyspark-notebook\nUSER root\n#   RSpark config\nENV R_LIBS_USER=\"$SPARK_HOME/R/lib\"\n#   R pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends fonts-dejavu=2.37-6 gfortran=4:12.2.0-3ubuntu1 gcc=4:12.2.0-3ubuntu1 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nUSER $NB_USER\nRUN conda config --add channels conda-forge\n#   R packages and nlu libraries\nRUN conda install --quiet --yes 'r-base=3.3.2' 'r-irkernel=0.7*' 'r-ggplot2=2.2*' 'r-sparklyr=0.5*' 'networkx=1.11' 'biopython=1.70' 'unidecode' 'leveldb' 'spacy' 'tensorflow' 'keras' 'r-rcurl=1.95*' \\\n && conda clean -tipsy\nUSER root\n#  download spacy's models for English\nRUN python -m spacy download en\nUSER $NB_USER\n#   Apache Toree kernel\nRUN pip install https://dist.apache.org/repos/dist/dev/incubator/toree/0.2.0/snapshots/dev1/toree-pip/toree-0.2.0.dev1.tar.gz --no-cache-dir\nRUN jupyter toree install --sys-prefix\n#   Spylon-kernel\nRUN conda install --quiet --yes 'spylon-kernel=0.4*' \\\n && conda clean -tipsy\nRUN python -m spylon_kernel install --sys-prefix\nRUN rm -r /home/$NB_USER/*\nCOPY *.* /home/$NB_USER/\nCOPY Solutions/* /home/$NB_USER/Solutions/\nCOPY QuickUMLS /home/$NB_USER/QuickUMLS\nRUN bash setup_simstring.sh 3\nUSER root\nRUN chown jovyan -R .\nRUN pip install leveldb==0.201\n#   RUN pip install unidecode\nUSER $NB_USER\nRUN cp -r simstring/ ~/QuickUMLS/\nUSER root\nCOPY pysparknlp-1.0.0.tar.gz /home/jovyan/\nCOPY demo-data /home/jovyan/demo-data\nCOPY strata-requirements.txt /home/jovyan/\nCOPY strata_notebooks/*.ipynb /home/jovyan/\nRUN ls -l /home/jovyan\nRUN sudo chown -R jovyan:users /home/jovyan\nRUN ls -l /home/jovyan\nUSER $NB_USER\nWORKDIR /home/jovyan/\nRUN pip install -r strata-requirements.txt\nRUN python -m nltk.downloader popular\nRUN tar -xzf pysparknlp-1.0.0.tar.gz\n#  RUN cd demo-data/ && for f in *.tar.gz; do tar -xzf $f; done\n#  RUN python3 ~/QuickUMLS/install.py ~/QuickUMLS/ ~/QuickUMLS/data\n#   RUN rm ~QuickUMLS/*.RRF\n#   docker tag cb9258ec4e02 melcutz/nlu\n#   docker login --username=melcutz\n#   docker push melcutz/nlu-demo\n#   docker build -t nlu-demo:latest .\n#   docker run -it --rm -p 8888:8888  nlu-demo\n#   docker images\n#   docker rmi --force imk\n#   docker exec --user root -it bdff5651bbc8 bash\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM jupyter/pyspark-notebook\nUSER root\n#  RSpark config\nENV R_LIBS_USER=\"$SPARK_HOME/R/lib\"\n#  R pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends fonts-dejavu gfortran gcc -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nUSER $NB_USER\nRUN conda config --add channels conda-forge\n#  R packages and nlu libraries\nRUN conda install --quiet --yes 'r-base=3.3.2' 'r-irkernel=0.7*' 'r-ggplot2=2.2*' 'r-sparklyr=0.5*' 'networkx=1.11' 'biopython=1.70' 'unidecode' 'leveldb' 'spacy' 'tensorflow' 'keras' 'r-rcurl=1.95*' \\\n && conda clean -tipsy\nUSER root\n# download spacy's models for English\nRUN python -m spacy download en\nUSER $NB_USER\n#  Apache Toree kernel\nRUN pip install https://dist.apache.org/repos/dist/dev/incubator/toree/0.2.0/snapshots/dev1/toree-pip/toree-0.2.0.dev1.tar.gz --no-cache-dir\nRUN jupyter toree install --sys-prefix\n#  Spylon-kernel\nRUN conda install --quiet --yes 'spylon-kernel=0.4*' \\\n && conda clean -tipsy\nRUN python -m spylon_kernel install --sys-prefix\nRUN rm -r /home/$NB_USER/*\nADD *.* /home/$NB_USER/\nADD Solutions/* /home/$NB_USER/Solutions/\nADD QuickUMLS /home/$NB_USER/QuickUMLS\nRUN bash setup_simstring.sh 3\nUSER root\nRUN chown jovyan -R .\nRUN pip install leveldb\n#  RUN pip install unidecode\nUSER $NB_USER\nRUN cp -r simstring/ ~/QuickUMLS/\nUSER root\nCOPY pysparknlp-1.0.0.tar.gz /home/jovyan/\nCOPY demo-data /home/jovyan/demo-data\nCOPY strata-requirements.txt /home/jovyan/\nCOPY strata_notebooks/*.ipynb /home/jovyan/\nRUN ls -l /home/jovyan\nRUN sudo chown -R jovyan:users /home/jovyan\nRUN ls -l /home/jovyan\nUSER $NB_USER\nWORKDIR /home/jovyan/\nRUN pip install -r strata-requirements.txt\nRUN python -m nltk.downloader popular\nRUN tar -xzf pysparknlp-1.0.0.tar.gz\n# RUN cd demo-data/ && for f in *.tar.gz; do tar -xzf $f; done\n# RUN python3 ~/QuickUMLS/install.py ~/QuickUMLS/ ~/QuickUMLS/data\n#  RUN rm ~QuickUMLS/*.RRF\n#  docker tag cb9258ec4e02 melcutz/nlu\n#  docker login --username=melcutz\n#  docker push melcutz/nlu-demo\n#  docker build -t nlu-demo:latest .\n#  docker run -it --rm -p 8888:8888  nlu-demo\n#  docker images\n#  docker rmi --force imk\n#  docker exec --user root -it bdff5651bbc8 bash\n","injectedSmells":[],"originalDockerfileHash":"6822854f7d4065b86379ab6fbb9cdc28","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM jupyter/pyspark-notebook\nUSER root\n#   RSpark config\nENV R_LIBS_USER=\"$SPARK_HOME/R/lib\"\n#   R pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends fonts-dejavu gfortran gcc -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nUSER $NB_USER\nRUN conda config --add channels conda-forge\n#   R packages and nlu libraries\nRUN conda install --quiet --yes 'r-base=3.3.2' 'r-irkernel=0.7*' 'r-ggplot2=2.2*' 'r-sparklyr=0.5*' 'networkx=1.11' 'biopython=1.70' 'unidecode' 'leveldb' 'spacy' 'tensorflow' 'keras' 'r-rcurl=1.95*' \\\n && conda clean -tipsy\nUSER root\n#  download spacy's models for English\nRUN python -m spacy download en\nUSER $NB_USER\n#   Apache Toree kernel\nRUN pip install https://dist.apache.org/repos/dist/dev/incubator/toree/0.2.0/snapshots/dev1/toree-pip/toree-0.2.0.dev1.tar.gz --no-cache-dir\nRUN jupyter toree install --sys-prefix\n#   Spylon-kernel\nRUN conda install --quiet --yes 'spylon-kernel=0.4*' \\\n && conda clean -tipsy\nRUN python -m spylon_kernel install --sys-prefix\nRUN rm -r /home/$NB_USER/*\nADD *.* /home/$NB_USER/\nADD Solutions/* /home/$NB_USER/Solutions/\nADD QuickUMLS /home/$NB_USER/QuickUMLS\nRUN bash setup_simstring.sh 3\nUSER root\nRUN chown jovyan -R .\nRUN pip install leveldb\n#   RUN pip install unidecode\nUSER $NB_USER\nRUN cp -r simstring/ ~/QuickUMLS/\nUSER root\nCOPY pysparknlp-1.0.0.tar.gz /home/jovyan/\nCOPY demo-data /home/jovyan/demo-data\nCOPY strata-requirements.txt /home/jovyan/\nCOPY strata_notebooks/*.ipynb /home/jovyan/\nRUN ls -l /home/jovyan\nRUN sudo chown -R jovyan:users /home/jovyan\nRUN ls -l /home/jovyan\nUSER $NB_USER\nWORKDIR /home/jovyan/\nRUN pip install -r strata-requirements.txt\nRUN python -m nltk.downloader popular\nRUN tar -xzf pysparknlp-1.0.0.tar.gz\n#  RUN cd demo-data/ && for f in *.tar.gz; do tar -xzf $f; done\n#  RUN python3 ~/QuickUMLS/install.py ~/QuickUMLS/ ~/QuickUMLS/data\n#   RUN rm ~QuickUMLS/*.RRF\n#   docker tag cb9258ec4e02 melcutz/nlu\n#   docker login --username=melcutz\n#   docker push melcutz/nlu-demo\n#   docker build -t nlu-demo:latest .\n#   docker run -it --rm -p 8888:8888  nlu-demo\n#   docker images\n#   docker rmi --force imk\n#   docker exec --user root -it bdff5651bbc8 bash\n","originalDockerfileUglifiedHash":"0b97f11a7fd9a4861b9dfabc5e061e27","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cba4c5f55c9db278510775b4be1589cf7656b4b8.dockerfile"}