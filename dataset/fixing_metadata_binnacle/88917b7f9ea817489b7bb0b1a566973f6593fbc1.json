{"seed":2285305462,"processedDockerfileHash":"946bb4a9374e59b6b138ce5cf360e5c8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.7\nMAINTAINER theslydetector@gmail.com\n#   Configure Timezone\nENV TIMEZONE=\"\\\"America/Chicago\\\"\"\nRUN rm -f /etc/localtime \\\n && ln -s \"/usr/share/zoneinfo/${TIMEZONE}\" /etc/localtime \\\n && echo \"${TIMEZONE}\" > /etc/timezone\nRUN apk add bash=4.4.19-r1 bwm-ng=0.6.1-r3 coreutils=8.28-r0 curl=7.61.1-r3 ffmpeg=3.4-r1 file=5.32-r2 findutils=4.6.0-r0 git=2.15.4-r0 htop=2.0.2-r0 iproute2=4.13.0-r0 lame=3.100-r0 less=520-r0 make=4.2.1-r0 mariadb-client=10.1.41-r0 memcached=1.5.6-r0 musl=1.1.18-r4 nginx=1.12.2-r4 p7zip=16.02-r3 php7-ctype=7.1.33-r0 php7-curl=7.1.33-r0 php7-dev=7.1.33-r0 php7-exif=7.1.33-r0 php7-fpm=7.1.33-r0 php7-gd=7.1.33-r0 php7-iconv=7.1.33-r0 php7-imagick=3.4.3-r3 php7-json=7.1.33-r0 php7-mcrypt=7.1.33-r0 php7-opcache=7.1.33-r0 php7-openssl=7.1.33-r0 php7-pcntl=7.1.33-r0 php7-pdo=7.1.33-r0 php7-pdo_mysql=7.1.33-r0 php7-pear=7.1.33-r0 php7-phar=7.1.33-r0 php7-posix=7.1.33-r0 php7-redis=3.1.4-r0 php7-session=7.1.33-r0 php7-simplexml=7.1.33-r0 php7-sockets=7.1.33-r0 php7-xmlwriter=7.1.33-r0 php7-zlib pigz=2.3.4-r2 proxychains-ng=4.12-r0 pstree=2.39-r0 py2-pip=9.0.1-r1 python s6=2.6.1.1-r0 strace=4.19-r0 tar=1.32-r0 tig=2.3.0-r0 tree=1.7.0-r1 tzdata=2019c-r0 unrar=5.5.8-r0 unzip=6.0-r3 util-linux=2.31.1-r0 vim=8.0.1359-r2 wget=1.20.3-r0 zendframework=2.4.13-r0 --update \\\n && rm -rf /var/cache/apk/*\n#   vnstat in testing repo\n#   mytop + deps\nRUN apk add mariadb=10.1.41-r0 perl=5.26.3-r0 perl-dbd-mysql=4.043-r0 perl-term-readkey=2.37-r1 --update \\\n && rm -rf /var/cache/apk/*\n#   Install composer\nRUN curl https://getcomposer.org/installer | php7 -- --install-dir=/usr/bin --filename=composer\n#   Build and install mediainfo\nENV MEDIAINFO_VERSION=\"18.05\"\nRUN apk add gcc=6.4.0-r5 g++=6.4.0-r5 --update \\\n && mkdir -p /tmp \\\n && cd /tmp \\\n && curl -s -o mediainfo.tar.gz https://mediaarea.net/download/binary/mediainfo/${MEDIAINFO_VERSION}/MediaInfo_CLI_${MEDIAINFO_VERSION}_GNU_FromSource.tar.gz \\\n && tar xzvf mediainfo.tar.gz \\\n && cd MediaInfo_CLI_GNU_FromSource \\\n && ./CLI_Compile.sh \\\n && cd MediaInfo/Project/GNU/CLI \\\n && make install \\\n && cd / \\\n && rm -rf /tmp \\\n && apk del --purge gcc g++ \\\n && rm -rf /var/cache/apk/*\n#   Install Python MySQL Modules\nRUN pip install pip==23.1 --upgrade \\\n && pip install setuptools==67.6.1 --upgrade \\\n && pip install cymysql==0.9.18 pynntp==1.0.2 socketpool==0.5.3\n#   Configure PHP\nRUN sed -ri 's/(max_execution_time =) ([0-9]+)/\\1 120/' /etc/php7/php.ini \\\n && sed -ri \"s/(memory_limit =) (.*$)/\\1 -1/\" /etc/php7/php.ini \\\n && sed -ri 's/;(date.timezone =)/\\1 America\\/Chicago/' /etc/php7/php.ini \\\n && sed -ri 's/listen\\s*=\\s*127.0.0.1:9000/listen = 9000/g' /etc/php7/php-fpm.d/www.conf \\\n && sed -ri 's|;include_path = \".:/php/includes\"|include_path = \".:/usr/share/php7\"|g' /etc/php7/php.ini \\\n && mkdir -p /var/log/php-fpm/\n#   Install and configure nginx.\nRUN mkdir -p /var/log/nginx \\\n && mkdir -p /etc/nginx \\\n && mkdir -p /tmp/nginx \\\n && chmod 755 /var/log/nginx \\\n && chmod 777 /tmp \\\n && touch /var/log/nginx/nginx-error.log\n#   Clone nZEDb and set directory permissions\nENV NZEDB_VERSION=\"\\\"v0.8.7.0\\\"\"\nRUN mkdir -p /var/www \\\n && cd /var/www \\\n && git clone https://github.com/nZEDb/nZEDb.git \\\n && cd /var/www/nZEDb \\\n && git checkout --quiet --force $NZEDB_VERSION \\\n && composer install \\\n && chmod -R 777 /var/www/nZEDb/ \\\n && find . -name \".git\" -type d | grep -v \"\\.\\/\\.git\" | xargs rm -rf \\\n && composer clear-cache\n#   Build tmux 2.0 since tmux 2.2 has issues: https://github.com/nZEDb/nZEDb/issues/2182 \nENV TMUX_VERSION=\"2.0\"\nRUN apk add gcc=6.4.0-r5 g++=6.4.0-r5 ncurses-dev=6.0_p20171125-r1 libevent-dev=2.1.8-r2 bsd-compat-headers=0.7.1-r0 --update \\\n && mkdir -p /tmp/tmux \\\n && cd /tmp/tmux \\\n && curl --location -o tmux.tar.gz https://github.com/tmux/tmux/releases/download/${TMUX_VERSION}/tmux-${TMUX_VERSION}.tar.gz \\\n && tar xzvf tmux.tar.gz \\\n && cd tmux-${TMUX_VERSION} \\\n && ./configure --prefix /usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/tmux \\\n && apk del --purge gcc g++ ncurses-dev libevent-dev bsd-compat-headers \\\n && rm -rf /var/cache/apk/*\n#   Build and install php-yenc\nENV PHP_ZEPHIR_PARSER_VERSION=\"v1.1.2\"\nRUN cd /tmp \\\n && apk add gcc=6.4.0-r5 re2c=1.0.2-r0 libc-dev=0.7.1-r0 sudo=1.8.21_p2-r1 --update \\\n && mkdir -p /tmp/zephir \\\n && cd /tmp/zephir \\\n && composer require phalcon/zephir \\\n && cd /tmp \\\n && git clone git://github.com/phalcon/php-zephir-parser.git \\\n && cd php-zephir-parser \\\n && git checkout --quiet --force $PHP_ZEPHIR_PARSER_VERSION \\\n && ./install \\\n && echo \"extension=zephir_parser.so\" > /etc/php7/conf.d/98_zephir_parser.ini \\\n && cd /tmp \\\n && git clone https://github.com/niel/php-yenc.git \\\n && cd php-yenc \\\n && /tmp/zephir/vendor/bin/zephir install \\\n && echo \"extension=yenc.so\" > /etc/php7/conf.d/99_yenc.ini \\\n && composer clear-cache \\\n && cd /tmp \\\n && rm -rf zephir php-yenc php-zephir-parser \\\n && apk del --purge gcc re2c libc-dev sudo\n#   Build and install par2\nENV PAR2_VERSION=\"\\\"v0.8.0\\\"\"\nRUN apk add gcc=6.4.0-r5 autoconf=2.69-r0 automake=1.15.1-r0 g++=6.4.0-r5 python-dev openssl-dev=1.0.2t-r0 libffi-dev=3.2.1-r4 --update \\\n && git clone https://github.com/Parchive/par2cmdline.git /tmp/par2 \\\n && cd /tmp/par2 \\\n && git checkout --quiet --force $PAR2_VERSION \\\n && ./automake.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/par2 \\\n && apk del --purge automake gcc autoconf g++ python-dev openssl-dev libffi-dev \\\n && apk add libgomp=6.4.0-r5\n#   Create dir for importing nzbs\nRUN mkdir -p /var/www/nZEDb/resources/import\n#   Switch out php executable to instrument invocations\nRUN mv /usr/bin/php /usr/bin/php.real\nCOPY php.proxy /usr/bin/php\n#   Use pigz (parallel gzip) instead of gzip to speed up db backups\nRUN mv /bin/gzip /bin/gzip.real \\\n && ln -s /usr/bin/pigz /bin/gzip\n#   iconv has issues in musl which affects NFO conversion to include\n#   cool ascii chars. Remove the problematic parts - TRANSLIT and IGNORE\n#   See https://github.com/slydetector/simply-nzedb/issues/31\nRUN sed -i \"s|UTF-8//IGNORE//TRANSLIT|UTF-8|g\" /var/www/nZEDb/nzedb/utility/Text.php\nLABEL nzedb=\"$NZEDB_VERSION\" \\\n      maintainer=\"theslydetector@gmail.com\" \\\n      url=\"https://github.com/slydetector/simply-nzedb\"\nRUN mkdir -p /var/www/nZEDb/resources/tmp \\\n && chmod 777 /var/www/nZEDb/resources/tmp\nENV TERM=\"tmux\"\nEXPOSE 8800/tcp\nCOPY s6 /etc/s6\nCMD [\"/bin/s6-svscan\", \"/etc/s6\"]\nWORKDIR /var/www/nZEDb/misc/update\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.7\nMAINTAINER theslydetector@gmail.com\n#  Configure Timezone\nENV TIMEZONE=\"\\\"America/Chicago\\\"\"\nRUN rm -f /etc/localtime \\\n && ln -s \"/usr/share/zoneinfo/${TIMEZONE}\" /etc/localtime \\\n && echo \"${TIMEZONE}\" > /etc/timezone\nRUN apk add --update bash bwm-ng coreutils curl ffmpeg file findutils git htop iproute2 lame less make mariadb-client memcached musl nginx p7zip php7-ctype php7-curl php7-dev php7-exif php7-fpm php7-gd php7-iconv php7-imagick php7-json php7-mcrypt php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pear php7-phar php7-posix php7-redis php7-session php7-simplexml php7-sockets php7-xmlwriter php7-zlib pigz proxychains-ng pstree py2-pip python s6 strace tar tig tree tzdata unrar unzip util-linux vim wget zendframework \\\n && rm -rf /var/cache/apk/*\n#  vnstat in testing repo\n#  mytop + deps\nRUN apk add --update mariadb perl perl-dbd-mysql perl-term-readkey \\\n && rm -rf /var/cache/apk/*\n#  Install composer\nRUN curl https://getcomposer.org/installer | php7 -- --install-dir=/usr/bin --filename=composer\n#  Build and install mediainfo\nENV MEDIAINFO_VERSION=\"18.05\"\nRUN apk --update add gcc g++ \\\n && mkdir -p /tmp \\\n && cd /tmp \\\n && curl -s -o mediainfo.tar.gz https://mediaarea.net/download/binary/mediainfo/${MEDIAINFO_VERSION}/MediaInfo_CLI_${MEDIAINFO_VERSION}_GNU_FromSource.tar.gz \\\n && tar xzvf mediainfo.tar.gz \\\n && cd MediaInfo_CLI_GNU_FromSource \\\n && ./CLI_Compile.sh \\\n && cd MediaInfo/Project/GNU/CLI \\\n && make install \\\n && cd / \\\n && rm -rf /tmp \\\n && apk del --purge gcc g++ \\\n && rm -rf /var/cache/apk/*\n#  Install Python MySQL Modules\nRUN pip install pip --upgrade \\\n && pip install setuptools --upgrade \\\n && pip install cymysql pynntp socketpool\n#  Configure PHP\nRUN sed -ri 's/(max_execution_time =) ([0-9]+)/\\1 120/' /etc/php7/php.ini \\\n && sed -ri \"s/(memory_limit =) (.*$)/\\1 -1/\" /etc/php7/php.ini \\\n && sed -ri 's/;(date.timezone =)/\\1 America\\/Chicago/' /etc/php7/php.ini \\\n && sed -ri 's/listen\\s*=\\s*127.0.0.1:9000/listen = 9000/g' /etc/php7/php-fpm.d/www.conf \\\n && sed -ri 's|;include_path = \".:/php/includes\"|include_path = \".:/usr/share/php7\"|g' /etc/php7/php.ini \\\n && mkdir -p /var/log/php-fpm/\n#  Install and configure nginx.\nRUN mkdir -p /var/log/nginx \\\n && mkdir -p /etc/nginx \\\n && mkdir -p /tmp/nginx \\\n && chmod 755 /var/log/nginx \\\n && chmod 777 /tmp \\\n && touch /var/log/nginx/nginx-error.log\n#  Clone nZEDb and set directory permissions\nENV NZEDB_VERSION=\"\\\"v0.8.7.0\\\"\"\nRUN mkdir -p /var/www \\\n && cd /var/www \\\n && git clone https://github.com/nZEDb/nZEDb.git \\\n && cd /var/www/nZEDb \\\n && git checkout --quiet --force $NZEDB_VERSION \\\n && composer install \\\n && chmod -R 777 /var/www/nZEDb/ \\\n && find . -name \".git\" -type d | grep -v \"\\.\\/\\.git\" | xargs rm -rf \\\n && composer clear-cache\n#  Build tmux 2.0 since tmux 2.2 has issues: https://github.com/nZEDb/nZEDb/issues/2182 \nENV TMUX_VERSION=\"2.0\"\nRUN apk --update add gcc g++ ncurses-dev libevent-dev bsd-compat-headers \\\n && mkdir -p /tmp/tmux \\\n && cd /tmp/tmux \\\n && curl --location -o tmux.tar.gz https://github.com/tmux/tmux/releases/download/${TMUX_VERSION}/tmux-${TMUX_VERSION}.tar.gz \\\n && tar xzvf tmux.tar.gz \\\n && cd tmux-${TMUX_VERSION} \\\n && ./configure --prefix /usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/tmux \\\n && apk del --purge gcc g++ ncurses-dev libevent-dev bsd-compat-headers \\\n && rm -rf /var/cache/apk/*\n#  Build and install php-yenc\nENV PHP_ZEPHIR_PARSER_VERSION=\"v1.1.2\"\nRUN cd /tmp \\\n && apk --update add gcc re2c libc-dev sudo \\\n && mkdir -p /tmp/zephir \\\n && cd /tmp/zephir \\\n && composer require phalcon/zephir \\\n && cd /tmp \\\n && git clone git://github.com/phalcon/php-zephir-parser.git \\\n && cd php-zephir-parser \\\n && git checkout --quiet --force $PHP_ZEPHIR_PARSER_VERSION \\\n && ./install \\\n && echo \"extension=zephir_parser.so\" > /etc/php7/conf.d/98_zephir_parser.ini \\\n && cd /tmp \\\n && git clone https://github.com/niel/php-yenc.git \\\n && cd php-yenc \\\n && /tmp/zephir/vendor/bin/zephir install \\\n && echo \"extension=yenc.so\" > /etc/php7/conf.d/99_yenc.ini \\\n && composer clear-cache \\\n && cd /tmp \\\n && rm -rf zephir php-yenc php-zephir-parser \\\n && apk del --purge gcc re2c libc-dev sudo\n#  Build and install par2\nENV PAR2_VERSION=\"\\\"v0.8.0\\\"\"\nRUN apk --update add gcc autoconf automake g++ python-dev openssl-dev libffi-dev \\\n && git clone https://github.com/Parchive/par2cmdline.git /tmp/par2 \\\n && cd /tmp/par2 \\\n && git checkout --quiet --force $PAR2_VERSION \\\n && ./automake.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/par2 \\\n && apk del --purge automake gcc autoconf g++ python-dev openssl-dev libffi-dev \\\n && apk add libgomp\n#  Create dir for importing nzbs\nRUN mkdir -p /var/www/nZEDb/resources/import\n#  Switch out php executable to instrument invocations\nRUN mv /usr/bin/php /usr/bin/php.real\nCOPY php.proxy /usr/bin/php\n#  Use pigz (parallel gzip) instead of gzip to speed up db backups\nRUN mv /bin/gzip /bin/gzip.real \\\n && ln -s /usr/bin/pigz /bin/gzip\n#  iconv has issues in musl which affects NFO conversion to include\n#  cool ascii chars. Remove the problematic parts - TRANSLIT and IGNORE\n#  See https://github.com/slydetector/simply-nzedb/issues/31\nRUN sed -i \"s|UTF-8//IGNORE//TRANSLIT|UTF-8|g\" /var/www/nZEDb/nzedb/utility/Text.php\nLABEL nzedb=\"$NZEDB_VERSION\" \\\n      maintainer=\"theslydetector@gmail.com\" \\\n      url=\"https://github.com/slydetector/simply-nzedb\"\nRUN mkdir -p /var/www/nZEDb/resources/tmp \\\n && chmod 777 /var/www/nZEDb/resources/tmp\nENV TERM=\"tmux\"\nEXPOSE 8800/tcp\nADD s6 /etc/s6\nCMD [\"/bin/s6-svscan\", \"/etc/s6\"]\nWORKDIR /var/www/nZEDb/misc/update\n","injectedSmells":[],"originalDockerfileHash":"258f4ed1953880ca4910b8278836fe76","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.7\nMAINTAINER theslydetector@gmail.com\n#   Configure Timezone\nENV TIMEZONE=\"\\\"America/Chicago\\\"\"\nRUN rm -f /etc/localtime \\\n && ln -s \"/usr/share/zoneinfo/${TIMEZONE}\" /etc/localtime \\\n && echo \"${TIMEZONE}\" > /etc/timezone\nRUN apk add --update bash bwm-ng coreutils curl ffmpeg file findutils git htop iproute2 lame less make mariadb-client memcached musl nginx p7zip php7-ctype php7-curl php7-dev php7-exif php7-fpm php7-gd php7-iconv php7-imagick php7-json php7-mcrypt php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pear php7-phar php7-posix php7-redis php7-session php7-simplexml php7-sockets php7-xmlwriter php7-zlib pigz proxychains-ng pstree py2-pip python s6 strace tar tig tree tzdata unrar unzip util-linux vim wget zendframework \\\n && rm -rf /var/cache/apk/*\n#   vnstat in testing repo\n#   mytop + deps\nRUN apk add --update mariadb perl perl-dbd-mysql perl-term-readkey \\\n && rm -rf /var/cache/apk/*\n#   Install composer\nRUN curl https://getcomposer.org/installer | php7 -- --install-dir=/usr/bin --filename=composer\n#   Build and install mediainfo\nENV MEDIAINFO_VERSION=\"18.05\"\nRUN apk --update add gcc g++ \\\n && mkdir -p /tmp \\\n && cd /tmp \\\n && curl -s -o mediainfo.tar.gz https://mediaarea.net/download/binary/mediainfo/${MEDIAINFO_VERSION}/MediaInfo_CLI_${MEDIAINFO_VERSION}_GNU_FromSource.tar.gz \\\n && tar xzvf mediainfo.tar.gz \\\n && cd MediaInfo_CLI_GNU_FromSource \\\n && ./CLI_Compile.sh \\\n && cd MediaInfo/Project/GNU/CLI \\\n && make install \\\n && cd / \\\n && rm -rf /tmp \\\n && apk del --purge gcc g++ \\\n && rm -rf /var/cache/apk/*\n#   Install Python MySQL Modules\nRUN pip install pip --upgrade \\\n && pip install setuptools --upgrade \\\n && pip install cymysql pynntp socketpool\n#   Configure PHP\nRUN sed -ri 's/(max_execution_time =) ([0-9]+)/\\1 120/' /etc/php7/php.ini \\\n && sed -ri \"s/(memory_limit =) (.*$)/\\1 -1/\" /etc/php7/php.ini \\\n && sed -ri 's/;(date.timezone =)/\\1 America\\/Chicago/' /etc/php7/php.ini \\\n && sed -ri 's/listen\\s*=\\s*127.0.0.1:9000/listen = 9000/g' /etc/php7/php-fpm.d/www.conf \\\n && sed -ri 's|;include_path = \".:/php/includes\"|include_path = \".:/usr/share/php7\"|g' /etc/php7/php.ini \\\n && mkdir -p /var/log/php-fpm/\n#   Install and configure nginx.\nRUN mkdir -p /var/log/nginx \\\n && mkdir -p /etc/nginx \\\n && mkdir -p /tmp/nginx \\\n && chmod 755 /var/log/nginx \\\n && chmod 777 /tmp \\\n && touch /var/log/nginx/nginx-error.log\n#   Clone nZEDb and set directory permissions\nENV NZEDB_VERSION=\"\\\"v0.8.7.0\\\"\"\nRUN mkdir -p /var/www \\\n && cd /var/www \\\n && git clone https://github.com/nZEDb/nZEDb.git \\\n && cd /var/www/nZEDb \\\n && git checkout --quiet --force $NZEDB_VERSION \\\n && composer install \\\n && chmod -R 777 /var/www/nZEDb/ \\\n && find . -name \".git\" -type d | grep -v \"\\.\\/\\.git\" | xargs rm -rf \\\n && composer clear-cache\n#   Build tmux 2.0 since tmux 2.2 has issues: https://github.com/nZEDb/nZEDb/issues/2182 \nENV TMUX_VERSION=\"2.0\"\nRUN apk --update add gcc g++ ncurses-dev libevent-dev bsd-compat-headers \\\n && mkdir -p /tmp/tmux \\\n && cd /tmp/tmux \\\n && curl --location -o tmux.tar.gz https://github.com/tmux/tmux/releases/download/${TMUX_VERSION}/tmux-${TMUX_VERSION}.tar.gz \\\n && tar xzvf tmux.tar.gz \\\n && cd tmux-${TMUX_VERSION} \\\n && ./configure --prefix /usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/tmux \\\n && apk del --purge gcc g++ ncurses-dev libevent-dev bsd-compat-headers \\\n && rm -rf /var/cache/apk/*\n#   Build and install php-yenc\nENV PHP_ZEPHIR_PARSER_VERSION=\"v1.1.2\"\nRUN cd /tmp \\\n && apk --update add gcc re2c libc-dev sudo \\\n && mkdir -p /tmp/zephir \\\n && cd /tmp/zephir \\\n && composer require phalcon/zephir \\\n && cd /tmp \\\n && git clone git://github.com/phalcon/php-zephir-parser.git \\\n && cd php-zephir-parser \\\n && git checkout --quiet --force $PHP_ZEPHIR_PARSER_VERSION \\\n && ./install \\\n && echo \"extension=zephir_parser.so\" > /etc/php7/conf.d/98_zephir_parser.ini \\\n && cd /tmp \\\n && git clone https://github.com/niel/php-yenc.git \\\n && cd php-yenc \\\n && /tmp/zephir/vendor/bin/zephir install \\\n && echo \"extension=yenc.so\" > /etc/php7/conf.d/99_yenc.ini \\\n && composer clear-cache \\\n && cd /tmp \\\n && rm -rf zephir php-yenc php-zephir-parser \\\n && apk del --purge gcc re2c libc-dev sudo\n#   Build and install par2\nENV PAR2_VERSION=\"\\\"v0.8.0\\\"\"\nRUN apk --update add gcc autoconf automake g++ python-dev openssl-dev libffi-dev \\\n && git clone https://github.com/Parchive/par2cmdline.git /tmp/par2 \\\n && cd /tmp/par2 \\\n && git checkout --quiet --force $PAR2_VERSION \\\n && ./automake.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd / \\\n && rm -rf /tmp/par2 \\\n && apk del --purge automake gcc autoconf g++ python-dev openssl-dev libffi-dev \\\n && apk add libgomp\n#   Create dir for importing nzbs\nRUN mkdir -p /var/www/nZEDb/resources/import\n#   Switch out php executable to instrument invocations\nRUN mv /usr/bin/php /usr/bin/php.real\nCOPY php.proxy /usr/bin/php\n#   Use pigz (parallel gzip) instead of gzip to speed up db backups\nRUN mv /bin/gzip /bin/gzip.real \\\n && ln -s /usr/bin/pigz /bin/gzip\n#   iconv has issues in musl which affects NFO conversion to include\n#   cool ascii chars. Remove the problematic parts - TRANSLIT and IGNORE\n#   See https://github.com/slydetector/simply-nzedb/issues/31\nRUN sed -i \"s|UTF-8//IGNORE//TRANSLIT|UTF-8|g\" /var/www/nZEDb/nzedb/utility/Text.php\nLABEL nzedb=\"$NZEDB_VERSION\" \\\n      maintainer=\"theslydetector@gmail.com\" \\\n      url=\"https://github.com/slydetector/simply-nzedb\"\nRUN mkdir -p /var/www/nZEDb/resources/tmp \\\n && chmod 777 /var/www/nZEDb/resources/tmp\nENV TERM=\"tmux\"\nEXPOSE 8800/tcp\nADD s6 /etc/s6\nCMD [\"/bin/s6-svscan\", \"/etc/s6\"]\nWORKDIR /var/www/nZEDb/misc/update\n","originalDockerfileUglifiedHash":"1d971b26180c8c0a72cc5603888da66a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/88917b7f9ea817489b7bb0b1a566973f6593fbc1.dockerfile"}