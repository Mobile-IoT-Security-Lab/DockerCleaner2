{"seed":233169327,"processedDockerfileHash":"7a96359569d327d0f902ae60fa1f72a1","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile for busybox+git using buildroot\nFROM radial/distro:us-west-1\nMAINTAINER Brian Clements <radial@brianclements.net>\n#   Install packages\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -q \\\n && apt-get install --no-install-recommends wget build-essential libncurses-dev rsync unzip bc gnupg python libc6-i386 -qyV\nRUN env --unset=DEBIAN_FRONTEND\n#   Create directories\nRUN mkdir -p /tmp/builder\nWORKDIR /tmp/builder\n#   Retrieve files and check authenticity\nENV BR_VERSION=\"2014.02\"\nRUN wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz \\\n && wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz.sign \\\n && wget -nv http://uclibc.org/~jacmet/pubkey.gpg \\\n && gpg --import pubkey.gpg \\\n && gpg --verify buildroot-$BR_VERSION.tar.gz.sign\n#   Extract\nRUN tar -zxf buildroot-$BR_VERSION.tar.gz \\\n && mv buildroot-$BR_VERSION buildroot\nWORKDIR /tmp/builder/buildroot\n#   Add config\nCOPY buildroot-config /tmp/builder/buildroot/.config\n#   Reformat config and prep for make            \nRUN make oldconfig\n#   Make\nRUN make --quiet\n#   Done!\nRUN cp /tmp/builder/buildroot/output/images/rootfs.tar /tmp/rootfs.tar\n#   Remove duplicate binaries, perl, and python scripts in git-suite and other\n#   uneeded git files to bring down the image size. Reasoning and method\n#   described here:\n#   https://github.com/radial/core-busyboxplus/issues/2#issuecomment-42120299\nRUN mkdir /tmp/rootfs \\\n && tar -C /tmp/rootfs -pxf /tmp/rootfs.tar\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-daemon git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-merge-base git-merge-file git-merge-index git-merge-ours git-merge-recursive git-merge-subtree git-merge-tree git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-receive-pack git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /tmp/rootfs/usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /tmp/rootfs/usr/share\nRUN rm -rf gitweb locale\nWORKDIR /tmp/rootfs\nRUN tar -pcf ../rootfs.tar .\n#   Done!\nWORKDIR /tmp\nRUN md5sum rootfs.tar > rootfs.tar.md5\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile for busybox+git using buildroot\nFROM radial/distro:us-west-1\nMAINTAINER Brian Clements <radial@brianclements.net>\n#  Install packages\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -q \\\n && apt-get install wget build-essential libncurses-dev rsync unzip bc gnupg python libc6-i386 -qyV\nRUN env --unset=DEBIAN_FRONTEND\n#  Create directories\nRUN mkdir -p /tmp/builder\nWORKDIR /tmp/builder\n#  Retrieve files and check authenticity\nENV BR_VERSION=\"2014.02\"\nRUN wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz \\\n && wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz.sign \\\n && wget -nv http://uclibc.org/~jacmet/pubkey.gpg \\\n && gpg --import pubkey.gpg \\\n && gpg --verify buildroot-$BR_VERSION.tar.gz.sign\n#  Extract\nRUN tar -zxf buildroot-$BR_VERSION.tar.gz \\\n && mv buildroot-$BR_VERSION buildroot\nWORKDIR /tmp/builder/buildroot\n#  Add config\nADD buildroot-config /tmp/builder/buildroot/.config\n#  Reformat config and prep for make            \nRUN make oldconfig\n#  Make\nRUN make --quiet\n#  Done!\nRUN cp /tmp/builder/buildroot/output/images/rootfs.tar /tmp/rootfs.tar\n#  Remove duplicate binaries, perl, and python scripts in git-suite and other\n#  uneeded git files to bring down the image size. Reasoning and method\n#  described here:\n#  https://github.com/radial/core-busyboxplus/issues/2#issuecomment-42120299\nRUN mkdir /tmp/rootfs \\\n && tar -C /tmp/rootfs -pxf /tmp/rootfs.tar\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-daemon git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-merge-base git-merge-file git-merge-index git-merge-ours git-merge-recursive git-merge-subtree git-merge-tree git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-receive-pack git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /tmp/rootfs/usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /tmp/rootfs/usr/share\nRUN rm -rf gitweb locale\nWORKDIR /tmp/rootfs\nRUN tar -pcf ../rootfs.tar .\n#  Done!\nWORKDIR /tmp\nRUN md5sum rootfs.tar > rootfs.tar.md5\n","injectedSmells":[],"originalDockerfileHash":"d4a36fb1d48fe3a388b0fc3f0de5e1af","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile for busybox+git using buildroot\nFROM radial/distro:us-west-1\nMAINTAINER Brian Clements <radial@brianclements.net>\n#   Install packages\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -q \\\n && apt-get install wget build-essential libncurses-dev rsync unzip bc gnupg python libc6-i386 -qyV\nRUN env --unset=DEBIAN_FRONTEND\n#   Create directories\nRUN mkdir -p /tmp/builder\nWORKDIR /tmp/builder\n#   Retrieve files and check authenticity\nENV BR_VERSION=\"2014.02\"\nRUN wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz \\\n && wget -nv http://buildroot.uclibc.org/downloads/buildroot-$BR_VERSION.tar.gz.sign \\\n && wget -nv http://uclibc.org/~jacmet/pubkey.gpg \\\n && gpg --import pubkey.gpg \\\n && gpg --verify buildroot-$BR_VERSION.tar.gz.sign\n#   Extract\nRUN tar -zxf buildroot-$BR_VERSION.tar.gz \\\n && mv buildroot-$BR_VERSION buildroot\nWORKDIR /tmp/builder/buildroot\n#   Add config\nADD buildroot-config /tmp/builder/buildroot/.config\n#   Reformat config and prep for make            \nRUN make oldconfig\n#   Make\nRUN make --quiet\n#   Done!\nRUN cp /tmp/builder/buildroot/output/images/rootfs.tar /tmp/rootfs.tar\n#   Remove duplicate binaries, perl, and python scripts in git-suite and other\n#   uneeded git files to bring down the image size. Reasoning and method\n#   described here:\n#   https://github.com/radial/core-busyboxplus/issues/2#issuecomment-42120299\nRUN mkdir /tmp/rootfs \\\n && tar -C /tmp/rootfs -pxf /tmp/rootfs.tar\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-daemon git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-merge-base git-merge-file git-merge-index git-merge-ours git-merge-recursive git-merge-subtree git-merge-tree git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-receive-pack git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shell git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /tmp/rootfs/usr/bin\nRUN rm -f git git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s ../libexec/git-core/git git \\\n && ln -s ../libexec/git-core/git-shell git-shell \\\n && ln -s ../libexec/git-core/git git-upload-archive \\\n && ln -s ../libexec/git-core/git-upload-pack git-upload-pack\nWORKDIR /tmp/rootfs/usr/libexec/git-core\nRUN ln -s git git-merge\nWORKDIR /tmp/rootfs/usr/share\nRUN rm -rf gitweb locale\nWORKDIR /tmp/rootfs\nRUN tar -pcf ../rootfs.tar .\n#   Done!\nWORKDIR /tmp\nRUN md5sum rootfs.tar > rootfs.tar.md5\n","originalDockerfileUglifiedHash":"82ee60652479eae7818c3b4ba29826e9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/12c9ee2e292a2ae20e4eb87a17117d41fb4903eb.dockerfile"}