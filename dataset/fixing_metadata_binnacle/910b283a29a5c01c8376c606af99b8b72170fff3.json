{"seed":172824168,"processedDockerfileHash":"36c46953a42f448c4cc41017f65b92b2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM lsiobase/alpine:arm32v7-3.9\n#   set version label\nARG BUILD_DATE\nARG VERSION\nARG BEETS_VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\nRUN echo \"**** install build packages ****\" \\\n && apk add cmake ffmpeg-dev fftw-dev g++ gcc git jpeg-dev libpng-dev make mpg123-dev openjpeg-dev python3-dev --no-cache --virtual=build-dependencies --upgrade \\\n && echo \"**** install runtime packages ****\" \\\n && apk add curl expat ffmpeg ffmpeg-libs fftw flac gdbm gst-plugins-good gstreamer jpeg jq lame libffi libpng mpg123 nano openjpeg py3-gobject3 py3-pip py3-pylast python3 sqlite-libs tar wget --no-cache --upgrade \\\n && echo \"**** compile mp3gain ****\" \\\n && mkdir -p /tmp/mp3gain-src \\\n && curl -o /tmp/mp3gain-src/mp3gain.zip -sL https://sourceforge.net/projects/mp3gain/files/mp3gain/1.6.1/mp3gain-1_6_1-src.zip \\\n && cd /tmp/mp3gain-src \\\n && unzip -qq /tmp/mp3gain-src/mp3gain.zip \\\n && sed -i \"s#/usr/local/bin#/usr/bin#g\" /tmp/mp3gain-src/Makefile \\\n && make \\\n && make install \\\n && echo \"**** compile mp3val ****\" \\\n && mkdir -p /tmp/mp3val-src \\\n && curl -o /tmp/mp3val-src/mp3val.tar.gz -sL https://downloads.sourceforge.net/mp3val/mp3val-0.1.8-src.tar.gz \\\n && cd /tmp/mp3val-src \\\n && tar xzf /tmp/mp3val-src/mp3val.tar.gz --strip 1 \\\n && make -f Makefile.linux \\\n && cp -p mp3val /usr/bin \\\n && echo \"**** compile chromaprint ****\" \\\n && git clone https://bitbucket.org/acoustid/chromaprint.git /tmp/chromaprint \\\n && cd /tmp/chromaprint \\\n && cmake -DBUILD_TOOLS=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX:PATH=/usr \\\n && make \\\n && make install \\\n && echo \"**** install pip packages ****\" \\\n && if [ -z ${BEETS_VERSION+x} ] ; then BEETS_VERSION=$( curl -sL https://pypi.python.org/pypi/beets/json | jq -r '. | .info.version' ;) ; fi \\\n && pip3 install --no-cache-dir -U beautifulsoup4 beets==${BEETS_VERSION} beets-extrafiles discogs-client flask pillow pip pyacoustid requests unidecode \\\n && echo \"**** cleanup ****\" \\\n && apk del --purge build-dependencies \\\n && rm -rf /root/.cache /tmp/*\n#   environment settings\nENV BEETSDIR=\"/config\" \\\n    EDITOR=\"nano\" \\\n    HOME=\"/config\"\n#   copy local files\nCOPY root/ /\n#   ports and volumes\nEXPOSE 8337/tcp\nVOLUME /config /downloads /music\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM lsiobase/alpine:arm32v7-3.9\n#  set version label\nARG BUILD_DATE\nARG VERSION\nARG BEETS_VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\nRUN echo \"**** install build packages ****\" \\\n && apk add --no-cache --virtual=build-dependencies --upgrade cmake ffmpeg-dev fftw-dev g++ gcc git jpeg-dev libpng-dev make mpg123-dev openjpeg-dev python3-dev \\\n && echo \"**** install runtime packages ****\" \\\n && apk add --no-cache --upgrade curl expat ffmpeg ffmpeg-libs fftw flac gdbm gst-plugins-good gstreamer jpeg jq lame libffi libpng mpg123 nano openjpeg py3-gobject3 py3-pip py3-pylast python3 sqlite-libs tar wget \\\n && echo \"**** compile mp3gain ****\" \\\n && mkdir -p /tmp/mp3gain-src \\\n && curl -o /tmp/mp3gain-src/mp3gain.zip -sL https://sourceforge.net/projects/mp3gain/files/mp3gain/1.6.1/mp3gain-1_6_1-src.zip \\\n && cd /tmp/mp3gain-src \\\n && unzip -qq /tmp/mp3gain-src/mp3gain.zip \\\n && sed -i \"s#/usr/local/bin#/usr/bin#g\" /tmp/mp3gain-src/Makefile \\\n && make \\\n && make install \\\n && echo \"**** compile mp3val ****\" \\\n && mkdir -p /tmp/mp3val-src \\\n && curl -o /tmp/mp3val-src/mp3val.tar.gz -sL https://downloads.sourceforge.net/mp3val/mp3val-0.1.8-src.tar.gz \\\n && cd /tmp/mp3val-src \\\n && tar xzf /tmp/mp3val-src/mp3val.tar.gz --strip 1 \\\n && make -f Makefile.linux \\\n && cp -p mp3val /usr/bin \\\n && echo \"**** compile chromaprint ****\" \\\n && git clone https://bitbucket.org/acoustid/chromaprint.git /tmp/chromaprint \\\n && cd /tmp/chromaprint \\\n && cmake -DBUILD_TOOLS=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX:PATH=/usr \\\n && make \\\n && make install \\\n && echo \"**** install pip packages ****\" \\\n && if [ -z ${BEETS_VERSION+x} ] ; then BEETS_VERSION=$( curl -sL https://pypi.python.org/pypi/beets/json | jq -r '. | .info.version' ;) ; fi \\\n && pip3 install --no-cache-dir -U beautifulsoup4 beets==${BEETS_VERSION} beets-extrafiles discogs-client flask pillow pip pyacoustid requests unidecode \\\n && echo \"**** cleanup ****\" \\\n && apk del --purge build-dependencies \\\n && rm -rf /root/.cache /tmp/*\n#  environment settings\nENV BEETSDIR=\"/config\" \\\n    EDITOR=\"nano\" \\\n    HOME=\"/config\"\n#  copy local files\nCOPY root/ /\n#  ports and volumes\nEXPOSE 8337/tcp\nVOLUME /config /downloads /music\n","injectedSmells":[],"originalDockerfileHash":"ba30385f1dd8e40aeedd39c30a4d1668","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM lsiobase/alpine:arm32v7-3.9\n#   set version label\nARG BUILD_DATE\nARG VERSION\nARG BEETS_VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\nRUN echo \"**** install build packages ****\" \\\n && apk add --no-cache --virtual=build-dependencies --upgrade cmake ffmpeg-dev fftw-dev g++ gcc git jpeg-dev libpng-dev make mpg123-dev openjpeg-dev python3-dev \\\n && echo \"**** install runtime packages ****\" \\\n && apk add --no-cache --upgrade curl expat ffmpeg ffmpeg-libs fftw flac gdbm gst-plugins-good gstreamer jpeg jq lame libffi libpng mpg123 nano openjpeg py3-gobject3 py3-pip py3-pylast python3 sqlite-libs tar wget \\\n && echo \"**** compile mp3gain ****\" \\\n && mkdir -p /tmp/mp3gain-src \\\n && curl -o /tmp/mp3gain-src/mp3gain.zip -sL https://sourceforge.net/projects/mp3gain/files/mp3gain/1.6.1/mp3gain-1_6_1-src.zip \\\n && cd /tmp/mp3gain-src \\\n && unzip -qq /tmp/mp3gain-src/mp3gain.zip \\\n && sed -i \"s#/usr/local/bin#/usr/bin#g\" /tmp/mp3gain-src/Makefile \\\n && make \\\n && make install \\\n && echo \"**** compile mp3val ****\" \\\n && mkdir -p /tmp/mp3val-src \\\n && curl -o /tmp/mp3val-src/mp3val.tar.gz -sL https://downloads.sourceforge.net/mp3val/mp3val-0.1.8-src.tar.gz \\\n && cd /tmp/mp3val-src \\\n && tar xzf /tmp/mp3val-src/mp3val.tar.gz --strip 1 \\\n && make -f Makefile.linux \\\n && cp -p mp3val /usr/bin \\\n && echo \"**** compile chromaprint ****\" \\\n && git clone https://bitbucket.org/acoustid/chromaprint.git /tmp/chromaprint \\\n && cd /tmp/chromaprint \\\n && cmake -DBUILD_TOOLS=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX:PATH=/usr \\\n && make \\\n && make install \\\n && echo \"**** install pip packages ****\" \\\n && if [ -z ${BEETS_VERSION+x} ] ; then BEETS_VERSION=$( curl -sL https://pypi.python.org/pypi/beets/json | jq -r '. | .info.version' ;) ; fi \\\n && pip3 install --no-cache-dir -U beautifulsoup4 beets==${BEETS_VERSION} beets-extrafiles discogs-client flask pillow pip pyacoustid requests unidecode \\\n && echo \"**** cleanup ****\" \\\n && apk del --purge build-dependencies \\\n && rm -rf /root/.cache /tmp/*\n#   environment settings\nENV BEETSDIR=\"/config\" \\\n    EDITOR=\"nano\" \\\n    HOME=\"/config\"\n#   copy local files\nCOPY root/ /\n#   ports and volumes\nEXPOSE 8337/tcp\nVOLUME /config /downloads /music\n","originalDockerfileUglifiedHash":"4c41909a34dfc0bcf967fb8eca0beb8c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/910b283a29a5c01c8376c606af99b8b72170fff3.dockerfile"}