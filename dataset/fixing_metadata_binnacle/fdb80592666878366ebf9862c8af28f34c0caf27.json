{"seed":1821591771,"processedDockerfileHash":"5f0fb5dc775407163eb8d3b2c5d7b4b5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Lukasz Fryc <lukasz@status.im>\\\"\"\nWORKDIR /root\n#  ==================\n#   General Packages\n#  ------------------\n#   openjdk-8-jdk\n#     Java\n#   ca-certificates\n#     SSL client\n#   tzdata\n#     Timezone\n#   zip\n#     Make a zip file\n#   unzip\n#     Unzip zip file\n#   curl\n#     Transfer data from or to a server\n#   wget\n#     Network downloader\n#   libqt5webkit5\n#     Web content engine (Fix issue in Android)\n#   libgconf-2-4\n#     Required package for chrome and chromedriver to run on Linux\n#   xvfb\n#     X virtual framebuffer\n#  ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk=8u292-b10-0ubuntu1~16.04.1 ca-certificates=20210119~16.04.1 tzdata=2021a-0ubuntu0.16.04 zip=3.0-11 unzip=6.0-20ubuntu1.1 curl=7.47.0-1ubuntu2.19 wget=1.17.1-1ubuntu1.5 libqt5webkit5=5.5.1+dfsg-2ubuntu1 libgconf-2-4=3.2.6-3ubuntu6 xvfb=2:1.18.4-0ubuntu0.12 build-essential=12.1ubuntu2 -qqy \\\n && rm -rf /var/lib/apt/lists/*\n#  ===============\n#   Set JAVA_HOME\n#  ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n#  =====================\n#   Install Android SDK\n#  =====================\nARG SDK_VERSION=sdk-tools-linux-4333796\nARG ANDROID_BUILD_TOOLS_VERSION=28.0.1\nARG ANDROID_PLATFORM_VERSION=\"android-27\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#   https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n#  ====================================\n#   Install latest nodejs, npm, appiuma\n#  ====================================\n#   ARG APPIUM_VERSION=1.7.2\n#   ENV APPIUM_VERSION=$APPIUM_VERSION\nRUN curl -sL https://deb.nodesource.com/setup_9.x | bash -\nRUN apt-get install --no-install-recommends nodejs=4.2.6~dfsg-1ubuntu4.2 -qqy\nRUN npm set maxsockets 3 \\\n && npm install appium@1.7.2 -g --unsafe-perm=true --allow-root\nRUN apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n#  ==================================\n#   Fix Issue with timezone mismatch\n#  ==================================\n#   ENV TZ=\"US/Pacific\"\n#   RUN echo \"${TZ}\" > /etc/timezone\n#  ===============\n#   Expose Ports\n#  ---------------\n#   4723\n#     Appium port\n#  ===============\nEXPOSE 4723/tcp\nCOPY entry_point.sh /root/\nRUN chmod +x /root/entry_point.sh\nENTRYPOINT /root/entry_point.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Lukasz Fryc <lukasz@status.im>\\\"\"\nWORKDIR /root\n# ==================\n#  General Packages\n# ------------------\n#  openjdk-8-jdk\n#    Java\n#  ca-certificates\n#    SSL client\n#  tzdata\n#    Timezone\n#  zip\n#    Make a zip file\n#  unzip\n#    Unzip zip file\n#  curl\n#    Transfer data from or to a server\n#  wget\n#    Network downloader\n#  libqt5webkit5\n#    Web content engine (Fix issue in Android)\n#  libgconf-2-4\n#    Required package for chrome and chromedriver to run on Linux\n#  xvfb\n#    X virtual framebuffer\n# ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk ca-certificates tzdata zip unzip curl wget libqt5webkit5 libgconf-2-4 xvfb build-essential -qqy \\\n && rm -rf /var/lib/apt/lists/*\n# ===============\n#  Set JAVA_HOME\n# ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n# =====================\n#  Install Android SDK\n# =====================\nARG SDK_VERSION=sdk-tools-linux-4333796\nARG ANDROID_BUILD_TOOLS_VERSION=28.0.1\nARG ANDROID_PLATFORM_VERSION=\"android-27\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#  https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n# ====================================\n#  Install latest nodejs, npm, appiuma\n# ====================================\n#  ARG APPIUM_VERSION=1.7.2\n#  ENV APPIUM_VERSION=$APPIUM_VERSION\nRUN curl -sL https://deb.nodesource.com/setup_9.x | bash -\nRUN apt-get install nodejs -qqy\nRUN npm set maxsockets 3 \\\n && npm install appium@1.7.2 -g --unsafe-perm=true --allow-root\nRUN apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n# ==================================\n#  Fix Issue with timezone mismatch\n# ==================================\n#  ENV TZ=\"US/Pacific\"\n#  RUN echo \"${TZ}\" > /etc/timezone\n# ===============\n#  Expose Ports\n# ---------------\n#  4723\n#    Appium port\n# ===============\nEXPOSE 4723/tcp\nCOPY entry_point.sh /root/\nRUN chmod +x /root/entry_point.sh\nENTRYPOINT /root/entry_point.sh\n","injectedSmells":[],"originalDockerfileHash":"687dc1f7aa0b4c5d036d57676c9348db","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Lukasz Fryc <lukasz@status.im>\\\"\"\nWORKDIR /root\n#  ==================\n#   General Packages\n#  ------------------\n#   openjdk-8-jdk\n#     Java\n#   ca-certificates\n#     SSL client\n#   tzdata\n#     Timezone\n#   zip\n#     Make a zip file\n#   unzip\n#     Unzip zip file\n#   curl\n#     Transfer data from or to a server\n#   wget\n#     Network downloader\n#   libqt5webkit5\n#     Web content engine (Fix issue in Android)\n#   libgconf-2-4\n#     Required package for chrome and chromedriver to run on Linux\n#   xvfb\n#     X virtual framebuffer\n#  ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk ca-certificates tzdata zip unzip curl wget libqt5webkit5 libgconf-2-4 xvfb build-essential -qqy \\\n && rm -rf /var/lib/apt/lists/*\n#  ===============\n#   Set JAVA_HOME\n#  ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n#  =====================\n#   Install Android SDK\n#  =====================\nARG SDK_VERSION=sdk-tools-linux-4333796\nARG ANDROID_BUILD_TOOLS_VERSION=28.0.1\nARG ANDROID_PLATFORM_VERSION=\"android-27\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#   https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n#  ====================================\n#   Install latest nodejs, npm, appiuma\n#  ====================================\n#   ARG APPIUM_VERSION=1.7.2\n#   ENV APPIUM_VERSION=$APPIUM_VERSION\nRUN curl -sL https://deb.nodesource.com/setup_9.x | bash -\nRUN apt-get install nodejs -qqy\nRUN npm set maxsockets 3 \\\n && npm install appium@1.7.2 -g --unsafe-perm=true --allow-root\nRUN apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n#  ==================================\n#   Fix Issue with timezone mismatch\n#  ==================================\n#   ENV TZ=\"US/Pacific\"\n#   RUN echo \"${TZ}\" > /etc/timezone\n#  ===============\n#   Expose Ports\n#  ---------------\n#   4723\n#     Appium port\n#  ===============\nEXPOSE 4723/tcp\nCOPY entry_point.sh /root/\nRUN chmod +x /root/entry_point.sh\nENTRYPOINT /root/entry_point.sh\n","originalDockerfileUglifiedHash":"bf6f7b59c12c42036e8969b7100d47fa","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fdb80592666878366ebf9862c8af28f34c0caf27.dockerfile"}