{"seed":4047558932,"processedDockerfileHash":"ad4c5caf689e026223f181bd6b1e6f9f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.16\nMAINTAINER y_hokkey github.com/hokkey\n#   an original dockerfile is by michael-harris github.com/michael-harris/resourcespace-docker\n#   Set correct environment variables.\nENV HOME=\"/root\"\n#   Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\"]\n#   Update System\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install --no-install-recommends apache2 php5 php5-dev php5-gd php5-mysql php5-ldap php5-imap subversion vim imagemagick ghostscript antiword xpdf mysql-client libav-tools postfix libimage-exiftool-perl wget zip -y \\\n && apt-get clean \\\n && rm -r /var/lib/apt/lists/*\n#   Install locales\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN locale-gen cs_CZ.UTF-8 \\\n && locale-gen de_DE.UTF-8 \\\n && locale-gen es_ES.UTF-8 \\\n && locale-gen fr_FR.UTF-8 \\\n && locale-gen it_IT.UTF-8 \\\n && locale-gen pl_PL.UTF-8 \\\n && locale-gen pt_BR.UTF-8 \\\n && locale-gen ru_RU.UTF-8 \\\n && locale-gen sl_SI.UTF-8 \\\n && locale-gen uk_UA.UTF-8\n#   Enable apache mods.\nRUN a2enmod php5 \\\n && a2enmod rewrite \\\n && php5enmod imap\n#   Modify apache2.conf\nRUN sed -i -e 's/Options Indexes FollowSymLinks/Options -Indexes +FollowSymLinks/g' /etc/apache2/apache2.conf\n#   Modify php.ini\nRUN sed -i -e 's/upload_max_filesize\\s*=\\s*2M/upload_max_filesize = 1G/g' -e 's/post_max_size\\s*=\\s*8M/post_max_size = 1G/g' -e 's/max_execution_time\\s*=\\s*30/max_execution_time = 1000/g' -e 's/memory_limit\\s*=\\s*128M/memory_limit = 1G/g' /etc/php5/apache2/php.ini\n#   Manually set up the apache environment variables\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV RS_REVISION=\"7009\"\n#   Base URL\nENV BASE_URL=\"//localhost/resourcespace\"\n#   MYSQL settings\nENV MYSQL_USER_NAME=\"root\"\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nENV MYSQL_DB=\"resourcespace\"\n#   SMTP settings\nENV USE_SMTP=\"false\"\nENV SMTP_SECURE=\"tls\"\nENV SMTP_HOST=\"smtp.gmail.com\"\nENV SMTP_PORT=\"465\"\nENV SMTP_AUTH=\"true\"\nENV SMTP_USERNAME=\"yourname@gmail.com\"\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n#   Add to Startup Items\nRUN mkdir /etc/service/apache2\nCOPY conf/apache2.sh /etc/service/apache2/run\nRUN chmod a+x /etc/service/apache2/run\n#   Add cron\nCOPY conf/resourcespace.sh /etc/cron.daily/resourcespace.sh\nRUN chmod a+x /etc/cron.daily/resourcespace.sh\n#   Setup ResourceSpace\nWORKDIR /var/www/html/\nRUN svn checkout -r $RS_REVISION http://svn.montala.net/svn/resourcespace resourcespace\nWORKDIR resourcespace\n#   change permissions and replace Japanese words\nRUN mkdir filestore \\\n && chown www-data:www-data -R filestore \\\n && chown www-data:www-data -R plugins \\\n && chown www-data:www-data -R gfx/homeanim \\\n && chown www-data:www-data -R include \\\n && sed -i -e 's/Log Out/ログアウト/g' -e 's/ヘルプ助言/ヘルプ/g' -e 's/チームセンター/サーバ設定/g' -e 's/背景色/デザイン/g' -e 's/簡単検索/検索/g' -e 's/クリアー/クリア/g' -e 's/国の指定/地域/g' -e 's/日付指定/日付/g' -e 's/結果表示/結果を表示/g' -e 's/per page/表示件数/g' -e 's/検索保存/保存された検索条件/g' -e 's/画像のプレビュー/画像プレビュー/g' -e 's/最善のリソース/ベストリソース/g' -e 's/pixels/ピクセル/g' languages/jp.php\nCOPY conf/rs-config.php include/config.php\nVOLUME /var/www/resourcespace/filestore\nEXPOSE 80/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.16\nMAINTAINER y_hokkey github.com/hokkey\n#  an original dockerfile is by michael-harris github.com/michael-harris/resourcespace-docker\n#  Set correct environment variables.\nENV HOME=\"/root\"\n#  Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\"]\n#  Update System\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install apache2 php5 php5-dev php5-gd php5-mysql php5-ldap php5-imap subversion vim imagemagick ghostscript antiword xpdf mysql-client libav-tools postfix libimage-exiftool-perl wget zip -y \\\n && apt-get clean \\\n && rm -r /var/lib/apt/lists/*\n#  Install locales\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN locale-gen cs_CZ.UTF-8 \\\n && locale-gen de_DE.UTF-8 \\\n && locale-gen es_ES.UTF-8 \\\n && locale-gen fr_FR.UTF-8 \\\n && locale-gen it_IT.UTF-8 \\\n && locale-gen pl_PL.UTF-8 \\\n && locale-gen pt_BR.UTF-8 \\\n && locale-gen ru_RU.UTF-8 \\\n && locale-gen sl_SI.UTF-8 \\\n && locale-gen uk_UA.UTF-8\n#  Enable apache mods.\nRUN a2enmod php5 \\\n && a2enmod rewrite \\\n && php5enmod imap\n#  Modify apache2.conf\nRUN sed -i -e 's/Options Indexes FollowSymLinks/Options -Indexes +FollowSymLinks/g' /etc/apache2/apache2.conf\n#  Modify php.ini\nRUN sed -i -e 's/upload_max_filesize\\s*=\\s*2M/upload_max_filesize = 1G/g' -e 's/post_max_size\\s*=\\s*8M/post_max_size = 1G/g' -e 's/max_execution_time\\s*=\\s*30/max_execution_time = 1000/g' -e 's/memory_limit\\s*=\\s*128M/memory_limit = 1G/g' /etc/php5/apache2/php.ini\n#  Manually set up the apache environment variables\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV RS_REVISION=\"7009\"\n#  Base URL\nENV BASE_URL=\"//localhost/resourcespace\"\n#  MYSQL settings\nENV MYSQL_USER_NAME=\"root\"\nENV MYSQL_PASSWORD=\"yourpassword\"\nENV MYSQL_DB=\"resourcespace\"\n#  SMTP settings\nENV USE_SMTP=\"false\"\nENV SMTP_SECURE=\"tls\"\nENV SMTP_HOST=\"smtp.gmail.com\"\nENV SMTP_PORT=\"465\"\nENV SMTP_AUTH=\"true\"\nENV SMTP_USERNAME=\"yourname@gmail.com\"\nENV SMTP_PASSWORD=\"yourpassword\"\n#  Add to Startup Items\nRUN mkdir /etc/service/apache2\nCOPY conf/apache2.sh /etc/service/apache2/run\nRUN chmod a+x /etc/service/apache2/run\n#  Add cron\nCOPY conf/resourcespace.sh /etc/cron.daily/resourcespace.sh\nRUN chmod a+x /etc/cron.daily/resourcespace.sh\n#  Setup ResourceSpace\nWORKDIR /var/www/html/\nRUN svn checkout -r $RS_REVISION http://svn.montala.net/svn/resourcespace resourcespace\nWORKDIR resourcespace\n#  change permissions and replace Japanese words\nRUN mkdir filestore \\\n && chown www-data:www-data -R filestore \\\n && chown www-data:www-data -R plugins \\\n && chown www-data:www-data -R gfx/homeanim \\\n && chown www-data:www-data -R include \\\n && sed -i -e 's/Log Out/ログアウト/g' -e 's/ヘルプ助言/ヘルプ/g' -e 's/チームセンター/サーバ設定/g' -e 's/背景色/デザイン/g' -e 's/簡単検索/検索/g' -e 's/クリアー/クリア/g' -e 's/国の指定/地域/g' -e 's/日付指定/日付/g' -e 's/結果表示/結果を表示/g' -e 's/per page/表示件数/g' -e 's/検索保存/保存された検索条件/g' -e 's/画像のプレビュー/画像プレビュー/g' -e 's/最善のリソース/ベストリソース/g' -e 's/pixels/ピクセル/g' languages/jp.php\nCOPY conf/rs-config.php include/config.php\nVOLUME /var/www/resourcespace/filestore\nEXPOSE 80/tcp\n","injectedSmells":[],"originalDockerfileHash":"3f80084a48662c367ebe32f3f140d914","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.16\nMAINTAINER y_hokkey github.com/hokkey\n#   an original dockerfile is by michael-harris github.com/michael-harris/resourcespace-docker\n#   Set correct environment variables.\nENV HOME=\"/root\"\n#   Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\"]\n#   Update System\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install apache2 php5 php5-dev php5-gd php5-mysql php5-ldap php5-imap subversion vim imagemagick ghostscript antiword xpdf mysql-client libav-tools postfix libimage-exiftool-perl wget zip -y \\\n && apt-get clean \\\n && rm -r /var/lib/apt/lists/*\n#   Install locales\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN locale-gen cs_CZ.UTF-8 \\\n && locale-gen de_DE.UTF-8 \\\n && locale-gen es_ES.UTF-8 \\\n && locale-gen fr_FR.UTF-8 \\\n && locale-gen it_IT.UTF-8 \\\n && locale-gen pl_PL.UTF-8 \\\n && locale-gen pt_BR.UTF-8 \\\n && locale-gen ru_RU.UTF-8 \\\n && locale-gen sl_SI.UTF-8 \\\n && locale-gen uk_UA.UTF-8\n#   Enable apache mods.\nRUN a2enmod php5 \\\n && a2enmod rewrite \\\n && php5enmod imap\n#   Modify apache2.conf\nRUN sed -i -e 's/Options Indexes FollowSymLinks/Options -Indexes +FollowSymLinks/g' /etc/apache2/apache2.conf\n#   Modify php.ini\nRUN sed -i -e 's/upload_max_filesize\\s*=\\s*2M/upload_max_filesize = 1G/g' -e 's/post_max_size\\s*=\\s*8M/post_max_size = 1G/g' -e 's/max_execution_time\\s*=\\s*30/max_execution_time = 1000/g' -e 's/memory_limit\\s*=\\s*128M/memory_limit = 1G/g' /etc/php5/apache2/php.ini\n#   Manually set up the apache environment variables\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log/apache2\"\nENV APACHE_LOCK_DIR=\"/var/lock/apache2\"\nENV APACHE_PID_FILE=\"/var/run/apache2.pid\"\nENV RS_REVISION=\"7009\"\n#   Base URL\nENV BASE_URL=\"//localhost/resourcespace\"\n#   MYSQL settings\nENV MYSQL_USER_NAME=\"root\"\nENV MYSQL_PASSWORD=\"yourpassword\"\nENV MYSQL_DB=\"resourcespace\"\n#   SMTP settings\nENV USE_SMTP=\"false\"\nENV SMTP_SECURE=\"tls\"\nENV SMTP_HOST=\"smtp.gmail.com\"\nENV SMTP_PORT=\"465\"\nENV SMTP_AUTH=\"true\"\nENV SMTP_USERNAME=\"yourname@gmail.com\"\nENV SMTP_PASSWORD=\"yourpassword\"\n#   Add to Startup Items\nRUN mkdir /etc/service/apache2\nCOPY conf/apache2.sh /etc/service/apache2/run\nRUN chmod a+x /etc/service/apache2/run\n#   Add cron\nCOPY conf/resourcespace.sh /etc/cron.daily/resourcespace.sh\nRUN chmod a+x /etc/cron.daily/resourcespace.sh\n#   Setup ResourceSpace\nWORKDIR /var/www/html/\nRUN svn checkout -r $RS_REVISION http://svn.montala.net/svn/resourcespace resourcespace\nWORKDIR resourcespace\n#   change permissions and replace Japanese words\nRUN mkdir filestore \\\n && chown www-data:www-data -R filestore \\\n && chown www-data:www-data -R plugins \\\n && chown www-data:www-data -R gfx/homeanim \\\n && chown www-data:www-data -R include \\\n && sed -i -e 's/Log Out/ログアウト/g' -e 's/ヘルプ助言/ヘルプ/g' -e 's/チームセンター/サーバ設定/g' -e 's/背景色/デザイン/g' -e 's/簡単検索/検索/g' -e 's/クリアー/クリア/g' -e 's/国の指定/地域/g' -e 's/日付指定/日付/g' -e 's/結果表示/結果を表示/g' -e 's/per page/表示件数/g' -e 's/検索保存/保存された検索条件/g' -e 's/画像のプレビュー/画像プレビュー/g' -e 's/最善のリソース/ベストリソース/g' -e 's/pixels/ピクセル/g' languages/jp.php\nCOPY conf/rs-config.php include/config.php\nVOLUME /var/www/resourcespace/filestore\nEXPOSE 80/tcp\n","originalDockerfileUglifiedHash":"b76b312fff59d83733b044602f9c5224","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/68fac0e49308d6b2936ff93fd176cca5bb73938d.dockerfile"}