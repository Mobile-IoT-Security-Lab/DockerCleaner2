{"seed":2733870732,"processedDockerfileHash":"15056393d4e1b541afb0ca1ec0a6a580","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM postgres:9.6\nMAINTAINER \"Lukas Martinelli <me@lukasmartinelli.ch>\"\nENV POSTGIS_MAJOR=\"2.4dev\" \\\n    POSTGIS_VERSION=\"2.4dev\" \\\n    GEOS_VERSION=\"3.6.0\"\nRUN apt-get update -qq -y \\\n && apt-get install --no-install-recommends autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git gdal-bin libcunit1-dev libkakasi2-dev libtool pandoc unzip xsltproc libgdal-dev libjson0-dev libproj-dev libxml2-dev postgresql-server-dev-$PG_MAJOR -qq -y \\\n && cd /opt/ \\\n && curl -o /opt/geos.tar.bz2 http://download.osgeo.org/geos/geos-$GEOS_VERSION.tar.bz2 \\\n && mkdir /opt/geos \\\n && tar xf /opt/geos.tar.bz2 -C /opt/geos --strip-components=1 \\\n && cd /opt/geos/ \\\n && ./configure \\\n && make -j \\\n && make install \\\n && rm -rf /opt/geos* \\\n && cd /opt/ \\\n && curl -L https://github.com/google/protobuf/archive/v3.0.2.tar.gz | tar xvz \\\n && cd protobuf-3.0.2 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-3.0.2 \\\n && cd /opt/ \\\n && curl -L https://github.com/protobuf-c/protobuf-c/releases/download/v1.2.1/protobuf-c-1.2.1.tar.gz | tar xvz \\\n && cd protobuf-c-1.2.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-c.1.2.1 \\\n && cd /opt/ \\\n && git clone -b svn-trunk https://github.com/postgis/postgis.git \\\n && cd postgis \\\n && git reset --hard ff0a844e606622f45841fc25221bbaa136ed1001 \\\n && ./autogen.sh \\\n && ./configure CFLAGS=\"-O0 -Wall\" \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/postgis \\\n && cd /opt/ \\\n && git clone https://github.com/JuliaLang/utf8proc.git \\\n && cd utf8proc \\\n && git checkout -q v2.0.2 \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/utf8proc \\\n && cd /opt/ \\\n && git clone https://github.com/openmaptiles/mapnik-german-l10n.git \\\n && cd mapnik-german-l10n \\\n && make \\\n && make install \\\n && rm -rf /opt/mapnik-german-l10n \\\n && apt-get -qq -y --auto-remove purge autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git libcunit1-dev libtool make g++ gcc pandoc unzip xsltproc \\\n && rm -rf /var/lib/apt/lists/*\nCOPY ./initdb-postgis.sh /docker-entrypoint-initdb.d/10_postgis.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM postgres:9.6\nMAINTAINER \"Lukas Martinelli <me@lukasmartinelli.ch>\"\nENV POSTGIS_MAJOR=\"2.4dev\" \\\n    POSTGIS_VERSION=\"2.4dev\" \\\n    GEOS_VERSION=\"3.6.0\"\nRUN apt-get update -qq -y \\\n && apt-get install --no-install-recommends autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git gdal-bin libcunit1-dev libkakasi2-dev libtool pandoc unzip xsltproc libgdal-dev libjson0-dev libproj-dev libxml2-dev postgresql-server-dev-$PG_MAJOR -qq -y \\\n && cd /opt/ \\\n && curl -o /opt/geos.tar.bz2 http://download.osgeo.org/geos/geos-$GEOS_VERSION.tar.bz2 \\\n && mkdir /opt/geos \\\n && tar xf /opt/geos.tar.bz2 -C /opt/geos --strip-components=1 \\\n && cd /opt/geos/ \\\n && ./configure \\\n && make -j \\\n && make install \\\n && rm -rf /opt/geos* \\\n && cd /opt/ \\\n && curl -L https://github.com/google/protobuf/archive/v3.0.2.tar.gz | tar xvz \\\n && cd protobuf-3.0.2 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-3.0.2 \\\n && cd /opt/ \\\n && curl -L https://github.com/protobuf-c/protobuf-c/releases/download/v1.2.1/protobuf-c-1.2.1.tar.gz | tar xvz \\\n && cd protobuf-c-1.2.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-c.1.2.1 \\\n && cd /opt/ \\\n && git clone -b svn-trunk https://github.com/postgis/postgis.git \\\n && cd postgis \\\n && git reset --hard ff0a844e606622f45841fc25221bbaa136ed1001 \\\n && ./autogen.sh \\\n && ./configure CFLAGS=\"-O0 -Wall\" \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/postgis \\\n && cd /opt/ \\\n && git clone https://github.com/JuliaLang/utf8proc.git \\\n && cd utf8proc \\\n && git checkout -q v2.0.2 \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/utf8proc \\\n && cd /opt/ \\\n && git clone https://github.com/openmaptiles/mapnik-german-l10n.git \\\n && cd mapnik-german-l10n \\\n && make \\\n && make install \\\n && rm -rf /opt/mapnik-german-l10n \\\n && apt-get -qq -y --auto-remove purge autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git libcunit1-dev libtool make g++ gcc pandoc unzip xsltproc \\\n && rm -rf /var/lib/apt/lists/*\nCOPY ./initdb-postgis.sh /docker-entrypoint-initdb.d/10_postgis.sh\n","injectedSmells":[],"originalDockerfileHash":"828365833d753785e1928f64a2f38e8c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM postgres:9.6\nMAINTAINER \"Lukas Martinelli <me@lukasmartinelli.ch>\"\nENV POSTGIS_MAJOR=\"2.4dev\" \\\n    POSTGIS_VERSION=\"2.4dev\" \\\n    GEOS_VERSION=\"3.6.0\"\nRUN apt-get update -qq -y \\\n && apt-get install --no-install-recommends autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git gdal-bin libcunit1-dev libkakasi2-dev libtool pandoc unzip xsltproc libgdal-dev libjson0-dev libproj-dev libxml2-dev postgresql-server-dev-$PG_MAJOR -qq -y \\\n && cd /opt/ \\\n && curl -o /opt/geos.tar.bz2 http://download.osgeo.org/geos/geos-$GEOS_VERSION.tar.bz2 \\\n && mkdir /opt/geos \\\n && tar xf /opt/geos.tar.bz2 -C /opt/geos --strip-components=1 \\\n && cd /opt/geos/ \\\n && ./configure \\\n && make -j \\\n && make install \\\n && rm -rf /opt/geos* \\\n && cd /opt/ \\\n && curl -L https://github.com/google/protobuf/archive/v3.0.2.tar.gz | tar xvz \\\n && cd protobuf-3.0.2 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-3.0.2 \\\n && cd /opt/ \\\n && curl -L https://github.com/protobuf-c/protobuf-c/releases/download/v1.2.1/protobuf-c-1.2.1.tar.gz | tar xvz \\\n && cd protobuf-c-1.2.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/protobuf-c.1.2.1 \\\n && cd /opt/ \\\n && git clone -b svn-trunk https://github.com/postgis/postgis.git \\\n && cd postgis \\\n && git reset --hard ff0a844e606622f45841fc25221bbaa136ed1001 \\\n && ./autogen.sh \\\n && ./configure CFLAGS=\"-O0 -Wall\" \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/postgis \\\n && cd /opt/ \\\n && git clone https://github.com/JuliaLang/utf8proc.git \\\n && cd utf8proc \\\n && git checkout -q v2.0.2 \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /opt/utf8proc \\\n && cd /opt/ \\\n && git clone https://github.com/openmaptiles/mapnik-german-l10n.git \\\n && cd mapnik-german-l10n \\\n && make \\\n && make install \\\n && rm -rf /opt/mapnik-german-l10n \\\n && apt-get -qq -y --auto-remove purge autoconf automake autotools-dev build-essential ca-certificates bison cmake curl dblatex docbook-mathml docbook-xsl git libcunit1-dev libtool make g++ gcc pandoc unzip xsltproc \\\n && rm -rf /var/lib/apt/lists/*\nCOPY ./initdb-postgis.sh /docker-entrypoint-initdb.d/10_postgis.sh\n","originalDockerfileUglifiedHash":"828365833d753785e1928f64a2f38e8c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f07ccd084d0a2c457552d29b61d7e312654a0b49.dockerfile"}