{"seed":3714116240,"processedDockerfileHash":"80be02e574338036397d0253921fc152","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"#   Copyright (c) Jupyter Development Team.\n#   Distributed under the terms of the Modified BSD License.\nARG BASE_IMAGE=ubuntu:16.04\nFROM $BASE_IMAGE\nENV HTTP_PROXY=\"http://192.168.199.99:9999\"\nENV HTTPS_PROXY=\"http://192.168.199.99:9999\"\nENV http_proxy=\"http://192.168.199.99:9999\"\nENV https_proxy=\"http://192.168.199.99:9999\"\nARG INSTALL_TFMA=yes\nUSER root\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nENV HOME=\"/home/$NB_USER\"\nENV CONDA_DIR=\"$HOME/.conda\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\"\n#   Use bash instead of sh\nSHELL [\"/bin/bash\", \"-c\"]\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https=2.6.0 build-essential=12.9ubuntu3 bzip2=1.0.8-5build1 ca-certificates=20230311 curl=7.88.1-7ubuntu1 g++=4:12.2.0-3ubuntu1 git=1:2.39.2-1ubuntu1 gnupg=2.2.40-1ubuntu2 graphviz=2.42.2-7build3 locales=2.37-0ubuntu2 lsb-release=12.0-1ubuntu1 sudo=1.9.13p1-1ubuntu2 unzip=6.0-27ubuntu1 vim=2:9.0.1000-4ubuntu2 wget=1.21.3-1ubuntu1 zip=3.0-13 -yq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#   Create jovyan user with UID=1000 and in the 'users' group\nRUN useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && chown -R ${NB_USER}:users /usr/local/bin\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb https://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install --no-install-recommends google-cloud-sdk kubectl -y \\\n && gcloud config set core/disable_usage_reporting true \\\n && gcloud config set component_manager/disable_update_check true \\\n && gcloud config set metrics/environment github_docker_image\nRUN chown -R ${NB_USER}:users /home/${NB_USER}\n#   Run everything below this as $NB_USER\nUSER $NB_USER\nWORKDIR $HOME\n#   Setup work directory for backward-compatibility\nRUN mkdir /home/$NB_USER/work\n#   Install Tini - used as entrypoint for container\nRUN cd /tmp \\\n && wget https://github.com/krallin/tini/releases/download/v0.18.0/tini \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini\n#   Install conda as jovyan user and check the md5 sum provided on the download site\nENV MINICONDA_VERSION=\"4.4.10\"\n#  ENV MINICONDA_VERSION 4.5.1\n#  Get miniconda3.\nRUN cd /tmp \\\n && mkdir -p $CONDA_DIR \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh\n#  Install Anaconda3.\nRUN cd /tmp \\\n && /bin/bash Miniconda3-4.5.1-Linux-x86_64.sh -f -b -p ${CONDA_DIR}\n#   Update conda\nRUN cd /tmp \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda update -n base conda --yes \\\n && conda update conda --yes\nRUN cd /tmp \\\n && conda update --all --yes \\\n && conda clean -tipsy\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (c) Jupyter Development Team.\n#  Distributed under the terms of the Modified BSD License.\nARG BASE_IMAGE=ubuntu:16.04\nFROM $BASE_IMAGE\nENV HTTP_PROXY=\"http://192.168.199.99:9999\"\nENV HTTPS_PROXY=\"http://192.168.199.99:9999\"\nENV http_proxy=\"http://192.168.199.99:9999\"\nENV https_proxy=\"http://192.168.199.99:9999\"\nARG INSTALL_TFMA=yes\nUSER root\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nENV HOME=\"/home/$NB_USER\"\nENV CONDA_DIR=\"$HOME/.conda\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\"\n#  Use bash instead of sh\nSHELL [\"/bin/bash\", \"-c\"]\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https build-essential bzip2 ca-certificates curl g++ git gnupg graphviz locales lsb-release sudo unzip vim wget zip -yq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#  Create jovyan user with UID=1000 and in the 'users' group\nRUN useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && chown -R ${NB_USER}:users /usr/local/bin\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb https://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install google-cloud-sdk kubectl -y \\\n && gcloud config set core/disable_usage_reporting true \\\n && gcloud config set component_manager/disable_update_check true \\\n && gcloud config set metrics/environment github_docker_image\nRUN chown -R ${NB_USER}:users /home/${NB_USER}\n#  Run everything below this as $NB_USER\nUSER $NB_USER\nWORKDIR $HOME\n#  Setup work directory for backward-compatibility\nRUN mkdir /home/$NB_USER/work\n#  Install Tini - used as entrypoint for container\nRUN cd /tmp \\\n && wget https://github.com/krallin/tini/releases/download/v0.18.0/tini \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini\n#  Install conda as jovyan user and check the md5 sum provided on the download site\nENV MINICONDA_VERSION=\"4.4.10\"\n# ENV MINICONDA_VERSION 4.5.1\n# Get miniconda3.\nRUN cd /tmp \\\n && mkdir -p $CONDA_DIR \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh\n# Install Anaconda3.\nRUN cd /tmp \\\n && /bin/bash Miniconda3-4.5.1-Linux-x86_64.sh -f -b -p ${CONDA_DIR}\n#  Update conda\nRUN cd /tmp \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda update -n base conda --yes \\\n && conda update conda --yes\nRUN cd /tmp \\\n && conda update --all --yes \\\n && conda clean -tipsy\n","injectedSmells":[],"originalDockerfileHash":"09b6d73615f838b3a357348bdd60ea90","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (c) Jupyter Development Team.\n#   Distributed under the terms of the Modified BSD License.\nARG BASE_IMAGE=ubuntu:16.04\nFROM $BASE_IMAGE\nENV HTTP_PROXY=\"http://192.168.199.99:9999\"\nENV HTTPS_PROXY=\"http://192.168.199.99:9999\"\nENV http_proxy=\"http://192.168.199.99:9999\"\nENV https_proxy=\"http://192.168.199.99:9999\"\nARG INSTALL_TFMA=yes\nUSER root\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nENV HOME=\"/home/$NB_USER\"\nENV CONDA_DIR=\"$HOME/.conda\"\nENV PATH=\"$CONDA_DIR/bin:$PATH\"\n#   Use bash instead of sh\nSHELL [\"/bin/bash\", \"-c\"]\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https build-essential bzip2 ca-certificates curl g++ git gnupg graphviz locales lsb-release sudo unzip vim wget zip -yq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#   Create jovyan user with UID=1000 and in the 'users' group\nRUN useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n && chown -R ${NB_USER}:users /usr/local/bin\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb https://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install google-cloud-sdk kubectl -y \\\n && gcloud config set core/disable_usage_reporting true \\\n && gcloud config set component_manager/disable_update_check true \\\n && gcloud config set metrics/environment github_docker_image\nRUN chown -R ${NB_USER}:users /home/${NB_USER}\n#   Run everything below this as $NB_USER\nUSER $NB_USER\nWORKDIR $HOME\n#   Setup work directory for backward-compatibility\nRUN mkdir /home/$NB_USER/work\n#   Install Tini - used as entrypoint for container\nRUN cd /tmp \\\n && wget https://github.com/krallin/tini/releases/download/v0.18.0/tini \\\n && mv tini /usr/local/bin/tini \\\n && chmod +x /usr/local/bin/tini\n#   Install conda as jovyan user and check the md5 sum provided on the download site\nENV MINICONDA_VERSION=\"4.4.10\"\n#  ENV MINICONDA_VERSION 4.5.1\n#  Get miniconda3.\nRUN cd /tmp \\\n && mkdir -p $CONDA_DIR \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh\n#  Install Anaconda3.\nRUN cd /tmp \\\n && /bin/bash Miniconda3-4.5.1-Linux-x86_64.sh -f -b -p ${CONDA_DIR}\n#   Update conda\nRUN cd /tmp \\\n && conda config --system --prepend channels conda-forge \\\n && conda config --system --set auto_update_conda false \\\n && conda config --system --set show_channel_urls true \\\n && conda update -n base conda --yes \\\n && conda update conda --yes\nRUN cd /tmp \\\n && conda update --all --yes \\\n && conda clean -tipsy\n","originalDockerfileUglifiedHash":"7c6ed3f110a01b0dba623b9c611bf89d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c9f59868d36bf0b05a1c5a8e9bb718b95498f194.dockerfile"}