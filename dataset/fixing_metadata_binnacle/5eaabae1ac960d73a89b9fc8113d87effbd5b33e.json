{"seed":3378424306,"processedDockerfileHash":"30dce5144e8f247043d108a86e222f60","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Dockerfile_afi\n#   Builds docker container where AFI client can be compiled and run\n#\n#   Advanced Forwarding Interface : AFI client examples\n#\n#   Created by Sandesh Kumar Sodhi, January 2017\n#   Copyright (c) [2017] Juniper Networks, Inc. All rights reserved.\n#\n#   All rights reserved.\n#\n#   Notice and Disclaimer: This code is licensed to you under the Apache\n#   License 2.0 (the \"License\"). You may not use this code except in compliance\n#   with the License. This code is not an official Juniper product. You can\n#   obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Third-Party Code: This code may depend on other components under separate\n#   copyright notice and license terms. Your use of the source code for those\n#   components is subject to the terms and conditions of the respective license\n#   as noted in the Third-Party source code file.\n#\nFROM ubuntu:14.04.4\nLABEL maintainer=\"\\\"Sandesh Kumar Sodhi\\\"\"\n#\n#   Build\n#\n#   docker build -f Dockerfile_afi -t afi-docker .\n#\n#   Run:\n#\n#   docker run --name afi --privileged -i -t afi-docker /bin/bash\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20170717~14.04.2 curl=7.35.0-1ubuntu2.20 ethtool=1:3.13-1 expect=5.45-5ubuntu1 git=1:1.9.1-1ubuntu0.10 gdebi-core=0.9.5.3ubuntu3 nmap=6.40-0.2ubuntu1 openssh-client=1:6.6p1-2ubuntu2.13 openssl=1.0.1f-1ubuntu2.27 pkg-config=0.26-1ubuntu4 psmisc=22.20-1ubuntu2 sed=4.2.2-4ubuntu1 ssh=1:6.6p1-2ubuntu2.13 sshpass=1.05-1 tcpdump=4.9.2-0ubuntu0.14.04.1 telnet=0.17-36build2 tshark=2.6.6-1~ubuntu14.04.0 tmux=1.8-5 unzip=6.0-9ubuntu1.5 vim=2:7.4.052-1ubuntu3.1 wget=1.15-1ubuntu1.14.04.5 autoconf=2.69-6 automake=1:1.14.1-2ubuntu1 libtool=2.4.2-1.7ubuntu1 bsdmainutils=9.0.5ubuntu1 build-essential=11.6ubuntu6 software-properties-common=0.92.37.8 -y\n#\n#   gcc 4.9\n#\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc-4.9 g++-4.9 -y\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 40 --slave /usr/bin/g++ g++ /usr/bin/g++-4.8\n#\n#   Protobuf\n#   google-protobuf (v3.0.0-beta-3.3)\n#\nRUN mkdir -p /root/downloads\nRUN cd /root/downloads \\\n && wget https://github.com/google/protobuf/archive/v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads \\\n && tar xzf v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googlemock/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googlemock-release-1.7.0 gmock\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googletest/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googletest-release-1.7.0 gmock/gtest\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install\n#\n#   Install grpc\n#   grpc 0.15.1\n#\nRUN cd /root/downloads \\\n && git clone https://github.com/grpc/grpc.git\nRUN cd /root/downloads/grpc \\\n && git checkout release-0_15_1\nRUN cd /root/downloads/grpc \\\n && git submodule update --init\nRUN cd /root/downloads/grpc \\\n && cp Makefile Makefile.orig\nRUN cd /root/downloads/grpc \\\n && sed -i '109iREQUIRE_CUSTOM_LIBRARIES_dbg = 1' Makefile\nRUN cd /root/downloads/grpc \\\n && sed -i -e 's/CONFIG ?= opt/CONFIG ?= dbg/g' Makefile\n#\n#  diff Makefile.orig Makefile\n#  108a109\n#  > REQUIRE_CUSTOM_LIBRARIES_dbg = 1\n#  261c262\n#  < CONFIG ?= opt\n#  ---\n#  > CONFIG ?= dbg\n#\n#\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make install\n#\n#   Boost\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends libboost-all-dev=1.54.0.1ubuntu1 -y\n#\n#   GTEST\n#\nRUN cd /root/downloads \\\n && wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz\nRUN cd /root/downloads \\\n && tar xzf release-1.8.0.tar.gz\nCOPY env/bash_aliases /root/.bash_aliases\nCOPY env/vimrc /root/.vimrc\nCOPY env/tmux.conf /root/.tmux.conf\nCOPY entrypoint.sh /root/entrypoint.sh\nENTRYPOINT [\"/root/entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  Dockerfile_afi\n#  Builds docker container where AFI client can be compiled and run\n#\n#  Advanced Forwarding Interface : AFI client examples\n#\n#  Created by Sandesh Kumar Sodhi, January 2017\n#  Copyright (c) [2017] Juniper Networks, Inc. All rights reserved.\n#\n#  All rights reserved.\n#\n#  Notice and Disclaimer: This code is licensed to you under the Apache\n#  License 2.0 (the \"License\"). You may not use this code except in compliance\n#  with the License. This code is not an official Juniper product. You can\n#  obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Third-Party Code: This code may depend on other components under separate\n#  copyright notice and license terms. Your use of the source code for those\n#  components is subject to the terms and conditions of the respective license\n#  as noted in the Third-Party source code file.\n#\nFROM ubuntu:14.04.4\nLABEL maintainer=\"\\\"Sandesh Kumar Sodhi\\\"\"\n#\n#  Build\n#\n#  docker build -f Dockerfile_afi -t afi-docker .\n#\n#  Run:\n#\n#  docker run --name afi --privileged -i -t afi-docker /bin/bash\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl ethtool expect git gdebi-core nmap openssh-client openssl pkg-config psmisc sed ssh sshpass tcpdump telnet tshark tmux unzip vim wget autoconf automake libtool bsdmainutils build-essential software-properties-common -y\n#\n#  gcc 4.9\n#\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc-4.9 g++-4.9 -y\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 40 --slave /usr/bin/g++ g++ /usr/bin/g++-4.8\n#\n#  Protobuf\n#  google-protobuf (v3.0.0-beta-3.3)\n#\nRUN mkdir -p /root/downloads\nRUN cd /root/downloads \\\n && wget https://github.com/google/protobuf/archive/v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads \\\n && tar xzf v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googlemock/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googlemock-release-1.7.0 gmock\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googletest/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googletest-release-1.7.0 gmock/gtest\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install\n#\n#  Install grpc\n#  grpc 0.15.1\n#\nRUN cd /root/downloads \\\n && git clone https://github.com/grpc/grpc.git\nRUN cd /root/downloads/grpc \\\n && git checkout release-0_15_1\nRUN cd /root/downloads/grpc \\\n && git submodule update --init\nRUN cd /root/downloads/grpc \\\n && cp Makefile Makefile.orig\nRUN cd /root/downloads/grpc \\\n && sed -i '109iREQUIRE_CUSTOM_LIBRARIES_dbg = 1' Makefile\nRUN cd /root/downloads/grpc \\\n && sed -i -e 's/CONFIG ?= opt/CONFIG ?= dbg/g' Makefile\n#\n# diff Makefile.orig Makefile\n# 108a109\n# > REQUIRE_CUSTOM_LIBRARIES_dbg = 1\n# 261c262\n# < CONFIG ?= opt\n# ---\n# > CONFIG ?= dbg\n#\n#\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make install\n#\n#  Boost\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends libboost-all-dev -y\n#\n#  GTEST\n#\nRUN cd /root/downloads \\\n && wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz\nRUN cd /root/downloads \\\n && tar xzf release-1.8.0.tar.gz\nCOPY env/bash_aliases /root/.bash_aliases\nCOPY env/vimrc /root/.vimrc\nCOPY env/tmux.conf /root/.tmux.conf\nCOPY entrypoint.sh /root/entrypoint.sh\nENTRYPOINT [\"/root/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"f7dd744c162e3d8d40bf99c4c95ea9f2","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Dockerfile_afi\n#   Builds docker container where AFI client can be compiled and run\n#\n#   Advanced Forwarding Interface : AFI client examples\n#\n#   Created by Sandesh Kumar Sodhi, January 2017\n#   Copyright (c) [2017] Juniper Networks, Inc. All rights reserved.\n#\n#   All rights reserved.\n#\n#   Notice and Disclaimer: This code is licensed to you under the Apache\n#   License 2.0 (the \"License\"). You may not use this code except in compliance\n#   with the License. This code is not an official Juniper product. You can\n#   obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Third-Party Code: This code may depend on other components under separate\n#   copyright notice and license terms. Your use of the source code for those\n#   components is subject to the terms and conditions of the respective license\n#   as noted in the Third-Party source code file.\n#\nFROM ubuntu:14.04.4\nLABEL maintainer=\"\\\"Sandesh Kumar Sodhi\\\"\"\n#\n#   Build\n#\n#   docker build -f Dockerfile_afi -t afi-docker .\n#\n#   Run:\n#\n#   docker run --name afi --privileged -i -t afi-docker /bin/bash\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl ethtool expect git gdebi-core nmap openssh-client openssl pkg-config psmisc sed ssh sshpass tcpdump telnet tshark tmux unzip vim wget autoconf automake libtool bsdmainutils build-essential software-properties-common -y\n#\n#   gcc 4.9\n#\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc-4.9 g++-4.9 -y\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --remove gcc /usr/bin/gcc-4.8\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9\nRUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 40 --slave /usr/bin/g++ g++ /usr/bin/g++-4.8\n#\n#   Protobuf\n#   google-protobuf (v3.0.0-beta-3.3)\n#\nRUN mkdir -p /root/downloads\nRUN cd /root/downloads \\\n && wget https://github.com/google/protobuf/archive/v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads \\\n && tar xzf v3.0.0-beta-3.3.tar.gz\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googlemock/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googlemock-release-1.7.0 gmock\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && curl -L -O https://github.com/google/googletest/archive/release-1.7.0.zip \\\n && unzip -q release-1.7.0.zip \\\n && rm release-1.7.0.zip \\\n && mv googletest-release-1.7.0 gmock/gtest\nRUN cd /root/downloads/protobuf-3.0.0-beta-3.3 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install\n#\n#   Install grpc\n#   grpc 0.15.1\n#\nRUN cd /root/downloads \\\n && git clone https://github.com/grpc/grpc.git\nRUN cd /root/downloads/grpc \\\n && git checkout release-0_15_1\nRUN cd /root/downloads/grpc \\\n && git submodule update --init\nRUN cd /root/downloads/grpc \\\n && cp Makefile Makefile.orig\nRUN cd /root/downloads/grpc \\\n && sed -i '109iREQUIRE_CUSTOM_LIBRARIES_dbg = 1' Makefile\nRUN cd /root/downloads/grpc \\\n && sed -i -e 's/CONFIG ?= opt/CONFIG ?= dbg/g' Makefile\n#\n#  diff Makefile.orig Makefile\n#  108a109\n#  > REQUIRE_CUSTOM_LIBRARIES_dbg = 1\n#  261c262\n#  < CONFIG ?= opt\n#  ---\n#  > CONFIG ?= dbg\n#\n#\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make\nRUN cd /root/downloads/grpc \\\n && env LD_LIBRARY_PATH=/usr/local/lib make install\n#\n#   Boost\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends libboost-all-dev -y\n#\n#   GTEST\n#\nRUN cd /root/downloads \\\n && wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz\nRUN cd /root/downloads \\\n && tar xzf release-1.8.0.tar.gz\nCOPY env/bash_aliases /root/.bash_aliases\nCOPY env/vimrc /root/.vimrc\nCOPY env/tmux.conf /root/.tmux.conf\nCOPY entrypoint.sh /root/entrypoint.sh\nENTRYPOINT [\"/root/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"0c67b407723eb4f05ae1de0332c08650","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5eaabae1ac960d73a89b9fc8113d87effbd5b33e.dockerfile"}