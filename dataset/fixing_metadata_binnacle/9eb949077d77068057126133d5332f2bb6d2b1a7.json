{"seed":1127011197,"processedDockerfileHash":"062f33dbe00a3fd15750ffa6c2d62c4e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM puckel/docker-airflow:1.8.1\nUSER root\n#\n#   Install GDAL and Python\n#\nRUN set -ex \\\n && apt-get update -yqq \\\n && apt-get install --no-install-recommends libcurl4-openssl-dev build-essential libgeos-dev libproj-dev libopenjp2-7-dev gnupg curl wget python-dev libpq-dev libgraphicsmagick++1-dev libboost-python-dev openjpeg-tools python-requests python-numpy python-scipy apt-utils unzip curl git -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#   Compile GDAL\nENV GDAL_VERSION=\"2.2.1\"\nRUN cd /tmp \\\n && apt-get update -yqq \\\n && apt-get install --no-install-recommends pkg-config \\\n && mkdir gdal-src \\\n && cd gdal-src \\\n && wget http://download.osgeo.org/gdal/$GDAL_VERSION/gdal-$GDAL_VERSION.tar.gz \\\n && tar -xzf gdal-$GDAL_VERSION.tar.gz \\\n && cd gdal-$GDAL_VERSION \\\n && ./configure --with-python \\\n && make -j 4 \\\n && make install \\\n && cd /tmp \\\n && rm -r gdal-src\n#\n#   Install dependencies for s2reader\n#\nRUN apt-get update -yqq \\\n && apt-get install --no-install-recommends libxml2-dev libxslt-dev -yqq \\\n && pip install pip==23.1 --upgrade \\\n && pip install shapely==2.0.1 numpy==1.24.2 lxml==4.9.2 \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#   Install dependencies for evo-odas.git\n#\nRUN apt-get update -yqq \\\n && apt-get install --no-install-recommends libpq-dev python-dev libgraphicsmagick++1-dev libboost-python-dev curl build-essential libcurl4-openssl-dev nano vim rsync -yqq \\\n && pip install sentinelsat==1.2.1 Jinja2==3.1.2 pg_simple==0.2.4 pgmagick==0.7.6 gsconfig==1.0.10 \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#   Clone and install s2reader\n#\nENV EVOODAS_HOME=\"/usr/local/evoodas\" \\\n    EVOODAS_USER=\"airflow\"\nRUN mkdir $EVOODAS_HOME \\\n && cd $EVOODAS_HOME \\\n && git clone https://github.com/ungarj/s2reader.git \\\n && cd s2reader \\\n && easy_install .\n#\n#   Install Utilities\n#\nRUN apt-get update -yqq \\\n && apt-get install --no-install-recommends openssh-client rsync postgresql-client -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base \\\n && pip install hvac==1.1.0\n#   Copy Configuration\nCOPY airflow.cfg /usr/local/airflow/airflow.cfg\nVOLUME [\"/var/data\"]\nUSER airflow\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM puckel/docker-airflow:1.8.1\nUSER root\n#\n#  Install GDAL and Python\n#\nRUN set -ex \\\n && apt-get update -yqq \\\n && apt-get install --no-install-recommends libcurl4-openssl-dev build-essential libgeos-dev libproj-dev libopenjp2-7-dev gnupg curl wget python-dev libpq-dev libgraphicsmagick++1-dev libboost-python-dev openjpeg-tools python-requests python-numpy python-scipy apt-utils unzip curl git -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#  Compile GDAL\nENV GDAL_VERSION=\"2.2.1\"\nRUN cd /tmp \\\n && apt-get update -yqq \\\n && apt-get install pkg-config \\\n && mkdir gdal-src \\\n && cd gdal-src \\\n && wget http://download.osgeo.org/gdal/$GDAL_VERSION/gdal-$GDAL_VERSION.tar.gz \\\n && tar -xzf gdal-$GDAL_VERSION.tar.gz \\\n && cd gdal-$GDAL_VERSION \\\n && ./configure --with-python \\\n && make -j 4 \\\n && make install \\\n && cd /tmp \\\n && rm -r gdal-src\n#\n#  Install dependencies for s2reader\n#\nRUN apt-get update -yqq \\\n && apt-get install libxml2-dev libxslt-dev -yqq \\\n && pip install pip --upgrade \\\n && pip install shapely numpy lxml \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#  Install dependencies for evo-odas.git\n#\nRUN apt-get update -yqq \\\n && apt-get install libpq-dev python-dev libgraphicsmagick++1-dev libboost-python-dev curl build-essential libcurl4-openssl-dev nano vim rsync -yqq \\\n && pip install sentinelsat Jinja2 pg_simple pgmagick gsconfig \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#  Clone and install s2reader\n#\nENV EVOODAS_HOME=\"/usr/local/evoodas\" \\\n    EVOODAS_USER=\"airflow\"\nRUN mkdir $EVOODAS_HOME \\\n && cd $EVOODAS_HOME \\\n && git clone https://github.com/ungarj/s2reader.git \\\n && cd s2reader \\\n && easy_install .\n#\n#  Install Utilities\n#\nRUN apt-get update -yqq \\\n && apt-get install openssh-client rsync postgresql-client -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base \\\n && pip install hvac\n#  Copy Configuration\nCOPY airflow.cfg /usr/local/airflow/airflow.cfg\nVOLUME [\"/var/data\"]\nUSER airflow\n","injectedSmells":[],"originalDockerfileHash":"8bc081bd7f6bfd5fc28c856f432cd37d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM puckel/docker-airflow:1.8.1\nUSER root\n#\n#   Install GDAL and Python\n#\nRUN set -ex \\\n && apt-get update -yqq \\\n && apt-get install --no-install-recommends libcurl4-openssl-dev build-essential libgeos-dev libproj-dev libopenjp2-7-dev gnupg curl wget python-dev libpq-dev libgraphicsmagick++1-dev libboost-python-dev openjpeg-tools python-requests python-numpy python-scipy apt-utils unzip curl git -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#   Compile GDAL\nENV GDAL_VERSION=\"2.2.1\"\nRUN cd /tmp \\\n && apt-get update -yqq \\\n && apt-get install pkg-config \\\n && mkdir gdal-src \\\n && cd gdal-src \\\n && wget http://download.osgeo.org/gdal/$GDAL_VERSION/gdal-$GDAL_VERSION.tar.gz \\\n && tar -xzf gdal-$GDAL_VERSION.tar.gz \\\n && cd gdal-$GDAL_VERSION \\\n && ./configure --with-python \\\n && make -j 4 \\\n && make install \\\n && cd /tmp \\\n && rm -r gdal-src\n#\n#   Install dependencies for s2reader\n#\nRUN apt-get update -yqq \\\n && apt-get install libxml2-dev libxslt-dev -yqq \\\n && pip install pip --upgrade \\\n && pip install shapely numpy lxml \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#   Install dependencies for evo-odas.git\n#\nRUN apt-get update -yqq \\\n && apt-get install libpq-dev python-dev libgraphicsmagick++1-dev libboost-python-dev curl build-essential libcurl4-openssl-dev nano vim rsync -yqq \\\n && pip install sentinelsat Jinja2 pg_simple pgmagick gsconfig \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base\n#\n#   Clone and install s2reader\n#\nENV EVOODAS_HOME=\"/usr/local/evoodas\" \\\n    EVOODAS_USER=\"airflow\"\nRUN mkdir $EVOODAS_HOME \\\n && cd $EVOODAS_HOME \\\n && git clone https://github.com/ungarj/s2reader.git \\\n && cd s2reader \\\n && easy_install .\n#\n#   Install Utilities\n#\nRUN apt-get update -yqq \\\n && apt-get install openssh-client rsync postgresql-client -yqq \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base \\\n && pip install hvac\n#   Copy Configuration\nCOPY airflow.cfg /usr/local/airflow/airflow.cfg\nVOLUME [\"/var/data\"]\nUSER airflow\n","originalDockerfileUglifiedHash":"fa2f0bc657222a5fb94bdce7be0259f9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9eb949077d77068057126133d5332f2bb6d2b1a7.dockerfile"}