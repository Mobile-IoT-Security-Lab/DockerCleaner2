{"seed":1174399463,"processedDockerfileHash":"46df98e6186b61f2cb4575e51d0eb440","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM python:3.5-slim-stretch\n#   ensure unoconv can locate the uno library\nENV PYTHONPATH=\"/usr/lib/python3/dist-packages\"\nRUN usermod -d /home www-data \\\n && chown www-data:www-data /home \\\n && apt-get update \\\n && apt-get install --no-install-recommends git make gcc build-essential gfortran r-base libblas-dev libevent-dev libfreetype6-dev libjpeg-dev libpng-dev libtiff5-dev libxml2-dev libxslt1-dev zlib1g-dev freecad pspp curl gnupg2 -y \\\n && export GOSU_VERSION='1.10' \\\n && mkdir ~/.gnupg \\\n && chmod 600 ~/.gnupg \\\n && echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -o /usr/local/bin/gosu -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;)\" \\\n && curl -o /usr/local/bin/gosu.asc -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;).asc\" \\\n && gpg --verify /usr/local/bin/gosu.asc \\\n && rm /usr/local/bin/gosu.asc \\\n && chmod +x /usr/local/bin/gosu \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pip==23.1 -U \\\n && pip install setuptools==37.0.0 \\\n && mkdir -p /code\nENV LIBREOFFICE_VERSION=\"6.1.6\"\nENV LIBREOFFICE_ARCHIVE=\"LibreOffice_6.1.6_Linux_x86-64_deb.tar.gz\"\nENV LIBREOFFICE_MIRROR_URL=\"https://download.documentfoundation.org/libreoffice/stable/\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl gnupg2 -y \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys AFEEAEA3 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE\" -o $LIBREOFFICE_ARCHIVE \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE.asc\" -o $LIBREOFFICE_ARCHIVE.asc \\\n && gpg --verify \"$LIBREOFFICE_ARCHIVE.asc\" \\\n && mkdir /tmp/libreoffice \\\n && tar -xvf \"$LIBREOFFICE_ARCHIVE\" -C /tmp/libreoffice/ --strip-components=1 \\\n && dpkg -i /tmp/libreoffice/**/*.deb \\\n && rm $LIBREOFFICE_ARCHIVE* \\\n && rm -Rf /tmp/libreoffice \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install unoconv==0.8.2\nWORKDIR /code\nCOPY ./requirements.txt ./\nRUN pip install --no-cache-dir -r ./requirements.txt\n#   Copy the rest of the code over\nCOPY ./ ./\nARG GIT_COMMIT\nENV GIT_COMMIT=\"${GIT_COMMIT}\"\nRUN python setup.py develop\nEXPOSE 7778/tcp\nCMD [\"gosu\", \"www-data\", \"invoke\", \"server\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM python:3.5-slim-stretch\n#  ensure unoconv can locate the uno library\nENV PYTHONPATH=\"/usr/lib/python3/dist-packages\"\nRUN usermod -d /home www-data \\\n && chown www-data:www-data /home \\\n && apt-get update \\\n && apt-get install git make gcc build-essential gfortran r-base libblas-dev libevent-dev libfreetype6-dev libjpeg-dev libpng-dev libtiff5-dev libxml2-dev libxslt1-dev zlib1g-dev freecad pspp curl gnupg2 -y \\\n && export GOSU_VERSION='1.10' \\\n && mkdir ~/.gnupg \\\n && chmod 600 ~/.gnupg \\\n && echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -o /usr/local/bin/gosu -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;)\" \\\n && curl -o /usr/local/bin/gosu.asc -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;).asc\" \\\n && gpg --verify /usr/local/bin/gosu.asc \\\n && rm /usr/local/bin/gosu.asc \\\n && chmod +x /usr/local/bin/gosu \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pip -U \\\n && pip install setuptools==37.0.0 \\\n && mkdir -p /code\nENV LIBREOFFICE_VERSION=\"6.1.6\"\nENV LIBREOFFICE_ARCHIVE=\"LibreOffice_6.1.6_Linux_x86-64_deb.tar.gz\"\nENV LIBREOFFICE_MIRROR_URL=\"https://download.documentfoundation.org/libreoffice/stable/\"\nRUN apt-get update \\\n && apt-get install curl gnupg2 -y \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys AFEEAEA3 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE\" -o $LIBREOFFICE_ARCHIVE \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE.asc\" -o $LIBREOFFICE_ARCHIVE.asc \\\n && gpg --verify \"$LIBREOFFICE_ARCHIVE.asc\" \\\n && mkdir /tmp/libreoffice \\\n && tar -xvf \"$LIBREOFFICE_ARCHIVE\" -C /tmp/libreoffice/ --strip-components=1 \\\n && dpkg -i /tmp/libreoffice/**/*.deb \\\n && rm $LIBREOFFICE_ARCHIVE* \\\n && rm -Rf /tmp/libreoffice \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install unoconv==0.8.2\nWORKDIR /code\nCOPY ./requirements.txt ./\nRUN pip install --no-cache-dir -r ./requirements.txt\n#  Copy the rest of the code over\nCOPY ./ ./\nARG GIT_COMMIT\nENV GIT_COMMIT=\"${GIT_COMMIT}\"\nRUN python setup.py develop\nEXPOSE 7778/tcp\nCMD [\"gosu\", \"www-data\", \"invoke\", \"server\"]\n","injectedSmells":[],"originalDockerfileHash":"954d5fa9b5f7287a71352bc045ffe9e7","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM python:3.5-slim-stretch\n#   ensure unoconv can locate the uno library\nENV PYTHONPATH=\"/usr/lib/python3/dist-packages\"\nRUN usermod -d /home www-data \\\n && chown www-data:www-data /home \\\n && apt-get update \\\n && apt-get install git make gcc build-essential gfortran r-base libblas-dev libevent-dev libfreetype6-dev libjpeg-dev libpng-dev libtiff5-dev libxml2-dev libxslt1-dev zlib1g-dev freecad pspp curl gnupg2 -y \\\n && export GOSU_VERSION='1.10' \\\n && mkdir ~/.gnupg \\\n && chmod 600 ~/.gnupg \\\n && echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -o /usr/local/bin/gosu -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;)\" \\\n && curl -o /usr/local/bin/gosu.asc -SL \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$( dpkg --print-architecture ;).asc\" \\\n && gpg --verify /usr/local/bin/gosu.asc \\\n && rm /usr/local/bin/gosu.asc \\\n && chmod +x /usr/local/bin/gosu \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pip -U \\\n && pip install setuptools==37.0.0 \\\n && mkdir -p /code\nENV LIBREOFFICE_VERSION=\"6.1.6\"\nENV LIBREOFFICE_ARCHIVE=\"LibreOffice_6.1.6_Linux_x86-64_deb.tar.gz\"\nENV LIBREOFFICE_MIRROR_URL=\"https://download.documentfoundation.org/libreoffice/stable/\"\nRUN apt-get update \\\n && apt-get install curl gnupg2 -y \\\n && for server in hkp://ipv4.pool.sks-keyservers.net:80 hkp://ha.pool.sks-keyservers.net:80 hkp://pgp.mit.edu:80 hkp://keyserver.pgp.com:80; do gpg --keyserver \"$server\" --recv-keys AFEEAEA3 \\\n && break || echo \"Trying new server...\" ; done \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE\" -o $LIBREOFFICE_ARCHIVE \\\n && curl -SL \"$LIBREOFFICE_MIRROR_URL/$LIBREOFFICE_VERSION/deb/x86_64/$LIBREOFFICE_ARCHIVE.asc\" -o $LIBREOFFICE_ARCHIVE.asc \\\n && gpg --verify \"$LIBREOFFICE_ARCHIVE.asc\" \\\n && mkdir /tmp/libreoffice \\\n && tar -xvf \"$LIBREOFFICE_ARCHIVE\" -C /tmp/libreoffice/ --strip-components=1 \\\n && dpkg -i /tmp/libreoffice/**/*.deb \\\n && rm $LIBREOFFICE_ARCHIVE* \\\n && rm -Rf /tmp/libreoffice \\\n && apt-get clean \\\n && apt-get autoremove -y curl gnupg2 \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install unoconv==0.8.2\nWORKDIR /code\nCOPY ./requirements.txt ./\nRUN pip install --no-cache-dir -r ./requirements.txt\n#   Copy the rest of the code over\nCOPY ./ ./\nARG GIT_COMMIT\nENV GIT_COMMIT=\"${GIT_COMMIT}\"\nRUN python setup.py develop\nEXPOSE 7778/tcp\nCMD [\"gosu\", \"www-data\", \"invoke\", \"server\"]\n","originalDockerfileUglifiedHash":"c44e74982f24206bf38556cc3fbd7074","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/937132d9e7f91c930f238bd0016a33ad5cc6ce94.dockerfile"}