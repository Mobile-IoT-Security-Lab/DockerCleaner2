{"seed":1381046261,"processedDockerfileHash":"3abb602ab0f1f8dd01131477bfda847e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck"],"processedDockerfile":"FROM nvidia/cuda:8.0-devel-ubuntu14.04\nMAINTAINER Yuki Iida <aiueo.0409@gmail.com>\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common wget curl git cmake cmake-curses-gui -y\n#   Install ROS\nRUN wget http://packages.ros.org/ros.key -O - | apt-key add -\nRUN echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list\nRUN apt-get update \\\n && apt-get install --no-install-recommends ros-indigo-desktop-full ros-indigo-nmea-msgs ros-indigo-nmea-navsat-driver ros-indigo-sound-play ros-indigo-jsk-visualization ros-indigo-grid-map ros-indigo-gps-common -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends ros-indigo-controller-manager ros-indigo-ros-control ros-indigo-ros-controllers ros-indigo-gazebo-ros-control ros-indigo-sicktoolbox ros-indigo-sicktoolbox-wrapper ros-indigo-joystick-drivers ros-indigo-novatel-span-driver -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends libnlopt-dev freeglut3-dev qtbase5-dev libqt5opengl5-dev libssh2-1-dev libarmadillo-dev libpcap-dev gksu libgl1-mesa-dev libglew-dev software-properties-common libyaml-cpp-dev python-flask python-requests -y\nRUN add-apt-repository ppa:mosquitto-dev/mosquitto-ppa\nRUN apt-get update \\\n && apt-get install --no-install-recommends libmosquitto-dev -y\nRUN rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc\n#   Develop\nRUN apt-get install --no-install-recommends libboost-all-dev libflann-dev libgsl0-dev libgoogle-perftools-dev libeigen3-dev -y\n#   Install some basic GUI and sound libs\nRUN apt-get install --no-install-recommends xz-utils file locales dbus-x11 pulseaudio dmz-cursor-theme fonts-dejavu fonts-liberation hicolor-icon-theme libcanberra-gtk3-0 libcanberra-gtk-module libcanberra-gtk3-module libasound2 libgtk2.0-0 libdbus-glib-1-2 libxt6 libexif12 libgl1-mesa-glx libgl1-mesa-dri -y \\\n && update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX\n#   Install some basic GUI tools\nRUN apt-get install --no-install-recommends cmake-qt-gui gnome-terminal -y\n#   Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#   Setup .bashrc for ROS\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\n#  ###########\n#  #PT GREY FlyCaptureSDK\n#  ###########\n#  download driver\nRUN wget http://ertl.jp/~amonrroy/flycapture2-2.6.3.4-amd64-pkg.tgz \\\n && tar -xvzf flycapture2-2.6.3.4-amd64-pkg.tgz\n#  #install dependencies\nRUN apt-get install --no-install-recommends libraw1394-11 libgtk2.0-0 libgtkmm-2.4-dev libglademm-2.4-dev libgtkglextmm-x11-1.2-dev libusb-1.0-0 -y\nRUN cd flycapture2-2.6.3.4-amd64 \\\n && dpkg -i libflycapture-2* \\\n && dpkg -i libflycapturegui-2* \\\n && dpkg -i libflycapture-c-2* \\\n && dpkg -i libflycapturegui-c-2* \\\n && dpkg -i libmultisync-2* \\\n && dpkg -i flycap-2* \\\n && dpkg -i flycapture-doc-2* \\\n && dpkg -i updatorgui*\n#  setup camera usb permissions\nENV PGUDEVFILE=\"/etc/udev/rules.d/40-pgr.rules\"\nRUN groupadd -f pgrimaging \\\n && usermod -a -G pgrimaging $USERNAME \\\n && echo \"SUBSYSTEM==\\\"usb\\\", ATTR{idVendor}==\\\"1e10\\\", MODE=\\\"0666\\\", GROUP=\\\"pgrimaging\\\" \" >> PGUDEVFILE \\\n && /etc/init.d/udev restart\n#  # End PT GREY\n#   Change user\nUSER autoware\n#   YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#   Install Autoware\nRUN cd \\\n && mkdir /home/$USERNAME/Autoware\nCOPY --chown=autoware ./ /home/$USERNAME/Autoware/\nRUN git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/indigo/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#   Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#FFFFFF\"\n#   Default CMD\nCMD [\"/bin/bash\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM nvidia/cuda:8.0-devel-ubuntu14.04\nMAINTAINER Yuki Iida <aiueo.0409@gmail.com>\nRUN apt-get update \\\n && apt-get install software-properties-common wget curl git cmake cmake-curses-gui -y\n#  Install ROS\nRUN wget http://packages.ros.org/ros.key -O - | apt-key add -\nRUN echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list\nRUN apt-get update \\\n && apt-get install ros-indigo-desktop-full ros-indigo-nmea-msgs ros-indigo-nmea-navsat-driver ros-indigo-sound-play ros-indigo-jsk-visualization ros-indigo-grid-map ros-indigo-gps-common -y\nRUN apt-get update \\\n && apt-get install ros-indigo-controller-manager ros-indigo-ros-control ros-indigo-ros-controllers ros-indigo-gazebo-ros-control ros-indigo-sicktoolbox ros-indigo-sicktoolbox-wrapper ros-indigo-joystick-drivers ros-indigo-novatel-span-driver -y\nRUN apt-get update \\\n && apt-get install libnlopt-dev freeglut3-dev qtbase5-dev libqt5opengl5-dev libssh2-1-dev libarmadillo-dev libpcap-dev gksu libgl1-mesa-dev libglew-dev software-properties-common libyaml-cpp-dev python-flask python-requests -y\nRUN add-apt-repository ppa:mosquitto-dev/mosquitto-ppa\nRUN apt-get update \\\n && apt-get install libmosquitto-dev -y\nRUN rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc\n#  Develop\nRUN apt-get install libboost-all-dev libflann-dev libgsl0-dev libgoogle-perftools-dev libeigen3-dev -y\n#  Install some basic GUI and sound libs\nRUN apt-get install xz-utils file locales dbus-x11 pulseaudio dmz-cursor-theme fonts-dejavu fonts-liberation hicolor-icon-theme libcanberra-gtk3-0 libcanberra-gtk-module libcanberra-gtk3-module libasound2 libgtk2.0-0 libdbus-glib-1-2 libxt6 libexif12 libgl1-mesa-glx libgl1-mesa-dri -y \\\n && update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX\n#  Install some basic GUI tools\nRUN apt-get install cmake-qt-gui gnome-terminal -y\n#  Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#  Setup .bashrc for ROS\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\n# ###########\n# #PT GREY FlyCaptureSDK\n# ###########\n# download driver\nRUN wget http://ertl.jp/~amonrroy/flycapture2-2.6.3.4-amd64-pkg.tgz \\\n && tar -xvzf flycapture2-2.6.3.4-amd64-pkg.tgz\n# #install dependencies\nRUN apt-get install libraw1394-11 libgtk2.0-0 libgtkmm-2.4-dev libglademm-2.4-dev libgtkglextmm-x11-1.2-dev libusb-1.0-0 -y\nRUN cd flycapture2-2.6.3.4-amd64 \\\n && dpkg -i libflycapture-2* \\\n && dpkg -i libflycapturegui-2* \\\n && dpkg -i libflycapture-c-2* \\\n && dpkg -i libflycapturegui-c-2* \\\n && dpkg -i libmultisync-2* \\\n && dpkg -i flycap-2* \\\n && dpkg -i flycapture-doc-2* \\\n && dpkg -i updatorgui*\n# setup camera usb permissions\nENV PGUDEVFILE=\"/etc/udev/rules.d/40-pgr.rules\"\nRUN groupadd -f pgrimaging \\\n && usermod -a -G pgrimaging $USERNAME \\\n && echo \"SUBSYSTEM==\\\"usb\\\", ATTR{idVendor}==\\\"1e10\\\", MODE=\\\"0666\\\", GROUP=\\\"pgrimaging\\\" \" >> PGUDEVFILE \\\n && /etc/init.d/udev restart\n# # End PT GREY\n#  Change user\nUSER autoware\n#  YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#  Install Autoware\nRUN cd \\\n && mkdir /home/$USERNAME/Autoware\nCOPY --chown=autoware ./ /home/$USERNAME/Autoware/\nRUN git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/indigo/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#  Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#FFFFFF\"\n#  Default CMD\nCMD [\"/bin/bash\"]\n","injectedSmells":[],"originalDockerfileHash":"b0b553a5b9d8d7b107736589525117f5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM nvidia/cuda:8.0-devel-ubuntu14.04\nMAINTAINER Yuki Iida <aiueo.0409@gmail.com>\nRUN apt-get update \\\n && apt-get install software-properties-common wget curl git cmake cmake-curses-gui -y\n#   Install ROS\nRUN wget http://packages.ros.org/ros.key -O - | apt-key add -\nRUN echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list\nRUN apt-get update \\\n && apt-get install ros-indigo-desktop-full ros-indigo-nmea-msgs ros-indigo-nmea-navsat-driver ros-indigo-sound-play ros-indigo-jsk-visualization ros-indigo-grid-map ros-indigo-gps-common -y\nRUN apt-get update \\\n && apt-get install ros-indigo-controller-manager ros-indigo-ros-control ros-indigo-ros-controllers ros-indigo-gazebo-ros-control ros-indigo-sicktoolbox ros-indigo-sicktoolbox-wrapper ros-indigo-joystick-drivers ros-indigo-novatel-span-driver -y\nRUN apt-get update \\\n && apt-get install libnlopt-dev freeglut3-dev qtbase5-dev libqt5opengl5-dev libssh2-1-dev libarmadillo-dev libpcap-dev gksu libgl1-mesa-dev libglew-dev software-properties-common libyaml-cpp-dev python-flask python-requests -y\nRUN add-apt-repository ppa:mosquitto-dev/mosquitto-ppa\nRUN apt-get update \\\n && apt-get install libmosquitto-dev -y\nRUN rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc\n#   Develop\nRUN apt-get install libboost-all-dev libflann-dev libgsl0-dev libgoogle-perftools-dev libeigen3-dev -y\n#   Install some basic GUI and sound libs\nRUN apt-get install xz-utils file locales dbus-x11 pulseaudio dmz-cursor-theme fonts-dejavu fonts-liberation hicolor-icon-theme libcanberra-gtk3-0 libcanberra-gtk-module libcanberra-gtk3-module libasound2 libgtk2.0-0 libdbus-glib-1-2 libxt6 libexif12 libgl1-mesa-glx libgl1-mesa-dri -y \\\n && update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX\n#   Install some basic GUI tools\nRUN apt-get install cmake-qt-gui gnome-terminal -y\n#   Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#   Setup .bashrc for ROS\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\n#  ###########\n#  #PT GREY FlyCaptureSDK\n#  ###########\n#  download driver\nRUN wget http://ertl.jp/~amonrroy/flycapture2-2.6.3.4-amd64-pkg.tgz \\\n && tar -xvzf flycapture2-2.6.3.4-amd64-pkg.tgz\n#  #install dependencies\nRUN apt-get install libraw1394-11 libgtk2.0-0 libgtkmm-2.4-dev libglademm-2.4-dev libgtkglextmm-x11-1.2-dev libusb-1.0-0 -y\nRUN cd flycapture2-2.6.3.4-amd64 \\\n && dpkg -i libflycapture-2* \\\n && dpkg -i libflycapturegui-2* \\\n && dpkg -i libflycapture-c-2* \\\n && dpkg -i libflycapturegui-c-2* \\\n && dpkg -i libmultisync-2* \\\n && dpkg -i flycap-2* \\\n && dpkg -i flycapture-doc-2* \\\n && dpkg -i updatorgui*\n#  setup camera usb permissions\nENV PGUDEVFILE=\"/etc/udev/rules.d/40-pgr.rules\"\nRUN groupadd -f pgrimaging \\\n && usermod -a -G pgrimaging $USERNAME \\\n && echo \"SUBSYSTEM==\\\"usb\\\", ATTR{idVendor}==\\\"1e10\\\", MODE=\\\"0666\\\", GROUP=\\\"pgrimaging\\\" \" >> PGUDEVFILE \\\n && /etc/init.d/udev restart\n#  # End PT GREY\n#   Change user\nUSER autoware\n#   YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#   Install Autoware\nRUN cd \\\n && mkdir /home/$USERNAME/Autoware\nCOPY --chown=autoware ./ /home/$USERNAME/Autoware/\nRUN git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/indigo/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#   Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#FFFFFF\"\n#   Default CMD\nCMD [\"/bin/bash\"]\n","originalDockerfileUglifiedHash":"4b166ef28e9a98d6695e7ac044865602","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9404449d38461e92473e80376bb225ec89413576.dockerfile"}