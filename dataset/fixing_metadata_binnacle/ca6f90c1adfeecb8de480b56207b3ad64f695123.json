{"seed":1787433845,"processedDockerfileHash":"589c479a288247235d8575bb313a63bd","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM akabe/iocaml:debian8_ocaml4.05.0\nENV TENSORFLOW_VERSION=\"1.1.0\"\nENV LD_LIBRARY_PATH=\"/usr/lib:$LD_LIBRARY_PATH\"\nENV LIBRARY_PATH=\"/usr/lib:$LIBRARY_PATH\"\nCOPY iocaml-datascience-extra.list /etc/apt/sources.list.d/iocaml-datascience-extra.list\nRUN curl -L \"https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-${TENSORFLOW_VERSION}.tar.gz\" | sudo tar xz -C /usr \\\n && sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db \\\n && sudo apt-get update \\\n && sudo apt-get install -y rsync aspcud bzip2 gfortran ssh libffi-dev libblas-dev liblapack-dev libgsl0-dev libfftw3-dev libsvm-dev libcairo2-dev libmariadb-dev libpq-dev libsqlite3-dev libcurl4-openssl-dev libgmp-dev imagemagick ffmpeg \\\n && sudo ln -sf /usr/lib/x86_64-linux-gnu/libmysqlclient.so.20 /usr/lib/libmysqlclient.so \\\n && eval $( opam config env ;) \\\n && opam update \\\n && opam upgrade -y \\\n && (opam install -y batteries lwt_ssl tls 'cohttp>=0.22.0' || : ) \\\n && opam install -y num 'core>=v0.9.0' 'async>=v0.9.0' lacaml slap lbfgs ocephes oml gsl gpr fftw3 'cairo2>=0.5' archimedes mysql 'mariadb>=0.8.1' postgresql sqlite3 ocurl 'oasis>=0.4.0' \\\n && : install libsvm \\\n && curl -L https://bitbucket.org/ogu/libsvm-ocaml/downloads/libsvm-ocaml-0.9.3.tar.gz -o /tmp/libsvm-ocaml-0.9.3.tar.gz \\\n && tar zxf /tmp/libsvm-ocaml-0.9.3.tar.gz -C /tmp \\\n && (cd /tmp/libsvm-ocaml-0.9.3 \\\n && oasis setup \\\n && ./configure --prefix=$( opam config var prefix ;) \\\n && make \\\n && make install ) \\\n && rm -rf /tmp/libsvm-ocaml-0.9.3.tar.gz /tmp/libsvm-ocaml-0.9.3 \\\n && : install tensorflow \\\n && curl -L \"https://github.com/LaurentMazare/tensorflow-ocaml/archive/0.0.10.1.tar.gz\" -o /tmp/tensorflow-ocaml-0.0.10.1.tar.gz \\\n && tar zxf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz -C /tmp \\\n && (cd /tmp/tensorflow-ocaml-0.0.10.1 \\\n && sed -i 's/(no_dynlink)//' src/wrapper/jbuild \\\n && sed -i 's/(modes (native))//' src/wrapper/jbuild ) \\\n && opam pin add -y /tmp/tensorflow-ocaml-0.0.10.1 \\\n && rm -rf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz /tmp/tensorflow-ocaml-0.0.10.1 \\\n && find $HOME/.opam -regex '.*\\.\\(cmt\\|cmti\\|annot\\|byte\\)' -delete \\\n && rm -rf $HOME/.opam/archives $HOME/.opam/repo/default/archives $HOME/.opam/$OCAML_VERSION/man $HOME/.opam/$OCAML_VERSION/build \\\n && opam uninstall oasis \\\n && sudo apt-get purge -y rsync aspcud bzip2 gfortran \\\n && sudo apt-get autoremove -y \\\n && sudo apt-get autoclean\nCOPY custom.css /home/opam/.jupyter/custom/custom.css\nCOPY notebook.json /home/opam/.jupyter/nbconfig/notebook.json\nRUN sudo chown opam:opam -R /home/opam/.jupyter \\\n && curl -L https://raw.githubusercontent.com/andrewray/iocaml/master/profile/static/custom/iocamlnblogo.png -o /home/opam/.jupyter/custom/iocamlnblogo.png\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM akabe/iocaml:debian8_ocaml4.05.0\nENV TENSORFLOW_VERSION=\"1.1.0\"\nENV LD_LIBRARY_PATH=\"/usr/lib:$LD_LIBRARY_PATH\"\nENV LIBRARY_PATH=\"/usr/lib:$LIBRARY_PATH\"\nADD iocaml-datascience-extra.list /etc/apt/sources.list.d/iocaml-datascience-extra.list\nRUN curl -L \"https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-${TENSORFLOW_VERSION}.tar.gz\" | sudo tar xz -C /usr \\\n && sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db \\\n && sudo apt-get update \\\n && sudo apt-get install -y rsync aspcud bzip2 gfortran ssh libffi-dev libblas-dev liblapack-dev libgsl0-dev libfftw3-dev libsvm-dev libcairo2-dev libmariadb-dev libpq-dev libsqlite3-dev libcurl4-openssl-dev libgmp-dev imagemagick ffmpeg \\\n && sudo ln -sf /usr/lib/x86_64-linux-gnu/libmysqlclient.so.20 /usr/lib/libmysqlclient.so \\\n && eval $( opam config env ;) \\\n && opam update \\\n && opam upgrade -y \\\n && (opam install -y batteries lwt_ssl tls 'cohttp>=0.22.0' || : ) \\\n && opam install -y num 'core>=v0.9.0' 'async>=v0.9.0' lacaml slap lbfgs ocephes oml gsl gpr fftw3 'cairo2>=0.5' archimedes mysql 'mariadb>=0.8.1' postgresql sqlite3 ocurl 'oasis>=0.4.0' \\\n && : install libsvm \\\n && curl -L https://bitbucket.org/ogu/libsvm-ocaml/downloads/libsvm-ocaml-0.9.3.tar.gz -o /tmp/libsvm-ocaml-0.9.3.tar.gz \\\n && tar zxf /tmp/libsvm-ocaml-0.9.3.tar.gz -C /tmp \\\n && (cd /tmp/libsvm-ocaml-0.9.3 \\\n && oasis setup \\\n && ./configure --prefix=$( opam config var prefix ;) \\\n && make \\\n && make install ) \\\n && rm -rf /tmp/libsvm-ocaml-0.9.3.tar.gz /tmp/libsvm-ocaml-0.9.3 \\\n && : install tensorflow \\\n && curl -L \"https://github.com/LaurentMazare/tensorflow-ocaml/archive/0.0.10.1.tar.gz\" -o /tmp/tensorflow-ocaml-0.0.10.1.tar.gz \\\n && tar zxf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz -C /tmp \\\n && (cd /tmp/tensorflow-ocaml-0.0.10.1 \\\n && sed -i 's/(no_dynlink)//' src/wrapper/jbuild \\\n && sed -i 's/(modes (native))//' src/wrapper/jbuild ) \\\n && opam pin add -y /tmp/tensorflow-ocaml-0.0.10.1 \\\n && rm -rf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz /tmp/tensorflow-ocaml-0.0.10.1 \\\n && find $HOME/.opam -regex '.*\\.\\(cmt\\|cmti\\|annot\\|byte\\)' -delete \\\n && rm -rf $HOME/.opam/archives $HOME/.opam/repo/default/archives $HOME/.opam/$OCAML_VERSION/man $HOME/.opam/$OCAML_VERSION/build \\\n && opam uninstall oasis \\\n && sudo apt-get purge -y rsync aspcud bzip2 gfortran \\\n && sudo apt-get autoremove -y \\\n && sudo apt-get autoclean\nADD custom.css /home/opam/.jupyter/custom/custom.css\nADD notebook.json /home/opam/.jupyter/nbconfig/notebook.json\nRUN sudo chown opam:opam -R /home/opam/.jupyter \\\n && curl -L https://raw.githubusercontent.com/andrewray/iocaml/master/profile/static/custom/iocamlnblogo.png -o /home/opam/.jupyter/custom/iocamlnblogo.png\n","injectedSmells":[],"originalDockerfileHash":"fb8151eaa86e4d00cdeca3336a8a1375","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM akabe/iocaml:debian8_ocaml4.05.0\nENV TENSORFLOW_VERSION=\"1.1.0\"\nENV LD_LIBRARY_PATH=\"/usr/lib:$LD_LIBRARY_PATH\"\nENV LIBRARY_PATH=\"/usr/lib:$LIBRARY_PATH\"\nADD iocaml-datascience-extra.list /etc/apt/sources.list.d/iocaml-datascience-extra.list\nRUN curl -L \"https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-${TENSORFLOW_VERSION}.tar.gz\" | sudo tar xz -C /usr \\\n && sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db \\\n && sudo apt-get update \\\n && sudo apt-get install -y rsync aspcud bzip2 gfortran ssh libffi-dev libblas-dev liblapack-dev libgsl0-dev libfftw3-dev libsvm-dev libcairo2-dev libmariadb-dev libpq-dev libsqlite3-dev libcurl4-openssl-dev libgmp-dev imagemagick ffmpeg \\\n && sudo ln -sf /usr/lib/x86_64-linux-gnu/libmysqlclient.so.20 /usr/lib/libmysqlclient.so \\\n && eval $( opam config env ;) \\\n && opam update \\\n && opam upgrade -y \\\n && (opam install -y batteries lwt_ssl tls 'cohttp>=0.22.0' || : ) \\\n && opam install -y num 'core>=v0.9.0' 'async>=v0.9.0' lacaml slap lbfgs ocephes oml gsl gpr fftw3 'cairo2>=0.5' archimedes mysql 'mariadb>=0.8.1' postgresql sqlite3 ocurl 'oasis>=0.4.0' \\\n && : install libsvm \\\n && curl -L https://bitbucket.org/ogu/libsvm-ocaml/downloads/libsvm-ocaml-0.9.3.tar.gz -o /tmp/libsvm-ocaml-0.9.3.tar.gz \\\n && tar zxf /tmp/libsvm-ocaml-0.9.3.tar.gz -C /tmp \\\n && (cd /tmp/libsvm-ocaml-0.9.3 \\\n && oasis setup \\\n && ./configure --prefix=$( opam config var prefix ;) \\\n && make \\\n && make install ) \\\n && rm -rf /tmp/libsvm-ocaml-0.9.3.tar.gz /tmp/libsvm-ocaml-0.9.3 \\\n && : install tensorflow \\\n && curl -L \"https://github.com/LaurentMazare/tensorflow-ocaml/archive/0.0.10.1.tar.gz\" -o /tmp/tensorflow-ocaml-0.0.10.1.tar.gz \\\n && tar zxf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz -C /tmp \\\n && (cd /tmp/tensorflow-ocaml-0.0.10.1 \\\n && sed -i 's/(no_dynlink)//' src/wrapper/jbuild \\\n && sed -i 's/(modes (native))//' src/wrapper/jbuild ) \\\n && opam pin add -y /tmp/tensorflow-ocaml-0.0.10.1 \\\n && rm -rf /tmp/tensorflow-ocaml-0.0.10.1.tar.gz /tmp/tensorflow-ocaml-0.0.10.1 \\\n && find $HOME/.opam -regex '.*\\.\\(cmt\\|cmti\\|annot\\|byte\\)' -delete \\\n && rm -rf $HOME/.opam/archives $HOME/.opam/repo/default/archives $HOME/.opam/$OCAML_VERSION/man $HOME/.opam/$OCAML_VERSION/build \\\n && opam uninstall oasis \\\n && sudo apt-get purge -y rsync aspcud bzip2 gfortran \\\n && sudo apt-get autoremove -y \\\n && sudo apt-get autoclean\nADD custom.css /home/opam/.jupyter/custom/custom.css\nADD notebook.json /home/opam/.jupyter/nbconfig/notebook.json\nRUN sudo chown opam:opam -R /home/opam/.jupyter \\\n && curl -L https://raw.githubusercontent.com/andrewray/iocaml/master/profile/static/custom/iocamlnblogo.png -o /home/opam/.jupyter/custom/iocamlnblogo.png\n","originalDockerfileUglifiedHash":"fb8151eaa86e4d00cdeca3336a8a1375","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ca6f90c1adfeecb8de480b56207b3ad64f695123.dockerfile"}