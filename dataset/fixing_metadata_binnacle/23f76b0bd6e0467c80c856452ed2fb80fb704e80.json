{"seed":3002199939,"processedDockerfileHash":"0805f295e4fdd523206139bdf5a60e3a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Use Ubuntu 14.04 as the base container\nFROM ubuntu:16.04\n#   Add Standard Packages + Verification Key\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9\nRUN apt-get update -y -qq \\\n && apt-get install --no-install-recommends netcat=1.10-41 openssl=1.0.2g-1ubuntu4.20 apache2=2.4.18-2ubuntu3.17 apache2-utils=2.4.18-2ubuntu3.17 libpcre3=2:8.38-3.1 dnsmasq=2.75-1ubuntu0.16.04.10 procps=2:3.3.10-4ubuntu2.5 apt-transport-https=1.2.35 make=4.1-6 gcc=4:5.3.1-1ubuntu1 g++=4:5.3.1-1ubuntu1 libxml2=2.9.3+dfsg1-1ubuntu0.7 libxml2-dev=2.9.3+dfsg1-1ubuntu0.7 python-pip=8.1.1-2ubuntu0.6 curl=7.47.0-1ubuntu2.19 nano=2.5.3-2ubuntu2 supervisor=3.2.0-2ubuntu0.2 gunicorn=19.4.5-1ubuntu1.1 python3-pip=8.1.1-2ubuntu0.6 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 libpng-dev git=1:2.7.4-0ubuntu1.10 python3=3.5.1-3 python3-dev=3.5.1-3 python3-pip=8.1.1-2ubuntu0.6 python3-numpy=1:1.11.0-1ubuntu1 python3-scipy=0.17.0-1 python-imaging=3.1.2-0ubuntu1.6 -y -qq\n#   Install Kong\nRUN curl -sL https://github.com/Mashape/kong/releases/download/0.9.4/kong-0.9.4.trusty_all.deb > kong-0.9.4.trusty_all.deb \\\n && dpkg -i kong-0.9.4.trusty_all.deb\n#   Install Node 6.x + PM2\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\nRUN apt-get install --no-install-recommends nodejs=4.2.6~dfsg-1ubuntu4.2 -y -qq\nRUN npm install pm2@5.3.0 -g\n#   Install OpenCPU\n#  RUN \\\n#    apt-get update && \\\n#    apt-get -y dist-upgrade && \\\n#    apt-get install -y software-properties-common && \\\n#    add-apt-repository -y ppa:opencpu/opencpu-1.6 && \\\n#    apt-get update && \\\n#    apt-get install -y opencpu \n#  RUN truncate -s 0 /etc/apache2/ports.conf\n#  RUN echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\n#   Create Application User\nRUN useradd -u 7534 -m -d /home/sttrweb -c \"sttr web application\" sttrweb \\\n && mkdir /home/sttrweb/Oncoscape \\\n && mkdir /home/sttrweb/Oncoscape/uploads \\\n && chmod +x /home/sttrweb/Oncoscape/uploads \\\n && mkdir /home/sttrweb/Oncoscape/cache \\\n && mkdir /var/log/nginx/\n#   Python Server\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/oncoscape_algorithm_wrapper.git\nWORKDIR oncoscape_algorithm_wrapper\nRUN pip3 install -r requirements.txt\n#   Upload Tool\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/NG4-Data-Upload.git\n#   Install Client Code\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY client-build /home/sttrweb/Oncoscape/client\nCOPY documentation/dist /home/sttrweb/Oncoscape/documentation\n#   Install Server Code\nCOPY server /home/sttrweb/Oncoscape/server\nWORKDIR /home/sttrweb/Oncoscape/server/\nRUN npm install\n#   Install R Package\n#  COPY cpu/oncoscape_0.1.0.tgz /home/sttrweb/Oncoscape/oncoscape_0.1.0.tgz\n#  WORKDIR /home/sttrweb/Oncoscape/\n#  RUN R CMD INSTALL oncoscape_0.1.0.tgz --library=/usr/local/lib/R/site-library\n#  RUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\n#  RUN Rscript -e \"install.packages(c('devtools','ggplot2','gridSVG','d3heatmap','pls'))\"\n#   Copy Config Files\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY /docker-kong.template /home/sttrweb/Oncoscape/\nCOPY /docker-nginx.template /home/sttrweb/Oncoscape/\nCOPY /docker-supervisord.conf /home/sttrweb/Oncoscape/\nCOPY /docker-entrypoint.sh /home/sttrweb/Oncoscape/\n#   Expose Ports\nEXPOSE 80/tcp 7946/tcp 8000/tcp 8001/tcp 8003/tcp 8004/tcp 10001/tcp\nEXPOSE 7946/udp\n#   Fire It Up\nRUN chmod +x /home/sttrweb/Oncoscape/docker-entrypoint.sh\nENTRYPOINT [\"/home/sttrweb/Oncoscape/docker-entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Use Ubuntu 14.04 as the base container\nFROM ubuntu:16.04\n#  Add Standard Packages + Verification Key\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9\nRUN apt-get update -y -qq \\\n && apt-get install netcat openssl apache2 apache2-utils libpcre3 dnsmasq procps apt-transport-https make gcc g++ libxml2 libxml2-dev python-pip curl nano supervisor gunicorn python3-pip zlib1g-dev libpng-dev git python3 python3-dev python3-pip python3-numpy python3-scipy python-imaging -y -qq\n#  Install Kong\nRUN curl -sL https://github.com/Mashape/kong/releases/download/0.9.4/kong-0.9.4.trusty_all.deb > kong-0.9.4.trusty_all.deb \\\n && dpkg -i kong-0.9.4.trusty_all.deb\n#  Install Node 6.x + PM2\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\nRUN apt-get install nodejs -y -qq\nRUN npm install pm2 -g\n#  Install OpenCPU\n# RUN \\\n#   apt-get update && \\\n#   apt-get -y dist-upgrade && \\\n#   apt-get install -y software-properties-common && \\\n#   add-apt-repository -y ppa:opencpu/opencpu-1.6 && \\\n#   apt-get update && \\\n#   apt-get install -y opencpu \n# RUN truncate -s 0 /etc/apache2/ports.conf\n# RUN echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\n#  Create Application User\nRUN useradd -u 7534 -m -d /home/sttrweb -c \"sttr web application\" sttrweb \\\n && mkdir /home/sttrweb/Oncoscape \\\n && mkdir /home/sttrweb/Oncoscape/uploads \\\n && chmod +x /home/sttrweb/Oncoscape/uploads \\\n && mkdir /home/sttrweb/Oncoscape/cache \\\n && mkdir /var/log/nginx/\n#  Python Server\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/oncoscape_algorithm_wrapper.git\nWORKDIR oncoscape_algorithm_wrapper\nRUN pip3 install -r requirements.txt\n#  Upload Tool\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/NG4-Data-Upload.git\n#  Install Client Code\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY client-build /home/sttrweb/Oncoscape/client\nCOPY documentation/dist /home/sttrweb/Oncoscape/documentation\n#  Install Server Code\nCOPY server /home/sttrweb/Oncoscape/server\nWORKDIR /home/sttrweb/Oncoscape/server/\nRUN npm install\n#  Install R Package\n# COPY cpu/oncoscape_0.1.0.tgz /home/sttrweb/Oncoscape/oncoscape_0.1.0.tgz\n# WORKDIR /home/sttrweb/Oncoscape/\n# RUN R CMD INSTALL oncoscape_0.1.0.tgz --library=/usr/local/lib/R/site-library\n# RUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\n# RUN Rscript -e \"install.packages(c('devtools','ggplot2','gridSVG','d3heatmap','pls'))\"\n#  Copy Config Files\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY /docker-kong.template /home/sttrweb/Oncoscape/\nCOPY /docker-nginx.template /home/sttrweb/Oncoscape/\nCOPY /docker-supervisord.conf /home/sttrweb/Oncoscape/\nCOPY /docker-entrypoint.sh /home/sttrweb/Oncoscape/\n#  Expose Ports\nEXPOSE 80/tcp 7946/tcp 8000/tcp 8001/tcp 8003/tcp 8004/tcp 10001/tcp\nEXPOSE 7946/udp\n#  Fire It Up\nRUN chmod +x /home/sttrweb/Oncoscape/docker-entrypoint.sh\nENTRYPOINT [\"/home/sttrweb/Oncoscape/docker-entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"6dc36850f3afcbc9b47dc17bb2f1ef83","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Use Ubuntu 14.04 as the base container\nFROM ubuntu:16.04\n#   Add Standard Packages + Verification Key\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9\nRUN apt-get update -y -qq \\\n && apt-get install netcat openssl apache2 apache2-utils libpcre3 dnsmasq procps apt-transport-https make gcc g++ libxml2 libxml2-dev python-pip curl nano supervisor gunicorn python3-pip zlib1g-dev libpng-dev git python3 python3-dev python3-pip python3-numpy python3-scipy python-imaging -y -qq\n#   Install Kong\nRUN curl -sL https://github.com/Mashape/kong/releases/download/0.9.4/kong-0.9.4.trusty_all.deb > kong-0.9.4.trusty_all.deb \\\n && dpkg -i kong-0.9.4.trusty_all.deb\n#   Install Node 6.x + PM2\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\nRUN apt-get install nodejs -y -qq\nRUN npm install pm2 -g\n#   Install OpenCPU\n#  RUN \\\n#    apt-get update && \\\n#    apt-get -y dist-upgrade && \\\n#    apt-get install -y software-properties-common && \\\n#    add-apt-repository -y ppa:opencpu/opencpu-1.6 && \\\n#    apt-get update && \\\n#    apt-get install -y opencpu \n#  RUN truncate -s 0 /etc/apache2/ports.conf\n#  RUN echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\n#   Create Application User\nRUN useradd -u 7534 -m -d /home/sttrweb -c \"sttr web application\" sttrweb \\\n && mkdir /home/sttrweb/Oncoscape \\\n && mkdir /home/sttrweb/Oncoscape/uploads \\\n && chmod +x /home/sttrweb/Oncoscape/uploads \\\n && mkdir /home/sttrweb/Oncoscape/cache \\\n && mkdir /var/log/nginx/\n#   Python Server\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/oncoscape_algorithm_wrapper.git\nWORKDIR oncoscape_algorithm_wrapper\nRUN pip3 install -r requirements.txt\n#   Upload Tool\nWORKDIR /home/sttrweb/Oncoscape/\nRUN git clone https://github.com/Oncoscape/NG4-Data-Upload.git\n#   Install Client Code\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY client-build /home/sttrweb/Oncoscape/client\nCOPY documentation/dist /home/sttrweb/Oncoscape/documentation\n#   Install Server Code\nCOPY server /home/sttrweb/Oncoscape/server\nWORKDIR /home/sttrweb/Oncoscape/server/\nRUN npm install\n#   Install R Package\n#  COPY cpu/oncoscape_0.1.0.tgz /home/sttrweb/Oncoscape/oncoscape_0.1.0.tgz\n#  WORKDIR /home/sttrweb/Oncoscape/\n#  RUN R CMD INSTALL oncoscape_0.1.0.tgz --library=/usr/local/lib/R/site-library\n#  RUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\n#  RUN Rscript -e \"install.packages(c('devtools','ggplot2','gridSVG','d3heatmap','pls'))\"\n#   Copy Config Files\nWORKDIR /home/sttrweb/Oncoscape/\nCOPY /docker-kong.template /home/sttrweb/Oncoscape/\nCOPY /docker-nginx.template /home/sttrweb/Oncoscape/\nCOPY /docker-supervisord.conf /home/sttrweb/Oncoscape/\nCOPY /docker-entrypoint.sh /home/sttrweb/Oncoscape/\n#   Expose Ports\nEXPOSE 80/tcp 7946/tcp 8000/tcp 8001/tcp 8003/tcp 8004/tcp 10001/tcp\nEXPOSE 7946/udp\n#   Fire It Up\nRUN chmod +x /home/sttrweb/Oncoscape/docker-entrypoint.sh\nENTRYPOINT [\"/home/sttrweb/Oncoscape/docker-entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"4ec39c1f13be5503e0438ca6968ad9cb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/23f76b0bd6e0467c80c856452ed2fb80fb704e80.dockerfile"}