{"seed":596764722,"processedDockerfileHash":"f3b8e1e7880b8f714ca741432971188a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LANG=\"C.UTF-8\"\n#  ##########\n#  # Tools ##\n#  ##########\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends wget vim git -y\n#  #############\n#  # Anaconda ##\n#  #############\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends libglib2.0-0 libsm6 libxext6 libxrender1 -y\nRUN echo 'export PATH=/opt/conda/bin:$PATH' > /etc/profile.d/conda.sh \\\n && wget --quiet https://repo.continuum.io/archive/Anaconda3-5.0.1-Linux-x86_64.sh -O ~/anaconda.sh \\\n && /bin/bash ~/anaconda.sh -b -p /opt/conda \\\n && rm ~/anaconda.sh\nENV PATH=\"/opt/conda/bin:$PATH\"\n#  ####################\n#  # Python packages ##\n#  ####################\n#   TODO: Find out what needs python-tk\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends python-tk -y\n#   Fonts for tqdm\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends font-manager -y \\\n && echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | debconf-set-selections \\\n && apt-get install --no-install-recommends ttf-mscorefonts-installer -y \\\n && rm ~/.cache/matplotlib -fr\n#   For tqdm\nRUN conda install -y qt -c anaconda\nRUN pip install pip==23.1 --upgrade \\\n && pip install tqdm==4.65.0 bcolz==1.2.1\nRUN CC=\"cc -mavx2\" pip install -U --force-reinstall pillow-simd\n#  ############\n#  # Jupyter ##\n#  ############\nRUN conda install -y notebook \\\n && conda install -y jupyter_contrib_nbextensions -c conda-forge \\\n && jupyter nbextensions_configurator enable --user\n#   Add my Jupyter settings\nCOPY .jupyter /root/.jupyter\n#   For creating interactive visualizations in notebooks\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends ffmpeg -y \\\n && conda install -y ipywidgets -c conda-forge\n#  ###############\n#  # PostgreSQL ##\n#  ###############\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends postgresql libpq-dev postgresql-client postgresql-client-common postgresql-contrib -y\nRUN pip install psycopg2==2.9.6\n#  ############\n#  # PyTorch ##\n#  ############\nRUN conda install -y numpy pyyaml mkl setuptools cmake cffi\nRUN conda install -y magma-cuda90 -c soumith\nRUN git clone --recursive https://github.com/pytorch/pytorch /pytorch\nWORKDIR /pytorch\nRUN python setup.py install\nRUN pip install torchfcn==1.9.7\n#  ################\n#  # FaceTracker ##\n#  ################\nWORKDIR /\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends libcv-dev libopencv-dev -y \\\n && git clone git://github.com/kylemcdonald/FaceTracker.git\nWORKDIR /FaceTracker\nRUN git checkout opencv2 \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/FaceTracker/Makefile -O Makefile \\\n && make\nWORKDIR /\nENV PYFACETRACKER=\"pyFaceTracker-0.1.1\"\nRUN wget https://bitbucket.org/amitibo/pyfacetracker/downloads/$PYFACETRACKER.tar.gz \\\n && tar -x -f $PYFACETRACKER.tar.gz \\\n && rm $PYFACETRACKER.tar.gz \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/setup.py -O /$PYFACETRACKER/setup.py \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/make_opencv_lib_links.sh -O /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && chmod +x /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && /$PYFACETRACKER/make_opencv_lib_links.sh\nWORKDIR $PYFACETRACKER\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends python-dev python-setuptools -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python2 get-pip.py \\\n && python2 -m pip install numpy matplotlib pillow \\\n && python2 setup.py install\n#  #################\n#  # Config files ##\n#  #################\nCOPY .vimrc /root/.vimrc\nCOPY .vim /root/.vim\nCOPY .bashrc /root/.bashrc\nWORKDIR /code/portraitseg\n#   TODO:\n#   apt-get clean && \\\n#   rm -rf /var/lib/apt/lists/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LANG=\"C.UTF-8\"\n# ##########\n# # Tools ##\n# ##########\nRUN apt-get update --fix-missing \\\n && apt-get install wget vim git -y\n# #############\n# # Anaconda ##\n# #############\nRUN apt-get update --fix-missing \\\n && apt-get install libglib2.0-0 libsm6 libxext6 libxrender1 -y\nRUN echo 'export PATH=/opt/conda/bin:$PATH' > /etc/profile.d/conda.sh \\\n && wget --quiet https://repo.continuum.io/archive/Anaconda3-5.0.1-Linux-x86_64.sh -O ~/anaconda.sh \\\n && /bin/bash ~/anaconda.sh -b -p /opt/conda \\\n && rm ~/anaconda.sh\nENV PATH=\"/opt/conda/bin:$PATH\"\n# ####################\n# # Python packages ##\n# ####################\n#  TODO: Find out what needs python-tk\nRUN apt-get update --fix-missing \\\n && apt-get install python-tk -y\n#  Fonts for tqdm\nRUN apt-get update --fix-missing \\\n && apt-get install font-manager -y \\\n && echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | debconf-set-selections \\\n && apt-get install ttf-mscorefonts-installer -y \\\n && rm ~/.cache/matplotlib -fr\n#  For tqdm\nRUN conda install -y qt -c anaconda\nRUN pip install pip --upgrade \\\n && pip install tqdm bcolz\nRUN CC=\"cc -mavx2\" pip install -U --force-reinstall pillow-simd\n# ############\n# # Jupyter ##\n# ############\nRUN conda install -y notebook \\\n && conda install -y jupyter_contrib_nbextensions -c conda-forge \\\n && jupyter nbextensions_configurator enable --user\n#  Add my Jupyter settings\nADD .jupyter /root/.jupyter\n#  For creating interactive visualizations in notebooks\nRUN apt-get update --fix-missing \\\n && apt-get install ffmpeg -y \\\n && conda install -y ipywidgets -c conda-forge\n# ###############\n# # PostgreSQL ##\n# ###############\nRUN apt-get update --fix-missing \\\n && apt-get install postgresql libpq-dev postgresql-client postgresql-client-common postgresql-contrib -y\nRUN pip install psycopg2\n# ############\n# # PyTorch ##\n# ############\nRUN conda install -y numpy pyyaml mkl setuptools cmake cffi\nRUN conda install -y magma-cuda90 -c soumith\nRUN git clone --recursive https://github.com/pytorch/pytorch /pytorch\nWORKDIR /pytorch\nRUN python setup.py install\nRUN pip install torchfcn\n# ################\n# # FaceTracker ##\n# ################\nWORKDIR /\nRUN apt-get update --fix-missing \\\n && apt-get install libcv-dev libopencv-dev -y \\\n && git clone git://github.com/kylemcdonald/FaceTracker.git\nWORKDIR /FaceTracker\nRUN git checkout opencv2 \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/FaceTracker/Makefile -O Makefile \\\n && make\nWORKDIR /\nENV PYFACETRACKER=\"pyFaceTracker-0.1.1\"\nRUN wget https://bitbucket.org/amitibo/pyfacetracker/downloads/$PYFACETRACKER.tar.gz \\\n && tar -x -f $PYFACETRACKER.tar.gz \\\n && rm $PYFACETRACKER.tar.gz \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/setup.py -O /$PYFACETRACKER/setup.py \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/make_opencv_lib_links.sh -O /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && chmod +x /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && /$PYFACETRACKER/make_opencv_lib_links.sh\nWORKDIR $PYFACETRACKER\nRUN apt-get update --fix-missing \\\n && apt-get install python-dev python-setuptools -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python2 get-pip.py \\\n && python2 -m pip install numpy matplotlib pillow \\\n && python2 setup.py install\n# #################\n# # Config files ##\n# #################\nADD .vimrc /root/.vimrc\nADD .vim /root/.vim\nADD .bashrc /root/.bashrc\nWORKDIR /code/portraitseg\n#  TODO:\n#  apt-get clean && \\\n#  rm -rf /var/lib/apt/lists/*\n","injectedSmells":[],"originalDockerfileHash":"7381f01d108670629c2176de2391e832","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LANG=\"C.UTF-8\"\n#  ##########\n#  # Tools ##\n#  ##########\nRUN apt-get update --fix-missing \\\n && apt-get install wget vim git -y\n#  #############\n#  # Anaconda ##\n#  #############\nRUN apt-get update --fix-missing \\\n && apt-get install libglib2.0-0 libsm6 libxext6 libxrender1 -y\nRUN echo 'export PATH=/opt/conda/bin:$PATH' > /etc/profile.d/conda.sh \\\n && wget --quiet https://repo.continuum.io/archive/Anaconda3-5.0.1-Linux-x86_64.sh -O ~/anaconda.sh \\\n && /bin/bash ~/anaconda.sh -b -p /opt/conda \\\n && rm ~/anaconda.sh\nENV PATH=\"/opt/conda/bin:$PATH\"\n#  ####################\n#  # Python packages ##\n#  ####################\n#   TODO: Find out what needs python-tk\nRUN apt-get update --fix-missing \\\n && apt-get install python-tk -y\n#   Fonts for tqdm\nRUN apt-get update --fix-missing \\\n && apt-get install font-manager -y \\\n && echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | debconf-set-selections \\\n && apt-get install ttf-mscorefonts-installer -y \\\n && rm ~/.cache/matplotlib -fr\n#   For tqdm\nRUN conda install -y qt -c anaconda\nRUN pip install pip --upgrade \\\n && pip install tqdm bcolz\nRUN CC=\"cc -mavx2\" pip install -U --force-reinstall pillow-simd\n#  ############\n#  # Jupyter ##\n#  ############\nRUN conda install -y notebook \\\n && conda install -y jupyter_contrib_nbextensions -c conda-forge \\\n && jupyter nbextensions_configurator enable --user\n#   Add my Jupyter settings\nADD .jupyter /root/.jupyter\n#   For creating interactive visualizations in notebooks\nRUN apt-get update --fix-missing \\\n && apt-get install ffmpeg -y \\\n && conda install -y ipywidgets -c conda-forge\n#  ###############\n#  # PostgreSQL ##\n#  ###############\nRUN apt-get update --fix-missing \\\n && apt-get install postgresql libpq-dev postgresql-client postgresql-client-common postgresql-contrib -y\nRUN pip install psycopg2\n#  ############\n#  # PyTorch ##\n#  ############\nRUN conda install -y numpy pyyaml mkl setuptools cmake cffi\nRUN conda install -y magma-cuda90 -c soumith\nRUN git clone --recursive https://github.com/pytorch/pytorch /pytorch\nWORKDIR /pytorch\nRUN python setup.py install\nRUN pip install torchfcn\n#  ################\n#  # FaceTracker ##\n#  ################\nWORKDIR /\nRUN apt-get update --fix-missing \\\n && apt-get install libcv-dev libopencv-dev -y \\\n && git clone git://github.com/kylemcdonald/FaceTracker.git\nWORKDIR /FaceTracker\nRUN git checkout opencv2 \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/FaceTracker/Makefile -O Makefile \\\n && make\nWORKDIR /\nENV PYFACETRACKER=\"pyFaceTracker-0.1.1\"\nRUN wget https://bitbucket.org/amitibo/pyfacetracker/downloads/$PYFACETRACKER.tar.gz \\\n && tar -x -f $PYFACETRACKER.tar.gz \\\n && rm $PYFACETRACKER.tar.gz \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/setup.py -O /$PYFACETRACKER/setup.py \\\n && wget https://raw.githubusercontent.com/MattKleinsmith/dockerfiles/master/portraitseg/pyfacetracker/make_opencv_lib_links.sh -O /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && chmod +x /$PYFACETRACKER/make_opencv_lib_links.sh \\\n && /$PYFACETRACKER/make_opencv_lib_links.sh\nWORKDIR $PYFACETRACKER\nRUN apt-get update --fix-missing \\\n && apt-get install python-dev python-setuptools -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python2 get-pip.py \\\n && python2 -m pip install numpy matplotlib pillow \\\n && python2 setup.py install\n#  #################\n#  # Config files ##\n#  #################\nADD .vimrc /root/.vimrc\nADD .vim /root/.vim\nADD .bashrc /root/.bashrc\nWORKDIR /code/portraitseg\n#   TODO:\n#   apt-get clean && \\\n#   rm -rf /var/lib/apt/lists/*\n","originalDockerfileUglifiedHash":"0678208d5972a8c627dd586954a9159d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/92b6a29144c5254a117a9ed4967eed9a4a394ea5.dockerfile"}