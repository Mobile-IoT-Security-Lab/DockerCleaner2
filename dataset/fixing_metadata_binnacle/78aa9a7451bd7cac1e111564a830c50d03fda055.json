{"seed":2886033992,"processedDockerfileHash":"631465b6f750edf5094b0205b30618c4","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER Kenji Funaoka <kenji.funaoka@tier4.jp>\n#   Develop\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.20.10 wget=1.17.1-1ubuntu1.5 curl=7.47.0-1ubuntu2.19 git=1:2.7.4-0ubuntu1.10 cmake=3.5.1-1ubuntu3 cmake-curses-gui=3.5.1-1ubuntu3 libboost-all-dev=1.58.0.1ubuntu1 libflann-dev=1.8.4-4.1 libgsl0-dev libgoogle-perftools-dev=2.4-0ubuntu5.16.04.1 libeigen3-dev=3.3~beta1-2 scons=2.4.1-1 pkg-config=0.29.1-0ubuntu1 llvm-dev=1:3.8-33ubuntu3.1 libgl1-mesa-dev=18.0.5-0ubuntu0~16.04.1 libxi-dev=2:1.7.6-1 libx11-dev=2:1.6.3-1ubuntu2.2 libxcb1-dev=1.11.1-1ubuntu1 libxrender-dev=1:0.9.9-0ubuntu1 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 flex=2.6.0-11 bison=2:3.0.4.dfsg-1 python-mako=1.0.3+ds1-1ubuntu1 -y\n#   Intall some basic GUI and sound libs\nRUN apt-get update \\\n && apt-get install --no-install-recommends xz-utils=5.1.1alpha+20120614-2ubuntu2 file=1:5.25-2ubuntu1.4 locales=2.23-0ubuntu11.3 dbus-x11=1.10.6-1ubuntu3.6 pulseaudio=1:8.0-0ubuntu3.15 dmz-cursor-theme=0.4.4ubuntu1 fonts-dejavu=2.35-1 fonts-liberation=1.07.4-1 hicolor-icon-theme=0.15-0ubuntu1.1 libcanberra-gtk3-0=0.30-2.1ubuntu1 libcanberra-gtk-module=0.30-2.1ubuntu1 libcanberra-gtk3-module=0.30-2.1ubuntu1 libasound2=1.1.0-0ubuntu1 libgtk2.0-0=2.24.30-1ubuntu1.16.04.2 libdbus-glib-1-2=0.106-1 libxt6=1:1.1.5-0ubuntu1 libexif12=0.6.21-2ubuntu0.6 libgl1-mesa-glx=18.0.5-0ubuntu0~16.04.1 libgl1-mesa-dri=18.0.5-0ubuntu0~16.04.1 language-pack-en=1:16.04+20161009 -y \\\n && update-locale LANG=en_US.UTF-8 LC_MESSAGES=POSIX\n#   Intall some basic GUI tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends cmake-qt-gui=3.5.1-1ubuntu3 gnome-terminal=3.18.3-1ubuntu1 -y\n#   Intall ROS\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list'\nRUN apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116\nRUN apt-get update \\\n && apt-get install --no-install-recommends ros-kinetic-desktop-full ros-kinetic-nmea-msgs ros-kinetic-nmea-navsat-driver ros-kinetic-sound-play ros-kinetic-jsk-visualization ros-kinetic-grid-map ros-kinetic-gps-common -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends ros-kinetic-controller-manager ros-kinetic-ros-control ros-kinetic-ros-controllers ros-kinetic-gazebo-ros-control ros-kinetic-joystick-drivers ros-kinetic-rosbridge-server -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends libnlopt-dev=2.4.2+dfsg-2 freeglut3-dev=2.8.1-2 qtbase5-dev=5.5.1+dfsg-16ubuntu7.7 libqt5opengl5-dev=5.5.1+dfsg-16ubuntu7.7 libssh2-1-dev=1.5.0-2ubuntu0.1 libarmadillo-dev=1:6.500.5+dfsg-1 libpcap-dev=1.7.4-2ubuntu0.1 gksu=2.0.2-9ubuntu1 libgl1-mesa-dev=18.0.5-0ubuntu0~16.04.1 libglew-dev=1.13.0-2 python-wxgtk3.0=3.0.2.0+dfsg-1build1 software-properties-common=0.96.20.10 libmosquitto-dev=1.4.8-1ubuntu0.16.04.7 libyaml-cpp-dev=0.5.2-4ubuntu1~16.04.4 python-flask=0.10.1-2ubuntu0.1 python-requests=2.9.1-3ubuntu0.1 -y\n#   Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#   Setup .bashrc for ROS\nRUN echo \"source /opt/ros/kinetic/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\nRUN cd /opt \\\n && git clone -b mesa-17.0.0 https://anongit.freedesktop.org/git/mesa/mesa.git \\\n && cd mesa \\\n && scons build=release libgl-xlib \\\n && cd .. \\\n && mv mesa/build/linux-x86_64/gallium/targets/libgl-xlib ./ \\\n && rm -rf mesa\n#   Change user\nUSER autoware\nRUN sudo rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/kinetic/setup.bash\" >> ~/.bashrc\n#   YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#   Install Autoware\nRUN cd \\\n && git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/kinetic/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#   Setting\nENV LANG=\"en_US.UTF-8\"\nRUN echo \"export LANG=\\\"en_US.UTF-8\\\"\" >> /home/$USERNAME/.bashrc\n#   Install dev tools\nRUN sudo apt-get -y install vim tmux\n#   Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#000000\"\n#   this will make applications to use libGL.so file from /opt/libgl-xlib folder\nENV LD_LIBRARY_PATH=\"/opt/libgl-xlib:$LD_LIBRARY_PATH\"\n#   Default CMD\nCMD [\"/bin/bash\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER Kenji Funaoka <kenji.funaoka@tier4.jp>\n#  Develop\nRUN apt-get update \\\n && apt-get install software-properties-common wget curl git cmake cmake-curses-gui libboost-all-dev libflann-dev libgsl0-dev libgoogle-perftools-dev libeigen3-dev scons pkg-config llvm-dev libgl1-mesa-dev libxi-dev libx11-dev libxcb1-dev libxrender-dev zlib1g-dev flex bison python-mako -y\n#  Intall some basic GUI and sound libs\nRUN apt-get update \\\n && apt-get install xz-utils file locales dbus-x11 pulseaudio dmz-cursor-theme fonts-dejavu fonts-liberation hicolor-icon-theme libcanberra-gtk3-0 libcanberra-gtk-module libcanberra-gtk3-module libasound2 libgtk2.0-0 libdbus-glib-1-2 libxt6 libexif12 libgl1-mesa-glx libgl1-mesa-dri language-pack-en -y \\\n && update-locale LANG=en_US.UTF-8 LC_MESSAGES=POSIX\n#  Intall some basic GUI tools\nRUN apt-get update \\\n && apt-get install cmake-qt-gui gnome-terminal -y\n#  Intall ROS\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list'\nRUN apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116\nRUN apt-get update \\\n && apt-get install ros-kinetic-desktop-full ros-kinetic-nmea-msgs ros-kinetic-nmea-navsat-driver ros-kinetic-sound-play ros-kinetic-jsk-visualization ros-kinetic-grid-map ros-kinetic-gps-common -y\nRUN apt-get update \\\n && apt-get install ros-kinetic-controller-manager ros-kinetic-ros-control ros-kinetic-ros-controllers ros-kinetic-gazebo-ros-control ros-kinetic-joystick-drivers ros-kinetic-rosbridge-server -y\nRUN apt-get update \\\n && apt-get install libnlopt-dev freeglut3-dev qtbase5-dev libqt5opengl5-dev libssh2-1-dev libarmadillo-dev libpcap-dev gksu libgl1-mesa-dev libglew-dev python-wxgtk3.0 software-properties-common libmosquitto-dev libyaml-cpp-dev python-flask python-requests -y\n#  Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#  Setup .bashrc for ROS\nRUN echo \"source /opt/ros/kinetic/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\nRUN cd /opt \\\n && git clone -b mesa-17.0.0 https://anongit.freedesktop.org/git/mesa/mesa.git \\\n && cd mesa \\\n && scons build=release libgl-xlib \\\n && cd .. \\\n && mv mesa/build/linux-x86_64/gallium/targets/libgl-xlib ./ \\\n && rm -rf mesa\n#  Change user\nUSER autoware\nRUN sudo rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/kinetic/setup.bash\" >> ~/.bashrc\n#  YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#  Install Autoware\nRUN cd \\\n && git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/kinetic/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#  Setting\nENV LANG=\"en_US.UTF-8\"\nRUN echo \"export LANG=\\\"en_US.UTF-8\\\"\" >> /home/$USERNAME/.bashrc\n#  Install dev tools\nRUN sudo apt-get -y install vim tmux\n#  Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#000000\"\n#  this will make applications to use libGL.so file from /opt/libgl-xlib folder\nENV LD_LIBRARY_PATH=\"/opt/libgl-xlib:$LD_LIBRARY_PATH\"\n#  Default CMD\nCMD [\"/bin/bash\"]\n","injectedSmells":[],"originalDockerfileHash":"be0c2c26b89838307bb8c96bac056248","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER Kenji Funaoka <kenji.funaoka@tier4.jp>\n#   Develop\nRUN apt-get update \\\n && apt-get install software-properties-common wget curl git cmake cmake-curses-gui libboost-all-dev libflann-dev libgsl0-dev libgoogle-perftools-dev libeigen3-dev scons pkg-config llvm-dev libgl1-mesa-dev libxi-dev libx11-dev libxcb1-dev libxrender-dev zlib1g-dev flex bison python-mako -y\n#   Intall some basic GUI and sound libs\nRUN apt-get update \\\n && apt-get install xz-utils file locales dbus-x11 pulseaudio dmz-cursor-theme fonts-dejavu fonts-liberation hicolor-icon-theme libcanberra-gtk3-0 libcanberra-gtk-module libcanberra-gtk3-module libasound2 libgtk2.0-0 libdbus-glib-1-2 libxt6 libexif12 libgl1-mesa-glx libgl1-mesa-dri language-pack-en -y \\\n && update-locale LANG=en_US.UTF-8 LC_MESSAGES=POSIX\n#   Intall some basic GUI tools\nRUN apt-get update \\\n && apt-get install cmake-qt-gui gnome-terminal -y\n#   Intall ROS\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list'\nRUN apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116\nRUN apt-get update \\\n && apt-get install ros-kinetic-desktop-full ros-kinetic-nmea-msgs ros-kinetic-nmea-navsat-driver ros-kinetic-sound-play ros-kinetic-jsk-visualization ros-kinetic-grid-map ros-kinetic-gps-common -y\nRUN apt-get update \\\n && apt-get install ros-kinetic-controller-manager ros-kinetic-ros-control ros-kinetic-ros-controllers ros-kinetic-gazebo-ros-control ros-kinetic-joystick-drivers ros-kinetic-rosbridge-server -y\nRUN apt-get update \\\n && apt-get install libnlopt-dev freeglut3-dev qtbase5-dev libqt5opengl5-dev libssh2-1-dev libarmadillo-dev libpcap-dev gksu libgl1-mesa-dev libglew-dev python-wxgtk3.0 software-properties-common libmosquitto-dev libyaml-cpp-dev python-flask python-requests -y\n#   Add basic user\nENV USERNAME=\"autoware\"\nENV PULSE_SERVER=\"/run/pulse/native\"\nRUN useradd -m $USERNAME \\\n && echo \"$USERNAME:$USERNAME\" | chpasswd \\\n && usermod --shell /bin/bash $USERNAME \\\n && usermod -aG sudo $USERNAME \\\n && echo \"$USERNAME ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers.d/$USERNAME \\\n && chmod 0440 /etc/sudoers.d/$USERNAME \\\n && usermod --uid 1000 $USERNAME \\\n && groupmod --gid 1000 $USERNAME\n#   Setup .bashrc for ROS\nRUN echo \"source /opt/ros/kinetic/setup.bash\" >> /home/$USERNAME/.bashrc \\\n && echo \"export QT_X11_NO_MITSHM=1\" >> /home/$USERNAME/.bashrc \\\n && echo \"cd\" >> /home/$USERNAME/.bashrc\nRUN cd /opt \\\n && git clone -b mesa-17.0.0 https://anongit.freedesktop.org/git/mesa/mesa.git \\\n && cd mesa \\\n && scons build=release libgl-xlib \\\n && cd .. \\\n && mv mesa/build/linux-x86_64/gallium/targets/libgl-xlib ./ \\\n && rm -rf mesa\n#   Change user\nUSER autoware\nRUN sudo rosdep init \\\n && rosdep update \\\n && echo \"source /opt/ros/kinetic/setup.bash\" >> ~/.bashrc\n#   YOLO_V2\nRUN cd \\\n && git clone https://github.com/pjreddie/darknet.git\nRUN cd ~/darknet \\\n && git checkout 56d69e73aba37283ea7b9726b81afd2f79cd1134\nRUN cd ~/darknet/data \\\n && wget https://pjreddie.com/media/files/yolo.weights\n#   Install Autoware\nRUN cd \\\n && git clone https://github.com/CPFL/Autoware.git /home/$USERNAME/Autoware\nRUN /bin/bash -c 'source /opt/ros/kinetic/setup.bash; cd /home/$USERNAME/Autoware/ros/src; git submodule update --init --recursive; catkin_init_workspace; cd ../; ./catkin_make_release'\nRUN echo \"source /home/$USERNAME/Autoware/ros/devel/setup.bash\" >> /home/$USERNAME/.bashrc\n#   Setting\nENV LANG=\"en_US.UTF-8\"\nRUN echo \"export LANG=\\\"en_US.UTF-8\\\"\" >> /home/$USERNAME/.bashrc\n#   Install dev tools\nRUN sudo apt-get -y install vim tmux\n#   Change Terminal Color\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_background\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/use_theme_colors\" --type bool false\nRUN gconftool-2 --set \"/apps/gnome-terminal/profiles/Default/background_color\" --type string \"#000000\"\n#   this will make applications to use libGL.so file from /opt/libgl-xlib folder\nENV LD_LIBRARY_PATH=\"/opt/libgl-xlib:$LD_LIBRARY_PATH\"\n#   Default CMD\nCMD [\"/bin/bash\"]\n","originalDockerfileUglifiedHash":"257314cf03f5e68d0148fdca4a977c65","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/78aa9a7451bd7cac1e111564a830c50d03fda055.dockerfile"}