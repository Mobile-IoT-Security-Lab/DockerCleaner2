{"seed":2832152266,"processedDockerfileHash":"afa34d352b519697deaa355a3087700e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:latest\nMAINTAINER \"The CentOS Project\" <admin@jiobxn.com>\nARG LATEST=\"0\"\nRUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nRUN yum clean all ; yum -y install epel-release ; yum -y update \\\n && yum -y install net-tools bash-completion vim wget strace make gcc-c++ autoconf iptables bzip2 unzip bzip2-devel mingw64-win-iconv libmcrypt-devel libxml2-devel libcurl-devel libpng-devel libc-client-devel krb5-devel libicu-devel libjpeg libjpeg-devel libXpm-devel freetype-devel gmp-devel readline-devel net-snmp-devel libtidy-devel libgcrypt-devel gd-devel gdbm-devel libxslt-devel mhash-devel openldap-devel libacl-devel enchant-devel libedit-devel libmemcached-devel \\\n && yum clean all\nRUN cd /usr/local/src \\\n && PHP_VERSION=\"$( curl -s http://php.net/downloads.php | egrep php-5.6.*.tar.gz | awk -F/ '{print $3}' ;)\" \\\n && wget -c http://php.net/distributions/${PHP_VERSION} \\\n && wget -c https://github.com/phpredis/phpredis/archive/develop.zip \\\n && wget -c http://downloads.zend.com/guard/7.0.0/zend-loader-php5.6-linux-x86_64.tar.gz \\\n && wget -c https://github.com/php-memcached-dev/php-memcached/archive/2.2.0.tar.gz\nRUN cd /usr/local/src \\\n && tar zxf php-*.tar.gz \\\n && unzip develop.zip \\\n && tar zxf zend-loader-php5.6-linux-x86_64.tar.gz \\\n && tar zxf 2.2.0.tar.gz \\\n && cd /usr/local/src/php-* \\\n && ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-pdo-mysql --with-mysqli --with-mysql --with-iconv-dir=/usr --with-mcrypt=/usr --with-libdir=lib64 --with-mhash --with-curl --with-xmlrpc --with-gettext --with-imap-ssl --with-imap --with-pear --with-gd --with-kerberos --with-pcre-regex --with-snmp --with-gmp --with-openssl --with-zlib --with-pcre-dir --with-libxml-dir --with-png-dir --with-freetype-dir --with-icu-dir=/usr --with-jpeg-dir --with-xpm-dir --with-readline --with-ldap-sasl --with-ldap --with-tidy --with-xsl --with-gdbm --with-bz2 --with-fpm-acl --with-enchant --with-libedit --with-system-ciphers --enable-calendar --enable-opcache --enable-exif --enable-intl --enable-mysqlnd --enable-dba --enable-fpm --enable-xml --enable-ftp --enable-zip --enable-soap --enable-shmop --enable-wddx --enable-pcntl --enable-bcmath --enable-sockets --enable-sysvsem --enable-sysvmsg --enable-sysvshm --enable-mbregex --enable-mbstring --enable-session --enable-embedded-mysqli --enable-gd-native-ttf --enable-inline-optimization \\\n && make -j8 \\\n && make install \\\n && cp /usr/local/src/php-*/php.ini-development /usr/local/php/etc/php.ini \\\n && ln -s /usr/local/php/bin/* /usr/local/bin/ \\\n && ln -s /usr/local/php/sbin/* /usr/local/bin/ \\\n && cd /usr/local/src/phpredis-develop \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '876 i extension=redis.so' /usr/local/php/etc/php.ini \\\n && cd /usr/local/src/php-memcached-* \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '877 i extension=memcached.so' /usr/local/php/etc/php.ini \\\n && sed -i 's/;date.timezone =/date.timezone = PRC/' /usr/local/php/etc/php.ini \\\n && cp /usr/local/src/zend-loader-php5.6-linux-x86_64/ZendGuardLoader.so \"$( php -i | grep extensions | awk '{print $3}' ;)\" \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/listen = 127.0.0.1:9000/listen = [::]:9000/' /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/;daemonize = yes/daemonize = no/' /usr/local/php/etc/php-fpm.conf \\\n && echo -e \"[Zend Guard Loader]\\nzend_extension=\\\"$( php -i | grep extensions | awk '{print $3}' ;)/ZendGuardLoader.so\\\"\\nzend_loader.enable=1\\nzend_loader.disable_licensing=0\\nzend_loader.obfuscation_level_support=3\" >> /usr/local/php/etc/php.ini \\\n && rm -rf /usr/local/src/*\nVOLUME /var/www\nCOPY php.sh /php.sh\nRUN chmod +x /php.sh\nENTRYPOINT [\"/php.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\n#   docker build -t php:5.6 .\n#   docker run -d --restart always -p 9000:9000 -v /docker/www:/var/www --hostname php --name php php:5.6\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:latest\nMAINTAINER \"The CentOS Project\" <admin@jiobxn.com>\nARG LATEST=\"0\"\nRUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nRUN yum clean all ; yum -y install epel-release ; yum -y update \\\n && yum -y install net-tools bash-completion vim wget strace make gcc-c++ autoconf iptables bzip2 unzip bzip2-devel mingw64-win-iconv libmcrypt-devel libxml2-devel libcurl-devel libpng-devel libc-client-devel krb5-devel libicu-devel libjpeg libjpeg-devel libXpm-devel freetype-devel gmp-devel readline-devel net-snmp-devel libtidy-devel libgcrypt-devel gd-devel gdbm-devel libxslt-devel mhash-devel openldap-devel libacl-devel enchant-devel libedit-devel libmemcached-devel \\\n && yum clean all\nRUN cd /usr/local/src \\\n && PHP_VERSION=\"$( curl -s http://php.net/downloads.php | egrep php-5.6.*.tar.gz | awk -F/ '{print $3}' ;)\" \\\n && wget -c http://php.net/distributions/${PHP_VERSION} \\\n && wget -c https://github.com/phpredis/phpredis/archive/develop.zip \\\n && wget -c http://downloads.zend.com/guard/7.0.0/zend-loader-php5.6-linux-x86_64.tar.gz \\\n && wget -c https://github.com/php-memcached-dev/php-memcached/archive/2.2.0.tar.gz\nRUN cd /usr/local/src \\\n && tar zxf php-*.tar.gz \\\n && unzip develop.zip \\\n && tar zxf zend-loader-php5.6-linux-x86_64.tar.gz \\\n && tar zxf 2.2.0.tar.gz \\\n && cd /usr/local/src/php-* \\\n && ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-pdo-mysql --with-mysqli --with-mysql --with-iconv-dir=/usr --with-mcrypt=/usr --with-libdir=lib64 --with-mhash --with-curl --with-xmlrpc --with-gettext --with-imap-ssl --with-imap --with-pear --with-gd --with-kerberos --with-pcre-regex --with-snmp --with-gmp --with-openssl --with-zlib --with-pcre-dir --with-libxml-dir --with-png-dir --with-freetype-dir --with-icu-dir=/usr --with-jpeg-dir --with-xpm-dir --with-readline --with-ldap-sasl --with-ldap --with-tidy --with-xsl --with-gdbm --with-bz2 --with-fpm-acl --with-enchant --with-libedit --with-system-ciphers --enable-calendar --enable-opcache --enable-exif --enable-intl --enable-mysqlnd --enable-dba --enable-fpm --enable-xml --enable-ftp --enable-zip --enable-soap --enable-shmop --enable-wddx --enable-pcntl --enable-bcmath --enable-sockets --enable-sysvsem --enable-sysvmsg --enable-sysvshm --enable-mbregex --enable-mbstring --enable-session --enable-embedded-mysqli --enable-gd-native-ttf --enable-inline-optimization \\\n && make -j8 \\\n && make install \\\n && cp /usr/local/src/php-*/php.ini-development /usr/local/php/etc/php.ini \\\n && ln -s /usr/local/php/bin/* /usr/local/bin/ \\\n && ln -s /usr/local/php/sbin/* /usr/local/bin/ \\\n && cd /usr/local/src/phpredis-develop \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '876 i extension=redis.so' /usr/local/php/etc/php.ini \\\n && cd /usr/local/src/php-memcached-* \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '877 i extension=memcached.so' /usr/local/php/etc/php.ini \\\n && sed -i 's/;date.timezone =/date.timezone = PRC/' /usr/local/php/etc/php.ini \\\n && cp /usr/local/src/zend-loader-php5.6-linux-x86_64/ZendGuardLoader.so \"$( php -i | grep extensions | awk '{print $3}' ;)\" \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/listen = 127.0.0.1:9000/listen = [::]:9000/' /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/;daemonize = yes/daemonize = no/' /usr/local/php/etc/php-fpm.conf \\\n && echo -e \"[Zend Guard Loader]\\nzend_extension=\\\"$( php -i | grep extensions | awk '{print $3}' ;)/ZendGuardLoader.so\\\"\\nzend_loader.enable=1\\nzend_loader.disable_licensing=0\\nzend_loader.obfuscation_level_support=3\" >> /usr/local/php/etc/php.ini \\\n && rm -rf /usr/local/src/*\nVOLUME /var/www\nCOPY php.sh /php.sh\nRUN chmod +x /php.sh\nENTRYPOINT [\"/php.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\n#  docker build -t php:5.6 .\n#  docker run -d --restart always -p 9000:9000 -v /docker/www:/var/www --hostname php --name php php:5.6\n","injectedSmells":[],"originalDockerfileHash":"ea2b2dfe3749a131a66fe028a8cf36ca","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:latest\nMAINTAINER \"The CentOS Project\" <admin@jiobxn.com>\nARG LATEST=\"0\"\nRUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nRUN yum clean all ; yum -y install epel-release ; yum -y update \\\n && yum -y install net-tools bash-completion vim wget strace make gcc-c++ autoconf iptables bzip2 unzip bzip2-devel mingw64-win-iconv libmcrypt-devel libxml2-devel libcurl-devel libpng-devel libc-client-devel krb5-devel libicu-devel libjpeg libjpeg-devel libXpm-devel freetype-devel gmp-devel readline-devel net-snmp-devel libtidy-devel libgcrypt-devel gd-devel gdbm-devel libxslt-devel mhash-devel openldap-devel libacl-devel enchant-devel libedit-devel libmemcached-devel \\\n && yum clean all\nRUN cd /usr/local/src \\\n && PHP_VERSION=\"$( curl -s http://php.net/downloads.php | egrep php-5.6.*.tar.gz | awk -F/ '{print $3}' ;)\" \\\n && wget -c http://php.net/distributions/${PHP_VERSION} \\\n && wget -c https://github.com/phpredis/phpredis/archive/develop.zip \\\n && wget -c http://downloads.zend.com/guard/7.0.0/zend-loader-php5.6-linux-x86_64.tar.gz \\\n && wget -c https://github.com/php-memcached-dev/php-memcached/archive/2.2.0.tar.gz\nRUN cd /usr/local/src \\\n && tar zxf php-*.tar.gz \\\n && unzip develop.zip \\\n && tar zxf zend-loader-php5.6-linux-x86_64.tar.gz \\\n && tar zxf 2.2.0.tar.gz \\\n && cd /usr/local/src/php-* \\\n && ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-pdo-mysql --with-mysqli --with-mysql --with-iconv-dir=/usr --with-mcrypt=/usr --with-libdir=lib64 --with-mhash --with-curl --with-xmlrpc --with-gettext --with-imap-ssl --with-imap --with-pear --with-gd --with-kerberos --with-pcre-regex --with-snmp --with-gmp --with-openssl --with-zlib --with-pcre-dir --with-libxml-dir --with-png-dir --with-freetype-dir --with-icu-dir=/usr --with-jpeg-dir --with-xpm-dir --with-readline --with-ldap-sasl --with-ldap --with-tidy --with-xsl --with-gdbm --with-bz2 --with-fpm-acl --with-enchant --with-libedit --with-system-ciphers --enable-calendar --enable-opcache --enable-exif --enable-intl --enable-mysqlnd --enable-dba --enable-fpm --enable-xml --enable-ftp --enable-zip --enable-soap --enable-shmop --enable-wddx --enable-pcntl --enable-bcmath --enable-sockets --enable-sysvsem --enable-sysvmsg --enable-sysvshm --enable-mbregex --enable-mbstring --enable-session --enable-embedded-mysqli --enable-gd-native-ttf --enable-inline-optimization \\\n && make -j8 \\\n && make install \\\n && cp /usr/local/src/php-*/php.ini-development /usr/local/php/etc/php.ini \\\n && ln -s /usr/local/php/bin/* /usr/local/bin/ \\\n && ln -s /usr/local/php/sbin/* /usr/local/bin/ \\\n && cd /usr/local/src/phpredis-develop \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '876 i extension=redis.so' /usr/local/php/etc/php.ini \\\n && cd /usr/local/src/php-memcached-* \\\n && phpize \\\n && ./configure \\\n && make -j8 \\\n && make install \\\n && sed -i '877 i extension=memcached.so' /usr/local/php/etc/php.ini \\\n && sed -i 's/;date.timezone =/date.timezone = PRC/' /usr/local/php/etc/php.ini \\\n && cp /usr/local/src/zend-loader-php5.6-linux-x86_64/ZendGuardLoader.so \"$( php -i | grep extensions | awk '{print $3}' ;)\" \\\n && cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/listen = 127.0.0.1:9000/listen = [::]:9000/' /usr/local/php/etc/php-fpm.conf \\\n && sed -i 's/;daemonize = yes/daemonize = no/' /usr/local/php/etc/php-fpm.conf \\\n && echo -e \"[Zend Guard Loader]\\nzend_extension=\\\"$( php -i | grep extensions | awk '{print $3}' ;)/ZendGuardLoader.so\\\"\\nzend_loader.enable=1\\nzend_loader.disable_licensing=0\\nzend_loader.obfuscation_level_support=3\" >> /usr/local/php/etc/php.ini \\\n && rm -rf /usr/local/src/*\nVOLUME /var/www\nCOPY php.sh /php.sh\nRUN chmod +x /php.sh\nENTRYPOINT [\"/php.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\n#   docker build -t php:5.6 .\n#   docker run -d --restart always -p 9000:9000 -v /docker/www:/var/www --hostname php --name php php:5.6\n","originalDockerfileUglifiedHash":"11147d281819195f9020455145391e3c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/93f80df8260ea87b2d619fd5d54f47a99f4643d9.dockerfile"}