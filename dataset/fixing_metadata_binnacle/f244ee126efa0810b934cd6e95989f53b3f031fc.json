{"seed":791488571,"processedDockerfileHash":"0406dd0ce672cb1d0cc30e48bc2a5bc9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 1A4E8B7277C42E53DBA9C7B9BCAA30EA9C0D5763\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV PHP_VERSION=\"7.0.5\"\nENV PHP_FILENAME=\"php-7.0.5.tar.xz\"\n#   --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libreadline6-dev xz-utils \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install apcu \\\n && echo extension=apcu.so > $PHP_INI_DIR/conf.d/ext-apcu.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nENV memcachedDeps=\"  git  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $memcachedDeps -y \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure --disable-memcached-sasl \\\n && make \\\n && make install \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && curl -fSL \"https://github.com/websupport-sk/pecl-memcache/archive/fdbd46bbc6f53ed6e024521895e142cbfc9b3340/memcache-3.0.9-fdbd46b.tar.gz\" -o \"memcache.tar.gz\" \\\n && mkdir -p /usr/src/php-memcache \\\n && tar -xf \"memcache.tar.gz\" -C /usr/src/php-memcache --strip-components=1 \\\n && cd /usr/src/php-memcache \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $memcachedDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9070/tcp\nCMD [\"php-fpm\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile written by 10up <sales@10up.com>\n#\n#  Work derived from official PHP Docker Library:\n#  Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#  persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#  phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 1A4E8B7277C42E53DBA9C7B9BCAA30EA9C0D5763\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV PHP_VERSION=\"7.0.5\"\nENV PHP_FILENAME=\"php-7.0.5.tar.xz\"\n#  --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libreadline6-dev xz-utils \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install apcu \\\n && echo extension=apcu.so > $PHP_INI_DIR/conf.d/ext-apcu.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nENV memcachedDeps=\"  git  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $memcachedDeps -y \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure --disable-memcached-sasl \\\n && make \\\n && make install \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && curl -fSL \"https://github.com/websupport-sk/pecl-memcache/archive/fdbd46bbc6f53ed6e024521895e142cbfc9b3340/memcache-3.0.9-fdbd46b.tar.gz\" -o \"memcache.tar.gz\" \\\n && mkdir -p /usr/src/php-memcache \\\n && tar -xf \"memcache.tar.gz\" -C /usr/src/php-memcache --strip-components=1 \\\n && cd /usr/src/php-memcache \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $memcachedDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9070/tcp\nCMD [\"php-fpm\"]\n","injectedSmells":[],"originalDockerfileHash":"15bca59d953d48b631126d342f2d283b","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3 1A4E8B7277C42E53DBA9C7B9BCAA30EA9C0D5763\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV PHP_VERSION=\"7.0.5\"\nENV PHP_FILENAME=\"php-7.0.5.tar.xz\"\n#   --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libreadline6-dev xz-utils \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-openssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install apcu \\\n && echo extension=apcu.so > $PHP_INI_DIR/conf.d/ext-apcu.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nENV memcachedDeps=\"  git  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $memcachedDeps -y \\\n && git clone https://github.com/php-memcached-dev/php-memcached.git \\\n && cd php-memcached \\\n && git checkout php7 \\\n && phpize \\\n && ./configure --disable-memcached-sasl \\\n && make \\\n && make install \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && curl -fSL \"https://github.com/websupport-sk/pecl-memcache/archive/fdbd46bbc6f53ed6e024521895e142cbfc9b3340/memcache-3.0.9-fdbd46b.tar.gz\" -o \"memcache.tar.gz\" \\\n && mkdir -p /usr/src/php-memcache \\\n && tar -xf \"memcache.tar.gz\" -C /usr/src/php-memcache --strip-components=1 \\\n && cd /usr/src/php-memcache \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $memcachedDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9070/tcp\nCMD [\"php-fpm\"]\n","originalDockerfileUglifiedHash":"9da421f20ed643b0b102533f867a0e8c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f244ee126efa0810b934cd6e95989f53b3f031fc.dockerfile"}