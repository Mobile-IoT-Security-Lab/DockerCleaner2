{"seed":1216063816,"processedDockerfileHash":"2c7d71268c6ab2969f1accc4de41c67f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nENV CROSSCOMPILE_ARCH=\"arm-linux-gnueabihf\"\nENV ROOT_FILESYSTEM=\"/usr/$CROSSCOMPILE_ARCH\"\nENV BUILD_HOST=\"x86_64\"\nENV WORKING_DIRECTORY=\"/buildroot/python_xcompile\"\nENV INSTALL_DIRECTORY=\"/buildroot/python_xcompile/_install\"\nARG PYTHON_VERSION=\"2.7.12\"\nENV SOURCE_DIRECTORY=\"Python-$PYTHON_VERSION\"\nENV PYTHON_ARCHIVE=\"Python-$PYTHON_VERSION.tar.xz\"\nENV ENABLE_MODULES=\"array cmath binascii _collections cPickle cStringIO datetime _elementtree fcntl _functools  itertools _io math _md5 operator _random select _sha _socket _struct termios time unicodedata zlib  xml sqlite ssl\"\nENV RFS=\"$ROOT_FILESYSTEM\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget=1.17.1-1ubuntu1.5 python=2.7.12-1~16.04 make=4.1-6 xz-utils=5.1.1alpha+20120614-2ubuntu2 gcc=4:5.3.1-1ubuntu1 g++=4:5.3.1-1ubuntu1 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 libdb5.3=5.3.28-11ubuntu0.2 libdb5.3-dev=5.3.28-11ubuntu0.2 libreadline6-dev=6.3-8ubuntu2 libc6-dev-i386=2.23-0ubuntu11.3 patch=2.7.5-1ubuntu0.16.04.2 zip=3.0-11 libffi-dev=3.2.1-4 python-cffi=1.5.2-1ubuntu1 python-cffi-backend=1.5.2-1ubuntu1 gcc-$CROSSCOMPILE_ARCH binutils-$CROSSCOMPILE_ARCH gcc-5-$CROSSCOMPILE_ARCH -y\nRUN mkdir -p $WORKING_DIRECTORY $INSTALL_DIRECTORY\nWORKDIR $WORKING_DIRECTORY\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.sqlite.org/2017/sqlite-autoconf-3160200.tar.gz \\\n && tar xzf sqlite-autoconf-3160200.tar.gz \\\n && cd sqlite-autoconf-3160200/ \\\n && ./configure --host=$CROSSCOMPILE_ARCH --prefix=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://zlib.net/fossils/zlib-1.1.4.tar.gz \\\n && tar xf zlib-1.1.4.tar.gz \\\n && cd zlib-1.1.4 \\\n && CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=\"$CROSSCOMPILE_ARCH-gcc -shared -Wl,-soname,libz.so.1\" ./configure --shared --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://www.openssl.org/source/openssl-1.0.1g.tar.gz \\\n && tar -pxzf openssl-1.0.1g.tar.gz \\\n && cd openssl-1.0.1g/ \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_parallel_build-1.patch \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_parallel_build-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && ./Configure linux-x86_64 os/compiler:$CROSSCOMPILE_ARCH-gcc --prefix=$INSTALL_DIRECTORY -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/openssl-1.0.1g \\\n && make clean \\\n && ./Configure linux-x86_64 --prefix=/usr -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.python.org/ftp/python/$PYTHON_VERSION/$PYTHON_ARCHIVE \\\n && rm -rf $SOURCE_DIRECTORY \\\n && tar -xf $PYTHON_ARCHIVE\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && for module in $ENABLE_MODULES; do sed \"s/^#$module/$module/\" -i Modules/Setup.dist ; done\nENV LDFLAGS=\"-L$INSTALL_DIRECTORY/lib\"\nENV LD_LIBRARY_PATH=\"$INSTALL_DIRECTORY/lib:$ROOT_FILESYSTEM/lib/\"\nENV CPPFLAGS=\"-I$ROOT_FILESYSTEM/include -I$INSTALL_DIRECTORY/include/python2.7  -I$INSTALL_DIRECTORY/include/openssl  -I$INSTALL_DIRECTORY/include  -I$WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi/arm-unknown-linux-gnueabihf/include\"\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && LDFLAGS=\"-L/usr/lib\" LD_LIBRARY_PATH=\"/usr/lib:/lib\" CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" ./configure --prefix=/usr --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN wget https://bootstrap.pypa.io/ez_setup.py -O - | python2.7\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && make clean \\\n && ./configure --prefix= \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cffi/cffi-1.11.5.tar.gz \\\n && tar -xzf cffi-1.11.5.tar.gz \\\n && cd cffi-1.11.5 \\\n && set -x \\\n && CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" python setup.py install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/p/pycryptodome/pycryptodome-3.6.6.tar.gz \\\n && tar -xzf pycryptodome-3.6.6.tar.gz \\\n && cd pycryptodome-3.6.6 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN set -x \\\n && cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/a/argon2_cffi/argon2_cffi-18.3.0.tar.gz \\\n && tar -xzf argon2_cffi-18.3.0.tar.gz \\\n && cd argon2_cffi-18.3.0 \\\n && sed -i 's/optimized =.*/optimized = False/' setup.py \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cryptography/cryptography-0.9.3.tar.gz \\\n && tar -xzf cryptography-0.9.3.tar.gz \\\n && cd cryptography-0.9.3 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY/cffi-1.11.5 \\\n && rm -rf build dist \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && rm -rf _install_minimal \\\n && mkdir -p _install_minimal/bin \\\n && mkdir -p _install_minimal/lib/python2.7 \\\n && mkdir -p _install_minimal/include \\\n && cp $INSTALL_DIRECTORY/bin/python2.7 _install_minimal/bin/python \\\n && cd $INSTALL_DIRECTORY/lib/ \\\n && rm -rf python2.7-minimal \\\n && cp -r python2.7 python2.7-minimal \\\n && cd python2.7-minimal \\\n && rm -r site-packages config lib-dynload \\\n && rm *.doc *.txt \\\n && cd $WORKING_DIRECTORY \\\n && cp -r _install/lib/python2.7-minimal/* _install_minimal/lib/python2.7 \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/lib-dynload _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/site-packages _install_minimal/lib/python2.7/ \\\n && cp -r _install/include/python2.7 _install_minimal/include/python2.7 \\\n && cd _install_minimal \\\n && rm -f $WORKING_DIRECTORY/../python-minimal.zip \\\n && zip -r $WORKING_DIRECTORY/../python-minimal.zip . \\\n && cd $INSTALL_DIRECTORY \\\n && rm -rf lib/python2.7-minimal \\\n && rm -f $WORKING_DIRECTORY/../python.zip \\\n && zip -r $WORKING_DIRECTORY/../python.zip .\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nENV CROSSCOMPILE_ARCH=\"arm-linux-gnueabihf\"\nENV ROOT_FILESYSTEM=\"/usr/$CROSSCOMPILE_ARCH\"\nENV BUILD_HOST=\"x86_64\"\nENV WORKING_DIRECTORY=\"/buildroot/python_xcompile\"\nENV INSTALL_DIRECTORY=\"/buildroot/python_xcompile/_install\"\nARG PYTHON_VERSION=\"2.7.12\"\nENV SOURCE_DIRECTORY=\"Python-$PYTHON_VERSION\"\nENV PYTHON_ARCHIVE=\"Python-$PYTHON_VERSION.tar.xz\"\nENV ENABLE_MODULES=\"array cmath binascii _collections cPickle cStringIO datetime _elementtree fcntl _functools  itertools _io math _md5 operator _random select _sha _socket _struct termios time unicodedata zlib  xml sqlite ssl\"\nENV RFS=\"$ROOT_FILESYSTEM\"\nRUN apt-get update \\\n && apt-get install wget python make xz-utils gcc g++ zlib1g-dev libdb5.3 libdb5.3-dev libreadline6-dev libc6-dev-i386 patch zip libffi-dev python-cffi python-cffi-backend gcc-$CROSSCOMPILE_ARCH binutils-$CROSSCOMPILE_ARCH gcc-5-$CROSSCOMPILE_ARCH -y\nRUN mkdir -p $WORKING_DIRECTORY $INSTALL_DIRECTORY\nWORKDIR $WORKING_DIRECTORY\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.sqlite.org/2017/sqlite-autoconf-3160200.tar.gz \\\n && tar xzf sqlite-autoconf-3160200.tar.gz \\\n && cd sqlite-autoconf-3160200/ \\\n && ./configure --host=$CROSSCOMPILE_ARCH --prefix=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://zlib.net/fossils/zlib-1.1.4.tar.gz \\\n && tar xf zlib-1.1.4.tar.gz \\\n && cd zlib-1.1.4 \\\n && CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=\"$CROSSCOMPILE_ARCH-gcc -shared -Wl,-soname,libz.so.1\" ./configure --shared --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://www.openssl.org/source/openssl-1.0.1g.tar.gz \\\n && tar -pxzf openssl-1.0.1g.tar.gz \\\n && cd openssl-1.0.1g/ \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_parallel_build-1.patch \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_parallel_build-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && ./Configure linux-x86_64 os/compiler:$CROSSCOMPILE_ARCH-gcc --prefix=$INSTALL_DIRECTORY -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/openssl-1.0.1g \\\n && make clean \\\n && ./Configure linux-x86_64 --prefix=/usr -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.python.org/ftp/python/$PYTHON_VERSION/$PYTHON_ARCHIVE \\\n && rm -rf $SOURCE_DIRECTORY \\\n && tar -xf $PYTHON_ARCHIVE\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && for module in $ENABLE_MODULES; do sed \"s/^#$module/$module/\" -i Modules/Setup.dist ; done\nENV LDFLAGS=\"-L$INSTALL_DIRECTORY/lib\"\nENV LD_LIBRARY_PATH=\"$INSTALL_DIRECTORY/lib:$ROOT_FILESYSTEM/lib/\"\nENV CPPFLAGS=\"-I$ROOT_FILESYSTEM/include -I$INSTALL_DIRECTORY/include/python2.7  -I$INSTALL_DIRECTORY/include/openssl  -I$INSTALL_DIRECTORY/include  -I$WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi/arm-unknown-linux-gnueabihf/include\"\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && LDFLAGS=\"-L/usr/lib\" LD_LIBRARY_PATH=\"/usr/lib:/lib\" CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" ./configure --prefix=/usr --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN wget https://bootstrap.pypa.io/ez_setup.py -O - | python2.7\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && make clean \\\n && ./configure --prefix= \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cffi/cffi-1.11.5.tar.gz \\\n && tar -xzf cffi-1.11.5.tar.gz \\\n && cd cffi-1.11.5 \\\n && set -x \\\n && CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" python setup.py install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/p/pycryptodome/pycryptodome-3.6.6.tar.gz \\\n && tar -xzf pycryptodome-3.6.6.tar.gz \\\n && cd pycryptodome-3.6.6 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN set -x \\\n && cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/a/argon2_cffi/argon2_cffi-18.3.0.tar.gz \\\n && tar -xzf argon2_cffi-18.3.0.tar.gz \\\n && cd argon2_cffi-18.3.0 \\\n && sed -i 's/optimized =.*/optimized = False/' setup.py \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cryptography/cryptography-0.9.3.tar.gz \\\n && tar -xzf cryptography-0.9.3.tar.gz \\\n && cd cryptography-0.9.3 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY/cffi-1.11.5 \\\n && rm -rf build dist \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && rm -rf _install_minimal \\\n && mkdir -p _install_minimal/bin \\\n && mkdir -p _install_minimal/lib/python2.7 \\\n && mkdir -p _install_minimal/include \\\n && cp $INSTALL_DIRECTORY/bin/python2.7 _install_minimal/bin/python \\\n && cd $INSTALL_DIRECTORY/lib/ \\\n && rm -rf python2.7-minimal \\\n && cp -r python2.7 python2.7-minimal \\\n && cd python2.7-minimal \\\n && rm -r site-packages config lib-dynload \\\n && rm *.doc *.txt \\\n && cd $WORKING_DIRECTORY \\\n && cp -r _install/lib/python2.7-minimal/* _install_minimal/lib/python2.7 \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/lib-dynload _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/site-packages _install_minimal/lib/python2.7/ \\\n && cp -r _install/include/python2.7 _install_minimal/include/python2.7 \\\n && cd _install_minimal \\\n && rm -f $WORKING_DIRECTORY/../python-minimal.zip \\\n && zip -r $WORKING_DIRECTORY/../python-minimal.zip . \\\n && cd $INSTALL_DIRECTORY \\\n && rm -rf lib/python2.7-minimal \\\n && rm -f $WORKING_DIRECTORY/../python.zip \\\n && zip -r $WORKING_DIRECTORY/../python.zip .\n","injectedSmells":[],"originalDockerfileHash":"c79ebd56c7966ddf33055956487ba948","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nENV CROSSCOMPILE_ARCH=\"arm-linux-gnueabihf\"\nENV ROOT_FILESYSTEM=\"/usr/$CROSSCOMPILE_ARCH\"\nENV BUILD_HOST=\"x86_64\"\nENV WORKING_DIRECTORY=\"/buildroot/python_xcompile\"\nENV INSTALL_DIRECTORY=\"/buildroot/python_xcompile/_install\"\nARG PYTHON_VERSION=\"2.7.12\"\nENV SOURCE_DIRECTORY=\"Python-$PYTHON_VERSION\"\nENV PYTHON_ARCHIVE=\"Python-$PYTHON_VERSION.tar.xz\"\nENV ENABLE_MODULES=\"array cmath binascii _collections cPickle cStringIO datetime _elementtree fcntl _functools  itertools _io math _md5 operator _random select _sha _socket _struct termios time unicodedata zlib  xml sqlite ssl\"\nENV RFS=\"$ROOT_FILESYSTEM\"\nRUN apt-get update \\\n && apt-get install wget python make xz-utils gcc g++ zlib1g-dev libdb5.3 libdb5.3-dev libreadline6-dev libc6-dev-i386 patch zip libffi-dev python-cffi python-cffi-backend gcc-$CROSSCOMPILE_ARCH binutils-$CROSSCOMPILE_ARCH gcc-5-$CROSSCOMPILE_ARCH -y\nRUN mkdir -p $WORKING_DIRECTORY $INSTALL_DIRECTORY\nWORKDIR $WORKING_DIRECTORY\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.sqlite.org/2017/sqlite-autoconf-3160200.tar.gz \\\n && tar xzf sqlite-autoconf-3160200.tar.gz \\\n && cd sqlite-autoconf-3160200/ \\\n && ./configure --host=$CROSSCOMPILE_ARCH --prefix=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://zlib.net/fossils/zlib-1.1.4.tar.gz \\\n && tar xf zlib-1.1.4.tar.gz \\\n && cd zlib-1.1.4 \\\n && CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=\"$CROSSCOMPILE_ARCH-gcc -shared -Wl,-soname,libz.so.1\" ./configure --shared --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://www.openssl.org/source/openssl-1.0.1g.tar.gz \\\n && tar -pxzf openssl-1.0.1g.tar.gz \\\n && cd openssl-1.0.1g/ \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_parallel_build-1.patch \\\n && wget http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_parallel_build-1.patch \\\n && patch -Np1 -i openssl-1.0.1g-fix_pod_syntax-1.patch \\\n && ./Configure linux-x86_64 os/compiler:$CROSSCOMPILE_ARCH-gcc --prefix=$INSTALL_DIRECTORY -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/openssl-1.0.1g \\\n && make clean \\\n && ./Configure linux-x86_64 --prefix=/usr -fPIC \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega http://www.python.org/ftp/python/$PYTHON_VERSION/$PYTHON_ARCHIVE \\\n && rm -rf $SOURCE_DIRECTORY \\\n && tar -xf $PYTHON_ARCHIVE\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && for module in $ENABLE_MODULES; do sed \"s/^#$module/$module/\" -i Modules/Setup.dist ; done\nENV LDFLAGS=\"-L$INSTALL_DIRECTORY/lib\"\nENV LD_LIBRARY_PATH=\"$INSTALL_DIRECTORY/lib:$ROOT_FILESYSTEM/lib/\"\nENV CPPFLAGS=\"-I$ROOT_FILESYSTEM/include -I$INSTALL_DIRECTORY/include/python2.7  -I$INSTALL_DIRECTORY/include/openssl  -I$INSTALL_DIRECTORY/include  -I$WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi/arm-unknown-linux-gnueabihf/include\"\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY \\\n && make distclean || true \\\n && LDFLAGS=\"-L/usr/lib\" LD_LIBRARY_PATH=\"/usr/lib:/lib\" CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" ./configure --prefix=/usr --disable-ipv6 --enable-unicode=ucs4 ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no ac_cv_have_long_long_format=yes \\\n && make \\\n && make install\nRUN wget https://bootstrap.pypa.io/ez_setup.py -O - | python2.7\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && ./configure --host=$CROSSCOMPILE_ARCH --build=$BUILD_HOST --prefix=$INSTALL_DIRECTORY \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY/$SOURCE_DIRECTORY/Modules/_ctypes/libffi \\\n && make clean \\\n && ./configure --prefix= \\\n && make \\\n && make install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cffi/cffi-1.11.5.tar.gz \\\n && tar -xzf cffi-1.11.5.tar.gz \\\n && cd cffi-1.11.5 \\\n && set -x \\\n && CPPFLAGS=\"-I/usr/include -I/usr/include/python2.7 -I/usr/include/openssl\" python setup.py install\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/p/pycryptodome/pycryptodome-3.6.6.tar.gz \\\n && tar -xzf pycryptodome-3.6.6.tar.gz \\\n && cd pycryptodome-3.6.6 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN set -x \\\n && cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/a/argon2_cffi/argon2_cffi-18.3.0.tar.gz \\\n && tar -xzf argon2_cffi-18.3.0.tar.gz \\\n && cd argon2_cffi-18.3.0 \\\n && sed -i 's/optimized =.*/optimized = False/' setup.py \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && wget --progress=dot:mega https://pypi.python.org/packages/source/c/cryptography/cryptography-0.9.3.tar.gz \\\n && tar -xzf cryptography-0.9.3.tar.gz \\\n && cd cryptography-0.9.3 \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY/cffi-1.11.5 \\\n && rm -rf build dist \\\n && ARCH=$CROSSCOMPILE_ARCH PYTHONUSERBASE=$INSTALL_DIRECTORY CC=$CROSSCOMPILE_ARCH-gcc LDSHARED=$CROSSCOMPILE_ARCH-gcc LDFLAGS=\"-L$INSTALL_DIRECTORY/lib -shared\" python setup.py install --user\nRUN cd $WORKING_DIRECTORY \\\n && rm -rf _install_minimal \\\n && mkdir -p _install_minimal/bin \\\n && mkdir -p _install_minimal/lib/python2.7 \\\n && mkdir -p _install_minimal/include \\\n && cp $INSTALL_DIRECTORY/bin/python2.7 _install_minimal/bin/python \\\n && cd $INSTALL_DIRECTORY/lib/ \\\n && rm -rf python2.7-minimal \\\n && cp -r python2.7 python2.7-minimal \\\n && cd python2.7-minimal \\\n && rm -r site-packages config lib-dynload \\\n && rm *.doc *.txt \\\n && cd $WORKING_DIRECTORY \\\n && cp -r _install/lib/python2.7-minimal/* _install_minimal/lib/python2.7 \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/config _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/lib-dynload _install_minimal/lib/python2.7/ \\\n && cp -r _install/lib/python2.7/site-packages _install_minimal/lib/python2.7/ \\\n && cp -r _install/include/python2.7 _install_minimal/include/python2.7 \\\n && cd _install_minimal \\\n && rm -f $WORKING_DIRECTORY/../python-minimal.zip \\\n && zip -r $WORKING_DIRECTORY/../python-minimal.zip . \\\n && cd $INSTALL_DIRECTORY \\\n && rm -rf lib/python2.7-minimal \\\n && rm -f $WORKING_DIRECTORY/../python.zip \\\n && zip -r $WORKING_DIRECTORY/../python.zip .\n","originalDockerfileUglifiedHash":"c79ebd56c7966ddf33055956487ba948","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e89fc4a1e2fd921a42e7558ac6029a57e851feab.dockerfile"}