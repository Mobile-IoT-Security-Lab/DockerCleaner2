{"seed":2513577091,"processedDockerfileHash":"c43f110734e32d0ab56d82c99ff57067","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Rob Syme <rob.syme@gmail.com>\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget=1.15-1ubuntu1.14.04.5 hmmer=3.1b1-3 unzip=6.0-9ubuntu1.5 build-essential=11.6ubuntu6 -qqy\n#   Install TRF (for RepeatScout)\nWORKDIR /usr/local/bin\nRUN wget http://tandem.bu.edu/trf/downloads/trf407b.linux64 \\\n && mv trf*.linux64 trf \\\n && chmod +x trf\n#   Basic workdir\nWORKDIR /usr/local\n#   Install nseg (for RepeatScout)\nRUN mkdir nseg \\\n && cd nseg \\\n && wget ftp://ftp.ncbi.nih.gov/pub/seg/nseg/* \\\n && make \\\n && mv nseg ../bin \\\n && mv nmerge ../bin\n#   Install RepeatScout\nRUN wget http://bix.ucsd.edu/repeatscout/RepeatScout-1.0.5.tar.gz \\\n && tar -xvf RepeatScout* \\\n && rm RepeatScout*.tar.gz \\\n && mv RepeatScout* RepeatScout \\\n && cd RepeatScout \\\n && make\n#   Install RMBlast\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/rmblast/2.2.28/ncbi-rmblastn-2.2.28-x64-linux.tar.gz \\\n && tar -xzvf ncbi-rmblastn* \\\n && rm ncbi-rmblastn*.tar.gz \\\n && mv ncbi-rmblastn*/bin/rmblastn bin \\\n && rm -rf ncbi-rmblastn\n#   Install Blast+\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-x64-linux.tar.gz \\\n && tar -xzvf ncbi-blast* \\\n && find ncbi-blast* -type f -executable -exec mv {} bin\n#   Install RepeatMasker\nRUN wget http://www.repeatmasker.org/RepeatMasker-open-4-0-7.tar.gz \\\n && tar -xzvf RepeatMasker-open*.tar.gz \\\n && rm -f RepeatMasker-open*.tar.gz \\\n && perl -0p -e 's/\\/usr\\/local\\/hmmer/\\/usr\\/bin/g;' -e 's/\\/usr\\/local\\/rmblast/\\/usr\\/local\\/bin/g;' -e 's/DEFAULT_SEARCH_ENGINE = \"crossmatch\"/DEFAULT_SEARCH_ENGINE = \"ncbi\"/g;' -e 's/TRF_PRGM = \"\"/TRF_PRGM = \"\\/usr\\/local\\/bin\\/trf\"/g;' RepeatMasker/RepeatMaskerConfig.tmpl > RepeatMasker/RepeatMaskerConfig.pm\n#   Fix RepeatMasker's strange shebang lines\nRUN cd /usr/local/RepeatMasker \\\n && perl -i -0pe 's/^#\\!.*perl.*/#\\!\\/usr\\/bin\\/env perl/g' RepeatMasker DateRepeats ProcessRepeats RepeatProteinMask DupMasker util/queryRepeatDatabase.pl util/queryTaxonomyDatabase.pl util/rmOutToGFF3.pl util/rmToUCSCTables.pl\n#   Install RIPcal\nRUN wget http://downloads.sourceforge.net/project/ripcal/RIPCAL/RIPCAL_2.0/ripcal2_install.zip \\\n && unzip ripcal*.zip \\\n && rm ripcal*.zip \\\n && mv ripcal* ripcal \\\n && cd ripcal \\\n && chmod +x perl/*\n#   Install RECON\nRUN wget http://www.repeatmasker.org/RepeatModeler/RECON-1.08.tar.gz \\\n && tar -xvf RECON* \\\n && rm RECON*.tar.gz \\\n && mv RECON* recon \\\n && cd recon/src \\\n && make \\\n && make install \\\n && perl -i -0pe 's/\\$path = \"\";/\\$path = \"\\/usr\\/local\\/RECON-1.08\\/bin\";/g' ../scripts/recon.pl\n#   Install RepeatModeler deps\nRUN apt-get install --no-install-recommends libjson-perl=2.61-1 liburi-perl=1.60-1 liblwp-useragent-determined-perl=1.06-1 -qqy\n#   Install RepeatModeler\nRUN wget http://www.repeatmasker.org/RepeatModeler/RepeatModeler-open-1.0.10.tar.gz \\\n && tar -xvf RepeatModeler-*.tar.gz \\\n && rm RepeatModeler-*.tar.gz \\\n && mv RepeatModeler-*/ RepeatModeler \\\n && cd RepeatModeler \\\n && perl -i -0pe 's/^#\\!.*/#\\!\\/usr\\/bin\\/env perl/g' configure BuildDatabase Refiner RepeatClassifier RepeatModeler TRFMask util/dfamConsensusTool.pl util/renameIds.pl util/viewMSA.pl \\\n && cat RepModelConfig.pm.tmpl | perl -p -e 's/\\$RMBLAST_DIR +=.*;$/\\$RMBLAST_DIR = \"\\/usr\\/local\\/bin\";/g' | perl -p -e 's/\\$RECON_DIR +=.*;$/\\$RECON_DIR = \"\\/usr\\/local\\/recon\\/bin\";/g' | perl -p -e 's/\\$RSCOUT_DIR +=.*;$/\\$RSCOUT_DIR = \"\\/usr\\/local\\/RepeatScout\";/g' > RepModelConfig.pm\n#   I can't bundle the girinst RepBase libraries with the docker image,\n#   so you'll need to get them yourself. Download them from\n#   http://www.girinst.org/server/RepBase/protected/repeatmaskerlibraries/RepBaseRepeatMaskerEdition-20170127.tar.gz\nONBUILD WORKDIR /usr/local/RepeatMasker\nONBUILD ADD repeatmaskerlibraries.tar.gz /usr/local/RepeatMasker\nONBUILD RUN cd /usr/local/RepeatMasker \\\n && util/buildRMLibFromEMBL.pl Libraries/RMRBSeqs.embl > Libraries/RepeatMasker.lib \\\n && makeblastdb -dbtype nucl -in Libraries/RepeatMasker.lib > /dev/null 2>&1 \\\n && makeblastdb -dbtype prot -in Libraries/RepeatPeps.lib > /dev/null 2>&1\nENV PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/RepeatMasker:/usr/local/RepeatScout:/usr/local/recon/bin:/usr/local/RepeatModeler\"\n#  ENTRYPOINT [\"/usr/local/RepeatMasker/RepeatMasker\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Rob Syme <rob.syme@gmail.com>\nRUN apt-get update \\\n && apt-get install wget hmmer unzip build-essential -qqy\n#  Install TRF (for RepeatScout)\nWORKDIR /usr/local/bin\nRUN wget http://tandem.bu.edu/trf/downloads/trf407b.linux64 \\\n && mv trf*.linux64 trf \\\n && chmod +x trf\n#  Basic workdir\nWORKDIR /usr/local\n#  Install nseg (for RepeatScout)\nRUN mkdir nseg \\\n && cd nseg \\\n && wget ftp://ftp.ncbi.nih.gov/pub/seg/nseg/* \\\n && make \\\n && mv nseg ../bin \\\n && mv nmerge ../bin\n#  Install RepeatScout\nRUN wget http://bix.ucsd.edu/repeatscout/RepeatScout-1.0.5.tar.gz \\\n && tar -xvf RepeatScout* \\\n && rm RepeatScout*.tar.gz \\\n && mv RepeatScout* RepeatScout \\\n && cd RepeatScout \\\n && make\n#  Install RMBlast\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/rmblast/2.2.28/ncbi-rmblastn-2.2.28-x64-linux.tar.gz \\\n && tar -xzvf ncbi-rmblastn* \\\n && rm ncbi-rmblastn*.tar.gz \\\n && mv ncbi-rmblastn*/bin/rmblastn bin \\\n && rm -rf ncbi-rmblastn\n#  Install Blast+\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-x64-linux.tar.gz \\\n && tar -xzvf ncbi-blast* \\\n && find ncbi-blast* -type f -executable -exec mv {} bin ; \\\n && rm -rf ncbi-blast*\n#  Install RepeatMasker\nRUN wget http://www.repeatmasker.org/RepeatMasker-open-4-0-7.tar.gz \\\n && tar -xzvf RepeatMasker-open*.tar.gz \\\n && rm -f RepeatMasker-open*.tar.gz \\\n && perl -0p -e 's/\\/usr\\/local\\/hmmer/\\/usr\\/bin/g;' -e 's/\\/usr\\/local\\/rmblast/\\/usr\\/local\\/bin/g;' -e 's/DEFAULT_SEARCH_ENGINE = \"crossmatch\"/DEFAULT_SEARCH_ENGINE = \"ncbi\"/g;' -e 's/TRF_PRGM = \"\"/TRF_PRGM = \"\\/usr\\/local\\/bin\\/trf\"/g;' RepeatMasker/RepeatMaskerConfig.tmpl > RepeatMasker/RepeatMaskerConfig.pm\n#  Fix RepeatMasker's strange shebang lines\nRUN cd /usr/local/RepeatMasker \\\n && perl -i -0pe 's/^#\\!.*perl.*/#\\!\\/usr\\/bin\\/env perl/g' RepeatMasker DateRepeats ProcessRepeats RepeatProteinMask DupMasker util/queryRepeatDatabase.pl util/queryTaxonomyDatabase.pl util/rmOutToGFF3.pl util/rmToUCSCTables.pl\n#  Install RIPcal\nRUN wget http://downloads.sourceforge.net/project/ripcal/RIPCAL/RIPCAL_2.0/ripcal2_install.zip \\\n && unzip ripcal*.zip \\\n && rm ripcal*.zip \\\n && mv ripcal* ripcal \\\n && cd ripcal \\\n && chmod +x perl/*\n#  Install RECON\nRUN wget http://www.repeatmasker.org/RepeatModeler/RECON-1.08.tar.gz \\\n && tar -xvf RECON* \\\n && rm RECON*.tar.gz \\\n && mv RECON* recon \\\n && cd recon/src \\\n && make \\\n && make install \\\n && perl -i -0pe 's/\\$path = \"\";/\\$path = \"\\/usr\\/local\\/RECON-1.08\\/bin\";/g' ../scripts/recon.pl\n#  Install RepeatModeler deps\nRUN apt-get install libjson-perl liburi-perl liblwp-useragent-determined-perl -qqy\n#  Install RepeatModeler\nRUN wget http://www.repeatmasker.org/RepeatModeler/RepeatModeler-open-1.0.10.tar.gz \\\n && tar -xvf RepeatModeler-*.tar.gz \\\n && rm RepeatModeler-*.tar.gz \\\n && mv RepeatModeler-*/ RepeatModeler \\\n && cd RepeatModeler \\\n && perl -i -0pe 's/^#\\!.*/#\\!\\/usr\\/bin\\/env perl/g' configure BuildDatabase Refiner RepeatClassifier RepeatModeler TRFMask util/dfamConsensusTool.pl util/renameIds.pl util/viewMSA.pl \\\n && cat RepModelConfig.pm.tmpl | perl -p -e 's/\\$RMBLAST_DIR +=.*;$/\\$RMBLAST_DIR = \"\\/usr\\/local\\/bin\";/g' | perl -p -e 's/\\$RECON_DIR +=.*;$/\\$RECON_DIR = \"\\/usr\\/local\\/recon\\/bin\";/g' | perl -p -e 's/\\$RSCOUT_DIR +=.*;$/\\$RSCOUT_DIR = \"\\/usr\\/local\\/RepeatScout\";/g' > RepModelConfig.pm\n#  I can't bundle the girinst RepBase libraries with the docker image,\n#  so you'll need to get them yourself. Download them from\n#  http://www.girinst.org/server/RepBase/protected/repeatmaskerlibraries/RepBaseRepeatMaskerEdition-20170127.tar.gz\nONBUILD WORKDIR /usr/local/RepeatMasker\nONBUILD ADD repeatmaskerlibraries.tar.gz /usr/local/RepeatMasker\nONBUILD RUN cd /usr/local/RepeatMasker \\\n && util/buildRMLibFromEMBL.pl Libraries/RMRBSeqs.embl > Libraries/RepeatMasker.lib \\\n && makeblastdb -dbtype nucl -in Libraries/RepeatMasker.lib > /dev/null 2>&1 \\\n && makeblastdb -dbtype prot -in Libraries/RepeatPeps.lib > /dev/null 2>&1\nENV PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/RepeatMasker:/usr/local/RepeatScout:/usr/local/recon/bin:/usr/local/RepeatModeler\"\n# ENTRYPOINT [\"/usr/local/RepeatMasker/RepeatMasker\"]\n","injectedSmells":[],"originalDockerfileHash":"97a3ca5d8c1ce9be6f26546895d22483","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Rob Syme <rob.syme@gmail.com>\nRUN apt-get update \\\n && apt-get install wget hmmer unzip build-essential -qqy\n#   Install TRF (for RepeatScout)\nWORKDIR /usr/local/bin\nRUN wget http://tandem.bu.edu/trf/downloads/trf407b.linux64 \\\n && mv trf*.linux64 trf \\\n && chmod +x trf\n#   Basic workdir\nWORKDIR /usr/local\n#   Install nseg (for RepeatScout)\nRUN mkdir nseg \\\n && cd nseg \\\n && wget ftp://ftp.ncbi.nih.gov/pub/seg/nseg/* \\\n && make \\\n && mv nseg ../bin \\\n && mv nmerge ../bin\n#   Install RepeatScout\nRUN wget http://bix.ucsd.edu/repeatscout/RepeatScout-1.0.5.tar.gz \\\n && tar -xvf RepeatScout* \\\n && rm RepeatScout*.tar.gz \\\n && mv RepeatScout* RepeatScout \\\n && cd RepeatScout \\\n && make\n#   Install RMBlast\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/rmblast/2.2.28/ncbi-rmblastn-2.2.28-x64-linux.tar.gz \\\n && tar -xzvf ncbi-rmblastn* \\\n && rm ncbi-rmblastn*.tar.gz \\\n && mv ncbi-rmblastn*/bin/rmblastn bin \\\n && rm -rf ncbi-rmblastn\n#   Install Blast+\nRUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-x64-linux.tar.gz \\\n && tar -xzvf ncbi-blast* \\\n && find ncbi-blast* -type f -executable -exec mv {} bin\n#   Install RepeatMasker\nRUN wget http://www.repeatmasker.org/RepeatMasker-open-4-0-7.tar.gz \\\n && tar -xzvf RepeatMasker-open*.tar.gz \\\n && rm -f RepeatMasker-open*.tar.gz \\\n && perl -0p -e 's/\\/usr\\/local\\/hmmer/\\/usr\\/bin/g;' -e 's/\\/usr\\/local\\/rmblast/\\/usr\\/local\\/bin/g;' -e 's/DEFAULT_SEARCH_ENGINE = \"crossmatch\"/DEFAULT_SEARCH_ENGINE = \"ncbi\"/g;' -e 's/TRF_PRGM = \"\"/TRF_PRGM = \"\\/usr\\/local\\/bin\\/trf\"/g;' RepeatMasker/RepeatMaskerConfig.tmpl > RepeatMasker/RepeatMaskerConfig.pm\n#   Fix RepeatMasker's strange shebang lines\nRUN cd /usr/local/RepeatMasker \\\n && perl -i -0pe 's/^#\\!.*perl.*/#\\!\\/usr\\/bin\\/env perl/g' RepeatMasker DateRepeats ProcessRepeats RepeatProteinMask DupMasker util/queryRepeatDatabase.pl util/queryTaxonomyDatabase.pl util/rmOutToGFF3.pl util/rmToUCSCTables.pl\n#   Install RIPcal\nRUN wget http://downloads.sourceforge.net/project/ripcal/RIPCAL/RIPCAL_2.0/ripcal2_install.zip \\\n && unzip ripcal*.zip \\\n && rm ripcal*.zip \\\n && mv ripcal* ripcal \\\n && cd ripcal \\\n && chmod +x perl/*\n#   Install RECON\nRUN wget http://www.repeatmasker.org/RepeatModeler/RECON-1.08.tar.gz \\\n && tar -xvf RECON* \\\n && rm RECON*.tar.gz \\\n && mv RECON* recon \\\n && cd recon/src \\\n && make \\\n && make install \\\n && perl -i -0pe 's/\\$path = \"\";/\\$path = \"\\/usr\\/local\\/RECON-1.08\\/bin\";/g' ../scripts/recon.pl\n#   Install RepeatModeler deps\nRUN apt-get install libjson-perl liburi-perl liblwp-useragent-determined-perl -qqy\n#   Install RepeatModeler\nRUN wget http://www.repeatmasker.org/RepeatModeler/RepeatModeler-open-1.0.10.tar.gz \\\n && tar -xvf RepeatModeler-*.tar.gz \\\n && rm RepeatModeler-*.tar.gz \\\n && mv RepeatModeler-*/ RepeatModeler \\\n && cd RepeatModeler \\\n && perl -i -0pe 's/^#\\!.*/#\\!\\/usr\\/bin\\/env perl/g' configure BuildDatabase Refiner RepeatClassifier RepeatModeler TRFMask util/dfamConsensusTool.pl util/renameIds.pl util/viewMSA.pl \\\n && cat RepModelConfig.pm.tmpl | perl -p -e 's/\\$RMBLAST_DIR +=.*;$/\\$RMBLAST_DIR = \"\\/usr\\/local\\/bin\";/g' | perl -p -e 's/\\$RECON_DIR +=.*;$/\\$RECON_DIR = \"\\/usr\\/local\\/recon\\/bin\";/g' | perl -p -e 's/\\$RSCOUT_DIR +=.*;$/\\$RSCOUT_DIR = \"\\/usr\\/local\\/RepeatScout\";/g' > RepModelConfig.pm\n#   I can't bundle the girinst RepBase libraries with the docker image,\n#   so you'll need to get them yourself. Download them from\n#   http://www.girinst.org/server/RepBase/protected/repeatmaskerlibraries/RepBaseRepeatMaskerEdition-20170127.tar.gz\nONBUILD WORKDIR /usr/local/RepeatMasker\nONBUILD ADD repeatmaskerlibraries.tar.gz /usr/local/RepeatMasker\nONBUILD RUN cd /usr/local/RepeatMasker \\\n && util/buildRMLibFromEMBL.pl Libraries/RMRBSeqs.embl > Libraries/RepeatMasker.lib \\\n && makeblastdb -dbtype nucl -in Libraries/RepeatMasker.lib > /dev/null 2>&1 \\\n && makeblastdb -dbtype prot -in Libraries/RepeatPeps.lib > /dev/null 2>&1\nENV PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/RepeatMasker:/usr/local/RepeatScout:/usr/local/recon/bin:/usr/local/RepeatModeler\"\n#  ENTRYPOINT [\"/usr/local/RepeatMasker/RepeatMasker\"]\n","originalDockerfileUglifiedHash":"d5cf6695bdcede488ecffc2e3a6a12d0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e97e40e5376ae6a66ead8fe5978952cfd8ca422e.dockerfile"}