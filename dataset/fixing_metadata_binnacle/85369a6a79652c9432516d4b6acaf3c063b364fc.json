{"seed":1996113161,"processedDockerfileHash":"e66d14775948229e811a655a47e0ac0a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"ARG BASEIMAGE_VERSION=6\nFROM amd64/centos:${BASEIMAGE_VERSION} AS base_image\nFROM base_image AS build_tools\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel tar curl openssl ca-certificates zlib-devel \\\n && yum clean all \\\n && rm -rf /var/cache/yum\nENV M2_HOME=\"/opt/maven\"\nRUN mkdir -p ${M2_HOME} \\\n && curl -fsSL http://apache.osuosl.org/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.tar.gz | tar -xzC ${M2_HOME} --strip-components=1 \\\n && curl -O http://repo1.maven.org/maven2/io/takari/aether/takari-local-repository/0.11.2/takari-local-repository-0.11.2.jar \\\n && mv takari-local-repository-0.11.2.jar ${M2_HOME}/lib/ext \\\n && curl -O http://repo1.maven.org/maven2/io/takari/takari-filemanager/0.8.3/takari-filemanager-0.8.3.jar \\\n && mv takari-filemanager-0.8.3.jar ${M2_HOME}/lib/ext\nRUN mkdir -p /opt/sbt \\\n && curl -fsSL https://dl.bintray.com/sbt/native-packages/sbt/0.13.13/sbt-0.13.13.tgz | tar -xzC /opt/sbt --strip-components=1\nRUN mkdir -p /opt/cmake \\\n && curl -fsSL https://cmake.org/files/v3.14/cmake-3.14.3-Linux-x86_64.tar.gz | tar -xzC /opt/cmake --strip-components=1\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-cpp-3.5.1.tar.gz | tar xz \\\n && cd protobuf-3.5.1 \\\n && ./configure --prefix=/opt/protobuf \\\n && make -j2 \\\n && make install \\\n && cd .. \\\n && rm -rf protobuf-3.5.1\n#   Required for DL4J docs generation\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz | tar xz \\\n && cd Python-2.7.13 \\\n && ./configure --prefix=/opt/python27 \\\n && make -j2 \\\n && make altinstall\n#   Required for datavec-python\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/3.6.8/Python-3.6.8.tgz | tar xz \\\n && cd Python-3.6.8 \\\n && ./configure --prefix=/opt/python36 \\\n && make -j2 \\\n && make altinstall\nFROM base_image AS base_builder_image\nCOPY --from=build_tools /opt /opt\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel devtoolset-7-toolchain devtoolset-7-libasan-devel devtoolset-7-liblsan-devel tar wget curl openssl ca-certificates git rpm-build java-1.8.0-openjdk-devel which gtk2-devel python-argparse python-pip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && ln -s /opt/maven/bin/mvn /usr/bin/mvn \\\n && ln -s /opt/python27/bin/python2.7 /usr/local/bin/python \\\n && ln -s /opt/python36/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /opt/python36/bin/pip3.6 /usr/local/bin/pip3\n#   Required for Datavec-python\nRUN pip install Cython==0.29.34 --install-option=\"--no-cython-compile\" --no-cache-dir\nENV HOME=\"/home/jenkins\"\nRUN groupadd jenkins -g 1000 \\\n && useradd -d ${HOME} -u 1000 -g 1000 -m jenkins\nUSER jenkins\nWORKDIR ${HOME}\n#   Not working...\nRUN echo 'source /opt/rh/devtoolset-7/enable' >> \"${HOME}/.bashrc\"\nENV PATH=\"/opt/sbt/bin:/opt/cmake/bin:/opt/protobuf/bin:/opt/python36/bin:${PATH}\" \\\n    JAVA_OPTS=\"-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap ${JAVA_OPTS}\" \\\n    PROTOBUF_HOME=\"/opt/protobuf\"\nCMD [\"cat\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"ARG BASEIMAGE_VERSION=6\nFROM amd64/centos:${BASEIMAGE_VERSION} AS base_image\nFROM base_image AS build_tools\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel tar curl openssl ca-certificates zlib-devel \\\n && yum clean all \\\n && rm -rf /var/cache/yum\nENV M2_HOME=\"/opt/maven\"\nRUN mkdir -p ${M2_HOME} \\\n && curl -fsSL http://apache.osuosl.org/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.tar.gz | tar -xzC ${M2_HOME} --strip-components=1 \\\n && curl -O http://repo1.maven.org/maven2/io/takari/aether/takari-local-repository/0.11.2/takari-local-repository-0.11.2.jar \\\n && mv takari-local-repository-0.11.2.jar ${M2_HOME}/lib/ext \\\n && curl -O http://repo1.maven.org/maven2/io/takari/takari-filemanager/0.8.3/takari-filemanager-0.8.3.jar \\\n && mv takari-filemanager-0.8.3.jar ${M2_HOME}/lib/ext\nRUN mkdir -p /opt/sbt \\\n && curl -fsSL https://dl.bintray.com/sbt/native-packages/sbt/0.13.13/sbt-0.13.13.tgz | tar -xzC /opt/sbt --strip-components=1\nRUN mkdir -p /opt/cmake \\\n && curl -fsSL https://cmake.org/files/v3.14/cmake-3.14.3-Linux-x86_64.tar.gz | tar -xzC /opt/cmake --strip-components=1\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-cpp-3.5.1.tar.gz | tar xz \\\n && cd protobuf-3.5.1 \\\n && ./configure --prefix=/opt/protobuf \\\n && make -j2 \\\n && make install \\\n && cd .. \\\n && rm -rf protobuf-3.5.1\n#  Required for DL4J docs generation\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz | tar xz \\\n && cd Python-2.7.13 \\\n && ./configure --prefix=/opt/python27 \\\n && make -j2 \\\n && make altinstall\n#  Required for datavec-python\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/3.6.8/Python-3.6.8.tgz | tar xz \\\n && cd Python-3.6.8 \\\n && ./configure --prefix=/opt/python36 \\\n && make -j2 \\\n && make altinstall\nFROM base_image AS base_builder_image\nCOPY --from=build_tools /opt /opt\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel devtoolset-7-toolchain devtoolset-7-libasan-devel devtoolset-7-liblsan-devel tar wget curl openssl ca-certificates git rpm-build java-1.8.0-openjdk-devel which gtk2-devel python-argparse python-pip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && ln -s /opt/maven/bin/mvn /usr/bin/mvn \\\n && ln -s /opt/python27/bin/python2.7 /usr/local/bin/python \\\n && ln -s /opt/python36/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /opt/python36/bin/pip3.6 /usr/local/bin/pip3\n#  Required for Datavec-python\nRUN pip install Cython --install-option=\"--no-cython-compile\" --no-cache-dir\nENV HOME=\"/home/jenkins\"\nRUN groupadd jenkins -g 1000 \\\n && useradd -d ${HOME} -u 1000 -g 1000 -m jenkins\nUSER jenkins\nWORKDIR ${HOME}\n#  Not working...\nRUN echo 'source /opt/rh/devtoolset-7/enable' >> \"${HOME}/.bashrc\"\nENV PATH=\"/opt/sbt/bin:/opt/cmake/bin:/opt/protobuf/bin:/opt/python36/bin:${PATH}\" \\\n    JAVA_OPTS=\"-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap ${JAVA_OPTS}\" \\\n    PROTOBUF_HOME=\"/opt/protobuf\"\nCMD [\"cat\"]\n","injectedSmells":[],"originalDockerfileHash":"7f655d6d149034eebcc13b4776fa4509","successfullyInjectedSmells":[],"originalDockerfileUglified":"ARG BASEIMAGE_VERSION=6\nFROM amd64/centos:${BASEIMAGE_VERSION} AS base_image\nFROM base_image AS build_tools\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel tar curl openssl ca-certificates zlib-devel \\\n && yum clean all \\\n && rm -rf /var/cache/yum\nENV M2_HOME=\"/opt/maven\"\nRUN mkdir -p ${M2_HOME} \\\n && curl -fsSL http://apache.osuosl.org/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.tar.gz | tar -xzC ${M2_HOME} --strip-components=1 \\\n && curl -O http://repo1.maven.org/maven2/io/takari/aether/takari-local-repository/0.11.2/takari-local-repository-0.11.2.jar \\\n && mv takari-local-repository-0.11.2.jar ${M2_HOME}/lib/ext \\\n && curl -O http://repo1.maven.org/maven2/io/takari/takari-filemanager/0.8.3/takari-filemanager-0.8.3.jar \\\n && mv takari-filemanager-0.8.3.jar ${M2_HOME}/lib/ext\nRUN mkdir -p /opt/sbt \\\n && curl -fsSL https://dl.bintray.com/sbt/native-packages/sbt/0.13.13/sbt-0.13.13.tgz | tar -xzC /opt/sbt --strip-components=1\nRUN mkdir -p /opt/cmake \\\n && curl -fsSL https://cmake.org/files/v3.14/cmake-3.14.3-Linux-x86_64.tar.gz | tar -xzC /opt/cmake --strip-components=1\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-cpp-3.5.1.tar.gz | tar xz \\\n && cd protobuf-3.5.1 \\\n && ./configure --prefix=/opt/protobuf \\\n && make -j2 \\\n && make install \\\n && cd .. \\\n && rm -rf protobuf-3.5.1\n#   Required for DL4J docs generation\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz | tar xz \\\n && cd Python-2.7.13 \\\n && ./configure --prefix=/opt/python27 \\\n && make -j2 \\\n && make altinstall\n#   Required for datavec-python\nRUN source /opt/rh/devtoolset-6/enable \\\n && curl -fsSL https://www.python.org/ftp/python/3.6.8/Python-3.6.8.tgz | tar xz \\\n && cd Python-3.6.8 \\\n && ./configure --prefix=/opt/python36 \\\n && make -j2 \\\n && make altinstall\nFROM base_image AS base_builder_image\nCOPY --from=build_tools /opt /opt\nRUN yum install -y centos-release-scl-rh epel-release \\\n && yum update -y \\\n && yum install -y devtoolset-6-toolchain devtoolset-6-libasan-devel devtoolset-6-liblsan-devel devtoolset-7-toolchain devtoolset-7-libasan-devel devtoolset-7-liblsan-devel tar wget curl openssl ca-certificates git rpm-build java-1.8.0-openjdk-devel which gtk2-devel python-argparse python-pip \\\n && yum clean all \\\n && rm -rf /var/cache/yum \\\n && ln -s /opt/maven/bin/mvn /usr/bin/mvn \\\n && ln -s /opt/python27/bin/python2.7 /usr/local/bin/python \\\n && ln -s /opt/python36/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /opt/python36/bin/pip3.6 /usr/local/bin/pip3\n#   Required for Datavec-python\nRUN pip install Cython --install-option=\"--no-cython-compile\" --no-cache-dir\nENV HOME=\"/home/jenkins\"\nRUN groupadd jenkins -g 1000 \\\n && useradd -d ${HOME} -u 1000 -g 1000 -m jenkins\nUSER jenkins\nWORKDIR ${HOME}\n#   Not working...\nRUN echo 'source /opt/rh/devtoolset-7/enable' >> \"${HOME}/.bashrc\"\nENV PATH=\"/opt/sbt/bin:/opt/cmake/bin:/opt/protobuf/bin:/opt/python36/bin:${PATH}\" \\\n    JAVA_OPTS=\"-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap ${JAVA_OPTS}\" \\\n    PROTOBUF_HOME=\"/opt/protobuf\"\nCMD [\"cat\"]\n","originalDockerfileUglifiedHash":"05188ae416ed94161c35fb9e2636f5bd","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/85369a6a79652c9432516d4b6acaf3c063b364fc.dockerfile"}