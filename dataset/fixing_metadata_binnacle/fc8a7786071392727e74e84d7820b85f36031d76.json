{"seed":1681784575,"processedDockerfileHash":"d0f15258465536a0cb1804bb76912c52","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright (c) 2018 SAP SE or an SAP affiliate company. All rights reserved. This file is licensed under the Apache Software License, v. 2 except as noted otherwise in the LICENSE file\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   build gardenctl binary\nFROM golang:1.12.4\nRUN mkdir -p /go/src/github.com/gardener/gardenctl \\\n && cd /go/src/github.com/gardener \\\n && git clone https://github.com/gardener/gardenctl.git \\\n && cd ./gardenctl \\\n && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o gardenctl .\n#   minimal Ubuntu LTS version\nFROM ubuntu:18.04\nCOPY --from=0 /go/src/github.com/gardener/gardenctl/gardenctl .\nCOPY clusters /root/clusters\nCOPY config /root/.garden/config\n#   run as root in root\nUSER root\nWORKDIR /\n#   install basic tools\nRUN apt-get update --yes ; apt-get install --no-install-recommends curl --yes ; apt-get install --no-install-recommends tree --yes ; apt-get install --no-install-recommends silversearcher-ag --yes ; apt-get install --no-install-recommends htop --yes ; apt-get install --no-install-recommends less --yes ; apt-get install --no-install-recommends vim --yes ; apt-get install --no-install-recommends tmux --yes ; apt-get install --no-install-recommends bash-completion --yes ; curl -sL https://github.com/jingweno/ccat/releases/download/v1.1.0/linux-amd64-1.1.0.tar.gz -o ccat.tar.gz \\\n && tar -zxvf ccat.tar.gz linux-amd64-1.1.0/ccat \\\n && mv linux-amd64-1.1.0/ccat /bin/cat \\\n && rm -rf linux-amd64-1.1.0 ccat.tar.gz \\\n && chmod 755 /bin/cat ; curl -sL http://stedolan.github.io/jq/download/linux64/jq -o /bin/jq \\\n && chmod 755 /bin/jq ; curl -sL https://github.com/bronze1man/yaml2json/raw/master/builds/linux_amd64/yaml2json -o /bin/yaml2json \\\n && chmod 755 /bin/yaml2json ; rm -rf /var/lib/apt/lists\n#   install network tools\nRUN apt-get update --yes ; apt-get install --no-install-recommends dnsutils --yes ; apt-get install --no-install-recommends netcat-openbsd --yes ; apt-get install --no-install-recommends iproute2 --yes ; apt-get install --no-install-recommends dstat --yes ; apt-get install --no-install-recommends ngrep --yes ; apt-get install --no-install-recommends tcpdump --yes ; rm -rf /var/lib/apt/lists\n#   install Kubernetes CLI\nRUN curl -sL https://storage.googleapis.com/kubernetes-release/release/$( curl -sL https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl -o /usr/local/bin/kubectl \\\n && chmod 755 /usr/local/bin/kubectl\n#   install minimal python\nRUN apt-get install --no-install-recommends python-minimal --yes ; curl -sL https://bootstrap.pypa.io/get-pip.py -o get-pip.py ; python get-pip.py ; rm get-pip.py\n#   launch bash\nENTRYPOINT [\"/bin/bash\"]\n#   install AWS CLI\nRUN pip install awscli==1.27.114\n#   install Azure CLI\nRUN apt-get update --yes ; apt-get install --no-install-recommends lsb-release gnupg apt-transport-https --yes ; AZ_REPO=\"$( lsb_release -cs ;)\" ; echo \"deb https://packages.microsoft.com/repos/azure-cli $AZ_REPO main\" | tee /etc/apt/sources.list.d/azure-cli.list ; curl -sL https://packages.microsoft.com/keys/microsoft.asc | apt-key add - ; apt-get update --yes \\\n && apt-get install --no-install-recommends azure-cli --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#   install GCP CLI\nRUN apt-get update --yes ; apt-get install --no-install-recommends lsb-release gnupg apt-transport-https --yes ; GCP_REPO=\"cloud-sdk-$( lsb_release -cs ;)\" ; echo \"deb http://packages.cloud.google.com/apt $GCP_REPO main\" | tee /etc/apt/sources.list.d/google-cloud-sdk.list ; curl -sL https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - ; apt-get update --yes \\\n && apt-get install --no-install-recommends google-cloud-sdk --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#   install OpenStack CLI\nRUN pip install python-novaclient==18.3.0 python-glanceclient==4.3.0 python-cinderclient==9.3.0 python-swiftclient==4.3.0\n#   install Gardener CLI\nRUN mkdir -p /opt/gardenctl/bin \\\n && mv gardenctl /opt/gardenctl/bin/gardenctl \\\n && ln -s /opt/gardenctl/bin/gardenctl /usr/local/bin/gardenctl \\\n && gardenctl completion ; mv gardenctl_completion.sh /root/gardenctl_completion.sh \\\n && echo \". /etc/profile\" >> /root/.bashrc \\\n && echo \". /root/gardenctl_completion.sh\" >> /root/.bashrc\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (c) 2018 SAP SE or an SAP affiliate company. All rights reserved. This file is licensed under the Apache Software License, v. 2 except as noted otherwise in the LICENSE file\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#  build gardenctl binary\nFROM golang:1.12.4\nRUN mkdir -p /go/src/github.com/gardener/gardenctl \\\n && cd /go/src/github.com/gardener \\\n && git clone https://github.com/gardener/gardenctl.git \\\n && cd ./gardenctl \\\n && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o gardenctl .\n#  minimal Ubuntu LTS version\nFROM ubuntu:18.04\nCOPY --from=0 /go/src/github.com/gardener/gardenctl/gardenctl .\nCOPY clusters /root/clusters\nCOPY config /root/.garden/config\n#  run as root in root\nUSER root\nWORKDIR /\n#  install basic tools\nRUN apt-get update --yes ; apt-get install curl --yes ; apt-get install tree --yes ; apt-get install silversearcher-ag --yes ; apt-get install htop --yes ; apt-get install less --yes ; apt-get install vim --yes ; apt-get install tmux --yes ; apt-get install bash-completion --yes ; curl -sL https://github.com/jingweno/ccat/releases/download/v1.1.0/linux-amd64-1.1.0.tar.gz -o ccat.tar.gz \\\n && tar -zxvf ccat.tar.gz linux-amd64-1.1.0/ccat \\\n && mv linux-amd64-1.1.0/ccat /bin/cat \\\n && rm -rf linux-amd64-1.1.0 ccat.tar.gz \\\n && chmod 755 /bin/cat ; curl -sL http://stedolan.github.io/jq/download/linux64/jq -o /bin/jq \\\n && chmod 755 /bin/jq ; curl -sL https://github.com/bronze1man/yaml2json/raw/master/builds/linux_amd64/yaml2json -o /bin/yaml2json \\\n && chmod 755 /bin/yaml2json ; rm -rf /var/lib/apt/lists\n#  install network tools\nRUN apt-get update --yes ; apt-get install dnsutils --yes ; apt-get install netcat-openbsd --yes ; apt-get install iproute2 --yes ; apt-get install dstat --yes ; apt-get install ngrep --yes ; apt-get install tcpdump --yes ; rm -rf /var/lib/apt/lists\n#  install Kubernetes CLI\nRUN curl -sL https://storage.googleapis.com/kubernetes-release/release/$( curl -sL https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl -o /usr/local/bin/kubectl \\\n && chmod 755 /usr/local/bin/kubectl\n#  install minimal python\nRUN apt-get install python-minimal --yes ; curl -sL https://bootstrap.pypa.io/get-pip.py -o get-pip.py ; python get-pip.py ; rm get-pip.py\n#  launch bash\nENTRYPOINT [\"/bin/bash\"]\n#  install AWS CLI\nRUN pip install awscli\n#  install Azure CLI\nRUN apt-get update --yes ; apt-get install lsb-release gnupg apt-transport-https --yes ; AZ_REPO=\"$( lsb_release -cs ;)\" ; echo \"deb https://packages.microsoft.com/repos/azure-cli $AZ_REPO main\" | tee /etc/apt/sources.list.d/azure-cli.list ; curl -sL https://packages.microsoft.com/keys/microsoft.asc | apt-key add - ; apt-get update --yes \\\n && apt-get install azure-cli --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#  install GCP CLI\nRUN apt-get update --yes ; apt-get install lsb-release gnupg apt-transport-https --yes ; GCP_REPO=\"cloud-sdk-$( lsb_release -cs ;)\" ; echo \"deb http://packages.cloud.google.com/apt $GCP_REPO main\" | tee /etc/apt/sources.list.d/google-cloud-sdk.list ; curl -sL https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - ; apt-get update --yes \\\n && apt-get install google-cloud-sdk --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#  install OpenStack CLI\nRUN pip install python-novaclient python-glanceclient python-cinderclient python-swiftclient\n#  install Gardener CLI\nRUN mkdir -p /opt/gardenctl/bin \\\n && mv gardenctl /opt/gardenctl/bin/gardenctl \\\n && ln -s /opt/gardenctl/bin/gardenctl /usr/local/bin/gardenctl \\\n && gardenctl completion ; mv gardenctl_completion.sh /root/gardenctl_completion.sh \\\n && echo \". /etc/profile\" >> /root/.bashrc \\\n && echo \". /root/gardenctl_completion.sh\" >> /root/.bashrc\n","injectedSmells":[],"originalDockerfileHash":"252c5abf984b95c7a1948d55643dfeff","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (c) 2018 SAP SE or an SAP affiliate company. All rights reserved. This file is licensed under the Apache Software License, v. 2 except as noted otherwise in the LICENSE file\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   build gardenctl binary\nFROM golang:1.12.4\nRUN mkdir -p /go/src/github.com/gardener/gardenctl \\\n && cd /go/src/github.com/gardener \\\n && git clone https://github.com/gardener/gardenctl.git \\\n && cd ./gardenctl \\\n && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o gardenctl .\n#   minimal Ubuntu LTS version\nFROM ubuntu:18.04\nCOPY --from=0 /go/src/github.com/gardener/gardenctl/gardenctl .\nCOPY clusters /root/clusters\nCOPY config /root/.garden/config\n#   run as root in root\nUSER root\nWORKDIR /\n#   install basic tools\nRUN apt-get update --yes ; apt-get install curl --yes ; apt-get install tree --yes ; apt-get install silversearcher-ag --yes ; apt-get install htop --yes ; apt-get install less --yes ; apt-get install vim --yes ; apt-get install tmux --yes ; apt-get install bash-completion --yes ; curl -sL https://github.com/jingweno/ccat/releases/download/v1.1.0/linux-amd64-1.1.0.tar.gz -o ccat.tar.gz \\\n && tar -zxvf ccat.tar.gz linux-amd64-1.1.0/ccat \\\n && mv linux-amd64-1.1.0/ccat /bin/cat \\\n && rm -rf linux-amd64-1.1.0 ccat.tar.gz \\\n && chmod 755 /bin/cat ; curl -sL http://stedolan.github.io/jq/download/linux64/jq -o /bin/jq \\\n && chmod 755 /bin/jq ; curl -sL https://github.com/bronze1man/yaml2json/raw/master/builds/linux_amd64/yaml2json -o /bin/yaml2json \\\n && chmod 755 /bin/yaml2json ; rm -rf /var/lib/apt/lists\n#   install network tools\nRUN apt-get update --yes ; apt-get install dnsutils --yes ; apt-get install netcat-openbsd --yes ; apt-get install iproute2 --yes ; apt-get install dstat --yes ; apt-get install ngrep --yes ; apt-get install tcpdump --yes ; rm -rf /var/lib/apt/lists\n#   install Kubernetes CLI\nRUN curl -sL https://storage.googleapis.com/kubernetes-release/release/$( curl -sL https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl -o /usr/local/bin/kubectl \\\n && chmod 755 /usr/local/bin/kubectl\n#   install minimal python\nRUN apt-get install python-minimal --yes ; curl -sL https://bootstrap.pypa.io/get-pip.py -o get-pip.py ; python get-pip.py ; rm get-pip.py\n#   launch bash\nENTRYPOINT [\"/bin/bash\"]\n#   install AWS CLI\nRUN pip install awscli\n#   install Azure CLI\nRUN apt-get update --yes ; apt-get install lsb-release gnupg apt-transport-https --yes ; AZ_REPO=\"$( lsb_release -cs ;)\" ; echo \"deb https://packages.microsoft.com/repos/azure-cli $AZ_REPO main\" | tee /etc/apt/sources.list.d/azure-cli.list ; curl -sL https://packages.microsoft.com/keys/microsoft.asc | apt-key add - ; apt-get update --yes \\\n && apt-get install azure-cli --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#   install GCP CLI\nRUN apt-get update --yes ; apt-get install lsb-release gnupg apt-transport-https --yes ; GCP_REPO=\"cloud-sdk-$( lsb_release -cs ;)\" ; echo \"deb http://packages.cloud.google.com/apt $GCP_REPO main\" | tee /etc/apt/sources.list.d/google-cloud-sdk.list ; curl -sL https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - ; apt-get update --yes \\\n && apt-get install google-cloud-sdk --yes ; apt-get --yes --purge remove lsb-release gnupg apt-transport-https ; rm -rf /var/lib/apt/lists\n#   install OpenStack CLI\nRUN pip install python-novaclient python-glanceclient python-cinderclient python-swiftclient\n#   install Gardener CLI\nRUN mkdir -p /opt/gardenctl/bin \\\n && mv gardenctl /opt/gardenctl/bin/gardenctl \\\n && ln -s /opt/gardenctl/bin/gardenctl /usr/local/bin/gardenctl \\\n && gardenctl completion ; mv gardenctl_completion.sh /root/gardenctl_completion.sh \\\n && echo \". /etc/profile\" >> /root/.bashrc \\\n && echo \". /root/gardenctl_completion.sh\" >> /root/.bashrc\n","originalDockerfileUglifiedHash":"3dbccb224989b55f28e3b45308579f33","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fc8a7786071392727e74e84d7820b85f36031d76.dockerfile"}