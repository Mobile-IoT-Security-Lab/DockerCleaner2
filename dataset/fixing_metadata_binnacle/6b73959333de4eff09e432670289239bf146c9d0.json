{"seed":2325155379,"processedDockerfileHash":"079574feeef0072a82105bc0301d024a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM bd4c/hadoop_base\nMAINTAINER Flip Kromer <flip@infochimps.com>, Russell Jurney\nENV HADOOP_NN_HOSTNAME=\"solo\"\nENV HADOOP_RM_HOSTNAME=\"solo\"\nENV HADOOP_CONF_DIR=\"/etc/hadoop/conf.single\"\n#   Get our own set of conf files\nRUN cp -rp /etc/hadoop/conf.empty $HADOOP_CONF_DIR \\\n && update-alternatives --install /etc/hadoop/conf hadoop-conf $HADOOP_CONF_DIR 50 \\\n && update-alternatives --set hadoop-conf $HADOOP_CONF_DIR\n#   Ports\n#\n#   are you ready to see a really long list of ports?\n#\n#   NN: console 50070 ipc 8020\nEXPOSE 50070/tcp\nEXPOSE 8020/tcp\n#\n#   snn 50090\n#\nEXPOSE 50090/tcp\n#   \n#   rsrc mgr: console http 8088 / https 8090; scheduler 8030;\n#             tracker 8031; ipc 8032; admin 8033; ganglia 8660, shuffle 13562;\n#   history:  console 19888 / https 19890, ipc 10020, admin 1033\nEXPOSE 8088/tcp\nEXPOSE 8030/tcp\nEXPOSE 8031/tcp\nEXPOSE 8032/tcp\nEXPOSE 8033/tcp\nEXPOSE 13562/tcp\nEXPOSE 19888/tcp\nEXPOSE 10020/tcp\nEXPOSE 1033/tcp\n#\n#   datanode: console http 50075 / https 50475; ipc 50020 ; xceiver 50010; jmx 8010\n#   nodemgr:  console http 8042  / https 8044;  ipc 8041  ; localizer 8040\nEXPOSE 50075/tcp\nEXPOSE 50020/tcp\nEXPOSE 50010/tcp\nEXPOSE 8010/tcp\nEXPOSE 8042/tcp\nEXPOSE 8040/tcp\nEXPOSE 8041/tcp\n#   Install and configure the namenode\nCOPY img/hadoop_nn/hadoop-setup_nn.sh /build/\nRUN /build/hadoop-setup_nn.sh\n#   Install and configure the datanode\nCOPY img/hadoop_worker/hadoop-setup_dn.sh /build/\nRUN /build/hadoop-setup_dn.sh\n#   Install and configure the nodemanager\nCOPY img/hadoop_worker/hadoop-setup_nm.sh /build/\nRUN /build/hadoop-setup_nm.sh\n#   Install and configure the secondarynamenode\nCOPY img/hadoop_snn/hadoop-setup_snn.sh /build/\nRUN /build/hadoop-setup_snn.sh\n#   Install and configure the resourcemanager and historyserver\nCOPY img/hadoop_rm/hadoop-setup_rm.sh /build/\nRUN /build/hadoop-setup_rm.sh\n#   Config Files\n#\nCOPY img/hadoop_base/conf/core-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/hdfs-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/yarn-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/mapred-site.xml.mustache $HADOOP_CONF_DIR/\n#   Ensures Hadoop directories are happy and permissioned even if we mount something under them.\nCOPY img/hadoop_nn/conf/init-hadoop_nn_fixup.sh /etc/my_init.d/30_hadoop_nn_fixup.sh\nCOPY img/hadoop_snn/conf/init-hadoop_snn_fixup.sh /etc/my_init.d/30_hadoop_snn_fixup.sh\nCOPY img/hadoop_rm/conf/init-hadoop_rm_fixup.sh /etc/my_init.d/30_hadoop_rm_fixup.sh\nCOPY img/hadoop_worker/conf/init-hadoop_worker_fixup.sh /etc/my_init.d/30_hadoop_worker_fixup.sh\n#   Enable the service daemons\n#\nCOPY img/hadoop_nn/runit/hadoop_nn-runner.sh /etc/sv/hadoop_nn/run\nCOPY img/hadoop_nn/runit/hadoop_nn-logger.sh /etc/sv/hadoop_nn/log/run\nRUN ln -s /etc/sv/hadoop_nn /etc/service/hadoop_nn\n#\nCOPY img/hadoop_worker/runit/hadoop_dn-runner.sh /etc/sv/hadoop_dn/run\nCOPY img/hadoop_worker/runit/hadoop_dn-logger.sh /etc/sv/hadoop_dn/log/run\nCOPY img/hadoop_worker/runit/hadoop_nm-runner.sh /etc/sv/hadoop_nm/run\nCOPY img/hadoop_worker/runit/hadoop_nm-logger.sh /etc/sv/hadoop_nm/log/run\nRUN ln -s /etc/sv/hadoop_dn /etc/service/hadoop_dn\nRUN ln -s /etc/sv/hadoop_nm /etc/service/hadoop_nm\n#\nCOPY img/hadoop_snn/runit/hadoop_snn-runner.sh /etc/sv/hadoop_snn/run\nCOPY img/hadoop_snn/runit/hadoop_snn-logger.sh /etc/sv/hadoop_snn/log/run\nRUN ln -s /etc/sv/hadoop_snn /etc/service/hadoop_snn\n#\nCOPY img/hadoop_rm/runit/hadoop_rm-runner.sh /etc/sv/hadoop_rm/run\nCOPY img/hadoop_rm/runit/hadoop_rm-logger.sh /etc/sv/hadoop_rm/log/run\nCOPY img/hadoop_rm/runit/hadoop_hist-runner.sh /etc/sv/hadoop_hist/run\nCOPY img/hadoop_rm/runit/hadoop_hist-logger.sh /etc/sv/hadoop_hist/log/run\nRUN ln -s /etc/sv/hadoop_rm /etc/service/hadoop_rm\nRUN ln -s /etc/sv/hadoop_hist /etc/service/hadoop_hist\n#   Format the HDFS and make initial directories\n#\nCOPY img/hadoop_nn/hadoop-bootstrap_hdfs.sh /build/\nRUN /build/hadoop-bootstrap_hdfs.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM bd4c/hadoop_base\nMAINTAINER Flip Kromer <flip@infochimps.com>, Russell Jurney\nENV HADOOP_NN_HOSTNAME=\"solo\"\nENV HADOOP_RM_HOSTNAME=\"solo\"\nENV HADOOP_CONF_DIR=\"/etc/hadoop/conf.single\"\n#  Get our own set of conf files\nRUN cp -rp /etc/hadoop/conf.empty $HADOOP_CONF_DIR \\\n && update-alternatives --install /etc/hadoop/conf hadoop-conf $HADOOP_CONF_DIR 50 \\\n && update-alternatives --set hadoop-conf $HADOOP_CONF_DIR\n#  Ports\n#\n#  are you ready to see a really long list of ports?\n#\n#  NN: console 50070 ipc 8020\nEXPOSE 50070/tcp\nEXPOSE 8020/tcp\n#\n#  snn 50090\n#\nEXPOSE 50090/tcp\n#  \n#  rsrc mgr: console http 8088 / https 8090; scheduler 8030;\n#            tracker 8031; ipc 8032; admin 8033; ganglia 8660, shuffle 13562;\n#  history:  console 19888 / https 19890, ipc 10020, admin 1033\nEXPOSE 8088/tcp\nEXPOSE 8030/tcp\nEXPOSE 8031/tcp\nEXPOSE 8032/tcp\nEXPOSE 8033/tcp\nEXPOSE 13562/tcp\nEXPOSE 19888/tcp\nEXPOSE 10020/tcp\nEXPOSE 1033/tcp\n#\n#  datanode: console http 50075 / https 50475; ipc 50020 ; xceiver 50010; jmx 8010\n#  nodemgr:  console http 8042  / https 8044;  ipc 8041  ; localizer 8040\nEXPOSE 50075/tcp\nEXPOSE 50020/tcp\nEXPOSE 50010/tcp\nEXPOSE 8010/tcp\nEXPOSE 8042/tcp\nEXPOSE 8040/tcp\nEXPOSE 8041/tcp\n#  Install and configure the namenode\nCOPY img/hadoop_nn/hadoop-setup_nn.sh /build/\nRUN /build/hadoop-setup_nn.sh\n#  Install and configure the datanode\nCOPY img/hadoop_worker/hadoop-setup_dn.sh /build/\nRUN /build/hadoop-setup_dn.sh\n#  Install and configure the nodemanager\nCOPY img/hadoop_worker/hadoop-setup_nm.sh /build/\nRUN /build/hadoop-setup_nm.sh\n#  Install and configure the secondarynamenode\nCOPY img/hadoop_snn/hadoop-setup_snn.sh /build/\nRUN /build/hadoop-setup_snn.sh\n#  Install and configure the resourcemanager and historyserver\nCOPY img/hadoop_rm/hadoop-setup_rm.sh /build/\nRUN /build/hadoop-setup_rm.sh\n#  Config Files\n#\nCOPY img/hadoop_base/conf/core-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/hdfs-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/yarn-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/mapred-site.xml.mustache $HADOOP_CONF_DIR/\n#  Ensures Hadoop directories are happy and permissioned even if we mount something under them.\nCOPY img/hadoop_nn/conf/init-hadoop_nn_fixup.sh /etc/my_init.d/30_hadoop_nn_fixup.sh\nCOPY img/hadoop_snn/conf/init-hadoop_snn_fixup.sh /etc/my_init.d/30_hadoop_snn_fixup.sh\nCOPY img/hadoop_rm/conf/init-hadoop_rm_fixup.sh /etc/my_init.d/30_hadoop_rm_fixup.sh\nCOPY img/hadoop_worker/conf/init-hadoop_worker_fixup.sh /etc/my_init.d/30_hadoop_worker_fixup.sh\n#  Enable the service daemons\n#\nCOPY img/hadoop_nn/runit/hadoop_nn-runner.sh /etc/sv/hadoop_nn/run\nCOPY img/hadoop_nn/runit/hadoop_nn-logger.sh /etc/sv/hadoop_nn/log/run\nRUN ln -s /etc/sv/hadoop_nn /etc/service/hadoop_nn\n#\nCOPY img/hadoop_worker/runit/hadoop_dn-runner.sh /etc/sv/hadoop_dn/run\nCOPY img/hadoop_worker/runit/hadoop_dn-logger.sh /etc/sv/hadoop_dn/log/run\nCOPY img/hadoop_worker/runit/hadoop_nm-runner.sh /etc/sv/hadoop_nm/run\nCOPY img/hadoop_worker/runit/hadoop_nm-logger.sh /etc/sv/hadoop_nm/log/run\nRUN ln -s /etc/sv/hadoop_dn /etc/service/hadoop_dn\nRUN ln -s /etc/sv/hadoop_nm /etc/service/hadoop_nm\n#\nCOPY img/hadoop_snn/runit/hadoop_snn-runner.sh /etc/sv/hadoop_snn/run\nCOPY img/hadoop_snn/runit/hadoop_snn-logger.sh /etc/sv/hadoop_snn/log/run\nRUN ln -s /etc/sv/hadoop_snn /etc/service/hadoop_snn\n#\nCOPY img/hadoop_rm/runit/hadoop_rm-runner.sh /etc/sv/hadoop_rm/run\nCOPY img/hadoop_rm/runit/hadoop_rm-logger.sh /etc/sv/hadoop_rm/log/run\nCOPY img/hadoop_rm/runit/hadoop_hist-runner.sh /etc/sv/hadoop_hist/run\nCOPY img/hadoop_rm/runit/hadoop_hist-logger.sh /etc/sv/hadoop_hist/log/run\nRUN ln -s /etc/sv/hadoop_rm /etc/service/hadoop_rm\nRUN ln -s /etc/sv/hadoop_hist /etc/service/hadoop_hist\n#  Format the HDFS and make initial directories\n#\nCOPY img/hadoop_nn/hadoop-bootstrap_hdfs.sh /build/\nRUN /build/hadoop-bootstrap_hdfs.sh\n","injectedSmells":[],"originalDockerfileHash":"a8b30d28bc2b01580660232c8a970e33","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM bd4c/hadoop_base\nMAINTAINER Flip Kromer <flip@infochimps.com>, Russell Jurney\nENV HADOOP_NN_HOSTNAME=\"solo\"\nENV HADOOP_RM_HOSTNAME=\"solo\"\nENV HADOOP_CONF_DIR=\"/etc/hadoop/conf.single\"\n#   Get our own set of conf files\nRUN cp -rp /etc/hadoop/conf.empty $HADOOP_CONF_DIR \\\n && update-alternatives --install /etc/hadoop/conf hadoop-conf $HADOOP_CONF_DIR 50 \\\n && update-alternatives --set hadoop-conf $HADOOP_CONF_DIR\n#   Ports\n#\n#   are you ready to see a really long list of ports?\n#\n#   NN: console 50070 ipc 8020\nEXPOSE 50070/tcp\nEXPOSE 8020/tcp\n#\n#   snn 50090\n#\nEXPOSE 50090/tcp\n#   \n#   rsrc mgr: console http 8088 / https 8090; scheduler 8030;\n#             tracker 8031; ipc 8032; admin 8033; ganglia 8660, shuffle 13562;\n#   history:  console 19888 / https 19890, ipc 10020, admin 1033\nEXPOSE 8088/tcp\nEXPOSE 8030/tcp\nEXPOSE 8031/tcp\nEXPOSE 8032/tcp\nEXPOSE 8033/tcp\nEXPOSE 13562/tcp\nEXPOSE 19888/tcp\nEXPOSE 10020/tcp\nEXPOSE 1033/tcp\n#\n#   datanode: console http 50075 / https 50475; ipc 50020 ; xceiver 50010; jmx 8010\n#   nodemgr:  console http 8042  / https 8044;  ipc 8041  ; localizer 8040\nEXPOSE 50075/tcp\nEXPOSE 50020/tcp\nEXPOSE 50010/tcp\nEXPOSE 8010/tcp\nEXPOSE 8042/tcp\nEXPOSE 8040/tcp\nEXPOSE 8041/tcp\n#   Install and configure the namenode\nCOPY img/hadoop_nn/hadoop-setup_nn.sh /build/\nRUN /build/hadoop-setup_nn.sh\n#   Install and configure the datanode\nCOPY img/hadoop_worker/hadoop-setup_dn.sh /build/\nRUN /build/hadoop-setup_dn.sh\n#   Install and configure the nodemanager\nCOPY img/hadoop_worker/hadoop-setup_nm.sh /build/\nRUN /build/hadoop-setup_nm.sh\n#   Install and configure the secondarynamenode\nCOPY img/hadoop_snn/hadoop-setup_snn.sh /build/\nRUN /build/hadoop-setup_snn.sh\n#   Install and configure the resourcemanager and historyserver\nCOPY img/hadoop_rm/hadoop-setup_rm.sh /build/\nRUN /build/hadoop-setup_rm.sh\n#   Config Files\n#\nCOPY img/hadoop_base/conf/core-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/hdfs-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/yarn-site.xml.mustache $HADOOP_CONF_DIR/\nCOPY img/hadoop_base/conf/mapred-site.xml.mustache $HADOOP_CONF_DIR/\n#   Ensures Hadoop directories are happy and permissioned even if we mount something under them.\nCOPY img/hadoop_nn/conf/init-hadoop_nn_fixup.sh /etc/my_init.d/30_hadoop_nn_fixup.sh\nCOPY img/hadoop_snn/conf/init-hadoop_snn_fixup.sh /etc/my_init.d/30_hadoop_snn_fixup.sh\nCOPY img/hadoop_rm/conf/init-hadoop_rm_fixup.sh /etc/my_init.d/30_hadoop_rm_fixup.sh\nCOPY img/hadoop_worker/conf/init-hadoop_worker_fixup.sh /etc/my_init.d/30_hadoop_worker_fixup.sh\n#   Enable the service daemons\n#\nCOPY img/hadoop_nn/runit/hadoop_nn-runner.sh /etc/sv/hadoop_nn/run\nCOPY img/hadoop_nn/runit/hadoop_nn-logger.sh /etc/sv/hadoop_nn/log/run\nRUN ln -s /etc/sv/hadoop_nn /etc/service/hadoop_nn\n#\nCOPY img/hadoop_worker/runit/hadoop_dn-runner.sh /etc/sv/hadoop_dn/run\nCOPY img/hadoop_worker/runit/hadoop_dn-logger.sh /etc/sv/hadoop_dn/log/run\nCOPY img/hadoop_worker/runit/hadoop_nm-runner.sh /etc/sv/hadoop_nm/run\nCOPY img/hadoop_worker/runit/hadoop_nm-logger.sh /etc/sv/hadoop_nm/log/run\nRUN ln -s /etc/sv/hadoop_dn /etc/service/hadoop_dn\nRUN ln -s /etc/sv/hadoop_nm /etc/service/hadoop_nm\n#\nCOPY img/hadoop_snn/runit/hadoop_snn-runner.sh /etc/sv/hadoop_snn/run\nCOPY img/hadoop_snn/runit/hadoop_snn-logger.sh /etc/sv/hadoop_snn/log/run\nRUN ln -s /etc/sv/hadoop_snn /etc/service/hadoop_snn\n#\nCOPY img/hadoop_rm/runit/hadoop_rm-runner.sh /etc/sv/hadoop_rm/run\nCOPY img/hadoop_rm/runit/hadoop_rm-logger.sh /etc/sv/hadoop_rm/log/run\nCOPY img/hadoop_rm/runit/hadoop_hist-runner.sh /etc/sv/hadoop_hist/run\nCOPY img/hadoop_rm/runit/hadoop_hist-logger.sh /etc/sv/hadoop_hist/log/run\nRUN ln -s /etc/sv/hadoop_rm /etc/service/hadoop_rm\nRUN ln -s /etc/sv/hadoop_hist /etc/service/hadoop_hist\n#   Format the HDFS and make initial directories\n#\nCOPY img/hadoop_nn/hadoop-bootstrap_hdfs.sh /build/\nRUN /build/hadoop-bootstrap_hdfs.sh\n","originalDockerfileUglifiedHash":"5fc3120b371e56918ffd2a89e6aed0be","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6b73959333de4eff09e432670289239bf146c9d0.dockerfile"}