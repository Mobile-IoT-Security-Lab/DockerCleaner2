{"seed":2872859151,"processedDockerfileHash":"cd79d9372c5d8fe47255a2a8a759055d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   python        3.7    (conda)\n#   pytorch       1.0.1  (conda)\n#   tensorboardx  1.6    (conda)\n#   ffpmeg        4.1    (conda)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV PATH=\"/opt/conda/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"/usr/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:$LD_LIBRARY_PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && CONDA_INSTALL=\"conda install -y\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL apt-utils build-essential ca-certificates cmake wget git vim htop tmux openssh-client openssh-server libboost-dev libboost-thread-dev libboost-filesystem-dev libglib2.0-0 libsm6 libxext6 libxrender-dev \\\n && wget --quiet https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /opt/conda \\\n && rm ~/miniconda.sh \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL python=3.7 \\\n && $CONDA_INSTALL ipython Cython ffmpeg pytorch sk-video imageio h5py tensorboardx torchvision cffi cudatoolkit=9.0 \\\n && $PIP_INSTALL lmdb opencv-contrib-python matplotlib tqdm scikit-learn pytest wget gym \\\n && conda clean -y --all \\\n && $GIT_CLONE --recursive https://github.com/Rhythmblue/ctcdecode.git /usr/local/ctcdecode \\\n && cd /usr/local/ctcdecode \\\n && pip install . -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  module list\n#  ------------------------------------------------------------------\n#  python        3.7    (conda)\n#  pytorch       1.0.1  (conda)\n#  tensorboardx  1.6    (conda)\n#  ffpmeg        4.1    (conda)\n#  ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV PATH=\"/opt/conda/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"/usr/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:$LD_LIBRARY_PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && CONDA_INSTALL=\"conda install -y\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL apt-utils build-essential ca-certificates cmake wget git vim htop tmux openssh-client openssh-server libboost-dev libboost-thread-dev libboost-filesystem-dev libglib2.0-0 libsm6 libxext6 libxrender-dev \\\n && wget --quiet https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /opt/conda \\\n && rm ~/miniconda.sh \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL python=3.7 \\\n && $CONDA_INSTALL ipython Cython ffmpeg pytorch sk-video imageio h5py tensorboardx torchvision cffi cudatoolkit=9.0 \\\n && $PIP_INSTALL lmdb opencv-contrib-python matplotlib tqdm scikit-learn pytest wget gym \\\n && conda clean -y --all \\\n && $GIT_CLONE --recursive https://github.com/Rhythmblue/ctcdecode.git /usr/local/ctcdecode \\\n && cd /usr/local/ctcdecode \\\n && pip install . -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","injectedSmells":[],"originalDockerfileHash":"610a0307ed5d733bbc6e26a6ab3c5a0f","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   python        3.7    (conda)\n#   pytorch       1.0.1  (conda)\n#   tensorboardx  1.6    (conda)\n#   ffpmeg        4.1    (conda)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV PATH=\"/opt/conda/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"/usr/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:$LD_LIBRARY_PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && CONDA_INSTALL=\"conda install -y\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL apt-utils build-essential ca-certificates cmake wget git vim htop tmux openssh-client openssh-server libboost-dev libboost-thread-dev libboost-filesystem-dev libglib2.0-0 libsm6 libxext6 libxrender-dev \\\n && wget --quiet https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /opt/conda \\\n && rm ~/miniconda.sh \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL python=3.7 \\\n && $CONDA_INSTALL ipython Cython ffmpeg pytorch sk-video imageio h5py tensorboardx torchvision cffi cudatoolkit=9.0 \\\n && $PIP_INSTALL lmdb opencv-contrib-python matplotlib tqdm scikit-learn pytest wget gym \\\n && conda clean -y --all \\\n && $GIT_CLONE --recursive https://github.com/Rhythmblue/ctcdecode.git /usr/local/ctcdecode \\\n && cd /usr/local/ctcdecode \\\n && pip install . -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","originalDockerfileUglifiedHash":"74cd507cb0c7d35eac494d4dc6d0cc29","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3e7a78170f892be3f6f3f7195dd0ea803ad9e312.dockerfile"}