{"seed":1018631843,"processedDockerfileHash":"9fc8e18531b48b836fe84a27af3d1a26","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck"],"processedDockerfile":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   conda         3.6    (apt)\n#   pytorch       1.0.1  (pip)\n#   tensorflow    1.12.0 (pip)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n    PIP_INSTALL=\"python -m pip install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n    GIT_CLONE=\"git clone --depth 10\" \\\n    CONDA_INSTALL=\"conda install -y\" \\\n    PATH=\"/home/ddlee/conda/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && :\n#   ==================================================================\n#   add user\n#   ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL sudo \\\n && useradd -m ddlee -u 1000 -g root -G sudo -s /bin/bash \\\n && echo \"ddlee:admin\" | chpasswd \\\n && echo \"ddlee ALL=(ALL) ALL\" >> /etc/sudoers\n#   ==================================================================\n#   tools\n#   ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates cmake nano wget git zip unzip htop tmux curl openssh-server openssh-client libgtk2.0-dev\n#   ==================================================================\n#   conda\n#   ------------------------------------------------------------------\nUSER ddlee\nRUN wget --quiet https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-4.5.4-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /home/ddlee/conda \\\n && rm ~/miniconda.sh \\\n && echo \"export PATH=/home/ddlee/condabin:$PATH\" >> ~/.bashrc \\\n && export PATH=/home/ddlee/conda/bin:$PATH \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL ipython visdom tensorboardx opencv\nRUN $PIP_INSTALL pip numpy scipy pandas cloudpickle scikit-learn scikit-image matplotlib opencv-python Cython gpustat pipenv jupyter jupyterlab visdom tqdm pytest easydict\n#   ==================================================================\n#   pytorch\n#   ------------------------------------------------------------------\nRUN $PIP_INSTALL future numpy protobuf enum34 pyyaml typing torch torchvision\n#   ==================================================================\n#   tensorflow\n#   ------------------------------------------------------------------\nRUN $PIP_INSTALL tensorflow-gpu==1.12.0\n#   ==================================================================\n#   config & cleanup\n#   ------------------------------------------------------------------\nUSER root\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#   ==================================================================\n#   Set ENV Vars\n#   ------------------------------------------------------------------\nENV LD_LIBRARY_PATH=\"/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/local/cuda/lib64:$LD_LIBRARY_PATH\" \\\n    LANG=\"C.UTF-8\" \\\n    LC_ALL=\"C.UTF-8\"\n#   ==================================================================\n#   config pip\n#   ------------------------------------------------------------------\nUSER ddlee\nRUN mkdir /home/ddlee/.pip \\\n && echo \"[global]\" > /home/ddlee/.pip/pip.conf \\\n && sed -i -e \"$aindex-url=https://pypi.tuna.tsinghua.edu.cn/simple\" /home/ddlee/.pip/pip.conf \\\n && mkdir /home/ddlee/working\nWORKDIR /home/ddlee/working\nEXPOSE 22/tcp 8888/tcp 8097/tcp 6006/tcp\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  module list\n#  ------------------------------------------------------------------\n#  conda         3.6    (apt)\n#  pytorch       1.0.1  (pip)\n#  tensorflow    1.12.0 (pip)\n#  ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n    PIP_INSTALL=\"python -m pip install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n    GIT_CLONE=\"git clone --depth 10\" \\\n    CONDA_INSTALL=\"conda install -y\" \\\n    PATH=\"/home/ddlee/conda/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update\n#  ==================================================================\n#  add user\n#  ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL sudo \\\n && useradd -m ddlee -u 1000 -g root -G sudo -s /bin/bash \\\n && echo \"ddlee:admin\" | chpasswd \\\n && echo \"ddlee ALL=(ALL) ALL\" >> /etc/sudoers\n#  ==================================================================\n#  tools\n#  ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates cmake nano wget git zip unzip htop tmux curl openssh-server openssh-client libgtk2.0-dev\n#  ==================================================================\n#  conda\n#  ------------------------------------------------------------------\nUSER ddlee\nRUN wget --quiet https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-4.5.4-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /home/ddlee/conda \\\n && rm ~/miniconda.sh \\\n && echo \"export PATH=/home/ddlee/condabin:$PATH\" >> ~/.bashrc \\\n && export PATH=/home/ddlee/conda/bin:$PATH \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL ipython visdom tensorboardx opencv\nRUN $PIP_INSTALL pip numpy scipy pandas cloudpickle scikit-learn scikit-image matplotlib opencv-python Cython gpustat pipenv jupyter jupyterlab visdom tqdm pytest easydict\n#  ==================================================================\n#  pytorch\n#  ------------------------------------------------------------------\nRUN $PIP_INSTALL future numpy protobuf enum34 pyyaml typing torch torchvision\n#  ==================================================================\n#  tensorflow\n#  ------------------------------------------------------------------\nRUN $PIP_INSTALL tensorflow-gpu==1.12.0\n#  ==================================================================\n#  config & cleanup\n#  ------------------------------------------------------------------\nUSER root\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#  ==================================================================\n#  Set ENV Vars\n#  ------------------------------------------------------------------\nENV LD_LIBRARY_PATH=\"/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/local/cuda/lib64:$LD_LIBRARY_PATH\" \\\n    LANG=\"C.UTF-8\" \\\n    LC_ALL=\"C.UTF-8\"\n#  ==================================================================\n#  config pip\n#  ------------------------------------------------------------------\nUSER ddlee\nRUN mkdir /home/ddlee/.pip \\\n && echo \"[global]\" > /home/ddlee/.pip/pip.conf \\\n && sed -i -e \"$aindex-url=https://pypi.tuna.tsinghua.edu.cn/simple\" /home/ddlee/.pip/pip.conf \\\n && mkdir /home/ddlee/working\nWORKDIR /home/ddlee/working\nEXPOSE 22/tcp 8888/tcp 8097/tcp 6006/tcp\n","injectedSmells":[],"originalDockerfileHash":"491eadd97e5162c7000bf3a43cb716a3","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   conda         3.6    (apt)\n#   pytorch       1.0.1  (pip)\n#   tensorflow    1.12.0 (pip)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n    PIP_INSTALL=\"python -m pip install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n    GIT_CLONE=\"git clone --depth 10\" \\\n    CONDA_INSTALL=\"conda install -y\" \\\n    PATH=\"/home/ddlee/conda/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update\n#   ==================================================================\n#   add user\n#   ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL sudo \\\n && useradd -m ddlee -u 1000 -g root -G sudo -s /bin/bash \\\n && echo \"ddlee:admin\" | chpasswd \\\n && echo \"ddlee ALL=(ALL) ALL\" >> /etc/sudoers\n#   ==================================================================\n#   tools\n#   ------------------------------------------------------------------\nRUN DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential apt-utils ca-certificates cmake nano wget git zip unzip htop tmux curl openssh-server openssh-client libgtk2.0-dev\n#   ==================================================================\n#   conda\n#   ------------------------------------------------------------------\nUSER ddlee\nRUN wget --quiet https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-4.5.4-Linux-x86_64.sh -O ~/miniconda.sh \\\n && /bin/bash ~/miniconda.sh -b -p /home/ddlee/conda \\\n && rm ~/miniconda.sh \\\n && echo \"export PATH=/home/ddlee/condabin:$PATH\" >> ~/.bashrc \\\n && export PATH=/home/ddlee/conda/bin:$PATH \\\n && conda config --set show_channel_urls yes \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ \\\n && conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ \\\n && $CONDA_INSTALL ipython visdom tensorboardx opencv\nRUN $PIP_INSTALL pip numpy scipy pandas cloudpickle scikit-learn scikit-image matplotlib opencv-python Cython gpustat pipenv jupyter jupyterlab visdom tqdm pytest easydict\n#   ==================================================================\n#   pytorch\n#   ------------------------------------------------------------------\nRUN $PIP_INSTALL future numpy protobuf enum34 pyyaml typing torch torchvision\n#   ==================================================================\n#   tensorflow\n#   ------------------------------------------------------------------\nRUN $PIP_INSTALL tensorflow-gpu==1.12.0\n#   ==================================================================\n#   config & cleanup\n#   ------------------------------------------------------------------\nUSER root\nRUN ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#   ==================================================================\n#   Set ENV Vars\n#   ------------------------------------------------------------------\nENV LD_LIBRARY_PATH=\"/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/local/cuda/lib64:$LD_LIBRARY_PATH\" \\\n    LANG=\"C.UTF-8\" \\\n    LC_ALL=\"C.UTF-8\"\n#   ==================================================================\n#   config pip\n#   ------------------------------------------------------------------\nUSER ddlee\nRUN mkdir /home/ddlee/.pip \\\n && echo \"[global]\" > /home/ddlee/.pip/pip.conf \\\n && sed -i -e \"$aindex-url=https://pypi.tuna.tsinghua.edu.cn/simple\" /home/ddlee/.pip/pip.conf \\\n && mkdir /home/ddlee/working\nWORKDIR /home/ddlee/working\nEXPOSE 22/tcp 8888/tcp 8097/tcp 6006/tcp\n","originalDockerfileUglifiedHash":"433d5bb1ee1379a1616cc3fda1afedb3","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3c63bf97cb1458665d4f7edf17c2694e75d48ecb.dockerfile"}