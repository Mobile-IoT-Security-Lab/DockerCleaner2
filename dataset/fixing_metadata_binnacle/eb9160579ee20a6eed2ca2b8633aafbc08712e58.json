{"seed":2840217606,"processedDockerfileHash":"d23a80aa6622cdefbb96c105d72abbbb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","pin-package-manager-versions-gem","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Licensed to the Apache Software Foundation (ASF) under one\n#   or more contributor license agreements.  See the NOTICE file\n#   distributed with this work for additional information\n#   regarding copyright ownership.  The ASF licenses this file\n#   to you under the Apache License, Version 2.0 (the\n#   \"License\"); you may not use this file except in compliance\n#   with the License.  You may obtain a copy of the License at\n#\n#       https://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   Dockerfile for installing the necessary dependencies for building Avro.\n#   See BUILD.txt.\nFROM openjdk:8\nWORKDIR /root\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Add the repository for node.js 6.x\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\n#   Register Microsoft key and feed for .NET SDK\n#   https://dotnet.microsoft.com/download/linux-package-manager/debian8/sdk-current\nRUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.asc.gpg \\\n && mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ \\\n && wget -q https://packages.microsoft.com/config/debian/9/prod.list \\\n && mv prod.list /etc/apt/sources.list.d/microsoft-prod.list \\\n && chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg \\\n && chown root:root /etc/apt/sources.list.d/microsoft-prod.list\nRUN curl https://packages.sury.org/php/apt.gpg | apt-key add --no-tty - \\\n && echo \"deb https://packages.sury.org/php/ $( lsb_release -sc ;) main\" > /etc/apt/sources.list.d/php.list\n#   Install dependencies from packages\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ant=1.10.9-4 asciidoc=9.0.0~rc2-1 bison=2:3.7.5+dfsg-1 bzip2=1.0.8-4 cmake=3.18.4-2+deb11u1 curl=7.74.0-1.3+deb11u7 dotnet-sdk-2.2 doxygen=1.9.1-1 flex=2.6.4-8 g++=4:10.2.1-1 gcc=4:10.2.1-1 git=1:2.30.2-1+deb11u2 libboost-all-dev=1.74.0.3 libfontconfig1-dev=2.13.1-4.2 libfreetype6-dev=2.10.4+dfsg-1+deb11u1 libglib2.0-dev=2.66.8-1 libjansson-dev=2.13.1-1.1 libsnappy-dev=1.1.8-1 libsnappy1v5=1.1.8-1 make=4.3-4.1 maven=3.6.3-5 nodejs=12.22.12~dfsg-1~deb11u3 perl=5.32.1-4+deb11u2 php5.6 php5.6-gmp python python-setuptools=44.1.1-1 python-snappy python3-setuptools=52.0.0-4 python3-snappy=0.5.3-1.1+b3 rake=13.0.3-1 ruby=1:2.7+2 ruby-dev=1:2.7+2 source-highlight=3.1.9-3+b1 subversion=1.14.1-3+deb11u1 valgrind=1:3.16.1-1 -qq -y \\\n && apt-get -qq clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Install Perl modules\nRUN curl -L https://cpanmin.us | perl - --mirror https://www.cpan.org/ --self-upgrade \\\n && cpanm install --mirror https://www.cpan.org/ Module::Install Module::Install::ReadmeFromPod Module::Install::Repository Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode IO::String Object::Tiny Compress::Zlib Test::More Test::Exception Test::Pod\n#   Install PHPUnit\nRUN wget -O /usr/local/bin/phpunit https://phar.phpunit.de/phpunit-5.6.phar \\\n && chmod +x /usr/local/bin/phpunit\n#   Install Ruby modules\nRUN gem install echoe --version 4.6.6\n#   Install global Node modules\nRUN npm install grunt-cli@1.4.3 -g\nCMD [\"/avro/share/docker/run-tests.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Licensed to the Apache Software Foundation (ASF) under one\n#  or more contributor license agreements.  See the NOTICE file\n#  distributed with this work for additional information\n#  regarding copyright ownership.  The ASF licenses this file\n#  to you under the Apache License, Version 2.0 (the\n#  \"License\"); you may not use this file except in compliance\n#  with the License.  You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#  Dockerfile for installing the necessary dependencies for building Avro.\n#  See BUILD.txt.\nFROM openjdk:8\nWORKDIR /root\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  Add the repository for node.js 6.x\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\n#  Register Microsoft key and feed for .NET SDK\n#  https://dotnet.microsoft.com/download/linux-package-manager/debian8/sdk-current\nRUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.asc.gpg \\\n && mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ \\\n && wget -q https://packages.microsoft.com/config/debian/9/prod.list \\\n && mv prod.list /etc/apt/sources.list.d/microsoft-prod.list \\\n && chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg \\\n && chown root:root /etc/apt/sources.list.d/microsoft-prod.list\nRUN curl https://packages.sury.org/php/apt.gpg | apt-key add --no-tty - \\\n && echo \"deb https://packages.sury.org/php/ $( lsb_release -sc ;) main\" > /etc/apt/sources.list.d/php.list\n#  Install dependencies from packages\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ant asciidoc bison bzip2 cmake curl dotnet-sdk-2.2 doxygen flex g++ gcc git libboost-all-dev libfontconfig1-dev libfreetype6-dev libglib2.0-dev libjansson-dev libsnappy-dev libsnappy1v5 make maven nodejs perl php5.6 php5.6-gmp python python-setuptools python-snappy python3-setuptools python3-snappy rake ruby ruby-dev source-highlight subversion valgrind -qq -y \\\n && apt-get -qq clean \\\n && rm -rf /var/lib/apt/lists/*\n#  Install Perl modules\nRUN curl -L https://cpanmin.us | perl - --mirror https://www.cpan.org/ --self-upgrade \\\n && cpanm install --mirror https://www.cpan.org/ Module::Install Module::Install::ReadmeFromPod Module::Install::Repository Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode IO::String Object::Tiny Compress::Zlib Test::More Test::Exception Test::Pod\n#  Install PHPUnit\nRUN wget -O /usr/local/bin/phpunit https://phar.phpunit.de/phpunit-5.6.phar \\\n && chmod +x /usr/local/bin/phpunit\n#  Install Ruby modules\nRUN gem install echoe\n#  Install global Node modules\nRUN npm install grunt-cli -g\nCMD [\"/avro/share/docker/run-tests.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"41c3c678927f368320f23d7da94a4806","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Licensed to the Apache Software Foundation (ASF) under one\n#   or more contributor license agreements.  See the NOTICE file\n#   distributed with this work for additional information\n#   regarding copyright ownership.  The ASF licenses this file\n#   to you under the Apache License, Version 2.0 (the\n#   \"License\"); you may not use this file except in compliance\n#   with the License.  You may obtain a copy of the License at\n#\n#       https://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   Dockerfile for installing the necessary dependencies for building Avro.\n#   See BUILD.txt.\nFROM openjdk:8\nWORKDIR /root\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Add the repository for node.js 6.x\nRUN curl -sL https://deb.nodesource.com/setup_6.x | bash -\n#   Register Microsoft key and feed for .NET SDK\n#   https://dotnet.microsoft.com/download/linux-package-manager/debian8/sdk-current\nRUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.asc.gpg \\\n && mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ \\\n && wget -q https://packages.microsoft.com/config/debian/9/prod.list \\\n && mv prod.list /etc/apt/sources.list.d/microsoft-prod.list \\\n && chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg \\\n && chown root:root /etc/apt/sources.list.d/microsoft-prod.list\nRUN curl https://packages.sury.org/php/apt.gpg | apt-key add --no-tty - \\\n && echo \"deb https://packages.sury.org/php/ $( lsb_release -sc ;) main\" > /etc/apt/sources.list.d/php.list\n#   Install dependencies from packages\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ant asciidoc bison bzip2 cmake curl dotnet-sdk-2.2 doxygen flex g++ gcc git libboost-all-dev libfontconfig1-dev libfreetype6-dev libglib2.0-dev libjansson-dev libsnappy-dev libsnappy1v5 make maven nodejs perl php5.6 php5.6-gmp python python-setuptools python-snappy python3-setuptools python3-snappy rake ruby ruby-dev source-highlight subversion valgrind -qq -y \\\n && apt-get -qq clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Install Perl modules\nRUN curl -L https://cpanmin.us | perl - --mirror https://www.cpan.org/ --self-upgrade \\\n && cpanm install --mirror https://www.cpan.org/ Module::Install Module::Install::ReadmeFromPod Module::Install::Repository Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode IO::String Object::Tiny Compress::Zlib Test::More Test::Exception Test::Pod\n#   Install PHPUnit\nRUN wget -O /usr/local/bin/phpunit https://phar.phpunit.de/phpunit-5.6.phar \\\n && chmod +x /usr/local/bin/phpunit\n#   Install Ruby modules\nRUN gem install echoe\n#   Install global Node modules\nRUN npm install grunt-cli -g\nCMD [\"/avro/share/docker/run-tests.sh\"]\n","originalDockerfileUglifiedHash":"e8a1271a5d48b2ad7a60d0e78d45a617","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/eb9160579ee20a6eed2ca2b8633aafbc08712e58.dockerfile"}