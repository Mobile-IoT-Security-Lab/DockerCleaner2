{"seed":2253835026,"processedDockerfileHash":"fed667eac24a088b34549dca5e2d890c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright (C) 2015 Toshinori Sato (@overlast)\n#\n#         https://github.com/overlast/word-vector-web-api\n#\n#   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM centos:centos6\nMAINTAINER Toshinori Sato <@overlast>\nRUN yum -y update\nRUN yum -y clean all\nRUN yum -y install gcc gcc-c++ automake libtool git tar openssl openssl-devel\n#   local ldconfig\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf.d/local.conf\nRUN echo \"/usr/local/lib64\" >> /etc/ld.so.conf.d/local.conf\nRUN /sbin/ldconfig\n#   git files\nRUN mkdir /root/git\n#   msgpack-c\nRUN git clone https://github.com/msgpack/msgpack-c.git /root/git/msgpack-c\nRUN cd /root/git/msgpack-c ; git checkout refs/tags/cpp-0.5.9 ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   mpio\nRUN yum -y install ruby\nRUN git clone https://github.com/frsyuki/mpio.git /root/git/mpio\nRUN cd /root/git/mpio ; sed -i -e \"s/ -rmpl / -r.\\/mpl /g\" ./preprocess ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   msgpack-rpc-cpp\nRUN git clone https://github.com/msgpack-rpc/msgpack-rpc-cpp.git /root/git/msgpack-rpc-cpp\nRUN cd /root/git/msgpack-rpc-cpp ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   temporary directory\nRUN mkdir /root/tmp\n#   waf\nRUN curl https://waf.io/waf-1.8.11 -o /root/tmp/waf ; cp /root/tmp/waf /usr/local/bin/waf\nRUN chmod 755 /usr/local/bin/waf\n#    msgpack-rpc-c\nRUN git clone https://github.com/overlast/msgpack-rpc-c.git /root/git/msgpack-rpc-c\nRUN cd /root/git/msgpack-rpc-c ; waf configure ; waf build ; waf install\nRUN /sbin/ldconfig\n#   nginx-with-msgpack-rpc-module\nRUN yum -y install pcre-devel\nRUN git clone https://github.com/openresty/echo-nginx-module.git /root/git/echo-nginx-module\nRUN git clone https://github.com/overlast/nginx-msgpack-rpc-module.git /root/git/nginx-msgpack-rpc-module\nRUN curl http://nginx.org/download/nginx-1.8.0.tar.gz -o /root/tmp/nginx-1.8.0.tar.gz\nRUN cd /root/tmp ; tar xfvz ./nginx-1.8.0.tar.gz\nRUN cd /root/tmp/nginx-1.8.0 ; ./configure --add-module=/root/git/echo-nginx-module --add-module=/root/git/nginx-msgpack-rpc-module --prefix=/usr/local/nginx-with-msgpack-rpc-module ; /root/git/nginx-msgpack-rpc-module/bin/fix_makefile.pl /root/tmp/nginx-1.8.0/objs/Makefile ; make ; make install\nRUN /sbin/ldconfig\nRUN mkdir -p /var/cache/nginx/cache\n#   word2vec-msgpack-rpc-server\nRUN curl http://ftp-srv2.kddilabs.jp/Linux/distributions/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm -o /root/tmp/epel-release-6-8.noarch.rpm\nRUN yum -y install epel-release\nRUN yum --enablerepo=epel -y install jansson jansson-devel\nRUN git clone https://github.com/overlast/word2vec-msgpack-rpc-server /root/git/word2vec-msgpack-rpc-server\nRUN cd /root/git/word2vec-msgpack-rpc-server ; waf configure ; waf build ; waf install\n#   commands\nRUN yum -y install patch which xz file\n#   word-vector-web-api\nRUN git clone https://github.com/overlast/word-vector-web-api /root/git/word-vector-web-api\nRUN ln -s /root/git/word-vector-web-api/www /usr/local/nginx-with-msgpack-rpc-module/www\n#   word2vec on word-vector-web-api\nRUN yum -y install svn\nRUN svn checkout http://word2vec.googlecode.com/svn/trunk/ /root/git/word-vector-web-api/word2vec\nRUN patch /root/git/word-vector-web-api/word2vec/word2vec.c < /root/git/word-vector-web-api/patch/word2vec.rev42.local.patch\nRUN sed -i -e \"s/-OFast/-O3/g\" /root/git/word-vector-web-api/word2vec/makefile\nRUN cd /root/git/word-vector-web-api/word2vec/ ; make\nEXPOSE 22670/tcp\nEXPOSE 22671/tcp\nEXPOSE 22672/tcp\nEXPOSE 22673/tcp\nEXPOSE 22674/tcp\nEXPOSE 22675/tcp\nEXPOSE 22676/tcp\nEXPOSE 22677/tcp\nEXPOSE 22678/tcp\nEXPOSE 22679/tcp\nEXPOSE 22680/tcp\nENTRYPOINT /root/git/word-vector-web-api/libexec/boot-word-vector-web-api-sample-3-slaves.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (C) 2015 Toshinori Sato (@overlast)\n#\n#        https://github.com/overlast/word-vector-web-api\n#\n#  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM centos:centos6\nMAINTAINER Toshinori Sato <@overlast>\nRUN yum -y update\nRUN yum -y clean all\nRUN yum -y install gcc gcc-c++ automake libtool git tar openssl openssl-devel\n#  local ldconfig\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf.d/local.conf\nRUN echo \"/usr/local/lib64\" >> /etc/ld.so.conf.d/local.conf\nRUN /sbin/ldconfig\n#  git files\nRUN mkdir /root/git\n#  msgpack-c\nRUN git clone https://github.com/msgpack/msgpack-c.git /root/git/msgpack-c\nRUN cd /root/git/msgpack-c ; git checkout refs/tags/cpp-0.5.9 ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#  mpio\nRUN yum -y install ruby\nRUN git clone https://github.com/frsyuki/mpio.git /root/git/mpio\nRUN cd /root/git/mpio ; sed -i -e \"s/ -rmpl / -r.\\/mpl /g\" ./preprocess ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#  msgpack-rpc-cpp\nRUN git clone https://github.com/msgpack-rpc/msgpack-rpc-cpp.git /root/git/msgpack-rpc-cpp\nRUN cd /root/git/msgpack-rpc-cpp ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#  temporary directory\nRUN mkdir /root/tmp\n#  waf\nRUN curl https://waf.io/waf-1.8.11 -o /root/tmp/waf ; cp /root/tmp/waf /usr/local/bin/waf\nRUN chmod 755 /usr/local/bin/waf\n#   msgpack-rpc-c\nRUN git clone https://github.com/overlast/msgpack-rpc-c.git /root/git/msgpack-rpc-c\nRUN cd /root/git/msgpack-rpc-c ; waf configure ; waf build ; waf install\nRUN /sbin/ldconfig\n#  nginx-with-msgpack-rpc-module\nRUN yum -y install pcre-devel\nRUN git clone https://github.com/openresty/echo-nginx-module.git /root/git/echo-nginx-module\nRUN git clone https://github.com/overlast/nginx-msgpack-rpc-module.git /root/git/nginx-msgpack-rpc-module\nRUN curl http://nginx.org/download/nginx-1.8.0.tar.gz -o /root/tmp/nginx-1.8.0.tar.gz\nRUN cd /root/tmp ; tar xfvz ./nginx-1.8.0.tar.gz\nRUN cd /root/tmp/nginx-1.8.0 ; ./configure --add-module=/root/git/echo-nginx-module --add-module=/root/git/nginx-msgpack-rpc-module --prefix=/usr/local/nginx-with-msgpack-rpc-module ; /root/git/nginx-msgpack-rpc-module/bin/fix_makefile.pl /root/tmp/nginx-1.8.0/objs/Makefile ; make ; make install\nRUN /sbin/ldconfig\nRUN mkdir -p /var/cache/nginx/cache\n#  word2vec-msgpack-rpc-server\nRUN curl http://ftp-srv2.kddilabs.jp/Linux/distributions/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm -o /root/tmp/epel-release-6-8.noarch.rpm\nRUN yum -y install epel-release\nRUN yum --enablerepo=epel -y install jansson jansson-devel\nRUN git clone https://github.com/overlast/word2vec-msgpack-rpc-server /root/git/word2vec-msgpack-rpc-server\nRUN cd /root/git/word2vec-msgpack-rpc-server ; waf configure ; waf build ; waf install\n#  commands\nRUN yum -y install patch which xz file\n#  word-vector-web-api\nRUN git clone https://github.com/overlast/word-vector-web-api /root/git/word-vector-web-api\nRUN ln -s /root/git/word-vector-web-api/www /usr/local/nginx-with-msgpack-rpc-module/www\n#  word2vec on word-vector-web-api\nRUN yum -y install svn\nRUN svn checkout http://word2vec.googlecode.com/svn/trunk/ /root/git/word-vector-web-api/word2vec\nRUN patch /root/git/word-vector-web-api/word2vec/word2vec.c < /root/git/word-vector-web-api/patch/word2vec.rev42.local.patch\nRUN sed -i -e \"s/-OFast/-O3/g\" /root/git/word-vector-web-api/word2vec/makefile\nRUN cd /root/git/word-vector-web-api/word2vec/ ; make\nEXPOSE 22670/tcp\nEXPOSE 22671/tcp\nEXPOSE 22672/tcp\nEXPOSE 22673/tcp\nEXPOSE 22674/tcp\nEXPOSE 22675/tcp\nEXPOSE 22676/tcp\nEXPOSE 22677/tcp\nEXPOSE 22678/tcp\nEXPOSE 22679/tcp\nEXPOSE 22680/tcp\nENTRYPOINT /root/git/word-vector-web-api/libexec/boot-word-vector-web-api-sample-3-slaves.sh\n","injectedSmells":[],"originalDockerfileHash":"3e26763cef68cc3867fcf5168656cb12","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (C) 2015 Toshinori Sato (@overlast)\n#\n#         https://github.com/overlast/word-vector-web-api\n#\n#   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM centos:centos6\nMAINTAINER Toshinori Sato <@overlast>\nRUN yum -y update\nRUN yum -y clean all\nRUN yum -y install gcc gcc-c++ automake libtool git tar openssl openssl-devel\n#   local ldconfig\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf.d/local.conf\nRUN echo \"/usr/local/lib64\" >> /etc/ld.so.conf.d/local.conf\nRUN /sbin/ldconfig\n#   git files\nRUN mkdir /root/git\n#   msgpack-c\nRUN git clone https://github.com/msgpack/msgpack-c.git /root/git/msgpack-c\nRUN cd /root/git/msgpack-c ; git checkout refs/tags/cpp-0.5.9 ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   mpio\nRUN yum -y install ruby\nRUN git clone https://github.com/frsyuki/mpio.git /root/git/mpio\nRUN cd /root/git/mpio ; sed -i -e \"s/ -rmpl / -r.\\/mpl /g\" ./preprocess ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   msgpack-rpc-cpp\nRUN git clone https://github.com/msgpack-rpc/msgpack-rpc-cpp.git /root/git/msgpack-rpc-cpp\nRUN cd /root/git/msgpack-rpc-cpp ; ./bootstrap ; ./configure ; make ; make install\nRUN /sbin/ldconfig\n#   temporary directory\nRUN mkdir /root/tmp\n#   waf\nRUN curl https://waf.io/waf-1.8.11 -o /root/tmp/waf ; cp /root/tmp/waf /usr/local/bin/waf\nRUN chmod 755 /usr/local/bin/waf\n#    msgpack-rpc-c\nRUN git clone https://github.com/overlast/msgpack-rpc-c.git /root/git/msgpack-rpc-c\nRUN cd /root/git/msgpack-rpc-c ; waf configure ; waf build ; waf install\nRUN /sbin/ldconfig\n#   nginx-with-msgpack-rpc-module\nRUN yum -y install pcre-devel\nRUN git clone https://github.com/openresty/echo-nginx-module.git /root/git/echo-nginx-module\nRUN git clone https://github.com/overlast/nginx-msgpack-rpc-module.git /root/git/nginx-msgpack-rpc-module\nRUN curl http://nginx.org/download/nginx-1.8.0.tar.gz -o /root/tmp/nginx-1.8.0.tar.gz\nRUN cd /root/tmp ; tar xfvz ./nginx-1.8.0.tar.gz\nRUN cd /root/tmp/nginx-1.8.0 ; ./configure --add-module=/root/git/echo-nginx-module --add-module=/root/git/nginx-msgpack-rpc-module --prefix=/usr/local/nginx-with-msgpack-rpc-module ; /root/git/nginx-msgpack-rpc-module/bin/fix_makefile.pl /root/tmp/nginx-1.8.0/objs/Makefile ; make ; make install\nRUN /sbin/ldconfig\nRUN mkdir -p /var/cache/nginx/cache\n#   word2vec-msgpack-rpc-server\nRUN curl http://ftp-srv2.kddilabs.jp/Linux/distributions/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm -o /root/tmp/epel-release-6-8.noarch.rpm\nRUN yum -y install epel-release\nRUN yum --enablerepo=epel -y install jansson jansson-devel\nRUN git clone https://github.com/overlast/word2vec-msgpack-rpc-server /root/git/word2vec-msgpack-rpc-server\nRUN cd /root/git/word2vec-msgpack-rpc-server ; waf configure ; waf build ; waf install\n#   commands\nRUN yum -y install patch which xz file\n#   word-vector-web-api\nRUN git clone https://github.com/overlast/word-vector-web-api /root/git/word-vector-web-api\nRUN ln -s /root/git/word-vector-web-api/www /usr/local/nginx-with-msgpack-rpc-module/www\n#   word2vec on word-vector-web-api\nRUN yum -y install svn\nRUN svn checkout http://word2vec.googlecode.com/svn/trunk/ /root/git/word-vector-web-api/word2vec\nRUN patch /root/git/word-vector-web-api/word2vec/word2vec.c < /root/git/word-vector-web-api/patch/word2vec.rev42.local.patch\nRUN sed -i -e \"s/-OFast/-O3/g\" /root/git/word-vector-web-api/word2vec/makefile\nRUN cd /root/git/word-vector-web-api/word2vec/ ; make\nEXPOSE 22670/tcp\nEXPOSE 22671/tcp\nEXPOSE 22672/tcp\nEXPOSE 22673/tcp\nEXPOSE 22674/tcp\nEXPOSE 22675/tcp\nEXPOSE 22676/tcp\nEXPOSE 22677/tcp\nEXPOSE 22678/tcp\nEXPOSE 22679/tcp\nEXPOSE 22680/tcp\nENTRYPOINT /root/git/word-vector-web-api/libexec/boot-word-vector-web-api-sample-3-slaves.sh\n","originalDockerfileUglifiedHash":"88f58e818bedce5893c2b395aeef6b95","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/66e094225d3bf6f51695d4c97cce3b8fbec7d2da.dockerfile"}