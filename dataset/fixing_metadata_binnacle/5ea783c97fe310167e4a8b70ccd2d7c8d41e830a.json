{"seed":3537977792,"processedDockerfileHash":"5c11d2fd6fa70780354ba6bb449d2a1c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Nextcloud - Demo Docker\n#\n#   @copyright Copyricht (c) 2018 Nico Gulden (gulden@univention.de)\n#   @copyright Copyright (c) 2017 Arthur Schiwon (blizzz@arthur-schiwon.de)\n#   @copyright Copyright (c) 2017 Lukas Reschke (lukas@statuscode.ch)\n#   @copyright Copyright (c) 2016 Marcos Zuriaga Miguel (wolfi@wolfi.es)\n#   @copyright Copyright (c) 2016 Sander Brand (brantje@gmail.com)\n#   @license GNU AGPL version 3 or any later version\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU Affero General Public License as\n#   published by the Free Software Foundation, either version 3 of the\n#   License, or (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU Affero General Public License for more details.\n#\n#   You should have received a copy of the GNU Affero General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\nFROM ubuntu:18.04\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/nextcloud.tar.bz2 https://download.nextcloud.com/server/prereleases/nextcloud-15.0.8.tar.bz2\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/richdocuments.tar.gz https://github.com/nextcloud/richdocuments/releases/download/v3.3.3/richdocuments.tar.gz\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/onlyoffice.tar.gz https://github.com/ONLYOFFICE/onlyoffice-nextcloud/releases/download/v2.1.10/onlyoffice.tar.gz\nCOPY resources/entrypoint.sh /usr/sbin/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/apache2/conf.d/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/cli/conf.d/\nCOPY resources/000-default.conf /etc/apache2/sites-enabled/\n#   uncomment and set to true if a patch nededs to be applied\n#  COPY resources/13120.patch /root/13120.patch\nENV NC_IS_PATCHED=\"false\"\nRUN /bin/bash -c \"export DEBIAN_FRONTEND=noninteractive\" \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update -y \\\n && apt-get -y full-upgrade \\\n && apt-get install --no-install-recommends apache2=2.4.29-1ubuntu4.27 cron=3.0pl1-128.1ubuntu1.2 curl=7.58.0-2ubuntu3.24 libapache2-mod-php=1:7.2+60ubuntu1 patch=2.7.6-2ubuntu1.1 php=1:7.2+60ubuntu1 php-curl=1:7.2+60ubuntu1 php-dompdf=0.6.2+dfsg-3 php-gd=1:7.2+60ubuntu1 php-imagick=3.4.3~rc2-2ubuntu4.1 php-intl=1:7.2+60ubuntu1 php-mbstring=1:7.2+60ubuntu1 php-xml=1:7.2+60ubuntu1 php-zip=1:7.2+60ubuntu1 php-apcu=5.1.9+4.0.11-1build1 php-ldap=1:7.2+60ubuntu1 php-oauth=2.0.2+1.2.3-1build2 php-pgsql=1:7.2+60ubuntu1 php-smbclient=0.8.0-3build2 wget=1.19.4-1ubuntu2.2 pwgen=2.08-1 sudo=1.8.21p2-3ubuntu1.5 lbzip2=2.5-2 unattended-upgrades=1.1ubuntu1.18.04.14 -y\nRUN apt-get clean\nRUN a2enmod headers\nRUN a2enmod rewrite\nRUN cd /root/ \\\n && tar -xf \"nextcloud.tar.bz2\" \\\n && mv /root/nextcloud/* /var/www/html/ \\\n && mv /root/nextcloud/.htaccess /var/www/html/ \\\n && mv /root/nextcloud/.user.ini /var/www/html/ \\\n && rm -Rf /root/nextcloud \\\n && rm \"nextcloud.tar.bz2\" \\\n && cd /var/www/html/ \\\n && chmod +x occ \\\n && chown -R www-data /var/www/html\nRUN cd /var/www/html/apps \\\n && mkdir richdocuments \\\n && tar -xf /root/richdocuments.tar.gz -C richdocuments --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/richdocuments \\\n && rm /root/richdocuments.tar.gz\nRUN cd /var/www/html/apps \\\n && mkdir onlyoffice \\\n && tar -xf /root/onlyoffice.tar.gz -C onlyoffice --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/onlyoffice \\\n && rm /root/onlyoffice.tar.gz\n#   uncomment and adjust following block if a patch needs to be applied\n#  RUN cd /var/www/html/ && \\\n#      patch -p1 -t < /root/13120.patch && \\\n#      rm /root/13120.patch\nEXPOSE 80/tcp\nENTRYPOINT /usr/sbin/entrypoint.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Nextcloud - Demo Docker\n#\n#  @copyright Copyricht (c) 2018 Nico Gulden (gulden@univention.de)\n#  @copyright Copyright (c) 2017 Arthur Schiwon (blizzz@arthur-schiwon.de)\n#  @copyright Copyright (c) 2017 Lukas Reschke (lukas@statuscode.ch)\n#  @copyright Copyright (c) 2016 Marcos Zuriaga Miguel (wolfi@wolfi.es)\n#  @copyright Copyright (c) 2016 Sander Brand (brantje@gmail.com)\n#  @license GNU AGPL version 3 or any later version\n#\n#  This program is free software: you can redistribute it and/or modify\n#  it under the terms of the GNU Affero General Public License as\n#  published by the Free Software Foundation, either version 3 of the\n#  License, or (at your option) any later version.\n#\n#  This program is distributed in the hope that it will be useful,\n#  but WITHOUT ANY WARRANTY; without even the implied warranty of\n#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#  GNU Affero General Public License for more details.\n#\n#  You should have received a copy of the GNU Affero General Public License\n#  along with this program.  If not, see <http://www.gnu.org/licenses/>.\nFROM ubuntu:18.04\nADD https://download.nextcloud.com/server/prereleases/nextcloud-15.0.8.tar.bz2 /root/nextcloud.tar.bz2\nADD https://github.com/nextcloud/richdocuments/releases/download/v3.3.3/richdocuments.tar.gz /root/richdocuments.tar.gz\nADD https://github.com/ONLYOFFICE/onlyoffice-nextcloud/releases/download/v2.1.10/onlyoffice.tar.gz /root/onlyoffice.tar.gz\nCOPY resources/entrypoint.sh /usr/sbin/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/apache2/conf.d/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/cli/conf.d/\nCOPY resources/000-default.conf /etc/apache2/sites-enabled/\n#  uncomment and set to true if a patch nededs to be applied\n# COPY resources/13120.patch /root/13120.patch\nENV NC_IS_PATCHED=\"false\"\nRUN /bin/bash -c \"export DEBIAN_FRONTEND=noninteractive\" \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update -y \\\n && apt-get -y full-upgrade \\\n && apt-get install apache2 cron curl libapache2-mod-php patch php php-curl php-dompdf php-gd php-imagick php-intl php-mbstring php-xml php-zip php-apcu php-ldap php-oauth php-pgsql php-smbclient wget pwgen sudo lbzip2 unattended-upgrades -y\nRUN apt-get clean\nRUN a2enmod headers\nRUN a2enmod rewrite\nRUN cd /root/ \\\n && tar -xf \"nextcloud.tar.bz2\" \\\n && mv /root/nextcloud/* /var/www/html/ \\\n && mv /root/nextcloud/.htaccess /var/www/html/ \\\n && mv /root/nextcloud/.user.ini /var/www/html/ \\\n && rm -Rf /root/nextcloud \\\n && rm \"nextcloud.tar.bz2\" \\\n && cd /var/www/html/ \\\n && chmod +x occ \\\n && chown -R www-data /var/www/html\nRUN cd /var/www/html/apps \\\n && mkdir richdocuments \\\n && tar -xf /root/richdocuments.tar.gz -C richdocuments --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/richdocuments \\\n && rm /root/richdocuments.tar.gz\nRUN cd /var/www/html/apps \\\n && mkdir onlyoffice \\\n && tar -xf /root/onlyoffice.tar.gz -C onlyoffice --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/onlyoffice \\\n && rm /root/onlyoffice.tar.gz\n#  uncomment and adjust following block if a patch needs to be applied\n# RUN cd /var/www/html/ && \\\n#     patch -p1 -t < /root/13120.patch && \\\n#     rm /root/13120.patch\nEXPOSE 80/tcp\nENTRYPOINT /usr/sbin/entrypoint.sh\n","injectedSmells":[],"originalDockerfileHash":"7f69ff24c0eec41b9b15ffccd2e141c0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Nextcloud - Demo Docker\n#\n#   @copyright Copyricht (c) 2018 Nico Gulden (gulden@univention.de)\n#   @copyright Copyright (c) 2017 Arthur Schiwon (blizzz@arthur-schiwon.de)\n#   @copyright Copyright (c) 2017 Lukas Reschke (lukas@statuscode.ch)\n#   @copyright Copyright (c) 2016 Marcos Zuriaga Miguel (wolfi@wolfi.es)\n#   @copyright Copyright (c) 2016 Sander Brand (brantje@gmail.com)\n#   @license GNU AGPL version 3 or any later version\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU Affero General Public License as\n#   published by the Free Software Foundation, either version 3 of the\n#   License, or (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU Affero General Public License for more details.\n#\n#   You should have received a copy of the GNU Affero General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\nFROM ubuntu:18.04\nADD https://download.nextcloud.com/server/prereleases/nextcloud-15.0.8.tar.bz2 /root/nextcloud.tar.bz2\nADD https://github.com/nextcloud/richdocuments/releases/download/v3.3.3/richdocuments.tar.gz /root/richdocuments.tar.gz\nADD https://github.com/ONLYOFFICE/onlyoffice-nextcloud/releases/download/v2.1.10/onlyoffice.tar.gz /root/onlyoffice.tar.gz\nCOPY resources/entrypoint.sh /usr/sbin/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/apache2/conf.d/\nCOPY resources/60-nextcloud.ini /etc/php/7.2/cli/conf.d/\nCOPY resources/000-default.conf /etc/apache2/sites-enabled/\n#   uncomment and set to true if a patch nededs to be applied\n#  COPY resources/13120.patch /root/13120.patch\nENV NC_IS_PATCHED=\"false\"\nRUN /bin/bash -c \"export DEBIAN_FRONTEND=noninteractive\" \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update -y \\\n && apt-get -y full-upgrade \\\n && apt-get install apache2 cron curl libapache2-mod-php patch php php-curl php-dompdf php-gd php-imagick php-intl php-mbstring php-xml php-zip php-apcu php-ldap php-oauth php-pgsql php-smbclient wget pwgen sudo lbzip2 unattended-upgrades -y\nRUN apt-get clean\nRUN a2enmod headers\nRUN a2enmod rewrite\nRUN cd /root/ \\\n && tar -xf \"nextcloud.tar.bz2\" \\\n && mv /root/nextcloud/* /var/www/html/ \\\n && mv /root/nextcloud/.htaccess /var/www/html/ \\\n && mv /root/nextcloud/.user.ini /var/www/html/ \\\n && rm -Rf /root/nextcloud \\\n && rm \"nextcloud.tar.bz2\" \\\n && cd /var/www/html/ \\\n && chmod +x occ \\\n && chown -R www-data /var/www/html\nRUN cd /var/www/html/apps \\\n && mkdir richdocuments \\\n && tar -xf /root/richdocuments.tar.gz -C richdocuments --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/richdocuments \\\n && rm /root/richdocuments.tar.gz\nRUN cd /var/www/html/apps \\\n && mkdir onlyoffice \\\n && tar -xf /root/onlyoffice.tar.gz -C onlyoffice --strip-components=1 \\\n && chown -R www-data:nogroup /var/www/html/apps/onlyoffice \\\n && rm /root/onlyoffice.tar.gz\n#   uncomment and adjust following block if a patch needs to be applied\n#  RUN cd /var/www/html/ && \\\n#      patch -p1 -t < /root/13120.patch && \\\n#      rm /root/13120.patch\nEXPOSE 80/tcp\nENTRYPOINT /usr/sbin/entrypoint.sh\n","originalDockerfileUglifiedHash":"3bff69d8da7a5a882766aa9d3f2442ba","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5ea783c97fe310167e4a8b70ccd2d7c8d41e830a.dockerfile"}