{"seed":3040469560,"processedDockerfileHash":"ce70006d007985ea98baf182ff128ca3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Set the base image\nFROM ubuntu:16.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   File Author / Maintainer\nMAINTAINER IDseq Team idseq-tech@chanzuckerberg.com\n#   Add packages, update image, and clear cache\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.1ubuntu2 curl=7.47.0-1ubuntu2.19 wget=1.17.1-1ubuntu1.5 python-pip=8.1.1-2ubuntu0.6 python-dev=2.7.12-1~16.04 python-scipy=0.17.0-1 python-redis=2.10.5-1ubuntu1 gdebi-core=0.9.5.7ubuntu1 zip=3.0-11 unzip=6.0-20ubuntu1.1 g++=4:5.3.1-1ubuntu1 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 gcc=4:5.3.1-1ubuntu1 pkg-config=0.29.1-0ubuntu1 apt-utils=1.2.35 make=4.1-6 perl=5.22.1-9ubuntu0.9 cmake=3.5.1-1ubuntu3 libbz2-dev=1.0.6-8ubuntu0.2 -y\nRUN pip install pip==23.1 --upgrade\nRUN pip install redis==4.5.4 biopython==1.81 pysam==0.21.0\nRUN pip install htseq==0.6.1p1\nRUN apt-get install --no-install-recommends software-properties-common=0.96.20.10 -y\nRUN add-apt-repository ppa:deadsnakes/ppa\nRUN apt-get update \\\n && apt-get install --no-install-recommends python3.7 -y\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.5 1\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.7 2\nWORKDIR /tmp\n#   install STAR\nRUN curl -L https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz | tar xz\nRUN mv STAR-2.5.3a/bin/Linux_x86_64_static/* /usr/local/bin\nRUN rm -rf STAR-2.5.3a\n#   Compile and install bowtie\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.2/bowtie2-2.3.2-source.zip\nRUN unzip bowtie2-2.3.2-source.zip\nWORKDIR /tmp/bowtie2-2.3.2\nRUN make -j 16 NO_TBB=1\nRUN mv -t /usr/local/bin/ bowtie2 bowtie2-align-l bowtie2-align-s bowtie2-build bowtie2-build-l bowtie2-build-s bowtie2-inspect bowtie2-inspect-l bowtie2-inspect-s\nWORKDIR /tmp\n#   install samtools\nRUN apt-get install --no-install-recommends libncurses-dev libbz2-dev=1.0.6-8ubuntu0.2 -y\nRUN wget https://github.com/samtools/samtools/releases/download/1.5/samtools-1.5.tar.bz2\nRUN tar -jxf samtools-1.5.tar.bz2\nWORKDIR /tmp/samtools-1.5\nRUN ./configure --disable-lzma\nRUN make -j 16\nRUN mv samtools /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install PriceSeqFilter\nRUN wget http://derisilab.ucsf.edu/software/price/PriceSource140408.tar.gz\nRUN tar -xzf PriceSource140408.tar.gz\nWORKDIR /tmp/PriceSource140408\nRUN make -j 16\nRUN mv PriceSeqFilter /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install cdhit-dup tools\nRUN wget https://github.com/weizhongli/cdhit/archive/V4.6.8.zip\nRUN unzip V4.6.8.zip\nWORKDIR /tmp/cdhit-4.6.8\nRUN make -j 16\nWORKDIR /tmp/cdhit-4.6.8/cd-hit-auxtools\nRUN make -j 16\nRUN mv cd-hit-dup /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install Fastax tools\n#  RUN wget http://launchpadlibrarian.net/161878011/libgtextutils0_0.7-1_amd64.deb\n#  RUN wget http://launchpadlibrarian.net/162265652/fastx-toolkit_0.0.14-1_amd64.deb\n#  RUN gdebi --non-interactive libgtextutils0_0.7-1_amd64.deb\n#  RUN gdebi --non-interactive fastx-toolkit_0.0.14-1_amd64.deb\n#   For aegea\nRUN apt-get install --no-install-recommends python3-pip=8.1.1-2ubuntu0.6 -y\nRUN pip3 install awscli-cwlogs==1.4.0 keymaker==0.2.1 boto3==1.4.3 awscli==1.11.44 dynamoq==0.0.5 tractorbeam==0.1.3\nRUN pip3 install pysam biopython\n#  RUN echo iptables-persistent iptables-persistent/autosave_v4 boolean true | debconf-set-selections\nRUN apt-get update \\\n && apt-get install --no-install-recommends iptables-persistent=1.0.4 debian-goodies=0.64 bridge-utils=1.5-9ubuntu1 pixz=1.0.6-2 cryptsetup-bin=2:1.6.6-5ubuntu2.1 mdadm=3.3-2ubuntu7.6 btrfs-tools=4.4-1ubuntu1.1 libffi-dev=3.2.1-4 libssl-dev=1.0.2g-1ubuntu4.20 libxml2-dev=2.9.3+dfsg1-1ubuntu0.7 libxslt1-dev=1.1.28-2.1ubuntu0.3 libyaml-dev=0.1.6-3 libcurl4-openssl-dev=7.47.0-1ubuntu2.19 libjemalloc-dev=3.6.0-9ubuntu1 libzip-dev=1.0.1-0ubuntu1 libsnappy-dev=1.1.3-2 liblz4-dev=0.0~r131-2ubuntu2 libgmp-dev=2:6.1.0+dfsg-2 libmpfr-dev=3.1.4-1 libhts-dev=1.2.1-2ubuntu1 libsqlite3-dev=3.11.0-1ubuntu1.5 libncurses5-dev=6.0+20160213-1ubuntu1 htop=2.0.1-1ubuntu1 pydf=12 jq=1.5+dfsg-1ubuntu0.1 httpie=0.9.2-1 python-dev=2.7.12-1~16.04 python-cffi=1.5.2-1ubuntu1 python-pip=8.1.1-2ubuntu0.6 python-setuptools=20.7.0-1 python-wheel=0.29.0-1 python-virtualenv=15.0.1+ds-3ubuntu1.1 python-requests=2.9.1-3ubuntu0.1 python-yaml=3.11-3build1 python3-dev=3.5.1-3 python3-cffi=1.5.2-1ubuntu1 python3-pip=8.1.1-2ubuntu0.6 python3-setuptools=20.7.0-1 python3-wheel=0.29.0-1 python3-requests=2.9.1-3ubuntu0.1 python3-yaml=3.11-3build1 nfs-common=1:1.2.8-9ubuntu12.3 unzip=6.0-20ubuntu1.1 build-essential=12.1ubuntu2 cmake=3.5.1-1ubuntu3 libtool=2.4.6-0.1 autoconf=2.69-9 ruby=1:2.3.0+1 sysstat=11.2.0-1ubuntu0.3 dstat=0.7.2-4 numactl=2.0.11-1ubuntu1.1 gdebi-core=0.9.5.7ubuntu1 sqlite3=3.11.0-1ubuntu1.5 stunnel moreutils=0.57-1 curl=7.47.0-1ubuntu2.19 wget=1.17.1-1ubuntu1.5 git=1:2.7.4-0ubuntu1.10 aria2=1.19.0-1build1 sift=4.0.3b-4 -y\n#   Strange that we have to do this, but if we don't, aegea tries to do it, and it fails then with some urllib3 bug.\nRUN apt-get install --no-install-recommends awscli=1.18.69-1ubuntu0.16.04.1 -y\nRUN apt-get install --no-install-recommends bsdtar=3.1.2-11ubuntu0.16.04.8 alien=8.95 -y\n#   For de-novo assembly\nWORKDIR /tmp/spades_build\nRUN git clone https://github.com/ablab/spades.git\nWORKDIR /tmp/spades_build/spades\nRUN git checkout spades_3.11.0\nWORKDIR /tmp/spades_build/spades/assembler\nRUN PREFIX=/usr/local ./spades_compile.sh\nRUN /usr/local/bin/spades.py --test\n#   For nonhost fastq filtering\nWORKDIR /tmp/seqtk_build\nRUN git clone https://github.com/lh3/seqtk.git\nWORKDIR /tmp/seqtk_build/seqtk\nRUN make \\\n && make install\nWORKDIR /tmp\n#   Compile and install gmap/gsnap\nRUN wget http://research-pub.gene.com/gmap/src/gmap-gsnap-2017-11-15.tar.gz\nRUN mkdir gmap-gsnap \\\n && tar xf gmap-gsnap-2017-11-15.tar.gz -C gmap-gsnap --strip-components 1\nWORKDIR /tmp/gmap-gsnap\nRUN ./configure --prefix=/usr/local\nRUN make -j 16 \\\n && make check \\\n && make install\nRUN rm -rf /tmp/gmap-gsnap /tmp/gmap-gsnap-2017-11-15.tar.gz\nRUN gsnapl --version\n#   For srst2, install forked srst2 python 3 compatible repo\nRUN pip install scipy==1.10.1\nRUN pip install git+https://github.com/chanzuckerberg/srst2\n#   TODO: Test both pip installations, consider keeping pip use consistent\nRUN pip3 install pandas\n#   Blast command line\nRUN wget -N ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN alien -i ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN rm -rf ncbi-blast-2.6.0+-1.x86_64.rpm\n#   For adapter trimming\nRUN apt-get install --no-install-recommends python-cutadapt=1.9.1-1build1\nWORKDIR /tmp\nRUN wget http://www.usadellab.org/cms/uploads/supplementary/Trimmomatic/Trimmomatic-0.38.zip\nRUN unzip Trimmomatic-0.38.zip\nRUN mv Trimmomatic-0.38/trimmomatic-0.38.jar /usr/local/bin/\nRUN apt-get update \\\n && apt-get install --no-install-recommends default-jre=2:1.8-56ubuntu2 -y\n#   For phylogenetic trees\nWORKDIR /tmp\nRUN wget https://sourceforge.net/projects/ksnp/files/kSNP3.1_Linux_package.zip\nRUN unzip -o kSNP3.1_Linux_package.zip\nWORKDIR /tmp/kSNP3.1_Linux_package/kSNP3\nRUN cp -r * /usr/local/bin/\nRUN sed -i 's:set kSNP=/usr/local/kSNP3:set kSNP=/usr/local/bin:g' /usr/local/bin/kSNP3\nRUN apt-get install --no-install-recommends tcsh=6.18.01-5\nRUN kSNP3\nRUN apt-get install --no-install-recommends liblz4-tool=0.0~r131-2ubuntu2 -y\nRUN apt-get install --no-install-recommends lbzip2=2.5-1 -y\n#   Cleanup\nRUN rm -rf /tmp/*\nWORKDIR /\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Set the base image\nFROM ubuntu:16.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  File Author / Maintainer\nMAINTAINER IDseq Team idseq-tech@chanzuckerberg.com\n#  Add packages, update image, and clear cache\nRUN apt-get update \\\n && apt-get install build-essential curl wget python-pip python-dev python-scipy python-redis gdebi-core zip unzip g++ zlib1g-dev gcc pkg-config apt-utils make perl cmake libbz2-dev -y\nRUN pip install pip --upgrade\nRUN pip install redis biopython pysam\nRUN pip install htseq==0.6.1p1\nRUN apt-get install software-properties-common -y\nRUN add-apt-repository ppa:deadsnakes/ppa\nRUN apt-get update \\\n && apt-get install python3.7 -y\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.5 1\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.7 2\nWORKDIR /tmp\n#  install STAR\nRUN curl -L https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz | tar xz\nRUN mv STAR-2.5.3a/bin/Linux_x86_64_static/* /usr/local/bin\nRUN rm -rf STAR-2.5.3a\n#  Compile and install bowtie\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.2/bowtie2-2.3.2-source.zip\nRUN unzip bowtie2-2.3.2-source.zip\nWORKDIR /tmp/bowtie2-2.3.2\nRUN make -j 16 NO_TBB=1\nRUN mv -t /usr/local/bin/ bowtie2 bowtie2-align-l bowtie2-align-s bowtie2-build bowtie2-build-l bowtie2-build-s bowtie2-inspect bowtie2-inspect-l bowtie2-inspect-s\nWORKDIR /tmp\n#  install samtools\nRUN apt-get install libncurses-dev libbz2-dev -y\nRUN wget https://github.com/samtools/samtools/releases/download/1.5/samtools-1.5.tar.bz2\nRUN tar -jxf samtools-1.5.tar.bz2\nWORKDIR /tmp/samtools-1.5\nRUN ./configure --disable-lzma\nRUN make -j 16\nRUN mv samtools /usr/local/bin/\nWORKDIR /tmp\n#  Compile and install PriceSeqFilter\nRUN wget http://derisilab.ucsf.edu/software/price/PriceSource140408.tar.gz\nRUN tar -xzf PriceSource140408.tar.gz\nWORKDIR /tmp/PriceSource140408\nRUN make -j 16\nRUN mv PriceSeqFilter /usr/local/bin/\nWORKDIR /tmp\n#  Compile and install cdhit-dup tools\nRUN wget https://github.com/weizhongli/cdhit/archive/V4.6.8.zip\nRUN unzip V4.6.8.zip\nWORKDIR /tmp/cdhit-4.6.8\nRUN make -j 16\nWORKDIR /tmp/cdhit-4.6.8/cd-hit-auxtools\nRUN make -j 16\nRUN mv cd-hit-dup /usr/local/bin/\nWORKDIR /tmp\n#  Compile and install Fastax tools\n# RUN wget http://launchpadlibrarian.net/161878011/libgtextutils0_0.7-1_amd64.deb\n# RUN wget http://launchpadlibrarian.net/162265652/fastx-toolkit_0.0.14-1_amd64.deb\n# RUN gdebi --non-interactive libgtextutils0_0.7-1_amd64.deb\n# RUN gdebi --non-interactive fastx-toolkit_0.0.14-1_amd64.deb\n#  For aegea\nRUN apt-get install python3-pip -y\nRUN pip3 install awscli-cwlogs==1.4.0 keymaker==0.2.1 boto3==1.4.3 awscli==1.11.44 dynamoq==0.0.5 tractorbeam==0.1.3\nRUN pip3 install pysam biopython\n# RUN echo iptables-persistent iptables-persistent/autosave_v4 boolean true | debconf-set-selections\nRUN apt-get update \\\n && apt-get install iptables-persistent debian-goodies bridge-utils pixz cryptsetup-bin mdadm btrfs-tools libffi-dev libssl-dev libxml2-dev libxslt1-dev libyaml-dev libcurl4-openssl-dev libjemalloc-dev libzip-dev libsnappy-dev liblz4-dev libgmp-dev libmpfr-dev libhts-dev libsqlite3-dev libncurses5-dev htop pydf jq httpie python-dev python-cffi python-pip python-setuptools python-wheel python-virtualenv python-requests python-yaml python3-dev python3-cffi python3-pip python3-setuptools python3-wheel python3-requests python3-yaml nfs-common unzip build-essential cmake libtool autoconf ruby sysstat dstat numactl gdebi-core sqlite3 stunnel moreutils curl wget git aria2 sift -y\n#  Strange that we have to do this, but if we don't, aegea tries to do it, and it fails then with some urllib3 bug.\nRUN apt-get install awscli -y\nRUN apt-get install bsdtar alien -y\n#  For de-novo assembly\nWORKDIR /tmp/spades_build\nRUN git clone https://github.com/ablab/spades.git\nWORKDIR /tmp/spades_build/spades\nRUN git checkout spades_3.11.0\nWORKDIR /tmp/spades_build/spades/assembler\nRUN PREFIX=/usr/local ./spades_compile.sh\nRUN /usr/local/bin/spades.py --test\n#  For nonhost fastq filtering\nWORKDIR /tmp/seqtk_build\nRUN git clone https://github.com/lh3/seqtk.git\nWORKDIR /tmp/seqtk_build/seqtk\nRUN make \\\n && make install\nWORKDIR /tmp\n#  Compile and install gmap/gsnap\nRUN wget http://research-pub.gene.com/gmap/src/gmap-gsnap-2017-11-15.tar.gz\nRUN mkdir gmap-gsnap \\\n && tar xf gmap-gsnap-2017-11-15.tar.gz -C gmap-gsnap --strip-components 1\nWORKDIR /tmp/gmap-gsnap\nRUN ./configure --prefix=/usr/local\nRUN make -j 16 \\\n && make check \\\n && make install\nRUN rm -rf /tmp/gmap-gsnap /tmp/gmap-gsnap-2017-11-15.tar.gz\nRUN gsnapl --version\n#  For srst2, install forked srst2 python 3 compatible repo\nRUN pip install scipy\nRUN pip install git+https://github.com/chanzuckerberg/srst2\n#  TODO: Test both pip installations, consider keeping pip use consistent\nRUN pip3 install pandas\n#  Blast command line\nRUN wget -N ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN alien -i ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN rm -rf ncbi-blast-2.6.0+-1.x86_64.rpm\n#  For adapter trimming\nRUN apt-get install python-cutadapt\nWORKDIR /tmp\nRUN wget http://www.usadellab.org/cms/uploads/supplementary/Trimmomatic/Trimmomatic-0.38.zip\nRUN unzip Trimmomatic-0.38.zip\nRUN mv Trimmomatic-0.38/trimmomatic-0.38.jar /usr/local/bin/\nRUN apt-get update \\\n && apt-get install default-jre -y\n#  For phylogenetic trees\nWORKDIR /tmp\nRUN wget https://sourceforge.net/projects/ksnp/files/kSNP3.1_Linux_package.zip\nRUN unzip -o kSNP3.1_Linux_package.zip\nWORKDIR /tmp/kSNP3.1_Linux_package/kSNP3\nRUN cp -r * /usr/local/bin/\nRUN sed -i 's:set kSNP=/usr/local/kSNP3:set kSNP=/usr/local/bin:g' /usr/local/bin/kSNP3\nRUN apt-get install tcsh\nRUN kSNP3\nRUN apt-get install liblz4-tool -y\nRUN apt-get install lbzip2 -y\n#  Cleanup\nRUN rm -rf /tmp/*\nWORKDIR /\n","injectedSmells":[],"originalDockerfileHash":"b10d316cddf05be46f120cc3b539e238","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Set the base image\nFROM ubuntu:16.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   File Author / Maintainer\nMAINTAINER IDseq Team idseq-tech@chanzuckerberg.com\n#   Add packages, update image, and clear cache\nRUN apt-get update \\\n && apt-get install build-essential curl wget python-pip python-dev python-scipy python-redis gdebi-core zip unzip g++ zlib1g-dev gcc pkg-config apt-utils make perl cmake libbz2-dev -y\nRUN pip install pip --upgrade\nRUN pip install redis biopython pysam\nRUN pip install htseq==0.6.1p1\nRUN apt-get install software-properties-common -y\nRUN add-apt-repository ppa:deadsnakes/ppa\nRUN apt-get update \\\n && apt-get install python3.7 -y\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.5 1\nRUN update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.7 2\nWORKDIR /tmp\n#   install STAR\nRUN curl -L https://github.com/alexdobin/STAR/archive/2.5.3a.tar.gz | tar xz\nRUN mv STAR-2.5.3a/bin/Linux_x86_64_static/* /usr/local/bin\nRUN rm -rf STAR-2.5.3a\n#   Compile and install bowtie\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.2/bowtie2-2.3.2-source.zip\nRUN unzip bowtie2-2.3.2-source.zip\nWORKDIR /tmp/bowtie2-2.3.2\nRUN make -j 16 NO_TBB=1\nRUN mv -t /usr/local/bin/ bowtie2 bowtie2-align-l bowtie2-align-s bowtie2-build bowtie2-build-l bowtie2-build-s bowtie2-inspect bowtie2-inspect-l bowtie2-inspect-s\nWORKDIR /tmp\n#   install samtools\nRUN apt-get install libncurses-dev libbz2-dev -y\nRUN wget https://github.com/samtools/samtools/releases/download/1.5/samtools-1.5.tar.bz2\nRUN tar -jxf samtools-1.5.tar.bz2\nWORKDIR /tmp/samtools-1.5\nRUN ./configure --disable-lzma\nRUN make -j 16\nRUN mv samtools /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install PriceSeqFilter\nRUN wget http://derisilab.ucsf.edu/software/price/PriceSource140408.tar.gz\nRUN tar -xzf PriceSource140408.tar.gz\nWORKDIR /tmp/PriceSource140408\nRUN make -j 16\nRUN mv PriceSeqFilter /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install cdhit-dup tools\nRUN wget https://github.com/weizhongli/cdhit/archive/V4.6.8.zip\nRUN unzip V4.6.8.zip\nWORKDIR /tmp/cdhit-4.6.8\nRUN make -j 16\nWORKDIR /tmp/cdhit-4.6.8/cd-hit-auxtools\nRUN make -j 16\nRUN mv cd-hit-dup /usr/local/bin/\nWORKDIR /tmp\n#   Compile and install Fastax tools\n#  RUN wget http://launchpadlibrarian.net/161878011/libgtextutils0_0.7-1_amd64.deb\n#  RUN wget http://launchpadlibrarian.net/162265652/fastx-toolkit_0.0.14-1_amd64.deb\n#  RUN gdebi --non-interactive libgtextutils0_0.7-1_amd64.deb\n#  RUN gdebi --non-interactive fastx-toolkit_0.0.14-1_amd64.deb\n#   For aegea\nRUN apt-get install python3-pip -y\nRUN pip3 install awscli-cwlogs==1.4.0 keymaker==0.2.1 boto3==1.4.3 awscli==1.11.44 dynamoq==0.0.5 tractorbeam==0.1.3\nRUN pip3 install pysam biopython\n#  RUN echo iptables-persistent iptables-persistent/autosave_v4 boolean true | debconf-set-selections\nRUN apt-get update \\\n && apt-get install iptables-persistent debian-goodies bridge-utils pixz cryptsetup-bin mdadm btrfs-tools libffi-dev libssl-dev libxml2-dev libxslt1-dev libyaml-dev libcurl4-openssl-dev libjemalloc-dev libzip-dev libsnappy-dev liblz4-dev libgmp-dev libmpfr-dev libhts-dev libsqlite3-dev libncurses5-dev htop pydf jq httpie python-dev python-cffi python-pip python-setuptools python-wheel python-virtualenv python-requests python-yaml python3-dev python3-cffi python3-pip python3-setuptools python3-wheel python3-requests python3-yaml nfs-common unzip build-essential cmake libtool autoconf ruby sysstat dstat numactl gdebi-core sqlite3 stunnel moreutils curl wget git aria2 sift -y\n#   Strange that we have to do this, but if we don't, aegea tries to do it, and it fails then with some urllib3 bug.\nRUN apt-get install awscli -y\nRUN apt-get install bsdtar alien -y\n#   For de-novo assembly\nWORKDIR /tmp/spades_build\nRUN git clone https://github.com/ablab/spades.git\nWORKDIR /tmp/spades_build/spades\nRUN git checkout spades_3.11.0\nWORKDIR /tmp/spades_build/spades/assembler\nRUN PREFIX=/usr/local ./spades_compile.sh\nRUN /usr/local/bin/spades.py --test\n#   For nonhost fastq filtering\nWORKDIR /tmp/seqtk_build\nRUN git clone https://github.com/lh3/seqtk.git\nWORKDIR /tmp/seqtk_build/seqtk\nRUN make \\\n && make install\nWORKDIR /tmp\n#   Compile and install gmap/gsnap\nRUN wget http://research-pub.gene.com/gmap/src/gmap-gsnap-2017-11-15.tar.gz\nRUN mkdir gmap-gsnap \\\n && tar xf gmap-gsnap-2017-11-15.tar.gz -C gmap-gsnap --strip-components 1\nWORKDIR /tmp/gmap-gsnap\nRUN ./configure --prefix=/usr/local\nRUN make -j 16 \\\n && make check \\\n && make install\nRUN rm -rf /tmp/gmap-gsnap /tmp/gmap-gsnap-2017-11-15.tar.gz\nRUN gsnapl --version\n#   For srst2, install forked srst2 python 3 compatible repo\nRUN pip install scipy\nRUN pip install git+https://github.com/chanzuckerberg/srst2\n#   TODO: Test both pip installations, consider keeping pip use consistent\nRUN pip3 install pandas\n#   Blast command line\nRUN wget -N ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.6.0/ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN alien -i ncbi-blast-2.6.0+-1.x86_64.rpm\nRUN rm -rf ncbi-blast-2.6.0+-1.x86_64.rpm\n#   For adapter trimming\nRUN apt-get install python-cutadapt\nWORKDIR /tmp\nRUN wget http://www.usadellab.org/cms/uploads/supplementary/Trimmomatic/Trimmomatic-0.38.zip\nRUN unzip Trimmomatic-0.38.zip\nRUN mv Trimmomatic-0.38/trimmomatic-0.38.jar /usr/local/bin/\nRUN apt-get update \\\n && apt-get install default-jre -y\n#   For phylogenetic trees\nWORKDIR /tmp\nRUN wget https://sourceforge.net/projects/ksnp/files/kSNP3.1_Linux_package.zip\nRUN unzip -o kSNP3.1_Linux_package.zip\nWORKDIR /tmp/kSNP3.1_Linux_package/kSNP3\nRUN cp -r * /usr/local/bin/\nRUN sed -i 's:set kSNP=/usr/local/kSNP3:set kSNP=/usr/local/bin:g' /usr/local/bin/kSNP3\nRUN apt-get install tcsh\nRUN kSNP3\nRUN apt-get install liblz4-tool -y\nRUN apt-get install lbzip2 -y\n#   Cleanup\nRUN rm -rf /tmp/*\nWORKDIR /\n","originalDockerfileUglifiedHash":"1c0e80c6769d516c5a47cbf3257c2159","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ab651be892049be34f8168cf1b111973c1f5b5bc.dockerfile"}