{"seed":309876772,"processedDockerfileHash":"2a3400fbb3ef29f4eed16c8fa8d12411","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Linux on z Systems Dockerfile for Cassandra version 3.11.3 #########\n#\n#   This Dockerfile builds a basic installation of Cassandra.\n#\n#   Apache Cassandra is an open source distributed database management system designed\n#   to handle large amounts of data across many commodity servers, providing high\n#   availability with no single point of failure\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To Start Cassandra Server create a container from the image created from Dockerfile\n#   docker run --name <container_name> -p <port_number>:7000 -p <port_number>:7001 -p <port_number>:7199 -p <port_number>:9042 -p <port_number>:9160 -d <image_name>\n#\n#  ################################################################################\n#   Base image\nFROM s390x/ubuntu:16.04\n#   The author\nMAINTAINER LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\nENV SOURCE_DIR=\"/root\"\nWORKDIR $SOURCE_DIR\nENV ANT_HOME=\"$SOURCE_DIR/apache-ant-1.9.4\"\nRUN unset JAVA_TOOL_OPTIONS\nENV LANG=\"en_US.UTF-8\"\nENV JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\"\nENV ANT_OPTS=\"-Xms4G -Xmx4G\"\nENV JAVA_HOME=\"$SOURCE_DIR/jdk8u202-b08\"\nENV PATH=\"$JAVA_HOME/bin:$ANT_HOME/bin:$PATH\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends automake autoconf git g++ libx11-dev libxt-dev libtool locales-all make patch pkg-config python texinfo tar wget unzip -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk8-binaries/releases/download/jdk8u202-b08/OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && tar -xvf OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && wget http://archive.apache.org/dist/ant/binaries/apache-ant-1.9.4-bin.tar.gz \\\n && tar -xvf apache-ant-1.9.4-bin.tar.gz \\\n && git clone https://github.com/java-native-access/jna.git \\\n && cd jna \\\n && git checkout 4.2.2 \\\n && ant \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/cassandra.git \\\n && cd cassandra \\\n && git checkout cassandra-3.11.3 \\\n && sed -i ' s/Xss256k/Xss32m/' build.xml conf/jvm.options \\\n && ant \\\n && rm lib/snappy-java-1.1.1.7.jar \\\n && wget -O lib/snappy-java-1.1.2.6.jar http://central.maven.org/maven2/org/xerial/snappy/snappy-java/1.1.2.6/snappy-java-1.1.2.6.jar \\\n && rm lib/jna-4.2.2.jar \\\n && cp $SOURCE_DIR/jna/build/jna.jar $SOURCE_DIR/cassandra/lib/jna-4.2.2.jar \\\n && cp -R $SOURCE_DIR/cassandra /usr/share/ \\\n && rm -rf /root/apache-ant-1.9.4 /root/apache-ant-1.9.4-bin.tar.gz /root/jna /root/cassandra \\\n && rm -rf /usr/share/cassandra/test \\\n && apt-get remove -y automake autoconf make patch pkg-config wget unzip \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Expose Ports\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nVOLUME [ \"/usr/share/cassandra/data/\" ]\n#   Set Path\nENV PATH=\"$PATH:/usr/share/cassandra/bin\"\n#   Start Cassandra server\nCMD [\"cassandra\", \"-Rf\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright IBM Corporation 2017, 2019.\n#  LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n# ######### Linux on z Systems Dockerfile for Cassandra version 3.11.3 #########\n#\n#  This Dockerfile builds a basic installation of Cassandra.\n#\n#  Apache Cassandra is an open source distributed database management system designed\n#  to handle large amounts of data across many commodity servers, providing high\n#  availability with no single point of failure\n#\n#  To build this image, from the directory containing this Dockerfile\n#  (assuming that the file is named Dockerfile):\n#  docker build -t <image_name> .\n#\n#  To Start Cassandra Server create a container from the image created from Dockerfile\n#  docker run --name <container_name> -p <port_number>:7000 -p <port_number>:7001 -p <port_number>:7199 -p <port_number>:9042 -p <port_number>:9160 -d <image_name>\n#\n# ################################################################################\n#  Base image\nFROM s390x/ubuntu:16.04\n#  The author\nMAINTAINER LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\nENV SOURCE_DIR=\"/root\"\nWORKDIR $SOURCE_DIR\nENV ANT_HOME=\"$SOURCE_DIR/apache-ant-1.9.4\"\nRUN unset JAVA_TOOL_OPTIONS\nENV LANG=\"en_US.UTF-8\"\nENV JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\"\nENV ANT_OPTS=\"-Xms4G -Xmx4G\"\nENV JAVA_HOME=\"$SOURCE_DIR/jdk8u202-b08\"\nENV PATH=\"$JAVA_HOME/bin:$ANT_HOME/bin:$PATH\"\nRUN apt-get update \\\n && apt-get install automake autoconf git g++ libx11-dev libxt-dev libtool locales-all make patch pkg-config python texinfo tar wget unzip -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk8-binaries/releases/download/jdk8u202-b08/OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && tar -xvf OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && wget http://archive.apache.org/dist/ant/binaries/apache-ant-1.9.4-bin.tar.gz \\\n && tar -xvf apache-ant-1.9.4-bin.tar.gz \\\n && git clone https://github.com/java-native-access/jna.git \\\n && cd jna \\\n && git checkout 4.2.2 \\\n && ant \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/cassandra.git \\\n && cd cassandra \\\n && git checkout cassandra-3.11.3 \\\n && sed -i ' s/Xss256k/Xss32m/' build.xml conf/jvm.options \\\n && ant \\\n && rm lib/snappy-java-1.1.1.7.jar \\\n && wget -O lib/snappy-java-1.1.2.6.jar http://central.maven.org/maven2/org/xerial/snappy/snappy-java/1.1.2.6/snappy-java-1.1.2.6.jar \\\n && rm lib/jna-4.2.2.jar \\\n && cp $SOURCE_DIR/jna/build/jna.jar $SOURCE_DIR/cassandra/lib/jna-4.2.2.jar \\\n && cp -R $SOURCE_DIR/cassandra /usr/share/ \\\n && rm -rf /root/apache-ant-1.9.4 /root/apache-ant-1.9.4-bin.tar.gz /root/jna /root/cassandra \\\n && rm -rf /usr/share/cassandra/test \\\n && apt-get remove -y automake autoconf make patch pkg-config wget unzip \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  Expose Ports\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nVOLUME [ \"/usr/share/cassandra/data/\" ]\n#  Set Path\nENV PATH=\"$PATH:/usr/share/cassandra/bin\"\n#  Start Cassandra server\nCMD [\"cassandra\", \"-Rf\"]\n","injectedSmells":[],"originalDockerfileHash":"7d8a3058a805b2b259ee530312785824","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Linux on z Systems Dockerfile for Cassandra version 3.11.3 #########\n#\n#   This Dockerfile builds a basic installation of Cassandra.\n#\n#   Apache Cassandra is an open source distributed database management system designed\n#   to handle large amounts of data across many commodity servers, providing high\n#   availability with no single point of failure\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To Start Cassandra Server create a container from the image created from Dockerfile\n#   docker run --name <container_name> -p <port_number>:7000 -p <port_number>:7001 -p <port_number>:7199 -p <port_number>:9042 -p <port_number>:9160 -d <image_name>\n#\n#  ################################################################################\n#   Base image\nFROM s390x/ubuntu:16.04\n#   The author\nMAINTAINER LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\nENV SOURCE_DIR=\"/root\"\nWORKDIR $SOURCE_DIR\nENV ANT_HOME=\"$SOURCE_DIR/apache-ant-1.9.4\"\nRUN unset JAVA_TOOL_OPTIONS\nENV LANG=\"en_US.UTF-8\"\nENV JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\"\nENV ANT_OPTS=\"-Xms4G -Xmx4G\"\nENV JAVA_HOME=\"$SOURCE_DIR/jdk8u202-b08\"\nENV PATH=\"$JAVA_HOME/bin:$ANT_HOME/bin:$PATH\"\nRUN apt-get update \\\n && apt-get install automake autoconf git g++ libx11-dev libxt-dev libtool locales-all make patch pkg-config python texinfo tar wget unzip -y \\\n && cd $SOURCE_DIR \\\n && wget https://github.com/AdoptOpenJDK/openjdk8-binaries/releases/download/jdk8u202-b08/OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && tar -xvf OpenJDK8U-jdk_s390x_linux_hotspot_8u202b08.tar.gz \\\n && wget http://archive.apache.org/dist/ant/binaries/apache-ant-1.9.4-bin.tar.gz \\\n && tar -xvf apache-ant-1.9.4-bin.tar.gz \\\n && git clone https://github.com/java-native-access/jna.git \\\n && cd jna \\\n && git checkout 4.2.2 \\\n && ant \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/cassandra.git \\\n && cd cassandra \\\n && git checkout cassandra-3.11.3 \\\n && sed -i ' s/Xss256k/Xss32m/' build.xml conf/jvm.options \\\n && ant \\\n && rm lib/snappy-java-1.1.1.7.jar \\\n && wget -O lib/snappy-java-1.1.2.6.jar http://central.maven.org/maven2/org/xerial/snappy/snappy-java/1.1.2.6/snappy-java-1.1.2.6.jar \\\n && rm lib/jna-4.2.2.jar \\\n && cp $SOURCE_DIR/jna/build/jna.jar $SOURCE_DIR/cassandra/lib/jna-4.2.2.jar \\\n && cp -R $SOURCE_DIR/cassandra /usr/share/ \\\n && rm -rf /root/apache-ant-1.9.4 /root/apache-ant-1.9.4-bin.tar.gz /root/jna /root/cassandra \\\n && rm -rf /usr/share/cassandra/test \\\n && apt-get remove -y automake autoconf make patch pkg-config wget unzip \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Expose Ports\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nVOLUME [ \"/usr/share/cassandra/data/\" ]\n#   Set Path\nENV PATH=\"$PATH:/usr/share/cassandra/bin\"\n#   Start Cassandra server\nCMD [\"cassandra\", \"-Rf\"]\n","originalDockerfileUglifiedHash":"1144baa6be7314843a8a08ba69ce2ad9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0ef413f59e8b17eec3fdd245f5d08e3e85d6bd38.dockerfile"}