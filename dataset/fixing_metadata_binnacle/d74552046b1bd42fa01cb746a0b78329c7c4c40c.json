{"seed":501658024,"processedDockerfileHash":"dcfbe1ab6051a56442b55fdcc537a4a3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:bionic AS resource\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.58.0-2ubuntu3.24 git=1:2.17.1-1ubuntu0.17 gnupg=2.2.4-1ubuntu1.6 gzip=1.6-5ubuntu1.2 jq=1.5+dfsg-2 openssl=1.1.1-1ubuntu2.1~18.04.21 libssl-dev=1.1.1-1ubuntu2.1~18.04.21 make=4.1-9.1ubuntu1 g++=4:7.4.0-1ubuntu2.3 openssh-client=1:7.6p1-4ubuntu0.7 libstdc++6=8.4.0-1ubuntu1~18.04 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | bash\nRUN apt-get install --no-install-recommends git-lfs=2.3.4-1 -y\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nCOPY assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nCOPY scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s git git-upload-archive \\\n && ln -s git git-merge \\\n && ln -s git git-crypt\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl\nWORKDIR /usr/lib\nRUN rm -rf perl\nFROM resource AS tests\nCOPY test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apt-get update \\\n && apt-get install --no-install-recommends squid=3.5.27-1ubuntu1.14 -y\nCOPY test/ /tests/test\nCOPY integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:bionic AS resource\nRUN apt-get update \\\n && apt-get install curl git gnupg gzip jq openssl libssl-dev make g++ openssh-client libstdc++6 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | bash\nRUN apt-get install git-lfs -y\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nADD assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nADD scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s git git-upload-archive \\\n && ln -s git git-merge \\\n && ln -s git git-crypt\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl\nWORKDIR /usr/lib\nRUN rm -rf perl\nFROM resource AS tests\nADD test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apt-get update \\\n && apt-get install squid -y\nADD test/ /tests/test\nADD integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\n","injectedSmells":[],"originalDockerfileHash":"d04ec26146056ec4fb2192ae1de6b1a8","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:bionic AS resource\nRUN apt-get update \\\n && apt-get install curl git gnupg gzip jq openssl libssl-dev make g++ openssh-client libstdc++6 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | bash\nRUN apt-get install git-lfs -y\nWORKDIR /root\nRUN git clone https://github.com/proxytunnel/proxytunnel.git \\\n && cd proxytunnel \\\n && make -j4 \\\n && install -c proxytunnel /usr/bin/proxytunnel \\\n && cd .. \\\n && rm -rf proxytunnel\nRUN git config --global user.email \"git@localhost\"\nRUN git config --global user.name \"git\"\nADD assets/ /opt/resource/\nRUN chmod +x /opt/resource/*\nADD scripts/install_git_crypt.sh install_git_crypt.sh\nRUN ./install_git_crypt.sh \\\n && rm ./install_git_crypt.sh\nWORKDIR /usr/libexec/git-core\nRUN rm -f git-add git-add--interactive git-annotate git-apply git-archimport git-archive git-bisect--helper git-blame git-branch git-bundle git-credential-cache git-credential-cache--daemon git-credential-store git-cat-file git-check-attr git-check-ignore git-check-mailmap git-check-ref-format git-checkout git-checkout-index git-cherry git-cherry-pick git-clean git-clone git-column git-commit git-commit-tree git-config git-count-objects git-credential git-cvsexportcommit git-cvsimport git-cvsserver git-describe git-diff git-diff-files git-diff-index git-diff-tree git-difftool git-fast-export git-fast-import git-fetch git-fetch-pack git-fmt-merge-msg git-for-each-ref git-format-patch git-fsck git-fsck-objects git-gc git-get-tar-commit-id git-grep git-hash-object git-help git-http-backend git-imap-send git-index-pack git-init git-init-db git-lfs git-log git-ls-files git-ls-remote git-ls-tree git-mailinfo git-mailsplit git-merge git-mktag git-mktree git-mv git-name-rev git-notes git-p4 git-pack-objects git-pack-redundant git-pack-refs git-patch-id git-peek-remote git-prune git-prune-packed git-push git-read-tree git-reflog git-relink git-remote git-remote-ext git-remote-fd git-remote-testsvn git-repack git-replace git-repo-config git-rerere git-reset git-rev-list git-rev-parse git-revert git-rm git-send-email git-send-pack git-shortlog git-show git-show-branch git-show-index git-show-ref git-stage git-show-ref git-stage git-status git-stripspace git-svn git-symbolic-ref git-tag git-tar-tree git-unpack-file git-unpack-objects git-update-index git-update-ref git-update-server-info git-upload-archive git-var git-verify-pack git-verify-tag git-whatchanged git-write-tree\nWORKDIR /usr/bin\nRUN rm -f git-cvsserver git-shell git-receive-pack git-upload-pack git-upload-archive \\\n && ln -s git git-upload-archive \\\n && ln -s git git-merge \\\n && ln -s git git-crypt\nWORKDIR /usr/share\nRUN rm -rf gitweb locale perl\nWORKDIR /usr/lib\nRUN rm -rf perl\nFROM resource AS tests\nADD test/ /tests\nRUN /tests/all.sh\nFROM resource AS integrationtests\nRUN apt-get update \\\n && apt-get install squid -y\nADD test/ /tests/test\nADD integration-tests /tests/integration-tests\nRUN /tests/integration-tests/integration.sh\nFROM resource\n","originalDockerfileUglifiedHash":"d04ec26146056ec4fb2192ae1de6b1a8","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d74552046b1bd42fa01cb746a0b78329c7c4c40c.dockerfile"}