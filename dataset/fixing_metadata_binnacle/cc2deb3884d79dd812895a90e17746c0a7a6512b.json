{"seed":2702718166,"processedDockerfileHash":"5b8f26bde42929c5f247808657893ea0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#   hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#   Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Setup base\n#   hadolint ignore=DL3003\nRUN apk add build-base=0.5-r1 git=2.22.0-r0 npm=10.16.0-r0 patch=2.7.6-r4 python2=2.7.16-r1 yarn=1.16.0-r0 --no-cache --virtual .build-dependencies \\\n && apk add apache2-utils=2.4.39-r0 certbot=0.35.1-r0 mariadb-client=10.3.16-r0 mariadb=10.3.16-r0 nginx-mod-stream=1.16.0-r2 nginx=1.16.0-r2 nodejs=10.16.0-r0 openssl=1.1.1c-r0 dnsmasq=2.80-r3 libcap=2.27-r0 --no-cache \\\n && yarn global add modclean \\\n && curl -J -L -o /tmp/nginxproxymanager.tar.gz \"https://github.com/jc21/nginx-proxy-manager/archive/2.0.13.tar.gz\" \\\n && mkdir /app \\\n && tar zxvf /tmp/nginxproxymanager.tar.gz --strip 1 -C /app \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/ui/menu/main.ejs \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/dashboard/main.ejs \\\n && sed -i \"s#, 'streams',#,#g\" /app/src/frontend/js/app/user/permissions.ejs \\\n && cd /app \\\n && yarn install \\\n && npm run-script build \\\n && rm -rf node_modules \\\n && yarn install --production \\\n && mkdir -p /opt/nginx-proxy-manager/src \\\n && cp -r /app/dist /opt/nginx-proxy-manager/ \\\n && cp -r /app/knexfile.js /opt/nginx-proxy-manager/ \\\n && cp -r /app/node_modules /opt/nginx-proxy-manager/ \\\n && cp -r /app/package.json /opt/nginx-proxy-manager/ \\\n && cp -r /app/src/backend /opt/nginx-proxy-manager/src/ \\\n && rm -f -r /etc/nginx \\\n && cp -r /app/rootfs/etc/nginx /etc/nginx \\\n && mkdir -p /run/mysqld /run/nginx \\\n && modclean --path /opt/nginx-proxy-manager --no-progress --keep-empty --run \\\n && yarn global remove modclean \\\n && yarn cache clean \\\n && apk del --purge .build-dependencies \\\n && rm -f -r /app /etc/init.d/nginx /etc/logrotate.d/nginx /opt/nginx-proxy-manager/node_modules/bcrypt/build /root/.node-gyp /tmp/.[!.]* /tmp/* /usr/lib/node_modules /usr/local/share/.cache /var/lib/mysql /var/lib/nginx /var/log/nginx /var/tmp/nginx /var/www\n#   Copy root filesystem\nCOPY rootfs /\n#   Build arguments\nARG BUILD_ARCH\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#   Labels\nLABEL io.hass.name=\"Nginx Proxy Manager\" \\\n      io.hass.description=\"Manage Nginx proxy hosts with a simple, powerful interface.\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"Manage Nginx proxy hosts with a simple, powerful interface\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"Nginx Proxy Manager\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-nginx-proxy-manager/111830?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-nginx-proxy-manager/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-nginx-proxy-manager\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#  hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#  Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  Setup base\n#  hadolint ignore=DL3003\nRUN apk add --no-cache --virtual .build-dependencies build-base=0.5-r1 git=2.22.0-r0 npm=10.16.0-r0 patch=2.7.6-r4 python2=2.7.16-r1 yarn=1.16.0-r0 \\\n && apk add --no-cache apache2-utils=2.4.39-r0 certbot=0.35.1-r0 mariadb-client=10.3.16-r0 mariadb=10.3.16-r0 nginx-mod-stream=1.16.0-r2 nginx=1.16.0-r2 nodejs=10.16.0-r0 openssl=1.1.1c-r0 dnsmasq=2.80-r3 libcap=2.27-r0 \\\n && yarn global add modclean \\\n && curl -J -L -o /tmp/nginxproxymanager.tar.gz \"https://github.com/jc21/nginx-proxy-manager/archive/2.0.13.tar.gz\" \\\n && mkdir /app \\\n && tar zxvf /tmp/nginxproxymanager.tar.gz --strip 1 -C /app \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/ui/menu/main.ejs \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/dashboard/main.ejs \\\n && sed -i \"s#, 'streams',#,#g\" /app/src/frontend/js/app/user/permissions.ejs \\\n && cd /app \\\n && yarn install \\\n && npm run-script build \\\n && rm -rf node_modules \\\n && yarn install --production \\\n && mkdir -p /opt/nginx-proxy-manager/src \\\n && cp -r /app/dist /opt/nginx-proxy-manager/ \\\n && cp -r /app/knexfile.js /opt/nginx-proxy-manager/ \\\n && cp -r /app/node_modules /opt/nginx-proxy-manager/ \\\n && cp -r /app/package.json /opt/nginx-proxy-manager/ \\\n && cp -r /app/src/backend /opt/nginx-proxy-manager/src/ \\\n && rm -f -r /etc/nginx \\\n && cp -r /app/rootfs/etc/nginx /etc/nginx \\\n && mkdir -p /run/mysqld /run/nginx \\\n && modclean --path /opt/nginx-proxy-manager --no-progress --keep-empty --run \\\n && yarn global remove modclean \\\n && yarn cache clean \\\n && apk del --purge .build-dependencies \\\n && rm -f -r /app /etc/init.d/nginx /etc/logrotate.d/nginx /opt/nginx-proxy-manager/node_modules/bcrypt/build /root/.node-gyp /tmp/.[!.]* /tmp/* /usr/lib/node_modules /usr/local/share/.cache /var/lib/mysql /var/lib/nginx /var/log/nginx /var/tmp/nginx /var/www\n#  Copy root filesystem\nCOPY rootfs /\n#  Build arguments\nARG BUILD_ARCH\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#  Labels\nLABEL io.hass.name=\"Nginx Proxy Manager\" \\\n      io.hass.description=\"Manage Nginx proxy hosts with a simple, powerful interface.\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"Manage Nginx proxy hosts with a simple, powerful interface\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"Nginx Proxy Manager\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-nginx-proxy-manager/111830?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-nginx-proxy-manager/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-nginx-proxy-manager\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\n","injectedSmells":[],"originalDockerfileHash":"456c3e5abb113c49048c3fdba11834d6","successfullyInjectedSmells":[],"originalDockerfileUglified":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#   hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#   Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Setup base\n#   hadolint ignore=DL3003\nRUN apk add --no-cache --virtual .build-dependencies build-base=0.5-r1 git=2.22.0-r0 npm=10.16.0-r0 patch=2.7.6-r4 python2=2.7.16-r1 yarn=1.16.0-r0 \\\n && apk add --no-cache apache2-utils=2.4.39-r0 certbot=0.35.1-r0 mariadb-client=10.3.16-r0 mariadb=10.3.16-r0 nginx-mod-stream=1.16.0-r2 nginx=1.16.0-r2 nodejs=10.16.0-r0 openssl=1.1.1c-r0 dnsmasq=2.80-r3 libcap=2.27-r0 \\\n && yarn global add modclean \\\n && curl -J -L -o /tmp/nginxproxymanager.tar.gz \"https://github.com/jc21/nginx-proxy-manager/archive/2.0.13.tar.gz\" \\\n && mkdir /app \\\n && tar zxvf /tmp/nginxproxymanager.tar.gz --strip 1 -C /app \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/ui/menu/main.ejs \\\n && sed -i \"s#canShow('streams')#false#g\" /app/src/frontend/js/app/dashboard/main.ejs \\\n && sed -i \"s#, 'streams',#,#g\" /app/src/frontend/js/app/user/permissions.ejs \\\n && cd /app \\\n && yarn install \\\n && npm run-script build \\\n && rm -rf node_modules \\\n && yarn install --production \\\n && mkdir -p /opt/nginx-proxy-manager/src \\\n && cp -r /app/dist /opt/nginx-proxy-manager/ \\\n && cp -r /app/knexfile.js /opt/nginx-proxy-manager/ \\\n && cp -r /app/node_modules /opt/nginx-proxy-manager/ \\\n && cp -r /app/package.json /opt/nginx-proxy-manager/ \\\n && cp -r /app/src/backend /opt/nginx-proxy-manager/src/ \\\n && rm -f -r /etc/nginx \\\n && cp -r /app/rootfs/etc/nginx /etc/nginx \\\n && mkdir -p /run/mysqld /run/nginx \\\n && modclean --path /opt/nginx-proxy-manager --no-progress --keep-empty --run \\\n && yarn global remove modclean \\\n && yarn cache clean \\\n && apk del --purge .build-dependencies \\\n && rm -f -r /app /etc/init.d/nginx /etc/logrotate.d/nginx /opt/nginx-proxy-manager/node_modules/bcrypt/build /root/.node-gyp /tmp/.[!.]* /tmp/* /usr/lib/node_modules /usr/local/share/.cache /var/lib/mysql /var/lib/nginx /var/log/nginx /var/tmp/nginx /var/www\n#   Copy root filesystem\nCOPY rootfs /\n#   Build arguments\nARG BUILD_ARCH\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#   Labels\nLABEL io.hass.name=\"Nginx Proxy Manager\" \\\n      io.hass.description=\"Manage Nginx proxy hosts with a simple, powerful interface.\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"Manage Nginx proxy hosts with a simple, powerful interface\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"Nginx Proxy Manager\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-nginx-proxy-manager/111830?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-nginx-proxy-manager/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-nginx-proxy-manager\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\n","originalDockerfileUglifiedHash":"6e293528a1d2c8de1ffd8b3594cb5858","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cc2deb3884d79dd812895a90e17746c0a7a6512b.dockerfile"}