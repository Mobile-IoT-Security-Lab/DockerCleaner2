{"seed":118934124,"processedDockerfileHash":"1c93d90a3b973bcf3c220b10274bbb4f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.15\nMAINTAINER ivan@lagunovsky.com\nENV VESTA=\"/usr/local/vesta\"\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install --no-install-recommends git unzip nano -y \\\n && apt-get clean\nCOPY install-ubuntu.sh /install-ubuntu.sh\nRUN chmod +x /install-ubuntu.sh\nRUN bash /install-ubuntu.sh --nginx yes --apache yes --phpfpm no --vsftpd no --proftpd no --exim yes --dovecot yes --spamassassin yes --clamav yes --named yes --iptables no --fail2ban no --mysql yes --postgresql no --remi yes --quota no --password admin -y no -f \\\n && apt-get clean\nCOPY dovecot /etc/init.d/dovecot\nRUN chmod +x /etc/init.d/dovecot\nRUN cd /usr/local/vesta/data/ips \\\n && mv * 127.0.0.1 \\\n && cd /etc/apache2/conf.d \\\n && sed -i -- 's/172.*.*.*:80/127.0.0.1:80/g' * \\\n && sed -i -- 's/172.*.*.*:8443/127.0.0.1:8443/g' * \\\n && cd /etc/nginx/conf.d \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' * \\\n && cd /home/admin/conf/web \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' *\nRUN rm -f /etc/service/sshd/down \\\n && /etc/my_init.d/00_regen_ssh_host_keys.sh\nRUN mkdir /vesta-start \\\n && mkdir /vesta-start/etc \\\n && mkdir /vesta-start/var \\\n && mkdir /vesta-start/local \\\n && mv /home /vesta-start/home \\\n && rm -rf /home \\\n && ln -s /vesta/home /home \\\n && mv /etc/apache2 /vesta-start/etc/apache2 \\\n && rm -rf /etc/apache2 \\\n && ln -s /vesta/etc/apache2 /etc/apache2 \\\n && mv /etc/php5 /vesta-start/etc/php5 \\\n && rm -rf /etc/php5 \\\n && ln -s /vesta/etc/php5 /etc/php5 \\\n && mv /etc/nginx /vesta-start/etc/nginx \\\n && rm -rf /etc/nginx \\\n && ln -s /vesta/etc/nginx /etc/nginx \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/exim4 /vesta-start/etc/exim4 \\\n && rm -rf /etc/exim4 \\\n && ln -s /vesta/etc/exim4 /etc/exim4 \\\n && mv /etc/dovecot /vesta-start/etc/dovecot \\\n && rm -rf /etc/dovecot \\\n && ln -s /vesta/etc/dovecot /etc/dovecot \\\n && mv /etc/clamav /vesta-start/etc/clamav \\\n && rm -rf /etc/clamav \\\n && ln -s /vesta/etc/clamav /etc/clamav \\\n && mv /etc/spamassassin /vesta-start/etc/spamassassin \\\n && rm -rf /etc/spamassassin \\\n && ln -s /vesta/etc/spamassassin /etc/spamassassin \\\n && mv /etc/roundcube /vesta-start/etc/roundcube \\\n && rm -rf /etc/roundcube \\\n && ln -s /vesta/etc/roundcube /etc/roundcube \\\n && mv /etc/mysql /vesta-start/etc/mysql \\\n && rm -rf /etc/mysql \\\n && ln -s /vesta/etc/mysql /etc/mysql \\\n && mv /etc/phpmyadmin /vesta-start/etc/phpmyadmin \\\n && rm -rf /etc/phpmyadmin \\\n && ln -s /vesta/etc/phpmyadmin /etc/phpmyadmin \\\n && mv /root /vesta-start/root \\\n && rm -rf /root \\\n && ln -s /vesta/root /root \\\n && mv /usr/local/vesta /vesta-start/local/vesta \\\n && rm -rf /usr/local/vesta \\\n && ln -s /vesta/local/vesta /usr/local/vesta \\\n && mv /etc/shadow /vesta-start/etc/shadow \\\n && rm -rf /etc/shadow \\\n && ln -s /vesta/etc/shadow /etc/shadow \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/profile /vesta-start/etc/profile \\\n && rm -rf /etc/profile \\\n && ln -s /vesta/etc/profile /etc/profile \\\n && mv /var/lib/mysql /vesta-start/var/mysql \\\n && rm -rf /var/lib/mysql \\\n && ln -s /vesta/var/mysql /var/lib/mysql \\\n && mv /var/log /vesta-start/var/log \\\n && rm -rf /var/log \\\n && ln -s /vesta/var/log /var/log\nRUN mkdir -p /vesta-start/local/vesta/data/sessions \\\n && chmod 775 /vesta-start/local/vesta/data/sessions \\\n && chown root:admin /vesta-start/local/vesta/data/sessions\nVOLUME /vesta\nRUN mkdir -p /etc/my_init.d\nCOPY startup.sh /etc/my_init.d/startup.sh\nRUN chmod +x /etc/my_init.d/startup.sh\nEXPOSE 22/tcp 80/tcp 8083/tcp 3306/tcp 443/tcp 25/tcp 993/tcp 110/tcp 53/tcp 54/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.15\nMAINTAINER ivan@lagunovsky.com\nENV VESTA=\"/usr/local/vesta\"\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install git unzip nano -y \\\n && apt-get clean\nADD install-ubuntu.sh /install-ubuntu.sh\nRUN chmod +x /install-ubuntu.sh\nRUN bash /install-ubuntu.sh --nginx yes --apache yes --phpfpm no --vsftpd no --proftpd no --exim yes --dovecot yes --spamassassin yes --clamav yes --named yes --iptables no --fail2ban no --mysql yes --postgresql no --remi yes --quota no --password admin -y no -f \\\n && apt-get clean\nADD dovecot /etc/init.d/dovecot\nRUN chmod +x /etc/init.d/dovecot\nRUN cd /usr/local/vesta/data/ips \\\n && mv * 127.0.0.1 \\\n && cd /etc/apache2/conf.d \\\n && sed -i -- 's/172.*.*.*:80/127.0.0.1:80/g' * \\\n && sed -i -- 's/172.*.*.*:8443/127.0.0.1:8443/g' * \\\n && cd /etc/nginx/conf.d \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' * \\\n && cd /home/admin/conf/web \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' *\nRUN rm -f /etc/service/sshd/down \\\n && /etc/my_init.d/00_regen_ssh_host_keys.sh\nRUN mkdir /vesta-start \\\n && mkdir /vesta-start/etc \\\n && mkdir /vesta-start/var \\\n && mkdir /vesta-start/local \\\n && mv /home /vesta-start/home \\\n && rm -rf /home \\\n && ln -s /vesta/home /home \\\n && mv /etc/apache2 /vesta-start/etc/apache2 \\\n && rm -rf /etc/apache2 \\\n && ln -s /vesta/etc/apache2 /etc/apache2 \\\n && mv /etc/php5 /vesta-start/etc/php5 \\\n && rm -rf /etc/php5 \\\n && ln -s /vesta/etc/php5 /etc/php5 \\\n && mv /etc/nginx /vesta-start/etc/nginx \\\n && rm -rf /etc/nginx \\\n && ln -s /vesta/etc/nginx /etc/nginx \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/exim4 /vesta-start/etc/exim4 \\\n && rm -rf /etc/exim4 \\\n && ln -s /vesta/etc/exim4 /etc/exim4 \\\n && mv /etc/dovecot /vesta-start/etc/dovecot \\\n && rm -rf /etc/dovecot \\\n && ln -s /vesta/etc/dovecot /etc/dovecot \\\n && mv /etc/clamav /vesta-start/etc/clamav \\\n && rm -rf /etc/clamav \\\n && ln -s /vesta/etc/clamav /etc/clamav \\\n && mv /etc/spamassassin /vesta-start/etc/spamassassin \\\n && rm -rf /etc/spamassassin \\\n && ln -s /vesta/etc/spamassassin /etc/spamassassin \\\n && mv /etc/roundcube /vesta-start/etc/roundcube \\\n && rm -rf /etc/roundcube \\\n && ln -s /vesta/etc/roundcube /etc/roundcube \\\n && mv /etc/mysql /vesta-start/etc/mysql \\\n && rm -rf /etc/mysql \\\n && ln -s /vesta/etc/mysql /etc/mysql \\\n && mv /etc/phpmyadmin /vesta-start/etc/phpmyadmin \\\n && rm -rf /etc/phpmyadmin \\\n && ln -s /vesta/etc/phpmyadmin /etc/phpmyadmin \\\n && mv /root /vesta-start/root \\\n && rm -rf /root \\\n && ln -s /vesta/root /root \\\n && mv /usr/local/vesta /vesta-start/local/vesta \\\n && rm -rf /usr/local/vesta \\\n && ln -s /vesta/local/vesta /usr/local/vesta \\\n && mv /etc/shadow /vesta-start/etc/shadow \\\n && rm -rf /etc/shadow \\\n && ln -s /vesta/etc/shadow /etc/shadow \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/profile /vesta-start/etc/profile \\\n && rm -rf /etc/profile \\\n && ln -s /vesta/etc/profile /etc/profile \\\n && mv /var/lib/mysql /vesta-start/var/mysql \\\n && rm -rf /var/lib/mysql \\\n && ln -s /vesta/var/mysql /var/lib/mysql \\\n && mv /var/log /vesta-start/var/log \\\n && rm -rf /var/log \\\n && ln -s /vesta/var/log /var/log\nRUN mkdir -p /vesta-start/local/vesta/data/sessions \\\n && chmod 775 /vesta-start/local/vesta/data/sessions \\\n && chown root:admin /vesta-start/local/vesta/data/sessions\nVOLUME /vesta\nRUN mkdir -p /etc/my_init.d\nADD startup.sh /etc/my_init.d/startup.sh\nRUN chmod +x /etc/my_init.d/startup.sh\nEXPOSE 22/tcp 80/tcp 8083/tcp 3306/tcp 443/tcp 25/tcp 993/tcp 110/tcp 53/tcp 54/tcp\n","injectedSmells":[],"originalDockerfileHash":"d66f15ad527af20b9b28774e0716ca6c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.15\nMAINTAINER ivan@lagunovsky.com\nENV VESTA=\"/usr/local/vesta\"\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install git unzip nano -y \\\n && apt-get clean\nADD install-ubuntu.sh /install-ubuntu.sh\nRUN chmod +x /install-ubuntu.sh\nRUN bash /install-ubuntu.sh --nginx yes --apache yes --phpfpm no --vsftpd no --proftpd no --exim yes --dovecot yes --spamassassin yes --clamav yes --named yes --iptables no --fail2ban no --mysql yes --postgresql no --remi yes --quota no --password admin -y no -f \\\n && apt-get clean\nADD dovecot /etc/init.d/dovecot\nRUN chmod +x /etc/init.d/dovecot\nRUN cd /usr/local/vesta/data/ips \\\n && mv * 127.0.0.1 \\\n && cd /etc/apache2/conf.d \\\n && sed -i -- 's/172.*.*.*:80/127.0.0.1:80/g' * \\\n && sed -i -- 's/172.*.*.*:8443/127.0.0.1:8443/g' * \\\n && cd /etc/nginx/conf.d \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' * \\\n && cd /home/admin/conf/web \\\n && sed -i -- 's/172.*.*.*:80;/80;/g' * \\\n && sed -i -- 's/172.*.*.*:8080/127.0.0.1:8080/g' *\nRUN rm -f /etc/service/sshd/down \\\n && /etc/my_init.d/00_regen_ssh_host_keys.sh\nRUN mkdir /vesta-start \\\n && mkdir /vesta-start/etc \\\n && mkdir /vesta-start/var \\\n && mkdir /vesta-start/local \\\n && mv /home /vesta-start/home \\\n && rm -rf /home \\\n && ln -s /vesta/home /home \\\n && mv /etc/apache2 /vesta-start/etc/apache2 \\\n && rm -rf /etc/apache2 \\\n && ln -s /vesta/etc/apache2 /etc/apache2 \\\n && mv /etc/php5 /vesta-start/etc/php5 \\\n && rm -rf /etc/php5 \\\n && ln -s /vesta/etc/php5 /etc/php5 \\\n && mv /etc/nginx /vesta-start/etc/nginx \\\n && rm -rf /etc/nginx \\\n && ln -s /vesta/etc/nginx /etc/nginx \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/exim4 /vesta-start/etc/exim4 \\\n && rm -rf /etc/exim4 \\\n && ln -s /vesta/etc/exim4 /etc/exim4 \\\n && mv /etc/dovecot /vesta-start/etc/dovecot \\\n && rm -rf /etc/dovecot \\\n && ln -s /vesta/etc/dovecot /etc/dovecot \\\n && mv /etc/clamav /vesta-start/etc/clamav \\\n && rm -rf /etc/clamav \\\n && ln -s /vesta/etc/clamav /etc/clamav \\\n && mv /etc/spamassassin /vesta-start/etc/spamassassin \\\n && rm -rf /etc/spamassassin \\\n && ln -s /vesta/etc/spamassassin /etc/spamassassin \\\n && mv /etc/roundcube /vesta-start/etc/roundcube \\\n && rm -rf /etc/roundcube \\\n && ln -s /vesta/etc/roundcube /etc/roundcube \\\n && mv /etc/mysql /vesta-start/etc/mysql \\\n && rm -rf /etc/mysql \\\n && ln -s /vesta/etc/mysql /etc/mysql \\\n && mv /etc/phpmyadmin /vesta-start/etc/phpmyadmin \\\n && rm -rf /etc/phpmyadmin \\\n && ln -s /vesta/etc/phpmyadmin /etc/phpmyadmin \\\n && mv /root /vesta-start/root \\\n && rm -rf /root \\\n && ln -s /vesta/root /root \\\n && mv /usr/local/vesta /vesta-start/local/vesta \\\n && rm -rf /usr/local/vesta \\\n && ln -s /vesta/local/vesta /usr/local/vesta \\\n && mv /etc/shadow /vesta-start/etc/shadow \\\n && rm -rf /etc/shadow \\\n && ln -s /vesta/etc/shadow /etc/shadow \\\n && mv /etc/bind /vesta-start/etc/bind \\\n && rm -rf /etc/bind \\\n && ln -s /vesta/etc/bind /etc/bind \\\n && mv /etc/profile /vesta-start/etc/profile \\\n && rm -rf /etc/profile \\\n && ln -s /vesta/etc/profile /etc/profile \\\n && mv /var/lib/mysql /vesta-start/var/mysql \\\n && rm -rf /var/lib/mysql \\\n && ln -s /vesta/var/mysql /var/lib/mysql \\\n && mv /var/log /vesta-start/var/log \\\n && rm -rf /var/log \\\n && ln -s /vesta/var/log /var/log\nRUN mkdir -p /vesta-start/local/vesta/data/sessions \\\n && chmod 775 /vesta-start/local/vesta/data/sessions \\\n && chown root:admin /vesta-start/local/vesta/data/sessions\nVOLUME /vesta\nRUN mkdir -p /etc/my_init.d\nADD startup.sh /etc/my_init.d/startup.sh\nRUN chmod +x /etc/my_init.d/startup.sh\nEXPOSE 22/tcp 80/tcp 8083/tcp 3306/tcp 443/tcp 25/tcp 993/tcp 110/tcp 53/tcp 54/tcp\n","originalDockerfileUglifiedHash":"d66f15ad527af20b9b28774e0716ca6c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f1923645ff30001ecea92d8c3c816b706fd9ee9c.dockerfile"}