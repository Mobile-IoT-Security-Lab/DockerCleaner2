{"seed":2568085457,"processedDockerfileHash":"ab67615a3b3d25fcbe52828c83e1478a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04 AS shark-provider\nMAINTAINER OrfeoToolbox Core Team\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   ----------------------------------------------------------------------------\n#   First stage : install tools \n#   (based on https://github.com/Shark-ML/Shark/blob/master/.travis.yml)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.18.04.1 g++=4:7.4.0-1ubuntu2.3 make=4.1-9.1ubuntu1 cmake=3.10.2-1ubuntu2.18.04.2 libboost-date-time-dev=1.65.1.0ubuntu1 libboost-filesystem-dev=1.65.1.0ubuntu1 libboost-graph-dev=1.65.1.0ubuntu1 libboost-program-options-dev=1.65.1.0ubuntu1 libboost-system-dev=1.65.1.0ubuntu1 libboost-thread-dev=1.65.1.0ubuntu1 libcurl4-gnutls-dev=7.58.0-2ubuntu3.24 curl=7.58.0-2ubuntu3.24 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN cd tmp \\\n && curl -o shark.tar.gz https://codeload.github.com/Shark-ML/Shark/tar.gz/v3.1.4 \\\n && tar xzf shark.tar.gz \\\n && cd Shark-3.1.4 \\\n && mkdir build \\\n && cd build \\\n && cmake -DBUILD_EXAMPLES:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DENABLE_HDF5:BOOL=OFF -DBUILD_SHARED_LIBS=ON -DENABLE_CBLAS:BOOL=OFF -DENABLE_OPENMP:BOOL=OFF ../. \\\n && make install\nFROM ubuntu:18.04\nMAINTAINER Sebastien Dinot <sebastien.dinot@c-s.fr>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN echo \"Europe/Paris\" > /etc/timezone\n#   ----------------------------------------------------------------------------\n#   First stage : install tools (they rarely evolve)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.18.04.1 curl=7.58.0-2ubuntu3.24 make=4.1-9.1ubuntu1 cmake=3.10.2-1ubuntu2.18.04.2 ninja-build=1.8.2-1 g++=4:7.4.0-1ubuntu2.3 gcc=4:7.4.0-1ubuntu2.3 clang=1:6.0-41~exp5~ubuntu1 clang-tidy=1:6.0-41~exp5~ubuntu1 clang-format=1:6.0-41~exp5~ubuntu1 ccache=3.4.1-1 git=1:2.17.1-1ubuntu0.17 libtool=2.4.6-2 swig=3.0.12-1 xvfb=2:1.19.6-1ubuntu4.14 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   ----------------------------------------------------------------------------\n#   Second stage : dependencies (they evolve more often)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends freeglut3-dev=2.8.1-3 libboost-date-time-dev=1.65.1.0ubuntu1 libboost-filesystem-dev=1.65.1.0ubuntu1 libboost-graph-dev=1.65.1.0ubuntu1 libboost-program-options-dev=1.65.1.0ubuntu1 libboost-system-dev=1.65.1.0ubuntu1 libboost-thread-dev=1.65.1.0ubuntu1 libcurl4-gnutls-dev=7.58.0-2ubuntu3.24 libexpat1-dev=2.2.5-3ubuntu0.9 libfftw3-dev=3.3.7-1 libgdal-dev=2.2.3+dfsg-2 libgeotiff-dev=1.4.2-2build1 libglew-dev=2.0.0-5 libglfw3-dev=3.2.1-1 libgsl-dev=2.4+dfsg-6 libinsighttoolkit4-dev=4.12.2-dfsg1-1ubuntu1 libkml-dev=1.3.0-5 libmuparser-dev=2.2.3-6 libmuparserx-dev=4.0.7+dfsg-3 libopencv-core-dev=3.2.0+dfsg-4ubuntu0.1 libopencv-ml-dev=3.2.0+dfsg-4ubuntu0.1 libopenmpi-dev=2.1.1-8 libopenthreads-dev=3.2.3+dfsg1-2ubuntu8 libossim-dev=2.2.2-1 libpng-dev=1.6.34-1ubuntu0.18.04.2 libqt5opengl5-dev=5.9.5+dfsg-0ubuntu2.6 libqwt-qt5-dev=6.1.3-1 libsvm-dev=3.21+ds-1.1 libtinyxml-dev=2.6.2-4 qtbase5-dev=5.9.5+dfsg-0ubuntu2.6 qttools5-dev=5.9.5-0ubuntu1 default-jdk=2:1.11-68ubuntu1~18.04.1 python-dev=2.7.15~rc1-1 python-numpy=1:1.13.3-2ubuntu1 python-gdal=2.2.3+dfsg-2 python3-dev=3.6.7-1~18.04 python3-numpy=1:1.13.3-2ubuntu1 python3-gdal=2.2.3+dfsg-2 -y \\\n && rm -rf /var/lib/apt/lists/*\nCOPY --from=shark-provider /usr/local/include/shark/* /usr/include/shark/\nCOPY --from=shark-provider /usr/local/lib/libshark* /usr/lib/\nCOPY --from=shark-provider /usr/local/bin/SharkVersion /usr/bin/\nCOPY --from=shark-provider /usr/local/lib/cmake/ /usr/lib/cmake/\nENV PATH=\"/usr/lib/ccache:$PATH\"\nENV OTB_USE_SHARK=\"ON\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04 AS shark-provider\nMAINTAINER OrfeoToolbox Core Team\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  ----------------------------------------------------------------------------\n#  First stage : install tools \n#  (based on https://github.com/Shark-ML/Shark/blob/master/.travis.yml)\n#  ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates g++ make cmake libboost-date-time-dev libboost-filesystem-dev libboost-graph-dev libboost-program-options-dev libboost-system-dev libboost-thread-dev libcurl4-gnutls-dev curl -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN cd tmp \\\n && curl -o shark.tar.gz https://codeload.github.com/Shark-ML/Shark/tar.gz/v3.1.4 \\\n && tar xzf shark.tar.gz \\\n && cd Shark-3.1.4 \\\n && mkdir build \\\n && cd build \\\n && cmake -DBUILD_EXAMPLES:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DENABLE_HDF5:BOOL=OFF -DBUILD_SHARED_LIBS=ON -DENABLE_CBLAS:BOOL=OFF -DENABLE_OPENMP:BOOL=OFF ../. \\\n && make install\nFROM ubuntu:18.04\nMAINTAINER Sebastien Dinot <sebastien.dinot@c-s.fr>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN echo \"Europe/Paris\" > /etc/timezone\n#  ----------------------------------------------------------------------------\n#  First stage : install tools (they rarely evolve)\n#  ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates curl make cmake ninja-build g++ gcc clang clang-tidy clang-format ccache git libtool swig xvfb -y \\\n && rm -rf /var/lib/apt/lists/*\n#  ----------------------------------------------------------------------------\n#  Second stage : dependencies (they evolve more often)\n#  ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends freeglut3-dev libboost-date-time-dev libboost-filesystem-dev libboost-graph-dev libboost-program-options-dev libboost-system-dev libboost-thread-dev libcurl4-gnutls-dev libexpat1-dev libfftw3-dev libgdal-dev libgeotiff-dev libglew-dev libglfw3-dev libgsl-dev libinsighttoolkit4-dev libkml-dev libmuparser-dev libmuparserx-dev libopencv-core-dev libopencv-ml-dev libopenmpi-dev libopenthreads-dev libossim-dev libpng-dev libqt5opengl5-dev libqwt-qt5-dev libsvm-dev libtinyxml-dev qtbase5-dev qttools5-dev default-jdk python-dev python-numpy python-gdal python3-dev python3-numpy python3-gdal -y \\\n && rm -rf /var/lib/apt/lists/*\nCOPY --from=shark-provider /usr/local/include/shark/* /usr/include/shark/\nCOPY --from=shark-provider /usr/local/lib/libshark* /usr/lib/\nCOPY --from=shark-provider /usr/local/bin/SharkVersion /usr/bin/\nCOPY --from=shark-provider /usr/local/lib/cmake/ /usr/lib/cmake/\nENV PATH=\"/usr/lib/ccache:$PATH\"\nENV OTB_USE_SHARK=\"ON\"\n","injectedSmells":[],"originalDockerfileHash":"36434cc602cf37cbaccd10e99911dfd1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04 AS shark-provider\nMAINTAINER OrfeoToolbox Core Team\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   ----------------------------------------------------------------------------\n#   First stage : install tools \n#   (based on https://github.com/Shark-ML/Shark/blob/master/.travis.yml)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates g++ make cmake libboost-date-time-dev libboost-filesystem-dev libboost-graph-dev libboost-program-options-dev libboost-system-dev libboost-thread-dev libcurl4-gnutls-dev curl -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN cd tmp \\\n && curl -o shark.tar.gz https://codeload.github.com/Shark-ML/Shark/tar.gz/v3.1.4 \\\n && tar xzf shark.tar.gz \\\n && cd Shark-3.1.4 \\\n && mkdir build \\\n && cd build \\\n && cmake -DBUILD_EXAMPLES:BOOL=OFF -DBUILD_TESTING:BOOL=OFF -DENABLE_HDF5:BOOL=OFF -DBUILD_SHARED_LIBS=ON -DENABLE_CBLAS:BOOL=OFF -DENABLE_OPENMP:BOOL=OFF ../. \\\n && make install\nFROM ubuntu:18.04\nMAINTAINER Sebastien Dinot <sebastien.dinot@c-s.fr>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN echo \"Europe/Paris\" > /etc/timezone\n#   ----------------------------------------------------------------------------\n#   First stage : install tools (they rarely evolve)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates curl make cmake ninja-build g++ gcc clang clang-tidy clang-format ccache git libtool swig xvfb -y \\\n && rm -rf /var/lib/apt/lists/*\n#   ----------------------------------------------------------------------------\n#   Second stage : dependencies (they evolve more often)\n#   ----------------------------------------------------------------------------\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends freeglut3-dev libboost-date-time-dev libboost-filesystem-dev libboost-graph-dev libboost-program-options-dev libboost-system-dev libboost-thread-dev libcurl4-gnutls-dev libexpat1-dev libfftw3-dev libgdal-dev libgeotiff-dev libglew-dev libglfw3-dev libgsl-dev libinsighttoolkit4-dev libkml-dev libmuparser-dev libmuparserx-dev libopencv-core-dev libopencv-ml-dev libopenmpi-dev libopenthreads-dev libossim-dev libpng-dev libqt5opengl5-dev libqwt-qt5-dev libsvm-dev libtinyxml-dev qtbase5-dev qttools5-dev default-jdk python-dev python-numpy python-gdal python3-dev python3-numpy python3-gdal -y \\\n && rm -rf /var/lib/apt/lists/*\nCOPY --from=shark-provider /usr/local/include/shark/* /usr/include/shark/\nCOPY --from=shark-provider /usr/local/lib/libshark* /usr/lib/\nCOPY --from=shark-provider /usr/local/bin/SharkVersion /usr/bin/\nCOPY --from=shark-provider /usr/local/lib/cmake/ /usr/lib/cmake/\nENV PATH=\"/usr/lib/ccache:$PATH\"\nENV OTB_USE_SHARK=\"ON\"\n","originalDockerfileUglifiedHash":"72527c1bb71b577ec5adf0e01a466ecc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/96f52716c097c5f1ca36fa0de85710a2b619e7d8.dockerfile"}