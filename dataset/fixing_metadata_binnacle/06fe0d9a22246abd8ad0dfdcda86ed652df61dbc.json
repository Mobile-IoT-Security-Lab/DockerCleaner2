{"seed":2006644673,"processedDockerfileHash":"fe351c28765a6a59fa1c29c110d76ac0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM alpine:3.8 AS builder\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.5\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add libstdc++=6.4.0-r9 libx11=1.6.6-r0 libxrender=0.9.10-r2 libxext=1.3.3-r2 libssl1.0=1.0.2u-r0 ca-certificates=20191127-r2 fontconfig=2.12.6-r1 freetype=2.9.1-r1 ttf-dejavu=2.37-r0 ttf-droid=20121017-r0 ttf-freefont=20120503-r1 ttf-liberation=2.00.1-r1 ttf-ubuntu-font-family=0.83-r0 --no-cache \\\n && apk add g++=6.4.0-r9 git=2.18.4-r0 gtk+=2.24.31-r0 gtk+-dev=2.24.31-r0 make=4.2.1-r2 mesa-dev=18.0.5-r0 msttcorefonts-installer=3.6-r2 openssl-dev=1.0.2u-r0 patch=2.7.6-r4 fontconfig-dev=2.12.6-r1 freetype-dev=2.9.1-r1 --no-cache --virtual .build-deps \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\n#   Image\nFROM alpine:3.8\nRUN apk add libstdc++=6.4.0-r9 libx11=1.6.6-r0 libxrender=0.9.10-r2 libxext=1.3.3-r2 libssl1.0=1.0.2u-r0 ca-certificates=20191127-r2 fontconfig=2.12.6-r1 freetype=2.9.1-r1 ttf-dejavu=2.37-r0 ttf-droid=20121017-r0 ttf-freefont=20120503-r1 ttf-liberation=2.00.1-r1 ttf-ubuntu-font-family=0.83-r0 --no-cache \\\n && apk add msttcorefonts-installer=3.6-r2 --no-cache --virtual .build-deps \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nCOPY --from=builder /bin/wkhtmltopdf /bin/wkhtmltopdf\nENTRYPOINT [\"wkhtmltopdf\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#  Image\nFROM alpine:3.8 AS builder\n#  Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.5\"\n#  Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#  Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev msttcorefonts-installer openssl-dev patch fontconfig-dev freetype-dev \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\n#  Image\nFROM alpine:3.8\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps msttcorefonts-installer \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nCOPY --from=builder /bin/wkhtmltopdf /bin/wkhtmltopdf\nENTRYPOINT [\"wkhtmltopdf\"]\n","injectedSmells":[],"originalDockerfileHash":"91a035c2d4002b0661b9daf4779af7c1","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM alpine:3.8 AS builder\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.5\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev msttcorefonts-installer openssl-dev patch fontconfig-dev freetype-dev \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\n#   Image\nFROM alpine:3.8\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps msttcorefonts-installer \\\n && update-ms-fonts \\\n && fc-cache -f \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nCOPY --from=builder /bin/wkhtmltopdf /bin/wkhtmltopdf\nENTRYPOINT [\"wkhtmltopdf\"]\n","originalDockerfileUglifiedHash":"015260bb2045cf2fbecab91a82146001","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/06fe0d9a22246abd8ad0dfdcda86ed652df61dbc.dockerfile"}