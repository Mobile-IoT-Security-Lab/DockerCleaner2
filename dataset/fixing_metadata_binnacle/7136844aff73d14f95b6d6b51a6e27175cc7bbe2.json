{"seed":1806145423,"processedDockerfileHash":"e3309c9c6fd8f638139a69d9942bfe34","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu-1604_jmodelica_trunk\n#  #####################\n#   EnergyPlus Docker\n#  #####################\nUSER root\nMAINTAINER xxx\n#   This is not ideal. The tarballs are not named nicely and EnergyPlus versioning is strange\nENV ENERGYPLUS_VERSION=\"8.9.0\"\nENV ENERGYPLUS_TAG=\"v8.9.0\"\nENV ENERGYPLUS_SHA=\"40101eaafd\"\n#   This should be x.y.z, but EnergyPlus convention is x-y-z\nENV ENERGYPLUS_INSTALL_VERSION=\"8-9-0\"\n#   Downloading from Github\n#   e.g. https://github.com/NREL/EnergyPlus/releases/download/v8.9.0/EnergyPlus-8.9.0-40101eaafd-Linux-x86_64.sh\nENV ENERGYPLUS_DOWNLOAD_BASE_URL=\"https://github.com/NREL/EnergyPlus/releases/download/$ENERGYPLUS_TAG\"\nENV ENERGYPLUS_DOWNLOAD_FILENAME=\"EnergyPlus-$ENERGYPLUS_VERSION-$ENERGYPLUS_SHA-Linux-x86_64.sh\"\nENV ENERGYPLUS_DOWNLOAD_URL=\"$ENERGYPLUS_DOWNLOAD_BASE_URL/$ENERGYPLUS_DOWNLOAD_FILENAME\"\n#   Collapse the update of packages, download and installation into one command\n#   to make the container smaller & remove a bunch of the auxiliary apps/files\n#   that are not needed in the container\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20230311 curl=7.88.1-7ubuntu1 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO $ENERGYPLUS_DOWNLOAD_URL \\\n && chmod +x $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && echo \"y\\r\" | ./$ENERGYPLUS_DOWNLOAD_FILENAME \\\n && rm $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && cd /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION \\\n && rm -rf DataSets Documentation ExampleFiles WeatherData MacroDataSets PostProcess/convertESOMTRpgm PostProcess/EP-Compare PreProcess/FMUParser PreProcess/ParametricPreProcessor PreProcess/IDFVersionUpdater\n#   Remove the broken symlinks\nRUN cd /usr/local/bin \\\n && find -L . -type l -delete\n#   Add in the test files\n#  ADD test /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run\n#  RUN cp /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/Energy+.idd \\\n#          /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run/\n#   Add a symbolink to Energy+.idd\nRUN [\"ln\", \"-s\", \"/usr/local/EnergyPlus-8-9-0/Energy+.idd\", \"/usr/local/Energy+.idd\"]\nVOLUME /var/simdata\nWORKDIR /var/simdata\nCMD [\"/bin/bash\"]\n#  #####################\n#   MPCPy Docker\n#  #####################\nENV ROOT_DIR=\"/usr/local\"\nUSER root\nRUN apt-get update \\\n && apt-get install --no-install-recommends libgeos-dev=3.11.1-1 git=1:2.39.2-1ubuntu1 -y\nUSER developer\nWORKDIR $HOME\nRUN pip install pandas==0.20.3 python-dateutil==2.6.1 pytz==2017.2 scikit-learn==0.18.2 sphinx==1.6.3 numpydoc==0.7.0 tzwhere==2.3 --user\nRUN mkdir git \\\n && cd git \\\n && mkdir mpcpy \\\n && cd mpcpy \\\n && git clone https://github.com/lbl-srg/MPCPy \\\n && cd .. \\\n && mkdir estimationpy-ka \\\n && cd estimationpy-ka \\\n && git clone https://github.com/krzysztofarendt/EstimationPy-KA \\\n && cd .. \\\n && mkdir buildings \\\n && cd buildings \\\n && git clone https://github.com/lbl-srg/modelica-buildings.git\nWORKDIR $ROOT_DIR\nENV JMODELICA_HOME=\"$ROOT_DIR/JModelica\"\nENV IPOPT_HOME=\"$ROOT_DIR/Ipopt-3.12.4\"\nENV SUNDIALS_HOME=\"$JMODELICA_HOME/ThirdParty/Sundials\"\nENV SEPARATE_PROCESS_JVM=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV PYTHONPATH=\"$PYTHONPATH:$HOME/git/estimationpy-ka/EstimationPy-KA:$HOME/git/mpcpy/MPCPy:$JMODELICA_HOME/Python:$JMODELICA_HOME/Python/pymodelica\"\nENV MODELICAPATH=\"$MODELICAPATH:$HOME/git/buildings/modelica-buildings\"\n#  #####################\n#   Estimation Docker\n#  #####################\nUSER root\nRUN apt-get update \\\n && apt-get install --no-install-recommends libgeos-dev=3.11.1-1 git=1:2.39.2-1ubuntu1 -y\nRUN pip install gitpython==3.1.31\n#  WORKDIR $HOME\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu-1604_jmodelica_trunk\n# #####################\n#  EnergyPlus Docker\n# #####################\nUSER root\nMAINTAINER xxx\n#  This is not ideal. The tarballs are not named nicely and EnergyPlus versioning is strange\nENV ENERGYPLUS_VERSION=\"8.9.0\"\nENV ENERGYPLUS_TAG=\"v8.9.0\"\nENV ENERGYPLUS_SHA=\"40101eaafd\"\n#  This should be x.y.z, but EnergyPlus convention is x-y-z\nENV ENERGYPLUS_INSTALL_VERSION=\"8-9-0\"\n#  Downloading from Github\n#  e.g. https://github.com/NREL/EnergyPlus/releases/download/v8.9.0/EnergyPlus-8.9.0-40101eaafd-Linux-x86_64.sh\nENV ENERGYPLUS_DOWNLOAD_BASE_URL=\"https://github.com/NREL/EnergyPlus/releases/download/$ENERGYPLUS_TAG\"\nENV ENERGYPLUS_DOWNLOAD_FILENAME=\"EnergyPlus-$ENERGYPLUS_VERSION-$ENERGYPLUS_SHA-Linux-x86_64.sh\"\nENV ENERGYPLUS_DOWNLOAD_URL=\"$ENERGYPLUS_DOWNLOAD_BASE_URL/$ENERGYPLUS_DOWNLOAD_FILENAME\"\n#  Collapse the update of packages, download and installation into one command\n#  to make the container smaller & remove a bunch of the auxiliary apps/files\n#  that are not needed in the container\nRUN apt-get update \\\n && apt-get install ca-certificates curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO $ENERGYPLUS_DOWNLOAD_URL \\\n && chmod +x $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && echo \"y\\r\" | ./$ENERGYPLUS_DOWNLOAD_FILENAME \\\n && rm $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && cd /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION \\\n && rm -rf DataSets Documentation ExampleFiles WeatherData MacroDataSets PostProcess/convertESOMTRpgm PostProcess/EP-Compare PreProcess/FMUParser PreProcess/ParametricPreProcessor PreProcess/IDFVersionUpdater\n#  Remove the broken symlinks\nRUN cd /usr/local/bin \\\n && find -L . -type l -delete\n#  Add in the test files\n# ADD test /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run\n# RUN cp /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/Energy+.idd \\\n#         /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run/\n#  Add a symbolink to Energy+.idd\nRUN [\"ln\", \"-s\", \"/usr/local/EnergyPlus-8-9-0/Energy+.idd\", \"/usr/local/Energy+.idd\"]\nVOLUME /var/simdata\nWORKDIR /var/simdata\nCMD [\"/bin/bash\"]\n# #####################\n#  MPCPy Docker\n# #####################\nENV ROOT_DIR=\"/usr/local\"\nUSER root\nRUN apt-get update \\\n && apt-get install libgeos-dev git -y\nUSER developer\nWORKDIR $HOME\nRUN pip install pandas==0.20.3 python-dateutil==2.6.1 pytz==2017.2 scikit-learn==0.18.2 sphinx==1.6.3 numpydoc==0.7.0 tzwhere==2.3 --user\nRUN mkdir git \\\n && cd git \\\n && mkdir mpcpy \\\n && cd mpcpy \\\n && git clone https://github.com/lbl-srg/MPCPy \\\n && cd .. \\\n && mkdir estimationpy-ka \\\n && cd estimationpy-ka \\\n && git clone https://github.com/krzysztofarendt/EstimationPy-KA \\\n && cd .. \\\n && mkdir buildings \\\n && cd buildings \\\n && git clone https://github.com/lbl-srg/modelica-buildings.git\nWORKDIR $ROOT_DIR\nENV JMODELICA_HOME=\"$ROOT_DIR/JModelica\"\nENV IPOPT_HOME=\"$ROOT_DIR/Ipopt-3.12.4\"\nENV SUNDIALS_HOME=\"$JMODELICA_HOME/ThirdParty/Sundials\"\nENV SEPARATE_PROCESS_JVM=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV PYTHONPATH=\"$PYTHONPATH:$HOME/git/estimationpy-ka/EstimationPy-KA:$HOME/git/mpcpy/MPCPy:$JMODELICA_HOME/Python:$JMODELICA_HOME/Python/pymodelica\"\nENV MODELICAPATH=\"$MODELICAPATH:$HOME/git/buildings/modelica-buildings\"\n# #####################\n#  Estimation Docker\n# #####################\nUSER root\nRUN apt-get update \\\n && apt-get install libgeos-dev git -y\nRUN pip install gitpython\n# WORKDIR $HOME\n","injectedSmells":[],"originalDockerfileHash":"695886991935474f148e3f5e6ba7978f","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu-1604_jmodelica_trunk\n#  #####################\n#   EnergyPlus Docker\n#  #####################\nUSER root\nMAINTAINER xxx\n#   This is not ideal. The tarballs are not named nicely and EnergyPlus versioning is strange\nENV ENERGYPLUS_VERSION=\"8.9.0\"\nENV ENERGYPLUS_TAG=\"v8.9.0\"\nENV ENERGYPLUS_SHA=\"40101eaafd\"\n#   This should be x.y.z, but EnergyPlus convention is x-y-z\nENV ENERGYPLUS_INSTALL_VERSION=\"8-9-0\"\n#   Downloading from Github\n#   e.g. https://github.com/NREL/EnergyPlus/releases/download/v8.9.0/EnergyPlus-8.9.0-40101eaafd-Linux-x86_64.sh\nENV ENERGYPLUS_DOWNLOAD_BASE_URL=\"https://github.com/NREL/EnergyPlus/releases/download/$ENERGYPLUS_TAG\"\nENV ENERGYPLUS_DOWNLOAD_FILENAME=\"EnergyPlus-$ENERGYPLUS_VERSION-$ENERGYPLUS_SHA-Linux-x86_64.sh\"\nENV ENERGYPLUS_DOWNLOAD_URL=\"$ENERGYPLUS_DOWNLOAD_BASE_URL/$ENERGYPLUS_DOWNLOAD_FILENAME\"\n#   Collapse the update of packages, download and installation into one command\n#   to make the container smaller & remove a bunch of the auxiliary apps/files\n#   that are not needed in the container\nRUN apt-get update \\\n && apt-get install ca-certificates curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO $ENERGYPLUS_DOWNLOAD_URL \\\n && chmod +x $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && echo \"y\\r\" | ./$ENERGYPLUS_DOWNLOAD_FILENAME \\\n && rm $ENERGYPLUS_DOWNLOAD_FILENAME \\\n && cd /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION \\\n && rm -rf DataSets Documentation ExampleFiles WeatherData MacroDataSets PostProcess/convertESOMTRpgm PostProcess/EP-Compare PreProcess/FMUParser PreProcess/ParametricPreProcessor PreProcess/IDFVersionUpdater\n#   Remove the broken symlinks\nRUN cd /usr/local/bin \\\n && find -L . -type l -delete\n#   Add in the test files\n#  ADD test /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run\n#  RUN cp /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/Energy+.idd \\\n#          /usr/local/EnergyPlus-$ENERGYPLUS_INSTALL_VERSION/test_run/\n#   Add a symbolink to Energy+.idd\nRUN [\"ln\", \"-s\", \"/usr/local/EnergyPlus-8-9-0/Energy+.idd\", \"/usr/local/Energy+.idd\"]\nVOLUME /var/simdata\nWORKDIR /var/simdata\nCMD [\"/bin/bash\"]\n#  #####################\n#   MPCPy Docker\n#  #####################\nENV ROOT_DIR=\"/usr/local\"\nUSER root\nRUN apt-get update \\\n && apt-get install libgeos-dev git -y\nUSER developer\nWORKDIR $HOME\nRUN pip install pandas==0.20.3 python-dateutil==2.6.1 pytz==2017.2 scikit-learn==0.18.2 sphinx==1.6.3 numpydoc==0.7.0 tzwhere==2.3 --user\nRUN mkdir git \\\n && cd git \\\n && mkdir mpcpy \\\n && cd mpcpy \\\n && git clone https://github.com/lbl-srg/MPCPy \\\n && cd .. \\\n && mkdir estimationpy-ka \\\n && cd estimationpy-ka \\\n && git clone https://github.com/krzysztofarendt/EstimationPy-KA \\\n && cd .. \\\n && mkdir buildings \\\n && cd buildings \\\n && git clone https://github.com/lbl-srg/modelica-buildings.git\nWORKDIR $ROOT_DIR\nENV JMODELICA_HOME=\"$ROOT_DIR/JModelica\"\nENV IPOPT_HOME=\"$ROOT_DIR/Ipopt-3.12.4\"\nENV SUNDIALS_HOME=\"$JMODELICA_HOME/ThirdParty/Sundials\"\nENV SEPARATE_PROCESS_JVM=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nENV PYTHONPATH=\"$PYTHONPATH:$HOME/git/estimationpy-ka/EstimationPy-KA:$HOME/git/mpcpy/MPCPy:$JMODELICA_HOME/Python:$JMODELICA_HOME/Python/pymodelica\"\nENV MODELICAPATH=\"$MODELICAPATH:$HOME/git/buildings/modelica-buildings\"\n#  #####################\n#   Estimation Docker\n#  #####################\nUSER root\nRUN apt-get update \\\n && apt-get install libgeos-dev git -y\nRUN pip install gitpython\n#  WORKDIR $HOME\n","originalDockerfileUglifiedHash":"da0530e56dc5145c0fa8259408079b60","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7136844aff73d14f95b6d6b51a6e27175cc7bbe2.dockerfile"}