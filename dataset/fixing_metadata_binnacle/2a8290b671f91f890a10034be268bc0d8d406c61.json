{"seed":3224435558,"processedDockerfileHash":"1e7c4f3868daf696de498c9806d21674","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile for purkinje development\nFROM ubuntu:16.04\nMAINTAINER Bernhard Biskup <bbiskup@gmx.de>\n#   Install dependencies\nRUN echo 'Running installation'\nWORKDIR /code\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NODE_DIR=\"node-v6.2.0-linux-x64\"\nENV NODE_ARCHIVE=\"$NODE_DIR.tar.xz\"\nENV PATH=\"/opt/node/bin:$PATH\"\nRUN apt-get update -q -y \\\n && apt-get install --no-install-recommends wget=1.17.1-1ubuntu1.5 -y\nRUN echo 1 > cache_bust.txt\n#   Install Google Chrome APT repository\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list\nRUN apt-get update -q -y \\\n && apt-get install --no-install-recommends dbus-x11=1.10.6-1ubuntu3.6 default-jre-headless=2:1.8-56ubuntu2 firefox=88.0+build2-0ubuntu0.16.04.1 gcc=4:5.3.1-1ubuntu1 git=1:2.7.4-0ubuntu1.10 google-chrome-stable libyaml-dev=0.1.6-3 make=4.1-6 python2.7=2.7.12-1ubuntu0~16.04.18 python2.7-dev=2.7.12-1ubuntu0~16.04.18 python3.5=3.5.2-2ubuntu0~16.04.13 python3.5-dev=3.5.2-2ubuntu0~16.04.13 software-properties-common=0.96.20.10 wget=1.17.1-1ubuntu1.5 xvfb=2:1.18.4-0ubuntu0.12 xz-utils=5.1.1alpha+20120614-2ubuntu2 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   To avoid chrome waiting for gnome keyring\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nRUN dpkg -r libfolks-eds25 gnome-keyring seahorse gcr evolution-data-server oneconf python-ubuntuone-storageprotocol ubuntu-sso-client python-ubuntu-sso-client pinentry-gnome3\n#   TODO remove git dependency when removing bower\n#   Install node.js; use most recent version to have access to latest features\nWORKDIR /opt\nRUN wget -q https://nodejs.org/dist/v6.2.0/$NODE_ARCHIVE \\\n && tar xJf $NODE_ARCHIVE \\\n && ln -s /opt/$NODE_DIR /opt/node \\\n && rm $NODE_ARCHIVE\nWORKDIR /code\nRUN node --version\nRUN npm --version\n#   make npm less noisy\nRUN npm config set loglevel warn\nRUN python2.7 --version\nRUN ln -sf /usr/bin/python2.7 /usr/bin/python\n#   Ubuntu's python-pip throws exception with requests lib\n#   see https://bugs.launchpad.net/ubuntu/+source/python-pip/+bug/1306991\nRUN wget -q https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && rm get-pip.py\nCOPY package.json /code/package.json\nCOPY bower.json /code/bower.json\nCOPY .jshintrc /code/.jshintrc\nCOPY .bowerrc /code/.bowerrc\nRUN npm install\n#   Set up Chrome webdriver for Protractor\nRUN echo 1 > cache_bust.txt\nRUN ./node_modules/protractor/bin/webdriver-manager update --standalone\nRUN npm install bower@1.8.14 -g\nRUN bower --allow-root --quiet install -F 2>&1 > bower.log\nCOPY requirements.txt /code/requirements.txt\nCOPY dev-requirements.txt /code/dev-requirements.txt\n#   Python\nRUN pip install $HOME/.pip-cache -q --upgrade -r dev-requirements.txt --cache-dir\n#   Avoid Flask freezing\n#   watchdog not compatible with gevent\n#   see https://github.com/gorakhargosh/watchdog/issues/306\nRUN pip uninstall -y watchdog\nRUN echo \"Installed Python packages:\"\nRUN pip freeze\nCOPY pytest.ini /code/pytest.ini\nCOPY tox.ini /code/tox.ini\nCOPY MANIFEST.in /code/MANIFEST.in\nCOPY setup.py /code/setup.py\nCOPY Makefile /code/Makefile\nCOPY purkinje /code/purkinje\nCOPY ./docker/purkinje*.yml /code/\nCOPY README.rst README.rst\nCOPY CHANGES.rst CHANGES.rst\nRUN pip install -e .\nRUN python setup.py sdist\nENV NODE_ARCHIVE=\"\\\"\nENV NODE_DIR=\"\\\"\nCOPY docker/purkinje.docker.yml purkinje.yml\nENTRYPOINT [\"purkinje\", \"-c\", \"purkinje.yml\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile for purkinje development\nFROM ubuntu:16.04\nMAINTAINER Bernhard Biskup <bbiskup@gmx.de>\n#  Install dependencies\nRUN echo 'Running installation'\nWORKDIR /code\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NODE_DIR=\"node-v6.2.0-linux-x64\"\nENV NODE_ARCHIVE=\"$NODE_DIR.tar.xz\"\nENV PATH=\"/opt/node/bin:$PATH\"\nRUN apt-get update -q -y \\\n && apt-get install wget -y\nRUN echo 1 > cache_bust.txt\n#  Install Google Chrome APT repository\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list\nRUN apt-get update -q -y \\\n && apt-get install dbus-x11 default-jre-headless firefox gcc git google-chrome-stable libyaml-dev make python2.7 python2.7-dev python3.5 python3.5-dev software-properties-common wget xvfb xz-utils -y \\\n && rm -rf /var/lib/apt/lists/*\n#  To avoid chrome waiting for gnome keyring\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nRUN dpkg -r libfolks-eds25 gnome-keyring seahorse gcr evolution-data-server oneconf python-ubuntuone-storageprotocol ubuntu-sso-client python-ubuntu-sso-client pinentry-gnome3\n#  TODO remove git dependency when removing bower\n#  Install node.js; use most recent version to have access to latest features\nWORKDIR /opt\nRUN wget -q https://nodejs.org/dist/v6.2.0/$NODE_ARCHIVE \\\n && tar xJf $NODE_ARCHIVE \\\n && ln -s /opt/$NODE_DIR /opt/node \\\n && rm $NODE_ARCHIVE\nWORKDIR /code\nRUN node --version\nRUN npm --version\n#  make npm less noisy\nRUN npm config set loglevel warn\nRUN python2.7 --version\nRUN ln -sf /usr/bin/python2.7 /usr/bin/python\n#  Ubuntu's python-pip throws exception with requests lib\n#  see https://bugs.launchpad.net/ubuntu/+source/python-pip/+bug/1306991\nRUN wget -q https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && rm get-pip.py\nADD package.json /code/package.json\nADD bower.json /code/bower.json\nADD .jshintrc /code/.jshintrc\nADD .bowerrc /code/.bowerrc\nRUN npm install\n#  Set up Chrome webdriver for Protractor\nRUN echo 1 > cache_bust.txt\nRUN ./node_modules/protractor/bin/webdriver-manager update --standalone\nRUN npm install bower -g\nRUN bower --allow-root --quiet install -F 2>&1 > bower.log\nADD requirements.txt /code/requirements.txt\nADD dev-requirements.txt /code/dev-requirements.txt\n#  Python\nRUN pip install $HOME/.pip-cache -q --upgrade -r dev-requirements.txt --cache-dir\n#  Avoid Flask freezing\n#  watchdog not compatible with gevent\n#  see https://github.com/gorakhargosh/watchdog/issues/306\nRUN pip uninstall -y watchdog\nRUN echo \"Installed Python packages:\"\nRUN pip freeze\nADD pytest.ini /code/pytest.ini\nADD tox.ini /code/tox.ini\nADD MANIFEST.in /code/MANIFEST.in\nADD setup.py /code/setup.py\nADD Makefile /code/Makefile\nADD purkinje /code/purkinje\nADD ./docker/purkinje*.yml /code/\nADD README.rst README.rst\nADD CHANGES.rst CHANGES.rst\nRUN pip install -e .\nRUN python setup.py sdist\nENV NODE_ARCHIVE=\"\"\\\"\"\nENV NODE_DIR=\"\"\\\"\"\nADD docker/purkinje.docker.yml purkinje.yml\nENTRYPOINT [\"purkinje\", \"-c\", \"purkinje.yml\"]\n","injectedSmells":[],"originalDockerfileHash":"284603fe1363959c664a9867c030fb66","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile for purkinje development\nFROM ubuntu:16.04\nMAINTAINER Bernhard Biskup <bbiskup@gmx.de>\n#   Install dependencies\nRUN echo 'Running installation'\nWORKDIR /code\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV NODE_DIR=\"node-v6.2.0-linux-x64\"\nENV NODE_ARCHIVE=\"$NODE_DIR.tar.xz\"\nENV PATH=\"/opt/node/bin:$PATH\"\nRUN apt-get update -q -y \\\n && apt-get install wget -y\nRUN echo 1 > cache_bust.txt\n#   Install Google Chrome APT repository\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list\nRUN apt-get update -q -y \\\n && apt-get install dbus-x11 default-jre-headless firefox gcc git google-chrome-stable libyaml-dev make python2.7 python2.7-dev python3.5 python3.5-dev software-properties-common wget xvfb xz-utils -y \\\n && rm -rf /var/lib/apt/lists/*\n#   To avoid chrome waiting for gnome keyring\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nRUN dpkg -r libfolks-eds25 gnome-keyring seahorse gcr evolution-data-server oneconf python-ubuntuone-storageprotocol ubuntu-sso-client python-ubuntu-sso-client pinentry-gnome3\n#   TODO remove git dependency when removing bower\n#   Install node.js; use most recent version to have access to latest features\nWORKDIR /opt\nRUN wget -q https://nodejs.org/dist/v6.2.0/$NODE_ARCHIVE \\\n && tar xJf $NODE_ARCHIVE \\\n && ln -s /opt/$NODE_DIR /opt/node \\\n && rm $NODE_ARCHIVE\nWORKDIR /code\nRUN node --version\nRUN npm --version\n#   make npm less noisy\nRUN npm config set loglevel warn\nRUN python2.7 --version\nRUN ln -sf /usr/bin/python2.7 /usr/bin/python\n#   Ubuntu's python-pip throws exception with requests lib\n#   see https://bugs.launchpad.net/ubuntu/+source/python-pip/+bug/1306991\nRUN wget -q https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && rm get-pip.py\nADD package.json /code/package.json\nADD bower.json /code/bower.json\nADD .jshintrc /code/.jshintrc\nADD .bowerrc /code/.bowerrc\nRUN npm install\n#   Set up Chrome webdriver for Protractor\nRUN echo 1 > cache_bust.txt\nRUN ./node_modules/protractor/bin/webdriver-manager update --standalone\nRUN npm install bower -g\nRUN bower --allow-root --quiet install -F 2>&1 > bower.log\nADD requirements.txt /code/requirements.txt\nADD dev-requirements.txt /code/dev-requirements.txt\n#   Python\nRUN pip install $HOME/.pip-cache -q --upgrade -r dev-requirements.txt --cache-dir\n#   Avoid Flask freezing\n#   watchdog not compatible with gevent\n#   see https://github.com/gorakhargosh/watchdog/issues/306\nRUN pip uninstall -y watchdog\nRUN echo \"Installed Python packages:\"\nRUN pip freeze\nADD pytest.ini /code/pytest.ini\nADD tox.ini /code/tox.ini\nADD MANIFEST.in /code/MANIFEST.in\nADD setup.py /code/setup.py\nADD Makefile /code/Makefile\nADD purkinje /code/purkinje\nADD ./docker/purkinje*.yml /code/\nADD README.rst README.rst\nADD CHANGES.rst CHANGES.rst\nRUN pip install -e .\nRUN python setup.py sdist\nENV NODE_ARCHIVE=\"\\\"\nENV NODE_DIR=\"\\\"\nADD docker/purkinje.docker.yml purkinje.yml\nENTRYPOINT [\"purkinje\", \"-c\", \"purkinje.yml\"]\n","originalDockerfileUglifiedHash":"f2e53720e8168aedcdaabe52aa804d79","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2a8290b671f91f890a10034be268bc0d8d406c61.dockerfile"}