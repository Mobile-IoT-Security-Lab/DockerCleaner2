{"seed":4114121371,"processedDockerfileHash":"86dde5ddcc4be78dfc1431d32cbccce1","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends iptables=1.4.21-1ubuntu1 php5-apcu=4.0.2-2build1 php5-cli=5.5.9+dfsg-1ubuntu4.29 php5-curl=5.5.9+dfsg-1ubuntu4.29 php5-fpm=5.5.9+dfsg-1ubuntu4.29 php5-gd=5.5.9+dfsg-1ubuntu4.29 php5-geoip=1.0.8-5build1 php5-imagick=3.1.2-1build1 php5-imap=5.4.6-0ubuntu5.1 php5-intl=5.5.9+dfsg-1ubuntu4.29 php5-json=1.3.2-2build1 php5-ldap=5.5.9+dfsg-1ubuntu4.29 php5-mcrypt=5.4.6-0ubuntu5 php5-memcache=3.0.8-4build1 php5-memcached=2.1.0-6build1 php5-mysqlnd=5.5.9+dfsg-1ubuntu4.29 php5-pgsql=5.5.9+dfsg-1ubuntu4.29 php5-pspell=5.5.9+dfsg-1ubuntu4.29 php5-readline=5.5.9+dfsg-1ubuntu4.29 php5-recode=5.5.9+dfsg-1ubuntu4.29 php5-redis=2.2.4-1build2 php5-sqlite=5.5.9+dfsg-1ubuntu4.29 php5-xdebug=2.2.3-2build1 php5-xmlrpc=5.5.9+dfsg-1ubuntu4.29 php5-xsl=5.5.9+dfsg-1ubuntu4.29 libssh2-php=0.12-1ubuntu0.1 -y \\\n && php5enmod imap mcrypt \\\n && apt-get install --no-install-recommends build-essential=11.6ubuntu6 pkg-config=0.26-1ubuntu4 libssl-dev=1.0.1f-1ubuntu2.27 php5-dev=5.5.9+dfsg-1ubuntu4.29 -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install xhprof-beta mongo \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && echo \"extension=mongo.so\" > /etc/php5/mods-available/mongo.ini \\\n && php5enmod mongo \\\n && apt-get purge -y build-essential pkg-config libssl-dev php5-dev \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#  Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install -y iptables php5-apcu php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-intl php5-json php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mysqlnd php5-pgsql php5-pspell php5-readline php5-recode php5-redis php5-sqlite php5-xdebug php5-xmlrpc php5-xsl libssh2-php \\\n && php5enmod imap mcrypt \\\n && apt-get install build-essential pkg-config libssl-dev php5-dev -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install xhprof-beta mongo \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && echo \"extension=mongo.so\" > /etc/php5/mods-available/mongo.ini \\\n && php5enmod mongo \\\n && apt-get purge -y build-essential pkg-config libssl-dev php5-dev \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#  For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"ac7fbfed46b9fd7c13a584aef538829b","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install iptables php5-apcu php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-intl php5-json php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mysqlnd php5-pgsql php5-pspell php5-readline php5-recode php5-redis php5-sqlite php5-xdebug php5-xmlrpc php5-xsl libssh2-php -y \\\n && php5enmod imap mcrypt \\\n && apt-get install build-essential pkg-config libssl-dev php5-dev -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install xhprof-beta mongo \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && echo \"extension=mongo.so\" > /etc/php5/mods-available/mongo.ini \\\n && php5enmod mongo \\\n && apt-get purge -y build-essential pkg-config libssl-dev php5-dev \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","originalDockerfileUglifiedHash":"538332bcf273da1ffbd5bc911be63f0b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7beac4173021a1b6b51847e3aeed734d6b5abf76.dockerfile"}