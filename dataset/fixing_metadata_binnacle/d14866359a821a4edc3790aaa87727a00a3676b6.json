{"seed":3298697027,"processedDockerfileHash":"8b064c7e8677e75879b8fa91d98b96aa","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:8.2\nMAINTAINER Rob Sherwood <rob.sherwood@bigswitch.com>\n#   First round of dependences\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt apt-cacher-ng apt-file apt-utils autoconf automake autotools-dev bash-completion bc bind9-host binfmt-support binfmt-support bison bsdmainutils build-essential ccache cdbs cpio debhelper debhelper debhelper device-tree-compiler devscripts devscripts dialog dosfstools dpkg-sig emacs file flex gcc genisoimage git ifupdown iproute iputils-ping isolinux kmod less libc6-dev libcurl4-nss-dev libdouble-conversion-dev libedit-dev libevent-dev libgoogle-glog-dev libi2c-dev libkrb5-dev libnuma-dev libsasl2-dev libsnappy-dev libpam-dev libsnmp-dev libssl-dev libstdc++6=4.9.2-10 libtool locales lsof make mingetty mtd-utils mtools multistrap nano ncurses-dev netbase net-tools nfs-common openssh-server pkg-config pkg-config procps psmisc python python-debian python-dnspython python-yaml qemu qemu-user-static realpath realpath rsyslog ruby ruby-dev rubygems screen squashfs-tools sshpass sudo syslinux-utils traceroute u-boot-tools vim-tiny wget zile zip -y\nRUN gem install fpm --version 1.3.3\n#   Now the unstable deps and cross compilers\n#   NOTE 1: texinfo 5.x and above breaks the buildroot build, thus the specific 4.x version\n#   NOTE 2: this cp is needed to fix an i2c compile problem\n#   NOTE 3: the /etc/apt/apt.conf.d/docker-* options break multistrap so\n#         that it can't find.  Essential packages or resolve apt.opennetlinux.org\n#   NOTE 4: the default qemu-user-static (1.2) dies with a segfault in\n#         `make onl-powerpc`; use 1.4 instead\nRUN echo 'APT::Get::AllowUnauthenticated \"true\";\\nAPT::Get::Assume-Yes \"true\";' | tee /etc/apt/apt.conf.d/99opennetworklinux \\\n && echo \"deb http://apt.opennetlinux.org/debian/ unstable main\" | tee /etc/apt/sources.list.d/opennetlinux.list \\\n && curl http://emdebian.org/tools/debian/emdebian-toolchain-archive.key | sudo apt-key add - \\\n && echo \"deb http://emdebian.org/tools/debian/ jessie main\" | tee /etc/apt/sources.list.d/embedian-jessie.list \\\n && dpkg --add-architecture powerpc \\\n && apt-get update \\\n && apt-get install --no-install-recommends binutils-powerpc-linux-gnu libc6-dev-powerpc-cross crossbuild-essential-powerpc cross-gcc-dev folly fbthrift wangle libgomp1-powerpc-cross -y \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/t/texinfo/texinfo_4.13a.dfsg.1-10_amd64.deb\" \\\n && dpkg -i texinfo_4.13a.dfsg.1-10_amd64.deb \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/e/emdebian-crush/xapt_2.2.19_all.deb\" \\\n && dpkg -i xapt_2.2.19_all.deb \\\n && xapt -a powerpc libedit-dev ncurses-dev libsensors4-dev libwrap0-dev libssl-dev libsnmp-dev\n#      update-alternatives --install /usr/bin/powerpc-linux-gnu-gcc powerpc-linux-gnu-gcc 10 &&\n#\n#   The i2c-dev.h user/kernel header conflict is a nightmare.\n#\n#   The ONLP implementation expects a new file called <linux/i2c-device.h> to be in place which contains the correct user-space driver definitions.\n#   This should be manually populated here after the toolchains have been installed.\n#\nRUN cp /usr/include/linux/i2c-dev.h /usr/include/linux/i2c-devices.h \\\n && cp /usr/include/linux/i2c-dev.h /usr/powerpc-linux-gnu/include/linux/i2c-devices.h\nRUN rm /etc/apt/apt.conf.d/docker-* \\\n && wget \"https://launchpad.net/ubuntu/+source/qemu/1.4.0+dfsg-1expubuntu3/+build/4336762/+files/qemu-user-static_1.4.0%2Bdfsg-1expubuntu3_amd64.deb\" \\\n && dpkg -i qemu-user-static_1.4.0+dfsg-1expubuntu3_amd64.deb\n#\n#   Copy the docker shell init script to /bin\n#\nCOPY docker_shell /bin/docker_shell\nCOPY container-id /bin/container-id\nRUN apt-get install --no-install-recommends libstdc++6=4.9.2-10 -y --force-yes\nRUN apt-get install --no-install-recommends libboost-all-dev cmake\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:8.2\nMAINTAINER Rob Sherwood <rob.sherwood@bigswitch.com>\n#  First round of dependences\nRUN apt-get update \\\n && apt-get install apt apt-cacher-ng apt-file apt-utils autoconf automake autotools-dev bash-completion bc bind9-host binfmt-support binfmt-support bison bsdmainutils build-essential ccache cdbs cpio debhelper debhelper debhelper device-tree-compiler devscripts devscripts dialog dosfstools dpkg-sig emacs file flex gcc genisoimage git ifupdown iproute iputils-ping isolinux kmod less libc6-dev libcurl4-nss-dev libdouble-conversion-dev libedit-dev libevent-dev libgoogle-glog-dev libi2c-dev libkrb5-dev libnuma-dev libsasl2-dev libsnappy-dev libpam-dev libsnmp-dev libssl-dev libstdc++6=4.9.2-10 libtool locales lsof make mingetty mtd-utils mtools multistrap nano ncurses-dev netbase net-tools nfs-common openssh-server pkg-config pkg-config procps psmisc python python-debian python-dnspython python-yaml qemu qemu-user-static realpath realpath rsyslog ruby ruby-dev rubygems screen squashfs-tools sshpass sudo syslinux-utils traceroute u-boot-tools vim-tiny wget zile zip -y\nRUN gem install fpm --version 1.3.3\n#  Now the unstable deps and cross compilers\n#  NOTE 1: texinfo 5.x and above breaks the buildroot build, thus the specific 4.x version\n#  NOTE 2: this cp is needed to fix an i2c compile problem\n#  NOTE 3: the /etc/apt/apt.conf.d/docker-* options break multistrap so\n#        that it can't find.  Essential packages or resolve apt.opennetlinux.org\n#  NOTE 4: the default qemu-user-static (1.2) dies with a segfault in\n#        `make onl-powerpc`; use 1.4 instead\nRUN echo 'APT::Get::AllowUnauthenticated \"true\";\\nAPT::Get::Assume-Yes \"true\";' | tee /etc/apt/apt.conf.d/99opennetworklinux \\\n && echo \"deb http://apt.opennetlinux.org/debian/ unstable main\" | tee /etc/apt/sources.list.d/opennetlinux.list \\\n && curl http://emdebian.org/tools/debian/emdebian-toolchain-archive.key | sudo apt-key add - \\\n && echo \"deb http://emdebian.org/tools/debian/ jessie main\" | tee /etc/apt/sources.list.d/embedian-jessie.list \\\n && dpkg --add-architecture powerpc \\\n && apt-get update \\\n && apt-get install binutils-powerpc-linux-gnu libc6-dev-powerpc-cross crossbuild-essential-powerpc cross-gcc-dev folly fbthrift wangle libgomp1-powerpc-cross -y \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/t/texinfo/texinfo_4.13a.dfsg.1-10_amd64.deb\" \\\n && dpkg -i texinfo_4.13a.dfsg.1-10_amd64.deb \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/e/emdebian-crush/xapt_2.2.19_all.deb\" \\\n && dpkg -i xapt_2.2.19_all.deb \\\n && xapt -a powerpc libedit-dev ncurses-dev libsensors4-dev libwrap0-dev libssl-dev libsnmp-dev\n#     update-alternatives --install /usr/bin/powerpc-linux-gnu-gcc powerpc-linux-gnu-gcc 10 &&\n#\n#  The i2c-dev.h user/kernel header conflict is a nightmare.\n#\n#  The ONLP implementation expects a new file called <linux/i2c-device.h> to be in place which contains the correct user-space driver definitions.\n#  This should be manually populated here after the toolchains have been installed.\n#\nRUN cp /usr/include/linux/i2c-dev.h /usr/include/linux/i2c-devices.h \\\n && cp /usr/include/linux/i2c-dev.h /usr/powerpc-linux-gnu/include/linux/i2c-devices.h\nRUN rm /etc/apt/apt.conf.d/docker-* \\\n && wget \"https://launchpad.net/ubuntu/+source/qemu/1.4.0+dfsg-1expubuntu3/+build/4336762/+files/qemu-user-static_1.4.0%2Bdfsg-1expubuntu3_amd64.deb\" \\\n && dpkg -i qemu-user-static_1.4.0+dfsg-1expubuntu3_amd64.deb\n#\n#  Copy the docker shell init script to /bin\n#\nCOPY docker_shell /bin/docker_shell\nCOPY container-id /bin/container-id\nRUN apt-get install libstdc++6=4.9.2-10 -y --force-yes\nRUN apt-get install libboost-all-dev cmake\n","injectedSmells":[],"originalDockerfileHash":"547bce40de6eab7a33f285f1c49e1f43","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:8.2\nMAINTAINER Rob Sherwood <rob.sherwood@bigswitch.com>\n#   First round of dependences\nRUN apt-get update \\\n && apt-get install apt apt-cacher-ng apt-file apt-utils autoconf automake autotools-dev bash-completion bc bind9-host binfmt-support binfmt-support bison bsdmainutils build-essential ccache cdbs cpio debhelper debhelper debhelper device-tree-compiler devscripts devscripts dialog dosfstools dpkg-sig emacs file flex gcc genisoimage git ifupdown iproute iputils-ping isolinux kmod less libc6-dev libcurl4-nss-dev libdouble-conversion-dev libedit-dev libevent-dev libgoogle-glog-dev libi2c-dev libkrb5-dev libnuma-dev libsasl2-dev libsnappy-dev libpam-dev libsnmp-dev libssl-dev libstdc++6=4.9.2-10 libtool locales lsof make mingetty mtd-utils mtools multistrap nano ncurses-dev netbase net-tools nfs-common openssh-server pkg-config pkg-config procps psmisc python python-debian python-dnspython python-yaml qemu qemu-user-static realpath realpath rsyslog ruby ruby-dev rubygems screen squashfs-tools sshpass sudo syslinux-utils traceroute u-boot-tools vim-tiny wget zile zip -y\nRUN gem install fpm --version 1.3.3\n#   Now the unstable deps and cross compilers\n#   NOTE 1: texinfo 5.x and above breaks the buildroot build, thus the specific 4.x version\n#   NOTE 2: this cp is needed to fix an i2c compile problem\n#   NOTE 3: the /etc/apt/apt.conf.d/docker-* options break multistrap so\n#         that it can't find.  Essential packages or resolve apt.opennetlinux.org\n#   NOTE 4: the default qemu-user-static (1.2) dies with a segfault in\n#         `make onl-powerpc`; use 1.4 instead\nRUN echo 'APT::Get::AllowUnauthenticated \"true\";\\nAPT::Get::Assume-Yes \"true\";' | tee /etc/apt/apt.conf.d/99opennetworklinux \\\n && echo \"deb http://apt.opennetlinux.org/debian/ unstable main\" | tee /etc/apt/sources.list.d/opennetlinux.list \\\n && curl http://emdebian.org/tools/debian/emdebian-toolchain-archive.key | sudo apt-key add - \\\n && echo \"deb http://emdebian.org/tools/debian/ jessie main\" | tee /etc/apt/sources.list.d/embedian-jessie.list \\\n && dpkg --add-architecture powerpc \\\n && apt-get update \\\n && apt-get install binutils-powerpc-linux-gnu libc6-dev-powerpc-cross crossbuild-essential-powerpc cross-gcc-dev folly fbthrift wangle libgomp1-powerpc-cross -y \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/t/texinfo/texinfo_4.13a.dfsg.1-10_amd64.deb\" \\\n && dpkg -i texinfo_4.13a.dfsg.1-10_amd64.deb \\\n && wget \"http://ftp.us.debian.org/debian/pool/main/e/emdebian-crush/xapt_2.2.19_all.deb\" \\\n && dpkg -i xapt_2.2.19_all.deb \\\n && xapt -a powerpc libedit-dev ncurses-dev libsensors4-dev libwrap0-dev libssl-dev libsnmp-dev\n#      update-alternatives --install /usr/bin/powerpc-linux-gnu-gcc powerpc-linux-gnu-gcc 10 &&\n#\n#   The i2c-dev.h user/kernel header conflict is a nightmare.\n#\n#   The ONLP implementation expects a new file called <linux/i2c-device.h> to be in place which contains the correct user-space driver definitions.\n#   This should be manually populated here after the toolchains have been installed.\n#\nRUN cp /usr/include/linux/i2c-dev.h /usr/include/linux/i2c-devices.h \\\n && cp /usr/include/linux/i2c-dev.h /usr/powerpc-linux-gnu/include/linux/i2c-devices.h\nRUN rm /etc/apt/apt.conf.d/docker-* \\\n && wget \"https://launchpad.net/ubuntu/+source/qemu/1.4.0+dfsg-1expubuntu3/+build/4336762/+files/qemu-user-static_1.4.0%2Bdfsg-1expubuntu3_amd64.deb\" \\\n && dpkg -i qemu-user-static_1.4.0+dfsg-1expubuntu3_amd64.deb\n#\n#   Copy the docker shell init script to /bin\n#\nCOPY docker_shell /bin/docker_shell\nCOPY container-id /bin/container-id\nRUN apt-get install libstdc++6=4.9.2-10 -y --force-yes\nRUN apt-get install libboost-all-dev cmake\n","originalDockerfileUglifiedHash":"72b803685b699c916b4492586428bc66","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d14866359a821a4edc3790aaa87727a00a3676b6.dockerfile"}