{"seed":2848945552,"processedDockerfileHash":"7337d7bbc521973aab3cb7092adfee0e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   openhab image\n#\n#   ------------------------------------------------------------------------------\n#                 NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#                         PLEASE DO NOT EDIT IT DIRECTLY.\n#   ------------------------------------------------------------------------------\n#\nFROM multiarch/debian-debootstrap:armhf-stretch\n#   Set download urls\nENV JAVA_URL=\"https://cdn.azul.com/zulu-embedded/bin/zulu8.33.0.134-jdk1.8.0_192-linux_aarch32hf.tar.gz\" \\\n    OPENHAB_URL=\"https://bintray.com/openhab/mvn/download_file?file_path=org%2Fopenhab%2Fdistro%2Fopenhab%2F2.1.0%2Fopenhab-2.1.0.zip\" \\\n    OPENHAB_VERSION=\"2.1.0\"\n#   Set variables and locales\nENV APPDIR=\"/openhab\" \\\n    CRYPTO_POLICY=\"limited\" \\\n    EXTRA_JAVA_OPTS=\"\" \\\n    KARAF_EXEC=\"exec\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    OPENHAB_HTTP_PORT=\"8080\" \\\n    OPENHAB_HTTPS_PORT=\"8443\"\n#   Set arguments on build\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\n#   Basic build-time metadata as defined at http://label-schema.org\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"EPL-2.0\" \\\n      org.label-schema.name=\"openHAB\" \\\n      org.label-schema.vendor=\"openHAB Foundation e.V.\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.description=\"An open source, technology agnostic home automation platform\" \\\n      org.label-schema.url=\"https://www.openhab.com/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/openhab/openhab-docker.git\" \\\n      maintainer=\"openHAB <info@openhabfoundation.org>\"\n#   Install basepackages\nRUN : \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y arping ca-certificates curl fontconfig gosu libpcap-dev locales locales-all netbase unzip wget zip \\\n && chmod u+s /usr/sbin/arping \\\n && ln -s -f /bin/true /usr/bin/chfn \\\n && sed -i 's#stretch#buster#g' /etc/apt/sources.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y tini \\\n && sed -i 's#buster#stretch#g' /etc/apt/sources.list \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Install java\nENV JAVA_HOME=\"/usr/lib/java-8\"\nRUN wget -nv -O /tmp/java.tar.gz \"${JAVA_URL}\" \\\n && mkdir \"${JAVA_HOME}\" \\\n && tar --exclude='demo' --exclude='sample' --exclude='src.zip' -xf /tmp/java.tar.gz --strip-components=1 -C \"${JAVA_HOME}\" \\\n && rm /tmp/java.tar.gz \\\n && update-alternatives --install /usr/bin/java java \"${JAVA_HOME}/bin/java\" 50 \\\n && update-alternatives --install /usr/bin/javac javac \"${JAVA_HOME}/bin/javac\" 50\n#   Install openHAB\n#   Set permissions for openHAB. Export TERM variable. See issue #30 for details!\nRUN wget -nv -O /tmp/openhab.zip \"${OPENHAB_URL}\" \\\n && unzip -q /tmp/openhab.zip -d \"${APPDIR}\" -x \"*.bat\" \\\n && rm /tmp/openhab.zip \\\n && mkdir -p \"${APPDIR}/userdata/logs\" \\\n && touch \"${APPDIR}/userdata/logs/openhab.log\" \\\n && cp -a \"${APPDIR}/userdata\" \"${APPDIR}/userdata.dist\" \\\n && cp -a \"${APPDIR}/conf\" \"${APPDIR}/conf.dist\" \\\n && echo 'export TERM=${TERM:=dumb}' | tee -a ~/.bashrc\n#   Expose volume with configuration and userdata dir\nVOLUME ${APPDIR}/conf ${APPDIR}/userdata ${APPDIR}/addons\n#   Expose HTTP, HTTPS and Console ports\nEXPOSE 8080/tcp 8443/tcp 8101/tcp\n#   Set working directory and entrypoint\nWORKDIR ${APPDIR}\nCOPY entrypoint.sh /\nRUN chmod +x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n#   Execute command\nCMD [\"gosu\", \"openhab\", \"tini\", \"-s\", \"./start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  openhab image\n#\n#  ------------------------------------------------------------------------------\n#                NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#                        PLEASE DO NOT EDIT IT DIRECTLY.\n#  ------------------------------------------------------------------------------\n#\nFROM multiarch/debian-debootstrap:armhf-stretch\n#  Set download urls\nENV JAVA_URL=\"https://cdn.azul.com/zulu-embedded/bin/zulu8.33.0.134-jdk1.8.0_192-linux_aarch32hf.tar.gz\" \\\n    OPENHAB_URL=\"https://bintray.com/openhab/mvn/download_file?file_path=org%2Fopenhab%2Fdistro%2Fopenhab%2F2.1.0%2Fopenhab-2.1.0.zip\" \\\n    OPENHAB_VERSION=\"2.1.0\"\n#  Set variables and locales\nENV APPDIR=\"/openhab\" \\\n    CRYPTO_POLICY=\"limited\" \\\n    EXTRA_JAVA_OPTS=\"\" \\\n    KARAF_EXEC=\"exec\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    OPENHAB_HTTP_PORT=\"8080\" \\\n    OPENHAB_HTTPS_PORT=\"8443\"\n#  Set arguments on build\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\n#  Basic build-time metadata as defined at http://label-schema.org\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"EPL-2.0\" \\\n      org.label-schema.name=\"openHAB\" \\\n      org.label-schema.vendor=\"openHAB Foundation e.V.\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.description=\"An open source, technology agnostic home automation platform\" \\\n      org.label-schema.url=\"https://www.openhab.com/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/openhab/openhab-docker.git\" \\\n      maintainer=\"openHAB <info@openhabfoundation.org>\"\n#  Install basepackages\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y arping ca-certificates curl fontconfig gosu libpcap-dev locales locales-all netbase unzip wget zip \\\n && chmod u+s /usr/sbin/arping \\\n && ln -s -f /bin/true /usr/bin/chfn \\\n && sed -i 's#stretch#buster#g' /etc/apt/sources.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y tini \\\n && sed -i 's#buster#stretch#g' /etc/apt/sources.list \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  Install java\nENV JAVA_HOME=\"/usr/lib/java-8\"\nRUN wget -nv -O /tmp/java.tar.gz \"${JAVA_URL}\" \\\n && mkdir \"${JAVA_HOME}\" \\\n && tar --exclude='demo' --exclude='sample' --exclude='src.zip' -xf /tmp/java.tar.gz --strip-components=1 -C \"${JAVA_HOME}\" \\\n && rm /tmp/java.tar.gz \\\n && update-alternatives --install /usr/bin/java java \"${JAVA_HOME}/bin/java\" 50 \\\n && update-alternatives --install /usr/bin/javac javac \"${JAVA_HOME}/bin/javac\" 50\n#  Install openHAB\n#  Set permissions for openHAB. Export TERM variable. See issue #30 for details!\nRUN wget -nv -O /tmp/openhab.zip \"${OPENHAB_URL}\" \\\n && unzip -q /tmp/openhab.zip -d \"${APPDIR}\" -x \"*.bat\" \\\n && rm /tmp/openhab.zip \\\n && mkdir -p \"${APPDIR}/userdata/logs\" \\\n && touch \"${APPDIR}/userdata/logs/openhab.log\" \\\n && cp -a \"${APPDIR}/userdata\" \"${APPDIR}/userdata.dist\" \\\n && cp -a \"${APPDIR}/conf\" \"${APPDIR}/conf.dist\" \\\n && echo 'export TERM=${TERM:=dumb}' | tee -a ~/.bashrc\n#  Expose volume with configuration and userdata dir\nVOLUME ${APPDIR}/conf ${APPDIR}/userdata ${APPDIR}/addons\n#  Expose HTTP, HTTPS and Console ports\nEXPOSE 8080/tcp 8443/tcp 8101/tcp\n#  Set working directory and entrypoint\nWORKDIR ${APPDIR}\nCOPY entrypoint.sh /\nRUN chmod +x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n#  Execute command\nCMD [\"gosu\", \"openhab\", \"tini\", \"-s\", \"./start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"a5c7ff173d4148e9c59a4705a9cf7590","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   openhab image\n#\n#   ------------------------------------------------------------------------------\n#                 NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#                         PLEASE DO NOT EDIT IT DIRECTLY.\n#   ------------------------------------------------------------------------------\n#\nFROM multiarch/debian-debootstrap:armhf-stretch\n#   Set download urls\nENV JAVA_URL=\"https://cdn.azul.com/zulu-embedded/bin/zulu8.33.0.134-jdk1.8.0_192-linux_aarch32hf.tar.gz\" \\\n    OPENHAB_URL=\"https://bintray.com/openhab/mvn/download_file?file_path=org%2Fopenhab%2Fdistro%2Fopenhab%2F2.1.0%2Fopenhab-2.1.0.zip\" \\\n    OPENHAB_VERSION=\"2.1.0\"\n#   Set variables and locales\nENV APPDIR=\"/openhab\" \\\n    CRYPTO_POLICY=\"limited\" \\\n    EXTRA_JAVA_OPTS=\"\" \\\n    KARAF_EXEC=\"exec\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    OPENHAB_HTTP_PORT=\"8080\" \\\n    OPENHAB_HTTPS_PORT=\"8443\"\n#   Set arguments on build\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\n#   Basic build-time metadata as defined at http://label-schema.org\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"EPL-2.0\" \\\n      org.label-schema.name=\"openHAB\" \\\n      org.label-schema.vendor=\"openHAB Foundation e.V.\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.description=\"An open source, technology agnostic home automation platform\" \\\n      org.label-schema.url=\"https://www.openhab.com/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/openhab/openhab-docker.git\" \\\n      maintainer=\"openHAB <info@openhabfoundation.org>\"\n#   Install basepackages\nRUN apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y arping ca-certificates curl fontconfig gosu libpcap-dev locales locales-all netbase unzip wget zip \\\n && chmod u+s /usr/sbin/arping \\\n && ln -s -f /bin/true /usr/bin/chfn \\\n && sed -i 's#stretch#buster#g' /etc/apt/sources.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y tini \\\n && sed -i 's#buster#stretch#g' /etc/apt/sources.list \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Install java\nENV JAVA_HOME=\"/usr/lib/java-8\"\nRUN wget -nv -O /tmp/java.tar.gz \"${JAVA_URL}\" \\\n && mkdir \"${JAVA_HOME}\" \\\n && tar --exclude='demo' --exclude='sample' --exclude='src.zip' -xf /tmp/java.tar.gz --strip-components=1 -C \"${JAVA_HOME}\" \\\n && rm /tmp/java.tar.gz \\\n && update-alternatives --install /usr/bin/java java \"${JAVA_HOME}/bin/java\" 50 \\\n && update-alternatives --install /usr/bin/javac javac \"${JAVA_HOME}/bin/javac\" 50\n#   Install openHAB\n#   Set permissions for openHAB. Export TERM variable. See issue #30 for details!\nRUN wget -nv -O /tmp/openhab.zip \"${OPENHAB_URL}\" \\\n && unzip -q /tmp/openhab.zip -d \"${APPDIR}\" -x \"*.bat\" \\\n && rm /tmp/openhab.zip \\\n && mkdir -p \"${APPDIR}/userdata/logs\" \\\n && touch \"${APPDIR}/userdata/logs/openhab.log\" \\\n && cp -a \"${APPDIR}/userdata\" \"${APPDIR}/userdata.dist\" \\\n && cp -a \"${APPDIR}/conf\" \"${APPDIR}/conf.dist\" \\\n && echo 'export TERM=${TERM:=dumb}' | tee -a ~/.bashrc\n#   Expose volume with configuration and userdata dir\nVOLUME ${APPDIR}/conf ${APPDIR}/userdata ${APPDIR}/addons\n#   Expose HTTP, HTTPS and Console ports\nEXPOSE 8080/tcp 8443/tcp 8101/tcp\n#   Set working directory and entrypoint\nWORKDIR ${APPDIR}\nCOPY entrypoint.sh /\nRUN chmod +x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n#   Execute command\nCMD [\"gosu\", \"openhab\", \"tini\", \"-s\", \"./start.sh\"]\n","originalDockerfileUglifiedHash":"0587ea8b25f8d64b17fd4f4d8f28083d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5bcfd94113a2ab1249024d5e440045b65083b3cc.dockerfile"}