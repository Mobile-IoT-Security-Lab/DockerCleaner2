{"seed":663380443,"processedDockerfileHash":"a1dd203237a20de3da0a7c0513fccbdf","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM lsiobase/ubuntu:arm64v8-bionic AS buildstage\n#  ############# build stage ##############\n#   package versions\nARG KODI_NAME=\"Leia\"\nARG KODI_VER=\"18.3\"\n#   defines which addons to build\nARG KODI_ADDONS=\"vfs.libarchive vfs.rar\"\n#   environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\n#   copy patches and excludes\nCOPY patches/ /patches/\n#   install build packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake autopoint binutils cmake curl default-jre g++ gawk gcc git gperf libass-dev libavahi-client-dev libavahi-common-dev libbluray-dev libbz2-dev libcurl4-openssl-dev libegl1-mesa-dev libflac-dev libfmt-dev libfreetype6-dev libfstrcmp-dev libgif-dev libglew-dev libiso9660-dev libjpeg-dev liblcms2-dev liblzo2-dev libmicrohttpd-dev libmysqlclient-dev libnfs-dev libpcre3-dev libplist-dev libsmbclient-dev libsqlite3-dev libssl-dev libtag1-dev libtiff5-dev libtinyxml-dev libtool libvorbis-dev libxrandr-dev libxslt-dev make nasm python-dev rapidjson-dev swig uuid-dev yasm zip zlib1g-dev -y\n#   fetch source and apply any required patches\nRUN set -ex \\\n && mkdir -p /tmp/kodi-source/build \\\n && curl -o /tmp/kodi.tar.gz -L \"https://github.com/xbmc/xbmc/archive/${KODI_VER}-${KODI_NAME}.tar.gz\" \\\n && tar xf /tmp/kodi.tar.gz -C /tmp/kodi-source --strip-components=1 \\\n && cd /tmp/kodi-source \\\n && git apply /patches/\"${KODI_NAME}\"/headless.patch\n#   build package\nRUN cd /tmp/kodi-source/build \\\n && cmake ../. -DCMAKE_INSTALL_LIBDIR=/usr/lib -DCMAKE_INSTALL_PREFIX=/usr -DENABLE_AIRTUNES=OFF -DENABLE_ALSA=OFF -DENABLE_AVAHI=OFF -DENABLE_BLUETOOTH=OFF -DENABLE_BLURAY=ON -DENABLE_CAP=OFF -DENABLE_CEC=OFF -DENABLE_DBUS=OFF -DENABLE_DVDCSS=OFF -DENABLE_GLX=OFF -DENABLE_INTERNAL_FLATBUFFERS=ON -DENABLE_LIBUSB=OFF -DENABLE_NFS=ON -DENABLE_OPENGL=OFF -DENABLE_OPTICAL=OFF -DENABLE_PULSEAUDIO=OFF -DENABLE_SNDIO=OFF -DENABLE_UDEV=OFF -DENABLE_UPNP=ON -DENABLE_VAAPI=OFF -DENABLE_VDPAU=OFF \\\n && make -j3 \\\n && make DESTDIR=/tmp/kodi-build install\n#   build kodi addons\nRUN set -ex \\\n && cd /tmp/kodi-source \\\n && make -j3 -C tools/depends/target/binary-addons ADDONS=\"$KODI_ADDONS\" PREFIX=/tmp/kodi-build/usr\n#   install kodi send\nRUN install -Dm755 /tmp/kodi-source/tools/EventClients/Clients/KodiSend/kodi-send.py /tmp/kodi-build/usr/bin/kodi-send \\\n && install -Dm644 /tmp/kodi-source/tools/EventClients/lib/python/xbmcclient.py /tmp/kodi-build/usr/lib/python2.7/xbmcclient.py\nFROM lsiobase/ubuntu:arm64v8-bionic\n#  ############# runtime stage ##############\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\n#   environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/config\"\n#   install runtime packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends libass9 libbluray2 libegl1 libfstrcmp0 libgl1 liblcms2-2 liblzo2-2 libmicrohttpd12 libmysqlclient20 libnfs11 libpcrecpp0v5 libpython2.7 libsmbclient libtag1v5 libtinyxml2.6.2v5 libxrandr2 libxslt1.1 -y \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#   copy local files and artifacts of build stages.\nCOPY root/ /\nCOPY --from=buildstage /tmp/kodi-build/usr/ /usr/\n#   ports and volumes\nVOLUME /config/.kodi\nEXPOSE 8080/tcp 9090/tcp 9777/udp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM lsiobase/ubuntu:arm64v8-bionic AS buildstage\n# ############# build stage ##############\n#  package versions\nARG KODI_NAME=\"Leia\"\nARG KODI_VER=\"18.3\"\n#  defines which addons to build\nARG KODI_ADDONS=\"vfs.libarchive vfs.rar\"\n#  environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\n#  copy patches and excludes\nCOPY patches/ /patches/\n#  install build packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake autopoint binutils cmake curl default-jre g++ gawk gcc git gperf libass-dev libavahi-client-dev libavahi-common-dev libbluray-dev libbz2-dev libcurl4-openssl-dev libegl1-mesa-dev libflac-dev libfmt-dev libfreetype6-dev libfstrcmp-dev libgif-dev libglew-dev libiso9660-dev libjpeg-dev liblcms2-dev liblzo2-dev libmicrohttpd-dev libmysqlclient-dev libnfs-dev libpcre3-dev libplist-dev libsmbclient-dev libsqlite3-dev libssl-dev libtag1-dev libtiff5-dev libtinyxml-dev libtool libvorbis-dev libxrandr-dev libxslt-dev make nasm python-dev rapidjson-dev swig uuid-dev yasm zip zlib1g-dev -y\n#  fetch source and apply any required patches\nRUN set -ex \\\n && mkdir -p /tmp/kodi-source/build \\\n && curl -o /tmp/kodi.tar.gz -L \"https://github.com/xbmc/xbmc/archive/${KODI_VER}-${KODI_NAME}.tar.gz\" \\\n && tar xf /tmp/kodi.tar.gz -C /tmp/kodi-source --strip-components=1 \\\n && cd /tmp/kodi-source \\\n && git apply /patches/\"${KODI_NAME}\"/headless.patch\n#  build package\nRUN cd /tmp/kodi-source/build \\\n && cmake ../. -DCMAKE_INSTALL_LIBDIR=/usr/lib -DCMAKE_INSTALL_PREFIX=/usr -DENABLE_AIRTUNES=OFF -DENABLE_ALSA=OFF -DENABLE_AVAHI=OFF -DENABLE_BLUETOOTH=OFF -DENABLE_BLURAY=ON -DENABLE_CAP=OFF -DENABLE_CEC=OFF -DENABLE_DBUS=OFF -DENABLE_DVDCSS=OFF -DENABLE_GLX=OFF -DENABLE_INTERNAL_FLATBUFFERS=ON -DENABLE_LIBUSB=OFF -DENABLE_NFS=ON -DENABLE_OPENGL=OFF -DENABLE_OPTICAL=OFF -DENABLE_PULSEAUDIO=OFF -DENABLE_SNDIO=OFF -DENABLE_UDEV=OFF -DENABLE_UPNP=ON -DENABLE_VAAPI=OFF -DENABLE_VDPAU=OFF \\\n && make -j3 \\\n && make DESTDIR=/tmp/kodi-build install\n#  build kodi addons\nRUN set -ex \\\n && cd /tmp/kodi-source \\\n && make -j3 -C tools/depends/target/binary-addons ADDONS=\"$KODI_ADDONS\" PREFIX=/tmp/kodi-build/usr\n#  install kodi send\nRUN install -Dm755 /tmp/kodi-source/tools/EventClients/Clients/KodiSend/kodi-send.py /tmp/kodi-build/usr/bin/kodi-send \\\n && install -Dm644 /tmp/kodi-source/tools/EventClients/lib/python/xbmcclient.py /tmp/kodi-build/usr/lib/python2.7/xbmcclient.py\nFROM lsiobase/ubuntu:arm64v8-bionic\n# ############# runtime stage ##############\n#  set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\n#  environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/config\"\n#  install runtime packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends libass9 libbluray2 libegl1 libfstrcmp0 libgl1 liblcms2-2 liblzo2-2 libmicrohttpd12 libmysqlclient20 libnfs11 libpcrecpp0v5 libpython2.7 libsmbclient libtag1v5 libtinyxml2.6.2v5 libxrandr2 libxslt1.1 -y \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#  copy local files and artifacts of build stages.\nCOPY root/ /\nCOPY --from=buildstage /tmp/kodi-build/usr/ /usr/\n#  ports and volumes\nVOLUME /config/.kodi\nEXPOSE 8080/tcp 9090/tcp 9777/udp\n","injectedSmells":[],"originalDockerfileHash":"6ba983a87c188ab3bfc88f9a278a61db","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM lsiobase/ubuntu:arm64v8-bionic AS buildstage\n#  ############# build stage ##############\n#   package versions\nARG KODI_NAME=\"Leia\"\nARG KODI_VER=\"18.3\"\n#   defines which addons to build\nARG KODI_ADDONS=\"vfs.libarchive vfs.rar\"\n#   environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\n#   copy patches and excludes\nCOPY patches/ /patches/\n#   install build packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake autopoint binutils cmake curl default-jre g++ gawk gcc git gperf libass-dev libavahi-client-dev libavahi-common-dev libbluray-dev libbz2-dev libcurl4-openssl-dev libegl1-mesa-dev libflac-dev libfmt-dev libfreetype6-dev libfstrcmp-dev libgif-dev libglew-dev libiso9660-dev libjpeg-dev liblcms2-dev liblzo2-dev libmicrohttpd-dev libmysqlclient-dev libnfs-dev libpcre3-dev libplist-dev libsmbclient-dev libsqlite3-dev libssl-dev libtag1-dev libtiff5-dev libtinyxml-dev libtool libvorbis-dev libxrandr-dev libxslt-dev make nasm python-dev rapidjson-dev swig uuid-dev yasm zip zlib1g-dev -y\n#   fetch source and apply any required patches\nRUN set -ex \\\n && mkdir -p /tmp/kodi-source/build \\\n && curl -o /tmp/kodi.tar.gz -L \"https://github.com/xbmc/xbmc/archive/${KODI_VER}-${KODI_NAME}.tar.gz\" \\\n && tar xf /tmp/kodi.tar.gz -C /tmp/kodi-source --strip-components=1 \\\n && cd /tmp/kodi-source \\\n && git apply /patches/\"${KODI_NAME}\"/headless.patch\n#   build package\nRUN cd /tmp/kodi-source/build \\\n && cmake ../. -DCMAKE_INSTALL_LIBDIR=/usr/lib -DCMAKE_INSTALL_PREFIX=/usr -DENABLE_AIRTUNES=OFF -DENABLE_ALSA=OFF -DENABLE_AVAHI=OFF -DENABLE_BLUETOOTH=OFF -DENABLE_BLURAY=ON -DENABLE_CAP=OFF -DENABLE_CEC=OFF -DENABLE_DBUS=OFF -DENABLE_DVDCSS=OFF -DENABLE_GLX=OFF -DENABLE_INTERNAL_FLATBUFFERS=ON -DENABLE_LIBUSB=OFF -DENABLE_NFS=ON -DENABLE_OPENGL=OFF -DENABLE_OPTICAL=OFF -DENABLE_PULSEAUDIO=OFF -DENABLE_SNDIO=OFF -DENABLE_UDEV=OFF -DENABLE_UPNP=ON -DENABLE_VAAPI=OFF -DENABLE_VDPAU=OFF \\\n && make -j3 \\\n && make DESTDIR=/tmp/kodi-build install\n#   build kodi addons\nRUN set -ex \\\n && cd /tmp/kodi-source \\\n && make -j3 -C tools/depends/target/binary-addons ADDONS=\"$KODI_ADDONS\" PREFIX=/tmp/kodi-build/usr\n#   install kodi send\nRUN install -Dm755 /tmp/kodi-source/tools/EventClients/Clients/KodiSend/kodi-send.py /tmp/kodi-build/usr/bin/kodi-send \\\n && install -Dm644 /tmp/kodi-source/tools/EventClients/lib/python/xbmcclient.py /tmp/kodi-build/usr/lib/python2.7/xbmcclient.py\nFROM lsiobase/ubuntu:arm64v8-bionic\n#  ############# runtime stage ##############\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"sparklyballs\"\n#   environment settings\nARG DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/config\"\n#   install runtime packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends libass9 libbluray2 libegl1 libfstrcmp0 libgl1 liblcms2-2 liblzo2-2 libmicrohttpd12 libmysqlclient20 libnfs11 libpcrecpp0v5 libpython2.7 libsmbclient libtag1v5 libtinyxml2.6.2v5 libxrandr2 libxslt1.1 -y \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#   copy local files and artifacts of build stages.\nCOPY root/ /\nCOPY --from=buildstage /tmp/kodi-build/usr/ /usr/\n#   ports and volumes\nVOLUME /config/.kodi\nEXPOSE 8080/tcp 9090/tcp 9777/udp\n","originalDockerfileUglifiedHash":"9fb413ace9f4da782592bfe0f04a473b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/da735ba55c60c59b83e5a5e4f853877ab6b1c110.dockerfile"}