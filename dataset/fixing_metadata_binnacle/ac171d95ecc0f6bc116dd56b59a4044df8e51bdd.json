{"seed":2810978789,"processedDockerfileHash":"f39fde36cc4920405b462caafa8afd11","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   mccahill/r-studio\n#\n#   VERSION 1.4\nFROM ubuntu:18.04\nMAINTAINER Mark McCahill \"mark.mccahill@duke.edu\"\nRUN :\nRUN apt-get dist-upgrade -y\nRUN (apt-get update ;apt-get install --no-install-recommends gnupg2=2.2.4-1ubuntu1.6 apt-utils=1.6.14 libopenblas-base=0.2.20+ds-4 vim=2:8.0.1453-1ubuntu1.11 less=487-0.1 net-tools=1.60+git20161116.90da8a0-1ubuntu1 inetutils-ping=2:1.9.4-3ubuntu0.1 curl=7.58.0-2ubuntu3.24 git=1:2.17.1-1ubuntu0.17 telnet=0.17-41 nmap=7.60-1ubuntu5 socat=1.7.3.2-2ubuntu2 software-properties-common=0.96.24.32.20 wget=1.19.4-1ubuntu2.2 locales=2.27-3ubuntu1.6 -y )\n#   Configure default locale\nRUN locale-gen en_US en_US.UTF-8\nRUN DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales\n#   get R from a CRAN archive (we want the 3.5 version of R)\nRUN echo \"deb http://cran.rstudio.com/bin/linux/ubuntu bionic-cran35/\" >> /etc/apt/sources.list\nRUN DEBIAN_FRONTEND=noninteractive apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN : ; apt-get dist-upgrade -y\n#   we need gdal > 2\nRUN add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable\nRUN :\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y r-base r-base-dev libcurl4-gnutls-dev libgit2-dev libxml2-dev libssl-dev libudunits2-dev libpoppler-cpp-dev texlive texlive-base texlive-latex-extra texlive-pstricks pandoc texlive-publishers texlive-fonts-extra texlive-latex-extra texlive-humanities lmodern libxml2 libxml2-dev libssl-dev libproj-dev libudunits2-0 libudunits2-dev software-properties-common gdal-bin python-gdal libgdal-dev gdebi-core libapparmor1 gdal-bin python-gdal libgdal-dev libproj-dev libudunits2-0 libudunits2-dev\n#   R-Studio   \n#   RUN DEBIAN_FRONTEND=noninteractive wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive wget https://s3.amazonaws.com/rstudio-ide-build/server/trusty/amd64/rstudio-server-1.2.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi --n rstudio-server-1.2.907-amd64.deb\nRUN rm rstudio-server-1.2.907-amd64.deb\n#   update the R packages we will need for knitr\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"xfun\", \"knitr\", \"yaml\", \"Rcpp\", \"htmltools\", \"caTools\", \"bitops\", \"digest\", \"glue\", \"stringr\", \"markdown\", \"highr\", \"formatR\", \"evaluate\", \"mime\", \"stringi\", \"magrittr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   R packages we need for devtools - and we need devtools to be able to update the rmarkdown package\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"processx\", \"ps\", \"callr\", \"crayon\", \"assertthat\", \"cli\", \"desc\", \"prettyunits\", \"backports\", \"rprojroot\", \"withr\", \"pkgbuild\", \"rlang\", \"rstudioapi\", \"pkgload\", \"rcmdcheck\", \"remotes\", \"xopen\", \"clipr\", \"clisymbols\", \"sessioninfo\", \"purrr\", \"usethis\", \"sys\", \"askpass\", \"openssl\", \"brew\", \"roxygen2\", \"fs\", \"gh\", \"rversions\", \"git2r\", \"devtools\", \"R6\", \"httr\", \"RCurl\", \"BH\", \"xml2\", \"curl\", \"jsonlite\", \"ini\", \"downloader\", \"memoise\", \"plyr\", \"XML\", \"whisker\", \"bitops\", \"nloptr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   libraries Eric Green wanted\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"lubridate\", \"lazyeval\", \"utf8\", \"fansi\", \"zeallot\", \"vctrs\", \"pillar\", \"pkgconfig\", \"tibble\", \"ggplot2\", \"RColorBrewer\", \"dichromat\", \"colorspace\", \"munsell\", \"labeling\", \"viridisLite\", \"scales\", \"stargazer\", \"reshape2\", \"gtable\", \"proto\", \"minqa\",\"RcppEigen\",\"lme4\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   more libraries Mine Cetinakya-Rundel asked for\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"openintro\", \"bindr\", \"bindrcpp\", \"plogr\", \"tidyselect\", \"dplyr\", \"DBI\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"chron\", \"data.table\", \"rematch\", \"cellranger\", \"tidyr\", \"googlesheets\", \"hms\", \"readr\", \"selectr\", \"rvest\", \"pbkrtest\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   Shiny\nCOPY ./conf /r-studio\nRUN wget https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.7.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi -n shiny-server-1.5.7.907-amd64.deb\nRUN rm shiny-server-1.5.7.907-amd64.deb\nRUN R CMD BATCH /r-studio/install-Shiny.R\nRUN rm /install-Shiny.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"SparseM\", \"MatrixModels\", \"quantreg\", \"sp\", \"maptools\", \"haven\", \"ellipsis\", \"forcats\", \"readxl\", \"zip\", \"openxlsx\", \"rio\", \"abind\", \"carData\", \"car\", \"mosaicData\", \"latticeExtra\", \"gridExtra\", \"ggdendro\", \"mnormt\", \"psych\", \"generics\", \"broom\", \"reshape\", \"progress\", \"GGally\", \"ggstance\", \"ggformula\", \"mosaicCore\", \"ggrepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   Cliburn Chan requested these:\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"maps\", \"zoo\", \"gcookbook\", \"corrplot\", \"grepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   install rmarkdown\nRUN R CMD BATCH /r-studio/install-rmarkdown.R\nRUN rm /install-rmarkdown.Rout\n#   Cliburn also wanted these\n#   but they have mega-dependencies, so intall them the other way\nRUN R CMD BATCH /r-studio/install-dendextend.R\nRUN rm /install-dendextend.Rout\nRUN R CMD BATCH /r-studio/install-igraph.R\nRUN rm /install-igraph.Rout\n#   install sparklyr so we can do Spark via Livy\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"config\", \"dbplyr\", \"rappdirs\", \"r2d3\", \"forge\", \"sparklyr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   install templates and examples from Reed and the Tufte package\nRUN DEBIAN_FRONTEND=noninteractive wget https://archive.linux.duke.edu/cran/src/contrib/BHH2_2016.05.31.tar.gz\nRUN DEBIAN_FRONTEND=noninteractive R CMD INSTALL BHH2_2016.05.31.tar.gz\nRUN rm BHH2_2016.05.31.tar.gz\nRUN R CMD BATCH /r-studio/install-reed.R\nRUN rm /install-reed.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"rgdal\", \"rgeos\", \"uuid\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-rappdirs.R\nRUN rm /install-rappdirs.Rout\n#   new packages for fall 2018\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"tigris\", \"tidycensus\", \"tidyverse\", \"future\", \"doMC\", \"foreach\", \"doParallel\", \"furrr\", \"drat\", \"tidygraph\", \"here\", \"rticles\", \"styler\", \"lintr\", \"testthat\", \"reprex\", \"microbenchmark\", \"modelr\", \"globals\", \"listenv\", \"iterators\", \"enc\", \"rematch2\", \"rex\", \"stringdist\", \"praise\", \"profmem\", \"bench\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pryr\", \"profvis\", \"RcppArmadillo\", \"servr\", \"xaringan\", \"rsconnect\", \"PKI\", \"RJSONIO\", \"packrat\", \"highlight\", \"pkgdown\", \"bookdown\", \"blogdown\", \"cowplot\", \"influenceR\", \"Rook\", \"rgexf\", \"visNetwork\", \"DiagrammeR\", \"farver\", \"tweenr\", \"polyclip\", \"ggforce\", \"RgoogleMaps\", \"rjson\", \"mapproj\", \"jpeg\", \"geosphere\", \"ggmap\", \"ggraph\", \"shinyjs\", \"flexdashboard\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"nycflights13\", \"babynames\", \"janeaustenr\", \"NHANES\", \"repurrrsive\", \"infer\", \"ipred\", \"numDeriv\", \"SQUAREM\", \"lava\", \"prodlim\", \"kernlab\", \"CVST\", \"DRR\", \"dimRed\", \"timeDate\", \"sfsmisc\", \"magic\", \"lpSolve\", \"RcppProgress\", \"geometry\", \"DEoptimR\", \"robustbase\", \"ddalpha\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"gower\",\"RcppRoll\", \"pls\", \"recipes\", \"rsample\", \"hunspell\", \"SnowballC\", \"tokenizers\", \"ISOcodes\", \"stopwords\", \"tidytext\", \"ggridges\", \"bayesplot\", \"matrixStats\", \"checkmate\", \"loo\", \"StanHeaders\", \"inline\", \"rstan\", \"rstantools\", \"tidypredict\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pROC\", \"gtools\", \"gdata\", \"gplots\", \"MLmetrics\", \"yardstick\", \"xgboost\", \"ModelMetrics\", \"caret\", \"e1071\", \"dotCall64\", \"spam\", \"fields\", \"ROCR\", \"reticulate\", \"tfruns\", \"tensorflow\", \"zeallot\", \"keras\", \"coda\", \"greta\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-2018-packages-1.R\nRUN R CMD BATCH /r-studio/install-2018-packages-2.R\nRUN R CMD BATCH /r-studio/install-2018-packages-3.R\nRUN R CMD BATCH /r-studio/install-2018-packages-4.R\n#   remove install Rout files\nRUN rm /install-2018-packages-1.Rout /install-2018-packages-2.Rout /install-2018-packages-3.Rout /install-2018-packages-4.Rout\n#   Supervisord\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y supervisor \\\n && mkdir -p /var/log/supervisor\nCMD [\"/usr/bin/supervisord\", \"-n\"]\n#   Config files\nRUN cd /r-studio \\\n && cp supervisord-RStudio.conf /etc/supervisor/conf.d/supervisord-RStudio.conf\nRUN rm /r-studio/*\n#   the default packages for everyone running R\nRUN echo \"\" >> /etc/R/Rprofile.site \\\n && echo \"# add the downloader package to the default libraries\" >> /etc/R/Rprofile.site \\\n && echo \".First <- function(){\" >> /etc/R/Rprofile.site \\\n && echo \"library(downloader)\" >> /etc/R/Rprofile.site \\\n && echo \"library(knitr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rmarkdown)\" >> /etc/R/Rprofile.site \\\n && echo \"library(ggplot2)\" >> /etc/R/Rprofile.site \\\n && echo \"library(googlesheets)\" >> /etc/R/Rprofile.site \\\n && echo \"library(lubridate)\" >> /etc/R/Rprofile.site \\\n && echo \"library(stringr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rvest)\" >> /etc/R/Rprofile.site \\\n && echo \"library(openintro)\" >> /etc/R/Rprofile.site \\\n && echo \"library(broom)\" >> /etc/R/Rprofile.site \\\n && echo \"library(GGally)\" >> /etc/R/Rprofile.site \\\n && echo \"}\" >> /etc/R/Rprofile.site \\\n && echo \"\" >> /etc/R/Rprofile.site\n#   add a non-root user so we can log into R studio as that user; make sure that user is in the group \"users\"\nRUN adduser --disabled-password --gecos \"\" --ingroup users guest\n#   add a script that supervisord uses to set the user's password based on an optional\n#   environmental variable ($VNCPASS) passed in when the containers is instantiated\nCOPY initialize.sh /\n#  ########\n#\n#   if you need additional tools/libraries, add them here.\n#   also, note that we use supervisord to launch both the password\n#   initialize script and the RStudio server. If you want to run other processes\n#   add these to the supervisord.conf file\n#\n#  ########\n#   expose the RStudio IDE port\nEXPOSE 8787/tcp\n#   expose the port for the shiny server\n#  EXPOSE 3838\nCMD [\"/usr/bin/supervisord\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  mccahill/r-studio\n#\n#  VERSION 1.4\nFROM ubuntu:18.04\nMAINTAINER Mark McCahill \"mark.mccahill@duke.edu\"\nRUN apt-get update\nRUN apt-get dist-upgrade -y\nRUN apt-get install gnupg2 apt-utils libopenblas-base vim less net-tools inetutils-ping curl git telnet nmap socat software-properties-common wget locales -y\n#  Configure default locale\nRUN locale-gen en_US en_US.UTF-8\nRUN DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales\n#  get R from a CRAN archive (we want the 3.5 version of R)\nRUN echo \"deb http://cran.rstudio.com/bin/linux/ubuntu bionic-cran35/\" >> /etc/apt/sources.list\nRUN DEBIAN_FRONTEND=noninteractive apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN apt-get update ; apt-get dist-upgrade -y\n#  we need gdal > 2\nRUN add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable\nRUN apt-get update\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y r-base r-base-dev libcurl4-gnutls-dev libgit2-dev libxml2-dev libssl-dev libudunits2-dev libpoppler-cpp-dev texlive texlive-base texlive-latex-extra texlive-pstricks pandoc texlive-publishers texlive-fonts-extra texlive-latex-extra texlive-humanities lmodern libxml2 libxml2-dev libssl-dev libproj-dev libudunits2-0 libudunits2-dev software-properties-common gdal-bin python-gdal libgdal-dev gdebi-core libapparmor1 gdal-bin python-gdal libgdal-dev libproj-dev libudunits2-0 libudunits2-dev\n#  R-Studio   \n#  RUN DEBIAN_FRONTEND=noninteractive wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive wget https://s3.amazonaws.com/rstudio-ide-build/server/trusty/amd64/rstudio-server-1.2.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi --n rstudio-server-1.2.907-amd64.deb\nRUN rm rstudio-server-1.2.907-amd64.deb\n#  update the R packages we will need for knitr\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"xfun\", \"knitr\", \"yaml\", \"Rcpp\", \"htmltools\", \"caTools\", \"bitops\", \"digest\", \"glue\", \"stringr\", \"markdown\", \"highr\", \"formatR\", \"evaluate\", \"mime\", \"stringi\", \"magrittr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  R packages we need for devtools - and we need devtools to be able to update the rmarkdown package\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"processx\", \"ps\", \"callr\", \"crayon\", \"assertthat\", \"cli\", \"desc\", \"prettyunits\", \"backports\", \"rprojroot\", \"withr\", \"pkgbuild\", \"rlang\", \"rstudioapi\", \"pkgload\", \"rcmdcheck\", \"remotes\", \"xopen\", \"clipr\", \"clisymbols\", \"sessioninfo\", \"purrr\", \"usethis\", \"sys\", \"askpass\", \"openssl\", \"brew\", \"roxygen2\", \"fs\", \"gh\", \"rversions\", \"git2r\", \"devtools\", \"R6\", \"httr\", \"RCurl\", \"BH\", \"xml2\", \"curl\", \"jsonlite\", \"ini\", \"downloader\", \"memoise\", \"plyr\", \"XML\", \"whisker\", \"bitops\", \"nloptr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  libraries Eric Green wanted\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"lubridate\", \"lazyeval\", \"utf8\", \"fansi\", \"zeallot\", \"vctrs\", \"pillar\", \"pkgconfig\", \"tibble\", \"ggplot2\", \"RColorBrewer\", \"dichromat\", \"colorspace\", \"munsell\", \"labeling\", \"viridisLite\", \"scales\", \"stargazer\", \"reshape2\", \"gtable\", \"proto\", \"minqa\",\"RcppEigen\",\"lme4\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  more libraries Mine Cetinakya-Rundel asked for\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"openintro\", \"bindr\", \"bindrcpp\", \"plogr\", \"tidyselect\", \"dplyr\", \"DBI\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"chron\", \"data.table\", \"rematch\", \"cellranger\", \"tidyr\", \"googlesheets\", \"hms\", \"readr\", \"selectr\", \"rvest\", \"pbkrtest\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  Shiny\nADD ./conf /r-studio\nRUN wget https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.7.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi -n shiny-server-1.5.7.907-amd64.deb\nRUN rm shiny-server-1.5.7.907-amd64.deb\nRUN R CMD BATCH /r-studio/install-Shiny.R\nRUN rm /install-Shiny.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"SparseM\", \"MatrixModels\", \"quantreg\", \"sp\", \"maptools\", \"haven\", \"ellipsis\", \"forcats\", \"readxl\", \"zip\", \"openxlsx\", \"rio\", \"abind\", \"carData\", \"car\", \"mosaicData\", \"latticeExtra\", \"gridExtra\", \"ggdendro\", \"mnormt\", \"psych\", \"generics\", \"broom\", \"reshape\", \"progress\", \"GGally\", \"ggstance\", \"ggformula\", \"mosaicCore\", \"ggrepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  Cliburn Chan requested these:\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"maps\", \"zoo\", \"gcookbook\", \"corrplot\", \"grepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  install rmarkdown\nRUN R CMD BATCH /r-studio/install-rmarkdown.R\nRUN rm /install-rmarkdown.Rout\n#  Cliburn also wanted these\n#  but they have mega-dependencies, so intall them the other way\nRUN R CMD BATCH /r-studio/install-dendextend.R\nRUN rm /install-dendextend.Rout\nRUN R CMD BATCH /r-studio/install-igraph.R\nRUN rm /install-igraph.Rout\n#  install sparklyr so we can do Spark via Livy\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"config\", \"dbplyr\", \"rappdirs\", \"r2d3\", \"forge\", \"sparklyr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#  install templates and examples from Reed and the Tufte package\nRUN DEBIAN_FRONTEND=noninteractive wget https://archive.linux.duke.edu/cran/src/contrib/BHH2_2016.05.31.tar.gz\nRUN DEBIAN_FRONTEND=noninteractive R CMD INSTALL BHH2_2016.05.31.tar.gz\nRUN rm BHH2_2016.05.31.tar.gz\nRUN R CMD BATCH /r-studio/install-reed.R\nRUN rm /install-reed.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"rgdal\", \"rgeos\", \"uuid\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-rappdirs.R\nRUN rm /install-rappdirs.Rout\n#  new packages for fall 2018\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"tigris\", \"tidycensus\", \"tidyverse\", \"future\", \"doMC\", \"foreach\", \"doParallel\", \"furrr\", \"drat\", \"tidygraph\", \"here\", \"rticles\", \"styler\", \"lintr\", \"testthat\", \"reprex\", \"microbenchmark\", \"modelr\", \"globals\", \"listenv\", \"iterators\", \"enc\", \"rematch2\", \"rex\", \"stringdist\", \"praise\", \"profmem\", \"bench\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pryr\", \"profvis\", \"RcppArmadillo\", \"servr\", \"xaringan\", \"rsconnect\", \"PKI\", \"RJSONIO\", \"packrat\", \"highlight\", \"pkgdown\", \"bookdown\", \"blogdown\", \"cowplot\", \"influenceR\", \"Rook\", \"rgexf\", \"visNetwork\", \"DiagrammeR\", \"farver\", \"tweenr\", \"polyclip\", \"ggforce\", \"RgoogleMaps\", \"rjson\", \"mapproj\", \"jpeg\", \"geosphere\", \"ggmap\", \"ggraph\", \"shinyjs\", \"flexdashboard\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"nycflights13\", \"babynames\", \"janeaustenr\", \"NHANES\", \"repurrrsive\", \"infer\", \"ipred\", \"numDeriv\", \"SQUAREM\", \"lava\", \"prodlim\", \"kernlab\", \"CVST\", \"DRR\", \"dimRed\", \"timeDate\", \"sfsmisc\", \"magic\", \"lpSolve\", \"RcppProgress\", \"geometry\", \"DEoptimR\", \"robustbase\", \"ddalpha\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"gower\",\"RcppRoll\", \"pls\", \"recipes\", \"rsample\", \"hunspell\", \"SnowballC\", \"tokenizers\", \"ISOcodes\", \"stopwords\", \"tidytext\", \"ggridges\", \"bayesplot\", \"matrixStats\", \"checkmate\", \"loo\", \"StanHeaders\", \"inline\", \"rstan\", \"rstantools\", \"tidypredict\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pROC\", \"gtools\", \"gdata\", \"gplots\", \"MLmetrics\", \"yardstick\", \"xgboost\", \"ModelMetrics\", \"caret\", \"e1071\", \"dotCall64\", \"spam\", \"fields\", \"ROCR\", \"reticulate\", \"tfruns\", \"tensorflow\", \"zeallot\", \"keras\", \"coda\", \"greta\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-2018-packages-1.R\nRUN R CMD BATCH /r-studio/install-2018-packages-2.R\nRUN R CMD BATCH /r-studio/install-2018-packages-3.R\nRUN R CMD BATCH /r-studio/install-2018-packages-4.R\n#  remove install Rout files\nRUN rm /install-2018-packages-1.Rout /install-2018-packages-2.Rout /install-2018-packages-3.Rout /install-2018-packages-4.Rout\n#  Supervisord\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y supervisor \\\n && mkdir -p /var/log/supervisor\nCMD [\"/usr/bin/supervisord\", \"-n\"]\n#  Config files\nRUN cd /r-studio \\\n && cp supervisord-RStudio.conf /etc/supervisor/conf.d/supervisord-RStudio.conf\nRUN rm /r-studio/*\n#  the default packages for everyone running R\nRUN echo \"\" >> /etc/R/Rprofile.site \\\n && echo \"# add the downloader package to the default libraries\" >> /etc/R/Rprofile.site \\\n && echo \".First <- function(){\" >> /etc/R/Rprofile.site \\\n && echo \"library(downloader)\" >> /etc/R/Rprofile.site \\\n && echo \"library(knitr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rmarkdown)\" >> /etc/R/Rprofile.site \\\n && echo \"library(ggplot2)\" >> /etc/R/Rprofile.site \\\n && echo \"library(googlesheets)\" >> /etc/R/Rprofile.site \\\n && echo \"library(lubridate)\" >> /etc/R/Rprofile.site \\\n && echo \"library(stringr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rvest)\" >> /etc/R/Rprofile.site \\\n && echo \"library(openintro)\" >> /etc/R/Rprofile.site \\\n && echo \"library(broom)\" >> /etc/R/Rprofile.site \\\n && echo \"library(GGally)\" >> /etc/R/Rprofile.site \\\n && echo \"}\" >> /etc/R/Rprofile.site \\\n && echo \"\" >> /etc/R/Rprofile.site\n#  add a non-root user so we can log into R studio as that user; make sure that user is in the group \"users\"\nRUN adduser --disabled-password --gecos \"\" --ingroup users guest\n#  add a script that supervisord uses to set the user's password based on an optional\n#  environmental variable ($VNCPASS) passed in when the containers is instantiated\nADD initialize.sh /\n# ########\n#\n#  if you need additional tools/libraries, add them here.\n#  also, note that we use supervisord to launch both the password\n#  initialize script and the RStudio server. If you want to run other processes\n#  add these to the supervisord.conf file\n#\n# ########\n#  expose the RStudio IDE port\nEXPOSE 8787/tcp\n#  expose the port for the shiny server\n# EXPOSE 3838\nCMD [\"/usr/bin/supervisord\"]\n","injectedSmells":[],"originalDockerfileHash":"014228a65036981599d35aa4a78c21e5","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   mccahill/r-studio\n#\n#   VERSION 1.4\nFROM ubuntu:18.04\nMAINTAINER Mark McCahill \"mark.mccahill@duke.edu\"\nRUN apt-get update\nRUN apt-get dist-upgrade -y\nRUN apt-get install gnupg2 apt-utils libopenblas-base vim less net-tools inetutils-ping curl git telnet nmap socat software-properties-common wget locales -y\n#   Configure default locale\nRUN locale-gen en_US en_US.UTF-8\nRUN DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales\n#   get R from a CRAN archive (we want the 3.5 version of R)\nRUN echo \"deb http://cran.rstudio.com/bin/linux/ubuntu bionic-cran35/\" >> /etc/apt/sources.list\nRUN DEBIAN_FRONTEND=noninteractive apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nRUN apt-get update ; apt-get dist-upgrade -y\n#   we need gdal > 2\nRUN add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable\nRUN apt-get update\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y r-base r-base-dev libcurl4-gnutls-dev libgit2-dev libxml2-dev libssl-dev libudunits2-dev libpoppler-cpp-dev texlive texlive-base texlive-latex-extra texlive-pstricks pandoc texlive-publishers texlive-fonts-extra texlive-latex-extra texlive-humanities lmodern libxml2 libxml2-dev libssl-dev libproj-dev libudunits2-0 libudunits2-dev software-properties-common gdal-bin python-gdal libgdal-dev gdebi-core libapparmor1 gdal-bin python-gdal libgdal-dev libproj-dev libudunits2-0 libudunits2-dev\n#   R-Studio   \n#   RUN DEBIAN_FRONTEND=noninteractive wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive wget https://s3.amazonaws.com/rstudio-ide-build/server/trusty/amd64/rstudio-server-1.2.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi --n rstudio-server-1.2.907-amd64.deb\nRUN rm rstudio-server-1.2.907-amd64.deb\n#   update the R packages we will need for knitr\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"xfun\", \"knitr\", \"yaml\", \"Rcpp\", \"htmltools\", \"caTools\", \"bitops\", \"digest\", \"glue\", \"stringr\", \"markdown\", \"highr\", \"formatR\", \"evaluate\", \"mime\", \"stringi\", \"magrittr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   R packages we need for devtools - and we need devtools to be able to update the rmarkdown package\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"processx\", \"ps\", \"callr\", \"crayon\", \"assertthat\", \"cli\", \"desc\", \"prettyunits\", \"backports\", \"rprojroot\", \"withr\", \"pkgbuild\", \"rlang\", \"rstudioapi\", \"pkgload\", \"rcmdcheck\", \"remotes\", \"xopen\", \"clipr\", \"clisymbols\", \"sessioninfo\", \"purrr\", \"usethis\", \"sys\", \"askpass\", \"openssl\", \"brew\", \"roxygen2\", \"fs\", \"gh\", \"rversions\", \"git2r\", \"devtools\", \"R6\", \"httr\", \"RCurl\", \"BH\", \"xml2\", \"curl\", \"jsonlite\", \"ini\", \"downloader\", \"memoise\", \"plyr\", \"XML\", \"whisker\", \"bitops\", \"nloptr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   libraries Eric Green wanted\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"lubridate\", \"lazyeval\", \"utf8\", \"fansi\", \"zeallot\", \"vctrs\", \"pillar\", \"pkgconfig\", \"tibble\", \"ggplot2\", \"RColorBrewer\", \"dichromat\", \"colorspace\", \"munsell\", \"labeling\", \"viridisLite\", \"scales\", \"stargazer\", \"reshape2\", \"gtable\", \"proto\", \"minqa\",\"RcppEigen\",\"lme4\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   more libraries Mine Cetinakya-Rundel asked for\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"openintro\", \"bindr\", \"bindrcpp\", \"plogr\", \"tidyselect\", \"dplyr\", \"DBI\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"chron\", \"data.table\", \"rematch\", \"cellranger\", \"tidyr\", \"googlesheets\", \"hms\", \"readr\", \"selectr\", \"rvest\", \"pbkrtest\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   Shiny\nADD ./conf /r-studio\nRUN wget https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.7.907-amd64.deb\nRUN DEBIAN_FRONTEND=noninteractive gdebi -n shiny-server-1.5.7.907-amd64.deb\nRUN rm shiny-server-1.5.7.907-amd64.deb\nRUN R CMD BATCH /r-studio/install-Shiny.R\nRUN rm /install-Shiny.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"SparseM\", \"MatrixModels\", \"quantreg\", \"sp\", \"maptools\", \"haven\", \"ellipsis\", \"forcats\", \"readxl\", \"zip\", \"openxlsx\", \"rio\", \"abind\", \"carData\", \"car\", \"mosaicData\", \"latticeExtra\", \"gridExtra\", \"ggdendro\", \"mnormt\", \"psych\", \"generics\", \"broom\", \"reshape\", \"progress\", \"GGally\", \"ggstance\", \"ggformula\", \"mosaicCore\", \"ggrepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   Cliburn Chan requested these:\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"maps\", \"zoo\", \"gcookbook\", \"corrplot\", \"grepel\", \"base64enc\", \"crosstalk\", \"htmlwidgets\", \"png\", \"raster\", \"viridis\", \"leaflet\", \"mosaic\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   install rmarkdown\nRUN R CMD BATCH /r-studio/install-rmarkdown.R\nRUN rm /install-rmarkdown.Rout\n#   Cliburn also wanted these\n#   but they have mega-dependencies, so intall them the other way\nRUN R CMD BATCH /r-studio/install-dendextend.R\nRUN rm /install-dendextend.Rout\nRUN R CMD BATCH /r-studio/install-igraph.R\nRUN rm /install-igraph.Rout\n#   install sparklyr so we can do Spark via Livy\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"config\", \"dbplyr\", \"rappdirs\", \"r2d3\", \"forge\", \"sparklyr\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\n#   install templates and examples from Reed and the Tufte package\nRUN DEBIAN_FRONTEND=noninteractive wget https://archive.linux.duke.edu/cran/src/contrib/BHH2_2016.05.31.tar.gz\nRUN DEBIAN_FRONTEND=noninteractive R CMD INSTALL BHH2_2016.05.31.tar.gz\nRUN rm BHH2_2016.05.31.tar.gz\nRUN R CMD BATCH /r-studio/install-reed.R\nRUN rm /install-reed.Rout\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"rgdal\", \"rgeos\", \"uuid\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-rappdirs.R\nRUN rm /install-rappdirs.Rout\n#   new packages for fall 2018\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"tigris\", \"tidycensus\", \"tidyverse\", \"future\", \"doMC\", \"foreach\", \"doParallel\", \"furrr\", \"drat\", \"tidygraph\", \"here\", \"rticles\", \"styler\", \"lintr\", \"testthat\", \"reprex\", \"microbenchmark\", \"modelr\", \"globals\", \"listenv\", \"iterators\", \"enc\", \"rematch2\", \"rex\", \"stringdist\", \"praise\", \"profmem\", \"bench\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pryr\", \"profvis\", \"RcppArmadillo\", \"servr\", \"xaringan\", \"rsconnect\", \"PKI\", \"RJSONIO\", \"packrat\", \"highlight\", \"pkgdown\", \"bookdown\", \"blogdown\", \"cowplot\", \"influenceR\", \"Rook\", \"rgexf\", \"visNetwork\", \"DiagrammeR\", \"farver\", \"tweenr\", \"polyclip\", \"ggforce\", \"RgoogleMaps\", \"rjson\", \"mapproj\", \"jpeg\", \"geosphere\", \"ggmap\", \"ggraph\", \"shinyjs\", \"flexdashboard\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"nycflights13\", \"babynames\", \"janeaustenr\", \"NHANES\", \"repurrrsive\", \"infer\", \"ipred\", \"numDeriv\", \"SQUAREM\", \"lava\", \"prodlim\", \"kernlab\", \"CVST\", \"DRR\", \"dimRed\", \"timeDate\", \"sfsmisc\", \"magic\", \"lpSolve\", \"RcppProgress\", \"geometry\", \"DEoptimR\", \"robustbase\", \"ddalpha\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"gower\",\"RcppRoll\", \"pls\", \"recipes\", \"rsample\", \"hunspell\", \"SnowballC\", \"tokenizers\", \"ISOcodes\", \"stopwords\", \"tidytext\", \"ggridges\", \"bayesplot\", \"matrixStats\", \"checkmate\", \"loo\", \"StanHeaders\", \"inline\", \"rstan\", \"rstantools\", \"tidypredict\"), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN DEBIAN_FRONTEND=noninteractive R --vanilla --quiet -e 'install.packages( c(\"pROC\", \"gtools\", \"gdata\", \"gplots\", \"MLmetrics\", \"yardstick\", \"xgboost\", \"ModelMetrics\", \"caret\", \"e1071\", \"dotCall64\", \"spam\", \"fields\", \"ROCR\", \"reticulate\", \"tfruns\", \"tensorflow\", \"zeallot\", \"keras\", \"coda\", \"greta\" ), repos=\"http://cran.us.r-project.org\",quiet=TRUE)'\nRUN R CMD BATCH /r-studio/install-2018-packages-1.R\nRUN R CMD BATCH /r-studio/install-2018-packages-2.R\nRUN R CMD BATCH /r-studio/install-2018-packages-3.R\nRUN R CMD BATCH /r-studio/install-2018-packages-4.R\n#   remove install Rout files\nRUN rm /install-2018-packages-1.Rout /install-2018-packages-2.Rout /install-2018-packages-3.Rout /install-2018-packages-4.Rout\n#   Supervisord\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y supervisor \\\n && mkdir -p /var/log/supervisor\nCMD [\"/usr/bin/supervisord\", \"-n\"]\n#   Config files\nRUN cd /r-studio \\\n && cp supervisord-RStudio.conf /etc/supervisor/conf.d/supervisord-RStudio.conf\nRUN rm /r-studio/*\n#   the default packages for everyone running R\nRUN echo \"\" >> /etc/R/Rprofile.site \\\n && echo \"# add the downloader package to the default libraries\" >> /etc/R/Rprofile.site \\\n && echo \".First <- function(){\" >> /etc/R/Rprofile.site \\\n && echo \"library(downloader)\" >> /etc/R/Rprofile.site \\\n && echo \"library(knitr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rmarkdown)\" >> /etc/R/Rprofile.site \\\n && echo \"library(ggplot2)\" >> /etc/R/Rprofile.site \\\n && echo \"library(googlesheets)\" >> /etc/R/Rprofile.site \\\n && echo \"library(lubridate)\" >> /etc/R/Rprofile.site \\\n && echo \"library(stringr)\" >> /etc/R/Rprofile.site \\\n && echo \"library(rvest)\" >> /etc/R/Rprofile.site \\\n && echo \"library(openintro)\" >> /etc/R/Rprofile.site \\\n && echo \"library(broom)\" >> /etc/R/Rprofile.site \\\n && echo \"library(GGally)\" >> /etc/R/Rprofile.site \\\n && echo \"}\" >> /etc/R/Rprofile.site \\\n && echo \"\" >> /etc/R/Rprofile.site\n#   add a non-root user so we can log into R studio as that user; make sure that user is in the group \"users\"\nRUN adduser --disabled-password --gecos \"\" --ingroup users guest\n#   add a script that supervisord uses to set the user's password based on an optional\n#   environmental variable ($VNCPASS) passed in when the containers is instantiated\nADD initialize.sh /\n#  ########\n#\n#   if you need additional tools/libraries, add them here.\n#   also, note that we use supervisord to launch both the password\n#   initialize script and the RStudio server. If you want to run other processes\n#   add these to the supervisord.conf file\n#\n#  ########\n#   expose the RStudio IDE port\nEXPOSE 8787/tcp\n#   expose the port for the shiny server\n#  EXPOSE 3838\nCMD [\"/usr/bin/supervisord\"]\n","originalDockerfileUglifiedHash":"677d4df7f44d369a7f7008580a950895","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ac171d95ecc0f6bc116dd56b59a4044df8e51bdd.dockerfile"}