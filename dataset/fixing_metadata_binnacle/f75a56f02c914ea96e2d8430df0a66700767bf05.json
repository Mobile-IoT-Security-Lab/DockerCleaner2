{"seed":1693624649,"processedDockerfileHash":"af88df139a08499308cb0387059bf1ea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM tutum/centos:centos6\nMAINTAINER Eric Stiles <ets04uga@yahoo.com>\n#  ######################################\n#   install necessary OS packages\nRUN yum -y install which \\\n && yum -y install libaio \\\n && yum -y install glibc.i686 \\\n && yum -y install sudo \\\n && yum -y install tar \\\n && yum -y install unzip.x86_64\n#  ######################################\n#   environment variables\n#   user information\nENV USER=\"endeca\"\nENV USER_HOME_DIR=\"/home/$USER\"\n#   environment variable for local location\nENV LOCAL_SCRIPTS=\"scripts\"\nENV LOCAL_TOOLS=\"tools\"\n#   environment variables for installables\nENV BASE_TMP_INSTALL=\"/tmp\"\nENV BASE_TMP_ENDECA_INSTALL=\"$BASE_TMP_INSTALL/endeca\"\nENV BASE_TMP_PACKAGE_INSTALL=\"$BASE_TMP_ENDECA_INSTALL/packages\"\n#   environment variables for endeca location\nENV BASE_DIR=\"/appl\"\nENV BASE_ENDECA_DIR=\"$BASE_DIR/endeca\"\nENV SCRIPT_DIR=\"$BASE_ENDECA_DIR/bin\"\n#   platform services silent install specific env variables\nENV ENDECA_HTTP_SERVICE_PORT=\"8888\"\nENV ENDECA_HTTP_SERVICE_SHUTDOWN_PORT=\"8090\"\nENV ENDECA_CONTROL_SYSTEM_JCD_PORT=\"8088\"\nENV RUN_EAC_CONTROLLER=\"Y\"\nENV ENDECA_MDEX_INSTALL_DIR=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV INSTALL_REF_APPS=\"Y\"\n#   CAS silent install specific env variables\nENV CAS_PORT=\"8500\"\nENV CAS_SHUTDOWN_PORT=\"8506\"\nENV CAS_HOST=\"localhost\"\n#  ######################################\n#   create directories for copying initial endeca packages\nRUN mkdir -p $BASE_TMP_PACKAGE_INSTALL \\\n && chmod -R 777 $BASE_TMP_ENDECA_INSTALL\n#   directory for final install of endeca created as part of script directory\nRUN mkdir -p $SCRIPT_DIR\nRUN chmod -R 755 $SCRIPT_DIR\n#  ######################################\n#   Copy script that creates unique password for root and other scripts\nCOPY $LOCAL_SCRIPTS/modsudoers.sh /\nCOPY $LOCAL_SCRIPTS/setup*.sh /\nCOPY $LOCAL_SCRIPTS/start.sh $SCRIPT_DIR/\nCOPY $LOCAL_SCRIPTS/shutdown.sh $SCRIPT_DIR/\nCOPY $LOCAL_SCRIPTS/captureEndecaLogs.sh $SCRIPT_DIR/\nCOPY $LOCAL_SCRIPTS/installDiscoverApp.sh $SCRIPT_DIR/\n#  ######################################\n#   Set properties for scripts to be executable\nRUN chmod +x /*.sh\nRUN chmod +x $SCRIPT_DIR\n#  ######################################\n#  Run commands to create endeca user and modify sudoers\nRUN /setup.sh\n#  ######################################\n#   start copying across all endeca packages\n#\n#  mdex_6.4.1.2.763315_x86_64pc-linux.sh\n#  presAPI_6.4.1.2.763315_x86_64pc-linux.tgz\nCOPY $LOCAL_TOOLS/V40319-01.zip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip\n#  platformservices_614734339_x86_64pc-linux.sh\nCOPY $LOCAL_TOOLS/V40324-01.zip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip\n#  ToolsAndFrameworks\nCOPY $LOCAL_TOOLS/V37716-01.zip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip\n#  cas-3.1.2.1-x86_64pc-linux.RC2.sh\nCOPY $LOCAL_TOOLS/V40311-01.zip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip\n#  relevancy ranking tool\n#  ADD $LOCAL_TOOLS/V31171-01.zip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip\n#  ######################################\n#   Unzip all packages to get install scripts and files\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#  RUN unzip $BASE_TMP_PACKAGE_INSTALL/V35744-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#  RUN unzip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#   set permissions of scripts to run\nRUN chmod +x $BASE_TMP_INSTALL/**/*.sh\n#  ######################################\n#   MDEX INSTALLATION FOLLOWS\nRUN $BASE_TMP_ENDECA_INSTALL/mdex_6.4.1.2.763315_x86_64pc-linux.sh --target $BASE_DIR\n#   copy mdex environment variables to .bashrc\nRUN /setup2.sh\n#   set mdex environment variables for rest of install\nENV ENDECA_MDEX_ROOT=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV PATH=\"$ENDECA_MDEX_ROOT/bin:$PATH\"\n#  ######################################\n#   PLATFORM INSTALLATION FOLLOWS\n#  create silent install text file\nRUN echo $ENDECA_HTTP_SERVICE_PORT > $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_HTTP_SERVICE_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_CONTROL_SYSTEM_JCD_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $RUN_EAC_CONTROLLER >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_MDEX_INSTALL_DIR >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $INSTALL_REF_APPS >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\n#   install platform services\nRUN $BASE_TMP_ENDECA_INSTALL/platformservices_614734339_x86_64pc-linux.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\nRUN cat $BASE_ENDECA_DIR/PlatformServices/workspace/setup/installer_sh.ini >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n#  RUN SETUP\n#   set platform services variables for rest of install\nENV VERSION=\"6.1.4\"\nENV BUILD_VERSION=\"6.1.4.734339\"\nENV ARCH_OS=\"x86_64pc-linux\"\nENV PRODUCT=\"IAP\"\nENV ENDECA_INSTALL_BASE=\"$BASE_DIR\"\nENV ENDECA_ROOT=\"$BASE_ENDECA_DIR/PlatformServices/6.1.4\"\nENV PERLLIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERLLIB\"\nENV PERL5LIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERL5LIB\"\nENV PATH=\"$ENDECA_ROOT/bin:$ENDECA_ROOT/perl/bin:$ENDECA_ROOT/utilities:$PATH\"\nENV ENDECA_CONF=\"$BASE_ENDECA_DIR/PlatformServices/workspace\"\n#    ENDECA_REFERENCE_DIR points to the directory the reference implementations\n#    are installed in.  It is not required to run any Endeca software.\nENV ENDECA_REFERENCE_DIR=\"$BASE_ENDECA_DIR/PlatformServices/reference\"\n#  ######################################\n#   TOOLS AND FRAMEWORKS INSTALLATION FOLLOWS\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip -d $BASE_ENDECA_DIR\n#   set tools and frameworks variables for rest of install\nENV ENDECA_TOOLS_ROOT=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/\"\nENV ENDECA_TOOLS_CONF=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace\"\nRUN echo 'ENDECA_TOOLS_ROOT=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/' >> $USER_HOME_DIR/.bashrc\nRUN echo 'ENDECA_TOOLS_CONF=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace' >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n#  ######################################\n#   CAS INSTALLATION FOLLOWS\n#  create silent install text file\nRUN echo $CAS_PORT > $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_HOST >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n#  install CAS\nRUN $BASE_TMP_ENDECA_INSTALL/cas-3.1.2.1-x86_64pc-linux.RC2.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n#  ######################################\n#\n#   TODO TODO TODO TODO\n#\n#   install relevancy evaluator\n#  RUN mv /tmp/endeca/Endeca/Solutions $BASE_ENDECA_DIR\n#  RUN cp $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/assembler/lib/endeca_navigation-6.4.0.jar $BASE_ENDECA_DIR/Solutions/relrankEvaluator-2.1.2/relrankEvaluator/WEB-INF/lib/endeca_navigation.jar\n#   write context into relrankEvaluator.xml file\n#  RUN /setup5.sh\n#   place correct extensions file\n#  ADD tools/ws-extensions.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-extensions.xml\n#   place correct menu items\n#  ADD tools/ws-mainMenu.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-mainMenu.xml\n#  ######################################\n#   create apps directory\nRUN mkdir $BASE_ENDECA_DIR/apps\n#  ######################################\n#   set user and permissions to endeca\nRUN chown -R endeca.endeca $BASE_ENDECA_DIR/\nRUN chmod -R 755 $BASE_ENDECA_DIR/\n#  ######################################\n#   install is done start cleanup to remove initial packages\nRUN rm -rf $BASE_TMP_ENDECA_INSTALL\nRUN rm /setup*.sh\nENV AUTHORIZED_KEYS=\"**None**\"\nEXPOSE 22/tcp\nCMD [\"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM tutum/centos:centos6\nMAINTAINER Eric Stiles <ets04uga@yahoo.com>\n# ######################################\n#  install necessary OS packages\nRUN yum -y install which \\\n && yum -y install libaio \\\n && yum -y install glibc.i686 \\\n && yum -y install sudo \\\n && yum -y install tar \\\n && yum -y install unzip.x86_64\n# ######################################\n#  environment variables\n#  user information\nENV USER=\"endeca\"\nENV USER_HOME_DIR=\"/home/$USER\"\n#  environment variable for local location\nENV LOCAL_SCRIPTS=\"scripts\"\nENV LOCAL_TOOLS=\"tools\"\n#  environment variables for installables\nENV BASE_TMP_INSTALL=\"/tmp\"\nENV BASE_TMP_ENDECA_INSTALL=\"$BASE_TMP_INSTALL/endeca\"\nENV BASE_TMP_PACKAGE_INSTALL=\"$BASE_TMP_ENDECA_INSTALL/packages\"\n#  environment variables for endeca location\nENV BASE_DIR=\"/appl\"\nENV BASE_ENDECA_DIR=\"$BASE_DIR/endeca\"\nENV SCRIPT_DIR=\"$BASE_ENDECA_DIR/bin\"\n#  platform services silent install specific env variables\nENV ENDECA_HTTP_SERVICE_PORT=\"8888\"\nENV ENDECA_HTTP_SERVICE_SHUTDOWN_PORT=\"8090\"\nENV ENDECA_CONTROL_SYSTEM_JCD_PORT=\"8088\"\nENV RUN_EAC_CONTROLLER=\"Y\"\nENV ENDECA_MDEX_INSTALL_DIR=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV INSTALL_REF_APPS=\"Y\"\n#  CAS silent install specific env variables\nENV CAS_PORT=\"8500\"\nENV CAS_SHUTDOWN_PORT=\"8506\"\nENV CAS_HOST=\"localhost\"\n# ######################################\n#  create directories for copying initial endeca packages\nRUN mkdir -p $BASE_TMP_PACKAGE_INSTALL \\\n && chmod -R 777 $BASE_TMP_ENDECA_INSTALL\n#  directory for final install of endeca created as part of script directory\nRUN mkdir -p $SCRIPT_DIR\nRUN chmod -R 755 $SCRIPT_DIR\n# ######################################\n#  Copy script that creates unique password for root and other scripts\nADD $LOCAL_SCRIPTS/modsudoers.sh /\nADD $LOCAL_SCRIPTS/setup*.sh /\nADD $LOCAL_SCRIPTS/start.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/shutdown.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/captureEndecaLogs.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/installDiscoverApp.sh $SCRIPT_DIR/\n# ######################################\n#  Set properties for scripts to be executable\nRUN chmod +x /*.sh\nRUN chmod +x $SCRIPT_DIR\n# ######################################\n# Run commands to create endeca user and modify sudoers\nRUN /setup.sh\n# ######################################\n#  start copying across all endeca packages\n#\n# mdex_6.4.1.2.763315_x86_64pc-linux.sh\n# presAPI_6.4.1.2.763315_x86_64pc-linux.tgz\nADD $LOCAL_TOOLS/V40319-01.zip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip\n# platformservices_614734339_x86_64pc-linux.sh\nADD $LOCAL_TOOLS/V40324-01.zip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip\n# ToolsAndFrameworks\nADD $LOCAL_TOOLS/V37716-01.zip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip\n# cas-3.1.2.1-x86_64pc-linux.RC2.sh\nADD $LOCAL_TOOLS/V40311-01.zip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip\n# relevancy ranking tool\n# ADD $LOCAL_TOOLS/V31171-01.zip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip\n# ######################################\n#  Unzip all packages to get install scripts and files\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip -d $BASE_TMP_ENDECA_INSTALL\n# RUN unzip $BASE_TMP_PACKAGE_INSTALL/V35744-01.zip -d $BASE_TMP_ENDECA_INSTALL\n# RUN unzip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#  set permissions of scripts to run\nRUN chmod +x $BASE_TMP_INSTALL/**/*.sh\n# ######################################\n#  MDEX INSTALLATION FOLLOWS\nRUN $BASE_TMP_ENDECA_INSTALL/mdex_6.4.1.2.763315_x86_64pc-linux.sh --target $BASE_DIR\n#  copy mdex environment variables to .bashrc\nRUN /setup2.sh\n#  set mdex environment variables for rest of install\nENV ENDECA_MDEX_ROOT=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV PATH=\"$ENDECA_MDEX_ROOT/bin:$PATH\"\n# ######################################\n#  PLATFORM INSTALLATION FOLLOWS\n# create silent install text file\nRUN echo $ENDECA_HTTP_SERVICE_PORT > $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_HTTP_SERVICE_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_CONTROL_SYSTEM_JCD_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $RUN_EAC_CONTROLLER >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_MDEX_INSTALL_DIR >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $INSTALL_REF_APPS >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\n#  install platform services\nRUN $BASE_TMP_ENDECA_INSTALL/platformservices_614734339_x86_64pc-linux.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\nRUN cat $BASE_ENDECA_DIR/PlatformServices/workspace/setup/installer_sh.ini >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n# RUN SETUP\n#  set platform services variables for rest of install\nENV VERSION=\"6.1.4\"\nENV BUILD_VERSION=\"6.1.4.734339\"\nENV ARCH_OS=\"x86_64pc-linux\"\nENV PRODUCT=\"IAP\"\nENV ENDECA_INSTALL_BASE=\"$BASE_DIR\"\nENV ENDECA_ROOT=\"$BASE_ENDECA_DIR/PlatformServices/6.1.4\"\nENV PERLLIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERLLIB\"\nENV PERL5LIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERL5LIB\"\nENV PATH=\"$ENDECA_ROOT/bin:$ENDECA_ROOT/perl/bin:$ENDECA_ROOT/utilities:$PATH\"\nENV ENDECA_CONF=\"$BASE_ENDECA_DIR/PlatformServices/workspace\"\n#   ENDECA_REFERENCE_DIR points to the directory the reference implementations\n#   are installed in.  It is not required to run any Endeca software.\nENV ENDECA_REFERENCE_DIR=\"$BASE_ENDECA_DIR/PlatformServices/reference\"\n# ######################################\n#  TOOLS AND FRAMEWORKS INSTALLATION FOLLOWS\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip -d $BASE_ENDECA_DIR\n#  set tools and frameworks variables for rest of install\nENV ENDECA_TOOLS_ROOT=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/\"\nENV ENDECA_TOOLS_CONF=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace\"\nRUN echo 'ENDECA_TOOLS_ROOT=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/' >> $USER_HOME_DIR/.bashrc\nRUN echo 'ENDECA_TOOLS_CONF=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace' >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n# ######################################\n#  CAS INSTALLATION FOLLOWS\n# create silent install text file\nRUN echo $CAS_PORT > $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_HOST >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n# install CAS\nRUN $BASE_TMP_ENDECA_INSTALL/cas-3.1.2.1-x86_64pc-linux.RC2.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n# ######################################\n#\n#  TODO TODO TODO TODO\n#\n#  install relevancy evaluator\n# RUN mv /tmp/endeca/Endeca/Solutions $BASE_ENDECA_DIR\n# RUN cp $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/assembler/lib/endeca_navigation-6.4.0.jar $BASE_ENDECA_DIR/Solutions/relrankEvaluator-2.1.2/relrankEvaluator/WEB-INF/lib/endeca_navigation.jar\n#  write context into relrankEvaluator.xml file\n# RUN /setup5.sh\n#  place correct extensions file\n# ADD tools/ws-extensions.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-extensions.xml\n#  place correct menu items\n# ADD tools/ws-mainMenu.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-mainMenu.xml\n# ######################################\n#  create apps directory\nRUN mkdir $BASE_ENDECA_DIR/apps\n# ######################################\n#  set user and permissions to endeca\nRUN chown -R endeca.endeca $BASE_ENDECA_DIR/\nRUN chmod -R 755 $BASE_ENDECA_DIR/\n# ######################################\n#  install is done start cleanup to remove initial packages\nRUN rm -rf $BASE_TMP_ENDECA_INSTALL\nRUN rm /setup*.sh\nENV AUTHORIZED_KEYS=\"**None**\"\nEXPOSE 22/tcp\nCMD [\"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"9a540e4900fe4f9168602efa64f2a949","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tutum/centos:centos6\nMAINTAINER Eric Stiles <ets04uga@yahoo.com>\n#  ######################################\n#   install necessary OS packages\nRUN yum -y install which \\\n && yum -y install libaio \\\n && yum -y install glibc.i686 \\\n && yum -y install sudo \\\n && yum -y install tar \\\n && yum -y install unzip.x86_64\n#  ######################################\n#   environment variables\n#   user information\nENV USER=\"endeca\"\nENV USER_HOME_DIR=\"/home/$USER\"\n#   environment variable for local location\nENV LOCAL_SCRIPTS=\"scripts\"\nENV LOCAL_TOOLS=\"tools\"\n#   environment variables for installables\nENV BASE_TMP_INSTALL=\"/tmp\"\nENV BASE_TMP_ENDECA_INSTALL=\"$BASE_TMP_INSTALL/endeca\"\nENV BASE_TMP_PACKAGE_INSTALL=\"$BASE_TMP_ENDECA_INSTALL/packages\"\n#   environment variables for endeca location\nENV BASE_DIR=\"/appl\"\nENV BASE_ENDECA_DIR=\"$BASE_DIR/endeca\"\nENV SCRIPT_DIR=\"$BASE_ENDECA_DIR/bin\"\n#   platform services silent install specific env variables\nENV ENDECA_HTTP_SERVICE_PORT=\"8888\"\nENV ENDECA_HTTP_SERVICE_SHUTDOWN_PORT=\"8090\"\nENV ENDECA_CONTROL_SYSTEM_JCD_PORT=\"8088\"\nENV RUN_EAC_CONTROLLER=\"Y\"\nENV ENDECA_MDEX_INSTALL_DIR=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV INSTALL_REF_APPS=\"Y\"\n#   CAS silent install specific env variables\nENV CAS_PORT=\"8500\"\nENV CAS_SHUTDOWN_PORT=\"8506\"\nENV CAS_HOST=\"localhost\"\n#  ######################################\n#   create directories for copying initial endeca packages\nRUN mkdir -p $BASE_TMP_PACKAGE_INSTALL \\\n && chmod -R 777 $BASE_TMP_ENDECA_INSTALL\n#   directory for final install of endeca created as part of script directory\nRUN mkdir -p $SCRIPT_DIR\nRUN chmod -R 755 $SCRIPT_DIR\n#  ######################################\n#   Copy script that creates unique password for root and other scripts\nADD $LOCAL_SCRIPTS/modsudoers.sh /\nADD $LOCAL_SCRIPTS/setup*.sh /\nADD $LOCAL_SCRIPTS/start.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/shutdown.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/captureEndecaLogs.sh $SCRIPT_DIR/\nADD $LOCAL_SCRIPTS/installDiscoverApp.sh $SCRIPT_DIR/\n#  ######################################\n#   Set properties for scripts to be executable\nRUN chmod +x /*.sh\nRUN chmod +x $SCRIPT_DIR\n#  ######################################\n#  Run commands to create endeca user and modify sudoers\nRUN /setup.sh\n#  ######################################\n#   start copying across all endeca packages\n#\n#  mdex_6.4.1.2.763315_x86_64pc-linux.sh\n#  presAPI_6.4.1.2.763315_x86_64pc-linux.tgz\nADD $LOCAL_TOOLS/V40319-01.zip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip\n#  platformservices_614734339_x86_64pc-linux.sh\nADD $LOCAL_TOOLS/V40324-01.zip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip\n#  ToolsAndFrameworks\nADD $LOCAL_TOOLS/V37716-01.zip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip\n#  cas-3.1.2.1-x86_64pc-linux.RC2.sh\nADD $LOCAL_TOOLS/V40311-01.zip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip\n#  relevancy ranking tool\n#  ADD $LOCAL_TOOLS/V31171-01.zip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip\n#  ######################################\n#   Unzip all packages to get install scripts and files\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V40319-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40324-01.zip -d $BASE_TMP_ENDECA_INSTALL \\\n && unzip $BASE_TMP_PACKAGE_INSTALL/V40311-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#  RUN unzip $BASE_TMP_PACKAGE_INSTALL/V35744-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#  RUN unzip $BASE_TMP_PACKAGE_INSTALL/V31171-01.zip -d $BASE_TMP_ENDECA_INSTALL\n#   set permissions of scripts to run\nRUN chmod +x $BASE_TMP_INSTALL/**/*.sh\n#  ######################################\n#   MDEX INSTALLATION FOLLOWS\nRUN $BASE_TMP_ENDECA_INSTALL/mdex_6.4.1.2.763315_x86_64pc-linux.sh --target $BASE_DIR\n#   copy mdex environment variables to .bashrc\nRUN /setup2.sh\n#   set mdex environment variables for rest of install\nENV ENDECA_MDEX_ROOT=\"$BASE_ENDECA_DIR/MDEX/6.4.1.2\"\nENV PATH=\"$ENDECA_MDEX_ROOT/bin:$PATH\"\n#  ######################################\n#   PLATFORM INSTALLATION FOLLOWS\n#  create silent install text file\nRUN echo $ENDECA_HTTP_SERVICE_PORT > $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_HTTP_SERVICE_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_CONTROL_SYSTEM_JCD_PORT >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $RUN_EAC_CONTROLLER >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $ENDECA_MDEX_INSTALL_DIR >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt \\\n && echo $INSTALL_REF_APPS >> $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\n#   install platform services\nRUN $BASE_TMP_ENDECA_INSTALL/platformservices_614734339_x86_64pc-linux.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/platformservices-silent.txt\nRUN cat $BASE_ENDECA_DIR/PlatformServices/workspace/setup/installer_sh.ini >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n#  RUN SETUP\n#   set platform services variables for rest of install\nENV VERSION=\"6.1.4\"\nENV BUILD_VERSION=\"6.1.4.734339\"\nENV ARCH_OS=\"x86_64pc-linux\"\nENV PRODUCT=\"IAP\"\nENV ENDECA_INSTALL_BASE=\"$BASE_DIR\"\nENV ENDECA_ROOT=\"$BASE_ENDECA_DIR/PlatformServices/6.1.4\"\nENV PERLLIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERLLIB\"\nENV PERL5LIB=\"$ENDECA_ROOT/lib/perl:$ENDECA_ROOT/lib/perl/Control:$ENDECA_ROOT/perl/lib:$ENDECA_ROOT/perl/lib/site_perl:$PERL5LIB\"\nENV PATH=\"$ENDECA_ROOT/bin:$ENDECA_ROOT/perl/bin:$ENDECA_ROOT/utilities:$PATH\"\nENV ENDECA_CONF=\"$BASE_ENDECA_DIR/PlatformServices/workspace\"\n#    ENDECA_REFERENCE_DIR points to the directory the reference implementations\n#    are installed in.  It is not required to run any Endeca software.\nENV ENDECA_REFERENCE_DIR=\"$BASE_ENDECA_DIR/PlatformServices/reference\"\n#  ######################################\n#   TOOLS AND FRAMEWORKS INSTALLATION FOLLOWS\nRUN unzip $BASE_TMP_PACKAGE_INSTALL/V37716-01.zip -d $BASE_ENDECA_DIR\n#   set tools and frameworks variables for rest of install\nENV ENDECA_TOOLS_ROOT=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/\"\nENV ENDECA_TOOLS_CONF=\"$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace\"\nRUN echo 'ENDECA_TOOLS_ROOT=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/' >> $USER_HOME_DIR/.bashrc\nRUN echo 'ENDECA_TOOLS_CONF=$BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.2/server/workspace' >> $USER_HOME_DIR/.bashrc\nRUN source $USER_HOME_DIR/.bashrc\n#  ######################################\n#   CAS INSTALLATION FOLLOWS\n#  create silent install text file\nRUN echo $CAS_PORT > $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_SHUTDOWN_PORT >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt \\\n && echo $CAS_HOST >> $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n#  install CAS\nRUN $BASE_TMP_ENDECA_INSTALL/cas-3.1.2.1-x86_64pc-linux.RC2.sh --silent --target $BASE_DIR < $BASE_TMP_ENDECA_INSTALL/cas-silent.txt\n#  ######################################\n#\n#   TODO TODO TODO TODO\n#\n#   install relevancy evaluator\n#  RUN mv /tmp/endeca/Endeca/Solutions $BASE_ENDECA_DIR\n#  RUN cp $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/assembler/lib/endeca_navigation-6.4.0.jar $BASE_ENDECA_DIR/Solutions/relrankEvaluator-2.1.2/relrankEvaluator/WEB-INF/lib/endeca_navigation.jar\n#   write context into relrankEvaluator.xml file\n#  RUN /setup5.sh\n#   place correct extensions file\n#  ADD tools/ws-extensions.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-extensions.xml\n#   place correct menu items\n#  ADD tools/ws-mainMenu.xml $BASE_ENDECA_DIR/ToolsAndFrameworks/3.1.1/server/workspace/conf/ws-mainMenu.xml\n#  ######################################\n#   create apps directory\nRUN mkdir $BASE_ENDECA_DIR/apps\n#  ######################################\n#   set user and permissions to endeca\nRUN chown -R endeca.endeca $BASE_ENDECA_DIR/\nRUN chmod -R 755 $BASE_ENDECA_DIR/\n#  ######################################\n#   install is done start cleanup to remove initial packages\nRUN rm -rf $BASE_TMP_ENDECA_INSTALL\nRUN rm /setup*.sh\nENV AUTHORIZED_KEYS=\"**None**\"\nEXPOSE 22/tcp\nCMD [\"/run.sh\"]\n","originalDockerfileUglifiedHash":"6aebaf5fabf17b4aa8f25d736dfe2181","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f75a56f02c914ea96e2d8430df0a66700767bf05.dockerfile"}