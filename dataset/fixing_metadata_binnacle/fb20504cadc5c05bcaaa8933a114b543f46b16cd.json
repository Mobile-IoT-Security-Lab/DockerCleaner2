{"seed":1862679505,"processedDockerfileHash":"e2d53418c81de38f280dc4a5fbaba1ca","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER dekkerlab\nUSER root\n#    a lot of it is stollen from :\n#   https://hub.docker.com/r/genomicpariscentre/bioperl/dockerfile/\n#   install a bunch of system-wide stuff\n#   and figure out later what's essential ...\nRUN apt-get update --fix-missing \\\n && apt-get install --no-install-recommends apt-utils=1.2.35 wget=1.17.1-1ubuntu1.5 curl=7.47.0-1ubuntu2.19 bzip2=1.0.6-8ubuntu0.2 pkg-config=0.29.1-0ubuntu1 libbz2-dev=1.0.6-8ubuntu0.2 git=1:2.7.4-0ubuntu1.10 build-essential=12.1ubuntu2 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 locales=2.23-0ubuntu11.3 vim=2:7.4.1689-3ubuntu1.5 fontconfig=2.11.94-0ubuntu1.1 perl=5.22.1-9ubuntu0.9 expat=2.1.0-7ubuntu0.16.04.5 libexpat-dev ttf-dejavu=2.35-1 cpanminus=1.7040-1 libgd-perl=2.53-2.1 -q -y\n#   Set the locale\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install perl modules \nRUN apt-get install --no-install-recommends cpanminus=1.7040-1 -y\nRUN cpanm CPAN::Meta readline Term::ReadKey YAML Digest::SHA Module::Build ExtUtils::MakeMaker Test::More Data::Stag Config::Simple Statistics::Lite Statistics::Descriptive\nRUN apt-get install --no-install-recommends libarchive-zip-perl=1.56-2ubuntu0.1 --yes\n#   Install GD\nRUN apt-get remove --yes libgd-gd2-perl\nRUN apt-get install --no-install-recommends libgd2-noxpm-dev --yes\nRUN cpanm GD GD::Graph GD::Graph::smoothlines\n#   install imagemagick\nRUN apt-get install --no-install-recommends imagemagick=8:6.8.9.9-7ubuntu5.16 --yes\n#   Install conda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh \\\n && bash Miniconda3-latest-Linux-x86_64.sh -p /miniconda3 -b \\\n && rm Miniconda3-latest-Linux-x86_64.sh\nENV PATH=\"/miniconda3/bin:${PATH}\"\n#   Install conda dependencies\nCOPY cworld_environment.yml /\nCOPY VERSION /\nRUN pwd\nRUN conda config --set always_yes yes --set changeps1 no \\\n && conda config --add channels conda-forge \\\n && conda config --add channels defaults \\\n && conda config --add channels bioconda \\\n && conda config --get \\\n && conda update -q conda \\\n && conda info -a \\\n && conda env update -q -n root --file cworld_environment.yml \\\n && conda clean --tarballs --index-cache --lock\nRUN conda install pysam\n#  export MKL OMP etc ...\n#   # get the version of the GDlib:\n#   RUN perl -MGD -e 'print $GD::VERSION .\"\\n\";'\n#   # local isntall\n#   perl Build.PL\n#   ./Build\n#   ./Build install --install_base /your/custom/dir\n#   (ensure /your/custom/dir is added to your PERL5LIB path)\n#   e.g.\n#   ./Build install --install_base ~/perl5\n#   # then in .bashrc\n#   export PERL5LIB=${PERL5LIB}:/home/<yourusername>/perl5/lib/perl5\n#  RUN git clone https://github.com/dekkerlab/cworld-dekker.git\nWORKDIR /cworld-dekker\nCOPY Build.PL .\nCOPY lib ./lib\nCOPY scripts ./scripts\nCOPY MANIFEST .\nRUN pwd\nRUN ls -lah\n#   global install ...\nRUN perl ./Build.PL\nRUN ./Build\nRUN ./Build install\nRUN ./Build install --install_base /perl5\nENV PERL5LIB=\"${PERL5LIB}:/perl5/lib/perl5\"\nRUN ./Build distclean\n#   After installing the module, you should be free to run anything in scripts/ e.g.\n#   $ perl scripts/heatmap.pl\n#   WORKDIR /root\n#   it should be more civilized, but for now, let's hope it just works\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER dekkerlab\nUSER root\n#   a lot of it is stollen from :\n#  https://hub.docker.com/r/genomicpariscentre/bioperl/dockerfile/\n#  install a bunch of system-wide stuff\n#  and figure out later what's essential ...\nRUN apt-get update --fix-missing \\\n && apt-get install apt-utils wget curl bzip2 pkg-config libbz2-dev git build-essential zlib1g-dev locales vim fontconfig perl expat libexpat-dev ttf-dejavu cpanminus libgd-perl -q -y\n#  Set the locale\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#  Install perl modules \nRUN apt-get install cpanminus -y\nRUN cpanm CPAN::Meta readline Term::ReadKey YAML Digest::SHA Module::Build ExtUtils::MakeMaker Test::More Data::Stag Config::Simple Statistics::Lite Statistics::Descriptive\nRUN apt-get install libarchive-zip-perl --yes\n#  Install GD\nRUN apt-get remove --yes libgd-gd2-perl\nRUN apt-get install libgd2-noxpm-dev --yes\nRUN cpanm GD GD::Graph GD::Graph::smoothlines\n#  install imagemagick\nRUN apt-get install imagemagick --yes\n#  Install conda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh \\\n && bash Miniconda3-latest-Linux-x86_64.sh -p /miniconda3 -b \\\n && rm Miniconda3-latest-Linux-x86_64.sh\nENV PATH=\"/miniconda3/bin:${PATH}\"\n#  Install conda dependencies\nADD cworld_environment.yml /\nADD VERSION /\nRUN pwd\nRUN conda config --set always_yes yes --set changeps1 no \\\n && conda config --add channels conda-forge \\\n && conda config --add channels defaults \\\n && conda config --add channels bioconda \\\n && conda config --get \\\n && conda update -q conda \\\n && conda info -a \\\n && conda env update -q -n root --file cworld_environment.yml \\\n && conda clean --tarballs --index-cache --lock\nRUN conda install pysam\n# export MKL OMP etc ...\n#  # get the version of the GDlib:\n#  RUN perl -MGD -e 'print $GD::VERSION .\"\\n\";'\n#  # local isntall\n#  perl Build.PL\n#  ./Build\n#  ./Build install --install_base /your/custom/dir\n#  (ensure /your/custom/dir is added to your PERL5LIB path)\n#  e.g.\n#  ./Build install --install_base ~/perl5\n#  # then in .bashrc\n#  export PERL5LIB=${PERL5LIB}:/home/<yourusername>/perl5/lib/perl5\n# RUN git clone https://github.com/dekkerlab/cworld-dekker.git\nWORKDIR /cworld-dekker\nADD Build.PL .\nADD lib ./lib\nADD scripts ./scripts\nADD MANIFEST .\nRUN pwd\nRUN ls -lah\n#  global install ...\nRUN perl ./Build.PL\nRUN ./Build\nRUN ./Build install\nRUN ./Build install --install_base /perl5\nENV PERL5LIB=\"${PERL5LIB}:/perl5/lib/perl5\"\nRUN ./Build distclean\n#  After installing the module, you should be free to run anything in scripts/ e.g.\n#  $ perl scripts/heatmap.pl\n#  WORKDIR /root\n#  it should be more civilized, but for now, let's hope it just works\n","injectedSmells":[],"originalDockerfileHash":"bd6acdd1a1502ff78938dc0a6f063bd1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER dekkerlab\nUSER root\n#    a lot of it is stollen from :\n#   https://hub.docker.com/r/genomicpariscentre/bioperl/dockerfile/\n#   install a bunch of system-wide stuff\n#   and figure out later what's essential ...\nRUN apt-get update --fix-missing \\\n && apt-get install apt-utils wget curl bzip2 pkg-config libbz2-dev git build-essential zlib1g-dev locales vim fontconfig perl expat libexpat-dev ttf-dejavu cpanminus libgd-perl -q -y\n#   Set the locale\nRUN locale-gen en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install perl modules \nRUN apt-get install cpanminus -y\nRUN cpanm CPAN::Meta readline Term::ReadKey YAML Digest::SHA Module::Build ExtUtils::MakeMaker Test::More Data::Stag Config::Simple Statistics::Lite Statistics::Descriptive\nRUN apt-get install libarchive-zip-perl --yes\n#   Install GD\nRUN apt-get remove --yes libgd-gd2-perl\nRUN apt-get install libgd2-noxpm-dev --yes\nRUN cpanm GD GD::Graph GD::Graph::smoothlines\n#   install imagemagick\nRUN apt-get install imagemagick --yes\n#   Install conda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh \\\n && bash Miniconda3-latest-Linux-x86_64.sh -p /miniconda3 -b \\\n && rm Miniconda3-latest-Linux-x86_64.sh\nENV PATH=\"/miniconda3/bin:${PATH}\"\n#   Install conda dependencies\nADD cworld_environment.yml /\nADD VERSION /\nRUN pwd\nRUN conda config --set always_yes yes --set changeps1 no \\\n && conda config --add channels conda-forge \\\n && conda config --add channels defaults \\\n && conda config --add channels bioconda \\\n && conda config --get \\\n && conda update -q conda \\\n && conda info -a \\\n && conda env update -q -n root --file cworld_environment.yml \\\n && conda clean --tarballs --index-cache --lock\nRUN conda install pysam\n#  export MKL OMP etc ...\n#   # get the version of the GDlib:\n#   RUN perl -MGD -e 'print $GD::VERSION .\"\\n\";'\n#   # local isntall\n#   perl Build.PL\n#   ./Build\n#   ./Build install --install_base /your/custom/dir\n#   (ensure /your/custom/dir is added to your PERL5LIB path)\n#   e.g.\n#   ./Build install --install_base ~/perl5\n#   # then in .bashrc\n#   export PERL5LIB=${PERL5LIB}:/home/<yourusername>/perl5/lib/perl5\n#  RUN git clone https://github.com/dekkerlab/cworld-dekker.git\nWORKDIR /cworld-dekker\nADD Build.PL .\nADD lib ./lib\nADD scripts ./scripts\nADD MANIFEST .\nRUN pwd\nRUN ls -lah\n#   global install ...\nRUN perl ./Build.PL\nRUN ./Build\nRUN ./Build install\nRUN ./Build install --install_base /perl5\nENV PERL5LIB=\"${PERL5LIB}:/perl5/lib/perl5\"\nRUN ./Build distclean\n#   After installing the module, you should be free to run anything in scripts/ e.g.\n#   $ perl scripts/heatmap.pl\n#   WORKDIR /root\n#   it should be more civilized, but for now, let's hope it just works\n","originalDockerfileUglifiedHash":"87457ee696e2ccef93444c1d6ee72b91","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fb20504cadc5c05bcaaa8933a114b543f46b16cd.dockerfile"}