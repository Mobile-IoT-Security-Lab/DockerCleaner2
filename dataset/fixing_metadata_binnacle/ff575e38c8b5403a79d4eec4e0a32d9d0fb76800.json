{"seed":368571061,"processedDockerfileHash":"16a2218873d656ee38208083a733d433","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM zcalusic/debian-stretch AS builder\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nENV NGINX_VERSION=\"1.15.8\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc=4:12.2.0-3ubuntu1 git=1:2.39.2-1ubuntu1 libc6-dev=2.37-0ubuntu2 libgd-dev=2.3.3-7ubuntu2 libgeoip-dev=1.6.12-10 libpcre3-dev=2:8.39-15 libssl-dev=3.0.8-1ubuntu1 libxslt1-dev=1.1.35-1 make=4.3-4.1build1 -y \\\n && cd /usr/src \\\n && wget -O- \"http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz\" | tar xzo \\\n && git clone https://github.com/GUI/nginx-upstream-dynamic-servers \\\n && cd \"/usr/src/nginx-${NGINX_VERSION}\" \\\n && ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/dev/stderr --http-log-path=/dev/stdout --pid-path=/run/nginx.pid --lock-path=/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=www-data --group=www-data --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_geoip_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module --with-mail --with-mail_ssl_module --with-stream --with-stream_geoip_module --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC' --with-ld-opt='-s -Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie' --add-module=/usr/src/nginx-upstream-dynamic-servers \\\n && make -j \"$( nproc ;)\" install\nFROM zcalusic/debian-stretch\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nARG URL\nARG VCS_URL\nARG VCS_REF\nARG BUILD_DATE\nLABEL org.label-schema.name=\"NGINX in Docker\" \\\n      org.label-schema.description=\"Run NGINX high-performance HTTP server and reverse proxy in a Docker container\" \\\n      org.label-schema.vendor=\"Zlatko Čalušić\" \\\n      org.label-schema.license=\"MIT\" \\\n      org.label-schema.url=\"$URL\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.schema-version=\"1.0\"\nCOPY --from=builder /usr/sbin/nginx /usr/sbin/nginx\nCOPY --from=builder /etc/nginx /etc/nginx.default\nRUN apt-get update \\\n && apt-get install --no-install-recommends geoip-database=20230203-1 geoip-database-extra libgd3=2.3.3-7ubuntu2 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir /var/cache/nginx\nEXPOSE 80/tcp 443/tcp\nCOPY entrypoint.sh /entrypoint.sh\nCMD [\"/entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM zcalusic/debian-stretch AS builder\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nENV NGINX_VERSION=\"1.15.8\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc git libc6-dev libgd-dev libgeoip-dev libpcre3-dev libssl-dev libxslt1-dev make -y \\\n && cd /usr/src \\\n && wget -O- \"http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz\" | tar xzo \\\n && git clone https://github.com/GUI/nginx-upstream-dynamic-servers \\\n && cd \"/usr/src/nginx-${NGINX_VERSION}\" \\\n && ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/dev/stderr --http-log-path=/dev/stdout --pid-path=/run/nginx.pid --lock-path=/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=www-data --group=www-data --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_geoip_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module --with-mail --with-mail_ssl_module --with-stream --with-stream_geoip_module --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC' --with-ld-opt='-s -Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie' --add-module=/usr/src/nginx-upstream-dynamic-servers \\\n && make -j \"$( nproc ;)\" install\nFROM zcalusic/debian-stretch\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nARG URL\nARG VCS_URL\nARG VCS_REF\nARG BUILD_DATE\nLABEL org.label-schema.name=\"NGINX in Docker\" \\\n      org.label-schema.description=\"Run NGINX high-performance HTTP server and reverse proxy in a Docker container\" \\\n      org.label-schema.vendor=\"Zlatko Čalušić\" \\\n      org.label-schema.license=\"MIT\" \\\n      org.label-schema.url=\"$URL\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.schema-version=\"1.0\"\nCOPY --from=builder /usr/sbin/nginx /usr/sbin/nginx\nCOPY --from=builder /etc/nginx /etc/nginx.default\nRUN apt-get update \\\n && apt-get install --no-install-recommends geoip-database geoip-database-extra libgd3 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir /var/cache/nginx\nEXPOSE 80/tcp 443/tcp\nCOPY entrypoint.sh /entrypoint.sh\nCMD [\"/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"c335c6d1a2c0c1076e63b21815f7f2b5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM zcalusic/debian-stretch AS builder\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nENV NGINX_VERSION=\"1.15.8\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc git libc6-dev libgd-dev libgeoip-dev libpcre3-dev libssl-dev libxslt1-dev make -y \\\n && cd /usr/src \\\n && wget -O- \"http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz\" | tar xzo \\\n && git clone https://github.com/GUI/nginx-upstream-dynamic-servers \\\n && cd \"/usr/src/nginx-${NGINX_VERSION}\" \\\n && ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/dev/stderr --http-log-path=/dev/stdout --pid-path=/run/nginx.pid --lock-path=/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=www-data --group=www-data --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_geoip_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module --with-mail --with-mail_ssl_module --with-stream --with-stream_geoip_module --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC' --with-ld-opt='-s -Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie' --add-module=/usr/src/nginx-upstream-dynamic-servers \\\n && make -j \"$( nproc ;)\" install\nFROM zcalusic/debian-stretch\nMAINTAINER Zlatko Čalušić <zcalusic@bitsync.net>\nARG URL\nARG VCS_URL\nARG VCS_REF\nARG BUILD_DATE\nLABEL org.label-schema.name=\"NGINX in Docker\" \\\n      org.label-schema.description=\"Run NGINX high-performance HTTP server and reverse proxy in a Docker container\" \\\n      org.label-schema.vendor=\"Zlatko Čalušić\" \\\n      org.label-schema.license=\"MIT\" \\\n      org.label-schema.url=\"$URL\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.schema-version=\"1.0\"\nCOPY --from=builder /usr/sbin/nginx /usr/sbin/nginx\nCOPY --from=builder /etc/nginx /etc/nginx.default\nRUN apt-get update \\\n && apt-get install --no-install-recommends geoip-database geoip-database-extra libgd3 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir /var/cache/nginx\nEXPOSE 80/tcp 443/tcp\nCOPY entrypoint.sh /entrypoint.sh\nCMD [\"/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"c335c6d1a2c0c1076e63b21815f7f2b5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ff575e38c8b5403a79d4eec4e0a32d9d0fb76800.dockerfile"}