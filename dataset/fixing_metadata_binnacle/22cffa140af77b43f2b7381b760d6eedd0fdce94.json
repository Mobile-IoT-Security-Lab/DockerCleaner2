{"seed":4066671129,"processedDockerfileHash":"da56135ea9a68caed2317319009626d0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM dockette/stretch\nMAINTAINER Milan Sulc <sulcmil@gmail.com>\n#   SSH\nENV SSH_AUTH_SOCK=\"/ssh-agent\"\n#   PHP\nENV PHP_MODS_DIR=\"/etc/php/7.1/mods-available\"\nENV PHP_CLI_DIR=\"/etc/php/7.1/cli\"\nENV PHP_CLI_CONF_DIR=\"${PHP_CLI_DIR}/conf.d\"\nENV PHP_CGI_DIR=\"/etc/php/7.1/cgi\"\nENV PHP_CGI_CONF_DIR=\"${PHP_CGI_DIR}/conf.d\"\nENV PHP_FPM_DIR=\"/etc/php/7.1/fpm\"\nENV PHP_FPM_CONF_DIR=\"${PHP_FPM_DIR}/conf.d\"\n#   XDEBUG\nENV PHP_IDE_CONFIG=\"serverName=devstack.webserver\"\nENV XDEBUG_CONFIG=\"idekey=PHPSTORM\"\n#   MAILER\nENV PHPMAILER_BIN=\"/usr/local/bin/phpmailer\"\nENV PHPMAILER_PATH=\"/srv/mails\"\n#   DEBUGGING\nENV BLACKFIRE_AGENT=\"tcp://blackfire:8707\"\nENV BLACKFIRE_CLI=\"1.17.0\"\nENV BLACKFIRE_PROBE=\"1.20.0\"\n#   INSTALLATION\nRUN apt-get update \\\n && apt-get dist-upgrade -y \\\n && apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 curl=7.88.1-7ubuntu1 git=1:2.39.2-1ubuntu1 bash-completion=1:2.11-6ubuntu1 apt-transport-https=2.6.0 ca-certificates=20230311 -y \\\n && cp /etc/skel/.bashrc ~/ \\\n && cp /etc/skel/.bashrc /home/dfx/ \\\n && chown dfx:dfx -R /home/dfx/ \\\n && echo \" IdentityFile ~/.ssh/id_rsa\" >> /etc/ssh/ssh_config \\\n && wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg \\\n && echo \"deb https://packages.sury.org/php/ stretch main\" > /etc/apt/sources.list.d/php.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends php7.1-apc php7.1-apcu php7.1-bcmath php7.1-bz2 php7.1-cli php7.1-cgi php7.1-curl php7.1-fpm php7.1-geoip php7.1-gd php7.1-intl php7.1-imagick php7.1-imap php7.1-ldap php7.1-mbstring php7.1-mcrypt php7.1-memcached php7.1-mongo php7.1-mysql php7.1-pgsql php7.1-redis php7.1-soap php7.1-sqlite3 php7.1-ssh2 php7.1-zip php7.1-xmlrpc php7.1-xsl php7.1-xdebug -y \\\n && curl -o ${PHPMAILER_BIN} https://raw.githubusercontent.com/dockette/phpmailer/master/phpmailer \\\n && mkdir -p ${PHPMAILER_PATH} \\\n && chmod 755 ${PHPMAILER_BIN} \\\n && chmod 777 ${PHPMAILER_PATH} \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && composer global require \"hirak/prestissimo:^0.3\" \\\n && composer global require bamarni/symfony-console-autocomplete \\\n && ~/.composer/vendor/bin/symfony-autocomplete --shell bash composer | tee /etc/bash_completion.d/composer \\\n && curl -A \"Docker\" -o /tmp/blackfire.so -D - -L -s https://packages.blackfire.io/binaries/blackfire-php/${BLACKFIRE_PROBE}/blackfire-php-linux_amd64-php-71.so \\\n && mv /tmp/blackfire.so $( php -r \"echo ini_get('extension_dir');\" ;)/blackfire.so \\\n && printf \"extension=blackfire.so\\nblackfire.agent_socket=${BLACKFIRE_AGENT}\\n\" > ${PHP_MODS_DIR}/blackfire.ini \\\n && curl -A \"Docker\" -o /usr/local/bin/blackfire -D - -L -s https://packages.blackfire.io/binaries/blackfire-agent/${BLACKFIRE_CLI}/blackfire-cli-linux_static_amd64 \\\n && chmod +x /usr/local/bin/blackfire \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CLI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CGI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_FPM_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CLI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CGI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_FPM_CONF_DIR}/999-devstack.ini \\\n && apt-get clean -y \\\n && apt-get autoclean -y \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /var/lib/log/* /tmp/* /var/tmp/*\n#   FILES\nCOPY conf.d/devstack.ini ${PHP_MODS_DIR}/devstack.ini\nCOPY fpm/php-fpm.conf ${PHP_FPM_DIR}/php-fpm.conf\n#   WORKDIR\nWORKDIR /srv\n#   COMMAND\nCMD [\"php-fpm7.1\", \"-F\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM dockette/stretch\nMAINTAINER Milan Sulc <sulcmil@gmail.com>\n#  SSH\nENV SSH_AUTH_SOCK=\"/ssh-agent\"\n#  PHP\nENV PHP_MODS_DIR=\"/etc/php/7.1/mods-available\"\nENV PHP_CLI_DIR=\"/etc/php/7.1/cli\"\nENV PHP_CLI_CONF_DIR=\"${PHP_CLI_DIR}/conf.d\"\nENV PHP_CGI_DIR=\"/etc/php/7.1/cgi\"\nENV PHP_CGI_CONF_DIR=\"${PHP_CGI_DIR}/conf.d\"\nENV PHP_FPM_DIR=\"/etc/php/7.1/fpm\"\nENV PHP_FPM_CONF_DIR=\"${PHP_FPM_DIR}/conf.d\"\n#  XDEBUG\nENV PHP_IDE_CONFIG=\"serverName=devstack.webserver\"\nENV XDEBUG_CONFIG=\"idekey=PHPSTORM\"\n#  MAILER\nENV PHPMAILER_BIN=\"/usr/local/bin/phpmailer\"\nENV PHPMAILER_PATH=\"/srv/mails\"\n#  DEBUGGING\nENV BLACKFIRE_AGENT=\"tcp://blackfire:8707\"\nENV BLACKFIRE_CLI=\"1.17.0\"\nENV BLACKFIRE_PROBE=\"1.20.0\"\n#  INSTALLATION\nRUN apt-get update \\\n && apt-get dist-upgrade -y \\\n && apt-get install -y wget curl git bash-completion apt-transport-https ca-certificates \\\n && cp /etc/skel/.bashrc ~/ \\\n && cp /etc/skel/.bashrc /home/dfx/ \\\n && chown dfx:dfx -R /home/dfx/ \\\n && echo \" IdentityFile ~/.ssh/id_rsa\" >> /etc/ssh/ssh_config \\\n && wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg \\\n && echo \"deb https://packages.sury.org/php/ stretch main\" > /etc/apt/sources.list.d/php.list \\\n && apt-get update \\\n && apt-get install -y --no-install-recommends php7.1-apc php7.1-apcu php7.1-bcmath php7.1-bz2 php7.1-cli php7.1-cgi php7.1-curl php7.1-fpm php7.1-geoip php7.1-gd php7.1-intl php7.1-imagick php7.1-imap php7.1-ldap php7.1-mbstring php7.1-mcrypt php7.1-memcached php7.1-mongo php7.1-mysql php7.1-pgsql php7.1-redis php7.1-soap php7.1-sqlite3 php7.1-ssh2 php7.1-zip php7.1-xmlrpc php7.1-xsl php7.1-xdebug \\\n && curl -o ${PHPMAILER_BIN} https://raw.githubusercontent.com/dockette/phpmailer/master/phpmailer \\\n && mkdir -p ${PHPMAILER_PATH} \\\n && chmod 755 ${PHPMAILER_BIN} \\\n && chmod 777 ${PHPMAILER_PATH} \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && composer global require \"hirak/prestissimo:^0.3\" \\\n && composer global require bamarni/symfony-console-autocomplete \\\n && ~/.composer/vendor/bin/symfony-autocomplete --shell bash composer | tee /etc/bash_completion.d/composer \\\n && curl -A \"Docker\" -o /tmp/blackfire.so -D - -L -s https://packages.blackfire.io/binaries/blackfire-php/${BLACKFIRE_PROBE}/blackfire-php-linux_amd64-php-71.so \\\n && mv /tmp/blackfire.so $( php -r \"echo ini_get('extension_dir');\" ;)/blackfire.so \\\n && printf \"extension=blackfire.so\\nblackfire.agent_socket=${BLACKFIRE_AGENT}\\n\" > ${PHP_MODS_DIR}/blackfire.ini \\\n && curl -A \"Docker\" -o /usr/local/bin/blackfire -D - -L -s https://packages.blackfire.io/binaries/blackfire-agent/${BLACKFIRE_CLI}/blackfire-cli-linux_static_amd64 \\\n && chmod +x /usr/local/bin/blackfire \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CLI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CGI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_FPM_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CLI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CGI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_FPM_CONF_DIR}/999-devstack.ini \\\n && apt-get clean -y \\\n && apt-get autoclean -y \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /var/lib/log/* /tmp/* /var/tmp/*\n#  FILES\nADD conf.d/devstack.ini ${PHP_MODS_DIR}/devstack.ini\nADD fpm/php-fpm.conf ${PHP_FPM_DIR}/php-fpm.conf\n#  WORKDIR\nWORKDIR /srv\n#  COMMAND\nCMD [\"php-fpm7.1\", \"-F\"]\n","injectedSmells":[],"originalDockerfileHash":"33d96e3502c6e55cf2597670f2647a19","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM dockette/stretch\nMAINTAINER Milan Sulc <sulcmil@gmail.com>\n#   SSH\nENV SSH_AUTH_SOCK=\"/ssh-agent\"\n#   PHP\nENV PHP_MODS_DIR=\"/etc/php/7.1/mods-available\"\nENV PHP_CLI_DIR=\"/etc/php/7.1/cli\"\nENV PHP_CLI_CONF_DIR=\"${PHP_CLI_DIR}/conf.d\"\nENV PHP_CGI_DIR=\"/etc/php/7.1/cgi\"\nENV PHP_CGI_CONF_DIR=\"${PHP_CGI_DIR}/conf.d\"\nENV PHP_FPM_DIR=\"/etc/php/7.1/fpm\"\nENV PHP_FPM_CONF_DIR=\"${PHP_FPM_DIR}/conf.d\"\n#   XDEBUG\nENV PHP_IDE_CONFIG=\"serverName=devstack.webserver\"\nENV XDEBUG_CONFIG=\"idekey=PHPSTORM\"\n#   MAILER\nENV PHPMAILER_BIN=\"/usr/local/bin/phpmailer\"\nENV PHPMAILER_PATH=\"/srv/mails\"\n#   DEBUGGING\nENV BLACKFIRE_AGENT=\"tcp://blackfire:8707\"\nENV BLACKFIRE_CLI=\"1.17.0\"\nENV BLACKFIRE_PROBE=\"1.20.0\"\n#   INSTALLATION\nRUN apt-get update \\\n && apt-get dist-upgrade -y \\\n && apt-get install wget curl git bash-completion apt-transport-https ca-certificates -y \\\n && cp /etc/skel/.bashrc ~/ \\\n && cp /etc/skel/.bashrc /home/dfx/ \\\n && chown dfx:dfx -R /home/dfx/ \\\n && echo \" IdentityFile ~/.ssh/id_rsa\" >> /etc/ssh/ssh_config \\\n && wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg \\\n && echo \"deb https://packages.sury.org/php/ stretch main\" > /etc/apt/sources.list.d/php.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends php7.1-apc php7.1-apcu php7.1-bcmath php7.1-bz2 php7.1-cli php7.1-cgi php7.1-curl php7.1-fpm php7.1-geoip php7.1-gd php7.1-intl php7.1-imagick php7.1-imap php7.1-ldap php7.1-mbstring php7.1-mcrypt php7.1-memcached php7.1-mongo php7.1-mysql php7.1-pgsql php7.1-redis php7.1-soap php7.1-sqlite3 php7.1-ssh2 php7.1-zip php7.1-xmlrpc php7.1-xsl php7.1-xdebug -y \\\n && curl -o ${PHPMAILER_BIN} https://raw.githubusercontent.com/dockette/phpmailer/master/phpmailer \\\n && mkdir -p ${PHPMAILER_PATH} \\\n && chmod 755 ${PHPMAILER_BIN} \\\n && chmod 777 ${PHPMAILER_PATH} \\\n && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \\\n && composer global require \"hirak/prestissimo:^0.3\" \\\n && composer global require bamarni/symfony-console-autocomplete \\\n && ~/.composer/vendor/bin/symfony-autocomplete --shell bash composer | tee /etc/bash_completion.d/composer \\\n && curl -A \"Docker\" -o /tmp/blackfire.so -D - -L -s https://packages.blackfire.io/binaries/blackfire-php/${BLACKFIRE_PROBE}/blackfire-php-linux_amd64-php-71.so \\\n && mv /tmp/blackfire.so $( php -r \"echo ini_get('extension_dir');\" ;)/blackfire.so \\\n && printf \"extension=blackfire.so\\nblackfire.agent_socket=${BLACKFIRE_AGENT}\\n\" > ${PHP_MODS_DIR}/blackfire.ini \\\n && curl -A \"Docker\" -o /usr/local/bin/blackfire -D - -L -s https://packages.blackfire.io/binaries/blackfire-agent/${BLACKFIRE_CLI}/blackfire-cli-linux_static_amd64 \\\n && chmod +x /usr/local/bin/blackfire \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CLI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_CGI_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/blackfire.ini ${PHP_FPM_CONF_DIR}/20-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CLI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_CGI_CONF_DIR}/999-devstack.ini \\\n && ln -s ${PHP_MODS_DIR}/devstack.ini ${PHP_FPM_CONF_DIR}/999-devstack.ini \\\n && apt-get clean -y \\\n && apt-get autoclean -y \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /var/lib/log/* /tmp/* /var/tmp/*\n#   FILES\nADD conf.d/devstack.ini ${PHP_MODS_DIR}/devstack.ini\nADD fpm/php-fpm.conf ${PHP_FPM_DIR}/php-fpm.conf\n#   WORKDIR\nWORKDIR /srv\n#   COMMAND\nCMD [\"php-fpm7.1\", \"-F\"]\n","originalDockerfileUglifiedHash":"48147abba6b31950c9dbb0a362915038","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/22cffa140af77b43f2b7381b760d6eedd0fdce94.dockerfile"}