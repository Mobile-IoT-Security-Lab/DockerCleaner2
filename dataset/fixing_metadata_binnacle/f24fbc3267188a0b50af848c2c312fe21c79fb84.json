{"seed":1239887320,"processedDockerfileHash":"0f3f466ffdb277bbdbf5d26ad0a77dda","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   x11docker/deepin\n#   \n#   Run deepin desktop in docker. \n#   Use x11docker to run image. \n#   Get x11docker from github: \n#     https://github.com/mviereck/x11docker \n#\n#   Run desktop with:\n#     x11docker --desktop --systemd x11docker/deepin\n#   (Alternativly start with:)\n#     x11docker --desktop --dbus-system --pulseaudio x11docker/deepin\n#\n#   Run single application:\n#     x11docker x11docker/deepin deepin-terminal\n#\n#   Options:\n#   Persistent home folder stored on host with   --home\n#   Shared host folder with                      --sharedir DIR\n#   Hardware acceleration with option            --gpu\n#   Clipboard sharing with option                --clipboard\n#   Change desired language locale setting with  --lang $LANG\n#   Sound support with option                    --pulseaudio\n#\n#   See x11docker --help for further options.\nFROM bestwu/deepin:panda\nMAINTAINER 若虚 <slpcat@qq.com>\n#   Container variables\nENV TERM=\"xterm\" \\\n    LANG=\"zh_CN.UTF-8\" \\\n    LANGUAGE=\"zh_CN.UTF-8\" \\\n    LC_ALL=\"zh_CN.UTF-8\" \\\n    TIMEZONE=\"Asia/Shanghai\" \\\n    DEBIAN_FRONTEND=\"noninteractive\"\n#  RUN echo \"deb http://packages.deepin.com/deepin/ panda main non-free contrib\" > /etc/apt/sources.list\nRUN echo \"deb [by-hash=force] https://mirrors.aliyun.com/deepin panda main contrib non-free\" > /etc/apt/sources.list\n#  RUN echo \"deb http://mirrors.kernel.org/deepin/  panda main non-free contrib\" > /etc/apt/sources.list\n#  RUN echo \"deb http://ftp.fau.de/deepin/          panda main non-free contrib\" > /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/* \\\n && apt-get -y clean \\\n && : \\\n && apt-get dist-upgrade -y \\\n && apt-get -y autoremove\nRUN (apt-get update ;apt-get install --no-install-recommends dbus-x11 procps psmisc -y )\n#   OpenGL / MESA\nRUN (apt-get update ;apt-get install --no-install-recommends mesa-utils mesa-utils-extra libxv1 kmod xz-utils -y )\n#   language locales. Change LANG to your desired default locale\nRUN (apt-get update ;apt-get install --no-install-recommends locales-all -y )\n#   deepin desktop\nRUN (apt-get update ;apt-get install --no-install-recommends dde -y )\n#   missing dependencies, dconf\nRUN (apt-get update ;apt-get install --no-install-recommends at-spi2-core dconf-cli dconf-editor gnome-themes-standard gtk2-engines-murrine gtk2-engines-pixbuf -y )\n#   additional applications\nRUN (apt-get update ;apt-get install --no-install-recommends deepin-calculator deepin-image-viewer deepin-screenshot deepin-system-monitor deepin-terminal deepin-movie deepin-music gedit sudo lspci synaptic oneko google-chrome-stable firefox-zh deepin-fpapp-com.deepin.imageviewer deepin-fpapp-com.deepin.music deepin-fpapp-com.deepin.screenshot deepin-movie wps-office foxitreader netease-cloud-music sogoupinyin fonts-adobe-source-han-serif-cn fonts-droid fonts-hanazono fonts-lohit-deva fonts-nanum -y )\n#   chinese fonts\nRUN (apt-get update ;apt-get install --no-install-recommends fonts-arphic-uming -y )\nENV PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/games:/usr/games\"\n#   Mask units failing in container\nRUN systemctl mask bluetooth iptables systemd-hostnamed systemd-tmpfiles-setup\n#   Mask units useless in container\nRUN systemctl mask lastore-daemon lastore-update-metadata-info NetworkManager plymouth-start plymouth-read-write plymouth-quit plymouth-quit-wait\n#   Remove dbus services failing or useless in container. (Bluetooth/bluez is most annoying)\nRUN cd /usr/share/dbus-1/services \\\n && rm com.deepin.daemon.Audio.service com.deepin.daemon.Bluetooth.service com.deepin.daemon.InputDevices.service com.deepin.daemon.Power.service com.deepin.dde.welcome.service\nRUN cd /usr/share/dbus-1/system-services \\\n && rm com.deepin.lastore.service\nRUN ln -s /etc/sv/gdm /var/service\n#   config file to use deepin-metacity without 3d effects ,not deepin-wm\nRUN echo -e '{\\n \"allow_switch\": true,\\n \"last_wm\": \"deepin-metacity\"\\n}\\n' > /wm3d.json\n#   create startscript \nRUN echo -e '#! /bin/sh\\n[ -n \"$HOME\" ] \\\n && [ ! -e \"$HOME/.config\" ] \\\n && cp -R /etc/skel/. $HOME/ \\n[ -e /dev/dri/card0 ] \\\n && { \\n mkdir -p $HOME/.config/deepin/deepin-wm-switcher \\n cp -n /wm3d.json $HOME/.config/deepin/deepin-wm-switcher/config.json \\n} \\ndconf write /com/deepin/dde/daemon/network false \\ndconf write /com/deepin/dde/daemon/bluetooth false \\ndconf write /com/deepin/dde/watchdog/dde-polkit-agent false \\ndconf write /com/deepin/dde/daemon/power false \\nexec $* \\n' > /usr/bin/start\nRUN chmod +x /usr/bin/start\nENTRYPOINT [\"/usr/bin/start\"]\nCMD [\"startdde\"]\nENV DEBIAN_FRONTEND=\"newt\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  x11docker/deepin\n#  \n#  Run deepin desktop in docker. \n#  Use x11docker to run image. \n#  Get x11docker from github: \n#    https://github.com/mviereck/x11docker \n#\n#  Run desktop with:\n#    x11docker --desktop --systemd x11docker/deepin\n#  (Alternativly start with:)\n#    x11docker --desktop --dbus-system --pulseaudio x11docker/deepin\n#\n#  Run single application:\n#    x11docker x11docker/deepin deepin-terminal\n#\n#  Options:\n#  Persistent home folder stored on host with   --home\n#  Shared host folder with                      --sharedir DIR\n#  Hardware acceleration with option            --gpu\n#  Clipboard sharing with option                --clipboard\n#  Change desired language locale setting with  --lang $LANG\n#  Sound support with option                    --pulseaudio\n#\n#  See x11docker --help for further options.\nFROM bestwu/deepin:panda\nMAINTAINER 若虚 <slpcat@qq.com>\n#  Container variables\nENV TERM=\"xterm\" \\\n    LANG=\"zh_CN.UTF-8\" \\\n    LANGUAGE=\"zh_CN.UTF-8\" \\\n    LC_ALL=\"zh_CN.UTF-8\" \\\n    TIMEZONE=\"Asia/Shanghai\" \\\n    DEBIAN_FRONTEND=\"noninteractive\"\n# RUN echo \"deb http://packages.deepin.com/deepin/ panda main non-free contrib\" > /etc/apt/sources.list\nRUN echo \"deb [by-hash=force] https://mirrors.aliyun.com/deepin panda main contrib non-free\" > /etc/apt/sources.list\n# RUN echo \"deb http://mirrors.kernel.org/deepin/  panda main non-free contrib\" > /etc/apt/sources.list\n# RUN echo \"deb http://ftp.fau.de/deepin/          panda main non-free contrib\" > /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/* \\\n && apt-get -y clean \\\n && apt-get update -y \\\n && apt-get dist-upgrade -y \\\n && apt-get -y autoremove\nRUN apt-get install dbus-x11 procps psmisc -y\n#  OpenGL / MESA\nRUN apt-get install mesa-utils mesa-utils-extra libxv1 kmod xz-utils -y\n#  language locales. Change LANG to your desired default locale\nRUN apt-get install locales-all -y\n#  deepin desktop\nRUN apt-get install --no-install-recommends dde -y\n#  missing dependencies, dconf\nRUN apt-get install --no-install-recommends at-spi2-core dconf-cli dconf-editor gnome-themes-standard gtk2-engines-murrine gtk2-engines-pixbuf -y\n#  additional applications\nRUN apt-get install deepin-calculator deepin-image-viewer deepin-screenshot deepin-system-monitor deepin-terminal deepin-movie deepin-music gedit sudo lspci synaptic oneko google-chrome-stable firefox-zh deepin-fpapp-com.deepin.imageviewer deepin-fpapp-com.deepin.music deepin-fpapp-com.deepin.screenshot deepin-movie wps-office foxitreader netease-cloud-music sogoupinyin fonts-adobe-source-han-serif-cn fonts-droid fonts-hanazono fonts-lohit-deva fonts-nanum -y\n#  chinese fonts\nRUN apt-get install fonts-arphic-uming -y\nENV PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/games:/usr/games\"\n#  Mask units failing in container\nRUN systemctl mask bluetooth iptables systemd-hostnamed systemd-tmpfiles-setup\n#  Mask units useless in container\nRUN systemctl mask lastore-daemon lastore-update-metadata-info NetworkManager plymouth-start plymouth-read-write plymouth-quit plymouth-quit-wait\n#  Remove dbus services failing or useless in container. (Bluetooth/bluez is most annoying)\nRUN cd /usr/share/dbus-1/services \\\n && rm com.deepin.daemon.Audio.service com.deepin.daemon.Bluetooth.service com.deepin.daemon.InputDevices.service com.deepin.daemon.Power.service com.deepin.dde.welcome.service\nRUN cd /usr/share/dbus-1/system-services \\\n && rm com.deepin.lastore.service\nRUN ln -s /etc/sv/gdm /var/service\n#  config file to use deepin-metacity without 3d effects ,not deepin-wm\nRUN echo -e '{\\n \"allow_switch\": true,\\n \"last_wm\": \"deepin-metacity\"\\n}\\n' > /wm3d.json\n#  create startscript \nRUN echo -e '#! /bin/sh\\n[ -n \"$HOME\" ] \\\n && [ ! -e \"$HOME/.config\" ] \\\n && cp -R /etc/skel/. $HOME/ \\n[ -e /dev/dri/card0 ] \\\n && { \\n mkdir -p $HOME/.config/deepin/deepin-wm-switcher \\n cp -n /wm3d.json $HOME/.config/deepin/deepin-wm-switcher/config.json \\n} \\ndconf write /com/deepin/dde/daemon/network false \\ndconf write /com/deepin/dde/daemon/bluetooth false \\ndconf write /com/deepin/dde/watchdog/dde-polkit-agent false \\ndconf write /com/deepin/dde/daemon/power false \\nexec $* \\n' > /usr/bin/start\nRUN chmod +x /usr/bin/start\nENTRYPOINT [\"/usr/bin/start\"]\nCMD [\"startdde\"]\nENV DEBIAN_FRONTEND=\"newt\"\n","injectedSmells":[],"originalDockerfileHash":"2e1693eaefb300361a72db0e49e72dd8","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   x11docker/deepin\n#   \n#   Run deepin desktop in docker. \n#   Use x11docker to run image. \n#   Get x11docker from github: \n#     https://github.com/mviereck/x11docker \n#\n#   Run desktop with:\n#     x11docker --desktop --systemd x11docker/deepin\n#   (Alternativly start with:)\n#     x11docker --desktop --dbus-system --pulseaudio x11docker/deepin\n#\n#   Run single application:\n#     x11docker x11docker/deepin deepin-terminal\n#\n#   Options:\n#   Persistent home folder stored on host with   --home\n#   Shared host folder with                      --sharedir DIR\n#   Hardware acceleration with option            --gpu\n#   Clipboard sharing with option                --clipboard\n#   Change desired language locale setting with  --lang $LANG\n#   Sound support with option                    --pulseaudio\n#\n#   See x11docker --help for further options.\nFROM bestwu/deepin:panda\nMAINTAINER 若虚 <slpcat@qq.com>\n#   Container variables\nENV TERM=\"xterm\" \\\n    LANG=\"zh_CN.UTF-8\" \\\n    LANGUAGE=\"zh_CN.UTF-8\" \\\n    LC_ALL=\"zh_CN.UTF-8\" \\\n    TIMEZONE=\"Asia/Shanghai\" \\\n    DEBIAN_FRONTEND=\"noninteractive\"\n#  RUN echo \"deb http://packages.deepin.com/deepin/ panda main non-free contrib\" > /etc/apt/sources.list\nRUN echo \"deb [by-hash=force] https://mirrors.aliyun.com/deepin panda main contrib non-free\" > /etc/apt/sources.list\n#  RUN echo \"deb http://mirrors.kernel.org/deepin/  panda main non-free contrib\" > /etc/apt/sources.list\n#  RUN echo \"deb http://ftp.fau.de/deepin/          panda main non-free contrib\" > /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/* \\\n && apt-get -y clean \\\n && apt-get update -y \\\n && apt-get dist-upgrade -y \\\n && apt-get -y autoremove\nRUN apt-get install dbus-x11 procps psmisc -y\n#   OpenGL / MESA\nRUN apt-get install mesa-utils mesa-utils-extra libxv1 kmod xz-utils -y\n#   language locales. Change LANG to your desired default locale\nRUN apt-get install locales-all -y\n#   deepin desktop\nRUN apt-get install --no-install-recommends dde -y\n#   missing dependencies, dconf\nRUN apt-get install --no-install-recommends at-spi2-core dconf-cli dconf-editor gnome-themes-standard gtk2-engines-murrine gtk2-engines-pixbuf -y\n#   additional applications\nRUN apt-get install deepin-calculator deepin-image-viewer deepin-screenshot deepin-system-monitor deepin-terminal deepin-movie deepin-music gedit sudo lspci synaptic oneko google-chrome-stable firefox-zh deepin-fpapp-com.deepin.imageviewer deepin-fpapp-com.deepin.music deepin-fpapp-com.deepin.screenshot deepin-movie wps-office foxitreader netease-cloud-music sogoupinyin fonts-adobe-source-han-serif-cn fonts-droid fonts-hanazono fonts-lohit-deva fonts-nanum -y\n#   chinese fonts\nRUN apt-get install fonts-arphic-uming -y\nENV PATH=\"/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/games:/usr/games\"\n#   Mask units failing in container\nRUN systemctl mask bluetooth iptables systemd-hostnamed systemd-tmpfiles-setup\n#   Mask units useless in container\nRUN systemctl mask lastore-daemon lastore-update-metadata-info NetworkManager plymouth-start plymouth-read-write plymouth-quit plymouth-quit-wait\n#   Remove dbus services failing or useless in container. (Bluetooth/bluez is most annoying)\nRUN cd /usr/share/dbus-1/services \\\n && rm com.deepin.daemon.Audio.service com.deepin.daemon.Bluetooth.service com.deepin.daemon.InputDevices.service com.deepin.daemon.Power.service com.deepin.dde.welcome.service\nRUN cd /usr/share/dbus-1/system-services \\\n && rm com.deepin.lastore.service\nRUN ln -s /etc/sv/gdm /var/service\n#   config file to use deepin-metacity without 3d effects ,not deepin-wm\nRUN echo -e '{\\n \"allow_switch\": true,\\n \"last_wm\": \"deepin-metacity\"\\n}\\n' > /wm3d.json\n#   create startscript \nRUN echo -e '#! /bin/sh\\n[ -n \"$HOME\" ] \\\n && [ ! -e \"$HOME/.config\" ] \\\n && cp -R /etc/skel/. $HOME/ \\n[ -e /dev/dri/card0 ] \\\n && { \\n mkdir -p $HOME/.config/deepin/deepin-wm-switcher \\n cp -n /wm3d.json $HOME/.config/deepin/deepin-wm-switcher/config.json \\n} \\ndconf write /com/deepin/dde/daemon/network false \\ndconf write /com/deepin/dde/daemon/bluetooth false \\ndconf write /com/deepin/dde/watchdog/dde-polkit-agent false \\ndconf write /com/deepin/dde/daemon/power false \\nexec $* \\n' > /usr/bin/start\nRUN chmod +x /usr/bin/start\nENTRYPOINT [\"/usr/bin/start\"]\nCMD [\"startdde\"]\nENV DEBIAN_FRONTEND=\"newt\"\n","originalDockerfileUglifiedHash":"ec9fa9e1e224805f633ebb8cd6c6f231","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f24fbc3267188a0b50af848c2c312fe21c79fb84.dockerfile"}