{"seed":1378203658,"processedDockerfileHash":"6523b274205169861b0712d87ad725b6","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  # Dockerized speech recognition with Kaldi + Pop Up Archive models\nFROM ubuntu:16.10\nMAINTAINER Steve McLaughlin <stephen.mclaughlin@utexas.edu>\nENV PYTHONWARNINGS=\"ignore:a true SSLContext object\"\nENV SHELL=\"/bin/bash\"\n#  # Installing core system dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends g++ zlib1g-dev make automake autoconf libtool-bin git build-essential -y \\\n && apt-get install --no-install-recommends software-properties-common subversion libatlas3-base bzip2 wget curl gawk zip unzip libperl4-corelibs-perl libjson-perl python2.7 python-pip -y \\\n && pip install ftfy==4.4.3 -U \\\n && ln -s -f bash /bin/sh\n#  # Installing old C/C++ compilers\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc-4.8 g++-4.8 libgcc-4.8-dev -y \\\n && alias gcc='gcc-4.8' \\\n && alias cc='gcc-4.8' \\\n && alias g++='g++-4.8' \\\n && alias c++='c++-4.8'\n#  # Installing Perl dependencies\nRUN curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm File::Slurp::Tiny Data::Dump\n#  # Installing sclite\nRUN apt-get update \\\n && apt-get install --no-install-recommends sctk -y \\\n && alias sclite=\"sctk sclite\"\n#  # Setting UTF-8 as default encoding format for terminal\nRUN apt-get install --no-install-recommends language-pack-en -y\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#  # Downloading Kaldi and PUA resources\nRUN git clone https://github.com/kaldi-asr/kaldi.git kaldi --origin upstream \\\n && cd /kaldi/egs/ \\\n && git clone https://github.com/popuparchive/american-archive-kaldi \\\n && cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && wget https://sourceforge.net/projects/popuparchive-kaldi/files/exp2.tar.gz \\\n && tar -xvzf exp2.tar.gz\n#  # Cleaning up\nRUN rm /kaldi/egs/american-archive-kaldi/sample_experiment/exp2.tar.gz\n#  # Creating expected symlinks\nRUN ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/\n#  # Installing SoX and FFmpeg\nRUN apt-get update \\\n && apt-get install --no-install-recommends sox libsox-fmt-alsa libsox-fmt-base libsox2 ffmpeg -y\n#  # Compiling Kaldi\nRUN cd /kaldi/tools \\\n && make -j 8 \\\n && cd /kaldi/src \\\n && ./configure \\\n && make depend \\\n && make -j 8\n#  # Installing pip and ftfy\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-pip -y \\\n && pip install ftfy==4.4.3 \\\n && alias python=python2.7\n#  # Installing IRSTLM\nRUN apt-get update \\\n && apt-get install --no-install-recommends cmake irstlm -y\n#  # Installing nano\nRUN apt-get update \\\n && apt-get install --no-install-recommends nano -y\n#  # Installing CMUseg\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && sh install-cmuseg.sh \\\n && chmod -R 755 ./tools/CMUseg_0.5/bin/linux/\n#  # Setting script permissions\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/scripts/\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/run.sh\n#  # Configuration tweaks\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment \\\n && rm path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/path.sh \\\n && chmod 755 path.sh \\\n && rm set-kaldi-path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/set-kaldi-path.sh \\\n && chmod 755 set-kaldi-path.sh \\\n && cd /kaldi/egs/wsj/s5/utils/ \\\n && rm run.pl \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/run.pl \\\n && chmod 755 run.pl \\\n && mkdir /audio_in\nWORKDIR /audio_in\n#  # Plans for next iteration\n#   Pass local directory pathname as a shared volume in docker run command, then launch setup.sh as CMD or ENTRYPOINT.\n#   Handle troublesome filename characters by quoting arguments in run.sh ... or just remove them.\n#   Set nj prefs in a yaml file or some such.\n#   Transcript output location: /kaldi/egs/american-archive-kaldi/sample_experiment/output\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# # Dockerized speech recognition with Kaldi + Pop Up Archive models\nFROM ubuntu:16.10\nMAINTAINER Steve McLaughlin <stephen.mclaughlin@utexas.edu>\nENV PYTHONWARNINGS=\"ignore:a true SSLContext object\"\nENV SHELL=\"/bin/bash\"\n# # Installing core system dependencies\nRUN apt-get update \\\n && apt-get install g++ zlib1g-dev make automake autoconf libtool-bin git build-essential -y \\\n && apt-get install software-properties-common subversion libatlas3-base bzip2 wget curl gawk zip unzip libperl4-corelibs-perl libjson-perl python2.7 python-pip -y \\\n && pip install ftfy==4.4.3 -U \\\n && ln -s -f bash /bin/sh\n# # Installing old C/C++ compilers\nRUN apt-get update \\\n && apt-get install gcc-4.8 g++-4.8 libgcc-4.8-dev -y \\\n && alias gcc='gcc-4.8' \\\n && alias cc='gcc-4.8' \\\n && alias g++='g++-4.8' \\\n && alias c++='c++-4.8'\n# # Installing Perl dependencies\nRUN curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm File::Slurp::Tiny Data::Dump\n# # Installing sclite\nRUN apt-get update \\\n && apt-get install sctk -y \\\n && alias sclite=\"sctk sclite\"\n# # Setting UTF-8 as default encoding format for terminal\nRUN apt-get install language-pack-en -y\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n# # Downloading Kaldi and PUA resources\nRUN git clone https://github.com/kaldi-asr/kaldi.git kaldi --origin upstream \\\n && cd /kaldi/egs/ \\\n && git clone https://github.com/popuparchive/american-archive-kaldi \\\n && cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && wget https://sourceforge.net/projects/popuparchive-kaldi/files/exp2.tar.gz \\\n && tar -xvzf exp2.tar.gz\n# # Cleaning up\nRUN rm /kaldi/egs/american-archive-kaldi/sample_experiment/exp2.tar.gz\n# # Creating expected symlinks\nRUN ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/\n# # Installing SoX and FFmpeg\nRUN apt-get update \\\n && apt-get install sox libsox-fmt-alsa libsox-fmt-base libsox2 ffmpeg -y\n# # Compiling Kaldi\nRUN cd /kaldi/tools \\\n && make -j 8 \\\n && cd /kaldi/src \\\n && ./configure \\\n && make depend \\\n && make -j 8\n# # Installing pip and ftfy\nRUN apt-get update \\\n && apt-get install python-pip -y \\\n && pip install ftfy==4.4.3 \\\n && alias python=python2.7\n# # Installing IRSTLM\nRUN apt-get update \\\n && apt-get install cmake irstlm -y\n# # Installing nano\nRUN apt-get update \\\n && apt-get install nano -y\n# # Installing CMUseg\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && sh install-cmuseg.sh \\\n && chmod -R 755 ./tools/CMUseg_0.5/bin/linux/\n# # Setting script permissions\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/scripts/\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/run.sh\n# # Configuration tweaks\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment \\\n && rm path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/path.sh \\\n && chmod 755 path.sh \\\n && rm set-kaldi-path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/set-kaldi-path.sh \\\n && chmod 755 set-kaldi-path.sh \\\n && cd /kaldi/egs/wsj/s5/utils/ \\\n && rm run.pl \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/run.pl \\\n && chmod 755 run.pl \\\n && mkdir /audio_in\nWORKDIR /audio_in\n# # Plans for next iteration\n#  Pass local directory pathname as a shared volume in docker run command, then launch setup.sh as CMD or ENTRYPOINT.\n#  Handle troublesome filename characters by quoting arguments in run.sh ... or just remove them.\n#  Set nj prefs in a yaml file or some such.\n#  Transcript output location: /kaldi/egs/american-archive-kaldi/sample_experiment/output\n","injectedSmells":[],"originalDockerfileHash":"2b9e15f63f027258298c36c95225b80a","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  # Dockerized speech recognition with Kaldi + Pop Up Archive models\nFROM ubuntu:16.10\nMAINTAINER Steve McLaughlin <stephen.mclaughlin@utexas.edu>\nENV PYTHONWARNINGS=\"ignore:a true SSLContext object\"\nENV SHELL=\"/bin/bash\"\n#  # Installing core system dependencies\nRUN apt-get update \\\n && apt-get install g++ zlib1g-dev make automake autoconf libtool-bin git build-essential -y \\\n && apt-get install software-properties-common subversion libatlas3-base bzip2 wget curl gawk zip unzip libperl4-corelibs-perl libjson-perl python2.7 python-pip -y \\\n && pip install ftfy==4.4.3 -U \\\n && ln -s -f bash /bin/sh\n#  # Installing old C/C++ compilers\nRUN apt-get update \\\n && apt-get install gcc-4.8 g++-4.8 libgcc-4.8-dev -y \\\n && alias gcc='gcc-4.8' \\\n && alias cc='gcc-4.8' \\\n && alias g++='g++-4.8' \\\n && alias c++='c++-4.8'\n#  # Installing Perl dependencies\nRUN curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm File::Slurp::Tiny Data::Dump\n#  # Installing sclite\nRUN apt-get update \\\n && apt-get install sctk -y \\\n && alias sclite=\"sctk sclite\"\n#  # Setting UTF-8 as default encoding format for terminal\nRUN apt-get install language-pack-en -y\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\n#  # Downloading Kaldi and PUA resources\nRUN git clone https://github.com/kaldi-asr/kaldi.git kaldi --origin upstream \\\n && cd /kaldi/egs/ \\\n && git clone https://github.com/popuparchive/american-archive-kaldi \\\n && cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && wget https://sourceforge.net/projects/popuparchive-kaldi/files/exp2.tar.gz \\\n && tar -xvzf exp2.tar.gz\n#  # Cleaning up\nRUN rm /kaldi/egs/american-archive-kaldi/sample_experiment/exp2.tar.gz\n#  # Creating expected symlinks\nRUN ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/exp \\\n && ln -s /kaldi/egs/wsj/s5/steps /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && ln -s /kaldi/egs/wsj/s5/utils /kaldi/egs/american-archive-kaldi/sample_experiment/\n#  # Installing SoX and FFmpeg\nRUN apt-get update \\\n && apt-get install sox libsox-fmt-alsa libsox-fmt-base libsox2 ffmpeg -y\n#  # Compiling Kaldi\nRUN cd /kaldi/tools \\\n && make -j 8 \\\n && cd /kaldi/src \\\n && ./configure \\\n && make depend \\\n && make -j 8\n#  # Installing pip and ftfy\nRUN apt-get update \\\n && apt-get install python-pip -y \\\n && pip install ftfy==4.4.3 \\\n && alias python=python2.7\n#  # Installing IRSTLM\nRUN apt-get update \\\n && apt-get install cmake irstlm -y\n#  # Installing nano\nRUN apt-get update \\\n && apt-get install nano -y\n#  # Installing CMUseg\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment/ \\\n && sh install-cmuseg.sh \\\n && chmod -R 755 ./tools/CMUseg_0.5/bin/linux/\n#  # Setting script permissions\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/scripts/\nRUN chmod 755 -R /kaldi/egs/american-archive-kaldi/sample_experiment/run.sh\n#  # Configuration tweaks\nRUN cd /kaldi/egs/american-archive-kaldi/sample_experiment \\\n && rm path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/path.sh \\\n && chmod 755 path.sh \\\n && rm set-kaldi-path.sh \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/set-kaldi-path.sh \\\n && chmod 755 set-kaldi-path.sh \\\n && cd /kaldi/egs/wsj/s5/utils/ \\\n && rm run.pl \\\n && wget https://raw.githubusercontent.com/hipstas/kaldi-pop-up-archive/master/scripts/run.pl \\\n && chmod 755 run.pl \\\n && mkdir /audio_in\nWORKDIR /audio_in\n#  # Plans for next iteration\n#   Pass local directory pathname as a shared volume in docker run command, then launch setup.sh as CMD or ENTRYPOINT.\n#   Handle troublesome filename characters by quoting arguments in run.sh ... or just remove them.\n#   Set nj prefs in a yaml file or some such.\n#   Transcript output location: /kaldi/egs/american-archive-kaldi/sample_experiment/output\n","originalDockerfileUglifiedHash":"97aa65cf36a2b1711e33542129500e8d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fda44085b8551b07c0187ff06654fd78ce9fc082.dockerfile"}