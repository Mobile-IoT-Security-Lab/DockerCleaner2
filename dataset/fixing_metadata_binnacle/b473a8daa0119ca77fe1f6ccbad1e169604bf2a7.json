{"seed":1713201361,"processedDockerfileHash":"3cbf573948e1fbcd1c9964cbec8c38e7","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck"],"processedDockerfile":"FROM cusdeb/alpine3.7:amd64\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV MEMCACHED_VERSION=\"1.5.10\"\nENV MEMCACHED_DOWNLOAD_URL=\"https://github.com/memcached/memcached/archive/$MEMCACHED_VERSION.tar.gz\"\nENV MEMCACHED_DOWNLOAD_SHA=\"58408d0abc29e2da27cd3e1b9506991f0bd9c80e9362c68e564eee166631b18a\"\n#   If the version doesn't look bad for Debian Stretch,\n#   it's not bad for the image.\nENV SASL_VERSION=\"2.1.27\"\nENV SASL_RC=\"rc7\"\nENV SASL_DOWNLOAD_URL=\"ftp://ftp.cyrusimap.org/cyrus-sasl/cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz\"\nENV LIBEVENT_VERSION=\"2.1.8-stable\"\nENV LIBEVENT_DOWNLOAD_URL=\"https://github.com/libevent/libevent/releases/download/release-$LIBEVENT_VERSION/libevent-$LIBEVENT_VERSION.tar.gz\"\nRUN adduser -D memcached\nRUN apk add autoconf automake build-base coreutils curl git linux-headers perl --update \\\n && mkdir -p /opt/homemade \\\n && cd \\\n && curl -O $SASL_DOWNLOAD_URL \\\n && tar xzvf cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && cd cyrus-sasl-$SASL_VERSION \\\n && ./configure --prefix=/opt/homemade --disable-anon --enable-cram --enable-digest --enable-login --enable-ntlm --disable-otp --enable-plain --with-gss_impl=heimdal --with-devrandom=/dev/urandom --without-ldap --with-saslauthd=/var/run/saslauthd --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $LIBEVENT_DOWNLOAD_URL \\\n && tar xzvf libevent-$LIBEVENT_VERSION.tar.gz \\\n && cd libevent-$LIBEVENT_VERSION \\\n && ./configure --prefix=/opt/homemade --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $MEMCACHED_DOWNLOAD_URL \\\n && echo $MEMCACHED_DOWNLOAD_SHA $MEMCACHED_VERSION.tar.gz | sha256sum -c \\\n && tar xzvf $MEMCACHED_VERSION.tar.gz \\\n && cd memcached-$MEMCACHED_VERSION \\\n && ./autogen.sh \\\n && env CFLAGS='-I/opt/homemade/include' LDFLAGS='-L/opt/homemade/lib' ./configure --enable-sasl \\\n && make SHARED=0 CC='gcc -static' \\\n && make install \\\n && make \\\n && install -o root -g root -m 744 memcached /usr/bin \\\n && cd .. \\\n && rm cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && rm libevent-$LIBEVENT_VERSION.tar.gz \\\n && rm $MEMCACHED_VERSION.tar.gz \\\n && rm -r cyrus-sasl-$SASL_VERSION \\\n && rm -r libevent-$LIBEVENT_VERSION \\\n && rm -r memcached-$MEMCACHED_VERSION \\\n && rm -r /opt/homemade \\\n && apk del autoconf automake build-base coreutils curl git linux-headers perl \\\n && rm -rf /var/cache/apk/*\nUSER memcached\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM cusdeb/alpine3.7:amd64\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV MEMCACHED_VERSION=\"1.5.10\"\nENV MEMCACHED_DOWNLOAD_URL=\"https://github.com/memcached/memcached/archive/$MEMCACHED_VERSION.tar.gz\"\nENV MEMCACHED_DOWNLOAD_SHA=\"58408d0abc29e2da27cd3e1b9506991f0bd9c80e9362c68e564eee166631b18a\"\n#  If the version doesn't look bad for Debian Stretch,\n#  it's not bad for the image.\nENV SASL_VERSION=\"2.1.27\"\nENV SASL_RC=\"rc7\"\nENV SASL_DOWNLOAD_URL=\"ftp://ftp.cyrusimap.org/cyrus-sasl/cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz\"\nENV LIBEVENT_VERSION=\"2.1.8-stable\"\nENV LIBEVENT_DOWNLOAD_URL=\"https://github.com/libevent/libevent/releases/download/release-$LIBEVENT_VERSION/libevent-$LIBEVENT_VERSION.tar.gz\"\nRUN adduser -D memcached\nRUN apk add --update autoconf automake build-base coreutils curl git linux-headers perl \\\n && mkdir -p /opt/homemade \\\n && cd \\\n && curl -O $SASL_DOWNLOAD_URL \\\n && tar xzvf cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && cd cyrus-sasl-$SASL_VERSION \\\n && ./configure --prefix=/opt/homemade --disable-anon --enable-cram --enable-digest --enable-login --enable-ntlm --disable-otp --enable-plain --with-gss_impl=heimdal --with-devrandom=/dev/urandom --without-ldap --with-saslauthd=/var/run/saslauthd --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $LIBEVENT_DOWNLOAD_URL \\\n && tar xzvf libevent-$LIBEVENT_VERSION.tar.gz \\\n && cd libevent-$LIBEVENT_VERSION \\\n && ./configure --prefix=/opt/homemade --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $MEMCACHED_DOWNLOAD_URL \\\n && echo $MEMCACHED_DOWNLOAD_SHA $MEMCACHED_VERSION.tar.gz | sha256sum -c \\\n && tar xzvf $MEMCACHED_VERSION.tar.gz \\\n && cd memcached-$MEMCACHED_VERSION \\\n && ./autogen.sh \\\n && env CFLAGS='-I/opt/homemade/include' LDFLAGS='-L/opt/homemade/lib' ./configure --enable-sasl \\\n && make SHARED=0 CC='gcc -static' \\\n && make install \\\n && make \\\n && install -o root -g root -m 744 memcached /usr/bin \\\n && cd .. \\\n && rm cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && rm libevent-$LIBEVENT_VERSION.tar.gz \\\n && rm $MEMCACHED_VERSION.tar.gz \\\n && rm -r cyrus-sasl-$SASL_VERSION \\\n && rm -r libevent-$LIBEVENT_VERSION \\\n && rm -r memcached-$MEMCACHED_VERSION \\\n && rm -r /opt/homemade \\\n && apk del autoconf automake build-base coreutils curl git linux-headers perl \\\n && rm -rf /var/cache/apk/*\nUSER memcached\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"3da16871240b163acd3e87ea661d60d1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM cusdeb/alpine3.7:amd64\nMAINTAINER Evgeny Golyshev <eugulixes@gmail.com>\nENV MEMCACHED_VERSION=\"1.5.10\"\nENV MEMCACHED_DOWNLOAD_URL=\"https://github.com/memcached/memcached/archive/$MEMCACHED_VERSION.tar.gz\"\nENV MEMCACHED_DOWNLOAD_SHA=\"58408d0abc29e2da27cd3e1b9506991f0bd9c80e9362c68e564eee166631b18a\"\n#   If the version doesn't look bad for Debian Stretch,\n#   it's not bad for the image.\nENV SASL_VERSION=\"2.1.27\"\nENV SASL_RC=\"rc7\"\nENV SASL_DOWNLOAD_URL=\"ftp://ftp.cyrusimap.org/cyrus-sasl/cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz\"\nENV LIBEVENT_VERSION=\"2.1.8-stable\"\nENV LIBEVENT_DOWNLOAD_URL=\"https://github.com/libevent/libevent/releases/download/release-$LIBEVENT_VERSION/libevent-$LIBEVENT_VERSION.tar.gz\"\nRUN adduser -D memcached\nRUN apk add --update autoconf automake build-base coreutils curl git linux-headers perl \\\n && mkdir -p /opt/homemade \\\n && cd \\\n && curl -O $SASL_DOWNLOAD_URL \\\n && tar xzvf cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && cd cyrus-sasl-$SASL_VERSION \\\n && ./configure --prefix=/opt/homemade --disable-anon --enable-cram --enable-digest --enable-login --enable-ntlm --disable-otp --enable-plain --with-gss_impl=heimdal --with-devrandom=/dev/urandom --without-ldap --with-saslauthd=/var/run/saslauthd --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $LIBEVENT_DOWNLOAD_URL \\\n && tar xzvf libevent-$LIBEVENT_VERSION.tar.gz \\\n && cd libevent-$LIBEVENT_VERSION \\\n && ./configure --prefix=/opt/homemade --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && curl -OL $MEMCACHED_DOWNLOAD_URL \\\n && echo $MEMCACHED_DOWNLOAD_SHA $MEMCACHED_VERSION.tar.gz | sha256sum -c \\\n && tar xzvf $MEMCACHED_VERSION.tar.gz \\\n && cd memcached-$MEMCACHED_VERSION \\\n && ./autogen.sh \\\n && env CFLAGS='-I/opt/homemade/include' LDFLAGS='-L/opt/homemade/lib' ./configure --enable-sasl \\\n && make SHARED=0 CC='gcc -static' \\\n && make install \\\n && make \\\n && install -o root -g root -m 744 memcached /usr/bin \\\n && cd .. \\\n && rm cyrus-sasl-$SASL_VERSION-$SASL_RC.tar.gz \\\n && rm libevent-$LIBEVENT_VERSION.tar.gz \\\n && rm $MEMCACHED_VERSION.tar.gz \\\n && rm -r cyrus-sasl-$SASL_VERSION \\\n && rm -r libevent-$LIBEVENT_VERSION \\\n && rm -r memcached-$MEMCACHED_VERSION \\\n && rm -r /opt/homemade \\\n && apk del autoconf automake build-base coreutils curl git linux-headers perl \\\n && rm -rf /var/cache/apk/*\nUSER memcached\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"ab3fb2871a18cc2618226970dcbc4093","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b473a8daa0119ca77fe1f6ccbad1e169604bf2a7.dockerfile"}