{"seed":2089078949,"processedDockerfileHash":"c9c50bc8df8f0af21b98e179515d07fa","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Docker file for building Blender as a Python module for AWS Lambda\n#   Compiles to ~/blender-git/blender_build/bin\nFROM amazonlinux:2017.03\nRUN yum install git cmake -y\nRUN yum groupinstall 'Development Tools' -y\nRUN yum install gcc-c++ libXi-devel openexr-devel SDL-devel fftw-devel libtiff-devel freetype-devel libogg-devel libjpeg-devel openjpeg openjpeg-devel libpng-devel vim libGLU-devel wget -y\n#   Install Python3.6\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\nRUN cd ~ \\\n && wget https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tgz \\\n && tar xzf Python-3.6.6.tgz \\\n && cd Python-3.6.6 \\\n && ./configure --enable-shared \\\n && make install \\\n && ldconfig \\\n && python3 --version\nRUN git clone https://github.com/nigels-com/glew ~/glew \\\n && cd ~/glew \\\n && make extensions \\\n && make \\\n && make install\nRUN mkdir ~/blender-git \\\n && cd ~/blender-git \\\n && git clone --progress --no-checkout https://git.blender.org/blender.git \\\n && cd blender \\\n && git checkout tags/v2.79 \\\n && git submodule update --init --recursive \\\n && git submodule foreach git checkout master \\\n && git submodule foreach git pull --rebase origin master\nRUN ~/blender-git/blender/build_files/build_environment/install_deps.sh --no-sudo --no-confirm --build-boost --build-openexr --build-oiio --skip-python --skip-numpy --skip-ocio --skip-osl --skip-osd --skip-openvdb --skip-llvm --skip-alembic --skip-opencollada --skip-ffmpeg\nENV BOOST_ROOT=\"~/src/blender-deps/boost-1.60.0\"\n#   Maintainer's note: calculate DPYTHON_INCLUDE_DIR with the following command:\n#   ```\n#   python3 -c \"from distutils.sysconfig import get_python_inc; print(get_python_inc())\"\n#   ```\nRUN mkdir ~/blender-git/blender_build \\\n && cd ~/blender-git/blender_build \\\n && cmake ../blender -DPYTHON_INCLUDE_DIR=/usr/local/include/python3.6m -DPYTHON_LIBRARY=/usr/local/lib/libpython3.6m.so -DPYTHON_LIBPATH=/usr/local/lib -DWITH_INTERNATIONAL=OFF -DWITH_CYCLES=ON -DWITH_AUDASPACE=OFF -DWITH_BOOST=ON -DWITH_BULLET=OFF -DWITH_CODEC_AVI=OFF -DWITH_COMPOSITOR=OFF -DWITH_GAMEENGINE=OFF -DWITH_GAMEENGINE_DECKLINK=OFF -DWITH_HEADLESS=ON -DWITH_IMAGE_DDS=OFF -DWITH_IMAGE_CINEON=OFF -DWITH_IMAGE_OPENEXR=OFF -DWITH_IMAGE_OPENJPEG=OFF -DWITH_IMAGE_TIFF=OFF -DWITH_INPUT_NDOF=OFF -DWITH_LIBMV=OFF -DWITH_MOD_REMESH=OFF -DWITH_MOD_SMOKE=OFF -DWITH_OPENAL=OFF -DWITH_OPENIMAGEIO=OFF -DWITH_PYTHON_INSTALL_NUMPY=OFF -DWITH_INSTALL_PORTABLE=ON -DWITH_PYTHON_INSTALL_REQUESTS=OFF -DWITH_PYTHON_MODULE=ON -DWITH_PYTHON_INSTALL=OFF -DWITH_STATIC_LIBS=ON -DWITH_SYSTEM_GLEW=OFF -DWITH_SYSTEM_GLES=OFF -DWITH_FREESTYLE=ON\nRUN cd ~/blender-git/blender_build \\\n && make \\\n && make install\nRUN mkdir /bpy_lambda \\\n && cd /bpy_lambda \\\n && cp -R ~/blender-git/blender_build/bin/2.79 . \\\n && cp -R ~/blender-git/blender_build/bin/bpy.so . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libHalf.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIex.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmImf.so.22 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmThread.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libImath.so.12 . \\\n && cp -L /opt/lib/oiio-1.7.15/lib/libOpenImageIO.so.1.7 . \\\n && cp -L /usr/lib64/libopenjpeg.so.2 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_filesystem.so.1.60.0 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_regex.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_system.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_thread.so.1.60.0 . \\\n && cp -L /usr/local/lib/libpython3.6m.so.1.0 . \\\n && cp -L /usr/lib64/libGLU.so.1 .\n#   Build artifact stored in /bpy_lambda\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Docker file for building Blender as a Python module for AWS Lambda\n#  Compiles to ~/blender-git/blender_build/bin\nFROM amazonlinux:2017.03\nRUN yum install git cmake -y\nRUN yum groupinstall 'Development Tools' -y\nRUN yum install gcc-c++ libXi-devel openexr-devel SDL-devel fftw-devel libtiff-devel freetype-devel libogg-devel libjpeg-devel openjpeg openjpeg-devel libpng-devel vim libGLU-devel wget -y\n#  Install Python3.6\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\nRUN cd ~ \\\n && wget https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tgz \\\n && tar xzf Python-3.6.6.tgz \\\n && cd Python-3.6.6 \\\n && ./configure --enable-shared \\\n && make install \\\n && ldconfig \\\n && python3 --version\nRUN git clone https://github.com/nigels-com/glew ~/glew \\\n && cd ~/glew \\\n && make extensions \\\n && make \\\n && make install\nRUN mkdir ~/blender-git \\\n && cd ~/blender-git \\\n && git clone --progress --no-checkout https://git.blender.org/blender.git \\\n && cd blender \\\n && git checkout tags/v2.79 \\\n && git submodule update --init --recursive \\\n && git submodule foreach git checkout master \\\n && git submodule foreach git pull --rebase origin master\nRUN ~/blender-git/blender/build_files/build_environment/install_deps.sh --no-sudo --no-confirm --build-boost --build-openexr --build-oiio --skip-python --skip-numpy --skip-ocio --skip-osl --skip-osd --skip-openvdb --skip-llvm --skip-alembic --skip-opencollada --skip-ffmpeg\nENV BOOST_ROOT=\"~/src/blender-deps/boost-1.60.0\"\n#  Maintainer's note: calculate DPYTHON_INCLUDE_DIR with the following command:\n#  ```\n#  python3 -c \"from distutils.sysconfig import get_python_inc; print(get_python_inc())\"\n#  ```\nRUN mkdir ~/blender-git/blender_build \\\n && cd ~/blender-git/blender_build \\\n && cmake ../blender -DPYTHON_INCLUDE_DIR=/usr/local/include/python3.6m -DPYTHON_LIBRARY=/usr/local/lib/libpython3.6m.so -DPYTHON_LIBPATH=/usr/local/lib -DWITH_INTERNATIONAL=OFF -DWITH_CYCLES=ON -DWITH_AUDASPACE=OFF -DWITH_BOOST=ON -DWITH_BULLET=OFF -DWITH_CODEC_AVI=OFF -DWITH_COMPOSITOR=OFF -DWITH_GAMEENGINE=OFF -DWITH_GAMEENGINE_DECKLINK=OFF -DWITH_HEADLESS=ON -DWITH_IMAGE_DDS=OFF -DWITH_IMAGE_CINEON=OFF -DWITH_IMAGE_OPENEXR=OFF -DWITH_IMAGE_OPENJPEG=OFF -DWITH_IMAGE_TIFF=OFF -DWITH_INPUT_NDOF=OFF -DWITH_LIBMV=OFF -DWITH_MOD_REMESH=OFF -DWITH_MOD_SMOKE=OFF -DWITH_OPENAL=OFF -DWITH_OPENIMAGEIO=OFF -DWITH_PYTHON_INSTALL_NUMPY=OFF -DWITH_INSTALL_PORTABLE=ON -DWITH_PYTHON_INSTALL_REQUESTS=OFF -DWITH_PYTHON_MODULE=ON -DWITH_PYTHON_INSTALL=OFF -DWITH_STATIC_LIBS=ON -DWITH_SYSTEM_GLEW=OFF -DWITH_SYSTEM_GLES=OFF -DWITH_FREESTYLE=ON\nRUN cd ~/blender-git/blender_build \\\n && make \\\n && make install\nRUN mkdir /bpy_lambda \\\n && cd /bpy_lambda \\\n && cp -R ~/blender-git/blender_build/bin/2.79 . \\\n && cp -R ~/blender-git/blender_build/bin/bpy.so . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libHalf.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIex.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmImf.so.22 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmThread.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libImath.so.12 . \\\n && cp -L /opt/lib/oiio-1.7.15/lib/libOpenImageIO.so.1.7 . \\\n && cp -L /usr/lib64/libopenjpeg.so.2 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_filesystem.so.1.60.0 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_regex.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_system.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_thread.so.1.60.0 . \\\n && cp -L /usr/local/lib/libpython3.6m.so.1.0 . \\\n && cp -L /usr/lib64/libGLU.so.1 .\n#  Build artifact stored in /bpy_lambda\n","injectedSmells":[],"originalDockerfileHash":"25e718e9f3b6afa5695a70747c84d0a5","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Docker file for building Blender as a Python module for AWS Lambda\n#   Compiles to ~/blender-git/blender_build/bin\nFROM amazonlinux:2017.03\nRUN yum install git cmake -y\nRUN yum groupinstall 'Development Tools' -y\nRUN yum install gcc-c++ libXi-devel openexr-devel SDL-devel fftw-devel libtiff-devel freetype-devel libogg-devel libjpeg-devel openjpeg openjpeg-devel libpng-devel vim libGLU-devel wget -y\n#   Install Python3.6\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\nRUN cd ~ \\\n && wget https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tgz \\\n && tar xzf Python-3.6.6.tgz \\\n && cd Python-3.6.6 \\\n && ./configure --enable-shared \\\n && make install \\\n && ldconfig \\\n && python3 --version\nRUN git clone https://github.com/nigels-com/glew ~/glew \\\n && cd ~/glew \\\n && make extensions \\\n && make \\\n && make install\nRUN mkdir ~/blender-git \\\n && cd ~/blender-git \\\n && git clone --progress --no-checkout https://git.blender.org/blender.git \\\n && cd blender \\\n && git checkout tags/v2.79 \\\n && git submodule update --init --recursive \\\n && git submodule foreach git checkout master \\\n && git submodule foreach git pull --rebase origin master\nRUN ~/blender-git/blender/build_files/build_environment/install_deps.sh --no-sudo --no-confirm --build-boost --build-openexr --build-oiio --skip-python --skip-numpy --skip-ocio --skip-osl --skip-osd --skip-openvdb --skip-llvm --skip-alembic --skip-opencollada --skip-ffmpeg\nENV BOOST_ROOT=\"~/src/blender-deps/boost-1.60.0\"\n#   Maintainer's note: calculate DPYTHON_INCLUDE_DIR with the following command:\n#   ```\n#   python3 -c \"from distutils.sysconfig import get_python_inc; print(get_python_inc())\"\n#   ```\nRUN mkdir ~/blender-git/blender_build \\\n && cd ~/blender-git/blender_build \\\n && cmake ../blender -DPYTHON_INCLUDE_DIR=/usr/local/include/python3.6m -DPYTHON_LIBRARY=/usr/local/lib/libpython3.6m.so -DPYTHON_LIBPATH=/usr/local/lib -DWITH_INTERNATIONAL=OFF -DWITH_CYCLES=ON -DWITH_AUDASPACE=OFF -DWITH_BOOST=ON -DWITH_BULLET=OFF -DWITH_CODEC_AVI=OFF -DWITH_COMPOSITOR=OFF -DWITH_GAMEENGINE=OFF -DWITH_GAMEENGINE_DECKLINK=OFF -DWITH_HEADLESS=ON -DWITH_IMAGE_DDS=OFF -DWITH_IMAGE_CINEON=OFF -DWITH_IMAGE_OPENEXR=OFF -DWITH_IMAGE_OPENJPEG=OFF -DWITH_IMAGE_TIFF=OFF -DWITH_INPUT_NDOF=OFF -DWITH_LIBMV=OFF -DWITH_MOD_REMESH=OFF -DWITH_MOD_SMOKE=OFF -DWITH_OPENAL=OFF -DWITH_OPENIMAGEIO=OFF -DWITH_PYTHON_INSTALL_NUMPY=OFF -DWITH_INSTALL_PORTABLE=ON -DWITH_PYTHON_INSTALL_REQUESTS=OFF -DWITH_PYTHON_MODULE=ON -DWITH_PYTHON_INSTALL=OFF -DWITH_STATIC_LIBS=ON -DWITH_SYSTEM_GLEW=OFF -DWITH_SYSTEM_GLES=OFF -DWITH_FREESTYLE=ON\nRUN cd ~/blender-git/blender_build \\\n && make \\\n && make install\nRUN mkdir /bpy_lambda \\\n && cd /bpy_lambda \\\n && cp -R ~/blender-git/blender_build/bin/2.79 . \\\n && cp -R ~/blender-git/blender_build/bin/bpy.so . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libHalf.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIex.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmImf.so.22 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libIlmThread.so.12 . \\\n && cp -L /opt/lib/openexr-2.2.0/lib/libImath.so.12 . \\\n && cp -L /opt/lib/oiio-1.7.15/lib/libOpenImageIO.so.1.7 . \\\n && cp -L /usr/lib64/libopenjpeg.so.2 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_filesystem.so.1.60.0 . \\\n && cp -L /opt/lib/boost-1.60.0/lib/libboost_regex.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_system.so.1.60.0 . \\\n && cp -L /opt/lib/boost/lib/libboost_thread.so.1.60.0 . \\\n && cp -L /usr/local/lib/libpython3.6m.so.1.0 . \\\n && cp -L /usr/lib64/libGLU.so.1 .\n#   Build artifact stored in /bpy_lambda\n","originalDockerfileUglifiedHash":"875ab20815912b7d64bf7590e5eced4c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0bbf6d8789056c273a1554b1ac3de82b57efceb9.dockerfile"}