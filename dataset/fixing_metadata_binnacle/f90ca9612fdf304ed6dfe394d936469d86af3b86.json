{"seed":2594036457,"processedDockerfileHash":"caebc44b35681684d4d368c8d6bd22fb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Docker file to build a Bro image pre loeaded with Bro and Bro-Kafka plugin.\n#   This is used in the Bro/Logisland tutorial: Indexing Bro events.\n#\nFROM ubuntu:16.04\nMAINTAINER Hurence version: 0.1\n#   Update apt sources\nRUN :\nUSER root\n#\n#   Define where things will be installed\n#\n#   Base dir for work is the user directory \nARG HOME_DIR=/root\n#   Where to put sources to compile\nARG SRC_DIR=${HOME_DIR}/sources\n#   Where to put .pcap files\nARG PCAP_DIR=${HOME_DIR}/pcap_files\n#   Base install dir for binaries\nARG INSTALL_DIR=/usr/local\n#   Installed Bro base dir\nARG BRO_BASE_DIR=${INSTALL_DIR}/bro\n#\n#   Create needed base directories\n#\nRUN mkdir -p ${SRC_DIR}\nRUN mkdir -p ${PCAP_DIR}\nRUN mkdir -p ${BRO_BASE_DIR}\n#\n#   Install dev tools\n#\n#   Note: apt-get install -y avoids prompting for confirmation\n#   Git\nRUN (apt-get update ;apt-get install --no-install-recommends git=1:2.7.4-0ubuntu1.10 -y )\n#   make, gcc...\nRUN (apt-get update ;apt-get install --no-install-recommends build-essential=12.1ubuntu2 -y )\n#   Special additional components needed for building bro workspace\nRUN (apt-get update ;apt-get install --no-install-recommends python-dev=2.7.12-1~16.04 flex=2.6.0-11 bison=2:3.0.4.dfsg-1 libpcap-dev=1.7.4-2ubuntu0.1 libssl-dev=1.0.2g-1ubuntu4.20 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 flex=2.6.0-11 bison=2:3.0.4.dfsg-1 swig=3.0.8-0ubuntu3 -y )\n#   CMake\nRUN (apt-get update ;apt-get install --no-install-recommends cmake=3.5.1-1ubuntu3 -y )\n#\n#   Install sources, build and install Bro, librdkafka and the Bro-Kafka plugin\n#\n#   Download, build and install Bro \nRUN cd ${SRC_DIR} ; git clone --recursive https://github.com/bro/bro.git ; cd bro ; ./configure --prefix=${BRO_BASE_DIR} ; make ; make install\n#   Download, build and install librdkafka \nRUN cd ${SRC_DIR} ; git clone https://github.com/edenhill/librdkafka.git ; cd librdkafka ; ./configure --prefix=${INSTALL_DIR} ; make ; make install\n#   Download, build and install Bro-Kafka plugin \nRUN cd ${SRC_DIR} ; git clone https://github.com/apache/metron-bro-plugin-kafka.git ; cd metron-bro-plugin-kafka ; ./configure --install-root=${BRO_BASE_DIR}/lib/bro/plugins --bro-dist=${SRC_DIR}/bro --with-librdkafka=${INSTALL_DIR}/lib ; make ; make install\n#\n#   Install additional tools needed for the bro tutorial\n#\n#   Install curl for accessing Logisland ElasticSearch\nRUN (apt-get update ;apt-get install --no-install-recommends curl=7.47.0-1ubuntu2.19 -y )\n#   Install vi to be able to edit bro config files\nRUN (apt-get update ;apt-get install --no-install-recommends vim=2:7.4.1689-3ubuntu1.5 -y )\n#   Install ifconfig to be able to check container ip\nRUN (apt-get update ;apt-get install --no-install-recommends net-tools=1.60-26ubuntu1 -y )\n#   Install ping requests to easily generate a DNS query\nRUN (apt-get update ;apt-get install --no-install-recommends iputils-ping=3:20121221-5ubuntu2 -y )\n#\n#   Define environment variables\n#\n#   Bro\nENV BRO_HOME=\"${BRO_BASE_DIR}\"\n#   Update path for bro binary\nENV PATH=\"${BRO_HOME}/bin:${PATH}\"\n#   Pcap files\nENV PCAP_HOME=\"${PCAP_DIR}\"\n#\n#   Copy .pcap files\n#\n#   ssh.pcap comes from https://www.bro.org/bro-workshop-2011/solutions/notices/\n#   It is used to be able to easily generate a Bro notice (password guessing)\nCOPY ssh.pcap ${PCAP_DIR}\nWORKDIR /root\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  Docker file to build a Bro image pre loeaded with Bro and Bro-Kafka plugin.\n#  This is used in the Bro/Logisland tutorial: Indexing Bro events.\n#\nFROM ubuntu:16.04\nMAINTAINER Hurence version: 0.1\n#  Update apt sources\nRUN apt-get update\nUSER root\n#\n#  Define where things will be installed\n#\n#  Base dir for work is the user directory \nARG HOME_DIR=/root\n#  Where to put sources to compile\nARG SRC_DIR=${HOME_DIR}/sources\n#  Where to put .pcap files\nARG PCAP_DIR=${HOME_DIR}/pcap_files\n#  Base install dir for binaries\nARG INSTALL_DIR=/usr/local\n#  Installed Bro base dir\nARG BRO_BASE_DIR=${INSTALL_DIR}/bro\n#\n#  Create needed base directories\n#\nRUN mkdir -p ${SRC_DIR}\nRUN mkdir -p ${PCAP_DIR}\nRUN mkdir -p ${BRO_BASE_DIR}\n#\n#  Install dev tools\n#\n#  Note: apt-get install -y avoids prompting for confirmation\n#  Git\nRUN apt-get install git -y\n#  make, gcc...\nRUN apt-get install build-essential -y\n#  Special additional components needed for building bro workspace\nRUN apt-get install python-dev flex bison libpcap-dev libssl-dev zlib1g-dev flex bison swig -y\n#  CMake\nRUN apt-get install cmake -y\n#\n#  Install sources, build and install Bro, librdkafka and the Bro-Kafka plugin\n#\n#  Download, build and install Bro \nRUN cd ${SRC_DIR} ; git clone --recursive https://github.com/bro/bro.git ; cd bro ; ./configure --prefix=${BRO_BASE_DIR} ; make ; make install\n#  Download, build and install librdkafka \nRUN cd ${SRC_DIR} ; git clone https://github.com/edenhill/librdkafka.git ; cd librdkafka ; ./configure --prefix=${INSTALL_DIR} ; make ; make install\n#  Download, build and install Bro-Kafka plugin \nRUN cd ${SRC_DIR} ; git clone https://github.com/apache/metron-bro-plugin-kafka.git ; cd metron-bro-plugin-kafka ; ./configure --install-root=${BRO_BASE_DIR}/lib/bro/plugins --bro-dist=${SRC_DIR}/bro --with-librdkafka=${INSTALL_DIR}/lib ; make ; make install\n#\n#  Install additional tools needed for the bro tutorial\n#\n#  Install curl for accessing Logisland ElasticSearch\nRUN apt-get install curl -y\n#  Install vi to be able to edit bro config files\nRUN apt-get install vim -y\n#  Install ifconfig to be able to check container ip\nRUN apt-get install net-tools -y\n#  Install ping requests to easily generate a DNS query\nRUN apt-get install iputils-ping -y\n#\n#  Define environment variables\n#\n#  Bro\nENV BRO_HOME=\"${BRO_BASE_DIR}\"\n#  Update path for bro binary\nENV PATH=\"${BRO_HOME}/bin:${PATH}\"\n#  Pcap files\nENV PCAP_HOME=\"${PCAP_DIR}\"\n#\n#  Copy .pcap files\n#\n#  ssh.pcap comes from https://www.bro.org/bro-workshop-2011/solutions/notices/\n#  It is used to be able to easily generate a Bro notice (password guessing)\nCOPY ssh.pcap ${PCAP_DIR}\nWORKDIR /root\n","injectedSmells":[],"originalDockerfileHash":"46a69b8f6f9066f975789e0e9a9ddae9","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Docker file to build a Bro image pre loeaded with Bro and Bro-Kafka plugin.\n#   This is used in the Bro/Logisland tutorial: Indexing Bro events.\n#\nFROM ubuntu:16.04\nMAINTAINER Hurence version: 0.1\n#   Update apt sources\nRUN apt-get update\nUSER root\n#\n#   Define where things will be installed\n#\n#   Base dir for work is the user directory \nARG HOME_DIR=/root\n#   Where to put sources to compile\nARG SRC_DIR=${HOME_DIR}/sources\n#   Where to put .pcap files\nARG PCAP_DIR=${HOME_DIR}/pcap_files\n#   Base install dir for binaries\nARG INSTALL_DIR=/usr/local\n#   Installed Bro base dir\nARG BRO_BASE_DIR=${INSTALL_DIR}/bro\n#\n#   Create needed base directories\n#\nRUN mkdir -p ${SRC_DIR}\nRUN mkdir -p ${PCAP_DIR}\nRUN mkdir -p ${BRO_BASE_DIR}\n#\n#   Install dev tools\n#\n#   Note: apt-get install -y avoids prompting for confirmation\n#   Git\nRUN apt-get install git -y\n#   make, gcc...\nRUN apt-get install build-essential -y\n#   Special additional components needed for building bro workspace\nRUN apt-get install python-dev flex bison libpcap-dev libssl-dev zlib1g-dev flex bison swig -y\n#   CMake\nRUN apt-get install cmake -y\n#\n#   Install sources, build and install Bro, librdkafka and the Bro-Kafka plugin\n#\n#   Download, build and install Bro \nRUN cd ${SRC_DIR} ; git clone --recursive https://github.com/bro/bro.git ; cd bro ; ./configure --prefix=${BRO_BASE_DIR} ; make ; make install\n#   Download, build and install librdkafka \nRUN cd ${SRC_DIR} ; git clone https://github.com/edenhill/librdkafka.git ; cd librdkafka ; ./configure --prefix=${INSTALL_DIR} ; make ; make install\n#   Download, build and install Bro-Kafka plugin \nRUN cd ${SRC_DIR} ; git clone https://github.com/apache/metron-bro-plugin-kafka.git ; cd metron-bro-plugin-kafka ; ./configure --install-root=${BRO_BASE_DIR}/lib/bro/plugins --bro-dist=${SRC_DIR}/bro --with-librdkafka=${INSTALL_DIR}/lib ; make ; make install\n#\n#   Install additional tools needed for the bro tutorial\n#\n#   Install curl for accessing Logisland ElasticSearch\nRUN apt-get install curl -y\n#   Install vi to be able to edit bro config files\nRUN apt-get install vim -y\n#   Install ifconfig to be able to check container ip\nRUN apt-get install net-tools -y\n#   Install ping requests to easily generate a DNS query\nRUN apt-get install iputils-ping -y\n#\n#   Define environment variables\n#\n#   Bro\nENV BRO_HOME=\"${BRO_BASE_DIR}\"\n#   Update path for bro binary\nENV PATH=\"${BRO_HOME}/bin:${PATH}\"\n#   Pcap files\nENV PCAP_HOME=\"${PCAP_DIR}\"\n#\n#   Copy .pcap files\n#\n#   ssh.pcap comes from https://www.bro.org/bro-workshop-2011/solutions/notices/\n#   It is used to be able to easily generate a Bro notice (password guessing)\nCOPY ssh.pcap ${PCAP_DIR}\nWORKDIR /root\n","originalDockerfileUglifiedHash":"63bbdd25041d7d79e25b38095c640996","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f90ca9612fdf304ed6dfe394d936469d86af3b86.dockerfile"}