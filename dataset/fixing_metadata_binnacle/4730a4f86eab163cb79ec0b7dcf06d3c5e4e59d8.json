{"seed":1296363716,"processedDockerfileHash":"fb44e9ac4a1edcfd08cfbe086fc807c2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Creates an Enchiladas container for the Tapestry project.\n#   This Dockerfile was originally written by Tanner Hobson (thobson2@vols.utk.edu)\nFROM ubuntu:xenial\nMAINTAINER Mohammad Raji <mahmadza@vols.utk.edu>\nARG build_parallel\nARG minifyjs\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.1ubuntu2 cmake=3.5.1-1ubuntu3 python=2.7.12-1~16.04 libtbb-dev=4.4~20151115-0ubuntu3 libglu1-mesa-dev=9.0.0-2.1 freeglut3-dev=2.8.1-2 mesa-common-dev=18.0.5-0ubuntu0~16.04.1 libc6-dev=2.23-0ubuntu11.3 libnetcdf-c++4-1=4.2.1-3 libnetcdf-dev=1:4.4.0-2 libnetcdf-c++4-dev=4.2.1-3 python-pip=8.1.1-2ubuntu0.6 git=1:2.7.4-0ubuntu1.10 yasm=1.3.0-2 -y \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/\nCOPY rapidjson /opt/rapidjson\nWORKDIR /opt/rapidjson/build/\nRUN true \\\n && cmake .. -DRAPIDJSON_BUILD_EXAMPLES:BOOL=OFF -DRAPIDJSON_BUILD_TESTS:BOOL=OFF \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/rapidjson\nWORKDIR /opt/\nCOPY tbb2017_20161128oss_lin.tgz /opt/\nRUN mv tbb2017_20161128oss tbb\nWORKDIR /opt/tbb/\nWORKDIR /opt/\nCOPY ispc-v1.9.1-linux.tar.gz /opt/\nRUN mv ispc-v1.9.1-linux ispc\nWORKDIR /opt/ispc/\nRUN update-alternatives --install /usr/bin/ispc ispc /opt/ispc/ispc 1\nWORKDIR /opt/\nCOPY embree-2.16.4.x86_64.linux.tar.gz /opt/\nRUN mv embree-2.16.4.x86_64.linux embree\nWORKDIR /opt/embree/\nWORKDIR /opt/\nCOPY ospray /opt/ospray\nWORKDIR /opt/ospray/build\nRUN true \\\n && cmake .. -Dembree_DIR=/opt/embree -DOSPRAY_ENABLE_APPS:BOOL=OFF -DTBB_ROOT=/opt/tbb/ -DOSPRAY_TASKING_SYSTEM=TBB \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/ospray\n#   Install SVT-HEVC for tapestry-gui\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/intel/SVT-HEVC \\\n && cd SVT-HEVC \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/FFmpeg/FFmpeg ffmpeg\nWORKDIR /opt/ffmpeg/\nRUN git checkout release/4.1 \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0001-lavc-svt_hevc-add-libsvt-hevc-encoder-wrapper.patch \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0002-doc-Add-libsvt_hevc-encoder-docs.patch \\\n && export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib \\\n && export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/local/lib/pkgconfig \\\n && ./configure --enable-libsvthevc \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt/\nCOPY enchiladas /opt/enchiladas\nCOPY pbnj /opt/enchiladas/resources/pbnj\nCOPY pistache /opt/enchiladas/resources/pistache\nWORKDIR /opt/enchiladas/build\nRUN true \\\n && pip install rjsmin==1.2.1 \\\n && cmake .. -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc -DUSE_NETCDF:BOOL=ON -DBUILD_EXAMPLES:BOOL=OFF -DOSPRAY_INSTALL_DIR=/usr/local/ -DTBB_ROOT=/opt/tbb/ -Dembree_DIR=/opt/embree -DENABLE_MINIFY=${minifyjs:+ON}${minifyjs:-OFF} \\\n && make ${build_parallel} \\\n && make install\n#   Copy dependency installation script \nCOPY install_dependencies.sh /opt/install_dependencies.sh\nRUN /opt/install_dependencies.sh\nCMD [\"sh\", \"-c\", \"./server\", \"/config\", \"9010\", \"${APP_DIR}\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Creates an Enchiladas container for the Tapestry project.\n#  This Dockerfile was originally written by Tanner Hobson (thobson2@vols.utk.edu)\nFROM ubuntu:xenial\nMAINTAINER Mohammad Raji <mahmadza@vols.utk.edu>\nARG build_parallel\nARG minifyjs\nRUN apt-get update \\\n && apt-get install build-essential cmake python libtbb-dev libglu1-mesa-dev freeglut3-dev mesa-common-dev libc6-dev libnetcdf-c++4-1 libnetcdf-dev libnetcdf-c++4-dev python-pip git yasm -y \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/\nCOPY rapidjson /opt/rapidjson\nWORKDIR /opt/rapidjson/build/\nRUN true \\\n && cmake .. -DRAPIDJSON_BUILD_EXAMPLES:BOOL=OFF -DRAPIDJSON_BUILD_TESTS:BOOL=OFF \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/rapidjson\nWORKDIR /opt/\nADD tbb2017_20161128oss_lin.tgz /opt/\nRUN mv tbb2017_20161128oss tbb\nWORKDIR /opt/tbb/\nWORKDIR /opt/\nADD ispc-v1.9.1-linux.tar.gz /opt/\nRUN mv ispc-v1.9.1-linux ispc\nWORKDIR /opt/ispc/\nRUN update-alternatives --install /usr/bin/ispc ispc /opt/ispc/ispc 1\nWORKDIR /opt/\nADD embree-2.16.4.x86_64.linux.tar.gz /opt/\nRUN mv embree-2.16.4.x86_64.linux embree\nWORKDIR /opt/embree/\nWORKDIR /opt/\nCOPY ospray /opt/ospray\nWORKDIR /opt/ospray/build\nRUN true \\\n && cmake .. -Dembree_DIR=/opt/embree -DOSPRAY_ENABLE_APPS:BOOL=OFF -DTBB_ROOT=/opt/tbb/ -DOSPRAY_TASKING_SYSTEM=TBB \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/ospray\n#  Install SVT-HEVC for tapestry-gui\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/intel/SVT-HEVC \\\n && cd SVT-HEVC \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/FFmpeg/FFmpeg ffmpeg\nWORKDIR /opt/ffmpeg/\nRUN git checkout release/4.1 \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0001-lavc-svt_hevc-add-libsvt-hevc-encoder-wrapper.patch \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0002-doc-Add-libsvt_hevc-encoder-docs.patch \\\n && export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib \\\n && export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/local/lib/pkgconfig \\\n && ./configure --enable-libsvthevc \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt/\nCOPY enchiladas /opt/enchiladas\nCOPY pbnj /opt/enchiladas/resources/pbnj\nCOPY pistache /opt/enchiladas/resources/pistache\nWORKDIR /opt/enchiladas/build\nRUN true \\\n && pip install rjsmin \\\n && cmake .. -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc -DUSE_NETCDF:BOOL=ON -DBUILD_EXAMPLES:BOOL=OFF -DOSPRAY_INSTALL_DIR=/usr/local/ -DTBB_ROOT=/opt/tbb/ -Dembree_DIR=/opt/embree -DENABLE_MINIFY=${minifyjs:+ON}${minifyjs:-OFF} \\\n && make ${build_parallel} \\\n && make install\n#  Copy dependency installation script \nCOPY install_dependencies.sh /opt/install_dependencies.sh\nRUN /opt/install_dependencies.sh\nCMD [\"sh\", \"-c\", \"./server\", \"/config\", \"9010\", \"${APP_DIR}\"]\n","injectedSmells":[],"originalDockerfileHash":"82c283fdfca96003e696cec44d44f0c4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Creates an Enchiladas container for the Tapestry project.\n#   This Dockerfile was originally written by Tanner Hobson (thobson2@vols.utk.edu)\nFROM ubuntu:xenial\nMAINTAINER Mohammad Raji <mahmadza@vols.utk.edu>\nARG build_parallel\nARG minifyjs\nRUN apt-get update \\\n && apt-get install build-essential cmake python libtbb-dev libglu1-mesa-dev freeglut3-dev mesa-common-dev libc6-dev libnetcdf-c++4-1 libnetcdf-dev libnetcdf-c++4-dev python-pip git yasm -y \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/\nCOPY rapidjson /opt/rapidjson\nWORKDIR /opt/rapidjson/build/\nRUN true \\\n && cmake .. -DRAPIDJSON_BUILD_EXAMPLES:BOOL=OFF -DRAPIDJSON_BUILD_TESTS:BOOL=OFF \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/rapidjson\nWORKDIR /opt/\nADD tbb2017_20161128oss_lin.tgz /opt/\nRUN mv tbb2017_20161128oss tbb\nWORKDIR /opt/tbb/\nWORKDIR /opt/\nADD ispc-v1.9.1-linux.tar.gz /opt/\nRUN mv ispc-v1.9.1-linux ispc\nWORKDIR /opt/ispc/\nRUN update-alternatives --install /usr/bin/ispc ispc /opt/ispc/ispc 1\nWORKDIR /opt/\nADD embree-2.16.4.x86_64.linux.tar.gz /opt/\nRUN mv embree-2.16.4.x86_64.linux embree\nWORKDIR /opt/embree/\nWORKDIR /opt/\nCOPY ospray /opt/ospray\nWORKDIR /opt/ospray/build\nRUN true \\\n && cmake .. -Dembree_DIR=/opt/embree -DOSPRAY_ENABLE_APPS:BOOL=OFF -DTBB_ROOT=/opt/tbb/ -DOSPRAY_TASKING_SYSTEM=TBB \\\n && make ${build_parallel} \\\n && make install \\\n && rm -rf /opt/ospray\n#   Install SVT-HEVC for tapestry-gui\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/intel/SVT-HEVC \\\n && cd SVT-HEVC \\\n && mkdir build \\\n && cd build \\\n && cmake .. \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt\nRUN true \\\n && git clone https://github.com/FFmpeg/FFmpeg ffmpeg\nWORKDIR /opt/ffmpeg/\nRUN git checkout release/4.1 \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0001-lavc-svt_hevc-add-libsvt-hevc-encoder-wrapper.patch \\\n && git apply ../SVT-HEVC/ffmpeg_plugin/0002-doc-Add-libsvt_hevc-encoder-docs.patch \\\n && export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib \\\n && export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/local/lib/pkgconfig \\\n && ./configure --enable-libsvthevc \\\n && make -j `nproc ` \\\n && make install\nWORKDIR /opt/\nCOPY enchiladas /opt/enchiladas\nCOPY pbnj /opt/enchiladas/resources/pbnj\nCOPY pistache /opt/enchiladas/resources/pistache\nWORKDIR /opt/enchiladas/build\nRUN true \\\n && pip install rjsmin \\\n && cmake .. -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc -DUSE_NETCDF:BOOL=ON -DBUILD_EXAMPLES:BOOL=OFF -DOSPRAY_INSTALL_DIR=/usr/local/ -DTBB_ROOT=/opt/tbb/ -Dembree_DIR=/opt/embree -DENABLE_MINIFY=${minifyjs:+ON}${minifyjs:-OFF} \\\n && make ${build_parallel} \\\n && make install\n#   Copy dependency installation script \nCOPY install_dependencies.sh /opt/install_dependencies.sh\nRUN /opt/install_dependencies.sh\nCMD [\"sh\", \"-c\", \"./server\", \"/config\", \"9010\", \"${APP_DIR}\"]\n","originalDockerfileUglifiedHash":"15d1e4f87a3ef18eef893b82516efe8f","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4730a4f86eab163cb79ec0b7dcf06d3c5e4e59d8.dockerfile"}