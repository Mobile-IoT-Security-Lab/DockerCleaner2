{"seed":3007383737,"processedDockerfileHash":"740d6f6e53688cbb63903e473cb39460","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.10\nARG IMAGE_CREATE_DATE\nARG IMAGE_VERSION\nARG IMAGE_SOURCE_REVISION\nARG KUBECTL_VERSION=1.14.3\nARG KUBECTX_VERSION=0.6.3\nARG ISTIO_VERSION=1.1.8\nARG LINKERD_VERSION=2.3.2\nARG HELM_VERSION=2.14.1\nARG KUBE_PS1_VERSION=0.7.0 \n#   Metadata as defined in OCI image spec annotations - https://github.com/opencontainers/image-spec/blob/master/annotations.md\nLABEL org.opencontainers.image.title=\"Kubernetes cli toolset\" \\\n      org.opencontainers.image.description=\"Provides the following Kubernetes cli toolset - kubectl $KUBECTL_VERSION, kubectx/kubens $KUBECTX_VERSION, istioctl $ISTIO_VERSION, linkerd $LINKERD_VERSION, and helm $HELM_VERSION. Leverages kube-ps1 $KUBE_PS1_VERSION to provide the current Kubernetes context and namespace on the bash prompt.\" \\\n      org.opencontainers.image.created=\"$IMAGE_CREATE_DATE\" \\\n      org.opencontainers.image.version=\"$IMAGE_VERSION\" \\\n      org.opencontainers.image.authors=\"Paul Bouwer\" \\\n      org.opencontainers.image.url=\"https://hub.docker.com/r/paulbouwer/k8s-cli-toolset/\" \\\n      org.opencontainers.image.documentation=\"https://github.com/paulbouwer/k8s-cli-toolset\" \\\n      org.opencontainers.image.vendor=\"Paul Bouwer\" \\\n      org.opencontainers.image.licenses=\"MIT\" \\\n      org.opencontainers.image.source=\"https://github.com/paulbouwer/k8s-cli-toolset.git\" \\\n      org.opencontainers.image.revision=\"$IMAGE_SOURCE_REVISION\"\n#   Install dependencies and create dirs\nRUN apt-get update \\\n && apt-get install --no-install-recommends bash-completion ca-certificates curl git jq less vim -y \\\n && echo \". /etc/bash_completion\" >> ~/.bashrc \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir -p ~/completions \\\n && mkdir -p ~/k8s-prompt\nWORKDIR /tmp/install-utils\n#   Install kubectl \n#   License: Apache-2.0\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/v$KUBECTL_VERSION/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl \\\n && kubectl completion bash > ~/completions/kubectl.completion \\\n && echo \"source ~/completions/kubectl.completion\" >> ~/.bashrc\n#   Install kubectx/kubens\n#   License: Apache-2.0\nRUN curl -L https://github.com/ahmetb/kubectx/archive/v$KUBECTX_VERSION.tar.gz | tar xz \\\n && cd ./kubectx-$KUBECTX_VERSION \\\n && mv kubectx kubens /usr/local/bin/ \\\n && chmod +x /usr/local/bin/kubectx \\\n && chmod +x /usr/local/bin/kubens \\\n && cat completion/kubectx.bash >> ~/completions/kubectx.completion \\\n && cat completion/kubens.bash >> ~/completions/kubens.completion \\\n && echo \"source ~/completions/kubectx.completion\" >> ~/.bashrc \\\n && echo \"source ~/completions/kubens.completion\" >> ~/.bashrc \\\n && cd ../ \\\n && rm -fr ./kubectx-$KUBECTX_VERSION\n#   Install linkerd\n#   License: Apache-2.0\nRUN curl -LO https://github.com/linkerd/linkerd2/releases/download/stable-$LINKERD_VERSION/linkerd2-cli-stable-$LINKERD_VERSION-linux \\\n && mv ./linkerd2-cli-stable-$LINKERD_VERSION-linux /usr/local/bin/linkerd \\\n && chmod +x /usr/local/bin/linkerd\n#   Install istioctl\n#   License: Apache-2.0\nRUN curl -L https://github.com/istio/istio/releases/download/$ISTIO_VERSION/istio-$ISTIO_VERSION-linux.tar.gz | tar xz \\\n && cd ./istio-$ISTIO_VERSION \\\n && mv bin/istioctl /usr/local/bin/ \\\n && chmod +x /usr/local/bin/istioctl \\\n && cd ../ \\\n && rm -fr ./istio-$ISTIO_VERSION \\\n && istioctl collateral --bash -o ~/completions \\\n && mv ~/completions/istioctl.bash ~/completions/istioctl.completion \\\n && echo \"source ~/completions/istioctl.completion\" >> ~/.bashrc\n#   Install helm\n#   License: Apache-2.0\nRUN mkdir helm-$HELM_VERSION \\\n && curl -L https://storage.googleapis.com/kubernetes-helm/helm-v$HELM_VERSION-linux-amd64.tar.gz | tar xz -C helm-$HELM_VERSION --strip-components 1 \\\n && cd ./helm-$HELM_VERSION \\\n && mv helm /usr/local/bin/ \\\n && chmod +x /usr/local/bin/helm \\\n && cd ../ \\\n && rm -fr ./helm-$HELM_VERSION \\\n && helm completion bash > ~/completions/helm.completion \\\n && echo \"source ~/completions/helm.completion\" >> ~/.bashrc\n#   Install kube-ps1\n#   License: Apache-2.0\nCOPY k8s-cli-ps1.sh /root/k8s-prompt/\nRUN curl -L https://github.com/jonmosco/kube-ps1/archive/v$KUBE_PS1_VERSION.tar.gz | tar xz \\\n && cd ./kube-ps1-$KUBE_PS1_VERSION \\\n && mv kube-ps1.sh ~/k8s-prompt/ \\\n && chmod +x ~/k8s-prompt/*.sh \\\n && rm -fr ./kube-ps1-$KUBE_PS1_VERSION \\\n && echo \"source ~/k8s-prompt/kube-ps1.sh\" >> ~/.bashrc \\\n && echo \"source ~/k8s-prompt/k8s-cli-ps1.sh\" >> ~/.bashrc \\\n && echo \"PROMPT_COMMAND=\\\"_kube_ps1_update_cache \\\n && k8s_cli_ps1\\\"\" >> ~/.bashrc\nRUN rm -fr /tmp/install-utils \\\n && echo \"alias k=kubectl\" >> ~/.bashrc \\\n && echo \"complete -o default -F __start_kubectl k\" >> ~/.bashrc\nWORKDIR /workspace\nCMD bash\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.10\nARG IMAGE_CREATE_DATE\nARG IMAGE_VERSION\nARG IMAGE_SOURCE_REVISION\nARG KUBECTL_VERSION=1.14.3\nARG KUBECTX_VERSION=0.6.3\nARG ISTIO_VERSION=1.1.8\nARG LINKERD_VERSION=2.3.2\nARG HELM_VERSION=2.14.1\nARG KUBE_PS1_VERSION=0.7.0 \n#  Metadata as defined in OCI image spec annotations - https://github.com/opencontainers/image-spec/blob/master/annotations.md\nLABEL org.opencontainers.image.title=\"Kubernetes cli toolset\" \\\n      org.opencontainers.image.description=\"Provides the following Kubernetes cli toolset - kubectl $KUBECTL_VERSION, kubectx/kubens $KUBECTX_VERSION, istioctl $ISTIO_VERSION, linkerd $LINKERD_VERSION, and helm $HELM_VERSION. Leverages kube-ps1 $KUBE_PS1_VERSION to provide the current Kubernetes context and namespace on the bash prompt.\" \\\n      org.opencontainers.image.created=\"$IMAGE_CREATE_DATE\" \\\n      org.opencontainers.image.version=\"$IMAGE_VERSION\" \\\n      org.opencontainers.image.authors=\"Paul Bouwer\" \\\n      org.opencontainers.image.url=\"https://hub.docker.com/r/paulbouwer/k8s-cli-toolset/\" \\\n      org.opencontainers.image.documentation=\"https://github.com/paulbouwer/k8s-cli-toolset\" \\\n      org.opencontainers.image.vendor=\"Paul Bouwer\" \\\n      org.opencontainers.image.licenses=\"MIT\" \\\n      org.opencontainers.image.source=\"https://github.com/paulbouwer/k8s-cli-toolset.git\" \\\n      org.opencontainers.image.revision=\"$IMAGE_SOURCE_REVISION\"\n#  Install dependencies and create dirs\nRUN apt-get update \\\n && apt-get install --no-install-recommends bash-completion ca-certificates curl git jq less vim -y \\\n && echo \". /etc/bash_completion\" >> ~/.bashrc \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir -p ~/completions \\\n && mkdir -p ~/k8s-prompt\nWORKDIR /tmp/install-utils\n#  Install kubectl \n#  License: Apache-2.0\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/v$KUBECTL_VERSION/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl \\\n && kubectl completion bash > ~/completions/kubectl.completion \\\n && echo \"source ~/completions/kubectl.completion\" >> ~/.bashrc\n#  Install kubectx/kubens\n#  License: Apache-2.0\nRUN curl -L https://github.com/ahmetb/kubectx/archive/v$KUBECTX_VERSION.tar.gz | tar xz \\\n && cd ./kubectx-$KUBECTX_VERSION \\\n && mv kubectx kubens /usr/local/bin/ \\\n && chmod +x /usr/local/bin/kubectx \\\n && chmod +x /usr/local/bin/kubens \\\n && cat completion/kubectx.bash >> ~/completions/kubectx.completion \\\n && cat completion/kubens.bash >> ~/completions/kubens.completion \\\n && echo \"source ~/completions/kubectx.completion\" >> ~/.bashrc \\\n && echo \"source ~/completions/kubens.completion\" >> ~/.bashrc \\\n && cd ../ \\\n && rm -fr ./kubectx-$KUBECTX_VERSION\n#  Install linkerd\n#  License: Apache-2.0\nRUN curl -LO https://github.com/linkerd/linkerd2/releases/download/stable-$LINKERD_VERSION/linkerd2-cli-stable-$LINKERD_VERSION-linux \\\n && mv ./linkerd2-cli-stable-$LINKERD_VERSION-linux /usr/local/bin/linkerd \\\n && chmod +x /usr/local/bin/linkerd\n#  Install istioctl\n#  License: Apache-2.0\nRUN curl -L https://github.com/istio/istio/releases/download/$ISTIO_VERSION/istio-$ISTIO_VERSION-linux.tar.gz | tar xz \\\n && cd ./istio-$ISTIO_VERSION \\\n && mv bin/istioctl /usr/local/bin/ \\\n && chmod +x /usr/local/bin/istioctl \\\n && cd ../ \\\n && rm -fr ./istio-$ISTIO_VERSION \\\n && istioctl collateral --bash -o ~/completions \\\n && mv ~/completions/istioctl.bash ~/completions/istioctl.completion \\\n && echo \"source ~/completions/istioctl.completion\" >> ~/.bashrc\n#  Install helm\n#  License: Apache-2.0\nRUN mkdir helm-$HELM_VERSION \\\n && curl -L https://storage.googleapis.com/kubernetes-helm/helm-v$HELM_VERSION-linux-amd64.tar.gz | tar xz -C helm-$HELM_VERSION --strip-components 1 \\\n && cd ./helm-$HELM_VERSION \\\n && mv helm /usr/local/bin/ \\\n && chmod +x /usr/local/bin/helm \\\n && cd ../ \\\n && rm -fr ./helm-$HELM_VERSION \\\n && helm completion bash > ~/completions/helm.completion \\\n && echo \"source ~/completions/helm.completion\" >> ~/.bashrc\n#  Install kube-ps1\n#  License: Apache-2.0\nCOPY k8s-cli-ps1.sh /root/k8s-prompt/\nRUN curl -L https://github.com/jonmosco/kube-ps1/archive/v$KUBE_PS1_VERSION.tar.gz | tar xz \\\n && cd ./kube-ps1-$KUBE_PS1_VERSION \\\n && mv kube-ps1.sh ~/k8s-prompt/ \\\n && chmod +x ~/k8s-prompt/*.sh \\\n && rm -fr ./kube-ps1-$KUBE_PS1_VERSION \\\n && echo \"source ~/k8s-prompt/kube-ps1.sh\" >> ~/.bashrc \\\n && echo \"source ~/k8s-prompt/k8s-cli-ps1.sh\" >> ~/.bashrc \\\n && echo \"PROMPT_COMMAND=\\\"_kube_ps1_update_cache \\\n && k8s_cli_ps1\\\"\" >> ~/.bashrc\nRUN rm -fr /tmp/install-utils \\\n && echo \"alias k=kubectl\" >> ~/.bashrc \\\n && echo \"complete -o default -F __start_kubectl k\" >> ~/.bashrc\nWORKDIR /workspace\nCMD bash\n","injectedSmells":[],"originalDockerfileHash":"5ced9ba6f1bd9398716139a4b34108b9","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.10\nARG IMAGE_CREATE_DATE\nARG IMAGE_VERSION\nARG IMAGE_SOURCE_REVISION\nARG KUBECTL_VERSION=1.14.3\nARG KUBECTX_VERSION=0.6.3\nARG ISTIO_VERSION=1.1.8\nARG LINKERD_VERSION=2.3.2\nARG HELM_VERSION=2.14.1\nARG KUBE_PS1_VERSION=0.7.0 \n#   Metadata as defined in OCI image spec annotations - https://github.com/opencontainers/image-spec/blob/master/annotations.md\nLABEL org.opencontainers.image.title=\"Kubernetes cli toolset\" \\\n      org.opencontainers.image.description=\"Provides the following Kubernetes cli toolset - kubectl $KUBECTL_VERSION, kubectx/kubens $KUBECTX_VERSION, istioctl $ISTIO_VERSION, linkerd $LINKERD_VERSION, and helm $HELM_VERSION. Leverages kube-ps1 $KUBE_PS1_VERSION to provide the current Kubernetes context and namespace on the bash prompt.\" \\\n      org.opencontainers.image.created=\"$IMAGE_CREATE_DATE\" \\\n      org.opencontainers.image.version=\"$IMAGE_VERSION\" \\\n      org.opencontainers.image.authors=\"Paul Bouwer\" \\\n      org.opencontainers.image.url=\"https://hub.docker.com/r/paulbouwer/k8s-cli-toolset/\" \\\n      org.opencontainers.image.documentation=\"https://github.com/paulbouwer/k8s-cli-toolset\" \\\n      org.opencontainers.image.vendor=\"Paul Bouwer\" \\\n      org.opencontainers.image.licenses=\"MIT\" \\\n      org.opencontainers.image.source=\"https://github.com/paulbouwer/k8s-cli-toolset.git\" \\\n      org.opencontainers.image.revision=\"$IMAGE_SOURCE_REVISION\"\n#   Install dependencies and create dirs\nRUN apt-get update \\\n && apt-get install --no-install-recommends bash-completion ca-certificates curl git jq less vim -y \\\n && echo \". /etc/bash_completion\" >> ~/.bashrc \\\n && rm -rf /var/lib/apt/lists/* \\\n && mkdir -p ~/completions \\\n && mkdir -p ~/k8s-prompt\nWORKDIR /tmp/install-utils\n#   Install kubectl \n#   License: Apache-2.0\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/v$KUBECTL_VERSION/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl \\\n && kubectl completion bash > ~/completions/kubectl.completion \\\n && echo \"source ~/completions/kubectl.completion\" >> ~/.bashrc\n#   Install kubectx/kubens\n#   License: Apache-2.0\nRUN curl -L https://github.com/ahmetb/kubectx/archive/v$KUBECTX_VERSION.tar.gz | tar xz \\\n && cd ./kubectx-$KUBECTX_VERSION \\\n && mv kubectx kubens /usr/local/bin/ \\\n && chmod +x /usr/local/bin/kubectx \\\n && chmod +x /usr/local/bin/kubens \\\n && cat completion/kubectx.bash >> ~/completions/kubectx.completion \\\n && cat completion/kubens.bash >> ~/completions/kubens.completion \\\n && echo \"source ~/completions/kubectx.completion\" >> ~/.bashrc \\\n && echo \"source ~/completions/kubens.completion\" >> ~/.bashrc \\\n && cd ../ \\\n && rm -fr ./kubectx-$KUBECTX_VERSION\n#   Install linkerd\n#   License: Apache-2.0\nRUN curl -LO https://github.com/linkerd/linkerd2/releases/download/stable-$LINKERD_VERSION/linkerd2-cli-stable-$LINKERD_VERSION-linux \\\n && mv ./linkerd2-cli-stable-$LINKERD_VERSION-linux /usr/local/bin/linkerd \\\n && chmod +x /usr/local/bin/linkerd\n#   Install istioctl\n#   License: Apache-2.0\nRUN curl -L https://github.com/istio/istio/releases/download/$ISTIO_VERSION/istio-$ISTIO_VERSION-linux.tar.gz | tar xz \\\n && cd ./istio-$ISTIO_VERSION \\\n && mv bin/istioctl /usr/local/bin/ \\\n && chmod +x /usr/local/bin/istioctl \\\n && cd ../ \\\n && rm -fr ./istio-$ISTIO_VERSION \\\n && istioctl collateral --bash -o ~/completions \\\n && mv ~/completions/istioctl.bash ~/completions/istioctl.completion \\\n && echo \"source ~/completions/istioctl.completion\" >> ~/.bashrc\n#   Install helm\n#   License: Apache-2.0\nRUN mkdir helm-$HELM_VERSION \\\n && curl -L https://storage.googleapis.com/kubernetes-helm/helm-v$HELM_VERSION-linux-amd64.tar.gz | tar xz -C helm-$HELM_VERSION --strip-components 1 \\\n && cd ./helm-$HELM_VERSION \\\n && mv helm /usr/local/bin/ \\\n && chmod +x /usr/local/bin/helm \\\n && cd ../ \\\n && rm -fr ./helm-$HELM_VERSION \\\n && helm completion bash > ~/completions/helm.completion \\\n && echo \"source ~/completions/helm.completion\" >> ~/.bashrc\n#   Install kube-ps1\n#   License: Apache-2.0\nCOPY k8s-cli-ps1.sh /root/k8s-prompt/\nRUN curl -L https://github.com/jonmosco/kube-ps1/archive/v$KUBE_PS1_VERSION.tar.gz | tar xz \\\n && cd ./kube-ps1-$KUBE_PS1_VERSION \\\n && mv kube-ps1.sh ~/k8s-prompt/ \\\n && chmod +x ~/k8s-prompt/*.sh \\\n && rm -fr ./kube-ps1-$KUBE_PS1_VERSION \\\n && echo \"source ~/k8s-prompt/kube-ps1.sh\" >> ~/.bashrc \\\n && echo \"source ~/k8s-prompt/k8s-cli-ps1.sh\" >> ~/.bashrc \\\n && echo \"PROMPT_COMMAND=\\\"_kube_ps1_update_cache \\\n && k8s_cli_ps1\\\"\" >> ~/.bashrc\nRUN rm -fr /tmp/install-utils \\\n && echo \"alias k=kubectl\" >> ~/.bashrc \\\n && echo \"complete -o default -F __start_kubectl k\" >> ~/.bashrc\nWORKDIR /workspace\nCMD bash\n","originalDockerfileUglifiedHash":"17b0a2f00ffdfc7ffb28844315a69634","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/dfd77919024444fcf8748eca693b222e1ba896af.dockerfile"}