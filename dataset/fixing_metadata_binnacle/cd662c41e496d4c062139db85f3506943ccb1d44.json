{"seed":2686230162,"processedDockerfileHash":"60c963ec5b21b9aaeeaf9ab6afc4a84b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM underworldcode/underworld2_untested:v2.5\nMAINTAINER romain.beucher@unimelb.edu\nUSER root\n#   required dependency for pyBadlands and friends\nRUN : \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends apt-utils libavcodec-dev libavformat-dev libavutil-dev libswscale-dev openmpi-bin libhdf5-dev liblapack-dev llvm libedit-dev gfortran libnetcdf-dev libgeos-dev libgeos++-dev wget \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pillow==9.5.0 enum34==1.1.10 pyvirtualdisplay==3.0 scipy==1.10.1 Cython==0.20 markupsafe==2.1.2 zmq==0.0.0 singledispatch==4.0.0 backports_abc==0.5 certifi==2022.12.7 jsonschema==4.17.3 path.py==12.5.0 git+https://github.com/badlands-model/triangle pandas==2.0.0 plotly==5.14.1 numba==0.23.1 ez_setup==0.9 netcdf4==1.6.3 colorlover==0.3.0 cmocean==3.0.3 scikit-fuzzy==0.4.2 pyevtk==1.5.0 git+https://github.com/awickert/gFlex.git shapely==2.0.1 descartes==1.1.0 jupyter_contrib_nbextensions==0.7.0 tqdm==4.65.0 \\\n && jupyter contrib nbextension install --system \\\n && wget http://downloads.sourceforge.net/project/matplotlib/matplotlib-toolkits/basemap-1.0.7/basemap-1.0.7.tar.gz \\\n && tar -zxvf basemap-1.0.7.tar.gz \\\n && cd basemap-1.0.7 \\\n && python setup.py build \\\n && python setup.py install \\\n && cd .. \\\n && rm -rf basemap-1.0.7.tar.gz \\\n && rm -rf basemap-1.0.7\n#   switch user\nENV NB_USER=\"jovyan\"\nUSER $NB_USER\nWORKDIR /opt\nENV BLAND_DIR=\"/opt/pyBadlands\"\nENV BCOMP_DIR=\"/opt/pyBadlands-Companion\"\nENV BWORK_DIR=\"/opt/pyBadlands-workshop\"\nRUN git clone --depth 1 https://github.com/rbeucher/UWGeodynamics.git\nUSER root\nRUN pip install -e /opt/UWGeodynamics\nUSER $NB_USER\nRUN mkdir /workspace/UWGeodynamics \\\n && rsync -av /opt/UWGeodynamics/examples/* /workspace/UWGeodynamics/examples/ \\\n && rsync -av /opt/UWGeodynamics/tutorials/* /workspace/UWGeodynamics/tutorials/ \\\n && rsync -av /opt/UWGeodynamics/manual/* /workspace/UWGeodynamics/manual/\n#   download pyBadland, companion and workshop\nWORKDIR /opt\nRUN git clone --depth 1 https://github.com/badlands-model/pyBadlands_serial.git $BLAND_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-Companion.git $BCOMP_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-workshop.git $BWORK_DIR\n#   compile pyBadlands and companion\nWORKDIR $BLAND_DIR/pyBadlands/libUtils\nUSER root\nRUN make \\\n && pip install -e $BLAND_DIR \\\n && cd /opt\nRUN pip install -e $BCOMP_DIR \\\n && jupyter nbextension enable hide_input/main --system \\\n && jupyter nbextension enable init_cell/main --system\nUSER $NB_USER\nRUN mkdir /workspace/volume \\\n && mkdir /workspace/companion \\\n && mkdir /workspace/workshop \\\n && mkdir /workspace/LavaVu\n#   Copy test files to workspace. Is this required??? takes 500Mb\nRUN cp -av $BWORK_DIR/* /workspace/workshop/ \\\n && cp -av $BLAND_DIR/Examples/* /workspace/examples/ \\\n && cp -av $BCOMP_DIR/notebooks/* /workspace/companion/\n#   NOT SURE ABOUT /workspace/volume???\nENV LD_LIBRARY_PATH=\"/workspace/volume/pyBadlands_serial/pyBadlands/libUtils:/$BLAND_DIR/pyBadlands/libUtils\"\n#   change user and update pythonpath\nENV PYTHONPATH=\"$PYTHONPATH:$UW2_DIR\"\n#   move back to workspace directory\nWORKDIR /workspace\n#   Trust underworld notebooks\nRUN find -name *.ipynb -print0 | xargs -0 jupyter trust\n#   launch notebook\nCMD [\"jupyter\", \"notebook\", \"--ip='*'\", \"--no-browser\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM underworldcode/underworld2_untested:v2.5\nMAINTAINER romain.beucher@unimelb.edu\nUSER root\n#  required dependency for pyBadlands and friends\nRUN apt-get update -qq \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends apt-utils libavcodec-dev libavformat-dev libavutil-dev libswscale-dev openmpi-bin libhdf5-dev liblapack-dev llvm libedit-dev gfortran libnetcdf-dev libgeos-dev libgeos++-dev wget \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pillow enum34 pyvirtualdisplay scipy Cython==0.20 markupsafe zmq singledispatch backports_abc certifi jsonschema path.py git+https://github.com/badlands-model/triangle pandas plotly numba==0.23.1 ez_setup netcdf4 colorlover cmocean scikit-fuzzy pyevtk git+https://github.com/awickert/gFlex.git shapely descartes jupyter_contrib_nbextensions tqdm \\\n && jupyter contrib nbextension install --system \\\n && wget http://downloads.sourceforge.net/project/matplotlib/matplotlib-toolkits/basemap-1.0.7/basemap-1.0.7.tar.gz \\\n && tar -zxvf basemap-1.0.7.tar.gz \\\n && cd basemap-1.0.7 \\\n && python setup.py build \\\n && python setup.py install \\\n && cd .. \\\n && rm -rf basemap-1.0.7.tar.gz \\\n && rm -rf basemap-1.0.7\n#  switch user\nENV NB_USER=\"jovyan\"\nUSER $NB_USER\nWORKDIR /opt\nENV BLAND_DIR=\"/opt/pyBadlands\"\nENV BCOMP_DIR=\"/opt/pyBadlands-Companion\"\nENV BWORK_DIR=\"/opt/pyBadlands-workshop\"\nRUN git clone --depth 1 https://github.com/rbeucher/UWGeodynamics.git\nUSER root\nRUN pip install -e /opt/UWGeodynamics\nUSER $NB_USER\nRUN mkdir /workspace/UWGeodynamics \\\n && rsync -av /opt/UWGeodynamics/examples/* /workspace/UWGeodynamics/examples/ \\\n && rsync -av /opt/UWGeodynamics/tutorials/* /workspace/UWGeodynamics/tutorials/ \\\n && rsync -av /opt/UWGeodynamics/manual/* /workspace/UWGeodynamics/manual/\n#  download pyBadland, companion and workshop\nWORKDIR /opt\nRUN git clone --depth 1 https://github.com/badlands-model/pyBadlands_serial.git $BLAND_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-Companion.git $BCOMP_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-workshop.git $BWORK_DIR\n#  compile pyBadlands and companion\nWORKDIR $BLAND_DIR/pyBadlands/libUtils\nUSER root\nRUN make \\\n && pip install -e $BLAND_DIR \\\n && cd /opt\nRUN pip install -e $BCOMP_DIR \\\n && jupyter nbextension enable hide_input/main --system \\\n && jupyter nbextension enable init_cell/main --system\nUSER $NB_USER\nRUN mkdir /workspace/volume \\\n && mkdir /workspace/companion \\\n && mkdir /workspace/workshop \\\n && mkdir /workspace/LavaVu\n#  Copy test files to workspace. Is this required??? takes 500Mb\nRUN cp -av $BWORK_DIR/* /workspace/workshop/ \\\n && cp -av $BLAND_DIR/Examples/* /workspace/examples/ \\\n && cp -av $BCOMP_DIR/notebooks/* /workspace/companion/\n#  NOT SURE ABOUT /workspace/volume???\nENV LD_LIBRARY_PATH=\"/workspace/volume/pyBadlands_serial/pyBadlands/libUtils:/$BLAND_DIR/pyBadlands/libUtils\"\n#  change user and update pythonpath\nENV PYTHONPATH=\"$PYTHONPATH:$UW2_DIR\"\n#  move back to workspace directory\nWORKDIR /workspace\n#  Trust underworld notebooks\nRUN find -name *.ipynb -print0 | xargs -0 jupyter trust\n#  launch notebook\nCMD [\"jupyter\", \"notebook\", \"--ip='*'\", \"--no-browser\"]\n","injectedSmells":[],"originalDockerfileHash":"1216bad79e0af4f63219c6f8a01c9e92","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM underworldcode/underworld2_untested:v2.5\nMAINTAINER romain.beucher@unimelb.edu\nUSER root\n#   required dependency for pyBadlands and friends\nRUN apt-get update -qq \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends apt-utils libavcodec-dev libavformat-dev libavutil-dev libswscale-dev openmpi-bin libhdf5-dev liblapack-dev llvm libedit-dev gfortran libnetcdf-dev libgeos-dev libgeos++-dev wget \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && pip install pillow enum34 pyvirtualdisplay scipy Cython==0.20 markupsafe zmq singledispatch backports_abc certifi jsonschema path.py git+https://github.com/badlands-model/triangle pandas plotly numba==0.23.1 ez_setup netcdf4 colorlover cmocean scikit-fuzzy pyevtk git+https://github.com/awickert/gFlex.git shapely descartes jupyter_contrib_nbextensions tqdm \\\n && jupyter contrib nbextension install --system \\\n && wget http://downloads.sourceforge.net/project/matplotlib/matplotlib-toolkits/basemap-1.0.7/basemap-1.0.7.tar.gz \\\n && tar -zxvf basemap-1.0.7.tar.gz \\\n && cd basemap-1.0.7 \\\n && python setup.py build \\\n && python setup.py install \\\n && cd .. \\\n && rm -rf basemap-1.0.7.tar.gz \\\n && rm -rf basemap-1.0.7\n#   switch user\nENV NB_USER=\"jovyan\"\nUSER $NB_USER\nWORKDIR /opt\nENV BLAND_DIR=\"/opt/pyBadlands\"\nENV BCOMP_DIR=\"/opt/pyBadlands-Companion\"\nENV BWORK_DIR=\"/opt/pyBadlands-workshop\"\nRUN git clone --depth 1 https://github.com/rbeucher/UWGeodynamics.git\nUSER root\nRUN pip install -e /opt/UWGeodynamics\nUSER $NB_USER\nRUN mkdir /workspace/UWGeodynamics \\\n && rsync -av /opt/UWGeodynamics/examples/* /workspace/UWGeodynamics/examples/ \\\n && rsync -av /opt/UWGeodynamics/tutorials/* /workspace/UWGeodynamics/tutorials/ \\\n && rsync -av /opt/UWGeodynamics/manual/* /workspace/UWGeodynamics/manual/\n#   download pyBadland, companion and workshop\nWORKDIR /opt\nRUN git clone --depth 1 https://github.com/badlands-model/pyBadlands_serial.git $BLAND_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-Companion.git $BCOMP_DIR \\\n && git clone --depth 1 https://github.com/badlands-model/pyBadlands-workshop.git $BWORK_DIR\n#   compile pyBadlands and companion\nWORKDIR $BLAND_DIR/pyBadlands/libUtils\nUSER root\nRUN make \\\n && pip install -e $BLAND_DIR \\\n && cd /opt\nRUN pip install -e $BCOMP_DIR \\\n && jupyter nbextension enable hide_input/main --system \\\n && jupyter nbextension enable init_cell/main --system\nUSER $NB_USER\nRUN mkdir /workspace/volume \\\n && mkdir /workspace/companion \\\n && mkdir /workspace/workshop \\\n && mkdir /workspace/LavaVu\n#   Copy test files to workspace. Is this required??? takes 500Mb\nRUN cp -av $BWORK_DIR/* /workspace/workshop/ \\\n && cp -av $BLAND_DIR/Examples/* /workspace/examples/ \\\n && cp -av $BCOMP_DIR/notebooks/* /workspace/companion/\n#   NOT SURE ABOUT /workspace/volume???\nENV LD_LIBRARY_PATH=\"/workspace/volume/pyBadlands_serial/pyBadlands/libUtils:/$BLAND_DIR/pyBadlands/libUtils\"\n#   change user and update pythonpath\nENV PYTHONPATH=\"$PYTHONPATH:$UW2_DIR\"\n#   move back to workspace directory\nWORKDIR /workspace\n#   Trust underworld notebooks\nRUN find -name *.ipynb -print0 | xargs -0 jupyter trust\n#   launch notebook\nCMD [\"jupyter\", \"notebook\", \"--ip='*'\", \"--no-browser\"]\n","originalDockerfileUglifiedHash":"911bca19ddc8d036839aabbe264d9ff7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cd662c41e496d4c062139db85f3506943ccb1d44.dockerfile"}