{"seed":391372720,"processedDockerfileHash":"4cc9d9c1e4ba4d85da12ec89401c6319","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"#   Copyright (C) Vaclav Petras.\n#   Distributed under the terms of the BSD 2-Clause License.\nFROM jupyter/scipy-notebook:df7a34bebed0\nMAINTAINER Vaclav Petras <wenzeslaus@gmail.com>\nUSER root\n#   Replace shell with bash so we can source files\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf2.13 autotools-dev bison flex g++ gettext libblas-dev libbz2-dev libcairo2-dev libfftw3-dev libfreetype6-dev libgdal-dev libgeos-dev libglu1-mesa-dev libjpeg-dev liblapack-dev liblas-c-dev libncurses5-dev libnetcdf-dev libpng-dev libpq-dev libproj-dev libreadline-dev libsqlite3-dev libtiff-dev libxmu-dev make netcdf-bin proj-bin python python-dev python-numpy python-pil python-ply sqlite3 unixodbc-dev zlib1g-dev -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#   other software\nRUN apt-get update \\\n && apt-get install --no-install-recommends imagemagick p7zip subversion -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#   GRASS GIS needs to be build with Python 2\nRUN ln -s /usr/bin/python2 /bin/python\n#   install GRASS GIS\nWORKDIR /usr/local/src\nRUN source activate python2 \\\n && svn checkout https://svn.osgeo.org/grass/grass/trunk grass \\\n && cd grass \\\n && ./configure --enable-largefile=yes --with-nls --with-cxx --with-readline --with-bzlib --with-pthread --with-proj-share=/usr/share/proj --with-geos=/usr/bin/geos-config --with-cairo --with-opengl-libs=/usr/include/GL --with-freetype=yes --with-freetype-includes=\"/usr/include/freetype2/\" --with-sqlite=yes \\\n && make ; make install ; ldconfig\n#   make gives errors which are not that important now, so we ignore them\nWORKDIR /usr/local\n#   separately for now\nRUN rm -r /usr/local/src\n#   enable simple grass command regardless of version number\nRUN ln -s /usr/local/bin/grass* /usr/local/bin/grass\n#   TODO: move up\n#   other software\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\nUSER $NB_USER\nWORKDIR /home/$NB_USER\nRUN mkdir -p /home/$NB_USER/grassdata \\\n && curl -SL https://grass.osgeo.org/sampledata/north_carolina/nc_spm_08_grass7.tar.gz > nc_spm_08_grass7.tar.gz \\\n && tar -xvf nc_spm_08_grass7.tar.gz \\\n && mv nc_spm_08_grass7 /home/$NB_USER/grassdata \\\n && rm nc_spm_08_grass7.tar.gz\nWORKDIR /home/$NB_USER/work\nCOPY notebooks/* ./\n#   there is some problem or bug with permissions\nUSER root\nRUN chown -R $NB_USER:users .\nUSER $NB_USER\n#   needed again, or enough for the root?\nRUN source activate python2\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (C) Vaclav Petras.\n#  Distributed under the terms of the BSD 2-Clause License.\nFROM jupyter/scipy-notebook:df7a34bebed0\nMAINTAINER Vaclav Petras <wenzeslaus@gmail.com>\nUSER root\n#  Replace shell with bash so we can source files\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install autoconf2.13 autotools-dev bison flex g++ gettext libblas-dev libbz2-dev libcairo2-dev libfftw3-dev libfreetype6-dev libgdal-dev libgeos-dev libglu1-mesa-dev libjpeg-dev liblapack-dev liblas-c-dev libncurses5-dev libnetcdf-dev libpng-dev libpq-dev libproj-dev libreadline-dev libsqlite3-dev libtiff-dev libxmu-dev make netcdf-bin proj-bin python python-dev python-numpy python-pil python-ply sqlite3 unixodbc-dev zlib1g-dev -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#  other software\nRUN apt-get update \\\n && apt-get install imagemagick p7zip subversion -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#  GRASS GIS needs to be build with Python 2\nRUN ln -s /usr/bin/python2 /bin/python\n#  install GRASS GIS\nWORKDIR /usr/local/src\nRUN source activate python2 \\\n && svn checkout https://svn.osgeo.org/grass/grass/trunk grass \\\n && cd grass \\\n && ./configure --enable-largefile=yes --with-nls --with-cxx --with-readline --with-bzlib --with-pthread --with-proj-share=/usr/share/proj --with-geos=/usr/bin/geos-config --with-cairo --with-opengl-libs=/usr/include/GL --with-freetype=yes --with-freetype-includes=\"/usr/include/freetype2/\" --with-sqlite=yes \\\n && make ; make install ; ldconfig\n#  make gives errors which are not that important now, so we ignore them\nWORKDIR /usr/local\n#  separately for now\nRUN rm -r /usr/local/src\n#  enable simple grass command regardless of version number\nRUN ln -s /usr/local/bin/grass* /usr/local/bin/grass\n#  TODO: move up\n#  other software\nRUN apt-get update \\\n && apt-get install curl -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\nUSER $NB_USER\nWORKDIR /home/$NB_USER\nRUN mkdir -p /home/$NB_USER/grassdata \\\n && curl -SL https://grass.osgeo.org/sampledata/north_carolina/nc_spm_08_grass7.tar.gz > nc_spm_08_grass7.tar.gz \\\n && tar -xvf nc_spm_08_grass7.tar.gz \\\n && mv nc_spm_08_grass7 /home/$NB_USER/grassdata \\\n && rm nc_spm_08_grass7.tar.gz\nWORKDIR /home/$NB_USER/work\nCOPY notebooks/* ./\n#  there is some problem or bug with permissions\nUSER root\nRUN chown -R $NB_USER:users .\nUSER $NB_USER\n#  needed again, or enough for the root?\nRUN source activate python2\n","injectedSmells":[],"originalDockerfileHash":"c1a015cd1f7e31e0f4f1efbb1753dfb0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (C) Vaclav Petras.\n#   Distributed under the terms of the BSD 2-Clause License.\nFROM jupyter/scipy-notebook:df7a34bebed0\nMAINTAINER Vaclav Petras <wenzeslaus@gmail.com>\nUSER root\n#   Replace shell with bash so we can source files\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install autoconf2.13 autotools-dev bison flex g++ gettext libblas-dev libbz2-dev libcairo2-dev libfftw3-dev libfreetype6-dev libgdal-dev libgeos-dev libglu1-mesa-dev libjpeg-dev liblapack-dev liblas-c-dev libncurses5-dev libnetcdf-dev libpng-dev libpq-dev libproj-dev libreadline-dev libsqlite3-dev libtiff-dev libxmu-dev make netcdf-bin proj-bin python python-dev python-numpy python-pil python-ply sqlite3 unixodbc-dev zlib1g-dev -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#   other software\nRUN apt-get update \\\n && apt-get install imagemagick p7zip subversion -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\n#   GRASS GIS needs to be build with Python 2\nRUN ln -s /usr/bin/python2 /bin/python\n#   install GRASS GIS\nWORKDIR /usr/local/src\nRUN source activate python2 \\\n && svn checkout https://svn.osgeo.org/grass/grass/trunk grass \\\n && cd grass \\\n && ./configure --enable-largefile=yes --with-nls --with-cxx --with-readline --with-bzlib --with-pthread --with-proj-share=/usr/share/proj --with-geos=/usr/bin/geos-config --with-cairo --with-opengl-libs=/usr/include/GL --with-freetype=yes --with-freetype-includes=\"/usr/include/freetype2/\" --with-sqlite=yes \\\n && make ; make install ; ldconfig\n#   make gives errors which are not that important now, so we ignore them\nWORKDIR /usr/local\n#   separately for now\nRUN rm -r /usr/local/src\n#   enable simple grass command regardless of version number\nRUN ln -s /usr/local/bin/grass* /usr/local/bin/grass\n#   TODO: move up\n#   other software\nRUN apt-get update \\\n && apt-get install curl -y --install-recommends \\\n && apt-get autoremove \\\n && apt-get clean\nUSER $NB_USER\nWORKDIR /home/$NB_USER\nRUN mkdir -p /home/$NB_USER/grassdata \\\n && curl -SL https://grass.osgeo.org/sampledata/north_carolina/nc_spm_08_grass7.tar.gz > nc_spm_08_grass7.tar.gz \\\n && tar -xvf nc_spm_08_grass7.tar.gz \\\n && mv nc_spm_08_grass7 /home/$NB_USER/grassdata \\\n && rm nc_spm_08_grass7.tar.gz\nWORKDIR /home/$NB_USER/work\nCOPY notebooks/* ./\n#   there is some problem or bug with permissions\nUSER root\nRUN chown -R $NB_USER:users .\nUSER $NB_USER\n#   needed again, or enough for the root?\nRUN source activate python2\n","originalDockerfileUglifiedHash":"8f7c9bda9fc8ccea46dc99d69d2879fc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/98e449e7990d9052bd728be91f08489c2281514c.dockerfile"}