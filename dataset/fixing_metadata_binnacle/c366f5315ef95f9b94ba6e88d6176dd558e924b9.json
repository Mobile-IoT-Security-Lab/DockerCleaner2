{"seed":1437023325,"processedDockerfileHash":"717da663dfdc1da75db75830925ec139","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ##########################################################  \n#   Dockerfile to build container lgtseek core image  \n#   Based on Ubuntu  \n#  ###########################################################  \nFROM adkinsrs/workflow:3.2.0\nMAINTAINER Shaun Adkins <sadkins@som.umaryland.edu>  \nEXPOSE 80/tcp\n#  --------------------------------------------------------------------------------  \n#   BASICS  \n#   1) Install general things  \n#   2) Install Perl things  \n#   3) Install Debian things  \n#   4) Make various directories.  \n#  ## /opt/packages is where software installs will be placed or symlinked to  \n#  ## /var/www/html is where the Ergatis site and pipeline building UI will be  \nCOPY deb/lib*.deb /tmp/\nRUN apt-get update -q \\\n && apt-get install --no-install-recommends apache2 autoconf build-essential cpanminus dh-make-perl git libapache2-mod-php5 perl php5 vim wget zip zlib1g-dev libcpan-meta-perl libcdb-file-perl libcgi-session-perl libconfig-inifiles-perl libdate-manip-perl libfile-spec-perl libhtml-template-perl libio-tee-perl libjson-perl liblog-log4perl-perl libmath-combinatorics-perl libperlio-gzip-perl libxml-parser-perl libxml-rss-perl libxml-twig-perl libxml-writer-perl libxml-libxml-perl -q -y \\\n && apt-get -q clean autoclean \\\n && apt-get -q autoremove -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && cpanm --force Term::ProgressBar \\\n && dpkg -i /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && rm /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && chmod 777 /opt \\\n && mkdir /opt/packages \\\n && chmod 777 /opt/packages \\\n && mkdir -p /var/www/html \\\n && chmod 777 /var/www/html\n#  --------------------------------------------------------------------------------  \n#   APACHE SETUP  \nCOPY 000-default.conf /etc/apache2/sites-enabled/.\nCOPY ergatis.conf /etc/apache2/conf-enabled/.\nRUN a2enmod cgid\nRUN a2enmod php5\n#  --------------------------------------------------------------------------------  \n#   SCRATCH  \nRUN mkdir -m 0777 -p /usr/local/scratch \\\n && mkdir -m 0777 /usr/local/scratch/ergatis \\\n && mkdir -m 0777 /usr/local/scratch/ergatis/archival \\\n && mkdir -m 0777 /usr/local/scratch/workflow \\\n && mkdir -m 0777 /usr/local/scratch/workflow/id_repository \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime/pipeline \\\n && mkdir -m 0777 /usr/local/scratch/workflow/scripts \\\n && mkdir -m 0777 /tmp/pipelines_building\n#  --------------------------------------------------------------------------------  \n#   ERGATIS SETUP  \n#   Set up lib directory  \nRUN mkdir -p /opt/ergatis/lib/\nCOPY lib/ /opt/ergatis/lib/\nENV PERL5LIB=\"/opt/ergatis/lib/perl5\"\n#   Set up site  \nRUN mkdir /var/www/html/ergatis\nCOPY htdocs/ /var/www/html/ergatis/\nCOPY ergatis.ini /var/www/html/ergatis/cgi/\n#   Change the level of debugging  \nCOPY log4j.properties /opt/workflow/\n#   Set up area to store scripts  \nRUN mkdir -p /opt/scripts\nCOPY create_wrappers.sh /opt/scripts\nCOPY perl2wrapper_ergatis.pl /opt/scripts\nCOPY python2wrapper_ergatis.pl /opt/scripts\nCOPY julia2wrapper_ergatis.pl /opt/scripts\n#   Lastly, set working directory to root directory  \nWORKDIR /  \n#   ... and start apache  \nCMD [\"/usr/sbin/apachectl\", \"-D\", \"FOREGROUND\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ##########################################################  \n#  Dockerfile to build container lgtseek core image  \n#  Based on Ubuntu  \n# ###########################################################  \nFROM adkinsrs/workflow:3.2.0\nMAINTAINER Shaun Adkins <sadkins@som.umaryland.edu>  \nEXPOSE 80/tcp\n# --------------------------------------------------------------------------------  \n#  BASICS  \n#  1) Install general things  \n#  2) Install Perl things  \n#  3) Install Debian things  \n#  4) Make various directories.  \n# ## /opt/packages is where software installs will be placed or symlinked to  \n# ## /var/www/html is where the Ergatis site and pipeline building UI will be  \nCOPY deb/lib*.deb /tmp/\nRUN apt-get update -q \\\n && apt-get install --no-install-recommends apache2 autoconf build-essential cpanminus dh-make-perl git libapache2-mod-php5 perl php5 vim wget zip zlib1g-dev libcpan-meta-perl libcdb-file-perl libcgi-session-perl libconfig-inifiles-perl libdate-manip-perl libfile-spec-perl libhtml-template-perl libio-tee-perl libjson-perl liblog-log4perl-perl libmath-combinatorics-perl libperlio-gzip-perl libxml-parser-perl libxml-rss-perl libxml-twig-perl libxml-writer-perl libxml-libxml-perl -q -y \\\n && apt-get -q clean autoclean \\\n && apt-get -q autoremove -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && cpanm --force Term::ProgressBar \\\n && dpkg -i /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && rm /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && chmod 777 /opt \\\n && mkdir /opt/packages \\\n && chmod 777 /opt/packages \\\n && mkdir -p /var/www/html \\\n && chmod 777 /var/www/html\n# --------------------------------------------------------------------------------  \n#  APACHE SETUP  \nCOPY 000-default.conf /etc/apache2/sites-enabled/.\nCOPY ergatis.conf /etc/apache2/conf-enabled/.\nRUN a2enmod cgid\nRUN a2enmod php5\n# --------------------------------------------------------------------------------  \n#  SCRATCH  \nRUN mkdir -m 0777 -p /usr/local/scratch \\\n && mkdir -m 0777 /usr/local/scratch/ergatis \\\n && mkdir -m 0777 /usr/local/scratch/ergatis/archival \\\n && mkdir -m 0777 /usr/local/scratch/workflow \\\n && mkdir -m 0777 /usr/local/scratch/workflow/id_repository \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime/pipeline \\\n && mkdir -m 0777 /usr/local/scratch/workflow/scripts \\\n && mkdir -m 0777 /tmp/pipelines_building\n# --------------------------------------------------------------------------------  \n#  ERGATIS SETUP  \n#  Set up lib directory  \nRUN mkdir -p /opt/ergatis/lib/\nCOPY lib/ /opt/ergatis/lib/\nENV PERL5LIB=\"/opt/ergatis/lib/perl5\"\n#  Set up site  \nRUN mkdir /var/www/html/ergatis\nCOPY htdocs/ /var/www/html/ergatis/\nCOPY ergatis.ini /var/www/html/ergatis/cgi/\n#  Change the level of debugging  \nCOPY log4j.properties /opt/workflow/\n#  Set up area to store scripts  \nRUN mkdir -p /opt/scripts\nCOPY create_wrappers.sh /opt/scripts\nCOPY perl2wrapper_ergatis.pl /opt/scripts\nCOPY python2wrapper_ergatis.pl /opt/scripts\nCOPY julia2wrapper_ergatis.pl /opt/scripts\n#  Lastly, set working directory to root directory  \nWORKDIR /  \n#  ... and start apache  \nCMD [\"/usr/sbin/apachectl\", \"-D\", \"FOREGROUND\"]\n","injectedSmells":[],"originalDockerfileHash":"ac87d4bac10c0fe7cbaf809355a73c5d","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ##########################################################  \n#   Dockerfile to build container lgtseek core image  \n#   Based on Ubuntu  \n#  ###########################################################  \nFROM adkinsrs/workflow:3.2.0\nMAINTAINER Shaun Adkins <sadkins@som.umaryland.edu>  \nEXPOSE 80/tcp\n#  --------------------------------------------------------------------------------  \n#   BASICS  \n#   1) Install general things  \n#   2) Install Perl things  \n#   3) Install Debian things  \n#   4) Make various directories.  \n#  ## /opt/packages is where software installs will be placed or symlinked to  \n#  ## /var/www/html is where the Ergatis site and pipeline building UI will be  \nCOPY deb/lib*.deb /tmp/\nRUN apt-get update -q \\\n && apt-get install --no-install-recommends apache2 autoconf build-essential cpanminus dh-make-perl git libapache2-mod-php5 perl php5 vim wget zip zlib1g-dev libcpan-meta-perl libcdb-file-perl libcgi-session-perl libconfig-inifiles-perl libdate-manip-perl libfile-spec-perl libhtml-template-perl libio-tee-perl libjson-perl liblog-log4perl-perl libmath-combinatorics-perl libperlio-gzip-perl libxml-parser-perl libxml-rss-perl libxml-twig-perl libxml-writer-perl libxml-libxml-perl -q -y \\\n && apt-get -q clean autoclean \\\n && apt-get -q autoremove -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && cpanm --force Term::ProgressBar \\\n && dpkg -i /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && rm /tmp/libfile-mirror-perl_0.10-1_all.deb /tmp/liblog-cabin-perl_0.06-1_all.deb \\\n && chmod 777 /opt \\\n && mkdir /opt/packages \\\n && chmod 777 /opt/packages \\\n && mkdir -p /var/www/html \\\n && chmod 777 /var/www/html\n#  --------------------------------------------------------------------------------  \n#   APACHE SETUP  \nCOPY 000-default.conf /etc/apache2/sites-enabled/.\nCOPY ergatis.conf /etc/apache2/conf-enabled/.\nRUN a2enmod cgid\nRUN a2enmod php5\n#  --------------------------------------------------------------------------------  \n#   SCRATCH  \nRUN mkdir -m 0777 -p /usr/local/scratch \\\n && mkdir -m 0777 /usr/local/scratch/ergatis \\\n && mkdir -m 0777 /usr/local/scratch/ergatis/archival \\\n && mkdir -m 0777 /usr/local/scratch/workflow \\\n && mkdir -m 0777 /usr/local/scratch/workflow/id_repository \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime \\\n && mkdir -m 0777 /usr/local/scratch/workflow/runtime/pipeline \\\n && mkdir -m 0777 /usr/local/scratch/workflow/scripts \\\n && mkdir -m 0777 /tmp/pipelines_building\n#  --------------------------------------------------------------------------------  \n#   ERGATIS SETUP  \n#   Set up lib directory  \nRUN mkdir -p /opt/ergatis/lib/\nCOPY lib/ /opt/ergatis/lib/\nENV PERL5LIB=\"/opt/ergatis/lib/perl5\"\n#   Set up site  \nRUN mkdir /var/www/html/ergatis\nCOPY htdocs/ /var/www/html/ergatis/\nCOPY ergatis.ini /var/www/html/ergatis/cgi/\n#   Change the level of debugging  \nCOPY log4j.properties /opt/workflow/\n#   Set up area to store scripts  \nRUN mkdir -p /opt/scripts\nCOPY create_wrappers.sh /opt/scripts\nCOPY perl2wrapper_ergatis.pl /opt/scripts\nCOPY python2wrapper_ergatis.pl /opt/scripts\nCOPY julia2wrapper_ergatis.pl /opt/scripts\n#   Lastly, set working directory to root directory  \nWORKDIR /  \n#   ... and start apache  \nCMD [\"/usr/sbin/apachectl\", \"-D\", \"FOREGROUND\"]\n","originalDockerfileUglifiedHash":"06f7b0b216f5f14c96e07febf221acff","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c366f5315ef95f9b94ba6e88d6176dd558e924b9.dockerfile"}