{"seed":2788216913,"processedDockerfileHash":"64b7ae132804f82b6fe9ca7720b2812e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","pin-package-manager-versions-npm","do-not-have-secrets","have-a-healthcheck"],"processedDockerfile":"FROM adhoc/odoo-ubuntu:8.0\nMAINTAINER Juan Jose Scarafia <jjs@adhoc.com.ar>\nUSER root\n#   Generate locale (es_AR for right odoo es_AR language config, and C.UTF-8 for postgres and general locale data)\n#   TODO better C.UTF-8 or en_US.UTF-8?\nRUN locale-gen en_US.UTF-8 \\\n && update-locale\nRUN locale-gen es_AR.UTF-8 \\\n && update-locale\nRUN echo 'LANG=\"en_US.UTF-8\"' > /etc/default/locale\nENV LANG=\"es_AR.UTF-8  \"\nENV LANGUAGE=\"es_AR:es:en_US:en  \"\nENV LC_ALL=\"es_AR.UTF-8\"\n#   Install some deps (if we install with no-recommends later we have some errors with pip)\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-pip git -y\n#   sudo and other useful tools\nRUN apt-get install --no-install-recommends sudo nano htop ssh wget unzip -y\n#   update pip and install setuptools (required for intalling pip requirements)\nRUN pip install pip==23.1 --upgrade\nRUN pip install setuptools==67.6.1 --upgrade\n#   Workers and longpolling dependencies\nRUN apt-get install --no-install-recommends python-gevent -y\nRUN pip install psycogreen==1.0.2\n#  # Install pip dependencies for adhoc used odoo repositories\nRUN pip install openupgradelib==3.4.1\n#   used by many pip packages\nRUN apt-get install --no-install-recommends python-dev build-essential -y\n#   odoo-extra\nRUN apt-get install --no-install-recommends python-matplotlib font-manager -y\nRUN pip install simplejson==3.19.1\n#   odoo argentina (nuevo modulo de FE)\nRUN apt-get install --no-install-recommends swig libffi-dev libssl-dev python-m2crypto python-httplib2 -y\n#   este deberiamos borrarlo porque tarda, es para pyOpenSSL que no deberia ser necesario si usamos pyafipws\n#   aeroo direct print\nRUN apt-get install --no-install-recommends libcups2-dev -y\n#   fix for this issue https://github.com/odoo/odoo/issues/9113 (issue raised when installing website_animate)\nRUN apt-get install --no-install-recommends npm -y\nRUN npm install less@4.1.3 less-plugin-clean-css@1.5.1 -g\nRUN apt-get install --no-install-recommends nodejs-legacy -y\nRUN rm /usr/bin/lessc ; ln -s /usr/local/bin/lessc /usr/bin/lessc\nRUN apt-mark hold node-less\n#  # Clean apt-get (copied from odoo)\nRUN apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false\nRUN apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Make auto_install = False for various modules\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_chat/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_odoo_support/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/bus/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/base_import/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/portal/__openerp__.py\n#   create directory for odoo files\nRUN mkdir -p /opt/odoo\nRUN chown -R odoo /opt/odoo\n#   changing user is required by odoo which won't start with root\nUSER odoo\nENV ETC_DIR=\"/opt/odoo/etc\"\nENV DATA_DIR=\"/opt/odoo/data\"\nENV CUSTOM_ADDONS=\"/opt/odoo/custom-addons\"\nENV EXTRA_ADDONS=\"/opt/odoo/extra-addons\"\nRUN mkdir -p ${ETC_DIR}\nRUN mkdir -p ${DATA_DIR}\nRUN mkdir -p ${CUSTOM_ADDONS}\nRUN mkdir -p ${EXTRA_ADDONS}\nUSER root\n#   Mount persistent directories\nVOLUME [\"${DATA_DIR}\", \"${CUSTOM_ADDONS}\"]\n#   no tendriamos porque montar \"/opt/odoo/etc\" ya que la idea es que se reconstruya el conf dinamicamente\n#   rplace  entrypoint script and replace Odoo configuration file (new name)\nENV RESOURCES=\"/opt/odoo/resources/\"\nCOPY ./resources/ ${RESOURCES}\nRUN chown -R odoo ${RESOURCES}\n#   change entrypoint\nENTRYPOINT [\"/opt/odoo/resources/entrypoint.sh\"]\nCMD [\"odoo.py\"]\n#   Variables used by the launch scripts\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nENV ODOO_SERVER=\"odoo.py\" \\\n    ODOO_CONF=\"/opt/odoo/etc/odoo.conf\" \\\n    UNACCENT=\"True\" \\\n    PGUSER=\"odoo\" \\\n    PGHOST=\"db\" \\\n    WORKERS=\"6\" \\\n    SERVER_MODE=\"test\" \\\n    PROXY_MODE=\"True\" \\\n    WITHOUT_DEMO=\"True\" \\\n    DB_MAXCONN=\"32\" \\\n    LIMIT_TIME_CPU=\"60\" \\\n    LIMIT_TIME_REAL=\"120\" \\\n    AEROO_DOCS_HOST=\"aeroo\" \\\n    AFIP_HOMO_PKEY_FILE=\"/opt/odoo/backups/homo.pkey\" \\\n    AFIP_HOMO_CERT_FILE=\"/opt/odoo/backups/homo.cert\" \\\n    AFIP_PROD_PKEY_FILE=\"/opt/odoo/backups/prod.pkey\" \\\n    AFIP_PROD_CERT_FILE=\"/opt/odoo/backups/prod.cert\" \\\n    DB_TEMPLATE=\"template1\"\n#   odoo server use this env var as default conf, check if v9 or v10 rename it\nENV OPENERP_SERVER=\"$ODOO_CONF\"\nUSER odoo\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM adhoc/odoo-ubuntu:8.0\nMAINTAINER Juan Jose Scarafia <jjs@adhoc.com.ar>\nUSER root\n#  Generate locale (es_AR for right odoo es_AR language config, and C.UTF-8 for postgres and general locale data)\n#  TODO better C.UTF-8 or en_US.UTF-8?\nRUN locale-gen en_US.UTF-8 \\\n && update-locale\nRUN locale-gen es_AR.UTF-8 \\\n && update-locale\nRUN echo 'LANG=\"en_US.UTF-8\"' > /etc/default/locale\nENV LANG=\"es_AR.UTF-8  \"\nENV LANGUAGE=\"es_AR:es:en_US:en  \"\nENV LC_ALL=\"es_AR.UTF-8\"\n#  Install some deps (if we install with no-recommends later we have some errors with pip)\nRUN apt-get update \\\n && apt-get install python-pip git -y\n#  sudo and other useful tools\nRUN apt-get install sudo nano htop ssh wget unzip -y\n#  update pip and install setuptools (required for intalling pip requirements)\nRUN pip install pip --upgrade\nRUN pip install setuptools --upgrade\n#  Workers and longpolling dependencies\nRUN apt-get install python-gevent -y\nRUN pip install psycogreen\n# # Install pip dependencies for adhoc used odoo repositories\nRUN pip install openupgradelib\n#  used by many pip packages\nRUN apt-get install python-dev build-essential -y\n#  odoo-extra\nRUN apt-get install python-matplotlib font-manager -y\nRUN pip install simplejson\n#  odoo argentina (nuevo modulo de FE)\nRUN apt-get install swig libffi-dev libssl-dev python-m2crypto python-httplib2 -y\n#  este deberiamos borrarlo porque tarda, es para pyOpenSSL que no deberia ser necesario si usamos pyafipws\n#  aeroo direct print\nRUN apt-get install libcups2-dev -y\n#  fix for this issue https://github.com/odoo/odoo/issues/9113 (issue raised when installing website_animate)\nRUN apt-get install npm -y\nRUN npm install less less-plugin-clean-css -g\nRUN apt-get install nodejs-legacy -y\nRUN rm /usr/bin/lessc ; ln -s /usr/local/bin/lessc /usr/bin/lessc\nRUN apt-mark hold node-less\n# # Clean apt-get (copied from odoo)\nRUN apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false\nRUN apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Make auto_install = False for various modules\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_chat/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_odoo_support/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/bus/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/base_import/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/portal/__openerp__.py\n#  create directory for odoo files\nRUN mkdir -p /opt/odoo\nRUN chown -R odoo /opt/odoo\n#  changing user is required by odoo which won't start with root\nUSER odoo\nENV ETC_DIR=\"/opt/odoo/etc\"\nENV DATA_DIR=\"/opt/odoo/data\"\nENV CUSTOM_ADDONS=\"/opt/odoo/custom-addons\"\nENV EXTRA_ADDONS=\"/opt/odoo/extra-addons\"\nRUN mkdir -p ${ETC_DIR}\nRUN mkdir -p ${DATA_DIR}\nRUN mkdir -p ${CUSTOM_ADDONS}\nRUN mkdir -p ${EXTRA_ADDONS}\nUSER root\n#  Mount persistent directories\nVOLUME [\"${DATA_DIR}\", \"${CUSTOM_ADDONS}\"]\n#  no tendriamos porque montar \"/opt/odoo/etc\" ya que la idea es que se reconstruya el conf dinamicamente\n#  rplace  entrypoint script and replace Odoo configuration file (new name)\nENV RESOURCES=\"/opt/odoo/resources/\"\nCOPY ./resources/ ${RESOURCES}\nRUN chown -R odoo ${RESOURCES}\n#  change entrypoint\nENTRYPOINT [\"/opt/odoo/resources/entrypoint.sh\"]\nCMD [\"odoo.py\"]\n#  Variables used by the launch scripts\nENV ODOO_SERVER=\"odoo.py\" \\\n    ODOO_CONF=\"/opt/odoo/etc/odoo.conf\" \\\n    UNACCENT=\"True\" \\\n    PGUSER=\"odoo\" \\\n    PGPASSWORD=\"odoo\" \\\n    PGHOST=\"db\" \\\n    WORKERS=\"6\" \\\n    ADMIN_PASSWORD=\"admin\" \\\n    SERVER_MODE=\"test\" \\\n    PROXY_MODE=\"True\" \\\n    WITHOUT_DEMO=\"True\" \\\n    DB_MAXCONN=\"32\" \\\n    LIMIT_TIME_CPU=\"60\" \\\n    LIMIT_TIME_REAL=\"120\" \\\n    AEROO_DOCS_HOST=\"aeroo\" \\\n    AFIP_HOMO_PKEY_FILE=\"/opt/odoo/backups/homo.pkey\" \\\n    AFIP_HOMO_CERT_FILE=\"/opt/odoo/backups/homo.cert\" \\\n    AFIP_PROD_PKEY_FILE=\"/opt/odoo/backups/prod.pkey\" \\\n    AFIP_PROD_CERT_FILE=\"/opt/odoo/backups/prod.cert\" \\\n    DB_TEMPLATE=\"template1\"\n#  odoo server use this env var as default conf, check if v9 or v10 rename it\nENV OPENERP_SERVER=\"$ODOO_CONF\"\nUSER odoo\n","injectedSmells":[],"originalDockerfileHash":"1937c654ebbd7c6b1974e9b8a630d051","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM adhoc/odoo-ubuntu:8.0\nMAINTAINER Juan Jose Scarafia <jjs@adhoc.com.ar>\nUSER root\n#   Generate locale (es_AR for right odoo es_AR language config, and C.UTF-8 for postgres and general locale data)\n#   TODO better C.UTF-8 or en_US.UTF-8?\nRUN locale-gen en_US.UTF-8 \\\n && update-locale\nRUN locale-gen es_AR.UTF-8 \\\n && update-locale\nRUN echo 'LANG=\"en_US.UTF-8\"' > /etc/default/locale\nENV LANG=\"es_AR.UTF-8  \"\nENV LANGUAGE=\"es_AR:es:en_US:en  \"\nENV LC_ALL=\"es_AR.UTF-8\"\n#   Install some deps (if we install with no-recommends later we have some errors with pip)\nRUN apt-get update \\\n && apt-get install python-pip git -y\n#   sudo and other useful tools\nRUN apt-get install sudo nano htop ssh wget unzip -y\n#   update pip and install setuptools (required for intalling pip requirements)\nRUN pip install pip --upgrade\nRUN pip install setuptools --upgrade\n#   Workers and longpolling dependencies\nRUN apt-get install python-gevent -y\nRUN pip install psycogreen\n#  # Install pip dependencies for adhoc used odoo repositories\nRUN pip install openupgradelib\n#   used by many pip packages\nRUN apt-get install python-dev build-essential -y\n#   odoo-extra\nRUN apt-get install python-matplotlib font-manager -y\nRUN pip install simplejson\n#   odoo argentina (nuevo modulo de FE)\nRUN apt-get install swig libffi-dev libssl-dev python-m2crypto python-httplib2 -y\n#   este deberiamos borrarlo porque tarda, es para pyOpenSSL que no deberia ser necesario si usamos pyafipws\n#   aeroo direct print\nRUN apt-get install libcups2-dev -y\n#   fix for this issue https://github.com/odoo/odoo/issues/9113 (issue raised when installing website_animate)\nRUN apt-get install npm -y\nRUN npm install less less-plugin-clean-css -g\nRUN apt-get install nodejs-legacy -y\nRUN rm /usr/bin/lessc ; ln -s /usr/local/bin/lessc /usr/bin/lessc\nRUN apt-mark hold node-less\n#  # Clean apt-get (copied from odoo)\nRUN apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false\nRUN apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Make auto_install = False for various modules\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_chat/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_odoo_support/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/bus/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/base_import/__openerp__.py\nRUN sed -i \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/portal/__openerp__.py\n#   create directory for odoo files\nRUN mkdir -p /opt/odoo\nRUN chown -R odoo /opt/odoo\n#   changing user is required by odoo which won't start with root\nUSER odoo\nENV ETC_DIR=\"/opt/odoo/etc\"\nENV DATA_DIR=\"/opt/odoo/data\"\nENV CUSTOM_ADDONS=\"/opt/odoo/custom-addons\"\nENV EXTRA_ADDONS=\"/opt/odoo/extra-addons\"\nRUN mkdir -p ${ETC_DIR}\nRUN mkdir -p ${DATA_DIR}\nRUN mkdir -p ${CUSTOM_ADDONS}\nRUN mkdir -p ${EXTRA_ADDONS}\nUSER root\n#   Mount persistent directories\nVOLUME [\"${DATA_DIR}\", \"${CUSTOM_ADDONS}\"]\n#   no tendriamos porque montar \"/opt/odoo/etc\" ya que la idea es que se reconstruya el conf dinamicamente\n#   rplace  entrypoint script and replace Odoo configuration file (new name)\nENV RESOURCES=\"/opt/odoo/resources/\"\nCOPY ./resources/ ${RESOURCES}\nRUN chown -R odoo ${RESOURCES}\n#   change entrypoint\nENTRYPOINT [\"/opt/odoo/resources/entrypoint.sh\"]\nCMD [\"odoo.py\"]\n#   Variables used by the launch scripts\nENV ODOO_SERVER=\"odoo.py\" \\\n    ODOO_CONF=\"/opt/odoo/etc/odoo.conf\" \\\n    UNACCENT=\"True\" \\\n    PGUSER=\"odoo\" \\\n    PGPASSWORD=\"odoo\" \\\n    PGHOST=\"db\" \\\n    WORKERS=\"6\" \\\n    ADMIN_PASSWORD=\"admin\" \\\n    SERVER_MODE=\"test\" \\\n    PROXY_MODE=\"True\" \\\n    WITHOUT_DEMO=\"True\" \\\n    DB_MAXCONN=\"32\" \\\n    LIMIT_TIME_CPU=\"60\" \\\n    LIMIT_TIME_REAL=\"120\" \\\n    AEROO_DOCS_HOST=\"aeroo\" \\\n    AFIP_HOMO_PKEY_FILE=\"/opt/odoo/backups/homo.pkey\" \\\n    AFIP_HOMO_CERT_FILE=\"/opt/odoo/backups/homo.cert\" \\\n    AFIP_PROD_PKEY_FILE=\"/opt/odoo/backups/prod.pkey\" \\\n    AFIP_PROD_CERT_FILE=\"/opt/odoo/backups/prod.cert\" \\\n    DB_TEMPLATE=\"template1\"\n#   odoo server use this env var as default conf, check if v9 or v10 rename it\nENV OPENERP_SERVER=\"$ODOO_CONF\"\nUSER odoo\n","originalDockerfileUglifiedHash":"6bf920778e75bcc6f15f5a508199b2cf","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0edb72cbc84f2440cc9437a3c221c632eb8cbcf2.dockerfile"}