{"seed":953276337,"processedDockerfileHash":"cf93975c54959f20dac141e9bec8b4b4","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#   Licensed under the Educational Community License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#       http://opensource.org/licenses/ECL-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM fedora:28\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-build\" \\\n      org.label-schema.description=\"Image that provides an Opencast build and development environment\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER bash\"\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV HUNSPELL_BASE_URL=\"http://download.services.openoffice.org/contrib/dictionaries\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_USER=\"admin\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_PASS=\"opencast\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_USER=\"opencast_system_account\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_PASS=\"CHANGE_ME\" \\\n    OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_BUILD_ASSETS=\"/docker\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN dnf -y install \"https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$( rpm -E %fedora ;).noarch.rpm\" \"https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$( rpm -E %fedora ;).noarch.rpm\" \\\n && dnf -y install sudo tar gzip bzip2 unzip git wget make automake gcc gcc-c++ maven python \\\n && dnf -y install java-1.8.0-openjdk openssl tzdata curl nc jq fontconfig dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts gnu-free-serif-fonts gnu-free-mono-fonts gnu-free-sans-fonts liberation-fonts linux-libertine-fonts ffmpeg sox hunspell tesseract synfig nfs-utils \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && mkdir -p /tmp/hunspell /usr/share/hunspell \\\n && { echo \"22e217a631977d7b377f8dd22d2bbacd2d36b32765ce13f3474b03a4a97dd700 en_AU.zip\" ;echo \"31fac12a1b520cde686f328d3fa7560f6eba772cddc872197ff842c57a0dc1ea en_CA.zip\" ;echo \"5869d8bd80eb2eb328ebe36b356348de4ae2acb1db6df39d1717d33f89f63728 en_GB.zip\" ;echo \"6cc717b4de43240595662a2deef5447b06062e82380f5647196f07c9089284fa en_NZ.zip\" ;echo \"9227f658f182c9cece797352f041a888134765c11bffc91951c010a73187baea en_US.zip\" ;echo \"090285b721dcaabff51b467123f82a181a6904d187c90bda812c6e5f365ff19a en_ZA.zip\" ; } > /tmp/hunspell-sha256sum.txt \\\n && cd /tmp/hunspell \\\n && for file in $( awk '{print $2}' /tmp/hunspell-sha256sum.txt ;); do curl -L -o \"${file}\" \"${HUNSPELL_BASE_URL}/${file}\" ;grep \"${file}\" /tmp/hunspell-sha256sum.txt | sha256sum -c - ;unzip \"/tmp/hunspell/${file}\" ; done \\\n && cp *.aff *.dic /usr/share/hunspell \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \"${OPENCAST_BUILD_ASSETS}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \\\n && echo \"opencast-builder ALL = NOPASSWD: ALL\" > /etc/sudoers.d/opencast-builder \\\n && rm -rf /tmp/* /var/cache/dnf /var/log/dnf* /var/log/hawkey.log\nCOPY assets/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY assets/build \"${OPENCAST_BUILD_ASSETS}/\"\nCOPY assets/bin/* \"/usr/local/bin/\"\nWORKDIR \"${OPENCAST_SRC}\"\nEXPOSE 8080/tcp 5005/tcp\nVOLUME [ \"${OPENCAST_DATA}\", \"${OPENCAST_SRC}\", \"/root/.m2\" ]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#  Licensed under the Educational Community License, Version 2.0\n#  (the \"License\"); you may not use this file except in compliance with\n#  the License. You may obtain a copy of the License at\n#\n#      http://opensource.org/licenses/ECL-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM fedora:28\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-build\" \\\n      org.label-schema.description=\"Image that provides an Opencast build and development environment\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER bash\"\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV HUNSPELL_BASE_URL=\"http://download.services.openoffice.org/contrib/dictionaries\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_USER=\"admin\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_PASS=\"opencast\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_USER=\"opencast_system_account\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_PASS=\"CHANGE_ME\" \\\n    OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_BUILD_ASSETS=\"/docker\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN dnf -y install \"https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$( rpm -E %fedora ;).noarch.rpm\" \"https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$( rpm -E %fedora ;).noarch.rpm\" \\\n && dnf -y install sudo tar gzip bzip2 unzip git wget make automake gcc gcc-c++ maven python \\\n && dnf -y install java-1.8.0-openjdk openssl tzdata curl nc jq fontconfig dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts gnu-free-serif-fonts gnu-free-mono-fonts gnu-free-sans-fonts liberation-fonts linux-libertine-fonts ffmpeg sox hunspell tesseract synfig nfs-utils \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && mkdir -p /tmp/hunspell /usr/share/hunspell \\\n && { echo \"22e217a631977d7b377f8dd22d2bbacd2d36b32765ce13f3474b03a4a97dd700 en_AU.zip\" ;echo \"31fac12a1b520cde686f328d3fa7560f6eba772cddc872197ff842c57a0dc1ea en_CA.zip\" ;echo \"5869d8bd80eb2eb328ebe36b356348de4ae2acb1db6df39d1717d33f89f63728 en_GB.zip\" ;echo \"6cc717b4de43240595662a2deef5447b06062e82380f5647196f07c9089284fa en_NZ.zip\" ;echo \"9227f658f182c9cece797352f041a888134765c11bffc91951c010a73187baea en_US.zip\" ;echo \"090285b721dcaabff51b467123f82a181a6904d187c90bda812c6e5f365ff19a en_ZA.zip\" ; } > /tmp/hunspell-sha256sum.txt \\\n && cd /tmp/hunspell \\\n && for file in $( awk '{print $2}' /tmp/hunspell-sha256sum.txt ;); do curl -L -o \"${file}\" \"${HUNSPELL_BASE_URL}/${file}\" ;grep \"${file}\" /tmp/hunspell-sha256sum.txt | sha256sum -c - ;unzip \"/tmp/hunspell/${file}\" ; done \\\n && cp *.aff *.dic /usr/share/hunspell \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \"${OPENCAST_BUILD_ASSETS}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \\\n && echo \"opencast-builder ALL = NOPASSWD: ALL\" > /etc/sudoers.d/opencast-builder \\\n && rm -rf /tmp/* /var/cache/dnf /var/log/dnf* /var/log/hawkey.log\nCOPY assets/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY assets/build \"${OPENCAST_BUILD_ASSETS}/\"\nCOPY assets/bin/* \"/usr/local/bin/\"\nWORKDIR \"${OPENCAST_SRC}\"\nEXPOSE 8080/tcp 5005/tcp\nVOLUME [ \"${OPENCAST_DATA}\", \"${OPENCAST_SRC}\", \"/root/.m2\" ]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"bash\"]\n","injectedSmells":[],"originalDockerfileHash":"2997ad94839c90324647c6ab38d1d7b1","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#   Licensed under the Educational Community License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#       http://opensource.org/licenses/ECL-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM fedora:28\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-build\" \\\n      org.label-schema.description=\"Image that provides an Opencast build and development environment\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER bash\"\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV HUNSPELL_BASE_URL=\"http://download.services.openoffice.org/contrib/dictionaries\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_USER=\"admin\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_PASS=\"opencast\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_USER=\"opencast_system_account\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_PASS=\"CHANGE_ME\" \\\n    OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_BUILD_ASSETS=\"/docker\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN dnf -y install \"https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$( rpm -E %fedora ;).noarch.rpm\" \"https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$( rpm -E %fedora ;).noarch.rpm\" \\\n && dnf -y install sudo tar gzip bzip2 unzip git wget make automake gcc gcc-c++ maven python \\\n && dnf -y install java-1.8.0-openjdk openssl tzdata curl nc jq fontconfig dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts gnu-free-serif-fonts gnu-free-mono-fonts gnu-free-sans-fonts liberation-fonts linux-libertine-fonts ffmpeg sox hunspell tesseract synfig nfs-utils \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && mkdir -p /tmp/hunspell /usr/share/hunspell \\\n && { echo \"22e217a631977d7b377f8dd22d2bbacd2d36b32765ce13f3474b03a4a97dd700 en_AU.zip\" ;echo \"31fac12a1b520cde686f328d3fa7560f6eba772cddc872197ff842c57a0dc1ea en_CA.zip\" ;echo \"5869d8bd80eb2eb328ebe36b356348de4ae2acb1db6df39d1717d33f89f63728 en_GB.zip\" ;echo \"6cc717b4de43240595662a2deef5447b06062e82380f5647196f07c9089284fa en_NZ.zip\" ;echo \"9227f658f182c9cece797352f041a888134765c11bffc91951c010a73187baea en_US.zip\" ;echo \"090285b721dcaabff51b467123f82a181a6904d187c90bda812c6e5f365ff19a en_ZA.zip\" ; } > /tmp/hunspell-sha256sum.txt \\\n && cd /tmp/hunspell \\\n && for file in $( awk '{print $2}' /tmp/hunspell-sha256sum.txt ;); do curl -L -o \"${file}\" \"${HUNSPELL_BASE_URL}/${file}\" ;grep \"${file}\" /tmp/hunspell-sha256sum.txt | sha256sum -c - ;unzip \"/tmp/hunspell/${file}\" ; done \\\n && cp *.aff *.dic /usr/share/hunspell \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \"${OPENCAST_BUILD_ASSETS}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \\\n && echo \"opencast-builder ALL = NOPASSWD: ALL\" > /etc/sudoers.d/opencast-builder \\\n && rm -rf /tmp/* /var/cache/dnf /var/log/dnf* /var/log/hawkey.log\nCOPY assets/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY assets/build \"${OPENCAST_BUILD_ASSETS}/\"\nCOPY assets/bin/* \"/usr/local/bin/\"\nWORKDIR \"${OPENCAST_SRC}\"\nEXPOSE 8080/tcp 5005/tcp\nVOLUME [ \"${OPENCAST_DATA}\", \"${OPENCAST_SRC}\", \"/root/.m2\" ]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"bash\"]\n","originalDockerfileUglifiedHash":"6a344a20b033452f4f51ce76f5a27fb5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7c607f752cc8c5b5f55abf4f7424d9ca7d1bb630.dockerfile"}