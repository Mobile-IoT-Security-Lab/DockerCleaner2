{"seed":367026702,"processedDockerfileHash":"97ac1e242dcd90ff4c1c8ae18bc289af","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:8\nARG TERM=linux\nARG DEBIAN_FRONTEND=noninteractive\nENV SCIDB_VER=\"15.7\" \\\n    SCIDB_VER_MINOR=\"0.9267\" \\\n    SCIDB_SOURCE_URL=\"http://forum.paradigm4.com/uploads/db6652/original/1X/af46ea0924d43cd943a10a3c83ecf778800bf2a0.tgz\"\nENV SCIDB_SOURCE_PATH=\"/usr/local/src/scidb-$SCIDB_VER.$SCIDB_VER_MINOR\" \\\n    SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\" \\\n    SCIDB_BUILD_TYPE=\"Release\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\n#  # Install dependencies\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends apt-transport-https bison ca-certificates cmake flex g++ gfortran libbz2-dev libcppunit-dev liblapack-dev liblog4cxx10-dev libprotobuf-dev libreadline6-dev make openssh-server patch pkg-config postgresql postgresql-contrib protobuf-compiler python python-paramiko sudo unzip wget --assume-yes ) \\\n && rm -rf /var/lib/apt/lists/*\n#  # Install openjdk-8-jdk from jessie-backports\n#  # Install dependencies requiring default-jre-headless\nRUN echo \"deb http://http.debian.net/debian jessie-backports main\" > /etc/apt/sources.list.d/jessie-backports.list \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends ant ant-contrib ca-certificates-java/jessie-backports junit libprotobuf-java openjdk-8-jdk openjdk-8-jre-headless --assume-yes ) \\\n && rm -rf /var/lib/apt/lists/*\n#  # Build and install libpqxx3 from wheezy\nRUN echo \"deb-src http://http.debian.net/debian wheezy main\" > /etc/apt/sources.list.d/wheezy.list \\\n && : \\\n && apt-get build-dep --assume-yes --no-install-recommends libpqxx3 \\\n && mkdir /usr/local/src/libpqxx3 \\\n && cd /usr/local/src/libpqxx3 \\\n && apt-get source --build libpqxx3 \\\n && apt-get purge --assume-yes autotools-dev bsdmainutils build-essential bzip2 chrpath debhelper dpkg-dev file gettext gettext-base groff-base intltool-debian libasprintf0c2 libcroco3 libdpkg-perl libgdbm3 libmagic1 libpipeline1 libtimedate-perl libtool libunistring0 man-db perl perl-modules po-debconf xz-utils \\\n && dpkg --install libpqxx-3.1_3.1-1.1_amd64.deb libpqxx3-dev_3.1-1.1_amd64.deb \\\n && rm -rf /etc/apt/sources.list.d/wheezy.list /usr/local/src/libpqxx3 /var/lib/apt/lists/*\n#  # Install Paradigm4 packages\nRUN wget --no-verbose --output-document - https://downloads.paradigm4.com/key | apt-key add - \\\n && echo \"deb https://downloads.paradigm4.com/ ubuntu14.04/3rdparty/\" > /etc/apt/sources.list.d/scidb.list \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends scidb-$SCIDB_VER-ant scidb-$SCIDB_VER-cityhash scidb-$SCIDB_VER-libboost1.54-all-dev scidb-$SCIDB_VER-libcsv scidb-$SCIDB_VER-libmpich2-dev scidb-$SCIDB_VER-mpich2 --assume-yes ) \\\n && rm -rf /var/lib/apt/lists/*\n#  # Get SciDB source code\nRUN wget --no-verbose --output-document - $SCIDB_SOURCE_URL | tar --extract --gzip --directory=/usr/local/src\n#  # Apply Debian 8 patches\nCOPY patch $SCIDB_SOURCE_PATH-patch/\nRUN cd $SCIDB_SOURCE_PATH \\\n && cat $SCIDB_SOURCE_PATH-patch/* | patch --strip=1\n#  # Build SciDB libraries (first few libs only)\nRUN cd $SCIDB_SOURCE_PATH \\\n && env PATH=$PATH:/opt/scidb/$SCIDB_VER/3rdparty/mpich2/bin ./run.py setup --force \\\n && cd stage/build \\\n && make -j2 MurmurHash_lib json_lib scidb_msg_lib util_lib system_lib catalog_lib compression_lib array_lib ops_lib\n#   $SCIDB_SOURCE_PATH/run.py make -j2\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:8\nARG TERM=linux\nARG DEBIAN_FRONTEND=noninteractive\nENV SCIDB_VER=\"15.7\" \\\n    SCIDB_VER_MINOR=\"0.9267\" \\\n    SCIDB_SOURCE_URL=\"http://forum.paradigm4.com/uploads/db6652/original/1X/af46ea0924d43cd943a10a3c83ecf778800bf2a0.tgz\"\nENV SCIDB_SOURCE_PATH=\"/usr/local/src/scidb-$SCIDB_VER.$SCIDB_VER_MINOR\" \\\n    SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\" \\\n    SCIDB_BUILD_TYPE=\"Release\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\n# # Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https bison ca-certificates cmake flex g++ gfortran libbz2-dev libcppunit-dev liblapack-dev liblog4cxx10-dev libprotobuf-dev libreadline6-dev make openssh-server patch pkg-config postgresql postgresql-contrib protobuf-compiler python python-paramiko sudo unzip wget --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n# # Install openjdk-8-jdk from jessie-backports\n# # Install dependencies requiring default-jre-headless\nRUN echo \"deb http://http.debian.net/debian jessie-backports main\" > /etc/apt/sources.list.d/jessie-backports.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends ant ant-contrib ca-certificates-java/jessie-backports junit libprotobuf-java openjdk-8-jdk openjdk-8-jre-headless --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n# # Build and install libpqxx3 from wheezy\nRUN echo \"deb-src http://http.debian.net/debian wheezy main\" > /etc/apt/sources.list.d/wheezy.list \\\n && apt-get update \\\n && apt-get build-dep --assume-yes --no-install-recommends libpqxx3 \\\n && mkdir /usr/local/src/libpqxx3 \\\n && cd /usr/local/src/libpqxx3 \\\n && apt-get source --build libpqxx3 \\\n && apt-get purge --assume-yes autotools-dev bsdmainutils build-essential bzip2 chrpath debhelper dpkg-dev file gettext gettext-base groff-base intltool-debian libasprintf0c2 libcroco3 libdpkg-perl libgdbm3 libmagic1 libpipeline1 libtimedate-perl libtool libunistring0 man-db perl perl-modules po-debconf xz-utils \\\n && dpkg --install libpqxx-3.1_3.1-1.1_amd64.deb libpqxx3-dev_3.1-1.1_amd64.deb \\\n && rm -rf /etc/apt/sources.list.d/wheezy.list /usr/local/src/libpqxx3 /var/lib/apt/lists/*\n# # Install Paradigm4 packages\nRUN wget --no-verbose --output-document - https://downloads.paradigm4.com/key | apt-key add - \\\n && echo \"deb https://downloads.paradigm4.com/ ubuntu14.04/3rdparty/\" > /etc/apt/sources.list.d/scidb.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends scidb-$SCIDB_VER-ant scidb-$SCIDB_VER-cityhash scidb-$SCIDB_VER-libboost1.54-all-dev scidb-$SCIDB_VER-libcsv scidb-$SCIDB_VER-libmpich2-dev scidb-$SCIDB_VER-mpich2 --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n# # Get SciDB source code\nRUN wget --no-verbose --output-document - $SCIDB_SOURCE_URL | tar --extract --gzip --directory=/usr/local/src\n# # Apply Debian 8 patches\nCOPY patch $SCIDB_SOURCE_PATH-patch/\nRUN cd $SCIDB_SOURCE_PATH \\\n && cat $SCIDB_SOURCE_PATH-patch/* | patch --strip=1\n# # Build SciDB libraries (first few libs only)\nRUN cd $SCIDB_SOURCE_PATH \\\n && env PATH=$PATH:/opt/scidb/$SCIDB_VER/3rdparty/mpich2/bin ./run.py setup --force \\\n && cd stage/build \\\n && make -j2 MurmurHash_lib json_lib scidb_msg_lib util_lib system_lib catalog_lib compression_lib array_lib ops_lib\n#  $SCIDB_SOURCE_PATH/run.py make -j2\n","injectedSmells":[],"originalDockerfileHash":"9236adea25dbf7d2b26b3d8515e0620e","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:8\nARG TERM=linux\nARG DEBIAN_FRONTEND=noninteractive\nENV SCIDB_VER=\"15.7\" \\\n    SCIDB_VER_MINOR=\"0.9267\" \\\n    SCIDB_SOURCE_URL=\"http://forum.paradigm4.com/uploads/db6652/original/1X/af46ea0924d43cd943a10a3c83ecf778800bf2a0.tgz\"\nENV SCIDB_SOURCE_PATH=\"/usr/local/src/scidb-$SCIDB_VER.$SCIDB_VER_MINOR\" \\\n    SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\" \\\n    SCIDB_BUILD_TYPE=\"Release\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\n#  # Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-transport-https bison ca-certificates cmake flex g++ gfortran libbz2-dev libcppunit-dev liblapack-dev liblog4cxx10-dev libprotobuf-dev libreadline6-dev make openssh-server patch pkg-config postgresql postgresql-contrib protobuf-compiler python python-paramiko sudo unzip wget --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n#  # Install openjdk-8-jdk from jessie-backports\n#  # Install dependencies requiring default-jre-headless\nRUN echo \"deb http://http.debian.net/debian jessie-backports main\" > /etc/apt/sources.list.d/jessie-backports.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends ant ant-contrib ca-certificates-java/jessie-backports junit libprotobuf-java openjdk-8-jdk openjdk-8-jre-headless --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n#  # Build and install libpqxx3 from wheezy\nRUN echo \"deb-src http://http.debian.net/debian wheezy main\" > /etc/apt/sources.list.d/wheezy.list \\\n && apt-get update \\\n && apt-get build-dep --assume-yes --no-install-recommends libpqxx3 \\\n && mkdir /usr/local/src/libpqxx3 \\\n && cd /usr/local/src/libpqxx3 \\\n && apt-get source --build libpqxx3 \\\n && apt-get purge --assume-yes autotools-dev bsdmainutils build-essential bzip2 chrpath debhelper dpkg-dev file gettext gettext-base groff-base intltool-debian libasprintf0c2 libcroco3 libdpkg-perl libgdbm3 libmagic1 libpipeline1 libtimedate-perl libtool libunistring0 man-db perl perl-modules po-debconf xz-utils \\\n && dpkg --install libpqxx-3.1_3.1-1.1_amd64.deb libpqxx3-dev_3.1-1.1_amd64.deb \\\n && rm -rf /etc/apt/sources.list.d/wheezy.list /usr/local/src/libpqxx3 /var/lib/apt/lists/*\n#  # Install Paradigm4 packages\nRUN wget --no-verbose --output-document - https://downloads.paradigm4.com/key | apt-key add - \\\n && echo \"deb https://downloads.paradigm4.com/ ubuntu14.04/3rdparty/\" > /etc/apt/sources.list.d/scidb.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends scidb-$SCIDB_VER-ant scidb-$SCIDB_VER-cityhash scidb-$SCIDB_VER-libboost1.54-all-dev scidb-$SCIDB_VER-libcsv scidb-$SCIDB_VER-libmpich2-dev scidb-$SCIDB_VER-mpich2 --assume-yes \\\n && rm -rf /var/lib/apt/lists/*\n#  # Get SciDB source code\nRUN wget --no-verbose --output-document - $SCIDB_SOURCE_URL | tar --extract --gzip --directory=/usr/local/src\n#  # Apply Debian 8 patches\nCOPY patch $SCIDB_SOURCE_PATH-patch/\nRUN cd $SCIDB_SOURCE_PATH \\\n && cat $SCIDB_SOURCE_PATH-patch/* | patch --strip=1\n#  # Build SciDB libraries (first few libs only)\nRUN cd $SCIDB_SOURCE_PATH \\\n && env PATH=$PATH:/opt/scidb/$SCIDB_VER/3rdparty/mpich2/bin ./run.py setup --force \\\n && cd stage/build \\\n && make -j2 MurmurHash_lib json_lib scidb_msg_lib util_lib system_lib catalog_lib compression_lib array_lib ops_lib\n#   $SCIDB_SOURCE_PATH/run.py make -j2\n","originalDockerfileUglifiedHash":"7459ce4a7ed5b47eaa1afbed147e9f91","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/974ddb2bca2bf8c5dceb433197f782571a3fed54.dockerfile"}