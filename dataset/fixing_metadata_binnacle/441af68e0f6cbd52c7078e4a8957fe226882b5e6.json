{"seed":3574678163,"processedDockerfileHash":"5fe4e5ddd0ff2029d23f1a6de4918769","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nENV SCALA_VERSION=\"2.10.4\"\nENV SPARK_VERSION=\"1.4.1\"\nEXPOSE 80/tcp 4042/tcp 9160/tcp 9042/tcp 9200/tcp 7077/tcp 38080/tcp 38081/tcp 6060/tcp 6061/tcp 8090/tcp 8099/tcp 10000/tcp 50070/tcp 50090/tcp 9092/tcp 6066/tcp 9000/tcp 19999/tcp 6379/tcp 6081/tcp 7474/tcp 8787/tcp 5601/tcp 8989/tcp 7979/tcp 4040/tcp\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.35.0-1ubuntu2.20 -y \\\n && apt-get install --no-install-recommends wget=1.15-1ubuntu1.14.04.5 -y \\\n && apt-get install --no-install-recommends vim=2:7.4.052-1ubuntu3.1 -y \\\n && cd ~ \\\n && apt-get install --no-install-recommends git=1:1.9.1-1ubuntu0.10 -y \\\n && apt-get install --no-install-recommends openssh-server=1:6.6p1-2ubuntu2.13 -y \\\n && apt-get install --no-install-recommends default-jdk=2:1.7-51 -y \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/sbt-0.13.8.tgz \\\n && tar xvzf sbt-0.13.8.tgz \\\n && rm sbt-0.13.8.tgz \\\n && ln -s /root/sbt/bin/sbt /usr/local/bin \\\n && cd ~ \\\n && git clone https://github.com/bythebay/pipeline.git \\\n && sbt clean clean-files\nRUN cd ~ \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install mysql-server \\\n && apt-get install --no-install-recommends mysql-client=5.5.62-0ubuntu0.14.04.1 -y \\\n && apt-get install --no-install-recommends libmysql-java=5.1.28-1 -y \\\n && wget http://archive.apache.org/dist/cassandra/2.2.0/apache-cassandra-2.2.0-bin.tar.gz \\\n && tar xvzf apache-cassandra-2.2.0-bin.tar.gz \\\n && rm apache-cassandra-2.2.0-bin.tar.gz \\\n && wget http://packages.confluent.io/archive/1.0/confluent-1.0-2.10.4.tar.gz \\\n && tar xvzf confluent-1.0-2.10.4.tar.gz \\\n && rm confluent-1.0-2.10.4.tar.gz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-1.4.1-bin-fluxcapacitor.tgz \\\n && tar xvzf spark-1.4.1-bin-fluxcapacitor.tgz \\\n && rm spark-1.4.1-bin-fluxcapacitor.tgz \\\n && apt-get install --no-install-recommends screen=4.1.0~20120320gitdb59704-9 -y \\\n && wget https://s3.eu-central-1.amazonaws.com/spark-notebook/emr/spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && tar xvzf spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && rm spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && tar xvzf spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && rm spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && mkdir -p ~/pipeline/logs/spark-jobserver\nRUN cd ~/pipeline \\\n && git reset --hard \\\n && git pull \\\n && chmod a+rx *.sh \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.sh ~/spark-jobserver-0.5.2/config \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.conf ~/spark-jobserver-0.5.2/config \\\n && cd ~/spark-jobserver-0.5.2 \\\n && sbt job-server-tests/package \\\n && bin/server_package.sh pipeline \\\n && cp /tmp/job-server/* . \\\n && rm -rf /tmp/job-server \\\n && cd ~ \\\n && mv ~/.profile ~/.profile.orig \\\n && ln -s ~/pipeline/config/bash/.profile ~/.profile \\\n && cd ~/pipeline \\\n && sbt feeder/assembly \\\n && cd ~/pipeline \\\n && sbt streaming/package\nWORKDIR /root\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nENV SCALA_VERSION=\"2.10.4\"\nENV SPARK_VERSION=\"1.4.1\"\nEXPOSE 80/tcp 4042/tcp 9160/tcp 9042/tcp 9200/tcp 7077/tcp 38080/tcp 38081/tcp 6060/tcp 6061/tcp 8090/tcp 8099/tcp 10000/tcp 50070/tcp 50090/tcp 9092/tcp 6066/tcp 9000/tcp 19999/tcp 6379/tcp 6081/tcp 7474/tcp 8787/tcp 5601/tcp 8989/tcp 7979/tcp 4040/tcp\nRUN apt-get update \\\n && apt-get install curl -y \\\n && apt-get install wget -y \\\n && apt-get install vim -y \\\n && cd ~ \\\n && apt-get install git -y \\\n && apt-get install openssh-server -y \\\n && apt-get install default-jdk -y \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/sbt-0.13.8.tgz \\\n && tar xvzf sbt-0.13.8.tgz \\\n && rm sbt-0.13.8.tgz \\\n && ln -s /root/sbt/bin/sbt /usr/local/bin \\\n && cd ~ \\\n && git clone https://github.com/bythebay/pipeline.git \\\n && sbt clean clean-files\nRUN cd ~ \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install mysql-server \\\n && apt-get install mysql-client -y \\\n && apt-get install libmysql-java -y \\\n && wget http://archive.apache.org/dist/cassandra/2.2.0/apache-cassandra-2.2.0-bin.tar.gz \\\n && tar xvzf apache-cassandra-2.2.0-bin.tar.gz \\\n && rm apache-cassandra-2.2.0-bin.tar.gz \\\n && wget http://packages.confluent.io/archive/1.0/confluent-1.0-2.10.4.tar.gz \\\n && tar xvzf confluent-1.0-2.10.4.tar.gz \\\n && rm confluent-1.0-2.10.4.tar.gz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-1.4.1-bin-fluxcapacitor.tgz \\\n && tar xvzf spark-1.4.1-bin-fluxcapacitor.tgz \\\n && rm spark-1.4.1-bin-fluxcapacitor.tgz \\\n && apt-get install screen -y \\\n && wget https://s3.eu-central-1.amazonaws.com/spark-notebook/emr/spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && tar xvzf spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && rm spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && tar xvzf spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && rm spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && mkdir -p ~/pipeline/logs/spark-jobserver\nRUN cd ~/pipeline \\\n && git reset --hard \\\n && git pull \\\n && chmod a+rx *.sh \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.sh ~/spark-jobserver-0.5.2/config \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.conf ~/spark-jobserver-0.5.2/config \\\n && cd ~/spark-jobserver-0.5.2 \\\n && sbt job-server-tests/package \\\n && bin/server_package.sh pipeline \\\n && cp /tmp/job-server/* . \\\n && rm -rf /tmp/job-server \\\n && cd ~ \\\n && mv ~/.profile ~/.profile.orig \\\n && ln -s ~/pipeline/config/bash/.profile ~/.profile \\\n && cd ~/pipeline \\\n && sbt feeder/assembly \\\n && cd ~/pipeline \\\n && sbt streaming/package\nWORKDIR /root\n","injectedSmells":[],"originalDockerfileHash":"286d85f9620bd673b8f9cb1fd5114293","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nENV SCALA_VERSION=\"2.10.4\"\nENV SPARK_VERSION=\"1.4.1\"\nEXPOSE 80/tcp 4042/tcp 9160/tcp 9042/tcp 9200/tcp 7077/tcp 38080/tcp 38081/tcp 6060/tcp 6061/tcp 8090/tcp 8099/tcp 10000/tcp 50070/tcp 50090/tcp 9092/tcp 6066/tcp 9000/tcp 19999/tcp 6379/tcp 6081/tcp 7474/tcp 8787/tcp 5601/tcp 8989/tcp 7979/tcp 4040/tcp\nRUN apt-get update \\\n && apt-get install curl -y \\\n && apt-get install wget -y \\\n && apt-get install vim -y \\\n && cd ~ \\\n && apt-get install git -y \\\n && apt-get install openssh-server -y \\\n && apt-get install default-jdk -y \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/sbt-0.13.8.tgz \\\n && tar xvzf sbt-0.13.8.tgz \\\n && rm sbt-0.13.8.tgz \\\n && ln -s /root/sbt/bin/sbt /usr/local/bin \\\n && cd ~ \\\n && git clone https://github.com/bythebay/pipeline.git \\\n && sbt clean clean-files\nRUN cd ~ \\\n && DEBIAN_FRONTEND=noninteractive apt-get -y install mysql-server \\\n && apt-get install mysql-client -y \\\n && apt-get install libmysql-java -y \\\n && wget http://archive.apache.org/dist/cassandra/2.2.0/apache-cassandra-2.2.0-bin.tar.gz \\\n && tar xvzf apache-cassandra-2.2.0-bin.tar.gz \\\n && rm apache-cassandra-2.2.0-bin.tar.gz \\\n && wget http://packages.confluent.io/archive/1.0/confluent-1.0-2.10.4.tar.gz \\\n && tar xvzf confluent-1.0-2.10.4.tar.gz \\\n && rm confluent-1.0-2.10.4.tar.gz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-1.4.1-bin-fluxcapacitor.tgz \\\n && tar xvzf spark-1.4.1-bin-fluxcapacitor.tgz \\\n && rm spark-1.4.1-bin-fluxcapacitor.tgz \\\n && apt-get install screen -y \\\n && wget https://s3.eu-central-1.amazonaws.com/spark-notebook/emr/spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && tar xvzf spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && rm spark-notebook-0.6.0-scala-2.10.4-spark-1.4.1-hadoop-2.6.0-with-hive-with-parquet.tgz \\\n && wget https://s3.amazonaws.com/fluxcapacitor.com/packages/spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && tar xvzf spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && rm spark-jobserver-0.5.2-fluxcapacitor.tar.gz \\\n && mkdir -p ~/pipeline/logs/spark-jobserver\nRUN cd ~/pipeline \\\n && git reset --hard \\\n && git pull \\\n && chmod a+rx *.sh \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.sh ~/spark-jobserver-0.5.2/config \\\n && ln ~/pipeline/config/spark-jobserver/pipeline.conf ~/spark-jobserver-0.5.2/config \\\n && cd ~/spark-jobserver-0.5.2 \\\n && sbt job-server-tests/package \\\n && bin/server_package.sh pipeline \\\n && cp /tmp/job-server/* . \\\n && rm -rf /tmp/job-server \\\n && cd ~ \\\n && mv ~/.profile ~/.profile.orig \\\n && ln -s ~/pipeline/config/bash/.profile ~/.profile \\\n && cd ~/pipeline \\\n && sbt feeder/assembly \\\n && cd ~/pipeline \\\n && sbt streaming/package\nWORKDIR /root\n","originalDockerfileUglifiedHash":"286d85f9620bd673b8f9cb1fd5114293","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/441af68e0f6cbd52c7078e4a8957fe226882b5e6.dockerfile"}