{"seed":4240763966,"processedDockerfileHash":"b3f6e4f4acc77a47f3c6efbb81f650a9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright (c) Microsoft Corporation\n#   All rights reserved.\n#\n#   MIT License\n#\n#   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n#   documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n#   the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n#   to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n#   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n#\n#   THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n#   BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n#   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n#   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n#\n#\n#   Copyright (c) Peking University 2018\n#\n#   The software is released under the Open-Intelligence Open Source License V1.0.\n#   The copyright owner promises to follow \"Open-Intelligence Open Source Platform\n#   Management Regulation V1.0\", which is provided by The New Generation of \n#   Artificial Intelligence Technology Innovation Strategic Alliance (the AITISA).\nFROM ubuntu:16.04\n#\n#   Preparation\n#\nWORKDIR /root/\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget=1.17.1-1ubuntu1.5 build-essential=12.1ubuntu2 python=2.7.12-1~16.04 python-pip=8.1.1-2ubuntu0.6 git=1:2.7.4-0ubuntu1.10 -y\nRUN pip install jinja2==3.1.2\n#   nginx version 1.13.8\nRUN wget http://nginx.org/download/nginx-1.13.8.tar.gz \\\n && tar -zxf nginx-1.13.8.tar.gz\n#   PCRE version 4.4 - 8.40\nRUN wget https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz \\\n && tar -zxf pcre-8.40.tar.gz\n#   zlib version 1.1.3 - 1.2.11\nRUN wget http://www.zlib.net/zlib-1.2.11.tar.gz \\\n && tar -zxf zlib-1.2.11.tar.gz\n#   OpenSSL version 1.0.2 - 1.1.0\nRUN wget https://www.openssl.org/source/openssl-1.1.0f.tar.gz \\\n && tar -zxf openssl-1.1.0f.tar.gz\n#   subs_filter\nRUN git clone git://github.com/yaoweibin/ngx_http_substitutions_filter_module.git\n#\n#   Configure nginx build\n#\nWORKDIR /root/nginx-1.13.8\nRUN ./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --user=www-data --group=www-data --with-http_sub_module --with-openssl=../openssl-1.1.0f --with-pcre=../pcre-8.40 --with-zlib=../zlib-1.2.11 --add-module=/root/ngx_http_substitutions_filter_module\n#\n#   Make and install nginx\n#\nRUN make\nRUN make install\n#\n#   Prepare and start nginx\n#\nWORKDIR /root/\nCOPY copied_file/pylon/src/* /root/\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\nCMD python render.py \\\n && cp nginx.conf /etc/nginx/nginx.conf \\\n && nginx -g \"daemon off;\"\n#\n#   END\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (c) Microsoft Corporation\n#  All rights reserved.\n#\n#  MIT License\n#\n#  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n#  documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n#  the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n#  to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n#  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n#\n#  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n#  BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n#  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n#  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n#\n#\n#  Copyright (c) Peking University 2018\n#\n#  The software is released under the Open-Intelligence Open Source License V1.0.\n#  The copyright owner promises to follow \"Open-Intelligence Open Source Platform\n#  Management Regulation V1.0\", which is provided by The New Generation of \n#  Artificial Intelligence Technology Innovation Strategic Alliance (the AITISA).\nFROM ubuntu:16.04\n#\n#  Preparation\n#\nWORKDIR /root/\nRUN apt-get update \\\n && apt-get install wget build-essential python python-pip git -y\nRUN pip install jinja2\n#  nginx version 1.13.8\nRUN wget http://nginx.org/download/nginx-1.13.8.tar.gz \\\n && tar -zxf nginx-1.13.8.tar.gz\n#  PCRE version 4.4 - 8.40\nRUN wget https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz \\\n && tar -zxf pcre-8.40.tar.gz\n#  zlib version 1.1.3 - 1.2.11\nRUN wget http://www.zlib.net/zlib-1.2.11.tar.gz \\\n && tar -zxf zlib-1.2.11.tar.gz\n#  OpenSSL version 1.0.2 - 1.1.0\nRUN wget https://www.openssl.org/source/openssl-1.1.0f.tar.gz \\\n && tar -zxf openssl-1.1.0f.tar.gz\n#  subs_filter\nRUN git clone git://github.com/yaoweibin/ngx_http_substitutions_filter_module.git\n#\n#  Configure nginx build\n#\nWORKDIR /root/nginx-1.13.8\nRUN ./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --user=www-data --group=www-data --with-http_sub_module --with-openssl=../openssl-1.1.0f --with-pcre=../pcre-8.40 --with-zlib=../zlib-1.2.11 --add-module=/root/ngx_http_substitutions_filter_module\n#\n#  Make and install nginx\n#\nRUN make\nRUN make install\n#\n#  Prepare and start nginx\n#\nWORKDIR /root/\nCOPY copied_file/pylon/src/* /root/\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\nCMD python render.py \\\n && cp nginx.conf /etc/nginx/nginx.conf \\\n && nginx -g \"daemon off;\"\n#\n#  END\n","injectedSmells":[],"originalDockerfileHash":"b294ae098d40f8437e95442bfcc4ec3e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (c) Microsoft Corporation\n#   All rights reserved.\n#\n#   MIT License\n#\n#   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n#   documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n#   the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n#   to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n#   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n#\n#   THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n#   BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n#   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n#   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n#\n#\n#   Copyright (c) Peking University 2018\n#\n#   The software is released under the Open-Intelligence Open Source License V1.0.\n#   The copyright owner promises to follow \"Open-Intelligence Open Source Platform\n#   Management Regulation V1.0\", which is provided by The New Generation of \n#   Artificial Intelligence Technology Innovation Strategic Alliance (the AITISA).\nFROM ubuntu:16.04\n#\n#   Preparation\n#\nWORKDIR /root/\nRUN apt-get update \\\n && apt-get install wget build-essential python python-pip git -y\nRUN pip install jinja2\n#   nginx version 1.13.8\nRUN wget http://nginx.org/download/nginx-1.13.8.tar.gz \\\n && tar -zxf nginx-1.13.8.tar.gz\n#   PCRE version 4.4 - 8.40\nRUN wget https://ftp.pcre.org/pub/pcre/pcre-8.40.tar.gz \\\n && tar -zxf pcre-8.40.tar.gz\n#   zlib version 1.1.3 - 1.2.11\nRUN wget http://www.zlib.net/zlib-1.2.11.tar.gz \\\n && tar -zxf zlib-1.2.11.tar.gz\n#   OpenSSL version 1.0.2 - 1.1.0\nRUN wget https://www.openssl.org/source/openssl-1.1.0f.tar.gz \\\n && tar -zxf openssl-1.1.0f.tar.gz\n#   subs_filter\nRUN git clone git://github.com/yaoweibin/ngx_http_substitutions_filter_module.git\n#\n#   Configure nginx build\n#\nWORKDIR /root/nginx-1.13.8\nRUN ./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --user=www-data --group=www-data --with-http_sub_module --with-openssl=../openssl-1.1.0f --with-pcre=../pcre-8.40 --with-zlib=../zlib-1.2.11 --add-module=/root/ngx_http_substitutions_filter_module\n#\n#   Make and install nginx\n#\nRUN make\nRUN make install\n#\n#   Prepare and start nginx\n#\nWORKDIR /root/\nCOPY copied_file/pylon/src/* /root/\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\nCMD python render.py \\\n && cp nginx.conf /etc/nginx/nginx.conf \\\n && nginx -g \"daemon off;\"\n#\n#   END\n","originalDockerfileUglifiedHash":"a506d9f041377ee295e184a96deafedc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0378c3f05e8f56ec20d69f940d023cf108576933.dockerfile"}