{"seed":3028928756,"processedDockerfileHash":"6a47c7ef81844dd1b2ad833c4caba2a9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7\nMAINTAINER \"Fabien Boucher\" <fabien.boucher@enovance.com>\nRUN yum -y install epel-release\nRUN yum -y install vim java-1.6.0-openjdk python git supervisor python-pip gcc python-devel httpd rsyslog unzip\nENV GERRIT_HOME=\"/opt/gerrit\"\nENV JENKINS_HOME=\"/var/lib/jenkins\"\nENV SITE_PATH=\"$GERRIT_HOME/site_path\"\nENV GERRIT_VERSION=\"2.8.6.1\"\nENV MYSQLJAVA_VERSION=\"5.1.21\"\nENV BCPROV_VERSION=\"1.49\"\nENV BCPROV_VERSION_T=\"149\"\nENV BCPROVJDK_VERSION=\"jdk15on\"\nENV BCPKIX_VERSION=\"$BCPROV_VERSION\"\nENV BCPKIXJDK_VERSION=\"$BCPROVJDK_VERSION\"\nENV GERRIT_URL=\"http://gerrit-releases.storage.googleapis.com/gerrit-${GERRIT_VERSION}.war\"\nENV MYSQLJAVA_URL=\"http://repo2.maven.org/maven2/mysql/mysql-connector-java/${MYSQLJAVA_VERSION}/mysql-connector-java-${MYSQLJAVA_VERSION}.jar\"\nENV BCPROVJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcprov-${BCPROVJDK_VERSION}/${BCPROV_VERSION}/bcprov-${BCPROVJDK_VERSION}-${BCPROV_VERSION}.jar\"\nENV BCPKIXJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcpkix-${BCPKIXJDK_VERSION}/${BCPKIX_VERSION}/bcpkix-${BCPKIXJDK_VERSION}-${BCPKIX_VERSION}.jar\"\nENV JENKINS_VERSION=\"1.580-1.1\"\nENV JENKINS_REPO=\"http://pkg.jenkins-ci.org/redhat/jenkins.repo\"\nENV JENKINS_REPO_KEY=\"http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\"\nENV JENKINS_REPO_PLUGINS=\"https://updates.jenkins-ci.org/download/plugins\"\nENV JENKINS_GEARMAN_PLUGIN=\"${JENKINS_REPO_PLUGINS}/gearman-plugin/0.1.1/gearman-plugin.hpi\"\nRUN mkdir -p $SITE_PATH\nRUN mkdir $SITE_PATH/lib\nRUN mkdir $SITE_PATH/etc\nRUN mkdir $SITE_PATH/bin\nRUN mkdir $SITE_PATH/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/gerrit.war $GERRIT_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/mysql-connector-java-$MYSQLJAVA_VERSION.jar $MYSQLJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcprov-$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPROVJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcpkix.$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPKIXJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /etc/yum.repos.d/jenkins.repo $JENKINS_REPO\nRUN rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\nRUN yum -y install jenkins-${JENKINS_VERSION}\nRUN mkdir -p $JENKINS_HOME/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $JENKINS_HOME/plugins/gearman-plugin.hpi $JENKINS_GEARMAN_PLUGIN\nRUN pip install virtualenv==20.21.0 nose==1.3.7 flake8==6.0.0 mock==5.0.1\nRUN mkdir /etc/zuul\nRUN mkdir /var/log/zuul\nRUN mkdir /var/lib/zuul\nRUN mkdir /var/www/zuul\nRUN git clone https://github.com/openstack-infra/zuul /tmp/zuul\nRUN pip install /tmp/zuul\nRUN cp -Rf /tmp/zuul/etc/status/public_html/* /var/www/zuul/\nRUN rm -Rf /tmp/zuul\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /var/www/zuul/fetch.sh https://raw.githubusercontent.com/openstack-infra/zuul/master/etc/status/fetch-dependencies.sh\nRUN sed -i \"s|public_html/||\" /var/www/zuul/fetch.sh\nRUN bash /var/www/zuul/fetch.sh\nRUN mkdir /etc/jenkins_jobs\nRUN mkdir /etc/jenkins_jobs/jobs\nRUN pip install jenkins-job-builder==5.0.1\nCOPY ./confs/gerrit.config $SITE_PATH/etc/gerrit.config\nRUN mkdir -p $JENKINS_HOME/plugins/users/jenkins/\nCOPY ./confs/gearman_config.xml $JENKINS_HOME/hudson.plugins.gearman.GearmanPluginConfig.xml\nCOPY ./confs/jenkins-config.xml $JENKINS_HOME/config.xml\nCOPY ./confs/jenkins-user.xml $JENKINS_HOME/users/jenkins/config.xml\nCOPY ./confs/jenkins.model.JenkinsLocationConfiguration.xml $JENKINS_HOME/jenkins.model.JenkinsLocationConfiguration.xml\nRUN chown -R jenkins:jenkins $JENKINS_HOME\nCOPY ./confs/zuul.conf /etc/zuul/zuul.conf\nCOPY ./confs/logging.conf /etc/zuul/logging.conf\nCOPY ./confs/merger-logging.conf /etc/zuul/merger-logging.conf\nCOPY ./confs/gearman-logging.conf /etc/zuul/gearman-logging.conf\nCOPY ./confs/layout.yaml /etc/zuul/layout.yaml\nCOPY ./confs/zuul_site.conf /etc/httpd/conf.d/zuul.conf\nCOPY ./confs/jenkins_jobs.ini /etc/jenkins_jobs/jenkins_jobs.ini\nCOPY ./confs/jjb.yaml /etc/jenkins_jobs/jobs/jjb.yaml\nCOPY ./confs/ssh_wrapper.sh /tmp/ssh_wrapper.sh\nCOPY ./confs/gerrit-post.sh /tmp/gerrit-post.sh\nRUN chmod +x /tmp/ssh_wrapper.sh /tmp/gerrit-post.sh\nCOPY ./confs/project.config /tmp/project.config\nCOPY ./supervisord.conf /etc/supervisord.conf\nCOPY ./start.sh /start.sh\nRUN chmod +x /start.sh\nRUN adduser gerrit\nRUN chown -R gerrit:gerrit $GERRIT_HOME\nEXPOSE 29418/tcp 8080/tcp 8081/tcp 80/tcp\nCMD [\"/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7\nMAINTAINER \"Fabien Boucher\" <fabien.boucher@enovance.com>\nRUN yum -y install epel-release\nRUN yum -y install vim java-1.6.0-openjdk python git supervisor python-pip gcc python-devel httpd rsyslog unzip\nENV GERRIT_HOME=\"/opt/gerrit\"\nENV JENKINS_HOME=\"/var/lib/jenkins\"\nENV SITE_PATH=\"$GERRIT_HOME/site_path\"\nENV GERRIT_VERSION=\"2.8.6.1\"\nENV MYSQLJAVA_VERSION=\"5.1.21\"\nENV BCPROV_VERSION=\"1.49\"\nENV BCPROV_VERSION_T=\"149\"\nENV BCPROVJDK_VERSION=\"jdk15on\"\nENV BCPKIX_VERSION=\"$BCPROV_VERSION\"\nENV BCPKIXJDK_VERSION=\"$BCPROVJDK_VERSION\"\nENV GERRIT_URL=\"http://gerrit-releases.storage.googleapis.com/gerrit-${GERRIT_VERSION}.war\"\nENV MYSQLJAVA_URL=\"http://repo2.maven.org/maven2/mysql/mysql-connector-java/${MYSQLJAVA_VERSION}/mysql-connector-java-${MYSQLJAVA_VERSION}.jar\"\nENV BCPROVJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcprov-${BCPROVJDK_VERSION}/${BCPROV_VERSION}/bcprov-${BCPROVJDK_VERSION}-${BCPROV_VERSION}.jar\"\nENV BCPKIXJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcpkix-${BCPKIXJDK_VERSION}/${BCPKIX_VERSION}/bcpkix-${BCPKIXJDK_VERSION}-${BCPKIX_VERSION}.jar\"\nENV JENKINS_VERSION=\"1.580-1.1\"\nENV JENKINS_REPO=\"http://pkg.jenkins-ci.org/redhat/jenkins.repo\"\nENV JENKINS_REPO_KEY=\"http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\"\nENV JENKINS_REPO_PLUGINS=\"https://updates.jenkins-ci.org/download/plugins\"\nENV JENKINS_GEARMAN_PLUGIN=\"${JENKINS_REPO_PLUGINS}/gearman-plugin/0.1.1/gearman-plugin.hpi\"\nRUN mkdir -p $SITE_PATH\nRUN mkdir $SITE_PATH/lib\nRUN mkdir $SITE_PATH/etc\nRUN mkdir $SITE_PATH/bin\nRUN mkdir $SITE_PATH/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/gerrit.war $GERRIT_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/mysql-connector-java-$MYSQLJAVA_VERSION.jar $MYSQLJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcprov-$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPROVJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcpkix.$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPKIXJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /etc/yum.repos.d/jenkins.repo $JENKINS_REPO\nRUN rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\nRUN yum -y install jenkins-${JENKINS_VERSION}\nRUN mkdir -p $JENKINS_HOME/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $JENKINS_HOME/plugins/gearman-plugin.hpi $JENKINS_GEARMAN_PLUGIN\nRUN pip install virtualenv nose flake8 mock\nRUN mkdir /etc/zuul\nRUN mkdir /var/log/zuul\nRUN mkdir /var/lib/zuul\nRUN mkdir /var/www/zuul\nRUN git clone https://github.com/openstack-infra/zuul /tmp/zuul\nRUN pip install /tmp/zuul\nRUN cp -Rf /tmp/zuul/etc/status/public_html/* /var/www/zuul/\nRUN rm -Rf /tmp/zuul\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /var/www/zuul/fetch.sh https://raw.githubusercontent.com/openstack-infra/zuul/master/etc/status/fetch-dependencies.sh\nRUN sed -i \"s|public_html/||\" /var/www/zuul/fetch.sh\nRUN bash /var/www/zuul/fetch.sh\nRUN mkdir /etc/jenkins_jobs\nRUN mkdir /etc/jenkins_jobs/jobs\nRUN pip install jenkins-job-builder\nADD ./confs/gerrit.config $SITE_PATH/etc/gerrit.config\nRUN mkdir -p $JENKINS_HOME/plugins/users/jenkins/\nADD ./confs/gearman_config.xml $JENKINS_HOME/hudson.plugins.gearman.GearmanPluginConfig.xml\nADD ./confs/jenkins-config.xml $JENKINS_HOME/config.xml\nADD ./confs/jenkins-user.xml $JENKINS_HOME/users/jenkins/config.xml\nADD ./confs/jenkins.model.JenkinsLocationConfiguration.xml $JENKINS_HOME/jenkins.model.JenkinsLocationConfiguration.xml\nRUN chown -R jenkins:jenkins $JENKINS_HOME\nADD ./confs/zuul.conf /etc/zuul/zuul.conf\nADD ./confs/logging.conf /etc/zuul/logging.conf\nADD ./confs/merger-logging.conf /etc/zuul/merger-logging.conf\nADD ./confs/gearman-logging.conf /etc/zuul/gearman-logging.conf\nADD ./confs/layout.yaml /etc/zuul/layout.yaml\nADD ./confs/zuul_site.conf /etc/httpd/conf.d/zuul.conf\nADD ./confs/jenkins_jobs.ini /etc/jenkins_jobs/jenkins_jobs.ini\nADD ./confs/jjb.yaml /etc/jenkins_jobs/jobs/jjb.yaml\nADD ./confs/ssh_wrapper.sh /tmp/ssh_wrapper.sh\nADD ./confs/gerrit-post.sh /tmp/gerrit-post.sh\nRUN chmod +x /tmp/ssh_wrapper.sh /tmp/gerrit-post.sh\nADD ./confs/project.config /tmp/project.config\nADD ./supervisord.conf /etc/supervisord.conf\nADD ./start.sh /start.sh\nRUN chmod +x /start.sh\nRUN adduser gerrit\nRUN chown -R gerrit:gerrit $GERRIT_HOME\nEXPOSE 29418/tcp 8080/tcp 8081/tcp 80/tcp\nCMD [\"/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"4ea8c1794c22b3fa7db2358bb489c8f4","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7\nMAINTAINER \"Fabien Boucher\" <fabien.boucher@enovance.com>\nRUN yum -y install epel-release\nRUN yum -y install vim java-1.6.0-openjdk python git supervisor python-pip gcc python-devel httpd rsyslog unzip\nENV GERRIT_HOME=\"/opt/gerrit\"\nENV JENKINS_HOME=\"/var/lib/jenkins\"\nENV SITE_PATH=\"$GERRIT_HOME/site_path\"\nENV GERRIT_VERSION=\"2.8.6.1\"\nENV MYSQLJAVA_VERSION=\"5.1.21\"\nENV BCPROV_VERSION=\"1.49\"\nENV BCPROV_VERSION_T=\"149\"\nENV BCPROVJDK_VERSION=\"jdk15on\"\nENV BCPKIX_VERSION=\"$BCPROV_VERSION\"\nENV BCPKIXJDK_VERSION=\"$BCPROVJDK_VERSION\"\nENV GERRIT_URL=\"http://gerrit-releases.storage.googleapis.com/gerrit-${GERRIT_VERSION}.war\"\nENV MYSQLJAVA_URL=\"http://repo2.maven.org/maven2/mysql/mysql-connector-java/${MYSQLJAVA_VERSION}/mysql-connector-java-${MYSQLJAVA_VERSION}.jar\"\nENV BCPROVJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcprov-${BCPROVJDK_VERSION}/${BCPROV_VERSION}/bcprov-${BCPROVJDK_VERSION}-${BCPROV_VERSION}.jar\"\nENV BCPKIXJAVA_URL=\"http://central.maven.org/maven2/org/bouncycastle/bcpkix-${BCPKIXJDK_VERSION}/${BCPKIX_VERSION}/bcpkix-${BCPKIXJDK_VERSION}-${BCPKIX_VERSION}.jar\"\nENV JENKINS_VERSION=\"1.580-1.1\"\nENV JENKINS_REPO=\"http://pkg.jenkins-ci.org/redhat/jenkins.repo\"\nENV JENKINS_REPO_KEY=\"http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\"\nENV JENKINS_REPO_PLUGINS=\"https://updates.jenkins-ci.org/download/plugins\"\nENV JENKINS_GEARMAN_PLUGIN=\"${JENKINS_REPO_PLUGINS}/gearman-plugin/0.1.1/gearman-plugin.hpi\"\nRUN mkdir -p $SITE_PATH\nRUN mkdir $SITE_PATH/lib\nRUN mkdir $SITE_PATH/etc\nRUN mkdir $SITE_PATH/bin\nRUN mkdir $SITE_PATH/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/gerrit.war $GERRIT_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/mysql-connector-java-$MYSQLJAVA_VERSION.jar $MYSQLJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcprov-$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPROVJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $SITE_PATH/lib/bcpkix.$BCPROVJDK_VERSION-$BCPROV_VERSION_T.jar $BCPKIXJAVA_URL\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /etc/yum.repos.d/jenkins.repo $JENKINS_REPO\nRUN rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\nRUN yum -y install jenkins-${JENKINS_VERSION}\nRUN mkdir -p $JENKINS_HOME/plugins\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o $JENKINS_HOME/plugins/gearman-plugin.hpi $JENKINS_GEARMAN_PLUGIN\nRUN pip install virtualenv nose flake8 mock\nRUN mkdir /etc/zuul\nRUN mkdir /var/log/zuul\nRUN mkdir /var/lib/zuul\nRUN mkdir /var/www/zuul\nRUN git clone https://github.com/openstack-infra/zuul /tmp/zuul\nRUN pip install /tmp/zuul\nRUN cp -Rf /tmp/zuul/etc/status/public_html/* /var/www/zuul/\nRUN rm -Rf /tmp/zuul\nRUN curl --silent --show-error --retry 12 --retry-delay 10 -L -o /var/www/zuul/fetch.sh https://raw.githubusercontent.com/openstack-infra/zuul/master/etc/status/fetch-dependencies.sh\nRUN sed -i \"s|public_html/||\" /var/www/zuul/fetch.sh\nRUN bash /var/www/zuul/fetch.sh\nRUN mkdir /etc/jenkins_jobs\nRUN mkdir /etc/jenkins_jobs/jobs\nRUN pip install jenkins-job-builder\nADD ./confs/gerrit.config $SITE_PATH/etc/gerrit.config\nRUN mkdir -p $JENKINS_HOME/plugins/users/jenkins/\nADD ./confs/gearman_config.xml $JENKINS_HOME/hudson.plugins.gearman.GearmanPluginConfig.xml\nADD ./confs/jenkins-config.xml $JENKINS_HOME/config.xml\nADD ./confs/jenkins-user.xml $JENKINS_HOME/users/jenkins/config.xml\nADD ./confs/jenkins.model.JenkinsLocationConfiguration.xml $JENKINS_HOME/jenkins.model.JenkinsLocationConfiguration.xml\nRUN chown -R jenkins:jenkins $JENKINS_HOME\nADD ./confs/zuul.conf /etc/zuul/zuul.conf\nADD ./confs/logging.conf /etc/zuul/logging.conf\nADD ./confs/merger-logging.conf /etc/zuul/merger-logging.conf\nADD ./confs/gearman-logging.conf /etc/zuul/gearman-logging.conf\nADD ./confs/layout.yaml /etc/zuul/layout.yaml\nADD ./confs/zuul_site.conf /etc/httpd/conf.d/zuul.conf\nADD ./confs/jenkins_jobs.ini /etc/jenkins_jobs/jenkins_jobs.ini\nADD ./confs/jjb.yaml /etc/jenkins_jobs/jobs/jjb.yaml\nADD ./confs/ssh_wrapper.sh /tmp/ssh_wrapper.sh\nADD ./confs/gerrit-post.sh /tmp/gerrit-post.sh\nRUN chmod +x /tmp/ssh_wrapper.sh /tmp/gerrit-post.sh\nADD ./confs/project.config /tmp/project.config\nADD ./supervisord.conf /etc/supervisord.conf\nADD ./start.sh /start.sh\nRUN chmod +x /start.sh\nRUN adduser gerrit\nRUN chown -R gerrit:gerrit $GERRIT_HOME\nEXPOSE 29418/tcp 8080/tcp 8081/tcp 80/tcp\nCMD [\"/start.sh\"]\n","originalDockerfileUglifiedHash":"4ea8c1794c22b3fa7db2358bb489c8f4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/06f564ea8fa1f3115f087918044e701cc2a32f8d.dockerfile"}