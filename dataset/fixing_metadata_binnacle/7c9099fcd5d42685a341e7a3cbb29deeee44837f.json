{"seed":424590448,"processedDockerfileHash":"db43647d32ad8b71efb58e9846898dde","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.9\nMAINTAINER Rich Braun \"docker@instantlinux.net\"\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.license=\"GPL-3.0\" \\\n      org.label-schema.name=\"weewx\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/instantlinux/docker-tools\"\nENV ALTITUDE=\"100, foot\" \\\n    LATITUDE=\"50.00\" \\\n    LONGITUDE=\"-80.00\" \\\n    DB_BINDING_SUFFIX=\"mysql\" \\\n    DB_DRIVER=\"weedb.mysql\" \\\n    DB_HOST=\"db\" \\\n    DB_NAME=\"weewx_a\" \\\n    DB_NAME_FORECAST=\"weewx_f\" \\\n    DB_USER=\"weewx\" \\\n    DEBUG=\"0\" \\\n    DEVICE_PORT=\"/dev/ttyUSB0\" \\\n    HTML_ROOT=\"/var/www/weewx\" \\\n    LOCATION=\"Anytown, USA\" \\\n    LOGGING_INTERVAL=\"300\" \\\n    RAIN_YEAR_START=\"7\" \\\n    RAPIDFIRE=\"True\" \\\n    RSYNC_HOST=\"web01\" \\\n    RSYNC_PORT=\"22\" \\\n    RSYNC_DEST=\"/usr/share/nginx/html\" \\\n    RSYNC_USER=\"wx\" \\\n    SKIN=\"Standard\" \\\n    STATION_ID=\"unset\" \\\n    STATION_TYPE=\"Vantage\" \\\n    SYSLOG_DEST=\"/var/log/messages\" \\\n    TZ=\"US/Eastern\" \\\n    TZ_CODE=\"10\" \\\n    WEEK_START=\"6\" \\\n    WX_USER=\"weewx\" \\\n    XTIDE_LOCATION=\"unset\"\nARG PYTHON_PIP_VERSION=19.0.3\nARG FORECAST_VERSION=3.3.2\nARG GETPIP_URI=https://bootstrap.pypa.io/3.3/get-pip.py\nARG HARMONICS_VERSION=20161231\nARG LIBTCD_VERSION=2.2.7-r2\nARG WEEWX_VERSION=3.9.1\nARG XTIDE_VERSION=2.15.1\nARG FORECAST_SHA=8e063e8c2c47d2232c84d5c0b2891a67e4634b2a4f17c7867f482e6db3310d53\nARG GETPIP_SHA=dc84268cc3271fc05d0638dc8a50e49a1450c73abbf67cb12ff1dc1e1a9b3a66\nARG HARMONICS_SHA=7e5da40c19fd4f5d0897d6a7f68bc4b66a3eb7c3852135c8a6c4c56b82c01cdd\nARG LIBTCD_SHA=aff1f218b84106c572d094912cd11c828e1ea212db5661cdcc0e2e6253020a94\nARG WEEWX_SHA=b56a0926f6c0f522a3707eeb90912e0a5e21bc0a97c017289416c7846d6c19dc\nARG WX_GROUP=dialout\nARG WX_UID=2071\nARG XTIDE_SHA=e5c4afbb17269fdde296e853f2cb84845ed1c1bb1932f780047ad71d623bc681\nCOPY install-input.txt requirements/ /root/\nRUN apk add curl=7.64.0-r5 freetype=2.9.1-r3 libjpeg=8-r6 libstdc++=8.3.0-r0 openssh=7.9_p1-r6 openssl=1.1.1k-r0 python2=2.7.18-r0 py-configobj=5.0.6-r3 py-mysqldb=1.2.5-r1 rsync=3.1.3-r1 rsyslog=8.40.0-r4 --no-cache --update \\\n && adduser -u $WX_UID -s /bin/sh -G $WX_GROUP -D $WX_USER \\\n && mkdir -p /usr/share/xtide /build/libtcd /build/xtide \\\n && cd build \\\n && curl -sLo get-pip.py $GETPIP_URI \\\n && curl -sLo harmonics.tar.bz2 ftp://ftp.flaterco.com/xtide/harmonics-dwf-$HARMONICS_VERSION-free.tar.bz2 \\\n && curl -sLo libtcd.tar.bz2 ftp://ftp.flaterco.com/xtide/libtcd-$LIBTCD_VERSION.tar.bz2 \\\n && curl -sLo weewx.tar.gz http://www.weewx.com/downloads/released_versions/weewx-$WEEWX_VERSION.tar.gz \\\n && curl -sLo weewx-forecast.tgz http://lancet.mit.edu/mwall/projects/weather/releases/weewx-forecast-$FORECAST_VERSION.tgz \\\n && curl -sLo xtide.tar.bz2 ftp://ftp.flaterco.com/xtide/xtide-$XTIDE_VERSION.tar.bz2 \\\n && echo \"$FORECAST_SHA weewx-forecast.tgz\" >> /build/checksums \\\n && echo \"$HARMONICS_SHA harmonics.tar.bz2\" >> /build/checksums \\\n && echo \"$GETPIP_SHA get-pip.py\" >> /build/checksums \\\n && echo \"$LIBTCD_SHA libtcd.tar.bz2\" >> /build/checksums \\\n && echo \"$WEEWX_SHA weewx.tar.gz\" >> /build/checksums \\\n && echo \"$XTIDE_SHA xtide.tar.bz2\" >> /build/checksums \\\n && sha256sum -c /build/checksums \\\n && python get-pip.py --disable-pip-version-check --no-cache-dir pip==$PYTHON_PIP_VERSION \\\n && pip --version \\\n && apk add file=5.36-r1 freetype-dev=2.9.1-r3 g++=8.3.0-r0 gawk=4.2.1-r0 gcc=8.3.0-r0 git=2.20.4-r0 jpeg-dev=8-r6 libpng-dev=1.6.37-r0 make=4.2.1-r2 musl-dev=1.1.20-r6 python2-dev=2.7.18-r0 zlib-dev=1.2.11-r1 --no-cache --virtual .fetch-deps \\\n && pip install --target /usr/lib/python2.7/site-packages -r /root/amd64.txt \\\n && tar xf weewx.tar.gz --strip-components=1 \\\n && ./setup.py build \\\n && ./setup.py install < /root/install-input.txt \\\n && git clone -b master --depth 1 https://github.com/instantlinux/weewx-WeeGreen.git /home/$WX_USER/skins/WeeGreen \\\n && /home/$WX_USER/bin/wee_extension --install /build/weewx-forecast.tgz \\\n && cd /build/libtcd \\\n && tar xf /build/libtcd.tar.bz2 --strip-components=1 \\\n && ./configure \\\n && make install \\\n && cd /build/xtide \\\n && tar xf /build/xtide.tar.bz2 --strip-components=1 \\\n && ./configure --prefix=/usr \\\n && make install \\\n && cd /build \\\n && tar xf harmonics.tar.bz2 --strip-components=1 \\\n && mv harmonics*.tcd /usr/share/xtide/harmonics.tcd \\\n && echo /usr/share/xtide > /etc/xtide.conf \\\n && apk del .fetch-deps \\\n && rm -fr /build /home/$WX_USER/weewx.conf.2* /home/$WX_USER/docs /home/$WX_USER/skins/WeeGreen/.git /root/.cache /var/cache/apk/* /var/log/* \\\n && find /home/$WX_USER/bin -name '*.pyc' -exec rm '{}' +\nCOPY entrypoint.sh /usr/local/bin\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.9\nMAINTAINER Rich Braun \"docker@instantlinux.net\"\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.license=\"GPL-3.0\" \\\n      org.label-schema.name=\"weewx\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/instantlinux/docker-tools\"\nENV ALTITUDE=\"100, foot\" \\\n    LATITUDE=\"50.00\" \\\n    LONGITUDE=\"-80.00\" \\\n    DB_BINDING_SUFFIX=\"mysql\" \\\n    DB_DRIVER=\"weedb.mysql\" \\\n    DB_HOST=\"db\" \\\n    DB_NAME=\"weewx_a\" \\\n    DB_NAME_FORECAST=\"weewx_f\" \\\n    DB_USER=\"weewx\" \\\n    DEBUG=\"0\" \\\n    DEVICE_PORT=\"/dev/ttyUSB0\" \\\n    HTML_ROOT=\"/var/www/weewx\" \\\n    LOCATION=\"Anytown, USA\" \\\n    LOGGING_INTERVAL=\"300\" \\\n    RAIN_YEAR_START=\"7\" \\\n    RAPIDFIRE=\"True\" \\\n    RSYNC_HOST=\"web01\" \\\n    RSYNC_PORT=\"22\" \\\n    RSYNC_DEST=\"/usr/share/nginx/html\" \\\n    RSYNC_USER=\"wx\" \\\n    SKIN=\"Standard\" \\\n    STATION_ID=\"unset\" \\\n    STATION_TYPE=\"Vantage\" \\\n    SYSLOG_DEST=\"/var/log/messages\" \\\n    TZ=\"US/Eastern\" \\\n    TZ_CODE=\"10\" \\\n    WEEK_START=\"6\" \\\n    WX_USER=\"weewx\" \\\n    XTIDE_LOCATION=\"unset\"\nARG PYTHON_PIP_VERSION=19.0.3\nARG FORECAST_VERSION=3.3.2\nARG GETPIP_URI=https://bootstrap.pypa.io/3.3/get-pip.py\nARG HARMONICS_VERSION=20161231\nARG LIBTCD_VERSION=2.2.7-r2\nARG WEEWX_VERSION=3.9.1\nARG XTIDE_VERSION=2.15.1\nARG FORECAST_SHA=8e063e8c2c47d2232c84d5c0b2891a67e4634b2a4f17c7867f482e6db3310d53\nARG GETPIP_SHA=dc84268cc3271fc05d0638dc8a50e49a1450c73abbf67cb12ff1dc1e1a9b3a66\nARG HARMONICS_SHA=7e5da40c19fd4f5d0897d6a7f68bc4b66a3eb7c3852135c8a6c4c56b82c01cdd\nARG LIBTCD_SHA=aff1f218b84106c572d094912cd11c828e1ea212db5661cdcc0e2e6253020a94\nARG WEEWX_SHA=b56a0926f6c0f522a3707eeb90912e0a5e21bc0a97c017289416c7846d6c19dc\nARG WX_GROUP=dialout\nARG WX_UID=2071\nARG XTIDE_SHA=e5c4afbb17269fdde296e853f2cb84845ed1c1bb1932f780047ad71d623bc681\nCOPY install-input.txt requirements/ /root/\nRUN apk add --no-cache --update curl freetype libjpeg libstdc++ openssh openssl python2 py-configobj py-mysqldb rsync rsyslog \\\n && adduser -u $WX_UID -s /bin/sh -G $WX_GROUP -D $WX_USER \\\n && mkdir -p /usr/share/xtide /build/libtcd /build/xtide \\\n && cd build \\\n && curl -sLo get-pip.py $GETPIP_URI \\\n && curl -sLo harmonics.tar.bz2 ftp://ftp.flaterco.com/xtide/harmonics-dwf-$HARMONICS_VERSION-free.tar.bz2 \\\n && curl -sLo libtcd.tar.bz2 ftp://ftp.flaterco.com/xtide/libtcd-$LIBTCD_VERSION.tar.bz2 \\\n && curl -sLo weewx.tar.gz http://www.weewx.com/downloads/released_versions/weewx-$WEEWX_VERSION.tar.gz \\\n && curl -sLo weewx-forecast.tgz http://lancet.mit.edu/mwall/projects/weather/releases/weewx-forecast-$FORECAST_VERSION.tgz \\\n && curl -sLo xtide.tar.bz2 ftp://ftp.flaterco.com/xtide/xtide-$XTIDE_VERSION.tar.bz2 \\\n && echo \"$FORECAST_SHA weewx-forecast.tgz\" >> /build/checksums \\\n && echo \"$HARMONICS_SHA harmonics.tar.bz2\" >> /build/checksums \\\n && echo \"$GETPIP_SHA get-pip.py\" >> /build/checksums \\\n && echo \"$LIBTCD_SHA libtcd.tar.bz2\" >> /build/checksums \\\n && echo \"$WEEWX_SHA weewx.tar.gz\" >> /build/checksums \\\n && echo \"$XTIDE_SHA xtide.tar.bz2\" >> /build/checksums \\\n && sha256sum -c /build/checksums \\\n && python get-pip.py --disable-pip-version-check --no-cache-dir pip==$PYTHON_PIP_VERSION \\\n && pip --version \\\n && apk add --no-cache --virtual .fetch-deps file freetype-dev g++ gawk gcc git jpeg-dev libpng-dev make musl-dev python2-dev zlib-dev \\\n && pip install --target /usr/lib/python2.7/site-packages -r /root/amd64.txt \\\n && tar xf weewx.tar.gz --strip-components=1 \\\n && ./setup.py build \\\n && ./setup.py install < /root/install-input.txt \\\n && git clone -b master --depth 1 https://github.com/instantlinux/weewx-WeeGreen.git /home/$WX_USER/skins/WeeGreen \\\n && /home/$WX_USER/bin/wee_extension --install /build/weewx-forecast.tgz \\\n && cd /build/libtcd \\\n && tar xf /build/libtcd.tar.bz2 --strip-components=1 \\\n && ./configure \\\n && make install \\\n && cd /build/xtide \\\n && tar xf /build/xtide.tar.bz2 --strip-components=1 \\\n && ./configure --prefix=/usr \\\n && make install \\\n && cd /build \\\n && tar xf harmonics.tar.bz2 --strip-components=1 \\\n && mv harmonics*.tcd /usr/share/xtide/harmonics.tcd \\\n && echo /usr/share/xtide > /etc/xtide.conf \\\n && apk del .fetch-deps \\\n && rm -fr /build /home/$WX_USER/weewx.conf.2* /home/$WX_USER/docs /home/$WX_USER/skins/WeeGreen/.git /root/.cache /var/cache/apk/* /var/log/* \\\n && find /home/$WX_USER/bin -name '*.pyc' -exec rm '{}' +\nCOPY entrypoint.sh /usr/local/bin\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"02b5a6f7c872fdab203512cd194ebc70","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.9\nMAINTAINER Rich Braun \"docker@instantlinux.net\"\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.license=\"GPL-3.0\" \\\n      org.label-schema.name=\"weewx\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/instantlinux/docker-tools\"\nENV ALTITUDE=\"100, foot\" \\\n    LATITUDE=\"50.00\" \\\n    LONGITUDE=\"-80.00\" \\\n    DB_BINDING_SUFFIX=\"mysql\" \\\n    DB_DRIVER=\"weedb.mysql\" \\\n    DB_HOST=\"db\" \\\n    DB_NAME=\"weewx_a\" \\\n    DB_NAME_FORECAST=\"weewx_f\" \\\n    DB_USER=\"weewx\" \\\n    DEBUG=\"0\" \\\n    DEVICE_PORT=\"/dev/ttyUSB0\" \\\n    HTML_ROOT=\"/var/www/weewx\" \\\n    LOCATION=\"Anytown, USA\" \\\n    LOGGING_INTERVAL=\"300\" \\\n    RAIN_YEAR_START=\"7\" \\\n    RAPIDFIRE=\"True\" \\\n    RSYNC_HOST=\"web01\" \\\n    RSYNC_PORT=\"22\" \\\n    RSYNC_DEST=\"/usr/share/nginx/html\" \\\n    RSYNC_USER=\"wx\" \\\n    SKIN=\"Standard\" \\\n    STATION_ID=\"unset\" \\\n    STATION_TYPE=\"Vantage\" \\\n    SYSLOG_DEST=\"/var/log/messages\" \\\n    TZ=\"US/Eastern\" \\\n    TZ_CODE=\"10\" \\\n    WEEK_START=\"6\" \\\n    WX_USER=\"weewx\" \\\n    XTIDE_LOCATION=\"unset\"\nARG PYTHON_PIP_VERSION=19.0.3\nARG FORECAST_VERSION=3.3.2\nARG GETPIP_URI=https://bootstrap.pypa.io/3.3/get-pip.py\nARG HARMONICS_VERSION=20161231\nARG LIBTCD_VERSION=2.2.7-r2\nARG WEEWX_VERSION=3.9.1\nARG XTIDE_VERSION=2.15.1\nARG FORECAST_SHA=8e063e8c2c47d2232c84d5c0b2891a67e4634b2a4f17c7867f482e6db3310d53\nARG GETPIP_SHA=dc84268cc3271fc05d0638dc8a50e49a1450c73abbf67cb12ff1dc1e1a9b3a66\nARG HARMONICS_SHA=7e5da40c19fd4f5d0897d6a7f68bc4b66a3eb7c3852135c8a6c4c56b82c01cdd\nARG LIBTCD_SHA=aff1f218b84106c572d094912cd11c828e1ea212db5661cdcc0e2e6253020a94\nARG WEEWX_SHA=b56a0926f6c0f522a3707eeb90912e0a5e21bc0a97c017289416c7846d6c19dc\nARG WX_GROUP=dialout\nARG WX_UID=2071\nARG XTIDE_SHA=e5c4afbb17269fdde296e853f2cb84845ed1c1bb1932f780047ad71d623bc681\nCOPY install-input.txt requirements/ /root/\nRUN apk add --no-cache --update curl freetype libjpeg libstdc++ openssh openssl python2 py-configobj py-mysqldb rsync rsyslog \\\n && adduser -u $WX_UID -s /bin/sh -G $WX_GROUP -D $WX_USER \\\n && mkdir -p /usr/share/xtide /build/libtcd /build/xtide \\\n && cd build \\\n && curl -sLo get-pip.py $GETPIP_URI \\\n && curl -sLo harmonics.tar.bz2 ftp://ftp.flaterco.com/xtide/harmonics-dwf-$HARMONICS_VERSION-free.tar.bz2 \\\n && curl -sLo libtcd.tar.bz2 ftp://ftp.flaterco.com/xtide/libtcd-$LIBTCD_VERSION.tar.bz2 \\\n && curl -sLo weewx.tar.gz http://www.weewx.com/downloads/released_versions/weewx-$WEEWX_VERSION.tar.gz \\\n && curl -sLo weewx-forecast.tgz http://lancet.mit.edu/mwall/projects/weather/releases/weewx-forecast-$FORECAST_VERSION.tgz \\\n && curl -sLo xtide.tar.bz2 ftp://ftp.flaterco.com/xtide/xtide-$XTIDE_VERSION.tar.bz2 \\\n && echo \"$FORECAST_SHA weewx-forecast.tgz\" >> /build/checksums \\\n && echo \"$HARMONICS_SHA harmonics.tar.bz2\" >> /build/checksums \\\n && echo \"$GETPIP_SHA get-pip.py\" >> /build/checksums \\\n && echo \"$LIBTCD_SHA libtcd.tar.bz2\" >> /build/checksums \\\n && echo \"$WEEWX_SHA weewx.tar.gz\" >> /build/checksums \\\n && echo \"$XTIDE_SHA xtide.tar.bz2\" >> /build/checksums \\\n && sha256sum -c /build/checksums \\\n && python get-pip.py --disable-pip-version-check --no-cache-dir pip==$PYTHON_PIP_VERSION \\\n && pip --version \\\n && apk add --no-cache --virtual .fetch-deps file freetype-dev g++ gawk gcc git jpeg-dev libpng-dev make musl-dev python2-dev zlib-dev \\\n && pip install --target /usr/lib/python2.7/site-packages -r /root/amd64.txt \\\n && tar xf weewx.tar.gz --strip-components=1 \\\n && ./setup.py build \\\n && ./setup.py install < /root/install-input.txt \\\n && git clone -b master --depth 1 https://github.com/instantlinux/weewx-WeeGreen.git /home/$WX_USER/skins/WeeGreen \\\n && /home/$WX_USER/bin/wee_extension --install /build/weewx-forecast.tgz \\\n && cd /build/libtcd \\\n && tar xf /build/libtcd.tar.bz2 --strip-components=1 \\\n && ./configure \\\n && make install \\\n && cd /build/xtide \\\n && tar xf /build/xtide.tar.bz2 --strip-components=1 \\\n && ./configure --prefix=/usr \\\n && make install \\\n && cd /build \\\n && tar xf harmonics.tar.bz2 --strip-components=1 \\\n && mv harmonics*.tcd /usr/share/xtide/harmonics.tcd \\\n && echo /usr/share/xtide > /etc/xtide.conf \\\n && apk del .fetch-deps \\\n && rm -fr /build /home/$WX_USER/weewx.conf.2* /home/$WX_USER/docs /home/$WX_USER/skins/WeeGreen/.git /root/.cache /var/cache/apk/* /var/log/* \\\n && find /home/$WX_USER/bin -name '*.pyc' -exec rm '{}' +\nCOPY entrypoint.sh /usr/local/bin\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"02b5a6f7c872fdab203512cd194ebc70","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7c9099fcd5d42685a341e7a3cbb29deeee44837f.dockerfile"}