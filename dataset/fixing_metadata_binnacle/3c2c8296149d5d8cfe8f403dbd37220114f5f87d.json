{"seed":1740584797,"processedDockerfileHash":"23b8e46f044c0eea2b033f717a896d35","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Auto-generated via Ansible: edit build/ansible/DOCKERFILES/Dockerfile-base.j2 instead.\nFROM php:5.5-fpm\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>\n#  ##\n#  ## Labels\n#  ##\nLABEL name=\"cytopia's PHP-FPM 5.5 Image\" \\\n      image=\"devilbox/php-fpm\" \\\n      tag=\"5.5-base\" \\\n      vendor=\"devilbox\" \\\n      license=\"MIT\"\n#  ##\n#  ## Envs\n#  ##\nENV MY_USER=\"devilbox\" \\\n    MY_GROUP=\"devilbox\" \\\n    MY_UID=\"1000\" \\\n    MY_GID=\"1000\" \\\n    PHP_VERSION=\"5.5\"\n#  ##\n#  ## User/Group\n#  ##\nRUN set -x \\\n && groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && useradd -u ${MY_UID} -m -s /bin/bash -g ${MY_GROUP} ${MY_USER}\n#  ##\n#  ## Upgrade (install ps)\n#  ##\nRUN set -x \\\n && rm -f /etc/apt/sources.list \\\n && { echo \"deb http://ftp.debian.org/debian jessie main\" ;echo \"#deb http://ftp.debian.org/debian jessie-updates main\" ;echo \"deb http://security.debian.org/debian-security jessie/updates main\" ; } | tee /etc/apt/sources.list\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update -qq \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -qq -y --no-install-recommends --no-install-suggests procps \\\n && rm -rf /var/lib/apt/lists/*\n#  ##\n#  ## Configure\n#  ##\nRUN set -x \\\n && rm -rf /usr/local/etc/php-fpm.d \\\n && mkdir -p /usr/local/etc/php-fpm.d \\\n && mkdir -p /var/lib/php/session \\\n && mkdir -p /var/lib/php/wsdlcache \\\n && chown -R devilbox:devilbox /var/lib/php/session \\\n && chown -R devilbox:devilbox /var/lib/php/wsdlcache\n#  ##\n#  ## Copy files\n#  ##\nCOPY ./data/php-ini.d/php-5.5.ini /usr/local/etc/php/conf.d/xxx-devilbox-default-php.ini\nCOPY ./data/php-fpm.conf/php-fpm-5.5.conf /usr/local/etc/php-fpm.conf\nCOPY ./data/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY ./data/docker-entrypoint.d /docker-entrypoint.d\n#  ##\n#  ## Verify\n#  ##\nRUN set -x \\\n && echo \"date.timezone=UTC\" > /usr/local/etc/php/php.ini \\\n && php -v | grep -oE 'PHP\\s[.0-9]+' | grep -oE '[.0-9]+' | grep '^5.5' \\\n && /usr/local/sbin/php-fpm --test \\\n && PHP_ERROR=\"$( php -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_ERROR=\"$( php -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && rm -f /usr/local/etc/php/php.ini\n#  ##\n#  ## Ports\n#  ##\nEXPOSE 9000/tcp\n#  ##\n#  ## Entrypoint\n#  ##\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"#  Auto-generated via Ansible: edit build/ansible/DOCKERFILES/Dockerfile-base.j2 instead.\nFROM php:5.5-fpm\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>\n# ##\n# ## Labels\n# ##\nLABEL name=\"cytopia's PHP-FPM 5.5 Image\" \\\n      image=\"devilbox/php-fpm\" \\\n      tag=\"5.5-base\" \\\n      vendor=\"devilbox\" \\\n      license=\"MIT\"\n# ##\n# ## Envs\n# ##\nENV MY_USER=\"devilbox\" \\\n    MY_GROUP=\"devilbox\" \\\n    MY_UID=\"1000\" \\\n    MY_GID=\"1000\" \\\n    PHP_VERSION=\"5.5\"\n# ##\n# ## User/Group\n# ##\nRUN set -x \\\n && groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && useradd -u ${MY_UID} -m -s /bin/bash -g ${MY_GROUP} ${MY_USER}\n# ##\n# ## Upgrade (install ps)\n# ##\nRUN set -x \\\n && rm -f /etc/apt/sources.list \\\n && { echo \"deb http://ftp.debian.org/debian jessie main\" ;echo \"#deb http://ftp.debian.org/debian jessie-updates main\" ;echo \"deb http://security.debian.org/debian-security jessie/updates main\" ; } | tee /etc/apt/sources.list\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update -qq \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -qq -y --no-install-recommends --no-install-suggests procps \\\n && rm -rf /var/lib/apt/lists/*\n# ##\n# ## Configure\n# ##\nRUN set -x \\\n && rm -rf /usr/local/etc/php-fpm.d \\\n && mkdir -p /usr/local/etc/php-fpm.d \\\n && mkdir -p /var/lib/php/session \\\n && mkdir -p /var/lib/php/wsdlcache \\\n && chown -R devilbox:devilbox /var/lib/php/session \\\n && chown -R devilbox:devilbox /var/lib/php/wsdlcache\n# ##\n# ## Copy files\n# ##\nCOPY ./data/php-ini.d/php-5.5.ini /usr/local/etc/php/conf.d/xxx-devilbox-default-php.ini\nCOPY ./data/php-fpm.conf/php-fpm-5.5.conf /usr/local/etc/php-fpm.conf\nCOPY ./data/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY ./data/docker-entrypoint.d /docker-entrypoint.d\n# ##\n# ## Verify\n# ##\nRUN set -x \\\n && echo \"date.timezone=UTC\" > /usr/local/etc/php/php.ini \\\n && php -v | grep -oE 'PHP\\s[.0-9]+' | grep -oE '[.0-9]+' | grep '^5.5' \\\n && /usr/local/sbin/php-fpm --test \\\n && PHP_ERROR=\"$( php -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_ERROR=\"$( php -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && rm -f /usr/local/etc/php/php.ini\n# ##\n# ## Ports\n# ##\nEXPOSE 9000/tcp\n# ##\n# ## Entrypoint\n# ##\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"de24b9dd945efac16579a3b667bf375d","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Auto-generated via Ansible: edit build/ansible/DOCKERFILES/Dockerfile-base.j2 instead.\nFROM php:5.5-fpm\nMAINTAINER \"cytopia\" <cytopia@everythingcli.org>\n#  ##\n#  ## Labels\n#  ##\nLABEL name=\"cytopia's PHP-FPM 5.5 Image\" \\\n      image=\"devilbox/php-fpm\" \\\n      tag=\"5.5-base\" \\\n      vendor=\"devilbox\" \\\n      license=\"MIT\"\n#  ##\n#  ## Envs\n#  ##\nENV MY_USER=\"devilbox\" \\\n    MY_GROUP=\"devilbox\" \\\n    MY_UID=\"1000\" \\\n    MY_GID=\"1000\" \\\n    PHP_VERSION=\"5.5\"\n#  ##\n#  ## User/Group\n#  ##\nRUN set -x \\\n && groupadd -g ${MY_GID} -r ${MY_GROUP} \\\n && useradd -u ${MY_UID} -m -s /bin/bash -g ${MY_GROUP} ${MY_USER}\n#  ##\n#  ## Upgrade (install ps)\n#  ##\nRUN set -x \\\n && rm -f /etc/apt/sources.list \\\n && { echo \"deb http://ftp.debian.org/debian jessie main\" ;echo \"#deb http://ftp.debian.org/debian jessie-updates main\" ;echo \"deb http://security.debian.org/debian-security jessie/updates main\" ; } | tee /etc/apt/sources.list\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update -qq \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -qq -y --no-install-recommends --no-install-suggests procps \\\n && rm -rf /var/lib/apt/lists/*\n#  ##\n#  ## Configure\n#  ##\nRUN set -x \\\n && rm -rf /usr/local/etc/php-fpm.d \\\n && mkdir -p /usr/local/etc/php-fpm.d \\\n && mkdir -p /var/lib/php/session \\\n && mkdir -p /var/lib/php/wsdlcache \\\n && chown -R devilbox:devilbox /var/lib/php/session \\\n && chown -R devilbox:devilbox /var/lib/php/wsdlcache\n#  ##\n#  ## Copy files\n#  ##\nCOPY ./data/php-ini.d/php-5.5.ini /usr/local/etc/php/conf.d/xxx-devilbox-default-php.ini\nCOPY ./data/php-fpm.conf/php-fpm-5.5.conf /usr/local/etc/php-fpm.conf\nCOPY ./data/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY ./data/docker-entrypoint.d /docker-entrypoint.d\n#  ##\n#  ## Verify\n#  ##\nRUN set -x \\\n && echo \"date.timezone=UTC\" > /usr/local/etc/php/php.ini \\\n && php -v | grep -oE 'PHP\\s[.0-9]+' | grep -oE '[.0-9]+' | grep '^5.5' \\\n && /usr/local/sbin/php-fpm --test \\\n && PHP_ERROR=\"$( php -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_ERROR=\"$( php -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_ERROR}\" ] ; then echo \"${PHP_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -v 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && PHP_FPM_ERROR=\"$( php-fpm -i 2>&1 1> /dev/null;)\" \\\n && if [ -n \"${PHP_FPM_ERROR}\" ] ; then echo \"${PHP_FPM_ERROR}\" ;false ; fi \\\n && rm -f /usr/local/etc/php/php.ini\n#  ##\n#  ## Ports\n#  ##\nEXPOSE 9000/tcp\n#  ##\n#  ## Entrypoint\n#  ##\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"fa0c62d51955b91adf7ac660aaf7ae2c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3c2c8296149d5d8cfe8f403dbd37220114f5f87d.dockerfile"}