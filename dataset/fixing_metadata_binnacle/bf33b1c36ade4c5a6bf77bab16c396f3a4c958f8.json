{"seed":2238829125,"processedDockerfileHash":"228f7f72953e7dd5899464c85553684f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER Juan Figuera\nLABEL author=\"https://github.com/viper-framework/viper-docker\"\nENV YARA_VERSION=\"3.4.0\"\nENV SSDEEP_VERSION=\"2.14.1\"\nENV PYEXIF_VERSION=\"0.2.0\"\nENV ANDROGUARD_VERSION=\"2.0\"\nENV VIPER_VERSION=\"1.2\"\nUSER root\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:2.7.4-0ubuntu1.10 gcc=4:5.3.1-1ubuntu1 python-dev=2.7.12-1~16.04 python-pip=8.1.1-2ubuntu0.6 curl=7.47.0-1ubuntu2.19 libtool=2.4.6-0.1 autoconf=2.69-9 flex=2.6.0-11 python-socksipychain=2.0.15-1 python-m2crypto=0.22.6~rc4-1ubuntu1 python-levenshtein=0.12.0-2build1 swig=3.0.8-0ubuntu3 libssl-dev=1.0.2g-1ubuntu4.20 pff-tools=20120802-5 libimage-exiftool-perl=10.10-1 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Update pip\nRUN pip install pip==23.1 --upgrade\n#   Make Tmp Dir\nRUN mkdir ~/tmp_build\n#   Install Yara\nRUN cd ~/tmp_build \\\n && git clone -b v${YARA_VERSION} https://github.com/plusvic/yara.git \\\n && cd yara \\\n && bash build.sh \\\n && make install \\\n && cd yara-python \\\n && python setup.py build \\\n && python setup.py install \\\n && cd ../.. \\\n && rm -rf yara \\\n && ldconfig\n#   Install SSDEEP\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/ssdeep-project/ssdeep/releases/download/release-${SSDEEP_VERSION}/ssdeep-${SSDEEP_VERSION}.tar.gz | tar -xzC . \\\n && cd ssdeep-${SSDEEP_VERSION} \\\n && ./configure \\\n && make install \\\n && pip install pydeep==0.4 \\\n && cd .. \\\n && rm -rf ssdeep-${SSDEEP_VERSION}\n#   Install PyExif\nRUN cd ~/tmp_build \\\n && git clone -b v${PYEXIF_VERSION} git://github.com/smarnach/pyexiftool.git \\\n && cd pyexiftool \\\n && python setup.py install\n#   Install AndroGuard\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/androguard/androguard/archive/v${ANDROGUARD_VERSION}.tar.gz | tar -xzC . \\\n && cd androguard-${ANDROGUARD_VERSION} \\\n && python setup.py install\n#   Install TOR\n#  RUN apt-get install tor\n#   Create Viper User\nRUN groupadd -r viper \\\n && useradd -r -g viper -d /home/viper -s /sbin/nologin -c \"Viper User\" viper \\\n && mkdir /home/viper \\\n && chown -R viper:viper /home/viper\n#   Clean tmp_build\nRUN rm -rf ~/tmp_build\n#   Download viper\nUSER viper\nWORKDIR /home/viper\nRUN git clone -b v${VIPER_VERSION} https://github.com/botherder/viper.git \\\n && mkdir /home/viper/workdir\n#   Install core dependencies for viper\nUSER root\nWORKDIR /home/viper/viper\nRUN chmod a+xr viper.py \\\n && pip install -r requirements.txt\n#   Install module dependencies\nUSER root\nWORKDIR /home/viper/viper\nRUN pip install pydeep==0.4 \\\n && pip install editdistance==0.6.2\n#   Get it going\nUSER viper\nWORKDIR /home/viper/viper\nRUN chmod a+xr web.py\nCMD [\"python\", \"api.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8081\"]\nENTRYPOINT [\"python\", \"web.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8080\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER Juan Figuera\nLABEL author=\"https://github.com/viper-framework/viper-docker\"\nENV YARA_VERSION=\"3.4.0\"\nENV SSDEEP_VERSION=\"2.14.1\"\nENV PYEXIF_VERSION=\"0.2.0\"\nENV ANDROGUARD_VERSION=\"2.0\"\nENV VIPER_VERSION=\"1.2\"\nUSER root\nRUN apt-get update \\\n && apt-get install git gcc python-dev python-pip curl libtool autoconf flex python-socksipychain python-m2crypto python-levenshtein swig libssl-dev pff-tools libimage-exiftool-perl -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Update pip\nRUN pip install pip --upgrade\n#  Make Tmp Dir\nRUN mkdir ~/tmp_build\n#  Install Yara\nRUN cd ~/tmp_build \\\n && git clone -b v${YARA_VERSION} https://github.com/plusvic/yara.git \\\n && cd yara \\\n && bash build.sh \\\n && make install \\\n && cd yara-python \\\n && python setup.py build \\\n && python setup.py install \\\n && cd ../.. \\\n && rm -rf yara \\\n && ldconfig\n#  Install SSDEEP\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/ssdeep-project/ssdeep/releases/download/release-${SSDEEP_VERSION}/ssdeep-${SSDEEP_VERSION}.tar.gz | tar -xzC . \\\n && cd ssdeep-${SSDEEP_VERSION} \\\n && ./configure \\\n && make install \\\n && pip install pydeep \\\n && cd .. \\\n && rm -rf ssdeep-${SSDEEP_VERSION}\n#  Install PyExif\nRUN cd ~/tmp_build \\\n && git clone -b v${PYEXIF_VERSION} git://github.com/smarnach/pyexiftool.git \\\n && cd pyexiftool \\\n && python setup.py install\n#  Install AndroGuard\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/androguard/androguard/archive/v${ANDROGUARD_VERSION}.tar.gz | tar -xzC . \\\n && cd androguard-${ANDROGUARD_VERSION} \\\n && python setup.py install\n#  Install TOR\n# RUN apt-get install tor\n#  Create Viper User\nRUN groupadd -r viper \\\n && useradd -r -g viper -d /home/viper -s /sbin/nologin -c \"Viper User\" viper \\\n && mkdir /home/viper \\\n && chown -R viper:viper /home/viper\n#  Clean tmp_build\nRUN rm -rf ~/tmp_build\n#  Download viper\nUSER viper\nWORKDIR /home/viper\nRUN git clone -b v${VIPER_VERSION} https://github.com/botherder/viper.git \\\n && mkdir /home/viper/workdir\n#  Install core dependencies for viper\nUSER root\nWORKDIR /home/viper/viper\nRUN chmod a+xr viper.py \\\n && pip install -r requirements.txt\n#  Install module dependencies\nUSER root\nWORKDIR /home/viper/viper\nRUN pip install pydeep \\\n && pip install editdistance\n#  Get it going\nUSER viper\nWORKDIR /home/viper/viper\nRUN chmod a+xr web.py\nCMD [\"python\", \"api.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8081\"]\nENTRYPOINT [\"python\", \"web.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8080\"]\n","injectedSmells":[],"originalDockerfileHash":"096c5701191cd164197676838571d245","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER Juan Figuera\nLABEL author=\"https://github.com/viper-framework/viper-docker\"\nENV YARA_VERSION=\"3.4.0\"\nENV SSDEEP_VERSION=\"2.14.1\"\nENV PYEXIF_VERSION=\"0.2.0\"\nENV ANDROGUARD_VERSION=\"2.0\"\nENV VIPER_VERSION=\"1.2\"\nUSER root\nRUN apt-get update \\\n && apt-get install git gcc python-dev python-pip curl libtool autoconf flex python-socksipychain python-m2crypto python-levenshtein swig libssl-dev pff-tools libimage-exiftool-perl -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Update pip\nRUN pip install pip --upgrade\n#   Make Tmp Dir\nRUN mkdir ~/tmp_build\n#   Install Yara\nRUN cd ~/tmp_build \\\n && git clone -b v${YARA_VERSION} https://github.com/plusvic/yara.git \\\n && cd yara \\\n && bash build.sh \\\n && make install \\\n && cd yara-python \\\n && python setup.py build \\\n && python setup.py install \\\n && cd ../.. \\\n && rm -rf yara \\\n && ldconfig\n#   Install SSDEEP\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/ssdeep-project/ssdeep/releases/download/release-${SSDEEP_VERSION}/ssdeep-${SSDEEP_VERSION}.tar.gz | tar -xzC . \\\n && cd ssdeep-${SSDEEP_VERSION} \\\n && ./configure \\\n && make install \\\n && pip install pydeep \\\n && cd .. \\\n && rm -rf ssdeep-${SSDEEP_VERSION}\n#   Install PyExif\nRUN cd ~/tmp_build \\\n && git clone -b v${PYEXIF_VERSION} git://github.com/smarnach/pyexiftool.git \\\n && cd pyexiftool \\\n && python setup.py install\n#   Install AndroGuard\nRUN cd ~/tmp_build \\\n && curl -sSL https://github.com/androguard/androguard/archive/v${ANDROGUARD_VERSION}.tar.gz | tar -xzC . \\\n && cd androguard-${ANDROGUARD_VERSION} \\\n && python setup.py install\n#   Install TOR\n#  RUN apt-get install tor\n#   Create Viper User\nRUN groupadd -r viper \\\n && useradd -r -g viper -d /home/viper -s /sbin/nologin -c \"Viper User\" viper \\\n && mkdir /home/viper \\\n && chown -R viper:viper /home/viper\n#   Clean tmp_build\nRUN rm -rf ~/tmp_build\n#   Download viper\nUSER viper\nWORKDIR /home/viper\nRUN git clone -b v${VIPER_VERSION} https://github.com/botherder/viper.git \\\n && mkdir /home/viper/workdir\n#   Install core dependencies for viper\nUSER root\nWORKDIR /home/viper/viper\nRUN chmod a+xr viper.py \\\n && pip install -r requirements.txt\n#   Install module dependencies\nUSER root\nWORKDIR /home/viper/viper\nRUN pip install pydeep \\\n && pip install editdistance\n#   Get it going\nUSER viper\nWORKDIR /home/viper/viper\nRUN chmod a+xr web.py\nCMD [\"python\", \"api.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8081\"]\nENTRYPOINT [\"python\", \"web.py\", \"-H\", \"0.0.0.0\", \"-p\", \"8080\"]\n","originalDockerfileUglifiedHash":"409eee17faf42b42df2282cb2e86a33b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/bf33b1c36ade4c5a6bf77bab16c396f3a4c958f8.dockerfile"}