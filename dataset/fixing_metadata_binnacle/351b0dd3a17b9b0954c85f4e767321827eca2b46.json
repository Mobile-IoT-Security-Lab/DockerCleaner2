{"seed":3600438983,"processedDockerfileHash":"b20d683b43e7c501b5f0d2c1823f3cea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM bioconductor/release_base\nMAINTAINER Mark Dunning<mark.dunning@cruk.cam.ac.uk>\nRUN sudo apt-get update\nRUN sudo apt-get install -y git samtools tophat sra-toolkit bwa wget bedtools python-dev fastx-toolkit r-cran-rgl\n#  ##Get repository of the course. Install data and R packages\nRUN git clone https://github.com/bioinformatics-core-shared-training/cruk-bioinf-sschool.git /home/rstudio/\nWORKDIR /home/rstudio\nRUN chmod 755 getData.sh\nRUN sudo R -f installBiocPkgs.R\nRUN R -f getNKIData.R\n#  RUN ./getData.sh\nRUN mkdir Day1/alignment-demo\nWORKDIR Day1/alignment-demo\n#  RUN wget ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByExp/sra/SRX%2FSRX483%2FSRX483591/SRR1186252/SRR1186252.sra\n#  RUN fastq-dump SRR1186252.sra\nRUN wget http://training.bio.cam.ac.uk/SRR1186252_trimmed.fq.chr6.fq\nRUN wget http://hgdownload.cse.ucsc.edu/goldenpath/hg19/chromosomes/chr6.fa.gz\nRUN gunzip chr6.fa.gz\nRUN mv chr6.fa hg19chr6.fa\nWORKDIR ../../\n#  ## 1000 Genomes bam for Day 2\nRUN samtools view -h ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/other_exome_alignments/HG00096/exome_alignment/HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam 22 | samtools view -bS - > Day2/HG00096.chr22.bam\nRUN samtools index Day2/HG00096.chr22.bam\nRUN rm HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam.bai\nRUN mkdir -p Day2/bam\nWORKDIR Day2/bam\n#  RUN wget http://training.bio.cam.ac.uk/bam.tar.gz\nWORKDIR ../../\nWORKDIR Software\n#  #Get latest version of bowtie and tophat\nRUN wget http://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.2.5/bowtie2-2.2.5-linux-x86_64.zip\nRUN unzip bowtie2-2.2.5-linux-x86_64.zip\nRUN wget http://ccb.jhu.edu/software/tophat/downloads/tophat-2.1.0.Linux_x86_64.tar.gz\nRUN gunzip tophat-2.1.0.Linux_x86_64.tar.gz\nRUN tar xvf tophat-2.1.0.Linux_x86_64.tar\nRUN wget http://cole-trapnell-lab.github.io/cufflinks/assets/downloads/cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN gunzip cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN tar xvf cufflinks-2.2.1.Linux_x86_64.tar\nRUN rm *.tar *.zip\n#  ##Get chromosome 22 fasa\nWORKDIR ../ref_data\nRUN wget http://hgdownload-test.cse.ucsc.edu/goldenPath/hg19/chromosomes/chr22.fa.gz\nRUN gunzip chr22.fa.gz\n#  #Build bwa and bowtie indices\nRUN mkdir bwa\nRUN ln -s $( pwd ;)/chr22.fa bwa/\nRUN bwa index bwa/chr22.fa\nRUN mkdir bowtie\n#  RUN ../Software/bowtie2-2.2.5/bowtie2-build chr22.fa bowtie/chr22\n#  RUN mkdir whole_genome\n#  WORKDIR  whole_genome\n#  RUN wget ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/reference/human_g1k_v37.fasta.gz\n#  RUN mkdir bwa\n#  RUN mkdir bowtie\n#  RUN ln -s $(pwd)/human_g1k_v37.fasta.gz bwa/\n#  RUN bwa index -p hg19 bwa/human_g1k_v37.fasta.gz\n#  RUN ../../Software/bowtie2-2.2.5/bowtie2-build human_g1k_v37.fasta.gz bowtie/hg19\nWORKDIR ../..\nWORKDIR /home/rstudio/Software\nRUN wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.3.zip\nRUN unzip fastqc_v0.11.3.zip\nRUN sudo chmod 755 FastQC/fastqc\nRUN ln -s $( pwd ;)/FastQC/fastqc /usr/bin/fastqc\n#  RUN rm -r img stylesheets params.json img\nRUN rm fastqc_v0.11.3.zip\nRUN wget http://downloads.sourceforge.net/project/samstat/samstat-1.5.1.tar.gz\nRUN gunzip samstat-1.5.1.tar.gz\nRUN tar -xvf samstat-1.5.1.tar\nWORKDIR samstat-1.5.1\nRUN ./configure\nRUN sudo make install\nRUN wget https://bootstrap.pypa.io/get-pip.py\nRUN sudo python get-pip.py\nRUN sudo pip install cython\nRUN sudo pip install --user --upgrade cutadapt\nRUN sudo pip install Numpy\nRUN sudo pip install MACS2\nRUN sudo chmod 755 /usr/local/bin/macs2\nRUN rm get-pip.py\nRUN sudo apt-get install -y openjdk-7-jdk\n#  Get two of the bam files that we can use for counting example\nWORKDIR Day2/bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam.bai\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam.bai\nWORKDIR /home/rstudio\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM bioconductor/release_base\nMAINTAINER Mark Dunning<mark.dunning@cruk.cam.ac.uk>\nRUN sudo apt-get update\nRUN sudo apt-get install -y git samtools tophat sra-toolkit bwa wget bedtools python-dev fastx-toolkit r-cran-rgl\n# ##Get repository of the course. Install data and R packages\nRUN git clone https://github.com/bioinformatics-core-shared-training/cruk-bioinf-sschool.git /home/rstudio/\nWORKDIR /home/rstudio\nRUN chmod 755 getData.sh\nRUN sudo R -f installBiocPkgs.R\nRUN R -f getNKIData.R\n# RUN ./getData.sh\nRUN mkdir Day1/alignment-demo\nWORKDIR Day1/alignment-demo\n# RUN wget ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByExp/sra/SRX%2FSRX483%2FSRX483591/SRR1186252/SRR1186252.sra\n# RUN fastq-dump SRR1186252.sra\nRUN wget http://training.bio.cam.ac.uk/SRR1186252_trimmed.fq.chr6.fq\nRUN wget http://hgdownload.cse.ucsc.edu/goldenpath/hg19/chromosomes/chr6.fa.gz\nRUN gunzip chr6.fa.gz\nRUN mv chr6.fa hg19chr6.fa\nWORKDIR ../../\n# ## 1000 Genomes bam for Day 2\nRUN samtools view -h ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/other_exome_alignments/HG00096/exome_alignment/HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam 22 | samtools view -bS - > Day2/HG00096.chr22.bam\nRUN samtools index Day2/HG00096.chr22.bam\nRUN rm HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam.bai\nRUN mkdir -p Day2/bam\nWORKDIR Day2/bam\n# RUN wget http://training.bio.cam.ac.uk/bam.tar.gz\nWORKDIR ../../\nWORKDIR Software\n# #Get latest version of bowtie and tophat\nRUN wget http://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.2.5/bowtie2-2.2.5-linux-x86_64.zip\nRUN unzip bowtie2-2.2.5-linux-x86_64.zip\nRUN wget http://ccb.jhu.edu/software/tophat/downloads/tophat-2.1.0.Linux_x86_64.tar.gz\nRUN gunzip tophat-2.1.0.Linux_x86_64.tar.gz\nRUN tar xvf tophat-2.1.0.Linux_x86_64.tar\nRUN wget http://cole-trapnell-lab.github.io/cufflinks/assets/downloads/cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN gunzip cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN tar xvf cufflinks-2.2.1.Linux_x86_64.tar\nRUN rm *.tar *.zip\n# ##Get chromosome 22 fasa\nWORKDIR ../ref_data\nRUN wget http://hgdownload-test.cse.ucsc.edu/goldenPath/hg19/chromosomes/chr22.fa.gz\nRUN gunzip chr22.fa.gz\n# #Build bwa and bowtie indices\nRUN mkdir bwa\nRUN ln -s $( pwd ;)/chr22.fa bwa/\nRUN bwa index bwa/chr22.fa\nRUN mkdir bowtie\n# RUN ../Software/bowtie2-2.2.5/bowtie2-build chr22.fa bowtie/chr22\n# RUN mkdir whole_genome\n# WORKDIR  whole_genome\n# RUN wget ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/reference/human_g1k_v37.fasta.gz\n# RUN mkdir bwa\n# RUN mkdir bowtie\n# RUN ln -s $(pwd)/human_g1k_v37.fasta.gz bwa/\n# RUN bwa index -p hg19 bwa/human_g1k_v37.fasta.gz\n# RUN ../../Software/bowtie2-2.2.5/bowtie2-build human_g1k_v37.fasta.gz bowtie/hg19\nWORKDIR ../..\nWORKDIR /home/rstudio/Software\nRUN wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.3.zip\nRUN unzip fastqc_v0.11.3.zip\nRUN sudo chmod 755 FastQC/fastqc\nRUN ln -s $( pwd ;)/FastQC/fastqc /usr/bin/fastqc\n# RUN rm -r img stylesheets params.json img\nRUN rm fastqc_v0.11.3.zip\nRUN wget http://downloads.sourceforge.net/project/samstat/samstat-1.5.1.tar.gz\nRUN gunzip samstat-1.5.1.tar.gz\nRUN tar -xvf samstat-1.5.1.tar\nWORKDIR samstat-1.5.1\nRUN ./configure\nRUN sudo make install\nRUN wget https://bootstrap.pypa.io/get-pip.py\nRUN sudo python get-pip.py\nRUN sudo pip install cython\nRUN sudo pip install --user --upgrade cutadapt\nRUN sudo pip install Numpy\nRUN sudo pip install MACS2\nRUN sudo chmod 755 /usr/local/bin/macs2\nRUN rm get-pip.py\nRUN sudo apt-get install -y openjdk-7-jdk\n# Get two of the bam files that we can use for counting example\nWORKDIR Day2/bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam.bai\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam.bai\nWORKDIR /home/rstudio\n","injectedSmells":[],"originalDockerfileHash":"62acfd90824b42ce80ac34a6d69a56c7","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM bioconductor/release_base\nMAINTAINER Mark Dunning<mark.dunning@cruk.cam.ac.uk>\nRUN sudo apt-get update\nRUN sudo apt-get install -y git samtools tophat sra-toolkit bwa wget bedtools python-dev fastx-toolkit r-cran-rgl\n#  ##Get repository of the course. Install data and R packages\nRUN git clone https://github.com/bioinformatics-core-shared-training/cruk-bioinf-sschool.git /home/rstudio/\nWORKDIR /home/rstudio\nRUN chmod 755 getData.sh\nRUN sudo R -f installBiocPkgs.R\nRUN R -f getNKIData.R\n#  RUN ./getData.sh\nRUN mkdir Day1/alignment-demo\nWORKDIR Day1/alignment-demo\n#  RUN wget ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByExp/sra/SRX%2FSRX483%2FSRX483591/SRR1186252/SRR1186252.sra\n#  RUN fastq-dump SRR1186252.sra\nRUN wget http://training.bio.cam.ac.uk/SRR1186252_trimmed.fq.chr6.fq\nRUN wget http://hgdownload.cse.ucsc.edu/goldenpath/hg19/chromosomes/chr6.fa.gz\nRUN gunzip chr6.fa.gz\nRUN mv chr6.fa hg19chr6.fa\nWORKDIR ../../\n#  ## 1000 Genomes bam for Day 2\nRUN samtools view -h ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/other_exome_alignments/HG00096/exome_alignment/HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam 22 | samtools view -bS - > Day2/HG00096.chr22.bam\nRUN samtools index Day2/HG00096.chr22.bam\nRUN rm HG00096.mapped.illumina.mosaik.GBR.exome.20111114.bam.bai\nRUN mkdir -p Day2/bam\nWORKDIR Day2/bam\n#  RUN wget http://training.bio.cam.ac.uk/bam.tar.gz\nWORKDIR ../../\nWORKDIR Software\n#  #Get latest version of bowtie and tophat\nRUN wget http://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.2.5/bowtie2-2.2.5-linux-x86_64.zip\nRUN unzip bowtie2-2.2.5-linux-x86_64.zip\nRUN wget http://ccb.jhu.edu/software/tophat/downloads/tophat-2.1.0.Linux_x86_64.tar.gz\nRUN gunzip tophat-2.1.0.Linux_x86_64.tar.gz\nRUN tar xvf tophat-2.1.0.Linux_x86_64.tar\nRUN wget http://cole-trapnell-lab.github.io/cufflinks/assets/downloads/cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN gunzip cufflinks-2.2.1.Linux_x86_64.tar.gz\nRUN tar xvf cufflinks-2.2.1.Linux_x86_64.tar\nRUN rm *.tar *.zip\n#  ##Get chromosome 22 fasa\nWORKDIR ../ref_data\nRUN wget http://hgdownload-test.cse.ucsc.edu/goldenPath/hg19/chromosomes/chr22.fa.gz\nRUN gunzip chr22.fa.gz\n#  #Build bwa and bowtie indices\nRUN mkdir bwa\nRUN ln -s $( pwd ;)/chr22.fa bwa/\nRUN bwa index bwa/chr22.fa\nRUN mkdir bowtie\n#  RUN ../Software/bowtie2-2.2.5/bowtie2-build chr22.fa bowtie/chr22\n#  RUN mkdir whole_genome\n#  WORKDIR  whole_genome\n#  RUN wget ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/reference/human_g1k_v37.fasta.gz\n#  RUN mkdir bwa\n#  RUN mkdir bowtie\n#  RUN ln -s $(pwd)/human_g1k_v37.fasta.gz bwa/\n#  RUN bwa index -p hg19 bwa/human_g1k_v37.fasta.gz\n#  RUN ../../Software/bowtie2-2.2.5/bowtie2-build human_g1k_v37.fasta.gz bowtie/hg19\nWORKDIR ../..\nWORKDIR /home/rstudio/Software\nRUN wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.3.zip\nRUN unzip fastqc_v0.11.3.zip\nRUN sudo chmod 755 FastQC/fastqc\nRUN ln -s $( pwd ;)/FastQC/fastqc /usr/bin/fastqc\n#  RUN rm -r img stylesheets params.json img\nRUN rm fastqc_v0.11.3.zip\nRUN wget http://downloads.sourceforge.net/project/samstat/samstat-1.5.1.tar.gz\nRUN gunzip samstat-1.5.1.tar.gz\nRUN tar -xvf samstat-1.5.1.tar\nWORKDIR samstat-1.5.1\nRUN ./configure\nRUN sudo make install\nRUN wget https://bootstrap.pypa.io/get-pip.py\nRUN sudo python get-pip.py\nRUN sudo pip install cython\nRUN sudo pip install --user --upgrade cutadapt\nRUN sudo pip install Numpy\nRUN sudo pip install MACS2\nRUN sudo chmod 755 /usr/local/bin/macs2\nRUN rm get-pip.py\nRUN sudo apt-get install -y openjdk-7-jdk\n#  Get two of the bam files that we can use for counting example\nWORKDIR Day2/bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16N_aligned.bam.bai\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam\nRUN wget http://training.bio.cam.ac.uk/cruk/16T_aligned.bam.bai\nWORKDIR /home/rstudio\n","originalDockerfileUglifiedHash":"d78b2f63e38fa826196bde75097b1914","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/351b0dd3a17b9b0954c85f4e767321827eca2b46.dockerfile"}