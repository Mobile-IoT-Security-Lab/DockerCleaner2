{"seed":764656320,"processedDockerfileHash":"ead23a274c2e2ddcb1e55148f1aa4631","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Supervisord, PHP, Python, MySQL\n#\n#   VERSION               0.0.1\n#\n#   Guidelines\n#   ----------\n#\n#   * Always use ubuntu:latest. Problems with new ubuntu releases should be fixed before\n#    moving new images into production.\n#\n#   * Daemons are managed with supervisord.\n#\n#   * Logging from all daemons should be performed to `/var/log/supervisor/supervisord.log`.\n#     The start script will `tail -f` this log so it shows up in `docker logs`. The log file of \n#     daemons that can't log to `/var/log/supervisor/supervisord.log` should also be tailed\n#     in `start.sh`\n#   \nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 nano=7.2-1 curl=7.88.1-7ubuntu1 git=1:2.39.2-1ubuntu1 -y )\n#\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN (apt-get update ;apt-get install --no-install-recommends python python-setuptools -y )\nRUN easy_install supervisor\nCOPY ./etc-supervisord.conf /etc/supervisord.conf\nCOPY ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\nCOPY ./batches.py /\n#\n#   Install Apache\n#   ---------------\nRUN (apt-get update ;apt-get install --no-install-recommends apache2=2.4.55-1ubuntu2 -y )\nRUN a2enmod rewrite status\nCOPY ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nCOPY ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Use phpfarm to manage PHP versions\n#   ----------------------------------\n#\n#   Add one script per PHP version and update \n#   Preparations\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends libxml2-dev=2.9.14+dfsg-1.1build2 libbz2-dev=1.0.8-5build1 libmcrypt-dev=2.5.8-7 libxslt1-dev=1.1.35-1 libssl-dev=3.0.8-1ubuntu1 libsslcommon2-dev libapr1-dev=1.7.2-2 libaprutil1-dev=1.6.3-1ubuntu1 libreadline-dev=8.2-1.3 make=4.3-4.1build1 libcurl4-openssl-dev=7.88.1-7ubuntu1 libjpeg-dev=8c-2ubuntu11 libpng12-dev libfreetype6-dev=2.12.1+dfsg-4 libxpm-dev=1:3.5.12-1.1 libgd-dev=2.3.3-7ubuntu2 libxpm4=1:3.5.12-1.1 t1lib-bin libtidy-dev=2:5.6.0-11build2 libc-client-dev -y )\n#   Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#   Install PHP farm\nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nCOPY ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nCOPY ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/cgibin/phpcgi-5.3.27\nCOPY ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#   Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN (apt-get update ;apt-get install --no-install-recommends apache2-mpm-worker apache2-suexec libapache2-mod-fcgid=1:2.3.9-4 -y )\nRUN a2enmod actions fcgid suexec\nCOPY ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#\n#   Start apache and mysql using supervisord\n#   -----------------------------------------\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#   Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\n#   Add batches here since it changes often (use cache whrn building)\nCOPY ./batches.sh /\nCOPY ./start.sh /\nEXPOSE 80/tcp 443/tcp\nCMD [\"/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Supervisord, PHP, Python, MySQL\n#\n#  VERSION               0.0.1\n#\n#  Guidelines\n#  ----------\n#\n#  * Always use ubuntu:latest. Problems with new ubuntu releases should be fixed before\n#   moving new images into production.\n#\n#  * Daemons are managed with supervisord.\n#\n#  * Logging from all daemons should be performed to `/var/log/supervisor/supervisord.log`.\n#    The start script will `tail -f` this log so it shows up in `docker logs`. The log file of \n#    daemons that can't log to `/var/log/supervisor/supervisord.log` should also be tailed\n#    in `start.sh`\n#  \nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#  Install supervisord (used to handle processes)\n#  ----------------------------------------------\n#\n#  Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\nADD ./batches.py /\n#\n#  Install Apache\n#  ---------------\nRUN apt-get install apache2 -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#  Use phpfarm to manage PHP versions\n#  ----------------------------------\n#\n#  Add one script per PHP version and update \n#  Preparations\nRUN apt-get update\nRUN apt-get install libxml2-dev libbz2-dev libmcrypt-dev libxslt1-dev libssl-dev libsslcommon2-dev libapr1-dev libaprutil1-dev libreadline-dev make libcurl4-openssl-dev libjpeg-dev libpng12-dev libfreetype6-dev libxpm-dev libgd-dev libxpm4 t1lib-bin libtidy-dev libc-client-dev -y\n#  Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#  Install PHP farm\nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nADD ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nADD ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/cgibin/phpcgi-5.3.27\nADD ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#  Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN apt-get install apache2-mpm-worker apache2-suexec libapache2-mod-fcgid -y\nRUN a2enmod actions fcgid suexec\nADD ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#\n#  Start apache and mysql using supervisord\n#  -----------------------------------------\n#  Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#  Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\n#  Add batches here since it changes often (use cache whrn building)\nADD ./batches.sh /\nADD ./start.sh /\nEXPOSE 80/tcp 443/tcp\nCMD [\"/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"58d9bdd8cb2f39977285407b2d93bac0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Supervisord, PHP, Python, MySQL\n#\n#   VERSION               0.0.1\n#\n#   Guidelines\n#   ----------\n#\n#   * Always use ubuntu:latest. Problems with new ubuntu releases should be fixed before\n#    moving new images into production.\n#\n#   * Daemons are managed with supervisord.\n#\n#   * Logging from all daemons should be performed to `/var/log/supervisor/supervisord.log`.\n#     The start script will `tail -f` this log so it shows up in `docker logs`. The log file of \n#     daemons that can't log to `/var/log/supervisor/supervisord.log` should also be tailed\n#     in `start.sh`\n#   \nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#   Install supervisord (used to handle processes)\n#   ----------------------------------------------\n#\n#   Installation with easy_install is more reliable. apt-get don't always work.\nRUN apt-get install python python-setuptools -y\nRUN easy_install supervisor\nADD ./etc-supervisord.conf /etc/supervisord.conf\nADD ./etc-supervisor-conf.d-supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN mkdir -p /var/log/supervisor/\nADD ./batches.py /\n#\n#   Install Apache\n#   ---------------\nRUN apt-get install apache2 -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-apache2.conf /etc/apache2/apache2.conf\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Use phpfarm to manage PHP versions\n#   ----------------------------------\n#\n#   Add one script per PHP version and update \n#   Preparations\nRUN apt-get update\nRUN apt-get install libxml2-dev libbz2-dev libmcrypt-dev libxslt1-dev libssl-dev libsslcommon2-dev libapr1-dev libaprutil1-dev libreadline-dev make libcurl4-openssl-dev libjpeg-dev libpng12-dev libfreetype6-dev libxpm-dev libgd-dev libxpm4 t1lib-bin libtidy-dev libc-client-dev -y\n#   Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#   Install PHP farm\nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nADD ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nADD ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/cgibin/phpcgi-5.3.27\nADD ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#   Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN apt-get install apache2-mpm-worker apache2-suexec libapache2-mod-fcgid -y\nRUN a2enmod actions fcgid suexec\nADD ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#\n#   Start apache and mysql using supervisord\n#   -----------------------------------------\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#   Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\n#   Add batches here since it changes often (use cache whrn building)\nADD ./batches.sh /\nADD ./start.sh /\nEXPOSE 80/tcp 443/tcp\nCMD [\"/start.sh\"]\n","originalDockerfileUglifiedHash":"8e593adb61d2494556d702d10a35b3a4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/abaea2e753153de2446c564ee4040134b21dc749.dockerfile"}