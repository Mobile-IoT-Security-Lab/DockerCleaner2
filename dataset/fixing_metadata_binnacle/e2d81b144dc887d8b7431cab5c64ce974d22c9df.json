{"seed":457306419,"processedDockerfileHash":"cc9377e821aa6cd8abd812e2be0cb3f8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.19\nENV STEEMD_HTTP_URL=\"https://steemd.steemit.com\"\nENV SBDS_LOG_LEVEL=\"INFO\"\nENV LANG=\"en_US.UTF-8\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV APP_ROOT=\"/app\"\nENV WSGI_APP=\"${APP_ROOT}/sbds/server/serve.py\"\nENV HTTP_SERVER_PORT=\"8080\"\nENV SBDS_APP_HTTP_PORT=\"9000\"\nENV PIPENV_DEFAULT_PYTHON_VERSION=\"3.6.4\"\nENV NGINX_SERVER_PORT=\"8080\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential checkinstall daemontools git libbz2-dev libc6-dev libffi-dev libgdbm-dev libmysqlclient-dev libncursesw5-dev libreadline-gplv2-dev libsqlite3-dev libssl-dev libxml2-dev libxslt-dev nginx nginx-extras make lua-zlib runit tk-dev wget -y \\\n && apt-get clean\nRUN wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz \\\n && tar xvf Python-3.6.4.tar.xz \\\n && cd Python-3.6.4/ \\\n && ./configure \\\n && make altinstall \\\n && cd .. \\\n && rm -rf Python-3.6.4.tar.xz Python-3.6.4/\n#   nginx\nRUN mkdir -p /var/lib/nginx/body \\\n && mkdir -p /var/lib/nginx/scgi \\\n && mkdir -p /var/lib/nginx/uwsgi \\\n && mkdir -p /var/lib/nginx/fastcgi \\\n && mkdir -p /var/lib/nginx/proxy \\\n && chown -R www-data:www-data /var/lib/nginx \\\n && mkdir -p /var/log/nginx \\\n && touch /var/log/nginx/access.log \\\n && touch /var/log/nginx/access.json \\\n && touch /var/log/nginx/error.log \\\n && chown www-data:www-data /var/log/nginx/* \\\n && touch /var/run/nginx.pid \\\n && chown www-data:www-data /var/run/nginx.pid \\\n && mkdir -p /var/www/.cache \\\n && chown www-data:www-data /var/www/.cache\nRUN python3.6 -m pip install --upgrade pip \\\n && python3.6 -m pip install pipenv\nCOPY . /app\nRUN mv /app/service/* /etc/service \\\n && chmod +x /etc/service/*/run\nWORKDIR /app\nRUN pipenv install --python 3.6 --dev\nRUN apt-get remove -y build-essential libffi-dev libssl-dev \\\n && apt-get autoremove -y \\\n && rm -rf /root/.cache /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nEXPOSE ${HTTP_SERVER_PORT}\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.19\nENV STEEMD_HTTP_URL=\"https://steemd.steemit.com\"\nENV SBDS_LOG_LEVEL=\"INFO\"\nENV LANG=\"en_US.UTF-8\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV APP_ROOT=\"/app\"\nENV WSGI_APP=\"${APP_ROOT}/sbds/server/serve.py\"\nENV HTTP_SERVER_PORT=\"8080\"\nENV SBDS_APP_HTTP_PORT=\"9000\"\nENV PIPENV_DEFAULT_PYTHON_VERSION=\"3.6.4\"\nENV NGINX_SERVER_PORT=\"8080\"\nRUN apt-get update \\\n && apt-get install build-essential checkinstall daemontools git libbz2-dev libc6-dev libffi-dev libgdbm-dev libmysqlclient-dev libncursesw5-dev libreadline-gplv2-dev libsqlite3-dev libssl-dev libxml2-dev libxslt-dev nginx nginx-extras make lua-zlib runit tk-dev wget -y \\\n && apt-get clean\nRUN wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz \\\n && tar xvf Python-3.6.4.tar.xz \\\n && cd Python-3.6.4/ \\\n && ./configure \\\n && make altinstall \\\n && cd .. \\\n && rm -rf Python-3.6.4.tar.xz Python-3.6.4/\n#  nginx\nRUN mkdir -p /var/lib/nginx/body \\\n && mkdir -p /var/lib/nginx/scgi \\\n && mkdir -p /var/lib/nginx/uwsgi \\\n && mkdir -p /var/lib/nginx/fastcgi \\\n && mkdir -p /var/lib/nginx/proxy \\\n && chown -R www-data:www-data /var/lib/nginx \\\n && mkdir -p /var/log/nginx \\\n && touch /var/log/nginx/access.log \\\n && touch /var/log/nginx/access.json \\\n && touch /var/log/nginx/error.log \\\n && chown www-data:www-data /var/log/nginx/* \\\n && touch /var/run/nginx.pid \\\n && chown www-data:www-data /var/run/nginx.pid \\\n && mkdir -p /var/www/.cache \\\n && chown www-data:www-data /var/www/.cache\nRUN python3.6 -m pip install --upgrade pip \\\n && python3.6 -m pip install pipenv\nCOPY . /app\nRUN mv /app/service/* /etc/service \\\n && chmod +x /etc/service/*/run\nWORKDIR /app\nRUN pipenv install --python 3.6 --dev\nRUN apt-get remove -y build-essential libffi-dev libssl-dev \\\n && apt-get autoremove -y \\\n && rm -rf /root/.cache /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nEXPOSE ${HTTP_SERVER_PORT}\n","injectedSmells":[],"originalDockerfileHash":"6695e8658878d4d4182695391b41f133","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.19\nENV STEEMD_HTTP_URL=\"https://steemd.steemit.com\"\nENV SBDS_LOG_LEVEL=\"INFO\"\nENV LANG=\"en_US.UTF-8\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV APP_ROOT=\"/app\"\nENV WSGI_APP=\"${APP_ROOT}/sbds/server/serve.py\"\nENV HTTP_SERVER_PORT=\"8080\"\nENV SBDS_APP_HTTP_PORT=\"9000\"\nENV PIPENV_DEFAULT_PYTHON_VERSION=\"3.6.4\"\nENV NGINX_SERVER_PORT=\"8080\"\nRUN apt-get update \\\n && apt-get install build-essential checkinstall daemontools git libbz2-dev libc6-dev libffi-dev libgdbm-dev libmysqlclient-dev libncursesw5-dev libreadline-gplv2-dev libsqlite3-dev libssl-dev libxml2-dev libxslt-dev nginx nginx-extras make lua-zlib runit tk-dev wget -y \\\n && apt-get clean\nRUN wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz \\\n && tar xvf Python-3.6.4.tar.xz \\\n && cd Python-3.6.4/ \\\n && ./configure \\\n && make altinstall \\\n && cd .. \\\n && rm -rf Python-3.6.4.tar.xz Python-3.6.4/\n#   nginx\nRUN mkdir -p /var/lib/nginx/body \\\n && mkdir -p /var/lib/nginx/scgi \\\n && mkdir -p /var/lib/nginx/uwsgi \\\n && mkdir -p /var/lib/nginx/fastcgi \\\n && mkdir -p /var/lib/nginx/proxy \\\n && chown -R www-data:www-data /var/lib/nginx \\\n && mkdir -p /var/log/nginx \\\n && touch /var/log/nginx/access.log \\\n && touch /var/log/nginx/access.json \\\n && touch /var/log/nginx/error.log \\\n && chown www-data:www-data /var/log/nginx/* \\\n && touch /var/run/nginx.pid \\\n && chown www-data:www-data /var/run/nginx.pid \\\n && mkdir -p /var/www/.cache \\\n && chown www-data:www-data /var/www/.cache\nRUN python3.6 -m pip install --upgrade pip \\\n && python3.6 -m pip install pipenv\nCOPY . /app\nRUN mv /app/service/* /etc/service \\\n && chmod +x /etc/service/*/run\nWORKDIR /app\nRUN pipenv install --python 3.6 --dev\nRUN apt-get remove -y build-essential libffi-dev libssl-dev \\\n && apt-get autoremove -y \\\n && rm -rf /root/.cache /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nEXPOSE ${HTTP_SERVER_PORT}\n","originalDockerfileUglifiedHash":"0004eb919b54594676066cac0950b30e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e2d81b144dc887d8b7431cab5c64ce974d22c9df.dockerfile"}