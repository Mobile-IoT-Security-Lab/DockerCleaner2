{"seed":1953693304,"processedDockerfileHash":"38bee57c1039ef2a4ce9ae4f0b04607c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos7\nENV LANG=\"en_US.UTF-8\"\nLABEL maintainer=\"The University of Auckland\" \\\n      description=\"NZ ORCiD Hub Application Image with Development support\"\n#   ADD http://download.opensuse.org/repositories/security://shibboleth/CentOS_7/security:shibboleth.repo /etc/yum.repos.d/shibboleth.repo\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /etc/yum.repos.d/shibboleth.repo https://shibboleth.net/cgi-bin/sp_repo.cgi?platform=CentOS_7\n#   fix download.opensuse.org not available\n#  #RUN sed -i 's|download|downloadcontent|g' /etc/yum.repos.d/shibboleth.repo\nCOPY conf/app.wsgi /var/www/html/\n#   prefix \"ZZ\" added, that it gest inluded the very end (after Shibboleth gets loaded)\nCOPY conf/app.conf /etc/httpd/conf.d/ZZ-app.conf\nCOPY requirements.txt /\n#   COPY setup.py /\n#   COPY orcid_api /orcid_api\n#   COPY orcid_hub /orcid_hub\nCOPY setup.* orcid* /\nCOPY run-app /usr/local/bin/\nCOPY ./conf /conf\n#   && chmod +x /etc/sysconfig/shibd /etc/shibboleth/shibd-redhat \\\nRUN yum -y install https://centos7.iuscommunity.org/ius-release.rpm \\\n && yum -y update \\\n && yum -y install shibboleth.x86_64 httpd mod_ssl gcc.x86_64 httpd-devel.x86_64 python36u.x86_64 python36u-devel.x86_64 python36u-pip git \\\n && echo $'RPMs installed...' \\\n && pip3.6 install -U pip \\\n && pip install mod_wsgi==4.9.4 psycopg2-binary==2.9.6 -U \\\n && pip install -U -r requirements.txt \\\n && /usr/bin/mod_wsgi-express module-config > /etc/httpd/conf.modules.d/10-wsgi.conf \\\n && [ -d /var/run/lock ] || mkdir -p /var/run/lock \\\n && [ -d /var/lock/subsys/ ] || mkdir -p /var/lock/subsys/ \\\n && echo $'export LD_LIBRARY_PATH=/opt/shibboleth/lib64:$LD_LIBRARY_PATH\\n' > /etc/sysconfig/shibd \\\n && chmod +x /etc/shibboleth/shibd-redhat \\\n && yum erase -y alsa-lib apr-util-devel copy-jdk-configs cpp cyrus-sasl-devel expat-devel fontconfig fontpackages-filesystem freetype gcc giflib git glibc-devel glibc-headers httpd-devel javapackages-tools kernel-headers libdb-devel libfontenc libICE libjpeg-turbo libpng libSM libX11 libX11-common libXau libxcb libXcomposite libXext libXfont libXi libXrender libxslt libXtst lksctp-tools openldap-devel perl python36u-devel python36u-pip python-javapackages python-lxml ttmkfdir xorg-x11-fonts-Type1 xorg-x11-font-utils java-1.8.0-openjdk-headless tzdata-java \\\n && chmod +x /usr/local/bin/run-app \\\n && cd /var/lib/rpm \\\n && rm -rf __db* \\\n && rpm --rebuilddb \\\n && yum -y clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf $HOME/.pip/cache \\\n && rm -rf /var/cache/*/* /anaconda-post.log \\\n && rm -rf /requirements.txt /swagger_client.egg-info /setup.* /orcid_*\nEXPOSE 80/tcp 443/tcp\nCMD [\"run-app\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos7\nENV LANG=\"en_US.UTF-8\"\nLABEL maintainer=\"The University of Auckland\" \\\n      description=\"NZ ORCiD Hub Application Image with Development support\"\n#  ADD http://download.opensuse.org/repositories/security://shibboleth/CentOS_7/security:shibboleth.repo /etc/yum.repos.d/shibboleth.repo\nADD https://shibboleth.net/cgi-bin/sp_repo.cgi?platform=CentOS_7 /etc/yum.repos.d/shibboleth.repo\n#  fix download.opensuse.org not available\n# #RUN sed -i 's|download|downloadcontent|g' /etc/yum.repos.d/shibboleth.repo\nCOPY conf/app.wsgi /var/www/html/\n#  prefix \"ZZ\" added, that it gest inluded the very end (after Shibboleth gets loaded)\nCOPY conf/app.conf /etc/httpd/conf.d/ZZ-app.conf\nCOPY requirements.txt /\n#  COPY setup.py /\n#  COPY orcid_api /orcid_api\n#  COPY orcid_hub /orcid_hub\nCOPY setup.* orcid* /\nCOPY run-app /usr/local/bin/\nCOPY ./conf /conf\n#  && chmod +x /etc/sysconfig/shibd /etc/shibboleth/shibd-redhat \\\nRUN yum -y install https://centos7.iuscommunity.org/ius-release.rpm \\\n && yum -y update \\\n && yum -y install shibboleth.x86_64 httpd mod_ssl gcc.x86_64 httpd-devel.x86_64 python36u.x86_64 python36u-devel.x86_64 python36u-pip git \\\n && echo $'RPMs installed...' \\\n && pip3.6 install -U pip \\\n && pip install mod_wsgi psycopg2-binary -U \\\n && pip install -U -r requirements.txt \\\n && /usr/bin/mod_wsgi-express module-config > /etc/httpd/conf.modules.d/10-wsgi.conf \\\n && [ -d /var/run/lock ] || mkdir -p /var/run/lock \\\n && [ -d /var/lock/subsys/ ] || mkdir -p /var/lock/subsys/ \\\n && echo $'export LD_LIBRARY_PATH=/opt/shibboleth/lib64:$LD_LIBRARY_PATH\\n' > /etc/sysconfig/shibd \\\n && chmod +x /etc/shibboleth/shibd-redhat \\\n && yum erase -y alsa-lib apr-util-devel copy-jdk-configs cpp cyrus-sasl-devel expat-devel fontconfig fontpackages-filesystem freetype gcc giflib git glibc-devel glibc-headers httpd-devel javapackages-tools kernel-headers libdb-devel libfontenc libICE libjpeg-turbo libpng libSM libX11 libX11-common libXau libxcb libXcomposite libXext libXfont libXi libXrender libxslt libXtst lksctp-tools openldap-devel perl python36u-devel python36u-pip python-javapackages python-lxml ttmkfdir xorg-x11-fonts-Type1 xorg-x11-font-utils java-1.8.0-openjdk-headless tzdata-java \\\n && chmod +x /usr/local/bin/run-app \\\n && cd /var/lib/rpm \\\n && rm -rf __db* \\\n && rpm --rebuilddb \\\n && yum -y clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf $HOME/.pip/cache \\\n && rm -rf /var/cache/*/* /anaconda-post.log \\\n && rm -rf /requirements.txt /swagger_client.egg-info /setup.* /orcid_*\nEXPOSE 80/tcp 443/tcp\nCMD [\"run-app\"]\n","injectedSmells":[],"originalDockerfileHash":"46ef697a4c575db20e8661fd7472fe78","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos7\nENV LANG=\"en_US.UTF-8\"\nLABEL maintainer=\"The University of Auckland\" \\\n      description=\"NZ ORCiD Hub Application Image with Development support\"\n#   ADD http://download.opensuse.org/repositories/security://shibboleth/CentOS_7/security:shibboleth.repo /etc/yum.repos.d/shibboleth.repo\nADD https://shibboleth.net/cgi-bin/sp_repo.cgi?platform=CentOS_7 /etc/yum.repos.d/shibboleth.repo\n#   fix download.opensuse.org not available\n#  #RUN sed -i 's|download|downloadcontent|g' /etc/yum.repos.d/shibboleth.repo\nCOPY conf/app.wsgi /var/www/html/\n#   prefix \"ZZ\" added, that it gest inluded the very end (after Shibboleth gets loaded)\nCOPY conf/app.conf /etc/httpd/conf.d/ZZ-app.conf\nCOPY requirements.txt /\n#   COPY setup.py /\n#   COPY orcid_api /orcid_api\n#   COPY orcid_hub /orcid_hub\nCOPY setup.* orcid* /\nCOPY run-app /usr/local/bin/\nCOPY ./conf /conf\n#   && chmod +x /etc/sysconfig/shibd /etc/shibboleth/shibd-redhat \\\nRUN yum -y install https://centos7.iuscommunity.org/ius-release.rpm \\\n && yum -y update \\\n && yum -y install shibboleth.x86_64 httpd mod_ssl gcc.x86_64 httpd-devel.x86_64 python36u.x86_64 python36u-devel.x86_64 python36u-pip git \\\n && echo $'RPMs installed...' \\\n && pip3.6 install -U pip \\\n && pip install mod_wsgi psycopg2-binary -U \\\n && pip install -U -r requirements.txt \\\n && /usr/bin/mod_wsgi-express module-config > /etc/httpd/conf.modules.d/10-wsgi.conf \\\n && [ -d /var/run/lock ] || mkdir -p /var/run/lock \\\n && [ -d /var/lock/subsys/ ] || mkdir -p /var/lock/subsys/ \\\n && echo $'export LD_LIBRARY_PATH=/opt/shibboleth/lib64:$LD_LIBRARY_PATH\\n' > /etc/sysconfig/shibd \\\n && chmod +x /etc/shibboleth/shibd-redhat \\\n && yum erase -y alsa-lib apr-util-devel copy-jdk-configs cpp cyrus-sasl-devel expat-devel fontconfig fontpackages-filesystem freetype gcc giflib git glibc-devel glibc-headers httpd-devel javapackages-tools kernel-headers libdb-devel libfontenc libICE libjpeg-turbo libpng libSM libX11 libX11-common libXau libxcb libXcomposite libXext libXfont libXi libXrender libxslt libXtst lksctp-tools openldap-devel perl python36u-devel python36u-pip python-javapackages python-lxml ttmkfdir xorg-x11-fonts-Type1 xorg-x11-font-utils java-1.8.0-openjdk-headless tzdata-java \\\n && chmod +x /usr/local/bin/run-app \\\n && cd /var/lib/rpm \\\n && rm -rf __db* \\\n && rpm --rebuilddb \\\n && yum -y clean all \\\n && rm -rf /var/cache/yum \\\n && rm -rf $HOME/.pip/cache \\\n && rm -rf /var/cache/*/* /anaconda-post.log \\\n && rm -rf /requirements.txt /swagger_client.egg-info /setup.* /orcid_*\nEXPOSE 80/tcp 443/tcp\nCMD [\"run-app\"]\n","originalDockerfileUglifiedHash":"3ac80b1166a5f00c4e142b5ad2f0bb17","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1e26d574d29fe8593c15439d999ae4dfd1be5068.dockerfile"}