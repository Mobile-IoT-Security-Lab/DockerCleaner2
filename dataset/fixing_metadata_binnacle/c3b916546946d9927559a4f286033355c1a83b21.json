{"seed":3873431426,"processedDockerfileHash":"573b35bc24bb3dc91b199e636d001106","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:xenial\nMAINTAINER Zenoss, Inc <dev@zenoss.com>\n#   Get the basic set of dev tools\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends build-essential=12.1ubuntu2 wget=1.17.1-1ubuntu1.5 curl=7.47.0-1ubuntu2.19 unzip=6.0-20ubuntu1.1 make=4.1-6 -y -q\n#\n#   Install native prerequisites for the ruby gems we need (e.g.nokogiri)\n#\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends zlib1g-dev=1:1.2.8.dfsg-2ubuntu4 libxml2-dev=2.9.3+dfsg1-1ubuntu0.1 libxml2=2.9.3+dfsg1-1ubuntu0.7 libxslt1-dev=1.1.28-2.1ubuntu0.3 -y -q\n#   Prerequesites for capybara-webkit\nRUN apt-get install --no-install-recommends qt5-default=5.5.1+dfsg-16ubuntu7.7 libqt5webkit5-dev=5.5.1+dfsg-2ubuntu1 gstreamer1.0-plugins-base=1.8.3-1ubuntu0.3 gstreamer1.0-tools=1.8.3-1~ubuntu0.1 gstreamer1.0-x=1.8.3-1ubuntu0.3 -y -q\n#\n#   Install Ruby via rvm\n#\nRUN gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\nRUN curl -sSL https://get.rvm.io | bash -s stable --ruby\nRUN /bin/bash -lc \"source /usr/local/rvm/scripts/rvm\"\n#\n#   Install Cucumber, Capybara and the other gems we need\n#\nRUN /bin/bash -lc \"gem install cucumber -v 2.4.0\"\nRUN /bin/bash -lc \"gem install nokogiri -v 1.6.8.1\"\nRUN /bin/bash -lc \"gem install capybara -v 2.10.1\"\nRUN /bin/bash -lc \"gem install capybara-screenshot -v 1.0.14\"\nRUN /bin/bash -lc \"gem install rspec -v 3.5.0\"\nRUN /bin/bash -lc \"gem install selenium-webdriver -v 3.0.0\"\nRUN /bin/bash -lc \"gem install site_prism -v 2.9\"\nRUN /bin/bash -lc \"gem install headless -v 2.3.1\"\nRUN /bin/bash -lc \"gem install cucumber-api -v 0.3\"\n#\n#   Install the xvfb for firefox and chrome so they can run on a headless system\n#\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends xvfb=2:1.18.4-0ubuntu0.12 -y -q\n#\n#   Install firefox.\n#   Note that the selenium driver doesn't work with all FF versions, so\n#   if you use a different version of FF, you might have to upgrade selenium or vice-versa\n#\nRUN wget https://download-installer.cdn.mozilla.net/pub/firefox/releases/44.0/linux-x86_64/en-US/firefox-44.0.tar.bz2 -P /usr/local/share\nRUN cd /usr/local/share \\\n && tar xvjf firefox-44.0.tar.bz2\nRUN ln -fs /usr/local/share/firefox/firefox /usr/bin/firefox\nRUN rm -rf /usr/local/share/firefox-44.0.tar.bz2\n#\n#   Install chromedriver that selenium needs to work with chrome\n#   (from https://devblog.supportbee.com/2014/10/27/setting-up-cucumber-to-run-with-Chrome-on-Linux/)\n#\nRUN wget -N http://chromedriver.storage.googleapis.com/2.25/chromedriver_linux64.zip -P /tmp\nRUN unzip /tmp/chromedriver_linux64.zip -d /tmp\nRUN mv /tmp/chromedriver /usr/bin\nRUN chmod +x /usr/bin/chromedriver\nRUN rm /tmp/chromedriver_linux64.zip\n#\n#   Install chrome - blend of info from several sources\n#   General process info: http://askubuntu.com/questions/79280/how-to-install-chrome-browser-properly-via-command-line\n#   Public Key info for safe download: http://www.google.com/linuxrepositories/\n#   Info about differnet Chrome versions: http://www.ubuntuupdates.org/package/google_chrome/stable/main/base/google-chrome-stable\n#\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends libxss1=1:1.2.2-1 libappindicator1=12.10.1+16.04.20170215-0ubuntu1 libindicator7=12.10.2+16.04.20151208-0ubuntu1 -y -q\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google-chrome.list\n#\n#   Tried a specific version like 41.0.2272.76-1, but specifying on the command line doesn't always work :-(\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends google-chrome-stable -y -q --force-yes\n#\n#   Add the Java app that generates a nice HTML report\n#\n#   need software-properties-common for add-apt-repositry command\nRUN apt-get install --no-install-recommends software-properties-common=0.96.20.10 -yq\nRUN add-apt-repository ppa:openjdk-r/ppa\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends openjdk-7-jre-headless -y -q\nRUN mkdir -p /usr/share/reporter\nCOPY reporter.jar /usr/share/reporter/reporter.jar\n#\n#   Setup Xvfb - FF and chrome will connect to this DISPLAY\n#   (https://github.com/keyvanfatehi/docker-chrome-xvfb)\n#\nENV DISPLAY=\":99\"\nCOPY xvfb_init /etc/init.d/xvfb\nRUN chmod a+x /etc/init.d/xvfb\n#\n#   Add the script used to run cucumber.\n#\nCOPY runCucumber.sh /usr/sbin/runCucumber.sh\nRUN chmod a+x /usr/sbin/runCucumber.sh\n#\n#   Setup a default timezone that matches CST since the default TZ in the ubuntu\n#   image is a value unknown to the UI (which can cause other problems).\n#\nRUN echo \"America/Chicago\" > /etc/timezone\nRUN dpkg-reconfigure --frontend noninteractive tzdata\n#\n#   Silence warnings from serviced about a missing config file\n#\nRUN touch /etc/default/serviced\n#\n#   This is the directory that wlll be the mount point for the cucumber files\n#\nWORKDIR /capybara\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:xenial\nMAINTAINER Zenoss, Inc <dev@zenoss.com>\n#  Get the basic set of dev tools\nRUN apt-get update -qq \\\n && apt-get install build-essential wget curl unzip make -y -q\n#\n#  Install native prerequisites for the ruby gems we need (e.g.nokogiri)\n#\nRUN apt-get update -qq \\\n && apt-get install zlib1g-dev=1:1.2.8.dfsg-2ubuntu4 libxml2-dev=2.9.3+dfsg1-1ubuntu0.1 libxml2 libxslt1-dev -y -q\n#  Prerequesites for capybara-webkit\nRUN apt-get install qt5-default libqt5webkit5-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x -y -q\n#\n#  Install Ruby via rvm\n#\nRUN gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\nRUN curl -sSL https://get.rvm.io | bash -s stable --ruby\nRUN /bin/bash -lc \"source /usr/local/rvm/scripts/rvm\"\n#\n#  Install Cucumber, Capybara and the other gems we need\n#\nRUN /bin/bash -lc \"gem install cucumber -v 2.4.0\"\nRUN /bin/bash -lc \"gem install nokogiri -v 1.6.8.1\"\nRUN /bin/bash -lc \"gem install capybara -v 2.10.1\"\nRUN /bin/bash -lc \"gem install capybara-screenshot -v 1.0.14\"\nRUN /bin/bash -lc \"gem install rspec -v 3.5.0\"\nRUN /bin/bash -lc \"gem install selenium-webdriver -v 3.0.0\"\nRUN /bin/bash -lc \"gem install site_prism -v 2.9\"\nRUN /bin/bash -lc \"gem install headless -v 2.3.1\"\nRUN /bin/bash -lc \"gem install cucumber-api -v 0.3\"\n#\n#  Install the xvfb for firefox and chrome so they can run on a headless system\n#\nRUN apt-get update -qq \\\n && apt-get install xvfb -y -q\n#\n#  Install firefox.\n#  Note that the selenium driver doesn't work with all FF versions, so\n#  if you use a different version of FF, you might have to upgrade selenium or vice-versa\n#\nRUN wget https://download-installer.cdn.mozilla.net/pub/firefox/releases/44.0/linux-x86_64/en-US/firefox-44.0.tar.bz2 -P /usr/local/share\nRUN cd /usr/local/share \\\n && tar xvjf firefox-44.0.tar.bz2\nRUN ln -fs /usr/local/share/firefox/firefox /usr/bin/firefox\nRUN rm -rf /usr/local/share/firefox-44.0.tar.bz2\n#\n#  Install chromedriver that selenium needs to work with chrome\n#  (from https://devblog.supportbee.com/2014/10/27/setting-up-cucumber-to-run-with-Chrome-on-Linux/)\n#\nRUN wget -N http://chromedriver.storage.googleapis.com/2.25/chromedriver_linux64.zip -P /tmp\nRUN unzip /tmp/chromedriver_linux64.zip -d /tmp\nRUN mv /tmp/chromedriver /usr/bin\nRUN chmod +x /usr/bin/chromedriver\nRUN rm /tmp/chromedriver_linux64.zip\n#\n#  Install chrome - blend of info from several sources\n#  General process info: http://askubuntu.com/questions/79280/how-to-install-chrome-browser-properly-via-command-line\n#  Public Key info for safe download: http://www.google.com/linuxrepositories/\n#  Info about differnet Chrome versions: http://www.ubuntuupdates.org/package/google_chrome/stable/main/base/google-chrome-stable\n#\nRUN apt-get update -qq \\\n && apt-get install libxss1 libappindicator1 libindicator7 -y -q\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google-chrome.list\n#\n#  Tried a specific version like 41.0.2272.76-1, but specifying on the command line doesn't always work :-(\nRUN apt-get update -qq \\\n && apt-get install google-chrome-stable -y -q --force-yes\n#\n#  Add the Java app that generates a nice HTML report\n#\n#  need software-properties-common for add-apt-repositry command\nRUN apt-get install software-properties-common -yq\nRUN add-apt-repository ppa:openjdk-r/ppa\nRUN apt-get update -qq \\\n && apt-get install openjdk-7-jre-headless -y -q\nRUN mkdir -p /usr/share/reporter\nADD reporter.jar /usr/share/reporter/reporter.jar\n#\n#  Setup Xvfb - FF and chrome will connect to this DISPLAY\n#  (https://github.com/keyvanfatehi/docker-chrome-xvfb)\n#\nENV DISPLAY=\":99\"\nADD xvfb_init /etc/init.d/xvfb\nRUN chmod a+x /etc/init.d/xvfb\n#\n#  Add the script used to run cucumber.\n#\nADD runCucumber.sh /usr/sbin/runCucumber.sh\nRUN chmod a+x /usr/sbin/runCucumber.sh\n#\n#  Setup a default timezone that matches CST since the default TZ in the ubuntu\n#  image is a value unknown to the UI (which can cause other problems).\n#\nRUN echo \"America/Chicago\" > /etc/timezone\nRUN dpkg-reconfigure --frontend noninteractive tzdata\n#\n#  Silence warnings from serviced about a missing config file\n#\nRUN touch /etc/default/serviced\n#\n#  This is the directory that wlll be the mount point for the cucumber files\n#\nWORKDIR /capybara\n","injectedSmells":[],"originalDockerfileHash":"5b40c4fd1e18d27f4b6749dde6dfdf82","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:xenial\nMAINTAINER Zenoss, Inc <dev@zenoss.com>\n#   Get the basic set of dev tools\nRUN apt-get update -qq \\\n && apt-get install build-essential wget curl unzip make -y -q\n#\n#   Install native prerequisites for the ruby gems we need (e.g.nokogiri)\n#\nRUN apt-get update -qq \\\n && apt-get install zlib1g-dev=1:1.2.8.dfsg-2ubuntu4 libxml2-dev=2.9.3+dfsg1-1ubuntu0.1 libxml2 libxslt1-dev -y -q\n#   Prerequesites for capybara-webkit\nRUN apt-get install qt5-default libqt5webkit5-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x -y -q\n#\n#   Install Ruby via rvm\n#\nRUN gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\nRUN curl -sSL https://get.rvm.io | bash -s stable --ruby\nRUN /bin/bash -lc \"source /usr/local/rvm/scripts/rvm\"\n#\n#   Install Cucumber, Capybara and the other gems we need\n#\nRUN /bin/bash -lc \"gem install cucumber -v 2.4.0\"\nRUN /bin/bash -lc \"gem install nokogiri -v 1.6.8.1\"\nRUN /bin/bash -lc \"gem install capybara -v 2.10.1\"\nRUN /bin/bash -lc \"gem install capybara-screenshot -v 1.0.14\"\nRUN /bin/bash -lc \"gem install rspec -v 3.5.0\"\nRUN /bin/bash -lc \"gem install selenium-webdriver -v 3.0.0\"\nRUN /bin/bash -lc \"gem install site_prism -v 2.9\"\nRUN /bin/bash -lc \"gem install headless -v 2.3.1\"\nRUN /bin/bash -lc \"gem install cucumber-api -v 0.3\"\n#\n#   Install the xvfb for firefox and chrome so they can run on a headless system\n#\nRUN apt-get update -qq \\\n && apt-get install xvfb -y -q\n#\n#   Install firefox.\n#   Note that the selenium driver doesn't work with all FF versions, so\n#   if you use a different version of FF, you might have to upgrade selenium or vice-versa\n#\nRUN wget https://download-installer.cdn.mozilla.net/pub/firefox/releases/44.0/linux-x86_64/en-US/firefox-44.0.tar.bz2 -P /usr/local/share\nRUN cd /usr/local/share \\\n && tar xvjf firefox-44.0.tar.bz2\nRUN ln -fs /usr/local/share/firefox/firefox /usr/bin/firefox\nRUN rm -rf /usr/local/share/firefox-44.0.tar.bz2\n#\n#   Install chromedriver that selenium needs to work with chrome\n#   (from https://devblog.supportbee.com/2014/10/27/setting-up-cucumber-to-run-with-Chrome-on-Linux/)\n#\nRUN wget -N http://chromedriver.storage.googleapis.com/2.25/chromedriver_linux64.zip -P /tmp\nRUN unzip /tmp/chromedriver_linux64.zip -d /tmp\nRUN mv /tmp/chromedriver /usr/bin\nRUN chmod +x /usr/bin/chromedriver\nRUN rm /tmp/chromedriver_linux64.zip\n#\n#   Install chrome - blend of info from several sources\n#   General process info: http://askubuntu.com/questions/79280/how-to-install-chrome-browser-properly-via-command-line\n#   Public Key info for safe download: http://www.google.com/linuxrepositories/\n#   Info about differnet Chrome versions: http://www.ubuntuupdates.org/package/google_chrome/stable/main/base/google-chrome-stable\n#\nRUN apt-get update -qq \\\n && apt-get install libxss1 libappindicator1 libindicator7 -y -q\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\nRUN echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google-chrome.list\n#\n#   Tried a specific version like 41.0.2272.76-1, but specifying on the command line doesn't always work :-(\nRUN apt-get update -qq \\\n && apt-get install google-chrome-stable -y -q --force-yes\n#\n#   Add the Java app that generates a nice HTML report\n#\n#   need software-properties-common for add-apt-repositry command\nRUN apt-get install software-properties-common -yq\nRUN add-apt-repository ppa:openjdk-r/ppa\nRUN apt-get update -qq \\\n && apt-get install openjdk-7-jre-headless -y -q\nRUN mkdir -p /usr/share/reporter\nADD reporter.jar /usr/share/reporter/reporter.jar\n#\n#   Setup Xvfb - FF and chrome will connect to this DISPLAY\n#   (https://github.com/keyvanfatehi/docker-chrome-xvfb)\n#\nENV DISPLAY=\":99\"\nADD xvfb_init /etc/init.d/xvfb\nRUN chmod a+x /etc/init.d/xvfb\n#\n#   Add the script used to run cucumber.\n#\nADD runCucumber.sh /usr/sbin/runCucumber.sh\nRUN chmod a+x /usr/sbin/runCucumber.sh\n#\n#   Setup a default timezone that matches CST since the default TZ in the ubuntu\n#   image is a value unknown to the UI (which can cause other problems).\n#\nRUN echo \"America/Chicago\" > /etc/timezone\nRUN dpkg-reconfigure --frontend noninteractive tzdata\n#\n#   Silence warnings from serviced about a missing config file\n#\nRUN touch /etc/default/serviced\n#\n#   This is the directory that wlll be the mount point for the cucumber files\n#\nWORKDIR /capybara\n","originalDockerfileUglifiedHash":"ce133e8ed4a93fc0fed9d7744989644d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c3b916546946d9927559a4f286033355c1a83b21.dockerfile"}