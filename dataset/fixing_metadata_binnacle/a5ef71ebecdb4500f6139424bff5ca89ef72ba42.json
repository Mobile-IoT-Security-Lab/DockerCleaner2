{"seed":3261851626,"processedDockerfileHash":"aa7c1305c5ab8d84d2b49c22504a8428","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   crashplan Dockerfile\n#\n#   https://github.com/jlesage/docker-crashplan\n#\n#   Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.8-glibc-v3.5.1\n#   Define software versions.\nARG CRASHPLAN_VERSION=4.8.4\nARG CRASHPLAN_JRE_VERSION=1.8.0_72\n#   Define software download URLs.\nARG CRASHPLAN_URL=https://download.code42.com/installs/linux/install/CrashPlan/CrashPlan_${CRASHPLAN_VERSION}_Linux.tgz\nARG CRASHPLAN_JRE_URL=http://download.code42.com/installs/proserver/jre/jre-linux-x64-${CRASHPLAN_JRE_VERSION}.tgz\n#   Define container build variables.\nARG TARGETDIR=/usr/local/crashplan\nARG MANIFESTDIR=/backupArchives\n#   Define working directory.\nWORKDIR /tmp\n#   Install CrashPlan.\nRUN add-pkg --virtual build-dependencies cpio curl \\\n && echo \"Downloading CrashPlan...\" \\\n && curl -# -L ${CRASHPLAN_URL} | tar -xz \\\n && echo \"Installing CrashPlan...\" \\\n && mkdir -p ${TARGETDIR} \\\n && cat crashplan-install/CrashPlan_${CRASHPLAN_VERSION}.cpi | gzip -d -c - | cpio -i --no-preserve-owner --directory=${TARGETDIR} \\\n && mv ${TARGETDIR}/conf ${TARGETDIR}/conf.default \\\n && sed-patch '/<helpNovice>STILL_RUNNING<\\/helpNovice>/a \\\\t<serviceUIConfig>\\n\\t\\t<serviceHost>127.0.0.1<\\/serviceHost>\\n\\t<\\/serviceUIConfig>' ${TARGETDIR}/conf.default/default.service.xml \\\n && sed-patch \"s|<backupConfig>|<backupConfig>\\n\\t\\t\\t<manifestPath>${MANIFESTDIR}</manifestPath>|g\" ${TARGETDIR}/conf.default/default.service.xml \\\n && rm -r /usr/local/crashplan/upgrade \\\n && touch /usr/local/crashplan/upgrade \\\n && chmod 400 /usr/local/crashplan/upgrade \\\n && ln -s /config/conf $TARGETDIR/conf \\\n && cp crashplan-install/scripts/run.conf ${TARGETDIR}/bin/run.conf.default \\\n && ln -s /config/bin/run.conf $TARGETDIR/bin/run.conf \\\n && ln -s /config/cache $TARGETDIR/cache \\\n && rm -r $TARGETDIR/log \\\n && ln -s /config/log $TARGETDIR/log \\\n && ln -s /config/var /var/lib/crashplan \\\n && echo \"Downloading and installing JRE...\" \\\n && curl -# -L ${CRASHPLAN_JRE_URL} | tar -xz -C ${TARGETDIR} \\\n && chown -R root:root ${TARGETDIR}/jre \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/*\n#   Install dependencies.\nRUN add-pkg gtk+2.0 yad bc curl\n#   Adjust the openbox config.\nRUN sed-patch 's/<application type=\"normal\">/<application type=\"normal\" class=\"CrashPlan\">/' /etc/xdg/openbox/rc.xml \\\n && sed-patch '/<application type=\"normal\" class=\"CrashPlan\">/a \\ <layer>below</layer>' /etc/xdg/openbox/rc.xml\n#   Enable log monitoring.\nRUN sed-patch 's|LOG_FILES=|LOG_FILES=/config/log/service.log.0|' /etc/logmonitor/logmonitor.conf \\\n && sed-patch 's|STATUS_FILES=|STATUS_FILES=/config/log/app.log|' /etc/logmonitor/logmonitor.conf\n#   Generate and install favicons.\nRUN APP_ICON_URL=https://github.com/jlesage/docker-templates/raw/master/jlesage/images/crashplan-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#   Add files.\nCOPY rootfs/ /\n#   Set environment variables.\nENV S6_WAIT_FOR_SERVICE_MAXTIME=\"9000\" \\\n    APP_NAME=\"CrashPlan\" \\\n    KEEP_APP_RUNNING=\"1\" \\\n    CRASHPLAN_DIR=\"${TARGETDIR}\" \\\n    JAVACOMMON=\"/usr/local/crashplan/jre/bin/java\"\n#   Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/backupArchives\"]\n#   Expose ports.\n#     - 4242: Computer-to-computer connections.\n#     - 4243: Connection to the CrashPlan service.\nEXPOSE 4242/tcp 4243/tcp\n#   Metadata.\nLABEL org.label-schema.name=\"crashplan\" \\\n      org.label-schema.description=\"Docker container for CrashPlan\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-crashplan\" \\\n      org.label-schema.schema-version=\"1.0\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  crashplan Dockerfile\n#\n#  https://github.com/jlesage/docker-crashplan\n#\n#  Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.8-glibc-v3.5.1\n#  Define software versions.\nARG CRASHPLAN_VERSION=4.8.4\nARG CRASHPLAN_JRE_VERSION=1.8.0_72\n#  Define software download URLs.\nARG CRASHPLAN_URL=https://download.code42.com/installs/linux/install/CrashPlan/CrashPlan_${CRASHPLAN_VERSION}_Linux.tgz\nARG CRASHPLAN_JRE_URL=http://download.code42.com/installs/proserver/jre/jre-linux-x64-${CRASHPLAN_JRE_VERSION}.tgz\n#  Define container build variables.\nARG TARGETDIR=/usr/local/crashplan\nARG MANIFESTDIR=/backupArchives\n#  Define working directory.\nWORKDIR /tmp\n#  Install CrashPlan.\nRUN add-pkg --virtual build-dependencies cpio curl \\\n && echo \"Downloading CrashPlan...\" \\\n && curl -# -L ${CRASHPLAN_URL} | tar -xz \\\n && echo \"Installing CrashPlan...\" \\\n && mkdir -p ${TARGETDIR} \\\n && cat crashplan-install/CrashPlan_${CRASHPLAN_VERSION}.cpi | gzip -d -c - | cpio -i --no-preserve-owner --directory=${TARGETDIR} \\\n && mv ${TARGETDIR}/conf ${TARGETDIR}/conf.default \\\n && sed-patch '/<helpNovice>STILL_RUNNING<\\/helpNovice>/a \\\\t<serviceUIConfig>\\n\\t\\t<serviceHost>127.0.0.1<\\/serviceHost>\\n\\t<\\/serviceUIConfig>' ${TARGETDIR}/conf.default/default.service.xml \\\n && sed-patch \"s|<backupConfig>|<backupConfig>\\n\\t\\t\\t<manifestPath>${MANIFESTDIR}</manifestPath>|g\" ${TARGETDIR}/conf.default/default.service.xml \\\n && rm -r /usr/local/crashplan/upgrade \\\n && touch /usr/local/crashplan/upgrade \\\n && chmod 400 /usr/local/crashplan/upgrade \\\n && ln -s /config/conf $TARGETDIR/conf \\\n && cp crashplan-install/scripts/run.conf ${TARGETDIR}/bin/run.conf.default \\\n && ln -s /config/bin/run.conf $TARGETDIR/bin/run.conf \\\n && ln -s /config/cache $TARGETDIR/cache \\\n && rm -r $TARGETDIR/log \\\n && ln -s /config/log $TARGETDIR/log \\\n && ln -s /config/var /var/lib/crashplan \\\n && echo \"Downloading and installing JRE...\" \\\n && curl -# -L ${CRASHPLAN_JRE_URL} | tar -xz -C ${TARGETDIR} \\\n && chown -R root:root ${TARGETDIR}/jre \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/*\n#  Install dependencies.\nRUN add-pkg gtk+2.0 yad bc curl\n#  Adjust the openbox config.\nRUN sed-patch 's/<application type=\"normal\">/<application type=\"normal\" class=\"CrashPlan\">/' /etc/xdg/openbox/rc.xml \\\n && sed-patch '/<application type=\"normal\" class=\"CrashPlan\">/a \\ <layer>below</layer>' /etc/xdg/openbox/rc.xml\n#  Enable log monitoring.\nRUN sed-patch 's|LOG_FILES=|LOG_FILES=/config/log/service.log.0|' /etc/logmonitor/logmonitor.conf \\\n && sed-patch 's|STATUS_FILES=|STATUS_FILES=/config/log/app.log|' /etc/logmonitor/logmonitor.conf\n#  Generate and install favicons.\nRUN APP_ICON_URL=https://github.com/jlesage/docker-templates/raw/master/jlesage/images/crashplan-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#  Add files.\nCOPY rootfs/ /\n#  Set environment variables.\nENV S6_WAIT_FOR_SERVICE_MAXTIME=\"9000\" \\\n    APP_NAME=\"CrashPlan\" \\\n    KEEP_APP_RUNNING=\"1\" \\\n    CRASHPLAN_DIR=\"${TARGETDIR}\" \\\n    JAVACOMMON=\"/usr/local/crashplan/jre/bin/java\"\n#  Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/backupArchives\"]\n#  Expose ports.\n#    - 4242: Computer-to-computer connections.\n#    - 4243: Connection to the CrashPlan service.\nEXPOSE 4242/tcp 4243/tcp\n#  Metadata.\nLABEL org.label-schema.name=\"crashplan\" \\\n      org.label-schema.description=\"Docker container for CrashPlan\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-crashplan\" \\\n      org.label-schema.schema-version=\"1.0\"\n","injectedSmells":[],"originalDockerfileHash":"644774f249527c4b1f6b6c49c26be7ea","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   crashplan Dockerfile\n#\n#   https://github.com/jlesage/docker-crashplan\n#\n#   Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.8-glibc-v3.5.1\n#   Define software versions.\nARG CRASHPLAN_VERSION=4.8.4\nARG CRASHPLAN_JRE_VERSION=1.8.0_72\n#   Define software download URLs.\nARG CRASHPLAN_URL=https://download.code42.com/installs/linux/install/CrashPlan/CrashPlan_${CRASHPLAN_VERSION}_Linux.tgz\nARG CRASHPLAN_JRE_URL=http://download.code42.com/installs/proserver/jre/jre-linux-x64-${CRASHPLAN_JRE_VERSION}.tgz\n#   Define container build variables.\nARG TARGETDIR=/usr/local/crashplan\nARG MANIFESTDIR=/backupArchives\n#   Define working directory.\nWORKDIR /tmp\n#   Install CrashPlan.\nRUN add-pkg --virtual build-dependencies cpio curl \\\n && echo \"Downloading CrashPlan...\" \\\n && curl -# -L ${CRASHPLAN_URL} | tar -xz \\\n && echo \"Installing CrashPlan...\" \\\n && mkdir -p ${TARGETDIR} \\\n && cat crashplan-install/CrashPlan_${CRASHPLAN_VERSION}.cpi | gzip -d -c - | cpio -i --no-preserve-owner --directory=${TARGETDIR} \\\n && mv ${TARGETDIR}/conf ${TARGETDIR}/conf.default \\\n && sed-patch '/<helpNovice>STILL_RUNNING<\\/helpNovice>/a \\\\t<serviceUIConfig>\\n\\t\\t<serviceHost>127.0.0.1<\\/serviceHost>\\n\\t<\\/serviceUIConfig>' ${TARGETDIR}/conf.default/default.service.xml \\\n && sed-patch \"s|<backupConfig>|<backupConfig>\\n\\t\\t\\t<manifestPath>${MANIFESTDIR}</manifestPath>|g\" ${TARGETDIR}/conf.default/default.service.xml \\\n && rm -r /usr/local/crashplan/upgrade \\\n && touch /usr/local/crashplan/upgrade \\\n && chmod 400 /usr/local/crashplan/upgrade \\\n && ln -s /config/conf $TARGETDIR/conf \\\n && cp crashplan-install/scripts/run.conf ${TARGETDIR}/bin/run.conf.default \\\n && ln -s /config/bin/run.conf $TARGETDIR/bin/run.conf \\\n && ln -s /config/cache $TARGETDIR/cache \\\n && rm -r $TARGETDIR/log \\\n && ln -s /config/log $TARGETDIR/log \\\n && ln -s /config/var /var/lib/crashplan \\\n && echo \"Downloading and installing JRE...\" \\\n && curl -# -L ${CRASHPLAN_JRE_URL} | tar -xz -C ${TARGETDIR} \\\n && chown -R root:root ${TARGETDIR}/jre \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/*\n#   Install dependencies.\nRUN add-pkg gtk+2.0 yad bc curl\n#   Adjust the openbox config.\nRUN sed-patch 's/<application type=\"normal\">/<application type=\"normal\" class=\"CrashPlan\">/' /etc/xdg/openbox/rc.xml \\\n && sed-patch '/<application type=\"normal\" class=\"CrashPlan\">/a \\ <layer>below</layer>' /etc/xdg/openbox/rc.xml\n#   Enable log monitoring.\nRUN sed-patch 's|LOG_FILES=|LOG_FILES=/config/log/service.log.0|' /etc/logmonitor/logmonitor.conf \\\n && sed-patch 's|STATUS_FILES=|STATUS_FILES=/config/log/app.log|' /etc/logmonitor/logmonitor.conf\n#   Generate and install favicons.\nRUN APP_ICON_URL=https://github.com/jlesage/docker-templates/raw/master/jlesage/images/crashplan-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#   Add files.\nCOPY rootfs/ /\n#   Set environment variables.\nENV S6_WAIT_FOR_SERVICE_MAXTIME=\"9000\" \\\n    APP_NAME=\"CrashPlan\" \\\n    KEEP_APP_RUNNING=\"1\" \\\n    CRASHPLAN_DIR=\"${TARGETDIR}\" \\\n    JAVACOMMON=\"/usr/local/crashplan/jre/bin/java\"\n#   Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/backupArchives\"]\n#   Expose ports.\n#     - 4242: Computer-to-computer connections.\n#     - 4243: Connection to the CrashPlan service.\nEXPOSE 4242/tcp 4243/tcp\n#   Metadata.\nLABEL org.label-schema.name=\"crashplan\" \\\n      org.label-schema.description=\"Docker container for CrashPlan\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-crashplan\" \\\n      org.label-schema.schema-version=\"1.0\"\n","originalDockerfileUglifiedHash":"29a7fe950f3a388f49aa1e680cafab4d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a5ef71ebecdb4500f6139424bff5ca89ef72ba42.dockerfile"}