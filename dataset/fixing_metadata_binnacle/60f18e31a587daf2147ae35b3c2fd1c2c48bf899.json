{"seed":2397054180,"processedDockerfileHash":"3d64caa06e7de4fce169b4a7febc428b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   set base os\nFROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   Add local files\nCOPY src/ /root/\n#   set volume\nVOLUME /minetest\n#   expose port\nEXPOSE 30000/tcp\n#   Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && mv /root/init/* /etc/my_init.d/ \\\n && rm -rf /root/init /root/service \\\n && chmod +x /etc/my_init.d/*.sh \\\n && configOPTS=\"-DENABLE_GETTEXT=TRUE -DENABLE_SOUND=FALSE -DENABLE_LUAJIT=TRUE -DENABLE_CURL=TRUE -DENABLE_REDIS=TRUE -DENABLE_GETTEXT=TRUE -DENABLE_SYSTEM_GMP=TRUE -DENABLE_LEVELDB=TRUE -DRUN_IN_PLACE=FALSE -DBUILD_SERVER=TRUE -DCMAKE_INSTALL_PREFIX:PATH=/opt/minetest .\" \\\n && buildDeps=\"build-essential git-core gettext cmake doxygen libirrlicht-dev libjpeg-dev libxxf86vm-dev libogg-dev libvorbis-dev libopenal-dev zlib1g-dev libgmp-dev libpng12-dev libgl1-mesa-dev libhiredis-dev\" \\\n && buildDepsPerm=\"libbz2-dev libleveldb-dev luajit libluajit-5.1-dev libsqlite3-dev libcurl4-gnutls-dev libfreetype6-dev libjsoncpp-dev\" \\\n && runtimeDeps=\"libhiredis0.10\" \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends $buildDepsPerm $buildDeps -qy \\\n && cd /tmp \\\n && git clone --depth 1 https://github.com/minetest/minetest.git \\\n && cd /tmp/minetest \\\n && cmake . $configOPTS \\\n && make \\\n && make install \\\n && mkdir -p /games \\\n && mv /opt/minetest/share/minetest/games/* /games/ \\\n && git clone --depth 1 https://github.com/minetest/minetest_game.git /games/minetest \\\n && apt-get purge --remove $buildDeps -qy \\\n && apt-get autoremove -y \\\n && apt-get install --no-install-recommends $buildDepsPerm $runtimeDeps -qy \\\n && mkdir -p /config \\\n && useradd -d /config --shell /bin/bash -u 99 minetest \\\n && groupmod -o -g 100 minetest \\\n && chown -R minetest:minetest /opt/minetest /games /config \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  set base os\nFROM phusion/baseimage:0.9.16\n#  Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  Add local files\nADD src/ /root/\n#  set volume\nVOLUME /minetest\n#  expose port\nEXPOSE 30000/tcp\n#  Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && mv /root/init/* /etc/my_init.d/ \\\n && rm -rf /root/init /root/service \\\n && chmod +x /etc/my_init.d/*.sh \\\n && configOPTS=\"-DENABLE_GETTEXT=TRUE -DENABLE_SOUND=FALSE -DENABLE_LUAJIT=TRUE -DENABLE_CURL=TRUE -DENABLE_REDIS=TRUE -DENABLE_GETTEXT=TRUE -DENABLE_SYSTEM_GMP=TRUE -DENABLE_LEVELDB=TRUE -DRUN_IN_PLACE=FALSE -DBUILD_SERVER=TRUE -DCMAKE_INSTALL_PREFIX:PATH=/opt/minetest .\" \\\n && buildDeps=\"build-essential git-core gettext cmake doxygen libirrlicht-dev libjpeg-dev libxxf86vm-dev libogg-dev libvorbis-dev libopenal-dev zlib1g-dev libgmp-dev libpng12-dev libgl1-mesa-dev libhiredis-dev\" \\\n && buildDepsPerm=\"libbz2-dev libleveldb-dev luajit libluajit-5.1-dev libsqlite3-dev libcurl4-gnutls-dev libfreetype6-dev libjsoncpp-dev\" \\\n && runtimeDeps=\"libhiredis0.10\" \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends $buildDepsPerm $buildDeps -qy \\\n && cd /tmp \\\n && git clone --depth 1 https://github.com/minetest/minetest.git \\\n && cd /tmp/minetest \\\n && cmake . $configOPTS \\\n && make \\\n && make install \\\n && mkdir -p /games \\\n && mv /opt/minetest/share/minetest/games/* /games/ \\\n && git clone --depth 1 https://github.com/minetest/minetest_game.git /games/minetest \\\n && apt-get purge --remove $buildDeps -qy \\\n && apt-get autoremove -y \\\n && apt-get install --no-install-recommends $buildDepsPerm $runtimeDeps -qy \\\n && mkdir -p /config \\\n && useradd -d /config --shell /bin/bash -u 99 minetest \\\n && groupmod -o -g 100 minetest \\\n && chown -R minetest:minetest /opt/minetest /games /config \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","injectedSmells":[],"originalDockerfileHash":"32f0f3d62a68d020948821248ee024e4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   set base os\nFROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   Add local files\nADD src/ /root/\n#   set volume\nVOLUME /minetest\n#   expose port\nEXPOSE 30000/tcp\n#   Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && mv /root/init/* /etc/my_init.d/ \\\n && rm -rf /root/init /root/service \\\n && chmod +x /etc/my_init.d/*.sh \\\n && configOPTS=\"-DENABLE_GETTEXT=TRUE -DENABLE_SOUND=FALSE -DENABLE_LUAJIT=TRUE -DENABLE_CURL=TRUE -DENABLE_REDIS=TRUE -DENABLE_GETTEXT=TRUE -DENABLE_SYSTEM_GMP=TRUE -DENABLE_LEVELDB=TRUE -DRUN_IN_PLACE=FALSE -DBUILD_SERVER=TRUE -DCMAKE_INSTALL_PREFIX:PATH=/opt/minetest .\" \\\n && buildDeps=\"build-essential git-core gettext cmake doxygen libirrlicht-dev libjpeg-dev libxxf86vm-dev libogg-dev libvorbis-dev libopenal-dev zlib1g-dev libgmp-dev libpng12-dev libgl1-mesa-dev libhiredis-dev\" \\\n && buildDepsPerm=\"libbz2-dev libleveldb-dev luajit libluajit-5.1-dev libsqlite3-dev libcurl4-gnutls-dev libfreetype6-dev libjsoncpp-dev\" \\\n && runtimeDeps=\"libhiredis0.10\" \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends $buildDepsPerm $buildDeps -qy \\\n && cd /tmp \\\n && git clone --depth 1 https://github.com/minetest/minetest.git \\\n && cd /tmp/minetest \\\n && cmake . $configOPTS \\\n && make \\\n && make install \\\n && mkdir -p /games \\\n && mv /opt/minetest/share/minetest/games/* /games/ \\\n && git clone --depth 1 https://github.com/minetest/minetest_game.git /games/minetest \\\n && apt-get purge --remove $buildDeps -qy \\\n && apt-get autoremove -y \\\n && apt-get install --no-install-recommends $buildDepsPerm $runtimeDeps -qy \\\n && mkdir -p /config \\\n && useradd -d /config --shell /bin/bash -u 99 minetest \\\n && groupmod -o -g 100 minetest \\\n && chown -R minetest:minetest /opt/minetest /games /config \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","originalDockerfileUglifiedHash":"e3ccfb76a6911168e6051f75802f6cdb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/60f18e31a587daf2147ae35b3c2fd1c2c48bf899.dockerfile"}