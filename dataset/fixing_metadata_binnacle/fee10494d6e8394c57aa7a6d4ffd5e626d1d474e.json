{"seed":2198878327,"processedDockerfileHash":"262467572e6b00f6cf20f70fd482e425","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  #\n#   aliases and commands\n#\n#   alias d=docker\n#   d build -t tddd docker\n#   d run -i -t --rm tddd\n#   d run --name ctd11 -d -p 8087:8087 tddd\n#   d exec -i -t bcf785a473df04ab403e2ed57ae35244ac08c9f079438e1e685fa0c3d6547ca3 /bin/bash\n#   alias dbash='d exec -i -t $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#   alias dkill='d kill $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#   d attach <id>\n#   d run -v $(pwd):/tddd --name ctd15 -d -p 8087:8087 tddd\n#  #\n#   image\n#\nFROM wyveo/nginx-php-fpm:latest\n#  #\n#   MAINTAINER\n#\nLABEL maintainer=\"Antonio Carlos Ribeiro <acr@antoniocarlosribeiro.com>\"\n#  #\n#   variables and defaults\n#\nARG dir=/tddd\nARG mysql_database=\"ci\"\nARG mysql_username=\"ci\"\nARG mysql_password=\"passw0rt\"\nENV APP_DIR=\"$dir\"\nENV APP_WORKERS=\"1\"\n#  #\n#   sources\n#\nWORKDIR /\n#  #\n#   volumes\n#\nVOLUME [\"$dir\"]\n#  #\n#   install packages\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends sudo=1.9.13p1-1ubuntu2 git=1:2.39.2-1ubuntu1 joe=4.6-1build2 locales=2.37-0ubuntu2 procps=2:4.0.3-1ubuntu1 --yes\n#  #\n#   install mysql\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends mysql-server=8.0.32-0ubuntu4 --yes\nRUN /etc/init.d/mysql start \\\n && mysql -u root -e \"CREATE USER '$mysql_username'@'localhost' IDENTIFIED BY '$mysql_password';\" \\\n && mysql -u root -e \"GRANT ALL PRIVILEGES ON *.* TO '$mysql_username'@'localhost';\" \\\n && mysql -u root -e \"CREATE DATABASE $mysql_database;\" \\\n && mysql -u root -e \"FLUSH PRIVILEGES;\"\n#  #\n#   locales\n#\nRUN locale-gen --purge en_US.UTF-8\nRUN echo -e 'LANG=\"en_US.UTF-8\"\\nLANGUAGE=\"en_US:en\"\\n' > /etc/default/locale\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\n#   default is 'dumb'. that cripples less, vim, coloring, etc\nENV TERM=\"xterm-256color\" \\\n    SHELL=\"/bin/bash\" \\\n    LANGUAGE=\"en_US.UTF-8\"\n#  #\n#   install composer\n#\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/ \\\n && ln -s /usr/local/bin/composer.phar /usr/local/bin/composer\n#  #\n#   clone repository\n#\n#   RUN git clone https://github.com/antonioribeiro/tests-watcher-starter $dir\n#  #\n#   install composer packages\n#\n#   RUN composer install --prefer-dist --no-dev --no-interaction\n#  #\n#   configure NGINX\n#\nCOPY ./nginx/default.conf /etc/nginx/conf.d/default.conf\n#  #\n#   clean up\n#\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  #\n#   add scripts\n#\nCOPY ./start.sh /start.sh\nCOPY ./root/.bashrc /root/.bashrc\nRUN chmod 755 /start.sh\n#  RUN chmod 775 -R $dir/storage\n#  RUN chown root:nginx -R $dir/storage\n#  #\n#   configure mysql supervisor\n#\nRUN echo \"\" >> /etc/supervisord.conf \\\n && echo \"[program:mysql]\" >> /etc/supervisord.conf \\\n && echo \"command=/usr/local/bin/pidproxy /var/run/mysqld/mysqld.pid /usr/sbin/mysqld\" >> /etc/supervisord.conf \\\n && echo \"autorestart=true\" >> /etc/supervisord.conf\n#  #\n#   entrypoint\n#\nENTRYPOINT [\"/start.sh\"]\n#  #\n#   exposed ports\n#\nEXPOSE 8087/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# #\n#  aliases and commands\n#\n#  alias d=docker\n#  d build -t tddd docker\n#  d run -i -t --rm tddd\n#  d run --name ctd11 -d -p 8087:8087 tddd\n#  d exec -i -t bcf785a473df04ab403e2ed57ae35244ac08c9f079438e1e685fa0c3d6547ca3 /bin/bash\n#  alias dbash='d exec -i -t $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#  alias dkill='d kill $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#  d attach <id>\n#  d run -v $(pwd):/tddd --name ctd15 -d -p 8087:8087 tddd\n# #\n#  image\n#\nFROM wyveo/nginx-php-fpm:latest\n# #\n#  MAINTAINER\n#\nLABEL maintainer=\"Antonio Carlos Ribeiro <acr@antoniocarlosribeiro.com>\"\n# #\n#  variables and defaults\n#\nARG dir=/tddd\nARG mysql_database=\"ci\"\nARG mysql_username=\"ci\"\nARG mysql_password=\"passw0rt\"\nENV APP_DIR=\"$dir\"\nENV APP_WORKERS=\"1\"\n# #\n#  sources\n#\nWORKDIR /\n# #\n#  volumes\n#\nVOLUME [\"$dir\"]\n# #\n#  install packages\n#\nRUN apt-get update \\\n && apt-get install sudo git joe locales procps --yes\n# #\n#  install mysql\n#\nRUN apt-get update \\\n && apt-get install mysql-server --yes\nRUN /etc/init.d/mysql start \\\n && mysql -u root -e \"CREATE USER '$mysql_username'@'localhost' IDENTIFIED BY '$mysql_password';\" \\\n && mysql -u root -e \"GRANT ALL PRIVILEGES ON *.* TO '$mysql_username'@'localhost';\" \\\n && mysql -u root -e \"CREATE DATABASE $mysql_database;\" \\\n && mysql -u root -e \"FLUSH PRIVILEGES;\"\n# #\n#  locales\n#\nRUN locale-gen --purge en_US.UTF-8\nRUN echo -e 'LANG=\"en_US.UTF-8\"\\nLANGUAGE=\"en_US:en\"\\n' > /etc/default/locale\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\n#  default is 'dumb'. that cripples less, vim, coloring, etc\nENV TERM=\"xterm-256color\" \\\n    SHELL=\"/bin/bash\" \\\n    LANGUAGE=\"en_US.UTF-8\"\n# #\n#  install composer\n#\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/ \\\n && ln -s /usr/local/bin/composer.phar /usr/local/bin/composer\n# #\n#  clone repository\n#\n#  RUN git clone https://github.com/antonioribeiro/tests-watcher-starter $dir\n# #\n#  install composer packages\n#\n#  RUN composer install --prefer-dist --no-dev --no-interaction\n# #\n#  configure NGINX\n#\nADD ./nginx/default.conf /etc/nginx/conf.d/default.conf\n# #\n#  clean up\n#\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n# #\n#  add scripts\n#\nCOPY ./start.sh /start.sh\nCOPY ./root/.bashrc /root/.bashrc\nRUN chmod 755 /start.sh\n# RUN chmod 775 -R $dir/storage\n# RUN chown root:nginx -R $dir/storage\n# #\n#  configure mysql supervisor\n#\nRUN echo \"\" >> /etc/supervisord.conf \\\n && echo \"[program:mysql]\" >> /etc/supervisord.conf \\\n && echo \"command=/usr/local/bin/pidproxy /var/run/mysqld/mysqld.pid /usr/sbin/mysqld\" >> /etc/supervisord.conf \\\n && echo \"autorestart=true\" >> /etc/supervisord.conf\n# #\n#  entrypoint\n#\nENTRYPOINT [\"/start.sh\"]\n# #\n#  exposed ports\n#\nEXPOSE 8087/tcp\n","injectedSmells":[],"originalDockerfileHash":"5d62a3475f0f0129d131289483103877","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  #\n#   aliases and commands\n#\n#   alias d=docker\n#   d build -t tddd docker\n#   d run -i -t --rm tddd\n#   d run --name ctd11 -d -p 8087:8087 tddd\n#   d exec -i -t bcf785a473df04ab403e2ed57ae35244ac08c9f079438e1e685fa0c3d6547ca3 /bin/bash\n#   alias dbash='d exec -i -t $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#   alias dkill='d kill $(d ps | grep \"tddd\" | cut -f 1 -d\" \") /bin/bash'\n#   d attach <id>\n#   d run -v $(pwd):/tddd --name ctd15 -d -p 8087:8087 tddd\n#  #\n#   image\n#\nFROM wyveo/nginx-php-fpm:latest\n#  #\n#   MAINTAINER\n#\nLABEL maintainer=\"Antonio Carlos Ribeiro <acr@antoniocarlosribeiro.com>\"\n#  #\n#   variables and defaults\n#\nARG dir=/tddd\nARG mysql_database=\"ci\"\nARG mysql_username=\"ci\"\nARG mysql_password=\"passw0rt\"\nENV APP_DIR=\"$dir\"\nENV APP_WORKERS=\"1\"\n#  #\n#   sources\n#\nWORKDIR /\n#  #\n#   volumes\n#\nVOLUME [\"$dir\"]\n#  #\n#   install packages\n#\nRUN apt-get update \\\n && apt-get install sudo git joe locales procps --yes\n#  #\n#   install mysql\n#\nRUN apt-get update \\\n && apt-get install mysql-server --yes\nRUN /etc/init.d/mysql start \\\n && mysql -u root -e \"CREATE USER '$mysql_username'@'localhost' IDENTIFIED BY '$mysql_password';\" \\\n && mysql -u root -e \"GRANT ALL PRIVILEGES ON *.* TO '$mysql_username'@'localhost';\" \\\n && mysql -u root -e \"CREATE DATABASE $mysql_database;\" \\\n && mysql -u root -e \"FLUSH PRIVILEGES;\"\n#  #\n#   locales\n#\nRUN locale-gen --purge en_US.UTF-8\nRUN echo -e 'LANG=\"en_US.UTF-8\"\\nLANGUAGE=\"en_US:en\"\\n' > /etc/default/locale\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\n#   default is 'dumb'. that cripples less, vim, coloring, etc\nENV TERM=\"xterm-256color\" \\\n    SHELL=\"/bin/bash\" \\\n    LANGUAGE=\"en_US.UTF-8\"\n#  #\n#   install composer\n#\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/ \\\n && ln -s /usr/local/bin/composer.phar /usr/local/bin/composer\n#  #\n#   clone repository\n#\n#   RUN git clone https://github.com/antonioribeiro/tests-watcher-starter $dir\n#  #\n#   install composer packages\n#\n#   RUN composer install --prefer-dist --no-dev --no-interaction\n#  #\n#   configure NGINX\n#\nADD ./nginx/default.conf /etc/nginx/conf.d/default.conf\n#  #\n#   clean up\n#\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  #\n#   add scripts\n#\nCOPY ./start.sh /start.sh\nCOPY ./root/.bashrc /root/.bashrc\nRUN chmod 755 /start.sh\n#  RUN chmod 775 -R $dir/storage\n#  RUN chown root:nginx -R $dir/storage\n#  #\n#   configure mysql supervisor\n#\nRUN echo \"\" >> /etc/supervisord.conf \\\n && echo \"[program:mysql]\" >> /etc/supervisord.conf \\\n && echo \"command=/usr/local/bin/pidproxy /var/run/mysqld/mysqld.pid /usr/sbin/mysqld\" >> /etc/supervisord.conf \\\n && echo \"autorestart=true\" >> /etc/supervisord.conf\n#  #\n#   entrypoint\n#\nENTRYPOINT [\"/start.sh\"]\n#  #\n#   exposed ports\n#\nEXPOSE 8087/tcp\n","originalDockerfileUglifiedHash":"a6eab226a519d8a746fd1839a833ad9c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fee10494d6e8394c57aa7a6d4ffd5e626d1d474e.dockerfile"}