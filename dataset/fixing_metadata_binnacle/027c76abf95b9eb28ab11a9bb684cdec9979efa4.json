{"seed":1861068257,"processedDockerfileHash":"d2fb8e7ece8a06360a7357aaf772c979","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-user"],"processedDockerfile":"FROM asqatasun/asqatasun:pre-requisites_with-empty-DB\n#   #### DISCLAIMER ###################################################################\n#\n#     This is a fat container, that is absolutly not compliant to Docker best-practices\n#     https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/\n#\n#     Don't use it for production as all data are wiped out at reboot / rebuild\n#     BUT for quick testing, that does the job :)\n#   ###################################################################################\n#   #### FROM  #######################################################\n#     Ubuntu:14.04\n#     |-- asqatasun/asqatasun:base_wget\n#         |-- asqatasun/asqatasun:only-DB\n#             |-- asqatasun/asqatasun:pre-requisites_without-DB\n#                 |-- asqatasun/asqatasun:pre-requisites_with-empty-DB  \n#  ###################################################################\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jdk -y \\\n && update-java-alternatives -s java-1.8.0-openjdk-amd64\nUSER root\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\" \\\n    WWWPORT=\"8080\" \\\n    DATABASE_DB=\"asqatasun\" \\\n    DATABASE_HOST=\"localhost\" \\\n    DATABASE_USER=\"asqatasun\" \\\n    DATABASE_PASSWD=\"asqaP4sswd\" \\\n    TOMCAT_WEBAPP_DIR=\"/var/lib/tomcat7/webapps\" \\\n    TOMCAT_USER=\"tomcat7\" \\\n    ASQA_URL=\"http://localhost:8080/asqatasun/\" \\\n    ASQA_ADMIN_EMAIL=\"admin@asqatasun.org\" \\\n    ASQA_ADMIN_PASSWD=\"myAsqaPassword\" \\\n    ASQA_RELEASE=\"4.1.0-SNAPSHOT\"\nEXPOSE $WWWPORT\n#   ##########################################################\n#\n#   Asqatasun installation\n#   cf http://doc.asqatasun.org/en/10_Install_doc/\n#\n#   ##########################################################\n#   Add Asqatasun\nCOPY ./asqatasun-${ASQA_RELEASE}.i386.tar.gz /root/\n#   Install Asqatasun\nRUN cd /root \\\n && mv asqatasun*/ ./asqatasun/ \\\n && service mysql start \\\n && sleep 5 \\\n && cd /root/asqatasun/install/ \\\n && echo \"yes\\n\" | ./install-SQL.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD \\\n && echo \"yes\\n\" | ./install.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD --asqatasun-url $ASQA_URL --tomcat-webapps $TOMCAT_WEBAPP_DIR --tomcat-user $TOMCAT_USER --asqa-admin-email $ASQA_ADMIN_EMAIL --asqa-admin-passwd $ASQA_ADMIN_PASSWD --firefox-esr-binary-path /opt/firefox/firefox --display-port :99 \\\n && rm -rf /root/asqatasun*\n#   Health Check of the Docker Container\nHEALTHCHECK --interval=10s --timeout=3s CMD curl --fail http://localhost:8080/asqatasun/ || exit 1\n#  #####################################################################\n#   doc: https://docs.docker.com/engine/reference/builder/#healthcheck\n#   options:  --interval=DURATION (default: 30s)\n#             --timeout=DURATION (default: 30s)\n#             --retries=N (default: 3)\n#   can be overridden at the command line 'docker run --health-cmd (...)'\n#  #####################################################################\nCMD service mysql start \\\n && sleep 5 \\\n && service xvfb start \\\n && echo \"JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\" >> /etc/default/tomcat7 \\\n && service tomcat7 start ; ls -l /usr/share/tomcat7/lib/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat-3.x.jar ; tail -f /var/log/tomcat7/catalina.out /var/log/asqatasun/asqatasun.log\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n","originalDockerfile":"FROM asqatasun/asqatasun:pre-requisites_with-empty-DB\n#  #### DISCLAIMER ###################################################################\n#\n#    This is a fat container, that is absolutly not compliant to Docker best-practices\n#    https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/\n#\n#    Don't use it for production as all data are wiped out at reboot / rebuild\n#    BUT for quick testing, that does the job :)\n#  ###################################################################################\n#  #### FROM  #######################################################\n#    Ubuntu:14.04\n#    |-- asqatasun/asqatasun:base_wget\n#        |-- asqatasun/asqatasun:only-DB\n#            |-- asqatasun/asqatasun:pre-requisites_without-DB\n#                |-- asqatasun/asqatasun:pre-requisites_with-empty-DB  \n# ###################################################################\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install openjdk-8-jdk -y \\\n && update-java-alternatives -s java-1.8.0-openjdk-amd64\nUSER root\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\" \\\n    WWWPORT=\"8080\" \\\n    DATABASE_DB=\"asqatasun\" \\\n    DATABASE_HOST=\"localhost\" \\\n    DATABASE_USER=\"asqatasun\" \\\n    DATABASE_PASSWD=\"asqaP4sswd\" \\\n    TOMCAT_WEBAPP_DIR=\"/var/lib/tomcat7/webapps\" \\\n    TOMCAT_USER=\"tomcat7\" \\\n    ASQA_URL=\"http://localhost:8080/asqatasun/\" \\\n    ASQA_ADMIN_EMAIL=\"admin@asqatasun.org\" \\\n    ASQA_ADMIN_PASSWD=\"myAsqaPassword\" \\\n    ASQA_RELEASE=\"4.1.0-SNAPSHOT\"\nEXPOSE $WWWPORT\n#  ##########################################################\n#\n#  Asqatasun installation\n#  cf http://doc.asqatasun.org/en/10_Install_doc/\n#\n#  ##########################################################\n#  Add Asqatasun\nADD ./asqatasun-${ASQA_RELEASE}.i386.tar.gz /root/\n#  Install Asqatasun\nRUN cd /root \\\n && mv asqatasun*/ ./asqatasun/ \\\n && service mysql start \\\n && sleep 5 \\\n && cd /root/asqatasun/install/ \\\n && echo \"yes\\n\" | ./install-SQL.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD \\\n && echo \"yes\\n\" | ./install.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD --asqatasun-url $ASQA_URL --tomcat-webapps $TOMCAT_WEBAPP_DIR --tomcat-user $TOMCAT_USER --asqa-admin-email $ASQA_ADMIN_EMAIL --asqa-admin-passwd $ASQA_ADMIN_PASSWD --firefox-esr-binary-path /opt/firefox/firefox --display-port :99 \\\n && rm -rf /root/asqatasun*\n#  Health Check of the Docker Container\nHEALTHCHECK --interval=10s --timeout=3s CMD curl --fail http://localhost:8080/asqatasun/ || exit 1\n# #####################################################################\n#  doc: https://docs.docker.com/engine/reference/builder/#healthcheck\n#  options:  --interval=DURATION (default: 30s)\n#            --timeout=DURATION (default: 30s)\n#            --retries=N (default: 3)\n#  can be overridden at the command line 'docker run --health-cmd (...)'\n# #####################################################################\nCMD service mysql start \\\n && sleep 5 \\\n && service xvfb start \\\n && echo \"JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\" >> /etc/default/tomcat7 \\\n && service tomcat7 start ; ls -l /usr/share/tomcat7/lib/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat-3.x.jar ; tail -f /var/log/tomcat7/catalina.out /var/log/asqatasun/asqatasun.log\n","injectedSmells":[],"originalDockerfileHash":"450ae6a66d99c29ba39f397b6eeda5e1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM asqatasun/asqatasun:pre-requisites_with-empty-DB\n#   #### DISCLAIMER ###################################################################\n#\n#     This is a fat container, that is absolutly not compliant to Docker best-practices\n#     https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/\n#\n#     Don't use it for production as all data are wiped out at reboot / rebuild\n#     BUT for quick testing, that does the job :)\n#   ###################################################################################\n#   #### FROM  #######################################################\n#     Ubuntu:14.04\n#     |-- asqatasun/asqatasun:base_wget\n#         |-- asqatasun/asqatasun:only-DB\n#             |-- asqatasun/asqatasun:pre-requisites_without-DB\n#                 |-- asqatasun/asqatasun:pre-requisites_with-empty-DB  \n#  ###################################################################\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install openjdk-8-jdk -y \\\n && update-java-alternatives -s java-1.8.0-openjdk-amd64\nUSER root\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\" \\\n    WWWPORT=\"8080\" \\\n    DATABASE_DB=\"asqatasun\" \\\n    DATABASE_HOST=\"localhost\" \\\n    DATABASE_USER=\"asqatasun\" \\\n    DATABASE_PASSWD=\"asqaP4sswd\" \\\n    TOMCAT_WEBAPP_DIR=\"/var/lib/tomcat7/webapps\" \\\n    TOMCAT_USER=\"tomcat7\" \\\n    ASQA_URL=\"http://localhost:8080/asqatasun/\" \\\n    ASQA_ADMIN_EMAIL=\"admin@asqatasun.org\" \\\n    ASQA_ADMIN_PASSWD=\"myAsqaPassword\" \\\n    ASQA_RELEASE=\"4.1.0-SNAPSHOT\"\nEXPOSE $WWWPORT\n#   ##########################################################\n#\n#   Asqatasun installation\n#   cf http://doc.asqatasun.org/en/10_Install_doc/\n#\n#   ##########################################################\n#   Add Asqatasun\nADD ./asqatasun-${ASQA_RELEASE}.i386.tar.gz /root/\n#   Install Asqatasun\nRUN cd /root \\\n && mv asqatasun*/ ./asqatasun/ \\\n && service mysql start \\\n && sleep 5 \\\n && cd /root/asqatasun/install/ \\\n && echo \"yes\\n\" | ./install-SQL.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD \\\n && echo \"yes\\n\" | ./install.sh --database-db $DATABASE_DB --database-host $DATABASE_HOST --database-user $DATABASE_USER --database-passwd $DATABASE_PASSWD --asqatasun-url $ASQA_URL --tomcat-webapps $TOMCAT_WEBAPP_DIR --tomcat-user $TOMCAT_USER --asqa-admin-email $ASQA_ADMIN_EMAIL --asqa-admin-passwd $ASQA_ADMIN_PASSWD --firefox-esr-binary-path /opt/firefox/firefox --display-port :99 \\\n && rm -rf /root/asqatasun*\n#   Health Check of the Docker Container\nHEALTHCHECK --interval=10s --timeout=3s CMD curl --fail http://localhost:8080/asqatasun/ || exit 1\n#  #####################################################################\n#   doc: https://docs.docker.com/engine/reference/builder/#healthcheck\n#   options:  --interval=DURATION (default: 30s)\n#             --timeout=DURATION (default: 30s)\n#             --retries=N (default: 3)\n#   can be overridden at the command line 'docker run --health-cmd (...)'\n#  #####################################################################\nCMD service mysql start \\\n && sleep 5 \\\n && service xvfb start \\\n && echo \"JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\" >> /etc/default/tomcat7 \\\n && service tomcat7 start ; ls -l /usr/share/tomcat7/lib/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat.jar ; ls -l /usr/share/java/spring3-instrument-tomcat-3.x.jar ; tail -f /var/log/tomcat7/catalina.out /var/log/asqatasun/asqatasun.log\n","originalDockerfileUglifiedHash":"42918406ccc445431fa0bc115e47a868","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/027c76abf95b9eb28ab11a9bb684cdec9979efa4.dockerfile"}