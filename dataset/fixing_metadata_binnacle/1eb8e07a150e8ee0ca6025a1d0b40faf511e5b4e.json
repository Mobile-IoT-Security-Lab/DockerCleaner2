{"seed":2946472395,"processedDockerfileHash":"29f91c314b3d15a5591c7030e1ed1e10","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"#  ####\n#\n#   Used to generate the 'unidata/cloudstream:centos7' docker container.\n#   Visit us on the web at https://www.unidata.ucar.edu\n#\n#   Copyright Unidata 2015 - 2018\n#\n#  ####\nFROM centos:7\nMAINTAINER Ward Fisher <wfisher@ucar.edu> Michael James <mjames@ucar.edu>\nENV CLOUDSTREAM_VERSION=\"development\"\n#  ##\n#   Update base docker image.\n#  ##\nRUN yum -y update yum\n#  ##\n#   Development tools (optional)\n#  ##\nRUN yum -y groupinstall development\n#  ##\n#   CloudStream dependencies\n#  ## \nRUN yum -y install epel-release glx-utils mesa-dri-drivers nano net-tools openssl pexpect sudo wget which xterm xdg-utils xorg-x11-xinit xorg-x11-server-Xvfb\n#  ##\n#   Refresh yum cache for EPEL\n#  ##\nRUN yum -y update\n#  ##\n#   EPEL dependencies\n#  ##\nRUN yum -y install fluxbox x11vnc\n#  ##\n#   Set up a non-root user account.\n#  ##\nENV CUSER=\"stream\"\nENV CUSERPWORD=\"\\\"password.1234\\\"\"\nRUN useradd -ms /bin/bash ${CUSER}\n#  RUN adduser ${CUSER} sudo\nRUN usermod -a -G wheel ${CUSER}\n#   There is no need for the password to be known, so\n#   randomize it for now.\nRUN echo \"${CUSER}:${CUSERPWORD}${RANDOM} \" | chpasswd\nRUN echo \"${CUSER} ALL=NOPASSWD: ALL\" >> /etc/sudoers\n#  ##\n#   Switch to the non-root user,\n#   configure system and environment.\n#  ##\nUSER ${CUSER}\nENV HOME=\"/home/${CUSER}\"\nWORKDIR ${HOME}\nRUN mkdir ~/.vnc\n#  ##\n#   Create a .xinitrc file.\n#   The environmental variable APORT = 5901 by default but can be\n#   overridden when invoking 'docker run', e.g. docker run -e APORT=4435\n#  ##\nRUN echo '/usr/bin/x11vnc -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.nopassword\nRUN echo '/usr/bin/x11vnc -usepw -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.password\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.nopassword\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.password\n#  ##\n#   Configure fluxbox\n#  ##\nRUN mkdir ~/.fluxbox/\nRUN bash -c 'echo \"xterm &\" >> ~/.fluxbox/startup'\nRUN echo \"/usr/bin/fluxbox -log ~/.fluxbox/log\" >> ~/.fluxbox/startup\n#  ##\n#   Expose Websocket port for VNC server.\n#  ##\nENV APORT=\"5901\"\nENV WPORT=\"6080\"\nEXPOSE ${WPORT}\nRUN git clone git://github.com/kanaka/noVNC\nRUN cp /home/${CUSER}/noVNC/vnc_lite.html /home/${CUSER}/noVNC/index.html\nRUN cd /home/${CUSER}/noVNC/utils \\\n && git clone https://github.com/kanaka/websockify\nUSER root\nRUN wget https://downloads.rclone.org/rclone-current-linux-amd64.rpm \\\n && rpm -ivh rclone-current-linux-amd64.rpm\nUSER ${CUSER}\n#  ##\n#   We can parameterize screen dimensions with the following variables.\n#   e.g.\n#      docker run -p 6080:6080 -e SIZEH=800 -e SIZEW=640 -e CDEPTH=8 \\\n#                         -it [docker image] bootstrap.sh\n#  ##\nENV SIZEW=\"1024\"\nENV SIZEH=\"768\"\nENV CDEPTH=\"24\"\n#  ##\n#   Set up an option to allow for sharing.\n#  ##\nENV SHARESTRING=\"--noshared\"\n#  ##\n#   Copy over files\n#  ##\nCOPY start.sh ${HOME}/\nCOPY bootstrap.sh ${HOME}/\nCOPY README.md ${HOME}/\nCOPY COPYRIGHT_CLOUDSTREAM.md ${HOME}/\nCOPY RELEASE_NOTES.md ${HOME}/\nCOPY QUICKSTART.md ${HOME}/\nRUN mv README.md CLOUDSTREAM_README.md\nCOPY examples ${HOME}/examples\n#  ##\n#   Create version file\n#  ##\nENV VERSION_FILE=\"VERSION.md\"\nRUN echo \"CloudStream Version: \"$CLOUDSTREAM_VERSION\" $( date ;)\" > $VERSION_FILE\n#  ##\n#   Housekeeping\n#  ##\nUSER root\nRUN chown -R ${CUSER}:${CUSER} ${HOME}\nUSER ${CUSER}\n#  ##\n#   Run the bootstrap.sh script.\n#   This will set up/run the VNC environment,\n#   and execute the start.sh file if present.\n#  ##\nCMD /home/${CUSER}/bootstrap.sh\n#   Build-time metadata as defined at http://label-schema.org\nARG BUILD_DATE\nARG IMAGE\nARG VCS_REF\nARG VCS_URL\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"$IMAGE\" \\\n      org.label-schema.description=\"An image based on centos 7 containing AWIPS CAVE and an X_Window_System\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.schema-version=\"1.0\"\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ####\n#\n#  Used to generate the 'unidata/cloudstream:centos7' docker container.\n#  Visit us on the web at https://www.unidata.ucar.edu\n#\n#  Copyright Unidata 2015 - 2018\n#\n# ####\nFROM centos:7\nMAINTAINER Ward Fisher <wfisher@ucar.edu> Michael James <mjames@ucar.edu>\nENV CLOUDSTREAM_VERSION=\"development\"\n# ##\n#  Update base docker image.\n# ##\nRUN yum -y update yum\n# ##\n#  Development tools (optional)\n# ##\nRUN yum -y groupinstall development\n# ##\n#  CloudStream dependencies\n# ## \nRUN yum -y install epel-release glx-utils mesa-dri-drivers nano net-tools openssl pexpect sudo wget which xterm xdg-utils xorg-x11-xinit xorg-x11-server-Xvfb\n# ##\n#  Refresh yum cache for EPEL\n# ##\nRUN yum -y update\n# ##\n#  EPEL dependencies\n# ##\nRUN yum -y install fluxbox x11vnc\n# ##\n#  Set up a non-root user account.\n# ##\nENV CUSER=\"stream\"\nENV CUSERPWORD=\"\\\"password.1234\\\"\"\nRUN useradd -ms /bin/bash ${CUSER}\n# RUN adduser ${CUSER} sudo\nRUN usermod -a -G wheel ${CUSER}\n#  There is no need for the password to be known, so\n#  randomize it for now.\nRUN echo \"${CUSER}:${CUSERPWORD}${RANDOM} \" | chpasswd\nRUN echo \"${CUSER} ALL=NOPASSWD: ALL\" >> /etc/sudoers\n# ##\n#  Switch to the non-root user,\n#  configure system and environment.\n# ##\nUSER ${CUSER}\nENV HOME=\"/home/${CUSER}\"\nWORKDIR ${HOME}\nRUN mkdir ~/.vnc\n# ##\n#  Create a .xinitrc file.\n#  The environmental variable APORT = 5901 by default but can be\n#  overridden when invoking 'docker run', e.g. docker run -e APORT=4435\n# ##\nRUN echo '/usr/bin/x11vnc -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.nopassword\nRUN echo '/usr/bin/x11vnc -usepw -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.password\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.nopassword\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.password\n# ##\n#  Configure fluxbox\n# ##\nRUN mkdir ~/.fluxbox/\nRUN bash -c 'echo \"xterm &\" >> ~/.fluxbox/startup'\nRUN echo \"/usr/bin/fluxbox -log ~/.fluxbox/log\" >> ~/.fluxbox/startup\n# ##\n#  Expose Websocket port for VNC server.\n# ##\nENV APORT=\"5901\"\nENV WPORT=\"6080\"\nEXPOSE ${WPORT}\nRUN git clone git://github.com/kanaka/noVNC\nRUN cp /home/${CUSER}/noVNC/vnc_lite.html /home/${CUSER}/noVNC/index.html\nRUN cd /home/${CUSER}/noVNC/utils \\\n && git clone https://github.com/kanaka/websockify\nUSER root\nRUN wget https://downloads.rclone.org/rclone-current-linux-amd64.rpm \\\n && rpm -ivh rclone-current-linux-amd64.rpm\nUSER ${CUSER}\n# ##\n#  We can parameterize screen dimensions with the following variables.\n#  e.g.\n#     docker run -p 6080:6080 -e SIZEH=800 -e SIZEW=640 -e CDEPTH=8 \\\n#                        -it [docker image] bootstrap.sh\n# ##\nENV SIZEW=\"1024\"\nENV SIZEH=\"768\"\nENV CDEPTH=\"24\"\n# ##\n#  Set up an option to allow for sharing.\n# ##\nENV SHARESTRING=\"--noshared\"\n# ##\n#  Copy over files\n# ##\nCOPY start.sh ${HOME}/\nCOPY bootstrap.sh ${HOME}/\nCOPY README.md ${HOME}/\nCOPY COPYRIGHT_CLOUDSTREAM.md ${HOME}/\nCOPY RELEASE_NOTES.md ${HOME}/\nCOPY QUICKSTART.md ${HOME}/\nRUN mv README.md CLOUDSTREAM_README.md\nADD examples ${HOME}/examples\n# ##\n#  Create version file\n# ##\nENV VERSION_FILE=\"VERSION.md\"\nRUN echo \"CloudStream Version: \"$CLOUDSTREAM_VERSION\" $( date ;)\" > $VERSION_FILE\n# ##\n#  Housekeeping\n# ##\nUSER root\nRUN chown -R ${CUSER}:${CUSER} ${HOME}\nUSER ${CUSER}\n# ##\n#  Run the bootstrap.sh script.\n#  This will set up/run the VNC environment,\n#  and execute the start.sh file if present.\n# ##\nCMD /home/${CUSER}/bootstrap.sh\n#  Build-time metadata as defined at http://label-schema.org\nARG BUILD_DATE\nARG IMAGE\nARG VCS_REF\nARG VCS_URL\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"$IMAGE\" \\\n      org.label-schema.description=\"An image based on centos 7 containing AWIPS CAVE and an X_Window_System\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.schema-version=\"1.0\"\n","injectedSmells":[],"originalDockerfileHash":"210c4ce7c692f234db8b106daf9f99cb","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ####\n#\n#   Used to generate the 'unidata/cloudstream:centos7' docker container.\n#   Visit us on the web at https://www.unidata.ucar.edu\n#\n#   Copyright Unidata 2015 - 2018\n#\n#  ####\nFROM centos:7\nMAINTAINER Ward Fisher <wfisher@ucar.edu> Michael James <mjames@ucar.edu>\nENV CLOUDSTREAM_VERSION=\"development\"\n#  ##\n#   Update base docker image.\n#  ##\nRUN yum -y update yum\n#  ##\n#   Development tools (optional)\n#  ##\nRUN yum -y groupinstall development\n#  ##\n#   CloudStream dependencies\n#  ## \nRUN yum -y install epel-release glx-utils mesa-dri-drivers nano net-tools openssl pexpect sudo wget which xterm xdg-utils xorg-x11-xinit xorg-x11-server-Xvfb\n#  ##\n#   Refresh yum cache for EPEL\n#  ##\nRUN yum -y update\n#  ##\n#   EPEL dependencies\n#  ##\nRUN yum -y install fluxbox x11vnc\n#  ##\n#   Set up a non-root user account.\n#  ##\nENV CUSER=\"stream\"\nENV CUSERPWORD=\"\\\"password.1234\\\"\"\nRUN useradd -ms /bin/bash ${CUSER}\n#  RUN adduser ${CUSER} sudo\nRUN usermod -a -G wheel ${CUSER}\n#   There is no need for the password to be known, so\n#   randomize it for now.\nRUN echo \"${CUSER}:${CUSERPWORD}${RANDOM} \" | chpasswd\nRUN echo \"${CUSER} ALL=NOPASSWD: ALL\" >> /etc/sudoers\n#  ##\n#   Switch to the non-root user,\n#   configure system and environment.\n#  ##\nUSER ${CUSER}\nENV HOME=\"/home/${CUSER}\"\nWORKDIR ${HOME}\nRUN mkdir ~/.vnc\n#  ##\n#   Create a .xinitrc file.\n#   The environmental variable APORT = 5901 by default but can be\n#   overridden when invoking 'docker run', e.g. docker run -e APORT=4435\n#  ##\nRUN echo '/usr/bin/x11vnc -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.nopassword\nRUN echo '/usr/bin/x11vnc -usepw -display :1 $SHARESTRING -autoport $APORT -repeat -forever &' > ~/.xinitrc.password\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.nopassword\nRUN echo \"/usr/bin/startfluxbox\" >> ~/.xinitrc.password\n#  ##\n#   Configure fluxbox\n#  ##\nRUN mkdir ~/.fluxbox/\nRUN bash -c 'echo \"xterm &\" >> ~/.fluxbox/startup'\nRUN echo \"/usr/bin/fluxbox -log ~/.fluxbox/log\" >> ~/.fluxbox/startup\n#  ##\n#   Expose Websocket port for VNC server.\n#  ##\nENV APORT=\"5901\"\nENV WPORT=\"6080\"\nEXPOSE ${WPORT}\nRUN git clone git://github.com/kanaka/noVNC\nRUN cp /home/${CUSER}/noVNC/vnc_lite.html /home/${CUSER}/noVNC/index.html\nRUN cd /home/${CUSER}/noVNC/utils \\\n && git clone https://github.com/kanaka/websockify\nUSER root\nRUN wget https://downloads.rclone.org/rclone-current-linux-amd64.rpm \\\n && rpm -ivh rclone-current-linux-amd64.rpm\nUSER ${CUSER}\n#  ##\n#   We can parameterize screen dimensions with the following variables.\n#   e.g.\n#      docker run -p 6080:6080 -e SIZEH=800 -e SIZEW=640 -e CDEPTH=8 \\\n#                         -it [docker image] bootstrap.sh\n#  ##\nENV SIZEW=\"1024\"\nENV SIZEH=\"768\"\nENV CDEPTH=\"24\"\n#  ##\n#   Set up an option to allow for sharing.\n#  ##\nENV SHARESTRING=\"--noshared\"\n#  ##\n#   Copy over files\n#  ##\nCOPY start.sh ${HOME}/\nCOPY bootstrap.sh ${HOME}/\nCOPY README.md ${HOME}/\nCOPY COPYRIGHT_CLOUDSTREAM.md ${HOME}/\nCOPY RELEASE_NOTES.md ${HOME}/\nCOPY QUICKSTART.md ${HOME}/\nRUN mv README.md CLOUDSTREAM_README.md\nADD examples ${HOME}/examples\n#  ##\n#   Create version file\n#  ##\nENV VERSION_FILE=\"VERSION.md\"\nRUN echo \"CloudStream Version: \"$CLOUDSTREAM_VERSION\" $( date ;)\" > $VERSION_FILE\n#  ##\n#   Housekeeping\n#  ##\nUSER root\nRUN chown -R ${CUSER}:${CUSER} ${HOME}\nUSER ${CUSER}\n#  ##\n#   Run the bootstrap.sh script.\n#   This will set up/run the VNC environment,\n#   and execute the start.sh file if present.\n#  ##\nCMD /home/${CUSER}/bootstrap.sh\n#   Build-time metadata as defined at http://label-schema.org\nARG BUILD_DATE\nARG IMAGE\nARG VCS_REF\nARG VCS_URL\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"$IMAGE\" \\\n      org.label-schema.description=\"An image based on centos 7 containing AWIPS CAVE and an X_Window_System\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"$VCS_URL\" \\\n      org.label-schema.schema-version=\"1.0\"\n","originalDockerfileUglifiedHash":"d5e88b5115214f199ce4e833d0c6ce3a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1eb8e07a150e8ee0ca6025a1d0b40faf511e5b4e.dockerfile"}