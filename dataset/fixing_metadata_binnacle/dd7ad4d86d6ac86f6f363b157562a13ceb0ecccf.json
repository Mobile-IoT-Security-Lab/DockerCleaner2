{"seed":3134200414,"processedDockerfileHash":"408de4b2d585a1f394e732b53c478031","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:19.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nENV LANG=\"en_GB.UTF-8\"\nENV LANGUAGE=\"en_GB:GB\"\nENV LC_ALL=\"en_GB.UTF-8\"\nRUN cd /root \\\n && sed -i 's/^#\\s*\\(deb.*partner\\)$/\\1/g' /etc/apt/sources.list \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends locales -yqq \\\n && echo 'LANG=\"en_GB.UTF-8\"' > /etc/default/locale \\\n && echo 'LANGUAGE=\"en_GB:en\"' >> /etc/default/locale \\\n && echo 'LC_ALL=\"en_GB.UTF-8\"' >> /etc/default/locale \\\n && locale-gen en_GB.UTF-8 \\\n && update-locale LANG=en_GB.UTF-8 \\\n && apt-get install --no-install-recommends mate-desktop-environment-core mate-themes mate-accessibility-profiles mate-applet-appmenu mate-applet-brisk-menu mate-applets mate-applets-common mate-calc mate-calc-common mate-dock-applet mate-hud mate-indicator-applet mate-indicator-applet-common mate-menu mate-notification-daemon mate-notification-daemon-common mate-utils mate-utils-common mate-window-applets-common mate-window-buttons-applet mate-window-menu-applet mate-window-title-applet ubuntu-mate-icon-themes ubuntu-mate-themes tightvncserver pulseaudio pavumeter chromium-browser xrdp xorgxrdp uuid-runtime -yqq \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends supervisor sudo tzdata vim mc ca-certificates xterm curl wget epiphany-browser -yqq \\\n && ln -fs /usr/share/zoneinfo/Europe/London /etc/localtime \\\n && dpkg-reconfigure -f noninteractive tzdata \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\n#  RUN echo \"START BUILD\" && \\\n#  apt-get update -yqq && \\ \n#  apt-get -y install \\\n#      git \\\n#      libxfont-dev \\\n#      xserver-xorg-core \\\n#      libx11-dev \\\n#      libxfixes-dev \\\n#      libssl-dev \\\n#      libpam0g-dev \\\n#      libtool \\\n#      libjpeg-dev \\\n#      flex \\\n#      bison \\\n#      gettext \\\n#      autoconf \\\n#      libxml-parser-perl \\\n#      libfuse-dev \\\n#      xsltproc \\\n#      libxrandr-dev \\\n#      python-libxml2 \\\n#      nasm \\\n#     xserver-xorg-dev \\\n#      fuse \\\n#      build-essential \\\n#      libmp3lame-dev \\\n#      libavformat-dev \\\n#      pkg-config && \\\n#  cd /root && \\\n#  git clone -b devel https://github.com/neutrinolabs/xrdp.git && \\\n#  git clone -b devel https://github.com/neutrinolabs/xorgxrdp.git && \\\n#  cd /root/xrdp && ./bootstrap && \\\n#  ./configure --enable-fuse --enable-jpeg  --enable-mp3lame --enable-pixman --enable-sound  && \\\n#  make -j4 && make install && \\\n#  cd /root/xorgxrdp  && ./bootstrap && ./configure && make && make install && \\\n#  rm -R /root/xrdp && \\\n#  rm -R /root/xorgxrdp && \\\n#  apt-get -y purge \\\n#      git \\\n#      libxfont-dev \\\n#      libx11-dev \\\n#      libxfixes-dev \\\n#      libssl-dev \\\n#      libpam0g-dev \\\n#      libtool \\\n#      libjpeg-dev \\\n#      flex \\\n#      bison \\\n#      gettext \\\n#      autoconf \\\n#      libxml-parser-perl \\\n#      libfuse-dev \\\n#      xsltproc \\\n#      libxrandr-dev \\\n#      python-libxml2 \\\n#      nasm \\\n#      xserver-xorg-dev \\\n#      build-essential \\\n#      pkg-config && \\\n#      #        fuse \\\n#  apt-get -y autoclean && apt-get -y autoremove && \\\n#  apt-get -y purge $(dpkg --get-selections | grep deinstall | sed s/deinstall//g) && \\\n#  rm -rf /var/lib/apt/lists/*  && \\\n#  echo \"END BUILD\"\nRUN sed -i '/TerminalServerUsers/d' /etc/xrdp/sesman.ini \\\n && sed -i '/TerminalServerAdmins/d' /etc/xrdp/sesman.ini \\\n && sed -i -e '/DisconnectedTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && sed -i -e '/IdleTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && xrdp-keygen xrdp auto \\\n && mkdir -p /var/run/xrdp \\\n && chmod 2775 /var/run/xrdp \\\n && mkdir -p /var/run/xrdp/sockdir \\\n && chmod 3777 /var/run/xrdp/sockdir \\\n && mkdir /var/run/dbus \\\n && chmod 3777 /var/run/dbus\nCOPY /filesystem /\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\nEXPOSE 3389/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:19.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nENV LANG=\"en_GB.UTF-8\"\nENV LANGUAGE=\"en_GB:GB\"\nENV LC_ALL=\"en_GB.UTF-8\"\nRUN cd /root \\\n && sed -i 's/^#\\s*\\(deb.*partner\\)$/\\1/g' /etc/apt/sources.list \\\n && apt-get update -y \\\n && apt-get install locales -yqq \\\n && echo 'LANG=\"en_GB.UTF-8\"' > /etc/default/locale \\\n && echo 'LANGUAGE=\"en_GB:en\"' >> /etc/default/locale \\\n && echo 'LC_ALL=\"en_GB.UTF-8\"' >> /etc/default/locale \\\n && locale-gen en_GB.UTF-8 \\\n && update-locale LANG=en_GB.UTF-8 \\\n && apt-get install mate-desktop-environment-core mate-themes mate-accessibility-profiles mate-applet-appmenu mate-applet-brisk-menu mate-applets mate-applets-common mate-calc mate-calc-common mate-dock-applet mate-hud mate-indicator-applet mate-indicator-applet-common mate-menu mate-notification-daemon mate-notification-daemon-common mate-utils mate-utils-common mate-window-applets-common mate-window-buttons-applet mate-window-menu-applet mate-window-title-applet ubuntu-mate-icon-themes ubuntu-mate-themes tightvncserver pulseaudio pavumeter chromium-browser xrdp xorgxrdp uuid-runtime -yqq \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends supervisor sudo tzdata vim mc ca-certificates xterm curl wget epiphany-browser -yqq \\\n && ln -fs /usr/share/zoneinfo/Europe/London /etc/localtime \\\n && dpkg-reconfigure -f noninteractive tzdata \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\n# RUN echo \"START BUILD\" && \\\n# apt-get update -yqq && \\ \n# apt-get -y install \\\n#     git \\\n#     libxfont-dev \\\n#     xserver-xorg-core \\\n#     libx11-dev \\\n#     libxfixes-dev \\\n#     libssl-dev \\\n#     libpam0g-dev \\\n#     libtool \\\n#     libjpeg-dev \\\n#     flex \\\n#     bison \\\n#     gettext \\\n#     autoconf \\\n#     libxml-parser-perl \\\n#     libfuse-dev \\\n#     xsltproc \\\n#     libxrandr-dev \\\n#     python-libxml2 \\\n#     nasm \\\n#    xserver-xorg-dev \\\n#     fuse \\\n#     build-essential \\\n#     libmp3lame-dev \\\n#     libavformat-dev \\\n#     pkg-config && \\\n# cd /root && \\\n# git clone -b devel https://github.com/neutrinolabs/xrdp.git && \\\n# git clone -b devel https://github.com/neutrinolabs/xorgxrdp.git && \\\n# cd /root/xrdp && ./bootstrap && \\\n# ./configure --enable-fuse --enable-jpeg  --enable-mp3lame --enable-pixman --enable-sound  && \\\n# make -j4 && make install && \\\n# cd /root/xorgxrdp  && ./bootstrap && ./configure && make && make install && \\\n# rm -R /root/xrdp && \\\n# rm -R /root/xorgxrdp && \\\n# apt-get -y purge \\\n#     git \\\n#     libxfont-dev \\\n#     libx11-dev \\\n#     libxfixes-dev \\\n#     libssl-dev \\\n#     libpam0g-dev \\\n#     libtool \\\n#     libjpeg-dev \\\n#     flex \\\n#     bison \\\n#     gettext \\\n#     autoconf \\\n#     libxml-parser-perl \\\n#     libfuse-dev \\\n#     xsltproc \\\n#     libxrandr-dev \\\n#     python-libxml2 \\\n#     nasm \\\n#     xserver-xorg-dev \\\n#     build-essential \\\n#     pkg-config && \\\n#     #        fuse \\\n# apt-get -y autoclean && apt-get -y autoremove && \\\n# apt-get -y purge $(dpkg --get-selections | grep deinstall | sed s/deinstall//g) && \\\n# rm -rf /var/lib/apt/lists/*  && \\\n# echo \"END BUILD\"\nRUN sed -i '/TerminalServerUsers/d' /etc/xrdp/sesman.ini \\\n && sed -i '/TerminalServerAdmins/d' /etc/xrdp/sesman.ini \\\n && sed -i -e '/DisconnectedTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && sed -i -e '/IdleTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && xrdp-keygen xrdp auto \\\n && mkdir -p /var/run/xrdp \\\n && chmod 2775 /var/run/xrdp \\\n && mkdir -p /var/run/xrdp/sockdir \\\n && chmod 3777 /var/run/xrdp/sockdir \\\n && mkdir /var/run/dbus \\\n && chmod 3777 /var/run/dbus\nCOPY /filesystem /\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\nEXPOSE 3389/tcp\n","injectedSmells":[],"originalDockerfileHash":"85c9c07adb5b32880804cd46bad01a5e","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:19.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DBUS_SESSION_BUS_ADDRESS=\"/dev/null\"\nENV LANG=\"en_GB.UTF-8\"\nENV LANGUAGE=\"en_GB:GB\"\nENV LC_ALL=\"en_GB.UTF-8\"\nRUN cd /root \\\n && sed -i 's/^#\\s*\\(deb.*partner\\)$/\\1/g' /etc/apt/sources.list \\\n && apt-get update -y \\\n && apt-get install locales -yqq \\\n && echo 'LANG=\"en_GB.UTF-8\"' > /etc/default/locale \\\n && echo 'LANGUAGE=\"en_GB:en\"' >> /etc/default/locale \\\n && echo 'LC_ALL=\"en_GB.UTF-8\"' >> /etc/default/locale \\\n && locale-gen en_GB.UTF-8 \\\n && update-locale LANG=en_GB.UTF-8 \\\n && apt-get install mate-desktop-environment-core mate-themes mate-accessibility-profiles mate-applet-appmenu mate-applet-brisk-menu mate-applets mate-applets-common mate-calc mate-calc-common mate-dock-applet mate-hud mate-indicator-applet mate-indicator-applet-common mate-menu mate-notification-daemon mate-notification-daemon-common mate-utils mate-utils-common mate-window-applets-common mate-window-buttons-applet mate-window-menu-applet mate-window-title-applet ubuntu-mate-icon-themes ubuntu-mate-themes tightvncserver pulseaudio pavumeter chromium-browser xrdp xorgxrdp uuid-runtime -yqq \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends supervisor sudo tzdata vim mc ca-certificates xterm curl wget epiphany-browser -yqq \\\n && ln -fs /usr/share/zoneinfo/Europe/London /etc/localtime \\\n && dpkg-reconfigure -f noninteractive tzdata \\\n && apt-get -y autoclean \\\n && apt-get -y autoremove \\\n && apt-get -y purge $( dpkg --get-selections | grep deinstall | sed s/deinstall//g ;) \\\n && rm -rf /var/lib/apt/lists/*\n#  RUN echo \"START BUILD\" && \\\n#  apt-get update -yqq && \\ \n#  apt-get -y install \\\n#      git \\\n#      libxfont-dev \\\n#      xserver-xorg-core \\\n#      libx11-dev \\\n#      libxfixes-dev \\\n#      libssl-dev \\\n#      libpam0g-dev \\\n#      libtool \\\n#      libjpeg-dev \\\n#      flex \\\n#      bison \\\n#      gettext \\\n#      autoconf \\\n#      libxml-parser-perl \\\n#      libfuse-dev \\\n#      xsltproc \\\n#      libxrandr-dev \\\n#      python-libxml2 \\\n#      nasm \\\n#     xserver-xorg-dev \\\n#      fuse \\\n#      build-essential \\\n#      libmp3lame-dev \\\n#      libavformat-dev \\\n#      pkg-config && \\\n#  cd /root && \\\n#  git clone -b devel https://github.com/neutrinolabs/xrdp.git && \\\n#  git clone -b devel https://github.com/neutrinolabs/xorgxrdp.git && \\\n#  cd /root/xrdp && ./bootstrap && \\\n#  ./configure --enable-fuse --enable-jpeg  --enable-mp3lame --enable-pixman --enable-sound  && \\\n#  make -j4 && make install && \\\n#  cd /root/xorgxrdp  && ./bootstrap && ./configure && make && make install && \\\n#  rm -R /root/xrdp && \\\n#  rm -R /root/xorgxrdp && \\\n#  apt-get -y purge \\\n#      git \\\n#      libxfont-dev \\\n#      libx11-dev \\\n#      libxfixes-dev \\\n#      libssl-dev \\\n#      libpam0g-dev \\\n#      libtool \\\n#      libjpeg-dev \\\n#      flex \\\n#      bison \\\n#      gettext \\\n#      autoconf \\\n#      libxml-parser-perl \\\n#      libfuse-dev \\\n#      xsltproc \\\n#      libxrandr-dev \\\n#      python-libxml2 \\\n#      nasm \\\n#      xserver-xorg-dev \\\n#      build-essential \\\n#      pkg-config && \\\n#      #        fuse \\\n#  apt-get -y autoclean && apt-get -y autoremove && \\\n#  apt-get -y purge $(dpkg --get-selections | grep deinstall | sed s/deinstall//g) && \\\n#  rm -rf /var/lib/apt/lists/*  && \\\n#  echo \"END BUILD\"\nRUN sed -i '/TerminalServerUsers/d' /etc/xrdp/sesman.ini \\\n && sed -i '/TerminalServerAdmins/d' /etc/xrdp/sesman.ini \\\n && sed -i -e '/DisconnectedTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && sed -i -e '/IdleTimeLimit=/ s/=.*/=300/' /etc/xrdp/sesman.ini \\\n && xrdp-keygen xrdp auto \\\n && mkdir -p /var/run/xrdp \\\n && chmod 2775 /var/run/xrdp \\\n && mkdir -p /var/run/xrdp/sockdir \\\n && chmod 3777 /var/run/xrdp/sockdir \\\n && mkdir /var/run/dbus \\\n && chmod 3777 /var/run/dbus\nCOPY /filesystem /\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\nEXPOSE 3389/tcp\n","originalDockerfileUglifiedHash":"026ca352dfe24d48e3d00b3edcf33768","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/dd7ad4d86d6ac86f6f363b157562a13ceb0ecccf.dockerfile"}