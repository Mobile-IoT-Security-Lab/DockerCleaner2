{"seed":2715947651,"processedDockerfileHash":"3c95ac3b9d60ede96205c968b4b07f70","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7\nMAINTAINER Nitish Krishna nitishk@juniper.net\nCOPY docker/contrail-sm/entrypoint.sh /\n#   Setup systemd\nRUN (cd /lib/systemd/system/sysinit.target.wants/ ;for i in *; do [ $i == systemd-tmpfiles-setup.service ] || rm -f $i ; done ) ; rm -f /lib/systemd/system/multi-user.target.wants/* ; rm -f /etc/systemd/system/*.wants/* ; rm -f /lib/systemd/system/local-fs.target.wants/* ; rm -f /lib/systemd/system/sockets.target.wants/*udev* ; rm -f /lib/systemd/system/sockets.target.wants/*initctl* ; rm -f /lib/systemd/system/basic.target.wants/* ; rm -f /lib/systemd/system/anaconda.target.wants/*\n#   Create required folders\nRUN mkdir -p /opt/contrail/server_manager /etc/contrail_smgr/ /var/log/contrail-server-manager/ /var/log/contrail-server-manager/provision/ /var/www/html/contrail/ /var/www/html/contrail/images/ /var/www/html/kickstarts/ /var/www/html/contrail/config_file/ /var/www/html/thirdparty_packages/pip_repo /etc/mail/\n#   Copy SM Code\nCOPY src/server_manager/ /opt/contrail/server_manager/\nCOPY src/contrail_smgr/cobbler/*template* /etc/contrail_smgr/cobbler/\nCOPY src/contrail_smgr/cobbler/*conf* /etc/contrail_smgr/cobbler/\nCOPY src/smgr_cliff_client/ /var/tmp/build/smgr_cliff_client/\nCOPY src/smgr_cliff_client/servermanagerclient /etc/contrail/servermanagerclient\nCOPY src/smgr_cliff_client/smgrcliapp/sm-client-config.ini /etc/contrail/sm-client-config.ini\n#  COPY src/smgr_cliff_client/server-manager-client /opt/contrail/bin/server-manager-client\n#  COPY src/smgr_cliff_client/servermanagercli/* /usr/local/lib/python2.7/dist-packages/servermanagercli/\n#  RUN yum -y install epel-release\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nRUN yum -y install centos-release-openstack-ocata\nRUN yum install -y initscripts net-tools python2-pip python2-gevent dhcp httpd httpd-devel mod_ssl fence-agents python-devel ntp autoconf gcc bind tftp wget sendmail syslinux gcc-c++ libcurl-devel openssl-devel zlib-devel ipmitool createrepo mod_wsgi tftp-server python2-django python-simplejson python2-requests reprepro python-netaddr python-yaml python-paramiko python2-xmltodict python2-crypto python-paste ansible python2-oslo-config python2-urllib3 python-ipaddress python-websocket-client ceph-common python-cliff python-configparser file \\\n && pip install pip==23.1 --upgrade\nRUN pip install setuptools==67.6.1 configparser==5.3.0\nRUN cd /var/tmp/build/smgr_cliff_client/ \\\n && /usr/bin/python setup.py sdist\nRUN cd /var/tmp/build/smgr_cliff_client/dist/ \\\n && tar zxf servermanagercli-*.tar.gz\nRUN cd /var/tmp/build/smgr_cliff_client/dist/servermanagercli-* \\\n && /usr/bin/python setup.py install --root=/ --install-scripts /opt/contrail/bin/\n#   Mount common volumes\nVOLUME [\"/sys/fs/cgroup\"]\nEXPOSE 9001/tcp\nEXPOSE 9002/tcp\nWORKDIR /opt/contrail/server_manager/\nENTRYPOINT [\"/entrypoint.sh\"]\n#  CMD [\"/usr/sbin/init\"]\nCMD [\"python\", \"/opt/contrail/server_manager/server_mgr_main.py\", \"-c\", \"/opt/contrail/server_manager/sm-config.ini\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7\nMAINTAINER Nitish Krishna nitishk@juniper.net\nCOPY docker/contrail-sm/entrypoint.sh /\n#  Setup systemd\nRUN (cd /lib/systemd/system/sysinit.target.wants/ ;for i in *; do [ $i == systemd-tmpfiles-setup.service ] || rm -f $i ; done ) ; rm -f /lib/systemd/system/multi-user.target.wants/* ; rm -f /etc/systemd/system/*.wants/* ; rm -f /lib/systemd/system/local-fs.target.wants/* ; rm -f /lib/systemd/system/sockets.target.wants/*udev* ; rm -f /lib/systemd/system/sockets.target.wants/*initctl* ; rm -f /lib/systemd/system/basic.target.wants/* ; rm -f /lib/systemd/system/anaconda.target.wants/*\n#  Create required folders\nRUN mkdir -p /opt/contrail/server_manager /etc/contrail_smgr/ /var/log/contrail-server-manager/ /var/log/contrail-server-manager/provision/ /var/www/html/contrail/ /var/www/html/contrail/images/ /var/www/html/kickstarts/ /var/www/html/contrail/config_file/ /var/www/html/thirdparty_packages/pip_repo /etc/mail/\n#  Copy SM Code\nCOPY src/server_manager/ /opt/contrail/server_manager/\nCOPY src/contrail_smgr/cobbler/*template* /etc/contrail_smgr/cobbler/\nCOPY src/contrail_smgr/cobbler/*conf* /etc/contrail_smgr/cobbler/\nCOPY src/smgr_cliff_client/ /var/tmp/build/smgr_cliff_client/\nCOPY src/smgr_cliff_client/servermanagerclient /etc/contrail/servermanagerclient\nCOPY src/smgr_cliff_client/smgrcliapp/sm-client-config.ini /etc/contrail/sm-client-config.ini\n# COPY src/smgr_cliff_client/server-manager-client /opt/contrail/bin/server-manager-client\n# COPY src/smgr_cliff_client/servermanagercli/* /usr/local/lib/python2.7/dist-packages/servermanagercli/\n# RUN yum -y install epel-release\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nRUN yum -y install centos-release-openstack-ocata\nRUN yum install -y initscripts net-tools python2-pip python2-gevent dhcp httpd httpd-devel mod_ssl fence-agents python-devel ntp autoconf gcc bind tftp wget sendmail syslinux gcc-c++ libcurl-devel openssl-devel zlib-devel ipmitool createrepo mod_wsgi tftp-server python2-django python-simplejson python2-requests reprepro python-netaddr python-yaml python-paramiko python2-xmltodict python2-crypto python-paste ansible python2-oslo-config python2-urllib3 python-ipaddress python-websocket-client ceph-common python-cliff python-configparser file \\\n && pip install pip --upgrade\nRUN pip install setuptools configparser\nRUN cd /var/tmp/build/smgr_cliff_client/ \\\n && /usr/bin/python setup.py sdist\nRUN cd /var/tmp/build/smgr_cliff_client/dist/ \\\n && tar zxf servermanagercli-*.tar.gz\nRUN cd /var/tmp/build/smgr_cliff_client/dist/servermanagercli-* \\\n && /usr/bin/python setup.py install --root=/ --install-scripts /opt/contrail/bin/\n#  Mount common volumes\nVOLUME [\"/sys/fs/cgroup\"]\nEXPOSE 9001/tcp\nEXPOSE 9002/tcp\nWORKDIR /opt/contrail/server_manager/\nENTRYPOINT [\"/entrypoint.sh\"]\n# CMD [\"/usr/sbin/init\"]\nCMD [\"python\", \"/opt/contrail/server_manager/server_mgr_main.py\", \"-c\", \"/opt/contrail/server_manager/sm-config.ini\"]\n","injectedSmells":[],"originalDockerfileHash":"1e0dbf8fb721530e9644eb57a1e21283","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7\nMAINTAINER Nitish Krishna nitishk@juniper.net\nCOPY docker/contrail-sm/entrypoint.sh /\n#   Setup systemd\nRUN (cd /lib/systemd/system/sysinit.target.wants/ ;for i in *; do [ $i == systemd-tmpfiles-setup.service ] || rm -f $i ; done ) ; rm -f /lib/systemd/system/multi-user.target.wants/* ; rm -f /etc/systemd/system/*.wants/* ; rm -f /lib/systemd/system/local-fs.target.wants/* ; rm -f /lib/systemd/system/sockets.target.wants/*udev* ; rm -f /lib/systemd/system/sockets.target.wants/*initctl* ; rm -f /lib/systemd/system/basic.target.wants/* ; rm -f /lib/systemd/system/anaconda.target.wants/*\n#   Create required folders\nRUN mkdir -p /opt/contrail/server_manager /etc/contrail_smgr/ /var/log/contrail-server-manager/ /var/log/contrail-server-manager/provision/ /var/www/html/contrail/ /var/www/html/contrail/images/ /var/www/html/kickstarts/ /var/www/html/contrail/config_file/ /var/www/html/thirdparty_packages/pip_repo /etc/mail/\n#   Copy SM Code\nCOPY src/server_manager/ /opt/contrail/server_manager/\nCOPY src/contrail_smgr/cobbler/*template* /etc/contrail_smgr/cobbler/\nCOPY src/contrail_smgr/cobbler/*conf* /etc/contrail_smgr/cobbler/\nCOPY src/smgr_cliff_client/ /var/tmp/build/smgr_cliff_client/\nCOPY src/smgr_cliff_client/servermanagerclient /etc/contrail/servermanagerclient\nCOPY src/smgr_cliff_client/smgrcliapp/sm-client-config.ini /etc/contrail/sm-client-config.ini\n#  COPY src/smgr_cliff_client/server-manager-client /opt/contrail/bin/server-manager-client\n#  COPY src/smgr_cliff_client/servermanagercli/* /usr/local/lib/python2.7/dist-packages/servermanagercli/\n#  RUN yum -y install epel-release\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nRUN yum -y install centos-release-openstack-ocata\nRUN yum install -y initscripts net-tools python2-pip python2-gevent dhcp httpd httpd-devel mod_ssl fence-agents python-devel ntp autoconf gcc bind tftp wget sendmail syslinux gcc-c++ libcurl-devel openssl-devel zlib-devel ipmitool createrepo mod_wsgi tftp-server python2-django python-simplejson python2-requests reprepro python-netaddr python-yaml python-paramiko python2-xmltodict python2-crypto python-paste ansible python2-oslo-config python2-urllib3 python-ipaddress python-websocket-client ceph-common python-cliff python-configparser file \\\n && pip install pip --upgrade\nRUN pip install setuptools configparser\nRUN cd /var/tmp/build/smgr_cliff_client/ \\\n && /usr/bin/python setup.py sdist\nRUN cd /var/tmp/build/smgr_cliff_client/dist/ \\\n && tar zxf servermanagercli-*.tar.gz\nRUN cd /var/tmp/build/smgr_cliff_client/dist/servermanagercli-* \\\n && /usr/bin/python setup.py install --root=/ --install-scripts /opt/contrail/bin/\n#   Mount common volumes\nVOLUME [\"/sys/fs/cgroup\"]\nEXPOSE 9001/tcp\nEXPOSE 9002/tcp\nWORKDIR /opt/contrail/server_manager/\nENTRYPOINT [\"/entrypoint.sh\"]\n#  CMD [\"/usr/sbin/init\"]\nCMD [\"python\", \"/opt/contrail/server_manager/server_mgr_main.py\", \"-c\", \"/opt/contrail/server_manager/sm-config.ini\"]\n","originalDockerfileUglifiedHash":"ff9d230f8f35c9930aae339d0b45a7c1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/da6d27a709f7139a04cbe43bf51aaf7794f158ce.dockerfile"}