{"seed":102591487,"processedDockerfileHash":"c333fc5230875ac244ca0edd2580c02f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\n#  # Remove retired jessie-updates repo\nRUN sed -i '/deb http:\\/\\/deb.debian.org\\/debian jessie-updates main/d' /etc/apt/sources.list\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#  # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr install-info cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default pkg-php-tools libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig ctags libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet libc-ares2 libgoogle-perftools4 cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama texi2html bash-completion dosfstools qemu-kvm libvirt-bin python-pytest=2.6.3* python3-pytest=2.6.3* -y )\n#   For jenkins slave\n#   RUN apt-get -y install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n#   For linux build\nRUN apt-get -y build-dep linux\n#   For gobgp and telemetry build\nRUN export VERSION=1.11.5 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#   Upgrade pip2\n#   Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#   For p4 build\nRUN pip install ctypesgen==1.1.1 crc16==0.1.1\n#   For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#   Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2==3.1.2 --force-reinstall --upgrade > =2.10\n#   For templating (requiring jinja2)\nRUN pip install j2cli==0.3.10\n#   For sonic utilities testing\nRUN pip install click-default-group==1.2.2 click==8.1.3 natsort==8.3.1 tabulate==0.9.0 netifaces==0.10.7 fastentrypoints==0.12\n#   For supervisor build\nRUN pip install meld3==2.0.1 mock==5.0.2\n#   For vs image build\nRUN pip install pexpect==4.6.0\n#   For sonic-utilities build\nRUN pip install mockredispy==2.9.3\nRUN pip install pytest-runner==4.4\nRUN pip install setuptools==40.8.0\n#   Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#   Install vim\nRUN (apt-get update ;apt-get install --no-install-recommends vim -y )\n#   Install rsyslog\nRUN (apt-get update ;apt-get install --no-install-recommends rsyslog -y )\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#   Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#   Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends apt-transport-https ca-certificates curl gnupg2 software-properties-common -y )\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends docker-ce=17.03.2~ce-0~debian-jessie -y )\nRUN echo \"DOCKER_OPTS=\\\"--experimental --storage-driver=vfs\\\"\" >> /etc/default/docker\n#   For jenkins slave\nRUN echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list\nRUN apt-get -o Acquire::Check-Valid-Until=false update\nRUN apt-get -y -o Acquire::Check-Valid-Until=false install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\n# # Remove retired jessie-updates repo\nRUN sed -i '/deb http:\\/\\/deb.debian.org\\/debian jessie-updates main/d' /etc/apt/sources.list\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n# # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr install-info cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default pkg-php-tools libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig ctags libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet libc-ares2 libgoogle-perftools4 cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama texi2html bash-completion dosfstools qemu-kvm libvirt-bin python-pytest=2.6.3* python3-pytest=2.6.3* -y\n#  For jenkins slave\n#  RUN apt-get -y install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n#  For linux build\nRUN apt-get -y build-dep linux\n#  For gobgp and telemetry build\nRUN export VERSION=1.11.5 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#  Upgrade pip2\n#  Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#  For p4 build\nRUN pip install ctypesgen crc16\n#  For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#  Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2 --force-reinstall --upgrade > =2.10\n#  For templating (requiring jinja2)\nRUN pip install j2cli\n#  For sonic utilities testing\nRUN pip install click-default-group click natsort tabulate netifaces==0.10.7 fastentrypoints\n#  For supervisor build\nRUN pip install meld3 mock\n#  For vs image build\nRUN pip install pexpect==4.6.0\n#  For sonic-utilities build\nRUN pip install mockredispy==2.9.3\nRUN pip install pytest-runner==4.4\nRUN pip install setuptools==40.8.0\n#  Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#  Install vim\nRUN apt-get install vim -y\n#  Install rsyslog\nRUN apt-get install rsyslog -y\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#  Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#  Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN apt-get update\nRUN apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN apt-get update\nRUN apt-get install docker-ce=17.03.2~ce-0~debian-jessie -y\nRUN echo \"DOCKER_OPTS=\\\"--experimental --storage-driver=vfs\\\"\" >> /etc/default/docker\n#  For jenkins slave\nRUN echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list\nRUN apt-get -o Acquire::Check-Valid-Until=false update\nRUN apt-get -y -o Acquire::Check-Valid-Until=false install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n","injectedSmells":[],"originalDockerfileHash":"c971565057d08312770f8733061d6bff","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\n#  # Remove retired jessie-updates repo\nRUN sed -i '/deb http:\\/\\/deb.debian.org\\/debian jessie-updates main/d' /etc/apt/sources.list\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#  # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr install-info cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default pkg-php-tools libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig ctags libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet libc-ares2 libgoogle-perftools4 cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama texi2html bash-completion dosfstools qemu-kvm libvirt-bin python-pytest=2.6.3* python3-pytest=2.6.3* -y\n#   For jenkins slave\n#   RUN apt-get -y install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n#   For linux build\nRUN apt-get -y build-dep linux\n#   For gobgp and telemetry build\nRUN export VERSION=1.11.5 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#   Upgrade pip2\n#   Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#   For p4 build\nRUN pip install ctypesgen crc16\n#   For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#   Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2 --force-reinstall --upgrade > =2.10\n#   For templating (requiring jinja2)\nRUN pip install j2cli\n#   For sonic utilities testing\nRUN pip install click-default-group click natsort tabulate netifaces==0.10.7 fastentrypoints\n#   For supervisor build\nRUN pip install meld3 mock\n#   For vs image build\nRUN pip install pexpect==4.6.0\n#   For sonic-utilities build\nRUN pip install mockredispy==2.9.3\nRUN pip install pytest-runner==4.4\nRUN pip install setuptools==40.8.0\n#   Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#   Install vim\nRUN apt-get install vim -y\n#   Install rsyslog\nRUN apt-get install rsyslog -y\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#   Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#   Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN apt-get update\nRUN apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN apt-get update\nRUN apt-get install docker-ce=17.03.2~ce-0~debian-jessie -y\nRUN echo \"DOCKER_OPTS=\\\"--experimental --storage-driver=vfs\\\"\" >> /etc/default/docker\n#   For jenkins slave\nRUN echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list\nRUN apt-get -o Acquire::Check-Valid-Until=false update\nRUN apt-get -y -o Acquire::Check-Valid-Until=false install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n","originalDockerfileUglifiedHash":"c43f90d284da643894fe3aad2a174e03","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d1b6f09d53241aa4320e69786b0a614e0980edc7.dockerfile"}