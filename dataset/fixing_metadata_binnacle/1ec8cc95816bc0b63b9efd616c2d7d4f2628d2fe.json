{"seed":1861287977,"processedDockerfileHash":"99a2783ede285bf0ca24ee2c49790a33","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM gcr.io/gcp-runtimes/ubuntu_16_0_4\nENV PHP_DIR=\"/opt/php73\"\nENV PHP_SRC_DIR=\"/usr/local/src/php73-build\"\nENV PATH=\"${PATH}:/usr/local/bin:${PHP_DIR}/bin\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf=2.71-3 build-essential=12.9ubuntu3 git-core jq=1.6-2.1ubuntu3 libbz2-dev=1.0.8-5build1 libcurl4-openssl-dev=7.88.1-7ubuntu1 libc-client2007e=8:2007f~dfsg-7build1 libc-client2007e-dev=8:2007f~dfsg-7build1 libfcgi-dev=2.4.2-2build2 libfcgi0ldbl=2.4.2-2build2 libfreetype6-dev=2.12.1+dfsg-4 libicu-dev=72.1-3ubuntu1 libjpeg62-dbg libjpeg-dev=8c-2ubuntu11 libkrb5-dev=1.20.1-1build1 libmcrypt-dev=2.5.8-7 libpng12-dev libpq-dev=15.2-1 libssl-dev=3.0.8-1ubuntu1 libxml2-dev=2.9.14+dfsg-1.1build2 libxslt1-dev=1.1.35-1 libzip-dev=1.7.3-1ubuntu2 python-ipaddr wget=1.21.3-1ubuntu1 zip=3.0-13 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 -y\nRUN ln -s /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/libc-client.a \\\n && mkdir -p ${PHP_DIR} ${PHP_SRC_DIR} ${PHP_DIR}/lib/conf.d \\\n && cd ${PHP_SRC_DIR} \\\n && wget http://us1.php.net/get/php-7.3.0.tar.bz2/from/this/mirror -O php-7.3.0.tar.bz2 \\\n && tar jxf php-7.3.0.tar.bz2 \\\n && cd php-7.3.0 \\\n && ./configure --prefix=${PHP_DIR} --with-config-file-scan-dir=${PHP_DIR}/lib/conf.d --with-pdo-pgsql --with-zlib-dir --with-freetype-dir --enable-mbstring --with-libxml-dir=/usr --enable-soap --enable-intl --enable-calendar --with-curl --with-mcrypt --with-zlib --with-gd --with-pgsql --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-sysvmsg --enable-pcntl --enable-mbregex --enable-exif --enable-bcmath --with-mhash --enable-zip --with-pcre-regex --with-mysql --with-pdo-mysql --with-mysqli --with-jpeg-dir=/usr --with-png-dir=/usr --enable-gd-native-ttf --with-openssl --with-fpm-user=www-data --with-fpm-group=www-data --with-libdir=/lib/x86_64-linux-gnu --enable-ftp --with-imap --with-imap-ssl --with-gettext --with-xmlrpc --with-xsl --with-kerberos --enable-fpm \\\n && make \\\n && make install \\\n && pecl install grpc \\\n && cp php.ini-production ${PHP_DIR}/lib/php.ini \\\n && echo 'zend_extension=opcache.so' >> ${PHP_DIR}/lib/php.ini \\\n && echo 'extension=grpc.so' >> ${PHP_DIR}/lib/conf.d/ext-grpc.ini \\\n && php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === rtrim(file_get_contents('https://composer.github.io/installer.sig'))) { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php --filename=composer --install-dir=/usr/local/bin\n#   Install Google Cloud SDK\nRUN curl https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz -o ${HOME}/google-cloud-sdk.tar.gz \\\n && tar xzf ${HOME}/google-cloud-sdk.tar.gz -C $HOME \\\n && ${HOME}/google-cloud-sdk/install.sh --usage-reporting false --path-update false --command-completion false\n#   Make composer and gcloud bins available via the PATH variable\nENV PATH=\"$PATH:/root/google-cloud-sdk/bin:/root/.composer/vendor/bin\"\n#   Configure Google Cloud SDK\nRUN gcloud config set app/promote_by_default false \\\n && gcloud config set disable_prompts true \\\n && gcloud -q components install app-engine-python \\\n && gcloud -q components install app-engine-php \\\n && gcloud -q components update\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM gcr.io/gcp-runtimes/ubuntu_16_0_4\nENV PHP_DIR=\"/opt/php73\"\nENV PHP_SRC_DIR=\"/usr/local/src/php73-build\"\nENV PATH=\"${PATH}:/usr/local/bin:${PHP_DIR}/bin\"\nRUN apt-get update \\\n && apt-get install autoconf build-essential git-core jq libbz2-dev libcurl4-openssl-dev libc-client2007e libc-client2007e-dev libfcgi-dev libfcgi0ldbl libfreetype6-dev libicu-dev libjpeg62-dbg libjpeg-dev libkrb5-dev libmcrypt-dev libpng12-dev libpq-dev libssl-dev libxml2-dev libxslt1-dev libzip-dev python-ipaddr wget zip zlib1g-dev -y\nRUN ln -s /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/libc-client.a \\\n && mkdir -p ${PHP_DIR} ${PHP_SRC_DIR} ${PHP_DIR}/lib/conf.d \\\n && cd ${PHP_SRC_DIR} \\\n && wget http://us1.php.net/get/php-7.3.0.tar.bz2/from/this/mirror -O php-7.3.0.tar.bz2 \\\n && tar jxf php-7.3.0.tar.bz2 \\\n && cd php-7.3.0 \\\n && ./configure --prefix=${PHP_DIR} --with-config-file-scan-dir=${PHP_DIR}/lib/conf.d --with-pdo-pgsql --with-zlib-dir --with-freetype-dir --enable-mbstring --with-libxml-dir=/usr --enable-soap --enable-intl --enable-calendar --with-curl --with-mcrypt --with-zlib --with-gd --with-pgsql --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-sysvmsg --enable-pcntl --enable-mbregex --enable-exif --enable-bcmath --with-mhash --enable-zip --with-pcre-regex --with-mysql --with-pdo-mysql --with-mysqli --with-jpeg-dir=/usr --with-png-dir=/usr --enable-gd-native-ttf --with-openssl --with-fpm-user=www-data --with-fpm-group=www-data --with-libdir=/lib/x86_64-linux-gnu --enable-ftp --with-imap --with-imap-ssl --with-gettext --with-xmlrpc --with-xsl --with-kerberos --enable-fpm \\\n && make \\\n && make install \\\n && pecl install grpc \\\n && cp php.ini-production ${PHP_DIR}/lib/php.ini \\\n && echo 'zend_extension=opcache.so' >> ${PHP_DIR}/lib/php.ini \\\n && echo 'extension=grpc.so' >> ${PHP_DIR}/lib/conf.d/ext-grpc.ini \\\n && php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === rtrim(file_get_contents('https://composer.github.io/installer.sig'))) { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php --filename=composer --install-dir=/usr/local/bin\n#  Install Google Cloud SDK\nRUN curl https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz -o ${HOME}/google-cloud-sdk.tar.gz \\\n && tar xzf ${HOME}/google-cloud-sdk.tar.gz -C $HOME \\\n && ${HOME}/google-cloud-sdk/install.sh --usage-reporting false --path-update false --command-completion false\n#  Make composer and gcloud bins available via the PATH variable\nENV PATH=\"$PATH:/root/google-cloud-sdk/bin:/root/.composer/vendor/bin\"\n#  Configure Google Cloud SDK\nRUN gcloud config set app/promote_by_default false \\\n && gcloud config set disable_prompts true \\\n && gcloud -q components install app-engine-python \\\n && gcloud -q components install app-engine-php \\\n && gcloud -q components update\n","injectedSmells":[],"originalDockerfileHash":"ff03a5804199765ab98c20c96ef10029","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM gcr.io/gcp-runtimes/ubuntu_16_0_4\nENV PHP_DIR=\"/opt/php73\"\nENV PHP_SRC_DIR=\"/usr/local/src/php73-build\"\nENV PATH=\"${PATH}:/usr/local/bin:${PHP_DIR}/bin\"\nRUN apt-get update \\\n && apt-get install autoconf build-essential git-core jq libbz2-dev libcurl4-openssl-dev libc-client2007e libc-client2007e-dev libfcgi-dev libfcgi0ldbl libfreetype6-dev libicu-dev libjpeg62-dbg libjpeg-dev libkrb5-dev libmcrypt-dev libpng12-dev libpq-dev libssl-dev libxml2-dev libxslt1-dev libzip-dev python-ipaddr wget zip zlib1g-dev -y\nRUN ln -s /usr/lib/libc-client.a /usr/lib/x86_64-linux-gnu/libc-client.a \\\n && mkdir -p ${PHP_DIR} ${PHP_SRC_DIR} ${PHP_DIR}/lib/conf.d \\\n && cd ${PHP_SRC_DIR} \\\n && wget http://us1.php.net/get/php-7.3.0.tar.bz2/from/this/mirror -O php-7.3.0.tar.bz2 \\\n && tar jxf php-7.3.0.tar.bz2 \\\n && cd php-7.3.0 \\\n && ./configure --prefix=${PHP_DIR} --with-config-file-scan-dir=${PHP_DIR}/lib/conf.d --with-pdo-pgsql --with-zlib-dir --with-freetype-dir --enable-mbstring --with-libxml-dir=/usr --enable-soap --enable-intl --enable-calendar --with-curl --with-mcrypt --with-zlib --with-gd --with-pgsql --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-sysvmsg --enable-pcntl --enable-mbregex --enable-exif --enable-bcmath --with-mhash --enable-zip --with-pcre-regex --with-mysql --with-pdo-mysql --with-mysqli --with-jpeg-dir=/usr --with-png-dir=/usr --enable-gd-native-ttf --with-openssl --with-fpm-user=www-data --with-fpm-group=www-data --with-libdir=/lib/x86_64-linux-gnu --enable-ftp --with-imap --with-imap-ssl --with-gettext --with-xmlrpc --with-xsl --with-kerberos --enable-fpm \\\n && make \\\n && make install \\\n && pecl install grpc \\\n && cp php.ini-production ${PHP_DIR}/lib/php.ini \\\n && echo 'zend_extension=opcache.so' >> ${PHP_DIR}/lib/php.ini \\\n && echo 'extension=grpc.so' >> ${PHP_DIR}/lib/conf.d/ext-grpc.ini \\\n && php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === rtrim(file_get_contents('https://composer.github.io/installer.sig'))) { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php --filename=composer --install-dir=/usr/local/bin\n#   Install Google Cloud SDK\nRUN curl https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz -o ${HOME}/google-cloud-sdk.tar.gz \\\n && tar xzf ${HOME}/google-cloud-sdk.tar.gz -C $HOME \\\n && ${HOME}/google-cloud-sdk/install.sh --usage-reporting false --path-update false --command-completion false\n#   Make composer and gcloud bins available via the PATH variable\nENV PATH=\"$PATH:/root/google-cloud-sdk/bin:/root/.composer/vendor/bin\"\n#   Configure Google Cloud SDK\nRUN gcloud config set app/promote_by_default false \\\n && gcloud config set disable_prompts true \\\n && gcloud -q components install app-engine-python \\\n && gcloud -q components install app-engine-php \\\n && gcloud -q components update\n","originalDockerfileUglifiedHash":"9c86b739e7d99e6d9e389a0be9022d66","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1ec8cc95816bc0b63b9efd616c2d7d4f2628d2fe.dockerfile"}