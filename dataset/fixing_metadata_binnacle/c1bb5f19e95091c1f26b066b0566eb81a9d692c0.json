{"seed":3486808660,"processedDockerfileHash":"62313b4fbfb779a6452d0f714e1f7386","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#   hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#   Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Add env\nENV TERM=\"xterm-256color\"\n#   Copy Python requirements file\nCOPY requirements.txt /tmp/\n#   Setup base\nARG BUILD_ARCH\n#   hadolint ignore=DL3003\nRUN apk add bsd-compat-headers=0.7.1-r0 build-base=0.5-r1 cmake=3.14.5-r0 docker=18.09.6-r0 json-c-dev=0.13.1-r0 libffi-dev=3.2.1-r6 openssl-dev=1.1.1c-r0 python3-dev=3.7.3-r0 zlib-dev=1.2.11-r1 --no-cache --virtual .build-dependencies \\\n && apk add ack=3.0.0-r0 awake=1.0-r3 bind-tools=9.14.1-r1 bluez=5.50-r3 colordiff=1.0.18-r1 device-mapper-libs=2.02.184-r0 git=2.22.0-r0 json-c=0.13.1-r0 libltdl=2.4.6-r6 libxml2-utils=2.9.9-r2 lua-resty-http=0.13-r0 mariadb-client=10.3.16-r0 mosh=1.3.2-r8 mosquitto-clients=1.6.3-r0 nano-syntax=4.3-r0 nano=4.3-r0 ncurses=6.1_p20190518-r0 net-tools=1.60_git20140218-r2 nginx-mod-http-lua=1.16.0-r2 nginx=1.16.0-r2 nmap=7.70-r3 openssh=8.0_p1-r0 openssl=1.1.1c-r0 pwgen=2.08-r0 python3=3.7.3-r0 rsync=3.1.3-r1 sqlite=3.28.0-r0 sudo=1.8.27-r0 tmux=2.9a-r0 vim=8.1.1365-r0 wget=1.20.3-r0 zip=3.0-r7 zsh-autosuggestions=0.6.1-r0 zsh-syntax-highlighting=0.6.0-r0 zsh=5.7.1-r0 --no-cache \\\n && git clone --depth 1 git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \\\n && curl -L -s -o /usr/bin/hassio \"https://github.com/home-assistant/hassio-cli/releases/download/2.2.0/hassio_${BUILD_ARCH}\" \\\n && sed -i -e \"s#bin/ash#bin/zsh#\" /etc/passwd \\\n && git clone --branch \"v3.0.1\" --depth=1 https://github.com/warmcat/libwebsockets.git /tmp/libwebsockets \\\n && mkdir -p /tmp/libwebsockets/build \\\n && cd /tmp/libwebsockets/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE -DLWS_UNIX_SOCK=ON \\\n && make \\\n && make install \\\n && git clone --branch \"1.5.0\" --depth=1 https://github.com/tsl0922/ttyd.git /tmp/ttyd \\\n && mkdir -p /tmp/ttyd/build \\\n && cd /tmp/ttyd/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n && make \\\n && make install \\\n && cp /usr/bin/docker /usr/local/bin/.undocked \\\n && pip3 install --no-cache-dir -r /tmp/requirements.txt \\\n && apk del --no-cache --purge .build-dependencies \\\n && find /usr/local\n#   Copy root filesystem\nCOPY rootfs /\n#   Build arguments\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#   Labels\nLABEL io.hass.name=\"SSH & Web Terminal\" \\\n      io.hass.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"SSH & Web Terminal\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-ssh-web-terminal/33820?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-ssh/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-ssh\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#  hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#  Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#  Add env\nENV TERM=\"xterm-256color\"\n#  Copy Python requirements file\nCOPY requirements.txt /tmp/\n#  Setup base\nARG BUILD_ARCH\n#  hadolint ignore=DL3003\nRUN apk add --no-cache --virtual .build-dependencies bsd-compat-headers=0.7.1-r0 build-base=0.5-r1 cmake=3.14.5-r0 docker=18.09.6-r0 json-c-dev=0.13.1-r0 libffi-dev=3.2.1-r6 openssl-dev=1.1.1c-r0 python3-dev=3.7.3-r0 zlib-dev=1.2.11-r1 \\\n && apk add --no-cache ack=3.0.0-r0 awake=1.0-r3 bind-tools=9.14.1-r1 bluez=5.50-r3 colordiff=1.0.18-r1 device-mapper-libs=2.02.184-r0 git=2.22.0-r0 json-c=0.13.1-r0 libltdl=2.4.6-r6 libxml2-utils=2.9.9-r2 lua-resty-http=0.13-r0 mariadb-client=10.3.16-r0 mosh=1.3.2-r8 mosquitto-clients=1.6.3-r0 nano-syntax=4.3-r0 nano=4.3-r0 ncurses=6.1_p20190518-r0 net-tools=1.60_git20140218-r2 nginx-mod-http-lua=1.16.0-r2 nginx=1.16.0-r2 nmap=7.70-r3 openssh=8.0_p1-r0 openssl=1.1.1c-r0 pwgen=2.08-r0 python3=3.7.3-r0 rsync=3.1.3-r1 sqlite=3.28.0-r0 sudo=1.8.27-r0 tmux=2.9a-r0 vim=8.1.1365-r0 wget=1.20.3-r0 zip=3.0-r7 zsh-autosuggestions=0.6.1-r0 zsh-syntax-highlighting=0.6.0-r0 zsh=5.7.1-r0 \\\n && git clone --depth 1 git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \\\n && curl -L -s -o /usr/bin/hassio \"https://github.com/home-assistant/hassio-cli/releases/download/2.2.0/hassio_${BUILD_ARCH}\" \\\n && sed -i -e \"s#bin/ash#bin/zsh#\" /etc/passwd \\\n && git clone --branch \"v3.0.1\" --depth=1 https://github.com/warmcat/libwebsockets.git /tmp/libwebsockets \\\n && mkdir -p /tmp/libwebsockets/build \\\n && cd /tmp/libwebsockets/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE -DLWS_UNIX_SOCK=ON \\\n && make \\\n && make install \\\n && git clone --branch \"1.5.0\" --depth=1 https://github.com/tsl0922/ttyd.git /tmp/ttyd \\\n && mkdir -p /tmp/ttyd/build \\\n && cd /tmp/ttyd/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n && make \\\n && make install \\\n && cp /usr/bin/docker /usr/local/bin/.undocked \\\n && pip3 install --no-cache-dir -r /tmp/requirements.txt \\\n && apk del --no-cache --purge .build-dependencies \\\n && find /usr/local ( -type d -a -name test -o -name tests -o -name '__pycache__' ) -o ( -type f -a -name '*.pyc' -o -name '*.pyo' ) -exec rm -rf '{}' + \\\n && rm -f -r /etc/nginx /root/.cache /root/.cmake /tmp/*\n#  Copy root filesystem\nCOPY rootfs /\n#  Build arguments\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#  Labels\nLABEL io.hass.name=\"SSH & Web Terminal\" \\\n      io.hass.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"SSH & Web Terminal\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-ssh-web-terminal/33820?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-ssh/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-ssh\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\n","injectedSmells":[],"originalDockerfileHash":"9b315b4597d4161dd6fa3db5cfd47a54","successfullyInjectedSmells":[],"originalDockerfileUglified":"ARG BUILD_FROM=hassioaddons/base:4.0.1\n#   hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n#   Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n#   Add env\nENV TERM=\"xterm-256color\"\n#   Copy Python requirements file\nCOPY requirements.txt /tmp/\n#   Setup base\nARG BUILD_ARCH\n#   hadolint ignore=DL3003\nRUN apk add --no-cache --virtual .build-dependencies bsd-compat-headers=0.7.1-r0 build-base=0.5-r1 cmake=3.14.5-r0 docker=18.09.6-r0 json-c-dev=0.13.1-r0 libffi-dev=3.2.1-r6 openssl-dev=1.1.1c-r0 python3-dev=3.7.3-r0 zlib-dev=1.2.11-r1 \\\n && apk add --no-cache ack=3.0.0-r0 awake=1.0-r3 bind-tools=9.14.1-r1 bluez=5.50-r3 colordiff=1.0.18-r1 device-mapper-libs=2.02.184-r0 git=2.22.0-r0 json-c=0.13.1-r0 libltdl=2.4.6-r6 libxml2-utils=2.9.9-r2 lua-resty-http=0.13-r0 mariadb-client=10.3.16-r0 mosh=1.3.2-r8 mosquitto-clients=1.6.3-r0 nano-syntax=4.3-r0 nano=4.3-r0 ncurses=6.1_p20190518-r0 net-tools=1.60_git20140218-r2 nginx-mod-http-lua=1.16.0-r2 nginx=1.16.0-r2 nmap=7.70-r3 openssh=8.0_p1-r0 openssl=1.1.1c-r0 pwgen=2.08-r0 python3=3.7.3-r0 rsync=3.1.3-r1 sqlite=3.28.0-r0 sudo=1.8.27-r0 tmux=2.9a-r0 vim=8.1.1365-r0 wget=1.20.3-r0 zip=3.0-r7 zsh-autosuggestions=0.6.1-r0 zsh-syntax-highlighting=0.6.0-r0 zsh=5.7.1-r0 \\\n && git clone --depth 1 git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \\\n && curl -L -s -o /usr/bin/hassio \"https://github.com/home-assistant/hassio-cli/releases/download/2.2.0/hassio_${BUILD_ARCH}\" \\\n && sed -i -e \"s#bin/ash#bin/zsh#\" /etc/passwd \\\n && git clone --branch \"v3.0.1\" --depth=1 https://github.com/warmcat/libwebsockets.git /tmp/libwebsockets \\\n && mkdir -p /tmp/libwebsockets/build \\\n && cd /tmp/libwebsockets/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE -DLWS_UNIX_SOCK=ON \\\n && make \\\n && make install \\\n && git clone --branch \"1.5.0\" --depth=1 https://github.com/tsl0922/ttyd.git /tmp/ttyd \\\n && mkdir -p /tmp/ttyd/build \\\n && cd /tmp/ttyd/build \\\n && cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n && make \\\n && make install \\\n && cp /usr/bin/docker /usr/local/bin/.undocked \\\n && pip3 install --no-cache-dir -r /tmp/requirements.txt \\\n && apk del --no-cache --purge .build-dependencies \\\n && find /usr/local\n#   Copy root filesystem\nCOPY rootfs /\n#   Build arguments\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n#   Labels\nLABEL io.hass.name=\"SSH & Web Terminal\" \\\n      io.hass.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      io.hass.arch=\"${BUILD_ARCH}\" \\\n      io.hass.type=\"addon\" \\\n      io.hass.version=\"${BUILD_VERSION}\" \\\n      maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n      org.label-schema.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.name=\"SSH & Web Terminal\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-ssh-web-terminal/33820?u=frenck\" \\\n      org.label-schema.usage=\"https://github.com/hassio-addons/addon-ssh/tree/master/README.md\" \\\n      org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n      org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-ssh\" \\\n      org.label-schema.vendor=\"Community Hass.io Add-ons\"\n","originalDockerfileUglifiedHash":"2a1a8bc25fe567b21745cbfe24d9d64b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c1bb5f19e95091c1f26b066b0566eb81a9d692c0.dockerfile"}