{"seed":2668970430,"processedDockerfileHash":"2e1b999c2a5502e0c71c12c93c548bf2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   makemkv Dockerfile\n#\n#   https://github.com/jlesage/docker-makemkv\n#\n#   Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.9-v3.5.2\n#   Define software versions.\nARG OPENJDK_VERSION=13-ea+9\nARG CCEXTRACTOR_VERSION=0.87\n#   Define software download URLs.\nARG OPENJDK_URL=https://download.java.net/java/early_access/alpine/9/binaries/openjdk-${OPENJDK_VERSION}_linux-x64-musl_bin.tar.gz\nARG CCEXTRACTOR_URL=https://github.com/CCExtractor/ccextractor/archive/v${CCEXTRACTOR_VERSION}.tar.gz\n#   Define working directory.\nWORKDIR /tmp\n#   Install MakeMKV.\nCOPY makemkv-builder/makemkv.tar.gz /\n#   Install Java.\nRUN add-pkg --virtual build-dependencies curl \\\n && mkdir /tmp/jdk/ \\\n && curl -# -L \"${OPENJDK_URL}\" | tar xz --strip 1 -C /tmp/jdk \\\n && mkdir /usr/lib/jvm/ \\\n && /tmp/jdk/bin/jlink --compress=2 --module-path /tmp/jdk/jmods --add-modules \"$( /tmp/jdk/bin/jdeps /opt/makemkv/share/MakeMKV/blues.jar | grep -v blues.jar | grep -v 'not found' | awk '{ print $4 }' | sort -u | tr '\\n' ',' ;)\" --output /usr/lib/jvm/jdk \\\n && rm -r /usr/lib/jvm/jdk/include /usr/lib/jvm/jdk/legal \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#   Compile and install ccextractor.\nRUN add-pkg --virtual build-dependencies build-base cmake zlib-dev curl \\\n && mkdir /tmp/ccextractor \\\n && curl -# -L \"${CCEXTRACTOR_URL}\" | tar xz --strip 1 -C /tmp/ccextractor \\\n && mkdir ccextractor/build \\\n && cd ccextractor/build \\\n && cmake ../src \\\n && make \\\n && cd ../../ \\\n && cp ccextractor/build/ccextractor /usr/bin/ \\\n && strip /usr/bin/ccextractor \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#   Install dependencies.\nRUN add-pkg wget sed findutils util-linux lsscsi\n#   Generate and install favicons.\nRUN APP_ICON_URL=https://raw.githubusercontent.com/jlesage/docker-templates/master/jlesage/images/makemkv-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#   Add files.\nCOPY rootfs/ /\n#   Update the default configuration file with the latest beta key.\nRUN /opt/makemkv/bin/makemkv-update-beta-key /defaults/settings.conf\n#   Set environment variables.\nENV APP_NAME=\"MakeMKV\" \\\n    MAKEMKV_KEY=\"BETA\"\n#   Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/output\"]\n#   Metadata.\nLABEL org.label-schema.name=\"makemkv\" \\\n      org.label-schema.description=\"Docker container for MakeMKV\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-makemkv\" \\\n      org.label-schema.schema-version=\"1.0\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  makemkv Dockerfile\n#\n#  https://github.com/jlesage/docker-makemkv\n#\n#  Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.9-v3.5.2\n#  Define software versions.\nARG OPENJDK_VERSION=13-ea+9\nARG CCEXTRACTOR_VERSION=0.87\n#  Define software download URLs.\nARG OPENJDK_URL=https://download.java.net/java/early_access/alpine/9/binaries/openjdk-${OPENJDK_VERSION}_linux-x64-musl_bin.tar.gz\nARG CCEXTRACTOR_URL=https://github.com/CCExtractor/ccextractor/archive/v${CCEXTRACTOR_VERSION}.tar.gz\n#  Define working directory.\nWORKDIR /tmp\n#  Install MakeMKV.\nADD makemkv-builder/makemkv.tar.gz /\n#  Install Java.\nRUN add-pkg --virtual build-dependencies curl \\\n && mkdir /tmp/jdk/ \\\n && curl -# -L \"${OPENJDK_URL}\" | tar xz --strip 1 -C /tmp/jdk \\\n && mkdir /usr/lib/jvm/ \\\n && /tmp/jdk/bin/jlink --compress=2 --module-path /tmp/jdk/jmods --add-modules \"$( /tmp/jdk/bin/jdeps /opt/makemkv/share/MakeMKV/blues.jar | grep -v blues.jar | grep -v 'not found' | awk '{ print $4 }' | sort -u | tr '\\n' ',' ;)\" --output /usr/lib/jvm/jdk \\\n && rm -r /usr/lib/jvm/jdk/include /usr/lib/jvm/jdk/legal \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#  Compile and install ccextractor.\nRUN add-pkg --virtual build-dependencies build-base cmake zlib-dev curl \\\n && mkdir /tmp/ccextractor \\\n && curl -# -L \"${CCEXTRACTOR_URL}\" | tar xz --strip 1 -C /tmp/ccextractor \\\n && mkdir ccextractor/build \\\n && cd ccextractor/build \\\n && cmake ../src \\\n && make \\\n && cd ../../ \\\n && cp ccextractor/build/ccextractor /usr/bin/ \\\n && strip /usr/bin/ccextractor \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#  Install dependencies.\nRUN add-pkg wget sed findutils util-linux lsscsi\n#  Generate and install favicons.\nRUN APP_ICON_URL=https://raw.githubusercontent.com/jlesage/docker-templates/master/jlesage/images/makemkv-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#  Add files.\nCOPY rootfs/ /\n#  Update the default configuration file with the latest beta key.\nRUN /opt/makemkv/bin/makemkv-update-beta-key /defaults/settings.conf\n#  Set environment variables.\nENV APP_NAME=\"MakeMKV\" \\\n    MAKEMKV_KEY=\"BETA\"\n#  Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/output\"]\n#  Metadata.\nLABEL org.label-schema.name=\"makemkv\" \\\n      org.label-schema.description=\"Docker container for MakeMKV\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-makemkv\" \\\n      org.label-schema.schema-version=\"1.0\"\n","injectedSmells":[],"originalDockerfileHash":"e18a453a7a1ce9c05cc417e09f1541be","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   makemkv Dockerfile\n#\n#   https://github.com/jlesage/docker-makemkv\n#\n#   Pull base image.\nFROM jlesage/baseimage-gui:alpine-3.9-v3.5.2\n#   Define software versions.\nARG OPENJDK_VERSION=13-ea+9\nARG CCEXTRACTOR_VERSION=0.87\n#   Define software download URLs.\nARG OPENJDK_URL=https://download.java.net/java/early_access/alpine/9/binaries/openjdk-${OPENJDK_VERSION}_linux-x64-musl_bin.tar.gz\nARG CCEXTRACTOR_URL=https://github.com/CCExtractor/ccextractor/archive/v${CCEXTRACTOR_VERSION}.tar.gz\n#   Define working directory.\nWORKDIR /tmp\n#   Install MakeMKV.\nADD makemkv-builder/makemkv.tar.gz /\n#   Install Java.\nRUN add-pkg --virtual build-dependencies curl \\\n && mkdir /tmp/jdk/ \\\n && curl -# -L \"${OPENJDK_URL}\" | tar xz --strip 1 -C /tmp/jdk \\\n && mkdir /usr/lib/jvm/ \\\n && /tmp/jdk/bin/jlink --compress=2 --module-path /tmp/jdk/jmods --add-modules \"$( /tmp/jdk/bin/jdeps /opt/makemkv/share/MakeMKV/blues.jar | grep -v blues.jar | grep -v 'not found' | awk '{ print $4 }' | sort -u | tr '\\n' ',' ;)\" --output /usr/lib/jvm/jdk \\\n && rm -r /usr/lib/jvm/jdk/include /usr/lib/jvm/jdk/legal \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#   Compile and install ccextractor.\nRUN add-pkg --virtual build-dependencies build-base cmake zlib-dev curl \\\n && mkdir /tmp/ccextractor \\\n && curl -# -L \"${CCEXTRACTOR_URL}\" | tar xz --strip 1 -C /tmp/ccextractor \\\n && mkdir ccextractor/build \\\n && cd ccextractor/build \\\n && cmake ../src \\\n && make \\\n && cd ../../ \\\n && cp ccextractor/build/ccextractor /usr/bin/ \\\n && strip /usr/bin/ccextractor \\\n && del-pkg build-dependencies \\\n && rm -rf /tmp/* /tmp/.[!.]*\n#   Install dependencies.\nRUN add-pkg wget sed findutils util-linux lsscsi\n#   Generate and install favicons.\nRUN APP_ICON_URL=https://raw.githubusercontent.com/jlesage/docker-templates/master/jlesage/images/makemkv-icon.png \\\n && install_app_icon.sh \"$APP_ICON_URL\"\n#   Add files.\nCOPY rootfs/ /\n#   Update the default configuration file with the latest beta key.\nRUN /opt/makemkv/bin/makemkv-update-beta-key /defaults/settings.conf\n#   Set environment variables.\nENV APP_NAME=\"MakeMKV\" \\\n    MAKEMKV_KEY=\"BETA\"\n#   Define mountable directories.\nVOLUME [\"/config\"]\nVOLUME [\"/storage\"]\nVOLUME [\"/output\"]\n#   Metadata.\nLABEL org.label-schema.name=\"makemkv\" \\\n      org.label-schema.description=\"Docker container for MakeMKV\" \\\n      org.label-schema.version=\"unknown\" \\\n      org.label-schema.vcs-url=\"https://github.com/jlesage/docker-makemkv\" \\\n      org.label-schema.schema-version=\"1.0\"\n","originalDockerfileUglifiedHash":"8354aa803a1cad3c97ca72f8f608b1d4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/efd5dc9312311c8029af87fc4a749cfc646151ee.dockerfile"}