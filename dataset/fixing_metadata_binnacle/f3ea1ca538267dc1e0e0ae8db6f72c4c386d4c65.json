{"seed":889831069,"processedDockerfileHash":"a651b049e9494cc8df2e472bcd25ba2b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM REPLACE_BASE_CENTOS\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CB_SSH_PUB_KEY=\"NA\"\nENV CB_LOGIN=\"NA\"\n#   sudo-install-man\nRUN yum install -y sudo\n#   echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#   sudo-install-man\n#   ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#   ifconfig-install-sl\n#   ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#   ip-install-sl\n#   pkill-install-pm\nRUN yum install -y psmisc coreutils\n#   pkill-install-pm\n#   which-install-pm\nRUN /bin/true\n#   which-install-pm\n#   ntp-install-pm\nRUN yum install -y ntp ntpdate\n#   ntp-install-pm\n#   git-install-pm\nRUN yum install -y git\n#   git-install-pm\n#   wget-install-pm\nRUN yum install -y wget\n#   wget-install-pm\n#   pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#   pip-install-pm\n#   gcc-install-pm\nRUN yum install -y gcc\n#   gcc-install-pm\n#   make-install-pm\nRUN yum install -y make\n#   make-install-pm\n#   bc-install-pm\nRUN yum install -y bc\n#   bc-install-pm\n#   sshpass-install-pm\nRUN yum install -y sshpass\n#   sshpass-install-pm\n#   curl-install-pm\nRUN yum install -y curl\n#   curl-install-pm\n#   screen-install-pm\nRUN yum install -y screen\n#   screen-install-pm\n#   rsync-install-pm\nRUN yum install -y rsync\n#   rsync-install-pm\n#   ncftp-install-pm\nRUN yum install -y ncftp\n#   ncftp-install-pm\n#   lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#   lftp-install-pm\n#   haproxy-install-pm\nRUN yum install -y haproxy\n#   service_stop_disable haproxy\n#   haproxy-install-pm\nRUN yum install -y vim\n#   netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#   netcat-install-man\n#   nmap-install-pm\nRUN yum install -y nmap\n#   nmap-install-pm\n#   openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#   openvpn-install-pm\n#   gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#   service_stop_disable gmond\n#   gmond-install-pm\n#   rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s $( sudo which rsyslogd ;) /usr/local/bin/rsyslogd\n#   rsyslog-install-pm\n#   apache-install-pm\nRUN yum____-y____install____httpd ; /bin/true\n#   apache-install-pm\n#   redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#   redis-install-pm\n#   python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#   python-devel-install-pm \n#   python-prettytable-install-pip\nRUN pip install docutils==0.19 prettytable==3.7.0 --upgrade\n#   python-prettytable-install-pip\n#   python-daemon-install-pip\nRUN pip install python-daemon==2.1.2 --upgrade\n#   python-daemon-install-pip\n#   python-twisted-install-pip\nRUN pip install twisted==22.10.0 --upgrade\n#   python-twisted-install-pip\n#   python-beaker-install-pip\nRUN pip install beaker==1.12.1 --upgrade\n#   python-beaker-install-pip\n#   python-webob-install-pip\nRUN pip install webob==1.8.7 --upgrade\n#   python-webob-install-pip\n#   pyredis-install-pip\n#  RUN pip install --upgrade redis\nRUN pip install redis==2.10.6\n#   pyredis-install-pip\n#   pymongo-install-pip\nRUN pip install mongo==0.2.0 --upgrade\n#   pymongo-install-pip\n#   pssh-install-pm\nRUN yum install -y pssh\n#   pssh-install-pm\n#   docutils-install-pip\nRUN pip install docutils==0.19 --upgrade\n#   docutils-install-pip\n#   python-setuptools-install-pip\nRUN pip install setuptools==67.6.1 --upgrade\n#   python-setuptools-install-pip \n#   markup-install-pip\nRUN pip install markup==0.2 --upgrade\n#   markup-install-pip \n#   pyyaml-install-pip\nRUN pip install pyyaml==6.0 --upgrade\n#   pyyaml-install-pip \n#   ruamelyaml-install-pip\nRUN pip install ruamel.yaml==0.17.21 --upgrade\n#   ruamelyaml-install-pip\n#   iptables-install-pm\nRUN yum install -y iptables\n#   service_stop_disable iptables\n#   iptables-install-pm\n#   jq-install-pm\nRUN yum install -y jq\n#   jq-install-pm\n#   sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#   sshd-install-pm \nRUN rsync -az /root/.ssh/ /home/REPLACE_USERNAME/.ssh/\n#   sshconfig-install-man\nRUN mkdir -p ~/.ssh\nRUN chmod 700 ~/.ssh\nRUN echo \"StrictHostKeyChecking=no\" > /home/REPLACE_USERNAME/.ssh/config\nRUN echo \"UserKnownHostsFile=/dev/null\" >> /home/REPLACE_USERNAME/.ssh/config\nRUN chmod 600 /home/REPLACE_USERNAME/.ssh/config\n#   sshconfig-install-man\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME/\nUSER REPLACE_USERNAME\nWORKDIR /home/REPLACE_USERNAME/\n#  RUN GIT_TRACE=1; GIT_CURL_VERBOSE=1 git clone --verbose http://github.com/ibmcb/cbtool.git\nRUN git clone https://github.com/ibmcb/cbtool.git ; cd cbtool ; git checkout REPLACE_BRANCH\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party\n#   gmetad-python-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#   gmetad-python-install-git\n#  pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n#  pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME\nUSER root\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM REPLACE_BASE_CENTOS\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CB_SSH_PUB_KEY=\"NA\"\nENV CB_LOGIN=\"NA\"\n#  sudo-install-man\nRUN yum install -y sudo\n#  echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#  sudo-install-man\n#  ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#  ifconfig-install-sl\n#  ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#  ip-install-sl\n#  pkill-install-pm\nRUN yum install -y psmisc coreutils\n#  pkill-install-pm\n#  which-install-pm\nRUN /bin/true\n#  which-install-pm\n#  ntp-install-pm\nRUN yum install -y ntp ntpdate\n#  ntp-install-pm\n#  git-install-pm\nRUN yum install -y git\n#  git-install-pm\n#  wget-install-pm\nRUN yum install -y wget\n#  wget-install-pm\n#  pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#  pip-install-pm\n#  gcc-install-pm\nRUN yum install -y gcc\n#  gcc-install-pm\n#  make-install-pm\nRUN yum install -y make\n#  make-install-pm\n#  bc-install-pm\nRUN yum install -y bc\n#  bc-install-pm\n#  sshpass-install-pm\nRUN yum install -y sshpass\n#  sshpass-install-pm\n#  curl-install-pm\nRUN yum install -y curl\n#  curl-install-pm\n#  screen-install-pm\nRUN yum install -y screen\n#  screen-install-pm\n#  rsync-install-pm\nRUN yum install -y rsync\n#  rsync-install-pm\n#  ncftp-install-pm\nRUN yum install -y ncftp\n#  ncftp-install-pm\n#  lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#  lftp-install-pm\n#  haproxy-install-pm\nRUN yum install -y haproxy\n#  service_stop_disable haproxy\n#  haproxy-install-pm\nRUN yum install -y vim\n#  netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#  netcat-install-man\n#  nmap-install-pm\nRUN yum install -y nmap\n#  nmap-install-pm\n#  openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#  openvpn-install-pm\n#  gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#  service_stop_disable gmond\n#  gmond-install-pm\n#  rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s $( sudo which rsyslogd ;) /usr/local/bin/rsyslogd\n#  rsyslog-install-pm\n#  apache-install-pm\nRUN yum____-y____install____httpd ; /bin/true\n#  apache-install-pm\n#  redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#  redis-install-pm\n#  python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#  python-devel-install-pm \n#  python-prettytable-install-pip\nRUN pip install docutils prettytable --upgrade\n#  python-prettytable-install-pip\n#  python-daemon-install-pip\nRUN pip install python-daemon==2.1.2 --upgrade\n#  python-daemon-install-pip\n#  python-twisted-install-pip\nRUN pip install twisted --upgrade\n#  python-twisted-install-pip\n#  python-beaker-install-pip\nRUN pip install beaker --upgrade\n#  python-beaker-install-pip\n#  python-webob-install-pip\nRUN pip install webob --upgrade\n#  python-webob-install-pip\n#  pyredis-install-pip\n# RUN pip install --upgrade redis\nRUN pip install redis==2.10.6\n#  pyredis-install-pip\n#  pymongo-install-pip\nRUN pip install mongo --upgrade\n#  pymongo-install-pip\n#  pssh-install-pm\nRUN yum install -y pssh\n#  pssh-install-pm\n#  docutils-install-pip\nRUN pip install docutils --upgrade\n#  docutils-install-pip\n#  python-setuptools-install-pip\nRUN pip install setuptools --upgrade\n#  python-setuptools-install-pip \n#  markup-install-pip\nRUN pip install markup --upgrade\n#  markup-install-pip \n#  pyyaml-install-pip\nRUN pip install pyyaml --upgrade\n#  pyyaml-install-pip \n#  ruamelyaml-install-pip\nRUN pip install ruamel.yaml --upgrade\n#  ruamelyaml-install-pip\n#  iptables-install-pm\nRUN yum install -y iptables\n#  service_stop_disable iptables\n#  iptables-install-pm\n#  jq-install-pm\nRUN yum install -y jq\n#  jq-install-pm\n#  sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#  sshd-install-pm \nRUN rsync -az /root/.ssh/ /home/REPLACE_USERNAME/.ssh/\n#  sshconfig-install-man\nRUN mkdir -p ~/.ssh\nRUN chmod 700 ~/.ssh\nRUN echo \"StrictHostKeyChecking=no\" > /home/REPLACE_USERNAME/.ssh/config\nRUN echo \"UserKnownHostsFile=/dev/null\" >> /home/REPLACE_USERNAME/.ssh/config\nRUN chmod 600 /home/REPLACE_USERNAME/.ssh/config\n#  sshconfig-install-man\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME/\nUSER REPLACE_USERNAME\nWORKDIR /home/REPLACE_USERNAME/\n# RUN GIT_TRACE=1; GIT_CURL_VERBOSE=1 git clone --verbose http://github.com/ibmcb/cbtool.git\nRUN git clone https://github.com/ibmcb/cbtool.git ; cd cbtool ; git checkout REPLACE_BRANCH\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party\n#  gmetad-python-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#  gmetad-python-install-git\n# pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n# pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME\nUSER root\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\n","injectedSmells":[],"originalDockerfileHash":"8c7b6e17802f6eae3ab352cc3509be9d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM REPLACE_BASE_CENTOS\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CB_SSH_PUB_KEY=\"NA\"\nENV CB_LOGIN=\"NA\"\n#   sudo-install-man\nRUN yum install -y sudo\n#   echo \"USERNAME  ALL=(ALL:ALL) NOPASSWD:ALL\" >> /etc/sudoers; sed -i s/\"Defaults requiretty\"/\"#Defaults requiretty\"/g /etc/sudoers\n#   sudo-install-man\n#   ifconfig-install-sl\nRUN yum -y update ; yum clean all\nRUN yum install -y net-tools\nRUN ln -s /sbin/ifconfig /usr/local/bin/ifconfig\n#   ifconfig-install-sl\n#   ip-install-sl\nRUN ln -s /sbin/ip /usr/local/bin/ip\n#   ip-install-sl\n#   pkill-install-pm\nRUN yum install -y psmisc coreutils\n#   pkill-install-pm\n#   which-install-pm\nRUN /bin/true\n#   which-install-pm\n#   ntp-install-pm\nRUN yum install -y ntp ntpdate\n#   ntp-install-pm\n#   git-install-pm\nRUN yum install -y git\n#   git-install-pm\n#   wget-install-pm\nRUN yum install -y wget\n#   wget-install-pm\n#   pip-install-pm\nRUN yum install -y epel-release\nRUN yum install -y python-pip\n#   pip-install-pm\n#   gcc-install-pm\nRUN yum install -y gcc\n#   gcc-install-pm\n#   make-install-pm\nRUN yum install -y make\n#   make-install-pm\n#   bc-install-pm\nRUN yum install -y bc\n#   bc-install-pm\n#   sshpass-install-pm\nRUN yum install -y sshpass\n#   sshpass-install-pm\n#   curl-install-pm\nRUN yum install -y curl\n#   curl-install-pm\n#   screen-install-pm\nRUN yum install -y screen\n#   screen-install-pm\n#   rsync-install-pm\nRUN yum install -y rsync\n#   rsync-install-pm\n#   ncftp-install-pm\nRUN yum install -y ncftp\n#   ncftp-install-pm\n#   lftp-install-pm\nRUN yum install -y lftp iputils-ping\n#   lftp-install-pm\n#   haproxy-install-pm\nRUN yum install -y haproxy\n#   service_stop_disable haproxy\n#   haproxy-install-pm\nRUN yum install -y vim\n#   netcat-install-man\nRUN yum install -y nmap-ncat netcat-openbsd\nRUN cp /bin/nc /usr/local/bin/netcat\n#   netcat-install-man\n#   nmap-install-pm\nRUN yum install -y nmap\n#   nmap-install-pm\n#   openvpn-install-pm\nRUN yum install -y openvpn\nRUN ln -s /usr/sbin/openvpn /usr/local/bin/openvpn\n#   openvpn-install-pm\n#   gmond-install-pm\nRUN yum install -y ganglia ganglia-gmond.REPLACE_ARCH1\nRUN ln -s /usr/sbin/gmond /usr/local/bin/gmond\n#   service_stop_disable gmond\n#   gmond-install-pm\n#   rsyslog-install-pm\nRUN yum install -y rsyslog\nRUN ln -s $( sudo which rsyslogd ;) /usr/local/bin/rsyslogd\n#   rsyslog-install-pm\n#   apache-install-pm\nRUN yum____-y____install____httpd ; /bin/true\n#   apache-install-pm\n#   redis-install-pm\nRUN yum install -y redis\nRUN sed -i \"s/.*bind 127.0.0.1/bind 0.0.0.0/\" /etc/redis.conf\n#   redis-install-pm\n#   python-devel-install-pm\nRUN yum install -y python-devel libffi-devel openssl-devel libxml2-devel\n#   python-devel-install-pm \n#   python-prettytable-install-pip\nRUN pip install docutils prettytable --upgrade\n#   python-prettytable-install-pip\n#   python-daemon-install-pip\nRUN pip install python-daemon==2.1.2 --upgrade\n#   python-daemon-install-pip\n#   python-twisted-install-pip\nRUN pip install twisted --upgrade\n#   python-twisted-install-pip\n#   python-beaker-install-pip\nRUN pip install beaker --upgrade\n#   python-beaker-install-pip\n#   python-webob-install-pip\nRUN pip install webob --upgrade\n#   python-webob-install-pip\n#   pyredis-install-pip\n#  RUN pip install --upgrade redis\nRUN pip install redis==2.10.6\n#   pyredis-install-pip\n#   pymongo-install-pip\nRUN pip install mongo --upgrade\n#   pymongo-install-pip\n#   pssh-install-pm\nRUN yum install -y pssh\n#   pssh-install-pm\n#   docutils-install-pip\nRUN pip install docutils --upgrade\n#   docutils-install-pip\n#   python-setuptools-install-pip\nRUN pip install setuptools --upgrade\n#   python-setuptools-install-pip \n#   markup-install-pip\nRUN pip install markup --upgrade\n#   markup-install-pip \n#   pyyaml-install-pip\nRUN pip install pyyaml --upgrade\n#   pyyaml-install-pip \n#   ruamelyaml-install-pip\nRUN pip install ruamel.yaml --upgrade\n#   ruamelyaml-install-pip\n#   iptables-install-pm\nRUN yum install -y iptables\n#   service_stop_disable iptables\n#   iptables-install-pm\n#   jq-install-pm\nRUN yum install -y jq\n#   jq-install-pm\n#   sshd-install-pm\nRUN yum -y install openssh-server\nRUN sudo bash -c \"echo 'UseDNS no' >> /etc/ssh/sshd_config\"\nRUN sed -i 's/.*UseDNS.*/UseDNS no/g' /etc/ssh/sshd_config\nRUN sed -i 's/.*GSSAPIAuthentication.*/GSSAPIAuthentication no/g' /etc/ssh/sshd_config\n#   sshd-install-pm \nRUN rsync -az /root/.ssh/ /home/REPLACE_USERNAME/.ssh/\n#   sshconfig-install-man\nRUN mkdir -p ~/.ssh\nRUN chmod 700 ~/.ssh\nRUN echo \"StrictHostKeyChecking=no\" > /home/REPLACE_USERNAME/.ssh/config\nRUN echo \"UserKnownHostsFile=/dev/null\" >> /home/REPLACE_USERNAME/.ssh/config\nRUN chmod 600 /home/REPLACE_USERNAME/.ssh/config\n#   sshconfig-install-man\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME/\nUSER REPLACE_USERNAME\nWORKDIR /home/REPLACE_USERNAME/\n#  RUN GIT_TRACE=1; GIT_CURL_VERBOSE=1 git clone --verbose http://github.com/ibmcb/cbtool.git\nRUN git clone https://github.com/ibmcb/cbtool.git ; cd cbtool ; git checkout REPLACE_BRANCH\nRUN mkdir -p /home/REPLACE_USERNAME/cbtool/3rd_party\n#   gmetad-python-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/monitor-core.git\n#   gmetad-python-install-git\n#  pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party\nRUN git clone https://github.com/ibmcb/HTML.py.git\nWORKDIR /home/REPLACE_USERNAME/cbtool/3rd_party/HTML.py\nRUN sudo python setup.py install\n#  pyhtml-install-git\nWORKDIR /home/REPLACE_USERNAME\nUSER root\nRUN chown -R REPLACE_USERNAME:REPLACE_USERNAME /home/REPLACE_USERNAME\n","originalDockerfileUglifiedHash":"31382cfced4b036cb702eedc1470a751","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f3ea1ca538267dc1e0e0ae8db6f72c4c386d4c65.dockerfile"}