{"seed":724090710,"processedDockerfileHash":"9bf9252d94a114baff02cdcb114eee12","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ros:dashing\nLABEL maintainer=\"Víctor Mayoral Vilches v.mayoralv@gmail.com\"\nENV TERM=\"xterm\"\nENV ROS_DISTRO=\"dashing\"\nENV ROS_WS=\"/opt/ros2_moveit2_ws\"\nWORKDIR $ROS_WS\nENV LANG=\"C.UTF-8\"\nENV LC_ALL=\"C.UTF-8\"\nRUN apt-get update -qq \\\n && (apt-get update ;apt-get install --no-install-recommends wget clang clang-format-3.9 clang-tidy clang-tools -qq -y ) \\\n && rm -rf /var/lib/apt/lists/*\n#   mixins are configuration files used to compile ROS 2 easily\nRUN apt-get update -qq \\\n && (apt-get update ;apt-get install --no-install-recommends python3-colcon-mixin git -y )\nRUN colcon mixin add default https://raw.githubusercontent.com/colcon/colcon-mixin-repository/master/index.yaml\nRUN colcon mixin update default\nRUN (apt-get update ;apt-get install --no-install-recommends libasio-dev libtinyxml2-dev liblog4cxx-dev less tmux vim -y )\n#   colcon-santizer-reports for analyzing ROS 2\n#     a plugin for colcon test that parses sanitizer issues \n#     from stdout/stderr, deduplicates the issues, and outputs them to a CSV.\nRUN git clone https://github.com/colcon/colcon-sanitizer-reports.git\nRUN cd colcon-sanitizer-reports \\\n && python3 setup.py install\nRUN (apt-get update ;apt-get install --no-install-recommends ccache -y )\n#   increase cache size\nRUN ccache -M 10G\nENV CC=\"/usr/lib/ccache/gcc\"\nENV CXX=\"/usr/lib/ccache/g++\"\n#   Download moveit source, so that we can get necessary dependencies\nRUN mkdir -p $ROS_WS/src \\\n && wget https://raw.githubusercontent.com/AcutronicRobotics/moveit2/master/moveit2.repos \\\n && vcs import src < moveit2.repos \\\n && cd src \\\n && git clone https://github.com/AcutronicRobotics/moveit2\n#   wstool init --shallow . https://raw.githubusercontent.com/ros-planning/moveit2/master/moveit.rosinstall\n#   TODO remove once https://github.com/ros2/geometry2/issues/116 is fixed\nRUN mv $ROS_WS/src/geometry2/tf2_kdl $ROS_WS/src/\nRUN rm -rf $ROS_WS/src/geometry2\n#   Apparently actions don't get installed right away, same with other deps\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends ros-dashing-rclcpp-action libboost-date-time-dev libboost-system-dev libboost-thread-dev libboost-filesystem-dev ros-dashing-libcurl-vendor ros-dashing-resource-retriever libassimp-dev libqhull-dev ros-dashing-yaml-cpp-vendor libboost-iostreams-dev libfcl-dev -y )\n#   Download all MoveIt 2 dependencies\nRUN : \\\n && rosdep update -q \\\n && rosdep install -q -y --from-paths . --ignore-src --rosdistro ${ROS_DISTRO} --as-root=apt:false || true \\\n && rm -rf /var/lib/apt/lists/*\n#  #########################################################\n#         ASan\n#  #########################################################\n#   Fetch some additional dependencies\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends libompl-dev python-vcstool python3-colcon-common-extensions libasan5 -y )\n#   Build code\n#   RUN /bin/bash -c \"source /opt/ros/dashing/setup.bash && colcon build\"\n#   Connected with https://github.com/AcutronicRobotics/moveit2/issues/112, we use --merge-install instead\nRUN /bin/bash -c \"source /opt/ros/dashing/setup.bash \\\n && colcon build --build-base=build-asan --install-base=install-asan --cmake-args -DOSRF_TESTING_TOOLS_CPP_DISABLE_MEMORY_TOOLS=ON -DINSTALL_EXAMPLES=OFF -DSECURITY=ON --no-warn-unused-cli -DCMAKE_BUILD_TYPE=Debug --mixin asan-gcc --merge-install --packages-up-to moveit_core\"\n#   # Launch tests \n#   RUN colcon test --build-base=build-asan --install-base=install-asan \\\n#       --event-handlers sanitizer_report+ --packages-up-to test_communication\n#  #########################################################\n#         TSan\n#  #########################################################\n#   TODO\nCMD [\"bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ros:dashing\nLABEL maintainer=\"Víctor Mayoral Vilches v.mayoralv@gmail.com\"\nENV TERM=\"xterm\"\nENV ROS_DISTRO=\"dashing\"\nENV ROS_WS=\"/opt/ros2_moveit2_ws\"\nWORKDIR $ROS_WS\nENV LANG=\"C.UTF-8\"\nENV LC_ALL=\"C.UTF-8\"\nRUN apt-get update -qq \\\n && apt-get install wget clang clang-format-3.9 clang-tidy clang-tools -qq -y \\\n && rm -rf /var/lib/apt/lists/*\n#  mixins are configuration files used to compile ROS 2 easily\nRUN apt-get update -qq \\\n && apt-get install python3-colcon-mixin git -y\nRUN colcon mixin add default https://raw.githubusercontent.com/colcon/colcon-mixin-repository/master/index.yaml\nRUN colcon mixin update default\nRUN apt-get install --no-install-recommends -y libasio-dev libtinyxml2-dev liblog4cxx-dev less tmux vim\n#  colcon-santizer-reports for analyzing ROS 2\n#    a plugin for colcon test that parses sanitizer issues \n#    from stdout/stderr, deduplicates the issues, and outputs them to a CSV.\nRUN git clone https://github.com/colcon/colcon-sanitizer-reports.git\nRUN cd colcon-sanitizer-reports \\\n && python3 setup.py install\nRUN apt-get install -y ccache\n#  increase cache size\nRUN ccache -M 10G\nENV CC=\"/usr/lib/ccache/gcc\"\nENV CXX=\"/usr/lib/ccache/g++\"\n#  Download moveit source, so that we can get necessary dependencies\nRUN mkdir -p $ROS_WS/src \\\n && wget https://raw.githubusercontent.com/AcutronicRobotics/moveit2/master/moveit2.repos \\\n && vcs import src < moveit2.repos \\\n && cd src \\\n && git clone https://github.com/AcutronicRobotics/moveit2\n#  wstool init --shallow . https://raw.githubusercontent.com/ros-planning/moveit2/master/moveit.rosinstall\n#  TODO remove once https://github.com/ros2/geometry2/issues/116 is fixed\nRUN mv $ROS_WS/src/geometry2/tf2_kdl $ROS_WS/src/\nRUN rm -rf $ROS_WS/src/geometry2\n#  Apparently actions don't get installed right away, same with other deps\nRUN apt-get update \\\n && apt-get install ros-dashing-rclcpp-action libboost-date-time-dev libboost-system-dev libboost-thread-dev libboost-filesystem-dev ros-dashing-libcurl-vendor ros-dashing-resource-retriever libassimp-dev libqhull-dev ros-dashing-yaml-cpp-vendor libboost-iostreams-dev libfcl-dev -y\n#  Download all MoveIt 2 dependencies\nRUN apt-get update -qq \\\n && rosdep update -q \\\n && rosdep install -q -y --from-paths . --ignore-src --rosdistro ${ROS_DISTRO} --as-root=apt:false || true \\\n && rm -rf /var/lib/apt/lists/*\n# #########################################################\n#        ASan\n# #########################################################\n#  Fetch some additional dependencies\nRUN apt-get update \\\n && apt-get install libompl-dev python-vcstool python3-colcon-common-extensions libasan5 -y\n#  Build code\n#  RUN /bin/bash -c \"source /opt/ros/dashing/setup.bash && colcon build\"\n#  Connected with https://github.com/AcutronicRobotics/moveit2/issues/112, we use --merge-install instead\nRUN /bin/bash -c \"source /opt/ros/dashing/setup.bash \\\n && colcon build --build-base=build-asan --install-base=install-asan --cmake-args -DOSRF_TESTING_TOOLS_CPP_DISABLE_MEMORY_TOOLS=ON -DINSTALL_EXAMPLES=OFF -DSECURITY=ON --no-warn-unused-cli -DCMAKE_BUILD_TYPE=Debug --mixin asan-gcc --merge-install --packages-up-to moveit_core\"\n#  # Launch tests \n#  RUN colcon test --build-base=build-asan --install-base=install-asan \\\n#      --event-handlers sanitizer_report+ --packages-up-to test_communication\n# #########################################################\n#        TSan\n# #########################################################\n#  TODO\nCMD [\"bash\"]\n","injectedSmells":[],"originalDockerfileHash":"87a0b229675f17d071f824b12b28bf56","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ros:dashing\nLABEL maintainer=\"Víctor Mayoral Vilches v.mayoralv@gmail.com\"\nENV TERM=\"xterm\"\nENV ROS_DISTRO=\"dashing\"\nENV ROS_WS=\"/opt/ros2_moveit2_ws\"\nWORKDIR $ROS_WS\nENV LANG=\"C.UTF-8\"\nENV LC_ALL=\"C.UTF-8\"\nRUN apt-get update -qq \\\n && apt-get install wget clang clang-format-3.9 clang-tidy clang-tools -qq -y \\\n && rm -rf /var/lib/apt/lists/*\n#   mixins are configuration files used to compile ROS 2 easily\nRUN apt-get update -qq \\\n && apt-get install python3-colcon-mixin git -y\nRUN colcon mixin add default https://raw.githubusercontent.com/colcon/colcon-mixin-repository/master/index.yaml\nRUN colcon mixin update default\nRUN apt-get install --no-install-recommends libasio-dev libtinyxml2-dev liblog4cxx-dev less tmux vim -y\n#   colcon-santizer-reports for analyzing ROS 2\n#     a plugin for colcon test that parses sanitizer issues \n#     from stdout/stderr, deduplicates the issues, and outputs them to a CSV.\nRUN git clone https://github.com/colcon/colcon-sanitizer-reports.git\nRUN cd colcon-sanitizer-reports \\\n && python3 setup.py install\nRUN apt-get install ccache -y\n#   increase cache size\nRUN ccache -M 10G\nENV CC=\"/usr/lib/ccache/gcc\"\nENV CXX=\"/usr/lib/ccache/g++\"\n#   Download moveit source, so that we can get necessary dependencies\nRUN mkdir -p $ROS_WS/src \\\n && wget https://raw.githubusercontent.com/AcutronicRobotics/moveit2/master/moveit2.repos \\\n && vcs import src < moveit2.repos \\\n && cd src \\\n && git clone https://github.com/AcutronicRobotics/moveit2\n#   wstool init --shallow . https://raw.githubusercontent.com/ros-planning/moveit2/master/moveit.rosinstall\n#   TODO remove once https://github.com/ros2/geometry2/issues/116 is fixed\nRUN mv $ROS_WS/src/geometry2/tf2_kdl $ROS_WS/src/\nRUN rm -rf $ROS_WS/src/geometry2\n#   Apparently actions don't get installed right away, same with other deps\nRUN apt-get update \\\n && apt-get install ros-dashing-rclcpp-action libboost-date-time-dev libboost-system-dev libboost-thread-dev libboost-filesystem-dev ros-dashing-libcurl-vendor ros-dashing-resource-retriever libassimp-dev libqhull-dev ros-dashing-yaml-cpp-vendor libboost-iostreams-dev libfcl-dev -y\n#   Download all MoveIt 2 dependencies\nRUN apt-get update -qq \\\n && rosdep update -q \\\n && rosdep install -q -y --from-paths . --ignore-src --rosdistro ${ROS_DISTRO} --as-root=apt:false || true \\\n && rm -rf /var/lib/apt/lists/*\n#  #########################################################\n#         ASan\n#  #########################################################\n#   Fetch some additional dependencies\nRUN apt-get update \\\n && apt-get install libompl-dev python-vcstool python3-colcon-common-extensions libasan5 -y\n#   Build code\n#   RUN /bin/bash -c \"source /opt/ros/dashing/setup.bash && colcon build\"\n#   Connected with https://github.com/AcutronicRobotics/moveit2/issues/112, we use --merge-install instead\nRUN /bin/bash -c \"source /opt/ros/dashing/setup.bash \\\n && colcon build --build-base=build-asan --install-base=install-asan --cmake-args -DOSRF_TESTING_TOOLS_CPP_DISABLE_MEMORY_TOOLS=ON -DINSTALL_EXAMPLES=OFF -DSECURITY=ON --no-warn-unused-cli -DCMAKE_BUILD_TYPE=Debug --mixin asan-gcc --merge-install --packages-up-to moveit_core\"\n#   # Launch tests \n#   RUN colcon test --build-base=build-asan --install-base=install-asan \\\n#       --event-handlers sanitizer_report+ --packages-up-to test_communication\n#  #########################################################\n#         TSan\n#  #########################################################\n#   TODO\nCMD [\"bash\"]\n","originalDockerfileUglifiedHash":"f4deaa9596f2dfa16ac651b6102fcf22","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6141089d8c7e350ca49ad8d6cdfca0772a534717.dockerfile"}