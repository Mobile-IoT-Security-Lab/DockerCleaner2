{"seed":3200326366,"processedDockerfileHash":"b2d6d5ce028c44ef5bf805652f0bee66","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-user"],"processedDockerfile":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch AS unbound\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.3\" \\\n    UNBOUND_SHA256=\"2b692b8311edfad41e7d0380aac34576060d4176add81dc5db419c79b2a4cecc\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.3.tar.gz\"\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils=9.0.12+nmu1 ca-certificates=20200601~deb9u2 ldnsutils=1.7.0-1+deb9u1 libevent-2.0 libexpat1=2.2.0-2+deb9u5 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.3 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nWORKDIR /tmp/src\nCOPY --from=unbound /opt /opt\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils=9.0.12+nmu1 ca-certificates=20200601~deb9u2 ldnsutils=1.7.0-1+deb9u1 libevent-2.0 libexpat1=2.2.0-2+deb9u5 -y \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nEXPOSE 53/tcp\nHEALTHCHECK --interval=5s --timeout=3s --start-period=5s CMD drill @127.0.0.1 cloudflare.com || exit 1\nCMD [\"/unbound.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n","originalDockerfile":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch AS unbound\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.3\" \\\n    UNBOUND_SHA256=\"2b692b8311edfad41e7d0380aac34576060d4176add81dc5db419c79b2a4cecc\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.3.tar.gz\"\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.3 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nWORKDIR /tmp/src\nCOPY --from=unbound /opt /opt\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 -y \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nEXPOSE 53/tcp\nHEALTHCHECK --interval=5s --timeout=3s --start-period=5s CMD drill @127.0.0.1 cloudflare.com || exit 1\nCMD [\"/unbound.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"10f7b6668a5ea25e6d652302bec11ade","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch AS unbound\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.3\" \\\n    UNBOUND_SHA256=\"2b692b8311edfad41e7d0380aac34576060d4176add81dc5db419c79b2a4cecc\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.3.tar.gz\"\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.3 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nWORKDIR /tmp/src\nCOPY --from=unbound /opt /opt\nRUN set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 -y \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nEXPOSE 53/tcp\nHEALTHCHECK --interval=5s --timeout=3s --start-period=5s CMD drill @127.0.0.1 cloudflare.com || exit 1\nCMD [\"/unbound.sh\"]\n","originalDockerfileUglifiedHash":"10f7b6668a5ea25e6d652302bec11ade","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/301ecfd448e6904ff98b9e68cd9e2d30f0157e4f.dockerfile"}