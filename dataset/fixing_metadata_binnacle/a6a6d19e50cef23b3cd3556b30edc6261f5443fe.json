{"seed":1137924262,"processedDockerfileHash":"d20a33f529ddad872b9548b1c6d259fc","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:stretch\nARG BUILD_DATE\nARG VCS_REF\nRUN apt-get update \\\n && apt-get install --no-install-recommends gnupg2=2.1.18-8~deb9u4 dirmngr=2.1.18-8~deb9u4 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nCOPY kali.pub /etc/apt/kali.pub\nRUN echo \"deb http://http.kali.org/kali kali-rolling main contrib non-free\" > /etc/apt/sources.list.d/kali.list \\\n && echo \"deb-src http://http.kali.org/kali kali-rolling main contrib non-free\" >> /etc/apt/sources.list.d/kali.list \\\n && apt-key add /etc/apt/kali.pub \\\n && apt-get update \\\n && apt-get install --no-install-recommends less=481-2.1 vim=2:8.0.0197-4+deb9u7 build-essential=12.3 libreadline-dev=7.0-3 libssl-dev=1.1.0l-1~deb9u6 libpq5=9.6.24-0+deb9u1 libpq-dev=9.6.24-0+deb9u1 libreadline5=5.2+dfsg-3+b1 libsqlite3-dev=3.16.2-5+deb9u3 libpcap-dev=1.8.1-3+deb9u1 subversion=1.9.5-1+deb9u6 git-core=1:2.11.0-3+deb9u7 autoconf=2.69-10 pgadmin3=1.22.2-1 curl=7.52.1-5+deb9u16 zlib1g-dev=1:1.2.8.dfsg-5+deb9u1 libxml2-dev=2.9.4+dfsg1-2.2+deb9u7 libxslt1-dev=1.1.29-2.1+deb9u2 xtightvncviewer=1:1.3.9-9+deb9u1 libyaml-dev=0.1.7-2 ruby=1:2.3.3 ruby-dev=1:2.3.3 nmap=7.40-1 beef-xss mitmproxy=0.18.2-6+deb9u2 python-pefile=2016.3.28-4 net-tools=1.60+git20161116.90da8a0-1 iputils-ping=3:20161105-1 iptables=1.6.0+snapshot20161117-6 sqlmap=1.1-2 bettercap bdfproxy rsync=3.1.2-1+deb9u3 enum4linux openssh-client=1:7.4p1-10+deb9u7 mfoc mfcuk libnfc-bin=1.7.1-4+b1 hydra=8.3-3 nikto weevely netcat-traditional=1.10-41+b1 aircrack-ng=1:1.2-0~rc4-2 pyrit cowpatty pciutils=1:3.5.2-1 kmod=23-2 wget=1.18-5+deb9u3 unicornscan ftp=0.17-34 wfuzz=2.1.4-1 python-pip=9.0.1-2+deb9u2 moreutils=0.60-1 upx john=1.8.0-2+b1 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && curl https://github.com/brimstone/gobuster/releases/download/1.3-opt/gobuster -Lo /usr/bin/gobuster \\\n && chmod 755 /usr/bin/gobuster\n#   I'm trying to split up this layer so it's more palatable to download\nRUN apt-get update \\\n && apt-get install --no-install-recommends burpsuite openjdk-8-jre=8u332-ga-1~deb9u1 zaproxy exploitdb -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nRUN git clone https://github.com/brimstone/SecLists /pentest/seclists --depth 1 \\\n && rm -rf /pentest/seclists/.git \\\n && git clone https://github.com/FireFart/msfpayloadgenerator /pentest/msfpayloadgenerator --depth 1 \\\n && rm -rf /pentest/msfpayloadgenerator/.git \\\n && wget https://github.com/Charliedean/NetcatUP/raw/master/netcatup.sh -O /bin/netcatup.sh \\\n && git clone https://github.com/derv82/wifite /opt/wifite --depth 1 \\\n && ln -s /opt/wifite/wifite.py /sbin/wifite\n#   empire\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-iptools python-netifaces=0.10.4-0.1+b2 python-pydispatch=2.0.5-1 python-zlib-wrapper python-m2crypto=0.24.0-1.1 python-macholib=1.8~dfsg-1 python-xlrd=1.0.0-1 python-xlutils python-dropbox python-pyminifier -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone -b dev https://github.com/EmpireProject/Empire /pentest/empire \\\n && cd /pentest/empire \\\n && printf \"\\n\" | python setup/setup_database.py \\\n && chmod 755 empire \\\n && mkdir lib/modules/python/brimstone\nCOPY empire/* /pentest/empire/lib/modules/python/brimstone\n#   pupy\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-dev=2.7.13-2 python-setuptools=33.1.1-1 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone --recursive https://github.com/n1nj4sec/pupy /pentest/pupy \\\n && cd /pentest/pupy \\\n && cd pupy \\\n && pip install -r requirements.txt \\\n && cd /pentest/pupy/pupy \\\n && wget https://github.com/n1nj4sec/pupy/releases/download/latest/payload_templates.txz \\\n && tar xvf payload_templates.txz \\\n && rm payload_templates.txz\n#   msf python\nRUN apt-get update \\\n && apt-get install --no-install-recommends python3-pip=9.0.1-2+deb9u2 python3-setuptools=33.1.1-1 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && pip3 install pymetasploit3\nCOPY bashrc /root/.bashrc\nCOPY lists /pentest/lists\nCOPY bin/* /usr/local/bin/\nCOPY share /pentest/share\nCOPY ssh_config /etc/ssh/ssh_config\nRUN chown root:root /etc/ssh/ssh_config \\\n && mkdir /root/.ssh \\\n && chmod 700 /root/.ssh\nWORKDIR /pentest\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-url=\"https://github.com/brimstone/docker-kali\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.schema-version=\"1.0.0-rc1\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:stretch\nARG BUILD_DATE\nARG VCS_REF\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends gnupg2 dirmngr \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nCOPY kali.pub /etc/apt/kali.pub\nRUN echo \"deb http://http.kali.org/kali kali-rolling main contrib non-free\" > /etc/apt/sources.list.d/kali.list \\\n && echo \"deb-src http://http.kali.org/kali kali-rolling main contrib non-free\" >> /etc/apt/sources.list.d/kali.list \\\n && apt-key add /etc/apt/kali.pub \\\n && apt-get update \\\n && apt-get install -y --no-install-recommends less vim build-essential libreadline-dev libssl-dev libpq5 libpq-dev libreadline5 libsqlite3-dev libpcap-dev subversion git-core autoconf pgadmin3 curl zlib1g-dev libxml2-dev libxslt1-dev xtightvncviewer libyaml-dev ruby ruby-dev nmap beef-xss mitmproxy python-pefile net-tools iputils-ping iptables sqlmap bettercap bdfproxy rsync enum4linux openssh-client mfoc mfcuk libnfc-bin hydra nikto weevely netcat-traditional aircrack-ng pyrit cowpatty pciutils kmod wget unicornscan ftp wfuzz python-pip moreutils upx john \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && curl https://github.com/brimstone/gobuster/releases/download/1.3-opt/gobuster -Lo /usr/bin/gobuster \\\n && chmod 755 /usr/bin/gobuster\n#  I'm trying to split up this layer so it's more palatable to download\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends burpsuite openjdk-8-jre zaproxy exploitdb \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nRUN git clone https://github.com/brimstone/SecLists /pentest/seclists --depth 1 \\\n && rm -rf /pentest/seclists/.git \\\n && git clone https://github.com/FireFart/msfpayloadgenerator /pentest/msfpayloadgenerator --depth 1 \\\n && rm -rf /pentest/msfpayloadgenerator/.git \\\n && wget https://github.com/Charliedean/NetcatUP/raw/master/netcatup.sh -O /bin/netcatup.sh \\\n && git clone https://github.com/derv82/wifite /opt/wifite --depth 1 \\\n && ln -s /opt/wifite/wifite.py /sbin/wifite\n#  empire\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends python-iptools python-netifaces python-pydispatch python-zlib-wrapper python-m2crypto python-macholib python-xlrd python-xlutils python-dropbox python-pyminifier \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone -b dev https://github.com/EmpireProject/Empire /pentest/empire \\\n && cd /pentest/empire \\\n && printf \"\\n\" | python setup/setup_database.py \\\n && chmod 755 empire \\\n && mkdir lib/modules/python/brimstone\nCOPY empire/* /pentest/empire/lib/modules/python/brimstone\n#  pupy\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends python-dev python-setuptools \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone --recursive https://github.com/n1nj4sec/pupy /pentest/pupy \\\n && cd /pentest/pupy \\\n && cd pupy \\\n && pip install -r requirements.txt \\\n && cd /pentest/pupy/pupy \\\n && wget https://github.com/n1nj4sec/pupy/releases/download/latest/payload_templates.txz \\\n && tar xvf payload_templates.txz \\\n && rm payload_templates.txz\n#  msf python\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends python3-pip python3-setuptools \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && pip3 install pymetasploit3\nCOPY bashrc /root/.bashrc\nCOPY lists /pentest/lists\nCOPY bin/* /usr/local/bin/\nCOPY share /pentest/share\nCOPY ssh_config /etc/ssh/ssh_config\nRUN chown root:root /etc/ssh/ssh_config \\\n && mkdir /root/.ssh \\\n && chmod 700 /root/.ssh\nWORKDIR /pentest\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-url=\"https://github.com/brimstone/docker-kali\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.schema-version=\"1.0.0-rc1\"\n","injectedSmells":[],"originalDockerfileHash":"bfa6f69ff50a9f749e89147443d358a6","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:stretch\nARG BUILD_DATE\nARG VCS_REF\nRUN apt-get update \\\n && apt-get install --no-install-recommends gnupg2 dirmngr -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nCOPY kali.pub /etc/apt/kali.pub\nRUN echo \"deb http://http.kali.org/kali kali-rolling main contrib non-free\" > /etc/apt/sources.list.d/kali.list \\\n && echo \"deb-src http://http.kali.org/kali kali-rolling main contrib non-free\" >> /etc/apt/sources.list.d/kali.list \\\n && apt-key add /etc/apt/kali.pub \\\n && apt-get update \\\n && apt-get install --no-install-recommends less vim build-essential libreadline-dev libssl-dev libpq5 libpq-dev libreadline5 libsqlite3-dev libpcap-dev subversion git-core autoconf pgadmin3 curl zlib1g-dev libxml2-dev libxslt1-dev xtightvncviewer libyaml-dev ruby ruby-dev nmap beef-xss mitmproxy python-pefile net-tools iputils-ping iptables sqlmap bettercap bdfproxy rsync enum4linux openssh-client mfoc mfcuk libnfc-bin hydra nikto weevely netcat-traditional aircrack-ng pyrit cowpatty pciutils kmod wget unicornscan ftp wfuzz python-pip moreutils upx john -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && curl https://github.com/brimstone/gobuster/releases/download/1.3-opt/gobuster -Lo /usr/bin/gobuster \\\n && chmod 755 /usr/bin/gobuster\n#   I'm trying to split up this layer so it's more palatable to download\nRUN apt-get update \\\n && apt-get install --no-install-recommends burpsuite openjdk-8-jre zaproxy exploitdb -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists\nRUN git clone https://github.com/brimstone/SecLists /pentest/seclists --depth 1 \\\n && rm -rf /pentest/seclists/.git \\\n && git clone https://github.com/FireFart/msfpayloadgenerator /pentest/msfpayloadgenerator --depth 1 \\\n && rm -rf /pentest/msfpayloadgenerator/.git \\\n && wget https://github.com/Charliedean/NetcatUP/raw/master/netcatup.sh -O /bin/netcatup.sh \\\n && git clone https://github.com/derv82/wifite /opt/wifite --depth 1 \\\n && ln -s /opt/wifite/wifite.py /sbin/wifite\n#   empire\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-iptools python-netifaces python-pydispatch python-zlib-wrapper python-m2crypto python-macholib python-xlrd python-xlutils python-dropbox python-pyminifier -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone -b dev https://github.com/EmpireProject/Empire /pentest/empire \\\n && cd /pentest/empire \\\n && printf \"\\n\" | python setup/setup_database.py \\\n && chmod 755 empire \\\n && mkdir lib/modules/python/brimstone\nCOPY empire/* /pentest/empire/lib/modules/python/brimstone\n#   pupy\nRUN apt-get update \\\n && apt-get install --no-install-recommends python-dev python-setuptools -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && git clone --recursive https://github.com/n1nj4sec/pupy /pentest/pupy \\\n && cd /pentest/pupy \\\n && cd pupy \\\n && pip install -r requirements.txt \\\n && cd /pentest/pupy/pupy \\\n && wget https://github.com/n1nj4sec/pupy/releases/download/latest/payload_templates.txz \\\n && tar xvf payload_templates.txz \\\n && rm payload_templates.txz\n#   msf python\nRUN apt-get update \\\n && apt-get install --no-install-recommends python3-pip python3-setuptools -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists \\\n && pip3 install pymetasploit3\nCOPY bashrc /root/.bashrc\nCOPY lists /pentest/lists\nCOPY bin/* /usr/local/bin/\nCOPY share /pentest/share\nCOPY ssh_config /etc/ssh/ssh_config\nRUN chown root:root /etc/ssh/ssh_config \\\n && mkdir /root/.ssh \\\n && chmod 700 /root/.ssh\nWORKDIR /pentest\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.vcs-url=\"https://github.com/brimstone/docker-kali\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.schema-version=\"1.0.0-rc1\"\n","originalDockerfileUglifiedHash":"9af1db13d55b8bd6ba2ae223e2e16e8f","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a6a6d19e50cef23b3cd3556b30edc6261f5443fe.dockerfile"}