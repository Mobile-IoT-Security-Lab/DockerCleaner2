{"seed":521487927,"processedDockerfileHash":"bcc2062dbecd89a0e0cf12cc691c587f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ###########################################################\n#   Dockerfile to build biotoolbox 1.35 with ensembl83 api container images\n#   Based on genomicpariscentre/bioperl\n#  ###########################################################\n#   Set the base image to Ubuntu\nFROM genomicpariscentre/bioperl\n#   File Author / Maintainer\nMAINTAINER Sophie Lemoine <slemoine@biologie.ens.fr>\n#   Update the repository sources list\nRUN :\n#  Install ensembl api  83\nRUN (apt-get update ;apt-get install --no-install-recommends git=1:2.39.2-1ubuntu1 -y )\nWORKDIR /usr/local/\nRUN git clone https://github.com/Ensembl/ensembl.git\nWORKDIR /usr/local/ensembl/\nRUN git checkout release/83\nENV PERL5LIB=\"/usr/local/ensembl/modules:${PERL5LIB}\"\n#   Install Samtools\nRUN (apt-get update ;apt-get install --no-install-recommends libbam-dev=0.1.19+dfsg-5ubuntu1 samtools=1.16.1-1 --yes )\nRUN ln -s /usr/lib/libbam.a /usr/include/samtools/libbam.a\nENV SAMTOOLS=\"/usr/include/samtools\"\nRUN cpanm LDS/Bio-SamTools-1.43.tar.gz\n#   Install JKENT lib from UCSC\nRUN (apt-get update ;apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 unzip=6.0-27ubuntu1 libssl1.0.0 libssl-dev=3.0.8-1ubuntu1 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 sed=4.9-1 --yes )\n#   Install JKENT lib dependancies\nRUN (apt-get update ;apt-get install --no-install-recommends libmysqlclient15-dev libpng12-dev mysql-client-5.5 mysql-client-core-5.5 --yes )\nWORKDIR /usr/local \nRUN git clone git://genome-source.cse.ucsc.edu/kent.git\n#  RUN wget http://hgdownload.cse.ucsc.edu/admin/jksrc.zip\n#  RUN unzip jksrc.zip\n#  RUN rm jksrc.zip\nWORKDIR /usr/local/kent/src/\nENV MACHTYPE=\"x86_64\"\nENV KENT_SRC=\"/usr/local/kent/src\"\nWORKDIR /usr/local/kent/src/lib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/jkOwnLib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/inc\nRUN mkdir /usr/local/bin/script ; mkdir /usr/local/bin/x86_64\nRUN sed -i \"s/CFLAGS\\=/CFLAGS\\=\\-fPIC/\" common.mk \\\n && sed -i \"s:BINDIR = ${HOME}/bin/${MACHTYPE}:BINDIR=/usr/local/bin/${MACHTYPE}:\" common.mk \\\n && sed -i \"s:SCRIPTS=${HOME}/bin/scripts:SCRIPTS=/usr/local/bin/scripts:\" common.mk\n#   && cat common.mk \nWORKDIR /usr/local/kent/src/utils/wigToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedGraphToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedToBigBed\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToBedGraph\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedToBed \nRUN make\nRUN ln -s /usr/local/kent/src/utils/wigToBigWig /usr/local/bin/wigToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedGraphToBigWig /usr/local/bin/bedGraphToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedToBigBed /usr/local/bin/bedToBigBed\nRUN ln -s /usr/local/kent/src/utils/bigWigInfo /usr/local/bin/bigWigInfo\nRUN ln -s /usr/local/kent/src/utils/bigBedInfo /usr/local/bin/bigBedInfo\nRUN ln -s /usr/local/kent/src/utils/bigWigToBedGraph /usr/local/bin/bigWigToBedGraph\nRUN ln -s /usr/local/kent/src/utils/bigWigToWig /usr/local/bin/bigWigToWig\nRUN ln -s /usr/local/kent/src/utils/bigBedToBed /usr/local/bin/bigBedToBed\n#  Install perl modules related to JKENT lib\nRUN (apt-get update ;apt-get install --no-install-recommends libssl1.0.0 libssl-dev=3.0.8-1ubuntu1 -y )\nWORKDIR /tmp\nRUN wget http://cpan.metacpan.org/authors/id/L/LD/LDS/Bio-BigFile-1.07.tar.gz\nRUN tar xzf Bio-BigFile-1.07.tar.gz\nWORKDIR /tmp/Bio-BigFile-1.07\nRUN ls -la \\\n && sed -i \"s/$ENV{KENT_SRC}/\\'\\/usr\\/local\\/kent\\/src\\'/\" Build.PL \\\n && sed -i \"s/$ENV{MACHTYPE}/x86_64/\" Build.PL \\\n && perl Build.PL \\\n && ./Build \\\n && ./Build test \\\n && ./Build install\n#  Install Bio::Graphics and Bio::Graphics::Wiggle \nRUN cpanm Bio::Graphics Bio::Graphics::Wiggle\n#  Install wiggle2gff3.pl\nWORKDIR /usr/local/bin\nRUN wget http://cpansearch.perl.org/src/LDS/GBrowse-2.54/bin/wiggle2gff3.pl\nRUN ls -l\n#  Install biotoolbox \nRUN cpanm Bio::Root::Version Bio::DB::USeq Algorithm::Cluster DBD::SQLite Parallel::ForkManager Statistics::LineFit\nRUN cpanm -v TJPARNELL/Bio-ToolBox-1.35.tar.gz\n#   Cleanup\nRUN apt-get clean\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ###########################################################\n#  Dockerfile to build biotoolbox 1.35 with ensembl83 api container images\n#  Based on genomicpariscentre/bioperl\n# ###########################################################\n#  Set the base image to Ubuntu\nFROM genomicpariscentre/bioperl\n#  File Author / Maintainer\nMAINTAINER Sophie Lemoine <slemoine@biologie.ens.fr>\n#  Update the repository sources list\nRUN apt-get update\n# Install ensembl api  83\nRUN apt-get install git -y\nWORKDIR /usr/local/\nRUN git clone https://github.com/Ensembl/ensembl.git\nWORKDIR /usr/local/ensembl/\nRUN git checkout release/83\nENV PERL5LIB=\"/usr/local/ensembl/modules:${PERL5LIB}\"\n#  Install Samtools\nRUN apt-get install libbam-dev samtools --yes\nRUN ln -s /usr/lib/libbam.a /usr/include/samtools/libbam.a\nENV SAMTOOLS=\"/usr/include/samtools\"\nRUN cpanm LDS/Bio-SamTools-1.43.tar.gz\n#  Install JKENT lib from UCSC\nRUN apt-get install wget unzip libssl1.0.0 libssl-dev zlib1g-dev sed --yes\n#  Install JKENT lib dependancies\nRUN apt-get install libmysqlclient15-dev libpng12-dev mysql-client-5.5 mysql-client-core-5.5 --yes\nWORKDIR /usr/local \nRUN git clone git://genome-source.cse.ucsc.edu/kent.git\n# RUN wget http://hgdownload.cse.ucsc.edu/admin/jksrc.zip\n# RUN unzip jksrc.zip\n# RUN rm jksrc.zip\nWORKDIR /usr/local/kent/src/\nENV MACHTYPE=\"x86_64\"\nENV KENT_SRC=\"/usr/local/kent/src\"\nWORKDIR /usr/local/kent/src/lib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/jkOwnLib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/inc\nRUN mkdir /usr/local/bin/script ; mkdir /usr/local/bin/x86_64\nRUN sed -i \"s/CFLAGS\\=/CFLAGS\\=\\-fPIC/\" common.mk \\\n && sed -i \"s:BINDIR = ${HOME}/bin/${MACHTYPE}:BINDIR=/usr/local/bin/${MACHTYPE}:\" common.mk \\\n && sed -i \"s:SCRIPTS=${HOME}/bin/scripts:SCRIPTS=/usr/local/bin/scripts:\" common.mk\n#  && cat common.mk \nWORKDIR /usr/local/kent/src/utils/wigToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedGraphToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedToBigBed\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToBedGraph\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedToBed \nRUN make\nRUN ln -s /usr/local/kent/src/utils/wigToBigWig /usr/local/bin/wigToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedGraphToBigWig /usr/local/bin/bedGraphToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedToBigBed /usr/local/bin/bedToBigBed\nRUN ln -s /usr/local/kent/src/utils/bigWigInfo /usr/local/bin/bigWigInfo\nRUN ln -s /usr/local/kent/src/utils/bigBedInfo /usr/local/bin/bigBedInfo\nRUN ln -s /usr/local/kent/src/utils/bigWigToBedGraph /usr/local/bin/bigWigToBedGraph\nRUN ln -s /usr/local/kent/src/utils/bigWigToWig /usr/local/bin/bigWigToWig\nRUN ln -s /usr/local/kent/src/utils/bigBedToBed /usr/local/bin/bigBedToBed\n# Install perl modules related to JKENT lib\nRUN apt-get install libssl1.0.0 libssl-dev -y\nWORKDIR /tmp\nRUN wget http://cpan.metacpan.org/authors/id/L/LD/LDS/Bio-BigFile-1.07.tar.gz\nRUN tar xzf Bio-BigFile-1.07.tar.gz\nWORKDIR /tmp/Bio-BigFile-1.07\nRUN ls -la \\\n && sed -i \"s/$ENV{KENT_SRC}/\\'\\/usr\\/local\\/kent\\/src\\'/\" Build.PL \\\n && sed -i \"s/$ENV{MACHTYPE}/x86_64/\" Build.PL \\\n && perl Build.PL \\\n && ./Build \\\n && ./Build test \\\n && ./Build install\n# Install Bio::Graphics and Bio::Graphics::Wiggle \nRUN cpanm Bio::Graphics Bio::Graphics::Wiggle\n# Install wiggle2gff3.pl\nWORKDIR /usr/local/bin\nRUN wget http://cpansearch.perl.org/src/LDS/GBrowse-2.54/bin/wiggle2gff3.pl\nRUN ls -l\n# Install biotoolbox \nRUN cpanm Bio::Root::Version Bio::DB::USeq Algorithm::Cluster DBD::SQLite Parallel::ForkManager Statistics::LineFit\nRUN cpanm -v TJPARNELL/Bio-ToolBox-1.35.tar.gz\n#  Cleanup\nRUN apt-get clean\n","injectedSmells":[],"originalDockerfileHash":"84e4614df5a9ab74149d2b921f154637","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ###########################################################\n#   Dockerfile to build biotoolbox 1.35 with ensembl83 api container images\n#   Based on genomicpariscentre/bioperl\n#  ###########################################################\n#   Set the base image to Ubuntu\nFROM genomicpariscentre/bioperl\n#   File Author / Maintainer\nMAINTAINER Sophie Lemoine <slemoine@biologie.ens.fr>\n#   Update the repository sources list\nRUN apt-get update\n#  Install ensembl api  83\nRUN apt-get install git -y\nWORKDIR /usr/local/\nRUN git clone https://github.com/Ensembl/ensembl.git\nWORKDIR /usr/local/ensembl/\nRUN git checkout release/83\nENV PERL5LIB=\"/usr/local/ensembl/modules:${PERL5LIB}\"\n#   Install Samtools\nRUN apt-get install libbam-dev samtools --yes\nRUN ln -s /usr/lib/libbam.a /usr/include/samtools/libbam.a\nENV SAMTOOLS=\"/usr/include/samtools\"\nRUN cpanm LDS/Bio-SamTools-1.43.tar.gz\n#   Install JKENT lib from UCSC\nRUN apt-get install wget unzip libssl1.0.0 libssl-dev zlib1g-dev sed --yes\n#   Install JKENT lib dependancies\nRUN apt-get install libmysqlclient15-dev libpng12-dev mysql-client-5.5 mysql-client-core-5.5 --yes\nWORKDIR /usr/local \nRUN git clone git://genome-source.cse.ucsc.edu/kent.git\n#  RUN wget http://hgdownload.cse.ucsc.edu/admin/jksrc.zip\n#  RUN unzip jksrc.zip\n#  RUN rm jksrc.zip\nWORKDIR /usr/local/kent/src/\nENV MACHTYPE=\"x86_64\"\nENV KENT_SRC=\"/usr/local/kent/src\"\nWORKDIR /usr/local/kent/src/lib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/jkOwnLib\nRUN make CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC\nWORKDIR /usr/local/kent/src/inc\nRUN mkdir /usr/local/bin/script ; mkdir /usr/local/bin/x86_64\nRUN sed -i \"s/CFLAGS\\=/CFLAGS\\=\\-fPIC/\" common.mk \\\n && sed -i \"s:BINDIR = ${HOME}/bin/${MACHTYPE}:BINDIR=/usr/local/bin/${MACHTYPE}:\" common.mk \\\n && sed -i \"s:SCRIPTS=${HOME}/bin/scripts:SCRIPTS=/usr/local/bin/scripts:\" common.mk\n#   && cat common.mk \nWORKDIR /usr/local/kent/src/utils/wigToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedGraphToBigWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bedToBigBed\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedInfo\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToBedGraph\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigWigToWig\nRUN make\nWORKDIR /usr/local/kent/src/utils/bigBedToBed \nRUN make\nRUN ln -s /usr/local/kent/src/utils/wigToBigWig /usr/local/bin/wigToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedGraphToBigWig /usr/local/bin/bedGraphToBigWig\nRUN ln -s /usr/local/kent/src/utils/bedToBigBed /usr/local/bin/bedToBigBed\nRUN ln -s /usr/local/kent/src/utils/bigWigInfo /usr/local/bin/bigWigInfo\nRUN ln -s /usr/local/kent/src/utils/bigBedInfo /usr/local/bin/bigBedInfo\nRUN ln -s /usr/local/kent/src/utils/bigWigToBedGraph /usr/local/bin/bigWigToBedGraph\nRUN ln -s /usr/local/kent/src/utils/bigWigToWig /usr/local/bin/bigWigToWig\nRUN ln -s /usr/local/kent/src/utils/bigBedToBed /usr/local/bin/bigBedToBed\n#  Install perl modules related to JKENT lib\nRUN apt-get install libssl1.0.0 libssl-dev -y\nWORKDIR /tmp\nRUN wget http://cpan.metacpan.org/authors/id/L/LD/LDS/Bio-BigFile-1.07.tar.gz\nRUN tar xzf Bio-BigFile-1.07.tar.gz\nWORKDIR /tmp/Bio-BigFile-1.07\nRUN ls -la \\\n && sed -i \"s/$ENV{KENT_SRC}/\\'\\/usr\\/local\\/kent\\/src\\'/\" Build.PL \\\n && sed -i \"s/$ENV{MACHTYPE}/x86_64/\" Build.PL \\\n && perl Build.PL \\\n && ./Build \\\n && ./Build test \\\n && ./Build install\n#  Install Bio::Graphics and Bio::Graphics::Wiggle \nRUN cpanm Bio::Graphics Bio::Graphics::Wiggle\n#  Install wiggle2gff3.pl\nWORKDIR /usr/local/bin\nRUN wget http://cpansearch.perl.org/src/LDS/GBrowse-2.54/bin/wiggle2gff3.pl\nRUN ls -l\n#  Install biotoolbox \nRUN cpanm Bio::Root::Version Bio::DB::USeq Algorithm::Cluster DBD::SQLite Parallel::ForkManager Statistics::LineFit\nRUN cpanm -v TJPARNELL/Bio-ToolBox-1.35.tar.gz\n#   Cleanup\nRUN apt-get clean\n","originalDockerfileUglifiedHash":"50fe16ae7dde68d4f084edd3c4ff2e0d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f26d7efaf9b43d1def1be875c816255ef27be7ce.dockerfile"}