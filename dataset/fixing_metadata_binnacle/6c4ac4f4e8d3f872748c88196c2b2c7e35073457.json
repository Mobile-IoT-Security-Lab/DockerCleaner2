{"seed":1925732989,"processedDockerfileHash":"a9eb76c540d38a6020b917e531ec7293","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck"],"processedDockerfile":"#\n#   CDDL HEADER START\n#\n#   The contents of this file are subject to the terms of the Common Development\n#   and Distribution License Version 1.0 (the \"License\").\n#\n#   You can obtain a copy of the license at\n#   http://www.opensource.org/licenses/CDDL-1.0.  See the License for the\n#   specific language governing permissions and limitations under the License.\n#\n#   When distributing Covered Code, include this CDDL HEADER in each file and\n#   include the License file in a prominent location with the name LICENSE.CDDL.\n#   If applicable, add the following below this CDDL HEADER, with the fields\n#   enclosed by brackets \"[]\" replaced with your own identifying information:\n#\n#   Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.\n#\n#   CDDL HEADER END\n#\n#\n#   Copyright (c) 2013--2019, Regents of the University of Minnesota.\n#   All rights reserved.\n#\n#   Contributors:\n#      Christoph Junghans\n#      Ryan S. Elliott\n#\n#\n#   Release: This file is part of the kim-api-2.0.2 package.\n#\nFROM fedora:latest\nARG COVERAGE\nARG SANITIZE\nARG CC\nARG CXX\nARG CXXFLAGS\nARG FC\nARG CMAKE_BUILD_TYPE\n#  for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\nRUN dnf -y install make cmake git gcc-c++ gcc-gfortran ccache wget vim-common findutils ${SANITIZE:+libasan}\nRUN wget -O /usr/bin/codecov https://codecov.io/bash\nRUN chmod +x /usr/bin/codecov\nRUN useradd -m kim\nUSER kim\nENV PATH=\"/usr/lib64/ccache:${PATH}\"\nENV CCACHE_MAXSIZE=\"250M\"\nCOPY kim-api/ /home/kim/kim-api\nRUN rm -rf /home/kim/.ccache\nCOPY ccache/ /home/kim/.ccache\nUSER root\nRUN chown -R kim:kim /home/kim/kim-api /home/kim/.ccache\nUSER kim\nRUN env\nWORKDIR /home/kim/kim-api\nRUN mkdir build\nWORKDIR build\nRUN ccache -z\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=/usr ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2\nRUN ccache -s\nRUN make test\nRUN make install DESTDIR=${PWD}/destdir \\\n && rm -rf ${PWD}/destdir/usr/{bin,include,lib64,libexec,share} \\\n && rm -rf ${PWD}/destdir/etc \\\n && rmdir ${PWD}/destdir/usr \\\n && rmdir ${PWD}/destdir\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" -x \"llvm-cov gcov\" 2>&1 | grep -v \"arcs.*block\" ; else codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" 2>&1 | grep -v \"arcs.*block\" ; fi ; fi\nUSER root\nRUN make install\nUSER kim\nWORKDIR /home/kim/kim-api\nRUN rm -rf build\nRUN mkdir build\nWORKDIR build\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=${PWD}/test-install -DKIM_API_BUILD_EXAMPLES=OFF ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2 install\nRUN ccache -s\nRUN source ./test-install/bin/kim-api-activate \\\n && kim-api-collections-management install system `find ../examples/model-drivers -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/simulator-models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management list\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  CDDL HEADER START\n#\n#  The contents of this file are subject to the terms of the Common Development\n#  and Distribution License Version 1.0 (the \"License\").\n#\n#  You can obtain a copy of the license at\n#  http://www.opensource.org/licenses/CDDL-1.0.  See the License for the\n#  specific language governing permissions and limitations under the License.\n#\n#  When distributing Covered Code, include this CDDL HEADER in each file and\n#  include the License file in a prominent location with the name LICENSE.CDDL.\n#  If applicable, add the following below this CDDL HEADER, with the fields\n#  enclosed by brackets \"[]\" replaced with your own identifying information:\n#\n#  Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.\n#\n#  CDDL HEADER END\n#\n#\n#  Copyright (c) 2013--2019, Regents of the University of Minnesota.\n#  All rights reserved.\n#\n#  Contributors:\n#     Christoph Junghans\n#     Ryan S. Elliott\n#\n#\n#  Release: This file is part of the kim-api-2.0.2 package.\n#\nFROM fedora:latest\nARG COVERAGE\nARG SANITIZE\nARG CC\nARG CXX\nARG CXXFLAGS\nARG FC\nARG CMAKE_BUILD_TYPE\n# for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\nRUN dnf -y install make cmake git gcc-c++ gcc-gfortran ccache wget vim-common findutils ${SANITIZE:+libasan}\nRUN wget -O /usr/bin/codecov https://codecov.io/bash\nRUN chmod +x /usr/bin/codecov\nRUN useradd -m kim\nUSER kim\nENV PATH=\"/usr/lib64/ccache:${PATH}\"\nENV CCACHE_MAXSIZE=\"250M\"\nCOPY kim-api/ /home/kim/kim-api\nRUN rm -rf /home/kim/.ccache\nCOPY ccache/ /home/kim/.ccache\nUSER root\nRUN chown -R kim:kim /home/kim/kim-api /home/kim/.ccache\nUSER kim\nRUN env\nWORKDIR /home/kim/kim-api\nRUN mkdir build\nWORKDIR build\nRUN ccache -z\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=/usr ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2\nRUN ccache -s\nRUN make test\nRUN make install DESTDIR=${PWD}/destdir \\\n && rm -rf ${PWD}/destdir/usr/{bin,include,lib64,libexec,share} \\\n && rm -rf ${PWD}/destdir/etc \\\n && rmdir ${PWD}/destdir/usr \\\n && rmdir ${PWD}/destdir\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" -x \"llvm-cov gcov\" 2>&1 | grep -v \"arcs.*block\" ; else codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" 2>&1 | grep -v \"arcs.*block\" ; fi ; fi\nUSER root\nRUN make install\nUSER kim\nWORKDIR /home/kim/kim-api\nRUN rm -rf build\nRUN mkdir build\nWORKDIR build\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=${PWD}/test-install -DKIM_API_BUILD_EXAMPLES=OFF ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2 install\nRUN ccache -s\nRUN source ./test-install/bin/kim-api-activate \\\n && kim-api-collections-management install system `find ../examples/model-drivers -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/simulator-models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management list\n","injectedSmells":[],"originalDockerfileHash":"389e661fdf10c640fd1b0c5f72c85a7d","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   CDDL HEADER START\n#\n#   The contents of this file are subject to the terms of the Common Development\n#   and Distribution License Version 1.0 (the \"License\").\n#\n#   You can obtain a copy of the license at\n#   http://www.opensource.org/licenses/CDDL-1.0.  See the License for the\n#   specific language governing permissions and limitations under the License.\n#\n#   When distributing Covered Code, include this CDDL HEADER in each file and\n#   include the License file in a prominent location with the name LICENSE.CDDL.\n#   If applicable, add the following below this CDDL HEADER, with the fields\n#   enclosed by brackets \"[]\" replaced with your own identifying information:\n#\n#   Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.\n#\n#   CDDL HEADER END\n#\n#\n#   Copyright (c) 2013--2019, Regents of the University of Minnesota.\n#   All rights reserved.\n#\n#   Contributors:\n#      Christoph Junghans\n#      Ryan S. Elliott\n#\n#\n#   Release: This file is part of the kim-api-2.0.2 package.\n#\nFROM fedora:latest\nARG COVERAGE\nARG SANITIZE\nARG CC\nARG CXX\nARG CXXFLAGS\nARG FC\nARG CMAKE_BUILD_TYPE\n#  for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\nRUN dnf -y install make cmake git gcc-c++ gcc-gfortran ccache wget vim-common findutils ${SANITIZE:+libasan}\nRUN wget -O /usr/bin/codecov https://codecov.io/bash\nRUN chmod +x /usr/bin/codecov\nRUN useradd -m kim\nUSER kim\nENV PATH=\"/usr/lib64/ccache:${PATH}\"\nENV CCACHE_MAXSIZE=\"250M\"\nCOPY kim-api/ /home/kim/kim-api\nRUN rm -rf /home/kim/.ccache\nCOPY ccache/ /home/kim/.ccache\nUSER root\nRUN chown -R kim:kim /home/kim/kim-api /home/kim/.ccache\nUSER kim\nRUN env\nWORKDIR /home/kim/kim-api\nRUN mkdir build\nWORKDIR build\nRUN ccache -z\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=/usr ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2\nRUN ccache -s\nRUN make test\nRUN make install DESTDIR=${PWD}/destdir \\\n && rm -rf ${PWD}/destdir/usr/{bin,include,lib64,libexec,share} \\\n && rm -rf ${PWD}/destdir/etc \\\n && rmdir ${PWD}/destdir/usr \\\n && rmdir ${PWD}/destdir\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" -x \"llvm-cov gcov\" 2>&1 | grep -v \"arcs.*block\" ; else codecov -R ${PWD}/../../${TRAVIS_REPO_SLUG#*/} -F \"${CC}\" 2>&1 | grep -v \"arcs.*block\" ; fi ; fi\nUSER root\nRUN make install\nUSER kim\nWORKDIR /home/kim/kim-api\nRUN rm -rf build\nRUN mkdir build\nWORKDIR build\nRUN cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_PREFIX=${PWD}/test-install -DKIM_API_BUILD_EXAMPLES=OFF ${COVERAGE:+-DKIM_API_ENABLE_COVERAGE=ON} ${SANITIZE:+-DKIM_API_ENABLE_SANITIZE=ON} ..\nRUN make -j2 install\nRUN ccache -s\nRUN source ./test-install/bin/kim-api-activate \\\n && kim-api-collections-management install system `find ../examples/model-drivers -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management install system `find ../examples/simulator-models -mindepth 1 -maxdepth 1 -type d ` \\\n && kim-api-collections-management list\n","originalDockerfileUglifiedHash":"0c0e793be88f5a8f16f9ce97b01a6472","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6c4ac4f4e8d3f872748c88196c2b2c7e35073457.dockerfile"}