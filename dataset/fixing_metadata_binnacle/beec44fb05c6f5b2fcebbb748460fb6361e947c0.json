{"seed":2665801289,"processedDockerfileHash":"927177405cf0751b08413df2685dcc1a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#  --------------------------------------------------------------------------\n#   Image Setup\n#  --------------------------------------------------------------------------\n#\n#   To edit the 'workspace' base Image, visit its repository on Github\n#      https://github.com/Laradock/workspace\n#\n#   To change its version, see the available Tags on the Docker Hub:\n#      https://hub.docker.com/r/laradock/workspace/tags/\n#\n#   Note: Base Image name format {image-tag}-{php-version}\n#\nFROM laradock/workspace:1.8-70\nMAINTAINER Mahmoud Zalt <mahmoud@zalt.me>\n#\n#  --------------------------------------------------------------------------\n#   Mandatory Software's Installation\n#  --------------------------------------------------------------------------\n#\n#   Mandatory Software's such as (\"php7.0-cli\", \"git\", \"vim\", ....) are\n#   installed on the base image 'laradock/workspace' image. If you want\n#   to add more Software's or remove existing one, you need to edit the\n#   base image (https://github.com/Laradock/workspace).\n#\n#\n#  --------------------------------------------------------------------------\n#   Optional Software's Installation\n#  --------------------------------------------------------------------------\n#\n#   Optional Software's will only be installed if you set them to `true`\n#   in the `docker-compose.yml` before the build.\n#   Example:\n#     - INSTALL_NODE=false\n#     - ...\n#\n#  ####################################\n#   Non-Root User:\n#  ####################################\n#   Add a non-root user to prevent files being created with root permissions on host machine.\nARG PUID=1000\nARG PGID=1000\nENV PUID=\"${PUID}\"\nENV PGID=\"${PGID}\"\nRUN groupadd -g ${PGID} laradock \\\n && useradd -u ${PUID} -g laradock -m laradock \\\n && :\n#  ####################################\n#   SOAP:\n#  ####################################\nUSER root\nARG INSTALL_SOAP=false\nENV INSTALL_SOAP=\"${INSTALL_SOAP}\"\nRUN if [ ${INSTALL_SOAP} = true ] ; then add-apt-repository -y ppa:ondrej/php \\\n && apt-get update -yqq \\\n && (apt-get update ;apt-get install --no-install-recommends libxml2-dev php7.0-soap -y ) ; fi\n#  ####################################\n#   PHP GMP\n#  ####################################\nARG INSTALL_GMP=false\nENV INSTALL_GMP=\"${INSTALL_GMP}\"\nRUN if [ ${INSTALL_GMP} = true ] ; then (apt-get update ;apt-get install --no-install-recommends php-gmp -y ) ; fi\n#  ####################################\n#   Set Timezone\n#  ####################################\nARG TZ=UTC\nENV TZ=\"${TZ}\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n#  ####################################\n#   Composer:\n#  ####################################\n#   Add the composer.json\nCOPY ./composer.json /home/laradock/.composer/composer.json\n#   Make sure that ~/.composer belongs to laradock\nRUN chown -R laradock:laradock /home/laradock/.composer\nUSER laradock\n#   Check if global install need to be ran\nARG COMPOSER_GLOBAL_INSTALL=false\nENV COMPOSER_GLOBAL_INSTALL=\"${COMPOSER_GLOBAL_INSTALL}\"\nRUN if [ ${COMPOSER_GLOBAL_INSTALL} = true ] ; then composer global install ; fi\n#   Export composer vendor path\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"~/.composer/vendor/bin:$PATH\"' >> ~/.bashrc\n#  ####################################\n#   Crontab\n#  ####################################\nUSER root\nCOPY ./crontab /etc/cron.d\nRUN chmod -R 644 /etc/cron.d\n#  ####################################\n#   User Aliases\n#  ####################################\nUSER laradock\nCOPY ./aliases.sh /home/laradock/aliases.sh\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\n#  ####################################\n#   xDebug:\n#  ####################################\nARG INSTALL_XDEBUG=false\nRUN if [ ${INSTALL_XDEBUG} = true ] ; then (apt-get update ;apt-get install --no-install-recommends php7.0-xdebug -y --force-yes ) \\\n && sed -i 's/^;//g' /etc/php/7.0/cli/conf.d/20-xdebug.ini \\\n && echo \"alias phpunit='php -dzend_extension=xdebug.so /var/www/vendor/bin/phpunit'\" >> ~/.bashrc; fi\n#   ADD for REMOTE debugging\nCOPY ./xdebug.ini /etc/php/7.0/cli/conf.d/xdebug.ini\n#  ####################################\n#   Blackfire:\n#  ####################################\nARG INSTALL_BLACKFIRE=false\nARG BLACKFIRE_CLIENT_ID\nARG BLACKFIRE_CLIENT_TOKEN\nENV BLACKFIRE_CLIENT_ID=\"${BLACKFIRE_CLIENT_ID}\"\nENV BLACKFIRE_CLIENT_TOKEN=\"${BLACKFIRE_CLIENT_TOKEN}\"\nRUN if [ ${INSTALL_XDEBUG} = false -a ${INSTALL_BLACKFIRE} = true ] ; then curl -L https://packagecloud.io/gpg.key | apt-key add - \\\n && echo \"deb http://packages.blackfire.io/debian any main\" | tee /etc/apt/sources.list.d/blackfire.list \\\n && apt-get update -yqq \\\n && (apt-get update ;apt-get install --no-install-recommends blackfire-agent ) ; fi\n#  ####################################\n#   ssh:\n#  ####################################\nARG INSTALL_WORKSPACE_SSH=false\nENV INSTALL_WORKSPACE_SSH=\"${INSTALL_WORKSPACE_SSH}\"\nCOPY insecure_id_rsa /tmp/id_rsa\nCOPY insecure_id_rsa.pub /tmp/id_rsa.pub\nRUN if [ ${INSTALL_WORKSPACE_SSH} = true ] ; then rm -f /etc/service/sshd/down \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/authorized_keys \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/id_rsa.pub \\\n && cat /tmp/id_rsa >> /root/.ssh/id_rsa \\\n && rm -f /tmp/id_rsa* \\\n && chmod 644 /root/.ssh/authorized_keys /root/.ssh/id_rsa.pub \\\n && chmod 400 /root/.ssh/id_rsa ; fi\n#  ####################################\n#   MongoDB:\n#  ####################################\n#   Check if Mongo needs to be installed\nARG INSTALL_MONGO=false\nENV INSTALL_MONGO=\"${INSTALL_MONGO}\"\nRUN if [ ${INSTALL_MONGO} = true ] ; then pecl install mongodb \\\n && echo \"extension=mongodb.so\" >> /etc/php/7.0/cli/conf.d/30-mongodb.ini; fi\n#  ####################################\n#   Drush:\n#  ####################################\nUSER root\nENV DRUSH_VERSION=\"8.1.2\"\nARG INSTALL_DRUSH=false\nENV INSTALL_DRUSH=\"${INSTALL_DRUSH}\"\nRUN if [ ${INSTALL_DRUSH} = true ] ; then curl -fsSL -o /usr/local/bin/drush https://github.com/drush-ops/drush/releases/download/$DRUSH_VERSION/drush.phar | bash \\\n && chmod +x /usr/local/bin/drush \\\n && drush core-status ; fi\nUSER laradock\n#  ####################################\n#   Node / NVM:\n#  ####################################\n#   Check if NVM needs to be installed\nARG NODE_VERSION=stable\nENV NODE_VERSION=\"${NODE_VERSION}\"\nARG INSTALL_NODE=false\nENV INSTALL_NODE=\"${INSTALL_NODE}\"\nENV NVM_DIR=\"/home/laradock/.nvm\"\nRUN if [ ${INSTALL_NODE} = true ] ; then curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install ${NODE_VERSION} \\\n && nvm use ${NODE_VERSION} \\\n && nvm alias ${NODE_VERSION} \\\n && npm install gulp@4.0.2 bower@1.8.14 vue-cli@2.9.6 -g ; fi\n#   Wouldn't execute when added to the RUN statement in the above block\n#   Source NVM when loading bash since ~/.profile isn't loaded on non-login shell\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"$HOME/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n#   Add NVM binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"/home/laradock/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n#  ####################################\n#   YARN:\n#  ####################################\nUSER laradock\nARG INSTALL_YARN=false\nENV INSTALL_YARN=\"${INSTALL_YARN}\"\nARG YARN_VERSION=latest\nENV YARN_VERSION=\"${YARN_VERSION}\"\nRUN if [ ${INSTALL_YARN} = true ] ; then [ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" \\\n && if [ ${YARN_VERSION} = \"latest\" ] ; then curl -o- -L https://yarnpkg.com/install.sh | bash ; else curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version ${YARN_VERSION} ; fi \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"$HOME/.yarn/bin:$PATH\"' >> ~/.bashrc; fi\n#   Add YARN binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_YARN} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export YARN_DIR=\"/home/laradock/.yarn\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$YARN_DIR/bin:$PATH\"' >> ~/.bashrc; fi\n#  ####################################\n#   PHP Aerospike:\n#  ####################################\nUSER root\nARG INSTALL_AEROSPIKE=true\nENV INSTALL_AEROSPIKE=\"${INSTALL_AEROSPIKE}\"\n#   Copy aerospike configration for remote debugging\nCOPY ./aerospike.ini /etc/php/7.0/cli/conf.d/aerospike.ini\nRUN if [ ${INSTALL_AEROSPIKE} = true ] ; then curl -L -o /tmp/aerospike-client-php.tar.gz \"https://github.com/aerospike/aerospike-client-php/archive/3.4.14.tar.gz\" \\\n && mkdir -p aerospike-client-php \\\n && tar -C aerospike-client-php -zxvf /tmp/aerospike-client-php.tar.gz --strip 1 \\\n && (cd aerospike-client-php/src/aerospike \\\n && phpize \\\n && ./build.sh \\\n && make install ) \\\n && rm /tmp/aerospike-client-php.tar.gz ; fi\nRUN if [ ${INSTALL_AEROSPIKE} = false ] ; then rm /etc/php/7.0/cli/conf.d/aerospike.ini ; fi\n#  ####################################\n#   PHP V8JS:\n#  ####################################\nUSER root\nARG INSTALL_V8JS=false\nENV INSTALL_V8JS=\"${INSTALL_V8JS}\"\nRUN if [ ${INSTALL_V8JS} = true ] ; then add-apt-repository -y ppa:pinepain/libv8-5.4 \\\n && apt-get update -yqq \\\n && (apt-get update ;apt-get install --no-install-recommends php7.0-xml php7.0-dev php-pear libv8-5.4 -y ) \\\n && pecl install v8js \\\n && echo \"extension=v8js.so\" >> /etc/php/7.0/cli/php.ini; fi\n#  ####################################\n#   Non-root user : PHPUnit path\n#  ####################################\n#   add ./vendor/bin to non-root user's bashrc (needed for phpunit)\nUSER laradock\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/vendor/bin:$PATH\"' >> ~/.bashrc\n#  ####################################\n#   Laravel Artisan Alias\n#  ####################################\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'alias art=\"php artisan\"' >> ~/.bashrc\n#  ####################################\n#   Laravel Envoy:\n#  ####################################\nUSER laradock\nARG INSTALL_LARAVEL_ENVOY=true\nENV INSTALL_LARAVEL_ENVOY=\"${INSTALL_LARAVEL_ENVOY}\"\nRUN if [ ${INSTALL_LARAVEL_ENVOY} = true ] ; then composer global require \"laravel/envoy=~1.0\" ; fi\n#  ####################################\n#   Deployer:\n#  ####################################\nUSER laradock\nARG INSTALL_DEPLOYER=false\nENV INSTALL_DEPLOYER=\"${INSTALL_DEPLOYER}\"\nRUN if [ ${INSTALL_DEPLOYER} = true ] ; then composer global require \"deployer/deployer\" ; fi\n#  ####################################\n#   Linuxbrew:\n#  ####################################\nUSER root\nARG INSTALL_LINUXBREW=true\nENV INSTALL_LINUXBREW=\"${INSTALL_LINUXBREW}\"\nRUN if [ ${INSTALL_LINUXBREW} = true ] ; then apt-get upgrade -y \\\n && (apt-get update ;apt-get install --no-install-recommends build-essential make cmake scons curl git ruby autoconf automake autoconf-archive gettext libtool flex bison libbz2-dev libcurl4-openssl-dev libexpat-dev libncurses-dev -y ) \\\n && git clone --depth=1 https://github.com/Homebrew/linuxbrew.git ~/.linuxbrew \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH\"=/usr/local/lib/pkgconfig:/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/lib/pkgconfig:/usr/lib/x86_64-linux-gnu/pkgconfig:/usr/lib64/pkgconfig:/usr/share/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LINUXBREWHOME=\"$HOME/.linuxbrew\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$LINUXBREWHOME/bin:$PATH\"' >> ~/.bashrc \\\n && echo 'export MANPATH=\"$LINUXBREWHOME/man:$MANPATH\"' >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH=\"$LINUXBREWHOME/lib64/pkgconfig:$LINUXBREWHOME/lib/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LD_LIBRARY_PATH=\"$LINUXBREWHOME/lib64:$LINUXBREWHOME/lib:$LD_LIBRARY_PATH\"' >> ~/.bashrc; fi\n#  ####################################\n#   SQL SERVER:\n#  ####################################\nARG INSTALL_MSSQL=true\nENV INSTALL_MSSQL=\"${INSTALL_MSSQL}\"\nRUN if [ ${INSTALL_MSSQL} = true ] ; then cd / \\\n && (apt-get update ;apt-get install --no-install-recommends wget apt-transport-https curl freetds-common libsybdb5 freetds-bin unixodbc unixodbc-dev -y --force-yes ) \\\n && cd / \\\n && echo \"deb http://packages.dotdeb.org jessie all\" | tee /etc/apt/sources.list.d/dotdeb.list \\\n && wget -qO- https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && apt-get update -yqq \\\n && apt-get upgrade -qq \\\n && cd / \\\n && (apt-get update ;apt-get install --no-install-recommends whiptail unixodbc libgss3 odbcinst devscripts debhelper dh-exec dh-autoreconf libreadline-dev libltdl-dev -y ) \\\n && dget -u -x http://http.debian.net/debian/pool/main/u/unixodbc/unixodbc_2.3.1-3.dsc \\\n && cd unixodbc-*/ \\\n && ./configure \\\n && make \\\n && make install \\\n && cp -v ./exe/odbc_config /usr/local/bin/ \\\n && printf '#!/bin/bash\\nif [ \"$*\" == \"-p\" ]; then echo \"x86_64\"; else /bin/uname \"$@\"; fi' | tee /usr/local/bin/uname \\\n && chmod +x /usr/local/bin/uname \\\n && cd / \\\n && wget -nv -O msodbcsql-13.0.0.0.tar.gz \"https://meetsstorenew.blob.core.windows.net/contianerhd/Ubuntu%2013.0%20Tar/msodbcsql-13.0.0.0.tar.gz?st=2016-10-18T17%3A29%3A00Z&se=2022-10-19T17%3A29%3A00Z&sp=rl&sv=2015-04-05&sr=b&sig=cDwPfrouVeIQf0vi%2BnKt%2BzX8Z8caIYvRCmicDL5oknY%3D\" \\\n && tar -xf msodbcsql-13.0.0.0.tar.gz \\\n && cd msodbcsql-*/ \\\n && ldd lib64/libmsodbcsql-13.0.so.0.0 \\\n && ./install.sh install --accept-license \\\n && ls -l /opt/microsoft/msodbcsql/ \\\n && odbcinst -q -d -n \"ODBC Driver 13 for SQL Server\" \\\n && pecl install sqlsrv-4.0.8 \\\n && pecl install pdo_sqlsrv-4.0.8 \\\n && (apt-get update ;apt-get install --no-install-recommends locales -y ) \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-pdo_sqlsrv.ini; fi\n#  ####################################\n#   Minio:\n#  ####################################\nUSER root\nARG INSTALL_MC=false\nENV INSTALL_MC=\"${INSTALL_MC}\"\nCOPY mc/config.json /root/.mc/config.json\nRUN if [ ${INSTALL_MC} = true ] ; then curl -fsSL -o /usr/local/bin/mc https://dl.minio.io/client/mc/release/linux-amd64/mc \\\n && chmod +x /usr/local/bin/mc ; fi\n#  ####################################\n#   Symfony:\n#  ####################################\nUSER root\nARG INSTALL_SYMFONY=false\nENV INSTALL_SYMFONY=\"${INSTALL_SYMFONY}\"\nRUN if [ ${INSTALL_SYMFONY} = true ] ; then mkdir -p /usr/local/bin \\\n && curl -LsS https://symfony.com/installer -o /usr/local/bin/symfony \\\n && chmod a+x /usr/local/bin/symfony \\\n && echo 'alias dev=\"php bin/console -e=dev\"' >> ~/.bashrc \\\n && echo 'alias prod=\"php bin/console -e=prod\"' >> ~/.bashrc; fi\n#  ####################################\n#   MySQL client\n#  ####################################\nUSER root\nARG INSTALL_MYSQL_CLIENT=false\nENV INSTALL_MYSQL_CLIENT=\"${INSTALL_MYSQL_CLIENT}\"\nRUN if [ ${INSTALL_MYSQL_CLIENT} = true ] ; then apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends mysql-client -y ) ; fi\n#  ####################################\n#   PostgreSQL client\n#  ####################################\nUSER root\nARG INSTALL_PGSQL_CLIENT=false\nENV INSTALL_PGSQL_CLIENT=\"${INSTALL_PGSQL_CLIENT}\"\nRUN if [ ${INSTALL_PGSQL_CLIENT} = true ] ; then apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends postgresql-client -y ) ; fi\n#\n#  --------------------------------------------------------------------------\n#   Final Touch\n#  --------------------------------------------------------------------------\n#\n#   Clean up\nUSER root\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Set default work directory\nWORKDIR /var/www\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n# --------------------------------------------------------------------------\n#  Image Setup\n# --------------------------------------------------------------------------\n#\n#  To edit the 'workspace' base Image, visit its repository on Github\n#     https://github.com/Laradock/workspace\n#\n#  To change its version, see the available Tags on the Docker Hub:\n#     https://hub.docker.com/r/laradock/workspace/tags/\n#\n#  Note: Base Image name format {image-tag}-{php-version}\n#\nFROM laradock/workspace:1.8-70\nMAINTAINER Mahmoud Zalt <mahmoud@zalt.me>\n#\n# --------------------------------------------------------------------------\n#  Mandatory Software's Installation\n# --------------------------------------------------------------------------\n#\n#  Mandatory Software's such as (\"php7.0-cli\", \"git\", \"vim\", ....) are\n#  installed on the base image 'laradock/workspace' image. If you want\n#  to add more Software's or remove existing one, you need to edit the\n#  base image (https://github.com/Laradock/workspace).\n#\n#\n# --------------------------------------------------------------------------\n#  Optional Software's Installation\n# --------------------------------------------------------------------------\n#\n#  Optional Software's will only be installed if you set them to `true`\n#  in the `docker-compose.yml` before the build.\n#  Example:\n#    - INSTALL_NODE=false\n#    - ...\n#\n# ####################################\n#  Non-Root User:\n# ####################################\n#  Add a non-root user to prevent files being created with root permissions on host machine.\nARG PUID=1000\nARG PGID=1000\nENV PUID=\"${PUID}\"\nENV PGID=\"${PGID}\"\nRUN groupadd -g ${PGID} laradock \\\n && useradd -u ${PUID} -g laradock -m laradock \\\n && apt-get update -yqq\n# ####################################\n#  SOAP:\n# ####################################\nUSER root\nARG INSTALL_SOAP=false\nENV INSTALL_SOAP=\"${INSTALL_SOAP}\"\nRUN if [ ${INSTALL_SOAP} = true ] ; then add-apt-repository -y ppa:ondrej/php \\\n && apt-get update -yqq \\\n && apt-get install libxml2-dev php7.0-soap -y ; fi\n# ####################################\n#  PHP GMP\n# ####################################\nARG INSTALL_GMP=false\nENV INSTALL_GMP=\"${INSTALL_GMP}\"\nRUN if [ ${INSTALL_GMP} = true ] ; then apt-get install php-gmp -y ; fi\n# ####################################\n#  Set Timezone\n# ####################################\nARG TZ=UTC\nENV TZ=\"${TZ}\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n# ####################################\n#  Composer:\n# ####################################\n#  Add the composer.json\nCOPY ./composer.json /home/laradock/.composer/composer.json\n#  Make sure that ~/.composer belongs to laradock\nRUN chown -R laradock:laradock /home/laradock/.composer\nUSER laradock\n#  Check if global install need to be ran\nARG COMPOSER_GLOBAL_INSTALL=false\nENV COMPOSER_GLOBAL_INSTALL=\"${COMPOSER_GLOBAL_INSTALL}\"\nRUN if [ ${COMPOSER_GLOBAL_INSTALL} = true ] ; then composer global install ; fi\n#  Export composer vendor path\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"~/.composer/vendor/bin:$PATH\"' >> ~/.bashrc\n# ####################################\n#  Crontab\n# ####################################\nUSER root\nCOPY ./crontab /etc/cron.d\nRUN chmod -R 644 /etc/cron.d\n# ####################################\n#  User Aliases\n# ####################################\nUSER laradock\nCOPY ./aliases.sh /home/laradock/aliases.sh\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\n# ####################################\n#  xDebug:\n# ####################################\nARG INSTALL_XDEBUG=false\nRUN if [ ${INSTALL_XDEBUG} = true ] ; then apt-get install php7.0-xdebug -y --force-yes \\\n && sed -i 's/^;//g' /etc/php/7.0/cli/conf.d/20-xdebug.ini \\\n && echo \"alias phpunit='php -dzend_extension=xdebug.so /var/www/vendor/bin/phpunit'\" >> ~/.bashrc; fi\n#  ADD for REMOTE debugging\nCOPY ./xdebug.ini /etc/php/7.0/cli/conf.d/xdebug.ini\n# ####################################\n#  Blackfire:\n# ####################################\nARG INSTALL_BLACKFIRE=false\nARG BLACKFIRE_CLIENT_ID\nARG BLACKFIRE_CLIENT_TOKEN\nENV BLACKFIRE_CLIENT_ID=\"${BLACKFIRE_CLIENT_ID}\"\nENV BLACKFIRE_CLIENT_TOKEN=\"${BLACKFIRE_CLIENT_TOKEN}\"\nRUN if [ ${INSTALL_XDEBUG} = false -a ${INSTALL_BLACKFIRE} = true ] ; then curl -L https://packagecloud.io/gpg.key | apt-key add - \\\n && echo \"deb http://packages.blackfire.io/debian any main\" | tee /etc/apt/sources.list.d/blackfire.list \\\n && apt-get update -yqq \\\n && apt-get install blackfire-agent ; fi\n# ####################################\n#  ssh:\n# ####################################\nARG INSTALL_WORKSPACE_SSH=false\nENV INSTALL_WORKSPACE_SSH=\"${INSTALL_WORKSPACE_SSH}\"\nADD insecure_id_rsa /tmp/id_rsa\nADD insecure_id_rsa.pub /tmp/id_rsa.pub\nRUN if [ ${INSTALL_WORKSPACE_SSH} = true ] ; then rm -f /etc/service/sshd/down \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/authorized_keys \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/id_rsa.pub \\\n && cat /tmp/id_rsa >> /root/.ssh/id_rsa \\\n && rm -f /tmp/id_rsa* \\\n && chmod 644 /root/.ssh/authorized_keys /root/.ssh/id_rsa.pub \\\n && chmod 400 /root/.ssh/id_rsa ; fi\n# ####################################\n#  MongoDB:\n# ####################################\n#  Check if Mongo needs to be installed\nARG INSTALL_MONGO=false\nENV INSTALL_MONGO=\"${INSTALL_MONGO}\"\nRUN if [ ${INSTALL_MONGO} = true ] ; then pecl install mongodb \\\n && echo \"extension=mongodb.so\" >> /etc/php/7.0/cli/conf.d/30-mongodb.ini; fi\n# ####################################\n#  Drush:\n# ####################################\nUSER root\nENV DRUSH_VERSION=\"8.1.2\"\nARG INSTALL_DRUSH=false\nENV INSTALL_DRUSH=\"${INSTALL_DRUSH}\"\nRUN if [ ${INSTALL_DRUSH} = true ] ; then curl -fsSL -o /usr/local/bin/drush https://github.com/drush-ops/drush/releases/download/$DRUSH_VERSION/drush.phar | bash \\\n && chmod +x /usr/local/bin/drush \\\n && drush core-status ; fi\nUSER laradock\n# ####################################\n#  Node / NVM:\n# ####################################\n#  Check if NVM needs to be installed\nARG NODE_VERSION=stable\nENV NODE_VERSION=\"${NODE_VERSION}\"\nARG INSTALL_NODE=false\nENV INSTALL_NODE=\"${INSTALL_NODE}\"\nENV NVM_DIR=\"/home/laradock/.nvm\"\nRUN if [ ${INSTALL_NODE} = true ] ; then curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install ${NODE_VERSION} \\\n && nvm use ${NODE_VERSION} \\\n && nvm alias ${NODE_VERSION} \\\n && npm install gulp bower vue-cli -g ; fi\n#  Wouldn't execute when added to the RUN statement in the above block\n#  Source NVM when loading bash since ~/.profile isn't loaded on non-login shell\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"$HOME/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n#  Add NVM binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"/home/laradock/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n# ####################################\n#  YARN:\n# ####################################\nUSER laradock\nARG INSTALL_YARN=false\nENV INSTALL_YARN=\"${INSTALL_YARN}\"\nARG YARN_VERSION=latest\nENV YARN_VERSION=\"${YARN_VERSION}\"\nRUN if [ ${INSTALL_YARN} = true ] ; then [ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" \\\n && if [ ${YARN_VERSION} = \"latest\" ] ; then curl -o- -L https://yarnpkg.com/install.sh | bash ; else curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version ${YARN_VERSION} ; fi \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"$HOME/.yarn/bin:$PATH\"' >> ~/.bashrc; fi\n#  Add YARN binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_YARN} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export YARN_DIR=\"/home/laradock/.yarn\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$YARN_DIR/bin:$PATH\"' >> ~/.bashrc; fi\n# ####################################\n#  PHP Aerospike:\n# ####################################\nUSER root\nARG INSTALL_AEROSPIKE=true\nENV INSTALL_AEROSPIKE=\"${INSTALL_AEROSPIKE}\"\n#  Copy aerospike configration for remote debugging\nCOPY ./aerospike.ini /etc/php/7.0/cli/conf.d/aerospike.ini\nRUN if [ ${INSTALL_AEROSPIKE} = true ] ; then curl -L -o /tmp/aerospike-client-php.tar.gz \"https://github.com/aerospike/aerospike-client-php/archive/3.4.14.tar.gz\" \\\n && mkdir -p aerospike-client-php \\\n && tar -C aerospike-client-php -zxvf /tmp/aerospike-client-php.tar.gz --strip 1 \\\n && (cd aerospike-client-php/src/aerospike \\\n && phpize \\\n && ./build.sh \\\n && make install ) \\\n && rm /tmp/aerospike-client-php.tar.gz ; fi\nRUN if [ ${INSTALL_AEROSPIKE} = false ] ; then rm /etc/php/7.0/cli/conf.d/aerospike.ini ; fi\n# ####################################\n#  PHP V8JS:\n# ####################################\nUSER root\nARG INSTALL_V8JS=false\nENV INSTALL_V8JS=\"${INSTALL_V8JS}\"\nRUN if [ ${INSTALL_V8JS} = true ] ; then add-apt-repository -y ppa:pinepain/libv8-5.4 \\\n && apt-get update -yqq \\\n && apt-get install php7.0-xml php7.0-dev php-pear libv8-5.4 -y \\\n && pecl install v8js \\\n && echo \"extension=v8js.so\" >> /etc/php/7.0/cli/php.ini; fi\n# ####################################\n#  Non-root user : PHPUnit path\n# ####################################\n#  add ./vendor/bin to non-root user's bashrc (needed for phpunit)\nUSER laradock\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/vendor/bin:$PATH\"' >> ~/.bashrc\n# ####################################\n#  Laravel Artisan Alias\n# ####################################\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'alias art=\"php artisan\"' >> ~/.bashrc\n# ####################################\n#  Laravel Envoy:\n# ####################################\nUSER laradock\nARG INSTALL_LARAVEL_ENVOY=true\nENV INSTALL_LARAVEL_ENVOY=\"${INSTALL_LARAVEL_ENVOY}\"\nRUN if [ ${INSTALL_LARAVEL_ENVOY} = true ] ; then composer global require \"laravel/envoy=~1.0\" ; fi\n# ####################################\n#  Deployer:\n# ####################################\nUSER laradock\nARG INSTALL_DEPLOYER=false\nENV INSTALL_DEPLOYER=\"${INSTALL_DEPLOYER}\"\nRUN if [ ${INSTALL_DEPLOYER} = true ] ; then composer global require \"deployer/deployer\" ; fi\n# ####################################\n#  Linuxbrew:\n# ####################################\nUSER root\nARG INSTALL_LINUXBREW=true\nENV INSTALL_LINUXBREW=\"${INSTALL_LINUXBREW}\"\nRUN if [ ${INSTALL_LINUXBREW} = true ] ; then apt-get upgrade -y \\\n && apt-get install build-essential make cmake scons curl git ruby autoconf automake autoconf-archive gettext libtool flex bison libbz2-dev libcurl4-openssl-dev libexpat-dev libncurses-dev -y \\\n && git clone --depth=1 https://github.com/Homebrew/linuxbrew.git ~/.linuxbrew \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH\"=/usr/local/lib/pkgconfig:/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/lib/pkgconfig:/usr/lib/x86_64-linux-gnu/pkgconfig:/usr/lib64/pkgconfig:/usr/share/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LINUXBREWHOME=\"$HOME/.linuxbrew\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$LINUXBREWHOME/bin:$PATH\"' >> ~/.bashrc \\\n && echo 'export MANPATH=\"$LINUXBREWHOME/man:$MANPATH\"' >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH=\"$LINUXBREWHOME/lib64/pkgconfig:$LINUXBREWHOME/lib/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LD_LIBRARY_PATH=\"$LINUXBREWHOME/lib64:$LINUXBREWHOME/lib:$LD_LIBRARY_PATH\"' >> ~/.bashrc; fi\n# ####################################\n#  SQL SERVER:\n# ####################################\nARG INSTALL_MSSQL=true\nENV INSTALL_MSSQL=\"${INSTALL_MSSQL}\"\nRUN if [ ${INSTALL_MSSQL} = true ] ; then cd / \\\n && apt-get install wget apt-transport-https curl freetds-common libsybdb5 freetds-bin unixodbc unixodbc-dev -y --force-yes \\\n && cd / \\\n && echo \"deb http://packages.dotdeb.org jessie all\" | tee /etc/apt/sources.list.d/dotdeb.list \\\n && wget -qO- https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && apt-get update -yqq \\\n && apt-get upgrade -qq \\\n && cd / \\\n && apt-get install whiptail unixodbc libgss3 odbcinst devscripts debhelper dh-exec dh-autoreconf libreadline-dev libltdl-dev -y \\\n && dget -u -x http://http.debian.net/debian/pool/main/u/unixodbc/unixodbc_2.3.1-3.dsc \\\n && cd unixodbc-*/ \\\n && ./configure \\\n && make \\\n && make install \\\n && cp -v ./exe/odbc_config /usr/local/bin/ \\\n && printf '#!/bin/bash\\nif [ \"$*\" == \"-p\" ]; then echo \"x86_64\"; else /bin/uname \"$@\"; fi' | tee /usr/local/bin/uname \\\n && chmod +x /usr/local/bin/uname \\\n && cd / \\\n && wget -nv -O msodbcsql-13.0.0.0.tar.gz \"https://meetsstorenew.blob.core.windows.net/contianerhd/Ubuntu%2013.0%20Tar/msodbcsql-13.0.0.0.tar.gz?st=2016-10-18T17%3A29%3A00Z&se=2022-10-19T17%3A29%3A00Z&sp=rl&sv=2015-04-05&sr=b&sig=cDwPfrouVeIQf0vi%2BnKt%2BzX8Z8caIYvRCmicDL5oknY%3D\" \\\n && tar -xf msodbcsql-13.0.0.0.tar.gz \\\n && cd msodbcsql-*/ \\\n && ldd lib64/libmsodbcsql-13.0.so.0.0 \\\n && ./install.sh install --accept-license \\\n && ls -l /opt/microsoft/msodbcsql/ \\\n && odbcinst -q -d -n \"ODBC Driver 13 for SQL Server\" \\\n && pecl install sqlsrv-4.0.8 \\\n && pecl install pdo_sqlsrv-4.0.8 \\\n && apt-get install locales -y \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-pdo_sqlsrv.ini; fi\n# ####################################\n#  Minio:\n# ####################################\nUSER root\nARG INSTALL_MC=false\nENV INSTALL_MC=\"${INSTALL_MC}\"\nCOPY mc/config.json /root/.mc/config.json\nRUN if [ ${INSTALL_MC} = true ] ; then curl -fsSL -o /usr/local/bin/mc https://dl.minio.io/client/mc/release/linux-amd64/mc \\\n && chmod +x /usr/local/bin/mc ; fi\n# ####################################\n#  Symfony:\n# ####################################\nUSER root\nARG INSTALL_SYMFONY=false\nENV INSTALL_SYMFONY=\"${INSTALL_SYMFONY}\"\nRUN if [ ${INSTALL_SYMFONY} = true ] ; then mkdir -p /usr/local/bin \\\n && curl -LsS https://symfony.com/installer -o /usr/local/bin/symfony \\\n && chmod a+x /usr/local/bin/symfony \\\n && echo 'alias dev=\"php bin/console -e=dev\"' >> ~/.bashrc \\\n && echo 'alias prod=\"php bin/console -e=prod\"' >> ~/.bashrc; fi\n# ####################################\n#  MySQL client\n# ####################################\nUSER root\nARG INSTALL_MYSQL_CLIENT=false\nENV INSTALL_MYSQL_CLIENT=\"${INSTALL_MYSQL_CLIENT}\"\nRUN if [ ${INSTALL_MYSQL_CLIENT} = true ] ; then apt-get update \\\n && apt-get install mysql-client -y ; fi\n# ####################################\n#  PostgreSQL client\n# ####################################\nUSER root\nARG INSTALL_PGSQL_CLIENT=false\nENV INSTALL_PGSQL_CLIENT=\"${INSTALL_PGSQL_CLIENT}\"\nRUN if [ ${INSTALL_PGSQL_CLIENT} = true ] ; then apt-get update \\\n && apt-get install postgresql-client -y ; fi\n#\n# --------------------------------------------------------------------------\n#  Final Touch\n# --------------------------------------------------------------------------\n#\n#  Clean up\nUSER root\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Set default work directory\nWORKDIR /var/www\n","injectedSmells":[],"originalDockerfileHash":"fdf0c205880680e2c1bff7a79ee4e649","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#  --------------------------------------------------------------------------\n#   Image Setup\n#  --------------------------------------------------------------------------\n#\n#   To edit the 'workspace' base Image, visit its repository on Github\n#      https://github.com/Laradock/workspace\n#\n#   To change its version, see the available Tags on the Docker Hub:\n#      https://hub.docker.com/r/laradock/workspace/tags/\n#\n#   Note: Base Image name format {image-tag}-{php-version}\n#\nFROM laradock/workspace:1.8-70\nMAINTAINER Mahmoud Zalt <mahmoud@zalt.me>\n#\n#  --------------------------------------------------------------------------\n#   Mandatory Software's Installation\n#  --------------------------------------------------------------------------\n#\n#   Mandatory Software's such as (\"php7.0-cli\", \"git\", \"vim\", ....) are\n#   installed on the base image 'laradock/workspace' image. If you want\n#   to add more Software's or remove existing one, you need to edit the\n#   base image (https://github.com/Laradock/workspace).\n#\n#\n#  --------------------------------------------------------------------------\n#   Optional Software's Installation\n#  --------------------------------------------------------------------------\n#\n#   Optional Software's will only be installed if you set them to `true`\n#   in the `docker-compose.yml` before the build.\n#   Example:\n#     - INSTALL_NODE=false\n#     - ...\n#\n#  ####################################\n#   Non-Root User:\n#  ####################################\n#   Add a non-root user to prevent files being created with root permissions on host machine.\nARG PUID=1000\nARG PGID=1000\nENV PUID=\"${PUID}\"\nENV PGID=\"${PGID}\"\nRUN groupadd -g ${PGID} laradock \\\n && useradd -u ${PUID} -g laradock -m laradock \\\n && apt-get update -yqq\n#  ####################################\n#   SOAP:\n#  ####################################\nUSER root\nARG INSTALL_SOAP=false\nENV INSTALL_SOAP=\"${INSTALL_SOAP}\"\nRUN if [ ${INSTALL_SOAP} = true ] ; then add-apt-repository -y ppa:ondrej/php \\\n && apt-get update -yqq \\\n && apt-get install libxml2-dev php7.0-soap -y ; fi\n#  ####################################\n#   PHP GMP\n#  ####################################\nARG INSTALL_GMP=false\nENV INSTALL_GMP=\"${INSTALL_GMP}\"\nRUN if [ ${INSTALL_GMP} = true ] ; then apt-get install php-gmp -y ; fi\n#  ####################################\n#   Set Timezone\n#  ####################################\nARG TZ=UTC\nENV TZ=\"${TZ}\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n#  ####################################\n#   Composer:\n#  ####################################\n#   Add the composer.json\nCOPY ./composer.json /home/laradock/.composer/composer.json\n#   Make sure that ~/.composer belongs to laradock\nRUN chown -R laradock:laradock /home/laradock/.composer\nUSER laradock\n#   Check if global install need to be ran\nARG COMPOSER_GLOBAL_INSTALL=false\nENV COMPOSER_GLOBAL_INSTALL=\"${COMPOSER_GLOBAL_INSTALL}\"\nRUN if [ ${COMPOSER_GLOBAL_INSTALL} = true ] ; then composer global install ; fi\n#   Export composer vendor path\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"~/.composer/vendor/bin:$PATH\"' >> ~/.bashrc\n#  ####################################\n#   Crontab\n#  ####################################\nUSER root\nCOPY ./crontab /etc/cron.d\nRUN chmod -R 644 /etc/cron.d\n#  ####################################\n#   User Aliases\n#  ####################################\nUSER laradock\nCOPY ./aliases.sh /home/laradock/aliases.sh\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo \"# Load Custom Aliases\" >> ~/.bashrc \\\n && echo \"source /home/laradock/aliases.sh\" >> ~/.bashrc \\\n && echo \"\" >> ~/.bashrc\n#  ####################################\n#   xDebug:\n#  ####################################\nARG INSTALL_XDEBUG=false\nRUN if [ ${INSTALL_XDEBUG} = true ] ; then apt-get install php7.0-xdebug -y --force-yes \\\n && sed -i 's/^;//g' /etc/php/7.0/cli/conf.d/20-xdebug.ini \\\n && echo \"alias phpunit='php -dzend_extension=xdebug.so /var/www/vendor/bin/phpunit'\" >> ~/.bashrc; fi\n#   ADD for REMOTE debugging\nCOPY ./xdebug.ini /etc/php/7.0/cli/conf.d/xdebug.ini\n#  ####################################\n#   Blackfire:\n#  ####################################\nARG INSTALL_BLACKFIRE=false\nARG BLACKFIRE_CLIENT_ID\nARG BLACKFIRE_CLIENT_TOKEN\nENV BLACKFIRE_CLIENT_ID=\"${BLACKFIRE_CLIENT_ID}\"\nENV BLACKFIRE_CLIENT_TOKEN=\"${BLACKFIRE_CLIENT_TOKEN}\"\nRUN if [ ${INSTALL_XDEBUG} = false -a ${INSTALL_BLACKFIRE} = true ] ; then curl -L https://packagecloud.io/gpg.key | apt-key add - \\\n && echo \"deb http://packages.blackfire.io/debian any main\" | tee /etc/apt/sources.list.d/blackfire.list \\\n && apt-get update -yqq \\\n && apt-get install blackfire-agent ; fi\n#  ####################################\n#   ssh:\n#  ####################################\nARG INSTALL_WORKSPACE_SSH=false\nENV INSTALL_WORKSPACE_SSH=\"${INSTALL_WORKSPACE_SSH}\"\nADD insecure_id_rsa /tmp/id_rsa\nADD insecure_id_rsa.pub /tmp/id_rsa.pub\nRUN if [ ${INSTALL_WORKSPACE_SSH} = true ] ; then rm -f /etc/service/sshd/down \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/authorized_keys \\\n && cat /tmp/id_rsa.pub >> /root/.ssh/id_rsa.pub \\\n && cat /tmp/id_rsa >> /root/.ssh/id_rsa \\\n && rm -f /tmp/id_rsa* \\\n && chmod 644 /root/.ssh/authorized_keys /root/.ssh/id_rsa.pub \\\n && chmod 400 /root/.ssh/id_rsa ; fi\n#  ####################################\n#   MongoDB:\n#  ####################################\n#   Check if Mongo needs to be installed\nARG INSTALL_MONGO=false\nENV INSTALL_MONGO=\"${INSTALL_MONGO}\"\nRUN if [ ${INSTALL_MONGO} = true ] ; then pecl install mongodb \\\n && echo \"extension=mongodb.so\" >> /etc/php/7.0/cli/conf.d/30-mongodb.ini; fi\n#  ####################################\n#   Drush:\n#  ####################################\nUSER root\nENV DRUSH_VERSION=\"8.1.2\"\nARG INSTALL_DRUSH=false\nENV INSTALL_DRUSH=\"${INSTALL_DRUSH}\"\nRUN if [ ${INSTALL_DRUSH} = true ] ; then curl -fsSL -o /usr/local/bin/drush https://github.com/drush-ops/drush/releases/download/$DRUSH_VERSION/drush.phar | bash \\\n && chmod +x /usr/local/bin/drush \\\n && drush core-status ; fi\nUSER laradock\n#  ####################################\n#   Node / NVM:\n#  ####################################\n#   Check if NVM needs to be installed\nARG NODE_VERSION=stable\nENV NODE_VERSION=\"${NODE_VERSION}\"\nARG INSTALL_NODE=false\nENV INSTALL_NODE=\"${INSTALL_NODE}\"\nENV NVM_DIR=\"/home/laradock/.nvm\"\nRUN if [ ${INSTALL_NODE} = true ] ; then curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash \\\n && . $NVM_DIR/nvm.sh \\\n && nvm install ${NODE_VERSION} \\\n && nvm use ${NODE_VERSION} \\\n && nvm alias ${NODE_VERSION} \\\n && npm install gulp bower vue-cli -g ; fi\n#   Wouldn't execute when added to the RUN statement in the above block\n#   Source NVM when loading bash since ~/.profile isn't loaded on non-login shell\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"$HOME/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n#   Add NVM binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_NODE} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export NVM_DIR=\"/home/laradock/.nvm\"' >> ~/.bashrc \\\n && echo '[ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" # This loads nvm' >> ~/.bashrc; fi\n#  ####################################\n#   YARN:\n#  ####################################\nUSER laradock\nARG INSTALL_YARN=false\nENV INSTALL_YARN=\"${INSTALL_YARN}\"\nARG YARN_VERSION=latest\nENV YARN_VERSION=\"${YARN_VERSION}\"\nRUN if [ ${INSTALL_YARN} = true ] ; then [ -s \"$NVM_DIR/nvm.sh\" ] \\\n && . \"$NVM_DIR/nvm.sh\" \\\n && if [ ${YARN_VERSION} = \"latest\" ] ; then curl -o- -L https://yarnpkg.com/install.sh | bash ; else curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version ${YARN_VERSION} ; fi \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"$HOME/.yarn/bin:$PATH\"' >> ~/.bashrc; fi\n#   Add YARN binaries to root's .bashrc\nUSER root\nRUN if [ ${INSTALL_YARN} = true ] ; then echo \"\" >> ~/.bashrc \\\n && echo 'export YARN_DIR=\"/home/laradock/.yarn\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$YARN_DIR/bin:$PATH\"' >> ~/.bashrc; fi\n#  ####################################\n#   PHP Aerospike:\n#  ####################################\nUSER root\nARG INSTALL_AEROSPIKE=true\nENV INSTALL_AEROSPIKE=\"${INSTALL_AEROSPIKE}\"\n#   Copy aerospike configration for remote debugging\nCOPY ./aerospike.ini /etc/php/7.0/cli/conf.d/aerospike.ini\nRUN if [ ${INSTALL_AEROSPIKE} = true ] ; then curl -L -o /tmp/aerospike-client-php.tar.gz \"https://github.com/aerospike/aerospike-client-php/archive/3.4.14.tar.gz\" \\\n && mkdir -p aerospike-client-php \\\n && tar -C aerospike-client-php -zxvf /tmp/aerospike-client-php.tar.gz --strip 1 \\\n && (cd aerospike-client-php/src/aerospike \\\n && phpize \\\n && ./build.sh \\\n && make install ) \\\n && rm /tmp/aerospike-client-php.tar.gz ; fi\nRUN if [ ${INSTALL_AEROSPIKE} = false ] ; then rm /etc/php/7.0/cli/conf.d/aerospike.ini ; fi\n#  ####################################\n#   PHP V8JS:\n#  ####################################\nUSER root\nARG INSTALL_V8JS=false\nENV INSTALL_V8JS=\"${INSTALL_V8JS}\"\nRUN if [ ${INSTALL_V8JS} = true ] ; then add-apt-repository -y ppa:pinepain/libv8-5.4 \\\n && apt-get update -yqq \\\n && apt-get install php7.0-xml php7.0-dev php-pear libv8-5.4 -y \\\n && pecl install v8js \\\n && echo \"extension=v8js.so\" >> /etc/php/7.0/cli/php.ini; fi\n#  ####################################\n#   Non-root user : PHPUnit path\n#  ####################################\n#   add ./vendor/bin to non-root user's bashrc (needed for phpunit)\nUSER laradock\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/vendor/bin:$PATH\"' >> ~/.bashrc\n#  ####################################\n#   Laravel Artisan Alias\n#  ####################################\nUSER root\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'alias art=\"php artisan\"' >> ~/.bashrc\n#  ####################################\n#   Laravel Envoy:\n#  ####################################\nUSER laradock\nARG INSTALL_LARAVEL_ENVOY=true\nENV INSTALL_LARAVEL_ENVOY=\"${INSTALL_LARAVEL_ENVOY}\"\nRUN if [ ${INSTALL_LARAVEL_ENVOY} = true ] ; then composer global require \"laravel/envoy=~1.0\" ; fi\n#  ####################################\n#   Deployer:\n#  ####################################\nUSER laradock\nARG INSTALL_DEPLOYER=false\nENV INSTALL_DEPLOYER=\"${INSTALL_DEPLOYER}\"\nRUN if [ ${INSTALL_DEPLOYER} = true ] ; then composer global require \"deployer/deployer\" ; fi\n#  ####################################\n#   Linuxbrew:\n#  ####################################\nUSER root\nARG INSTALL_LINUXBREW=true\nENV INSTALL_LINUXBREW=\"${INSTALL_LINUXBREW}\"\nRUN if [ ${INSTALL_LINUXBREW} = true ] ; then apt-get upgrade -y \\\n && apt-get install build-essential make cmake scons curl git ruby autoconf automake autoconf-archive gettext libtool flex bison libbz2-dev libcurl4-openssl-dev libexpat-dev libncurses-dev -y \\\n && git clone --depth=1 https://github.com/Homebrew/linuxbrew.git ~/.linuxbrew \\\n && echo \"\" >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH\"=/usr/local/lib/pkgconfig:/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/lib/pkgconfig:/usr/lib/x86_64-linux-gnu/pkgconfig:/usr/lib64/pkgconfig:/usr/share/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LINUXBREWHOME=\"$HOME/.linuxbrew\"' >> ~/.bashrc \\\n && echo 'export PATH=\"$LINUXBREWHOME/bin:$PATH\"' >> ~/.bashrc \\\n && echo 'export MANPATH=\"$LINUXBREWHOME/man:$MANPATH\"' >> ~/.bashrc \\\n && echo 'export PKG_CONFIG_PATH=\"$LINUXBREWHOME/lib64/pkgconfig:$LINUXBREWHOME/lib/pkgconfig:$PKG_CONFIG_PATH\"' >> ~/.bashrc \\\n && echo 'export LD_LIBRARY_PATH=\"$LINUXBREWHOME/lib64:$LINUXBREWHOME/lib:$LD_LIBRARY_PATH\"' >> ~/.bashrc; fi\n#  ####################################\n#   SQL SERVER:\n#  ####################################\nARG INSTALL_MSSQL=true\nENV INSTALL_MSSQL=\"${INSTALL_MSSQL}\"\nRUN if [ ${INSTALL_MSSQL} = true ] ; then cd / \\\n && apt-get install wget apt-transport-https curl freetds-common libsybdb5 freetds-bin unixodbc unixodbc-dev -y --force-yes \\\n && cd / \\\n && echo \"deb http://packages.dotdeb.org jessie all\" | tee /etc/apt/sources.list.d/dotdeb.list \\\n && wget -qO- https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && apt-get update -yqq \\\n && apt-get upgrade -qq \\\n && cd / \\\n && apt-get install whiptail unixodbc libgss3 odbcinst devscripts debhelper dh-exec dh-autoreconf libreadline-dev libltdl-dev -y \\\n && dget -u -x http://http.debian.net/debian/pool/main/u/unixodbc/unixodbc_2.3.1-3.dsc \\\n && cd unixodbc-*/ \\\n && ./configure \\\n && make \\\n && make install \\\n && cp -v ./exe/odbc_config /usr/local/bin/ \\\n && printf '#!/bin/bash\\nif [ \"$*\" == \"-p\" ]; then echo \"x86_64\"; else /bin/uname \"$@\"; fi' | tee /usr/local/bin/uname \\\n && chmod +x /usr/local/bin/uname \\\n && cd / \\\n && wget -nv -O msodbcsql-13.0.0.0.tar.gz \"https://meetsstorenew.blob.core.windows.net/contianerhd/Ubuntu%2013.0%20Tar/msodbcsql-13.0.0.0.tar.gz?st=2016-10-18T17%3A29%3A00Z&se=2022-10-19T17%3A29%3A00Z&sp=rl&sv=2015-04-05&sr=b&sig=cDwPfrouVeIQf0vi%2BnKt%2BzX8Z8caIYvRCmicDL5oknY%3D\" \\\n && tar -xf msodbcsql-13.0.0.0.tar.gz \\\n && cd msodbcsql-*/ \\\n && ldd lib64/libmsodbcsql-13.0.so.0.0 \\\n && ./install.sh install --accept-license \\\n && ls -l /opt/microsoft/msodbcsql/ \\\n && odbcinst -q -d -n \"ODBC Driver 13 for SQL Server\" \\\n && pecl install sqlsrv-4.0.8 \\\n && pecl install pdo_sqlsrv-4.0.8 \\\n && apt-get install locales -y \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.0/cli/conf.d/20-pdo_sqlsrv.ini; fi\n#  ####################################\n#   Minio:\n#  ####################################\nUSER root\nARG INSTALL_MC=false\nENV INSTALL_MC=\"${INSTALL_MC}\"\nCOPY mc/config.json /root/.mc/config.json\nRUN if [ ${INSTALL_MC} = true ] ; then curl -fsSL -o /usr/local/bin/mc https://dl.minio.io/client/mc/release/linux-amd64/mc \\\n && chmod +x /usr/local/bin/mc ; fi\n#  ####################################\n#   Symfony:\n#  ####################################\nUSER root\nARG INSTALL_SYMFONY=false\nENV INSTALL_SYMFONY=\"${INSTALL_SYMFONY}\"\nRUN if [ ${INSTALL_SYMFONY} = true ] ; then mkdir -p /usr/local/bin \\\n && curl -LsS https://symfony.com/installer -o /usr/local/bin/symfony \\\n && chmod a+x /usr/local/bin/symfony \\\n && echo 'alias dev=\"php bin/console -e=dev\"' >> ~/.bashrc \\\n && echo 'alias prod=\"php bin/console -e=prod\"' >> ~/.bashrc; fi\n#  ####################################\n#   MySQL client\n#  ####################################\nUSER root\nARG INSTALL_MYSQL_CLIENT=false\nENV INSTALL_MYSQL_CLIENT=\"${INSTALL_MYSQL_CLIENT}\"\nRUN if [ ${INSTALL_MYSQL_CLIENT} = true ] ; then apt-get update \\\n && apt-get install mysql-client -y ; fi\n#  ####################################\n#   PostgreSQL client\n#  ####################################\nUSER root\nARG INSTALL_PGSQL_CLIENT=false\nENV INSTALL_PGSQL_CLIENT=\"${INSTALL_PGSQL_CLIENT}\"\nRUN if [ ${INSTALL_PGSQL_CLIENT} = true ] ; then apt-get update \\\n && apt-get install postgresql-client -y ; fi\n#\n#  --------------------------------------------------------------------------\n#   Final Touch\n#  --------------------------------------------------------------------------\n#\n#   Clean up\nUSER root\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Set default work directory\nWORKDIR /var/www\n","originalDockerfileUglifiedHash":"67d83df09a1b431adedf54e6862a4a0c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/beec44fb05c6f5b2fcebbb748460fb6361e947c0.dockerfile"}