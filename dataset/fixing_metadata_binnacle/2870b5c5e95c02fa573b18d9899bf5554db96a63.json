{"seed":471371006,"processedDockerfileHash":"2151fb4d9c48bf2e261e3e01522a755e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  MUST BE BUILT FROM SERVICES DIRECTORY USING Firmament to take care of dependecies!!!! with -f flag\n#    e.g.:  cd watchman/services\n#           docker build -f Dockerfile-ubuntu-cudnn5 -t sotera/ubuntu-cudnn5:1.0 .\n#\n#    The file NVIDIA-Linux-x86_64-367.57.run should be copied into the current directory.\n#    This file can be obtained from NVidia or from one of our prior AMI Images\n#\n#  MUST BE BUILT on a system having NVidia driver support:\n#\n#     See configure_gpu.sh for more details and:\n#     https://github.com/NVIDIA/nvidia-docker/wiki/Deploy-on-Amazon-EC2\n#     https://developer.nvidia.com/cuda-downloads\nFROM ubuntu:14.04\nUSER root\nCOPY \"NVIDIA-Linux-x86_64-367.57.run\" .\n#   INSTALL NVidia Stuff  \n#   -- Pasted 3 DockerFiles maintained by NVidia\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/runtime/Dockerfile\n#   FROM ubuntu:14.04\n#   MAINTAINER NVIDIA CORPORATION <digits@nvidia.com>\nLABEL com.nvidia.volumes.needed=\"nvidia_driver\"\n#  <<\n#   ADDED BY Kevin English\nRUN sh \"NVIDIA-Linux-x86_64-367.57.run\" --ui=none --no-questions --accept-license --no-kernel-module\n#  >>\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-nvrtc-$CUDA_PKG_VERSION cuda-nvgraph-$CUDA_PKG_VERSION cuda-cusolver-$CUDA_PKG_VERSION cuda-cublas-$CUDA_PKG_VERSION cuda-cufft-$CUDA_PKG_VERSION cuda-curand-$CUDA_PKG_VERSION cuda-cusparse-$CUDA_PKG_VERSION cuda-npp-$CUDA_PKG_VERSION cuda-cudart-$CUDA_PKG_VERSION -y \\\n && ln -s cuda-$CUDA_VERSION /usr/local/cuda \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"/usr/local/cuda/lib\" >> /etc/ld.so.conf.d/cuda.conf \\\n && echo \"/usr/local/cuda/lib64\" >> /etc/ld.so.conf.d/cuda.conf \\\n && ldconfig\nRUN echo \"/usr/local/nvidia/lib\" >> /etc/ld.so.conf.d/nvidia.conf \\\n && echo \"/usr/local/nvidia/lib64\" >> /etc/ld.so.conf.d/nvidia.conf\nENV PATH=\"/usr/local/nvidia/bin:/usr/local/cuda/bin:${PATH}\"\nENV LD_LIBRARY_PATH=\"/usr/local/nvidia/lib:/usr/local/nvidia/lib64:${LD_LIBRARY_PATH}\"\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/Dockerfile\n#   FROM cuda:8.0-runtime\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-core-$CUDA_PKG_VERSION cuda-misc-headers-$CUDA_PKG_VERSION cuda-command-line-tools-$CUDA_PKG_VERSION cuda-nvrtc-dev-$CUDA_PKG_VERSION cuda-nvml-dev-$CUDA_PKG_VERSION cuda-nvgraph-dev-$CUDA_PKG_VERSION cuda-cusolver-dev-$CUDA_PKG_VERSION cuda-cublas-dev-$CUDA_PKG_VERSION cuda-cufft-dev-$CUDA_PKG_VERSION cuda-curand-dev-$CUDA_PKG_VERSION cuda-cusparse-dev-$CUDA_PKG_VERSION cuda-npp-dev-$CUDA_PKG_VERSION cuda-cudart-dev-$CUDA_PKG_VERSION cuda-driver-dev-$CUDA_PKG_VERSION -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/cudnn5/Dockerfile\n#   FROM cuda:8.0-devel\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.35.0-1ubuntu2.20 -y \\\n && rm -rf /var/lib/apt/lists/*\nENV CUDNN_VERSION=\"5\"\nLABEL com.nvidia.cudnn.version=\"5\"\nRUN CUDNN_DOWNLOAD_SUM=a87cb2df2e5e7cc0a05e266734e679ee1a2fadad6f06af82a76ed81a23b102c8 \\\n && curl -fsSL http://developer.download.nvidia.com/compute/redist/cudnn/v5.1/cudnn-8.0-linux-x64-v5.1.tgz -O \\\n && echo \"$CUDNN_DOWNLOAD_SUM cudnn-8.0-linux-x64-v5.1.tgz\" | sha256sum -c --strict - \\\n && tar -xzf cudnn-8.0-linux-x64-v5.1.tgz -C /usr/local \\\n && rm cudnn-8.0-linux-x64-v5.1.tgz \\\n && ldconfig\n#   This is needed to suppress \"libdc1394 error: Failed to initialize libdc1394\" scary warning on AMI\n#   See https://groups.google.com/forum/#!topic/digits-users/uvQpHooD6WY\nRUN ln /dev/null /dev/raw1394\n#\n#    End of NVidia Stuff \nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# MUST BE BUILT FROM SERVICES DIRECTORY USING Firmament to take care of dependecies!!!! with -f flag\n#   e.g.:  cd watchman/services\n#          docker build -f Dockerfile-ubuntu-cudnn5 -t sotera/ubuntu-cudnn5:1.0 .\n#\n#   The file NVIDIA-Linux-x86_64-367.57.run should be copied into the current directory.\n#   This file can be obtained from NVidia or from one of our prior AMI Images\n#\n# MUST BE BUILT on a system having NVidia driver support:\n#\n#    See configure_gpu.sh for more details and:\n#    https://github.com/NVIDIA/nvidia-docker/wiki/Deploy-on-Amazon-EC2\n#    https://developer.nvidia.com/cuda-downloads\nFROM ubuntu:14.04\nUSER root\nCOPY \"NVIDIA-Linux-x86_64-367.57.run\" .\n#  INSTALL NVidia Stuff  \n#  -- Pasted 3 DockerFiles maintained by NVidia\n#  https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/runtime/Dockerfile\n#  FROM ubuntu:14.04\n#  MAINTAINER NVIDIA CORPORATION <digits@nvidia.com>\nLABEL com.nvidia.volumes.needed=\"nvidia_driver\"\n# <<\n#  ADDED BY Kevin English\nRUN sh \"NVIDIA-Linux-x86_64-367.57.run\" --ui=none --no-questions --accept-license --no-kernel-module\n# >>\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-nvrtc-$CUDA_PKG_VERSION cuda-nvgraph-$CUDA_PKG_VERSION cuda-cusolver-$CUDA_PKG_VERSION cuda-cublas-$CUDA_PKG_VERSION cuda-cufft-$CUDA_PKG_VERSION cuda-curand-$CUDA_PKG_VERSION cuda-cusparse-$CUDA_PKG_VERSION cuda-npp-$CUDA_PKG_VERSION cuda-cudart-$CUDA_PKG_VERSION -y \\\n && ln -s cuda-$CUDA_VERSION /usr/local/cuda \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"/usr/local/cuda/lib\" >> /etc/ld.so.conf.d/cuda.conf \\\n && echo \"/usr/local/cuda/lib64\" >> /etc/ld.so.conf.d/cuda.conf \\\n && ldconfig\nRUN echo \"/usr/local/nvidia/lib\" >> /etc/ld.so.conf.d/nvidia.conf \\\n && echo \"/usr/local/nvidia/lib64\" >> /etc/ld.so.conf.d/nvidia.conf\nENV PATH=\"/usr/local/nvidia/bin:/usr/local/cuda/bin:${PATH}\"\nENV LD_LIBRARY_PATH=\"/usr/local/nvidia/lib:/usr/local/nvidia/lib64:${LD_LIBRARY_PATH}\"\n#  https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/Dockerfile\n#  FROM cuda:8.0-runtime\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-core-$CUDA_PKG_VERSION cuda-misc-headers-$CUDA_PKG_VERSION cuda-command-line-tools-$CUDA_PKG_VERSION cuda-nvrtc-dev-$CUDA_PKG_VERSION cuda-nvml-dev-$CUDA_PKG_VERSION cuda-nvgraph-dev-$CUDA_PKG_VERSION cuda-cusolver-dev-$CUDA_PKG_VERSION cuda-cublas-dev-$CUDA_PKG_VERSION cuda-cufft-dev-$CUDA_PKG_VERSION cuda-curand-dev-$CUDA_PKG_VERSION cuda-cusparse-dev-$CUDA_PKG_VERSION cuda-npp-dev-$CUDA_PKG_VERSION cuda-cudart-dev-$CUDA_PKG_VERSION cuda-driver-dev-$CUDA_PKG_VERSION -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#  https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/cudnn5/Dockerfile\n#  FROM cuda:8.0-devel\nRUN apt-get update \\\n && apt-get install curl -y \\\n && rm -rf /var/lib/apt/lists/*\nENV CUDNN_VERSION=\"5\"\nLABEL com.nvidia.cudnn.version=\"5\"\nRUN CUDNN_DOWNLOAD_SUM=a87cb2df2e5e7cc0a05e266734e679ee1a2fadad6f06af82a76ed81a23b102c8 \\\n && curl -fsSL http://developer.download.nvidia.com/compute/redist/cudnn/v5.1/cudnn-8.0-linux-x64-v5.1.tgz -O \\\n && echo \"$CUDNN_DOWNLOAD_SUM cudnn-8.0-linux-x64-v5.1.tgz\" | sha256sum -c --strict - \\\n && tar -xzf cudnn-8.0-linux-x64-v5.1.tgz -C /usr/local \\\n && rm cudnn-8.0-linux-x64-v5.1.tgz \\\n && ldconfig\n#  This is needed to suppress \"libdc1394 error: Failed to initialize libdc1394\" scary warning on AMI\n#  See https://groups.google.com/forum/#!topic/digits-users/uvQpHooD6WY\nRUN ln /dev/null /dev/raw1394\n#\n#   End of NVidia Stuff \n","injectedSmells":[],"originalDockerfileHash":"eb360095dac71291e1dc70eb1c188cfe","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  MUST BE BUILT FROM SERVICES DIRECTORY USING Firmament to take care of dependecies!!!! with -f flag\n#    e.g.:  cd watchman/services\n#           docker build -f Dockerfile-ubuntu-cudnn5 -t sotera/ubuntu-cudnn5:1.0 .\n#\n#    The file NVIDIA-Linux-x86_64-367.57.run should be copied into the current directory.\n#    This file can be obtained from NVidia or from one of our prior AMI Images\n#\n#  MUST BE BUILT on a system having NVidia driver support:\n#\n#     See configure_gpu.sh for more details and:\n#     https://github.com/NVIDIA/nvidia-docker/wiki/Deploy-on-Amazon-EC2\n#     https://developer.nvidia.com/cuda-downloads\nFROM ubuntu:14.04\nUSER root\nCOPY \"NVIDIA-Linux-x86_64-367.57.run\" .\n#   INSTALL NVidia Stuff  \n#   -- Pasted 3 DockerFiles maintained by NVidia\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/runtime/Dockerfile\n#   FROM ubuntu:14.04\n#   MAINTAINER NVIDIA CORPORATION <digits@nvidia.com>\nLABEL com.nvidia.volumes.needed=\"nvidia_driver\"\n#  <<\n#   ADDED BY Kevin English\nRUN sh \"NVIDIA-Linux-x86_64-367.57.run\" --ui=none --no-questions --accept-license --no-kernel-module\n#  >>\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-nvrtc-$CUDA_PKG_VERSION cuda-nvgraph-$CUDA_PKG_VERSION cuda-cusolver-$CUDA_PKG_VERSION cuda-cublas-$CUDA_PKG_VERSION cuda-cufft-$CUDA_PKG_VERSION cuda-curand-$CUDA_PKG_VERSION cuda-cusparse-$CUDA_PKG_VERSION cuda-npp-$CUDA_PKG_VERSION cuda-cudart-$CUDA_PKG_VERSION -y \\\n && ln -s cuda-$CUDA_VERSION /usr/local/cuda \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"/usr/local/cuda/lib\" >> /etc/ld.so.conf.d/cuda.conf \\\n && echo \"/usr/local/cuda/lib64\" >> /etc/ld.so.conf.d/cuda.conf \\\n && ldconfig\nRUN echo \"/usr/local/nvidia/lib\" >> /etc/ld.so.conf.d/nvidia.conf \\\n && echo \"/usr/local/nvidia/lib64\" >> /etc/ld.so.conf.d/nvidia.conf\nENV PATH=\"/usr/local/nvidia/bin:/usr/local/cuda/bin:${PATH}\"\nENV LD_LIBRARY_PATH=\"/usr/local/nvidia/lib:/usr/local/nvidia/lib64:${LD_LIBRARY_PATH}\"\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/Dockerfile\n#   FROM cuda:8.0-runtime\nRUN NVIDIA_GPGKEY_SUM=d1be581509378368edeec8c1eb2958702feedf3bc3d17011adbf24efacce4ab5 \\\n && NVIDIA_GPGKEY_FPR=ae09fe4bbd223a84b2ccfce3f60f4b3d7fa2af80 \\\n && apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/7fa2af80.pub \\\n && apt-key adv --export --no-emit-version -a $NVIDIA_GPGKEY_FPR | tail -n +2 > cudasign.pub \\\n && echo \"$NVIDIA_GPGKEY_SUM cudasign.pub\" | sha256sum -c --strict - \\\n && rm cudasign.pub \\\n && echo \"deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64 /\" > /etc/apt/sources.list.d/cuda.list\nENV CUDA_VERSION=\"8.0\"\nLABEL com.nvidia.cuda.version=\"8.0\"\nENV CUDA_PKG_VERSION=\"8-0=8.0.44-1\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends cuda-core-$CUDA_PKG_VERSION cuda-misc-headers-$CUDA_PKG_VERSION cuda-command-line-tools-$CUDA_PKG_VERSION cuda-nvrtc-dev-$CUDA_PKG_VERSION cuda-nvml-dev-$CUDA_PKG_VERSION cuda-nvgraph-dev-$CUDA_PKG_VERSION cuda-cusolver-dev-$CUDA_PKG_VERSION cuda-cublas-dev-$CUDA_PKG_VERSION cuda-cufft-dev-$CUDA_PKG_VERSION cuda-curand-dev-$CUDA_PKG_VERSION cuda-cusparse-dev-$CUDA_PKG_VERSION cuda-npp-dev-$CUDA_PKG_VERSION cuda-cudart-dev-$CUDA_PKG_VERSION cuda-driver-dev-$CUDA_PKG_VERSION -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LIBRARY_PATH=\"/usr/local/cuda/lib64/stubs:${LIBRARY_PATH}\"\n#   https://raw.githubusercontent.com/NVIDIA/nvidia-docker/master/ubuntu-14.04/cuda/8.0/devel/cudnn5/Dockerfile\n#   FROM cuda:8.0-devel\nRUN apt-get update \\\n && apt-get install curl -y \\\n && rm -rf /var/lib/apt/lists/*\nENV CUDNN_VERSION=\"5\"\nLABEL com.nvidia.cudnn.version=\"5\"\nRUN CUDNN_DOWNLOAD_SUM=a87cb2df2e5e7cc0a05e266734e679ee1a2fadad6f06af82a76ed81a23b102c8 \\\n && curl -fsSL http://developer.download.nvidia.com/compute/redist/cudnn/v5.1/cudnn-8.0-linux-x64-v5.1.tgz -O \\\n && echo \"$CUDNN_DOWNLOAD_SUM cudnn-8.0-linux-x64-v5.1.tgz\" | sha256sum -c --strict - \\\n && tar -xzf cudnn-8.0-linux-x64-v5.1.tgz -C /usr/local \\\n && rm cudnn-8.0-linux-x64-v5.1.tgz \\\n && ldconfig\n#   This is needed to suppress \"libdc1394 error: Failed to initialize libdc1394\" scary warning on AMI\n#   See https://groups.google.com/forum/#!topic/digits-users/uvQpHooD6WY\nRUN ln /dev/null /dev/raw1394\n#\n#    End of NVidia Stuff \n","originalDockerfileUglifiedHash":"44ab6798e92ef40ae9e0f1bf2194ba5a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2870b5c5e95c02fa573b18d9899bf5554db96a63.dockerfile"}