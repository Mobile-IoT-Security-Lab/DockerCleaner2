{"seed":2570809362,"processedDockerfileHash":"a6d2e42f0dfa745d3e2f8f9c6e798c41","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM tiredofit/alpine:3.8\nLABEL maintainer=\"Dave Conroy <dave@tiredofit.ca>\"\nENV ADMIN_PASS=\"admin\" \\\n    BACKEND=\"mdb\" \\\n    BACKUP_CONFIG_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_DATA_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_TTL=\"15\" \\\n    CONFIG_PASS=\"config\" \\\n    DOMAIN=\"example.org\" \\\n    ENABLE_NGINX=\"false\" \\\n    ENABLE_READONLY_USER=\"false\" \\\n    ENABLE_REPLICATION=\"false\" \\\n    ENABLE_SMTP=\"FALSE\" \\\n    ENABLE_TLS=\"true\" \\\n    LOG_LEVEL=\"256\" \\\n    OPENLDAP_VERSION=\"2.4.47\" \\\n    ORGANIZATION=\"Example Organization\" \\\n    READONLY_USER_PASS=\"readonly\" \\\n    READONLY_USER_USER=\"readonly\" \\\n    REMOVE_CONFIG_AFTER_SETUP=\"false\" \\\n    SCHEMA2LDIF_VERSION=\"1.3\" \\\n    SCHEMA_TYPE=\"nis\" \\\n    SSL_HELPER_PREFIX=\"ldap\" \\\n    TLS_CA_CRT_FILENAME=\"ca.pem\" \\\n    TLS_CIPHER_SUITE=\"ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:-DHE-DSS:-RSA:!aNULL:!MD5:!DSS:!SHA\" \\\n    TLS_CRT_FILENAME=\"cert.pem\" \\\n    TLS_ENFORCE=\"false\" \\\n    TLS_KEY_FILENAME=\"key.pem\" \\\n    TLS_VERIFY_CLIENT=\"try\" \\\n    ZABBIX_HOSTNAME=\"openldap-app\"\nCOPY CHANGELOG.md /tiredofit/\nRUN set -x \\\n && addgroup -g 389 ldap \\\n && adduser -S -D -H -h /var/lib/openldap -s /sbin/nologin -G ldap -u 389 ldap \\\n && apk update \\\n && apk add autoconf automake build-base cracklib-dev cyrus-sasl-dev db-dev git groff libressl-dev libtool m4 mosquitto-dev unixodbc-dev util-linux-dev -t .openldap-build-deps \\\n && apk add cyrus-sasl coreutils cracklib libressl libltdl libuuid libintl nginx perl sed sudo unixodbc -t .openldap-run-deps \\\n && mkdir -p /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && curl -sSL ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-$OPENLDAP_VERSION.tgz | tar xvfz - --strip 1 -C /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && git clone --depth 1 git://git.alpinelinux.org/aports.git /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && mkdir -p contrib/slapd-modules/ppolicy-check-password \\\n && git clone https://github.com/cedric-dufour/ppolicy-check-password /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password \\\n && mkdir -p contrib/slapd-modules/ppm \\\n && git clone https://github.com/ltb-project/ppm /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && git filter-branch --prune-empty --subdirectory-filter main/openldap HEAD \\\n && rm -rf CVE-2017-9287.patch \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && for patch in ./alpine/*.patch; do echo \"** Applying $patch\" ;patch -p1 < $patch; done \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && libtoolize --force \\\n && aclocal \\\n && autoconf \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --libexecdir=/usr/lib --sysconfdir=/etc --mandir=/usr/share/man --localstatedir=/var/run/openldap --enable-slapd --enable-crypt --enable-modules --enable-dynamic --enable-bdb=mod --enable-dnssrv=mod --enable-hdb=mod --enable-ldap=mod --enable-mdb=mod --enable-meta=mod --enable-monitor=yes --enable-null=mod --enable-passwd=mod --enable-spasswd --enable-relay=mod --enable-shell=mod --enable-sock=mod --enable-sql=mod --enable-overlays=mod --with-tls=openssl --with-cyrus-sasl \\\n && make DESTDIR=\"\" install \\\n && make DESTDIR=\"\" prefix=/usr libexec=/usr/lib -C contrib/slapd-modules/mqtt install \\\n && make DESTDIR=\"\" prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/passwd/pbkdf2 install \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppolicy-check-password LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password/check_password.so /usr/lib/openldap \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppm LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm/ppm.so /usr/lib/openldap \\\n && ln -s /usr/lib/slapd /usr/sbin \\\n && mkdir -p /usr/share/doc/openldap \\\n && mv /etc/openldap/*.default /usr/share/doc/openldap \\\n && rm -rf /etc/openldap/* \\\n && mkdir -p /etc/openldap/sasl2 \\\n && echo \"mech_list: plain external\" > /etc/openldap/sasl2/slapd.conf \\\n && mkdir -p /etc/openldap/schema \\\n && cp -R /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/servers/slapd/schema/*.schema /etc/openldap/schema \\\n && mkdir -p /run/openldap \\\n && chown -R ldap:ldap /run/openldap \\\n && curl -o /usr/sbin/cfssl -SL https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssl \\\n && curl -o /usr/sbin/cfssljson -SL https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssljson \\\n && curl https://codeload.github.com/fusiondirectory/schema2ldif/tar.gz/${SCHEMA2LDIF_VERSION} | tar xvfz - --strip 1 -C /usr \\\n && rm -rf /usr/Changelog \\\n && rm -rf /usr/LICENSE \\\n && mkdir -p /usr/share/dict \\\n && cd /usr/share/dict \\\n && wget https://github.com/cracklib/cracklib/releases/download/v2.9.7/cracklib-words-2.9.7.gz \\\n && create-cracklib-dict -o pw_dict cracklib-words-2.9.7.gz \\\n && rm -rf cracklib-words-2.9.7.gz \\\n && apk del .openldap-build-deps \\\n && rm -rf /tiredofit /var/cache/apk/*\n#  ## Networking\nEXPOSE 80/tcp 389/tcp 636/tcp\n#  ## Add Assets\nCOPY install /\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM tiredofit/alpine:3.8\nLABEL maintainer=\"Dave Conroy <dave@tiredofit.ca>\"\nENV ADMIN_PASS=\"admin\" \\\n    BACKEND=\"mdb\" \\\n    BACKUP_CONFIG_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_DATA_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_TTL=\"15\" \\\n    CONFIG_PASS=\"config\" \\\n    DOMAIN=\"example.org\" \\\n    ENABLE_NGINX=\"false\" \\\n    ENABLE_READONLY_USER=\"false\" \\\n    ENABLE_REPLICATION=\"false\" \\\n    ENABLE_SMTP=\"FALSE\" \\\n    ENABLE_TLS=\"true\" \\\n    LOG_LEVEL=\"256\" \\\n    OPENLDAP_VERSION=\"2.4.47\" \\\n    ORGANIZATION=\"Example Organization\" \\\n    READONLY_USER_PASS=\"readonly\" \\\n    READONLY_USER_USER=\"readonly\" \\\n    REMOVE_CONFIG_AFTER_SETUP=\"false\" \\\n    SCHEMA2LDIF_VERSION=\"1.3\" \\\n    SCHEMA_TYPE=\"nis\" \\\n    SSL_HELPER_PREFIX=\"ldap\" \\\n    TLS_CA_CRT_FILENAME=\"ca.pem\" \\\n    TLS_CIPHER_SUITE=\"ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:-DHE-DSS:-RSA:!aNULL:!MD5:!DSS:!SHA\" \\\n    TLS_CRT_FILENAME=\"cert.pem\" \\\n    TLS_ENFORCE=\"false\" \\\n    TLS_KEY_FILENAME=\"key.pem\" \\\n    TLS_VERIFY_CLIENT=\"try\" \\\n    ZABBIX_HOSTNAME=\"openldap-app\"\nCOPY CHANGELOG.md /tiredofit/\nRUN set -x \\\n && addgroup -g 389 ldap \\\n && adduser -S -D -H -h /var/lib/openldap -s /sbin/nologin -G ldap -u 389 ldap \\\n && apk update \\\n && apk add -t .openldap-build-deps autoconf automake build-base cracklib-dev cyrus-sasl-dev db-dev git groff libressl-dev libtool m4 mosquitto-dev unixodbc-dev util-linux-dev \\\n && apk add -t .openldap-run-deps cyrus-sasl coreutils cracklib libressl libltdl libuuid libintl nginx perl sed sudo unixodbc \\\n && mkdir -p /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && curl -sSL ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-$OPENLDAP_VERSION.tgz | tar xvfz - --strip 1 -C /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && git clone --depth 1 git://git.alpinelinux.org/aports.git /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && mkdir -p contrib/slapd-modules/ppolicy-check-password \\\n && git clone https://github.com/cedric-dufour/ppolicy-check-password /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password \\\n && mkdir -p contrib/slapd-modules/ppm \\\n && git clone https://github.com/ltb-project/ppm /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && git filter-branch --prune-empty --subdirectory-filter main/openldap HEAD \\\n && rm -rf CVE-2017-9287.patch \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && for patch in ./alpine/*.patch; do echo \"** Applying $patch\" ;patch -p1 < $patch; done \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && libtoolize --force \\\n && aclocal \\\n && autoconf \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --libexecdir=/usr/lib --sysconfdir=/etc --mandir=/usr/share/man --localstatedir=/var/run/openldap --enable-slapd --enable-crypt --enable-modules --enable-dynamic --enable-bdb=mod --enable-dnssrv=mod --enable-hdb=mod --enable-ldap=mod --enable-mdb=mod --enable-meta=mod --enable-monitor=yes --enable-null=mod --enable-passwd=mod --enable-spasswd --enable-relay=mod --enable-shell=mod --enable-sock=mod --enable-sql=mod --enable-overlays=mod --with-tls=openssl --with-cyrus-sasl \\\n && make DESTDIR=\"\" install \\\n && make DESTDIR=\"\" prefix=/usr libexec=/usr/lib -C contrib/slapd-modules/mqtt install \\\n && make DESTDIR=\"\" prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/passwd/pbkdf2 install \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppolicy-check-password LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password/check_password.so /usr/lib/openldap \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppm LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm/ppm.so /usr/lib/openldap \\\n && ln -s /usr/lib/slapd /usr/sbin \\\n && mkdir -p /usr/share/doc/openldap \\\n && mv /etc/openldap/*.default /usr/share/doc/openldap \\\n && rm -rf /etc/openldap/* \\\n && mkdir -p /etc/openldap/sasl2 \\\n && echo \"mech_list: plain external\" > /etc/openldap/sasl2/slapd.conf \\\n && mkdir -p /etc/openldap/schema \\\n && cp -R /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/servers/slapd/schema/*.schema /etc/openldap/schema \\\n && mkdir -p /run/openldap \\\n && chown -R ldap:ldap /run/openldap \\\n && curl -o /usr/sbin/cfssl -SL https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssl \\\n && curl -o /usr/sbin/cfssljson -SL https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssljson \\\n && curl https://codeload.github.com/fusiondirectory/schema2ldif/tar.gz/${SCHEMA2LDIF_VERSION} | tar xvfz - --strip 1 -C /usr \\\n && rm -rf /usr/Changelog \\\n && rm -rf /usr/LICENSE \\\n && mkdir -p /usr/share/dict \\\n && cd /usr/share/dict \\\n && wget https://github.com/cracklib/cracklib/releases/download/v2.9.7/cracklib-words-2.9.7.gz \\\n && create-cracklib-dict -o pw_dict cracklib-words-2.9.7.gz \\\n && rm -rf cracklib-words-2.9.7.gz \\\n && apk del .openldap-build-deps \\\n && rm -rf /tiredofit /var/cache/apk/*\n# ## Networking\nEXPOSE 80/tcp 389/tcp 636/tcp\n# ## Add Assets\nADD install /\n","injectedSmells":[],"originalDockerfileHash":"a8f925dfba9dc5267d1d5255993b7012","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tiredofit/alpine:3.8\nLABEL maintainer=\"Dave Conroy <dave@tiredofit.ca>\"\nENV ADMIN_PASS=\"admin\" \\\n    BACKEND=\"mdb\" \\\n    BACKUP_CONFIG_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_DATA_CRON_PERIOD=\"0 4 * * *\" \\\n    BACKUP_TTL=\"15\" \\\n    CONFIG_PASS=\"config\" \\\n    DOMAIN=\"example.org\" \\\n    ENABLE_NGINX=\"false\" \\\n    ENABLE_READONLY_USER=\"false\" \\\n    ENABLE_REPLICATION=\"false\" \\\n    ENABLE_SMTP=\"FALSE\" \\\n    ENABLE_TLS=\"true\" \\\n    LOG_LEVEL=\"256\" \\\n    OPENLDAP_VERSION=\"2.4.47\" \\\n    ORGANIZATION=\"Example Organization\" \\\n    READONLY_USER_PASS=\"readonly\" \\\n    READONLY_USER_USER=\"readonly\" \\\n    REMOVE_CONFIG_AFTER_SETUP=\"false\" \\\n    SCHEMA2LDIF_VERSION=\"1.3\" \\\n    SCHEMA_TYPE=\"nis\" \\\n    SSL_HELPER_PREFIX=\"ldap\" \\\n    TLS_CA_CRT_FILENAME=\"ca.pem\" \\\n    TLS_CIPHER_SUITE=\"ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:-DHE-DSS:-RSA:!aNULL:!MD5:!DSS:!SHA\" \\\n    TLS_CRT_FILENAME=\"cert.pem\" \\\n    TLS_ENFORCE=\"false\" \\\n    TLS_KEY_FILENAME=\"key.pem\" \\\n    TLS_VERIFY_CLIENT=\"try\" \\\n    ZABBIX_HOSTNAME=\"openldap-app\"\nCOPY CHANGELOG.md /tiredofit/\nRUN set -x \\\n && addgroup -g 389 ldap \\\n && adduser -S -D -H -h /var/lib/openldap -s /sbin/nologin -G ldap -u 389 ldap \\\n && apk update \\\n && apk add -t .openldap-build-deps autoconf automake build-base cracklib-dev cyrus-sasl-dev db-dev git groff libressl-dev libtool m4 mosquitto-dev unixodbc-dev util-linux-dev \\\n && apk add -t .openldap-run-deps cyrus-sasl coreutils cracklib libressl libltdl libuuid libintl nginx perl sed sudo unixodbc \\\n && mkdir -p /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && curl -sSL ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-$OPENLDAP_VERSION.tgz | tar xvfz - --strip 1 -C /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && git clone --depth 1 git://git.alpinelinux.org/aports.git /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && mkdir -p contrib/slapd-modules/ppolicy-check-password \\\n && git clone https://github.com/cedric-dufour/ppolicy-check-password /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password \\\n && mkdir -p contrib/slapd-modules/ppm \\\n && git clone https://github.com/ltb-project/ppm /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/alpine \\\n && git filter-branch --prune-empty --subdirectory-filter main/openldap HEAD \\\n && rm -rf CVE-2017-9287.patch \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && for patch in ./alpine/*.patch; do echo \"** Applying $patch\" ;patch -p1 < $patch; done \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && libtoolize --force \\\n && aclocal \\\n && autoconf \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --libexecdir=/usr/lib --sysconfdir=/etc --mandir=/usr/share/man --localstatedir=/var/run/openldap --enable-slapd --enable-crypt --enable-modules --enable-dynamic --enable-bdb=mod --enable-dnssrv=mod --enable-hdb=mod --enable-ldap=mod --enable-mdb=mod --enable-meta=mod --enable-monitor=yes --enable-null=mod --enable-passwd=mod --enable-spasswd --enable-relay=mod --enable-shell=mod --enable-sock=mod --enable-sql=mod --enable-overlays=mod --with-tls=openssl --with-cyrus-sasl \\\n && make DESTDIR=\"\" install \\\n && make DESTDIR=\"\" prefix=/usr libexec=/usr/lib -C contrib/slapd-modules/mqtt install \\\n && make DESTDIR=\"\" prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/passwd/pbkdf2 install \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppolicy-check-password LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppolicy-check-password/check_password.so /usr/lib/openldap \\\n && cd /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/ \\\n && make prefix=/usr libexecdir=/usr/lib -C contrib/slapd-modules/ppm LDAP_INC_PATH=/tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} ` \\\n && cp /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/contrib/slapd-modules/ppm/ppm.so /usr/lib/openldap \\\n && ln -s /usr/lib/slapd /usr/sbin \\\n && mkdir -p /usr/share/doc/openldap \\\n && mv /etc/openldap/*.default /usr/share/doc/openldap \\\n && rm -rf /etc/openldap/* \\\n && mkdir -p /etc/openldap/sasl2 \\\n && echo \"mech_list: plain external\" > /etc/openldap/sasl2/slapd.conf \\\n && mkdir -p /etc/openldap/schema \\\n && cp -R /tiredofit/openldap:`head -n 1 /tiredofit/CHANGELOG.md | awk '{print $2'} `/servers/slapd/schema/*.schema /etc/openldap/schema \\\n && mkdir -p /run/openldap \\\n && chown -R ldap:ldap /run/openldap \\\n && curl -o /usr/sbin/cfssl -SL https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssl \\\n && curl -o /usr/sbin/cfssljson -SL https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 \\\n && chmod 700 /usr/sbin/cfssljson \\\n && curl https://codeload.github.com/fusiondirectory/schema2ldif/tar.gz/${SCHEMA2LDIF_VERSION} | tar xvfz - --strip 1 -C /usr \\\n && rm -rf /usr/Changelog \\\n && rm -rf /usr/LICENSE \\\n && mkdir -p /usr/share/dict \\\n && cd /usr/share/dict \\\n && wget https://github.com/cracklib/cracklib/releases/download/v2.9.7/cracklib-words-2.9.7.gz \\\n && create-cracklib-dict -o pw_dict cracklib-words-2.9.7.gz \\\n && rm -rf cracklib-words-2.9.7.gz \\\n && apk del .openldap-build-deps \\\n && rm -rf /tiredofit /var/cache/apk/*\n#  ## Networking\nEXPOSE 80/tcp 389/tcp 636/tcp\n#  ## Add Assets\nADD install /\n","originalDockerfileUglifiedHash":"f9c10c92d3e5cb51a533c9a06754210d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/056a74b75d680378a02b487b720e4a576747ed77.dockerfile"}