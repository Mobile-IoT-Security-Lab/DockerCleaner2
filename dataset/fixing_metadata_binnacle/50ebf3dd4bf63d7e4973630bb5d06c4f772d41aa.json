{"seed":2524531425,"processedDockerfileHash":"8b177902e6270862113ef429ca05e0f2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:trusty\nMAINTAINER Evan Cordell <cordell.evan@gmail.com>\n#  # Prepare\nRUN apt-get clean all \\\n && : \\\n && apt-get upgrade -y\n#   Build Tools\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends build-essential=11.6ubuntu6 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 libssl-dev=1.0.1f-1ubuntu2.27 libreadline6-dev=6.3-4ubuntu2 libyaml-dev=0.1.4-3ubuntu3.1 pkg-config=0.26-1ubuntu4 software-properties-common=0.92.37.8 -y ) \\\n && apt-add-repository ppa:ubuntu-lxc/lxd-stable \\\n && (apt-get update ;apt-get install --no-install-recommends make=3.81-8.2ubuntu3 wget=1.15-1ubuntu1.14.04.5 tar=1.27.1-1ubuntu0.1 git=1:1.9.1-1ubuntu0.10 curl=7.35.0-1ubuntu2.20 -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  # Install libsodium\nENV LIBSODIUM_VERSION=\"1.0.8\"\nRUN wget https://github.com/jedisct1/libsodium/releases/download/$LIBSODIUM_VERSION/libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && tar xzvf libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && cd libsodium-$LIBSODIUM_VERSION \\\n && ./configure \\\n && make \\\n && make check \\\n && sudo make install \\\n && cd .. \\\n && rm -rf libsodium-$LIBSODIUM_VERSION \\\n && sudo ldconfig\n#   Install Python\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends python3-pip=1.5.4-1ubuntu4 python3-dev=3.4.0-0ubuntu2 python3-software-properties=0.92.37.8 -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install Ruby\nRUN cd /tmp \\\n && wget -q http://cache.ruby-lang.org/pub/ruby/2.1/ruby-2.1.2.tar.gz \\\n && tar xzf ruby-2.1.2.tar.gz \\\n && cd ruby-2.1.2 \\\n && ./configure --enable-shared --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf ruby-2.1.2* \\\n && cd ..\n#   Install Node\nENV NODE_PREFIX=\"/usr/local\"\nENV NODE_PATH=\"$NODE_PREFIX/lib/node_modules\"\nENV NODE_VERSION=\"0.11.14\"\nENV NPM_VERSION=\"2.1.6\"\nRUN wget -q \"http://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C $NODE_PREFIX --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && npm install npm@\"$NPM_VERSION\" -g \\\n && npm cache clear\n#   Install Go\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends golang=2:1.2.1-2ubuntu1 bzr=2.6.0+bzr6593-1ubuntu1.6 -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && mkdir /usr/go\nENV GOROOT=\"/usr/lib/go\"\nENV GOPATH=\"/usr/go\"\n#   Install PHP\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends php5=5.5.9+dfsg-1ubuntu4.29 php5-dev=5.5.9+dfsg-1ubuntu4.29 php-pear=5.5.9+dfsg-1ubuntu4.29 -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install Rust\nENV RUST_VERSION=\"1.12.0\"\nRUN : \\\n && curl -sO https://static.rust-lang.org/dist/rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && tar -xvzf rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && ./rust-$RUST_VERSION-x86_64-unknown-linux-gnu/install.sh \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* rust-$RUST_VERSION-x86_64-unknown-linux-gnu{,.tar.gz}\n#   Install libmacaroons\nRUN wget -O - http://ubuntu.hyperdex.org/hyperdex.gpg.key | apt-key add - \\\n && echo \"deb [arch=amd64] http://ubuntu.hyperdex.org trusty main\" >> /etc/apt/sources.list.d/hyperdex.list \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends python-macaroons -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nWORKDIR /usr/src\n#   Install pymacaroons\nRUN pip3 install pymacaroons pytest pytest-html\n#   Install ruby-macaroons\nRUN gem install macaroons --version 0.6.1\n#   Install macaroons.js\nRUN npm install macaroons.js@0.3.9 -g\n#   Install go-macaroons\nRUN go get launchpad.net/gorun \\\n && go get gopkg.in/macaroon.v1 \\\n && go get gopkg.in/macaroon-bakery.v1/bakery\n#   Install php-macaroons\nCOPY implementations/php-macaroons /usr/src/implementations/php-macaroons\nRUN pecl install libsodium-1.0.6 \\\n && echo \"extension=libsodium.so\" >> /etc/php5/cli/php.ini \\\n && curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/bin/composer \\\n && cd implementations/php-macaroons \\\n && composer install\n#   Install rust-macaroons\nRUN mkdir /usr/rust \\\n && cd /usr/rust \\\n && git clone https://github.com/cryptosphere/rust-macaroons.git /usr/rust/rust-macaroons \\\n && cd rust-macaroons \\\n && cargo build\n#   Add source\nCOPY . /usr/src\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:trusty\nMAINTAINER Evan Cordell <cordell.evan@gmail.com>\n# # Prepare\nRUN apt-get clean all \\\n && apt-get update \\\n && apt-get upgrade -y\n#  Build Tools\nRUN apt-get update \\\n && apt-get install build-essential zlib1g-dev libssl-dev libreadline6-dev libyaml-dev pkg-config software-properties-common -y \\\n && apt-add-repository ppa:ubuntu-lxc/lxd-stable \\\n && apt-get install make wget tar git curl -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n# # Install libsodium\nENV LIBSODIUM_VERSION=\"1.0.8\"\nRUN wget https://github.com/jedisct1/libsodium/releases/download/$LIBSODIUM_VERSION/libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && tar xzvf libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && cd libsodium-$LIBSODIUM_VERSION \\\n && ./configure \\\n && make \\\n && make check \\\n && sudo make install \\\n && cd .. \\\n && rm -rf libsodium-$LIBSODIUM_VERSION \\\n && sudo ldconfig\n#  Install Python\nRUN apt-get update \\\n && apt-get install python3-pip python3-dev python3-software-properties -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Install Ruby\nRUN cd /tmp \\\n && wget -q http://cache.ruby-lang.org/pub/ruby/2.1/ruby-2.1.2.tar.gz \\\n && tar xzf ruby-2.1.2.tar.gz \\\n && cd ruby-2.1.2 \\\n && ./configure --enable-shared --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf ruby-2.1.2* \\\n && cd ..\n#  Install Node\nENV NODE_PREFIX=\"/usr/local\"\nENV NODE_PATH=\"$NODE_PREFIX/lib/node_modules\"\nENV NODE_VERSION=\"0.11.14\"\nENV NPM_VERSION=\"2.1.6\"\nRUN wget -q \"http://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C $NODE_PREFIX --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && npm install npm@\"$NPM_VERSION\" -g \\\n && npm cache clear\n#  Install Go\nRUN apt-get update \\\n && apt-get install golang bzr -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && mkdir /usr/go\nENV GOROOT=\"/usr/lib/go\"\nENV GOPATH=\"/usr/go\"\n#  Install PHP\nRUN apt-get update \\\n && apt-get install php5 php5-dev php-pear -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Install Rust\nENV RUST_VERSION=\"1.12.0\"\nRUN apt-get update \\\n && curl -sO https://static.rust-lang.org/dist/rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && tar -xvzf rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && ./rust-$RUST_VERSION-x86_64-unknown-linux-gnu/install.sh \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* rust-$RUST_VERSION-x86_64-unknown-linux-gnu{,.tar.gz}\n#  Install libmacaroons\nRUN wget -O - http://ubuntu.hyperdex.org/hyperdex.gpg.key | apt-key add - \\\n && echo \"deb [arch=amd64] http://ubuntu.hyperdex.org trusty main\" >> /etc/apt/sources.list.d/hyperdex.list \\\n && apt-get update \\\n && apt-get install python-macaroons -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nWORKDIR /usr/src\n#  Install pymacaroons\nRUN pip3 install pymacaroons pytest pytest-html\n#  Install ruby-macaroons\nRUN gem install macaroons --version 0.6.1\n#  Install macaroons.js\nRUN npm install macaroons.js -g\n#  Install go-macaroons\nRUN go get launchpad.net/gorun \\\n && go get gopkg.in/macaroon.v1 \\\n && go get gopkg.in/macaroon-bakery.v1/bakery\n#  Install php-macaroons\nADD implementations/php-macaroons /usr/src/implementations/php-macaroons\nRUN pecl install libsodium-1.0.6 \\\n && echo \"extension=libsodium.so\" >> /etc/php5/cli/php.ini \\\n && curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/bin/composer \\\n && cd implementations/php-macaroons \\\n && composer install\n#  Install rust-macaroons\nRUN mkdir /usr/rust \\\n && cd /usr/rust \\\n && git clone https://github.com/cryptosphere/rust-macaroons.git /usr/rust/rust-macaroons \\\n && cd rust-macaroons \\\n && cargo build\n#  Add source\nADD . /usr/src\n","injectedSmells":[],"originalDockerfileHash":"4f7eed2372e8596f222ff7fe96794ae1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:trusty\nMAINTAINER Evan Cordell <cordell.evan@gmail.com>\n#  # Prepare\nRUN apt-get clean all \\\n && apt-get update \\\n && apt-get upgrade -y\n#   Build Tools\nRUN apt-get update \\\n && apt-get install build-essential zlib1g-dev libssl-dev libreadline6-dev libyaml-dev pkg-config software-properties-common -y \\\n && apt-add-repository ppa:ubuntu-lxc/lxd-stable \\\n && apt-get install make wget tar git curl -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  # Install libsodium\nENV LIBSODIUM_VERSION=\"1.0.8\"\nRUN wget https://github.com/jedisct1/libsodium/releases/download/$LIBSODIUM_VERSION/libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && tar xzvf libsodium-$LIBSODIUM_VERSION.tar.gz \\\n && cd libsodium-$LIBSODIUM_VERSION \\\n && ./configure \\\n && make \\\n && make check \\\n && sudo make install \\\n && cd .. \\\n && rm -rf libsodium-$LIBSODIUM_VERSION \\\n && sudo ldconfig\n#   Install Python\nRUN apt-get update \\\n && apt-get install python3-pip python3-dev python3-software-properties -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install Ruby\nRUN cd /tmp \\\n && wget -q http://cache.ruby-lang.org/pub/ruby/2.1/ruby-2.1.2.tar.gz \\\n && tar xzf ruby-2.1.2.tar.gz \\\n && cd ruby-2.1.2 \\\n && ./configure --enable-shared --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf ruby-2.1.2* \\\n && cd ..\n#   Install Node\nENV NODE_PREFIX=\"/usr/local\"\nENV NODE_PATH=\"$NODE_PREFIX/lib/node_modules\"\nENV NODE_VERSION=\"0.11.14\"\nENV NPM_VERSION=\"2.1.6\"\nRUN wget -q \"http://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C $NODE_PREFIX --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && npm install npm@\"$NPM_VERSION\" -g \\\n && npm cache clear\n#   Install Go\nRUN apt-get update \\\n && apt-get install golang bzr -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && mkdir /usr/go\nENV GOROOT=\"/usr/lib/go\"\nENV GOPATH=\"/usr/go\"\n#   Install PHP\nRUN apt-get update \\\n && apt-get install php5 php5-dev php-pear -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install Rust\nENV RUST_VERSION=\"1.12.0\"\nRUN apt-get update \\\n && curl -sO https://static.rust-lang.org/dist/rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && tar -xvzf rust-$RUST_VERSION-x86_64-unknown-linux-gnu.tar.gz \\\n && ./rust-$RUST_VERSION-x86_64-unknown-linux-gnu/install.sh \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* rust-$RUST_VERSION-x86_64-unknown-linux-gnu{,.tar.gz}\n#   Install libmacaroons\nRUN wget -O - http://ubuntu.hyperdex.org/hyperdex.gpg.key | apt-key add - \\\n && echo \"deb [arch=amd64] http://ubuntu.hyperdex.org trusty main\" >> /etc/apt/sources.list.d/hyperdex.list \\\n && apt-get update \\\n && apt-get install python-macaroons -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nWORKDIR /usr/src\n#   Install pymacaroons\nRUN pip3 install pymacaroons pytest pytest-html\n#   Install ruby-macaroons\nRUN gem install macaroons --version 0.6.1\n#   Install macaroons.js\nRUN npm install macaroons.js -g\n#   Install go-macaroons\nRUN go get launchpad.net/gorun \\\n && go get gopkg.in/macaroon.v1 \\\n && go get gopkg.in/macaroon-bakery.v1/bakery\n#   Install php-macaroons\nADD implementations/php-macaroons /usr/src/implementations/php-macaroons\nRUN pecl install libsodium-1.0.6 \\\n && echo \"extension=libsodium.so\" >> /etc/php5/cli/php.ini \\\n && curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/bin/composer \\\n && cd implementations/php-macaroons \\\n && composer install\n#   Install rust-macaroons\nRUN mkdir /usr/rust \\\n && cd /usr/rust \\\n && git clone https://github.com/cryptosphere/rust-macaroons.git /usr/rust/rust-macaroons \\\n && cd rust-macaroons \\\n && cargo build\n#   Add source\nADD . /usr/src\n","originalDockerfileUglifiedHash":"aca7f974e139aa2cd901bb9b797678aa","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/50ebf3dd4bf63d7e4973630bb5d06c4f772d41aa.dockerfile"}