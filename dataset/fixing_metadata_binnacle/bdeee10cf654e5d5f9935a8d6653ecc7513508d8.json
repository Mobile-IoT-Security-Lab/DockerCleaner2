{"seed":1319612858,"processedDockerfileHash":"65c2b87ba811b5a89e7c0e47b1e671fb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM archlinux/base\nRUN printf \"\\n[archlinuxfr]\\nSigLevel = Never\\nServer = http://repo.archlinux.fr/$arch\\n\" >> /etc/pacman.conf \\\n && sed -i.bak \"s/SigLevel = Required DatabaseOptional/SigLevel = Never/g\" /etc/pacman.conf\nRUN pacman -Syy --noconfirm --noprogressbar --needed base-devel yaourt openssh sudo zsh zsh-completions wget curl git hub tmux htop unzip bc which man unrar unzip gzip vim docker docker-compose docker-machine go mongodb mongodb-tools php php-intl php-gd php-sqlite php-pgsql php-mongodb php-redis composer python python-pip npm\n#   Setup user mykiwi\nRUN useradd mykiwi --shell /bin/zsh \\\n && echo '%mykiwi ALL= NOPASSWD: ALL' >> /etc/sudoers \\\n && mkdir -p /home/mykiwi/.ssh/ \\\n && mkdir -p /home/mykiwi/.php/ini \\\n && touch /home/mykiwi/.z \\\n && wget https://github.com/mykiwi.keys -O /home/mykiwi/.ssh/authorized_keys \\\n && chown -R mykiwi:mykiwi /home/mykiwi \\\n && chmod 700 /home/mykiwi/.ssh \\\n && chmod 600 /home/mykiwi/.ssh/authorized_keys \\\n && sudo -u mykiwi zsh -c ' cd /home/mykiwi \\\n && git clone --recursive https://github.com/mykiwi/dotfiles.git .dotfiles \\\n && cd .dotfiles \\\n && ./install.sh \\\n && source ~/.zshrc '\nRUN sudo -u mykiwi sh -c ' yaourt -Sy --noconfirm --noprogressbar blackfire-cli blackfire-agent php-blackfire yarn '\n#   PHP\nRUN curl -o /usr/local/bin/melody -LsS http://get.sensiolabs.org/melody.phar \\\n && curl -o /usr/local/bin/phpunit -LsS https://phar.phpunit.de/phpunit.phar \\\n && curl -o /usr/local/bin/php-cs-fixer -LsS http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar \\\n && curl -o /usr/local/bin/psysh -LsS https://git.io/psysh \\\n && chmod a+x /usr/local/bin/* \\\n && rm -rf /etc/php/conf.d \\\n && ln -s /home/mykiwi/.php/ini /etc/php/conf.d \\\n && sudo -u mykiwi sh -c ' composer global require --optimize-autoloader symfony/flex pyrech/composer-changelogs \\\n && cd /home/mykiwi/.php \\\n && composer init --no-interaction \\\n && composer require symfony/var-dumper \\\n && composer dump-autoload --optimize --no-dev --classmap-authoritative \\\n && echo \"extension=iconv\" > ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=blackfire.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_mysql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_pgsql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_sqlite\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=mongodb.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"zend_extension=opcache.so\" > ${HOME}/.php/ini/20-opcache.ini \\\n && echo \"auto_prepend_file = ${HOME}/.php/vendor/autoload.php\" > ${HOME}/.php/ini/30-symfony-dump.ini '\nRUN mkdir /var/run/sshd \\\n && ssh-keygen -A \\\n && echo \"Port 20000\" >> /etc/ssh/sshd_config\nEXPOSE 20000/tcp\nCOPY ./entrypoint.sh /entrypoint\nENTRYPOINT [\"/entrypoint\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM archlinux/base\nRUN printf \"\\n[archlinuxfr]\\nSigLevel = Never\\nServer = http://repo.archlinux.fr/$arch\\n\" >> /etc/pacman.conf \\\n && sed -i.bak \"s/SigLevel = Required DatabaseOptional/SigLevel = Never/g\" /etc/pacman.conf\nRUN pacman -Syy --noconfirm --noprogressbar --needed base-devel yaourt openssh sudo zsh zsh-completions wget curl git hub tmux htop unzip bc which man unrar unzip gzip vim docker docker-compose docker-machine go mongodb mongodb-tools php php-intl php-gd php-sqlite php-pgsql php-mongodb php-redis composer python python-pip npm\n#  Setup user mykiwi\nRUN useradd mykiwi --shell /bin/zsh \\\n && echo '%mykiwi ALL= NOPASSWD: ALL' >> /etc/sudoers \\\n && mkdir -p /home/mykiwi/.ssh/ \\\n && mkdir -p /home/mykiwi/.php/ini \\\n && touch /home/mykiwi/.z \\\n && wget https://github.com/mykiwi.keys -O /home/mykiwi/.ssh/authorized_keys \\\n && chown -R mykiwi:mykiwi /home/mykiwi \\\n && chmod 700 /home/mykiwi/.ssh \\\n && chmod 600 /home/mykiwi/.ssh/authorized_keys \\\n && sudo -u mykiwi zsh -c ' cd /home/mykiwi \\\n && git clone --recursive https://github.com/mykiwi/dotfiles.git .dotfiles \\\n && cd .dotfiles \\\n && ./install.sh \\\n && source ~/.zshrc '\nRUN sudo -u mykiwi sh -c ' yaourt -Sy --noconfirm --noprogressbar blackfire-cli blackfire-agent php-blackfire yarn '\n#  PHP\nRUN curl -o /usr/local/bin/melody -LsS http://get.sensiolabs.org/melody.phar \\\n && curl -o /usr/local/bin/phpunit -LsS https://phar.phpunit.de/phpunit.phar \\\n && curl -o /usr/local/bin/php-cs-fixer -LsS http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar \\\n && curl -o /usr/local/bin/psysh -LsS https://git.io/psysh \\\n && chmod a+x /usr/local/bin/* \\\n && rm -rf /etc/php/conf.d \\\n && ln -s /home/mykiwi/.php/ini /etc/php/conf.d \\\n && sudo -u mykiwi sh -c ' composer global require --optimize-autoloader symfony/flex pyrech/composer-changelogs \\\n && cd /home/mykiwi/.php \\\n && composer init --no-interaction \\\n && composer require symfony/var-dumper \\\n && composer dump-autoload --optimize --no-dev --classmap-authoritative \\\n && echo \"extension=iconv\" > ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=blackfire.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_mysql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_pgsql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_sqlite\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=mongodb.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"zend_extension=opcache.so\" > ${HOME}/.php/ini/20-opcache.ini \\\n && echo \"auto_prepend_file = ${HOME}/.php/vendor/autoload.php\" > ${HOME}/.php/ini/30-symfony-dump.ini '\nRUN mkdir /var/run/sshd \\\n && ssh-keygen -A \\\n && echo \"Port 20000\" >> /etc/ssh/sshd_config\nEXPOSE 20000/tcp\nADD ./entrypoint.sh /entrypoint\nENTRYPOINT [\"/entrypoint\"]\n","injectedSmells":[],"originalDockerfileHash":"380640440508ab5cc559572a4ea7b1ba","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM archlinux/base\nRUN printf \"\\n[archlinuxfr]\\nSigLevel = Never\\nServer = http://repo.archlinux.fr/$arch\\n\" >> /etc/pacman.conf \\\n && sed -i.bak \"s/SigLevel = Required DatabaseOptional/SigLevel = Never/g\" /etc/pacman.conf\nRUN pacman -Syy --noconfirm --noprogressbar --needed base-devel yaourt openssh sudo zsh zsh-completions wget curl git hub tmux htop unzip bc which man unrar unzip gzip vim docker docker-compose docker-machine go mongodb mongodb-tools php php-intl php-gd php-sqlite php-pgsql php-mongodb php-redis composer python python-pip npm\n#   Setup user mykiwi\nRUN useradd mykiwi --shell /bin/zsh \\\n && echo '%mykiwi ALL= NOPASSWD: ALL' >> /etc/sudoers \\\n && mkdir -p /home/mykiwi/.ssh/ \\\n && mkdir -p /home/mykiwi/.php/ini \\\n && touch /home/mykiwi/.z \\\n && wget https://github.com/mykiwi.keys -O /home/mykiwi/.ssh/authorized_keys \\\n && chown -R mykiwi:mykiwi /home/mykiwi \\\n && chmod 700 /home/mykiwi/.ssh \\\n && chmod 600 /home/mykiwi/.ssh/authorized_keys \\\n && sudo -u mykiwi zsh -c ' cd /home/mykiwi \\\n && git clone --recursive https://github.com/mykiwi/dotfiles.git .dotfiles \\\n && cd .dotfiles \\\n && ./install.sh \\\n && source ~/.zshrc '\nRUN sudo -u mykiwi sh -c ' yaourt -Sy --noconfirm --noprogressbar blackfire-cli blackfire-agent php-blackfire yarn '\n#   PHP\nRUN curl -o /usr/local/bin/melody -LsS http://get.sensiolabs.org/melody.phar \\\n && curl -o /usr/local/bin/phpunit -LsS https://phar.phpunit.de/phpunit.phar \\\n && curl -o /usr/local/bin/php-cs-fixer -LsS http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar \\\n && curl -o /usr/local/bin/psysh -LsS https://git.io/psysh \\\n && chmod a+x /usr/local/bin/* \\\n && rm -rf /etc/php/conf.d \\\n && ln -s /home/mykiwi/.php/ini /etc/php/conf.d \\\n && sudo -u mykiwi sh -c ' composer global require --optimize-autoloader symfony/flex pyrech/composer-changelogs \\\n && cd /home/mykiwi/.php \\\n && composer init --no-interaction \\\n && composer require symfony/var-dumper \\\n && composer dump-autoload --optimize --no-dev --classmap-authoritative \\\n && echo \"extension=iconv\" > ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=blackfire.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_mysql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_pgsql\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=pdo_sqlite\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"extension=mongodb.so\" >> ${HOME}/.php/ini/10-extensions.ini \\\n && echo \"zend_extension=opcache.so\" > ${HOME}/.php/ini/20-opcache.ini \\\n && echo \"auto_prepend_file = ${HOME}/.php/vendor/autoload.php\" > ${HOME}/.php/ini/30-symfony-dump.ini '\nRUN mkdir /var/run/sshd \\\n && ssh-keygen -A \\\n && echo \"Port 20000\" >> /etc/ssh/sshd_config\nEXPOSE 20000/tcp\nADD ./entrypoint.sh /entrypoint\nENTRYPOINT [\"/entrypoint\"]\n","originalDockerfileUglifiedHash":"a4875e735e201dc9822689a6913bf3cc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/bdeee10cf654e5d5f9935a8d6653ecc7513508d8.dockerfile"}