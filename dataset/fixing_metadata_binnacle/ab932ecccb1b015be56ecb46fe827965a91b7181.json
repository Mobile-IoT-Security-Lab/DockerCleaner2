{"seed":1149555336,"processedDockerfileHash":"ff04d9269aced3098be6d9afc9ac9077","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM drupalci/base\nMAINTAINER drupalci\n#  #\n#   Base\n#  #\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/root\"\n#   Saves us from stale repository issues.\nRUN apt-get clean \\\n && :\n#   Build packages.\n#   Make the PHP compiles go faster.\n#   re2c and bison are needed for compiling php7\n#   apache2-dev brings apxs2 into the game which is neede to compile php\nRUN (apt-get update ;apt-get install --no-install-recommends bison=2:3.8.2+dfsg-1build1 ccache=4.7.4-1 curl=7.88.1-7ubuntu1 freetds-dev=1.3.17+ds-2 git=1:2.39.2-1ubuntu1 htop=3.2.2-1 libaspell-dev=0.60.8-4build1 libbz2-dev=1.0.8-5build1 libc-client-dev libcurl3-dev libcurl4-openssl-dev=7.88.1-7ubuntu1 libdb5.1-dev libfreetype6-dev=2.12.1+dfsg-4 libfreetype6-dev=2.12.1+dfsg-4 libgmp3-dev=2:6.2.1+dfsg1-1.1ubuntu1 libicu-dev=72.1-3ubuntu1 libjpeg-dev=8c-2ubuntu11 libjpeg-dev=8c-2ubuntu11 libldap2-dev=2.6.3+dfsg-1~exp1ubuntu2 libldap2-dev=2.6.3+dfsg-1~exp1ubuntu2 libmcrypt-dev=2.5.8-7 libmhash-dev=0.9.9.9-9build2 libmysqlclient-dev=8.0.32-0ubuntu4 libmysqlclient15-dev libpcre3-dev=2:8.39-15 libpng-dev=1.6.39-2 libpng-dev=1.6.39-2 libpq-dev=15.2-1 libreadline6-dev librecode-dev=3.6-25 libsnmp-dev=5.9.3+dfsg-2ubuntu2 libsqlite-dev libt1-dev libt1-dev libtidy-dev=2:5.6.0-11build2 libxml2-dev=2.9.14+dfsg-1.1build2 libxml2-dev=2.9.14+dfsg-1.1build2 libssl-dev=3.0.8-1ubuntu1 libxpm-dev=1:3.5.12-1.1 libXpm-dev libxslt-dev libxslt-dev libz-dev make=4.3-4.1build1 mc=3:4.8.29-2 mysql-client=8.0.32-0ubuntu4 ncurses-dev php5-dev re2c=3.0-2 sudo=1.9.13p1-1ubuntu2 unixODBC-dev unzip=6.0-27ubuntu1 supervisor=4.2.1-1ubuntu1 sqlite3=3.40.1-1 -y )\nRUN apt-get clean \\\n && apt-get autoremove -y\n#  #\n#   PHPENV.\n#  #\nRUN git clone --depth 1 https://github.com/CHH/phpenv.git /tmp/phpenv\nRUN /tmp/phpenv/bin/phpenv-install.sh\nRUN scp /tmp/phpenv/extensions/* /root/.phpenv/libexec/\nRUN echo 'eval \"$(phpenv init -)\"' >> /root/.bashrc\nENV PATH=\"/root/.phpenv/shims:/root/.phpenv/bin:$PATH\"\nRUN git clone --depth 1 https://github.com/CHH/php-build.git /root/.phpenv/plugins/php-build\n#   TODO: Make sure we can read phpenv in a better way\nRUN chmod 755 /root/\n#   Small hack for running the php compilation with more than one cpu core\n#  RUN mv /usr/bin/make /usr/bin/make-system\n#  RUN echo \"/usr/bin/make-system -j8 -l8\" > /usr/bin/make\n#  RUN chmod +x /usr/bin/make\n#  #\n#   Composer.\n#  #\nRUN bash -c \"wget http://getcomposer.org/composer.phar \\\n && chmod 775 composer.phar \\\n && sudo mv composer.phar /usr/local/bin/composer\"\n#   Drush and dependencies.\nRUN HOME=/ /usr/local/bin/composer global require drush/drush:dev-master\nRUN /.composer/vendor/drush/drush/drush --version\n#   supervisor\nCOPY ./conf/supervisor/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#   Scripts.\nCOPY ./conf/scripts/start.sh /start.sh\nCOPY ./conf/mongodb.settings.php /mongodb.settings.php\nCOPY ./conf/scripts/foreground.sh /etc/apache2/foreground.sh\n#   Make start.sh executable.\nRUN chmod 755 /start.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM drupalci/base\nMAINTAINER drupalci\n# #\n#  Base\n# #\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/root\"\n#  Saves us from stale repository issues.\nRUN apt-get clean \\\n && apt-get update\n#  Build packages.\n#  Make the PHP compiles go faster.\n#  re2c and bison are needed for compiling php7\n#  apache2-dev brings apxs2 into the game which is neede to compile php\nRUN apt-get install bison ccache curl freetds-dev git htop libaspell-dev libbz2-dev libc-client-dev libcurl3-dev libcurl4-openssl-dev libdb5.1-dev libfreetype6-dev libfreetype6-dev libgmp3-dev libicu-dev libjpeg-dev libjpeg-dev libldap2-dev libldap2-dev libmcrypt-dev libmhash-dev libmysqlclient-dev libmysqlclient15-dev libpcre3-dev libpng-dev libpng-dev libpq-dev libreadline6-dev librecode-dev libsnmp-dev libsqlite-dev libt1-dev libt1-dev libtidy-dev libxml2-dev libxml2-dev libssl-dev libxpm-dev libXpm-dev libxslt-dev libxslt-dev libz-dev make mc mysql-client ncurses-dev php5-dev re2c sudo unixODBC-dev unzip supervisor sqlite3 -y\nRUN apt-get clean \\\n && apt-get autoremove -y\n# #\n#  PHPENV.\n# #\nRUN git clone --depth 1 https://github.com/CHH/phpenv.git /tmp/phpenv\nRUN /tmp/phpenv/bin/phpenv-install.sh\nRUN scp /tmp/phpenv/extensions/* /root/.phpenv/libexec/\nRUN echo 'eval \"$(phpenv init -)\"' >> /root/.bashrc\nENV PATH=\"/root/.phpenv/shims:/root/.phpenv/bin:$PATH\"\nRUN git clone --depth 1 https://github.com/CHH/php-build.git /root/.phpenv/plugins/php-build\n#  TODO: Make sure we can read phpenv in a better way\nRUN chmod 755 /root/\n#  Small hack for running the php compilation with more than one cpu core\n# RUN mv /usr/bin/make /usr/bin/make-system\n# RUN echo \"/usr/bin/make-system -j8 -l8\" > /usr/bin/make\n# RUN chmod +x /usr/bin/make\n# #\n#  Composer.\n# #\nRUN bash -c \"wget http://getcomposer.org/composer.phar \\\n && chmod 775 composer.phar \\\n && sudo mv composer.phar /usr/local/bin/composer\"\n#  Drush and dependencies.\nRUN HOME=/ /usr/local/bin/composer global require drush/drush:dev-master\nRUN /.composer/vendor/drush/drush/drush --version\n#  supervisor\nCOPY ./conf/supervisor/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#  Scripts.\nCOPY ./conf/scripts/start.sh /start.sh\nCOPY ./conf/mongodb.settings.php /mongodb.settings.php\nCOPY ./conf/scripts/foreground.sh /etc/apache2/foreground.sh\n#  Make start.sh executable.\nRUN chmod 755 /start.sh\n","injectedSmells":[],"originalDockerfileHash":"3838c34206655fbf58402e1d4484d288","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM drupalci/base\nMAINTAINER drupalci\n#  #\n#   Base\n#  #\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV HOME=\"/root\"\n#   Saves us from stale repository issues.\nRUN apt-get clean \\\n && apt-get update\n#   Build packages.\n#   Make the PHP compiles go faster.\n#   re2c and bison are needed for compiling php7\n#   apache2-dev brings apxs2 into the game which is neede to compile php\nRUN apt-get install bison ccache curl freetds-dev git htop libaspell-dev libbz2-dev libc-client-dev libcurl3-dev libcurl4-openssl-dev libdb5.1-dev libfreetype6-dev libfreetype6-dev libgmp3-dev libicu-dev libjpeg-dev libjpeg-dev libldap2-dev libldap2-dev libmcrypt-dev libmhash-dev libmysqlclient-dev libmysqlclient15-dev libpcre3-dev libpng-dev libpng-dev libpq-dev libreadline6-dev librecode-dev libsnmp-dev libsqlite-dev libt1-dev libt1-dev libtidy-dev libxml2-dev libxml2-dev libssl-dev libxpm-dev libXpm-dev libxslt-dev libxslt-dev libz-dev make mc mysql-client ncurses-dev php5-dev re2c sudo unixODBC-dev unzip supervisor sqlite3 -y\nRUN apt-get clean \\\n && apt-get autoremove -y\n#  #\n#   PHPENV.\n#  #\nRUN git clone --depth 1 https://github.com/CHH/phpenv.git /tmp/phpenv\nRUN /tmp/phpenv/bin/phpenv-install.sh\nRUN scp /tmp/phpenv/extensions/* /root/.phpenv/libexec/\nRUN echo 'eval \"$(phpenv init -)\"' >> /root/.bashrc\nENV PATH=\"/root/.phpenv/shims:/root/.phpenv/bin:$PATH\"\nRUN git clone --depth 1 https://github.com/CHH/php-build.git /root/.phpenv/plugins/php-build\n#   TODO: Make sure we can read phpenv in a better way\nRUN chmod 755 /root/\n#   Small hack for running the php compilation with more than one cpu core\n#  RUN mv /usr/bin/make /usr/bin/make-system\n#  RUN echo \"/usr/bin/make-system -j8 -l8\" > /usr/bin/make\n#  RUN chmod +x /usr/bin/make\n#  #\n#   Composer.\n#  #\nRUN bash -c \"wget http://getcomposer.org/composer.phar \\\n && chmod 775 composer.phar \\\n && sudo mv composer.phar /usr/local/bin/composer\"\n#   Drush and dependencies.\nRUN HOME=/ /usr/local/bin/composer global require drush/drush:dev-master\nRUN /.composer/vendor/drush/drush/drush --version\n#   supervisor\nCOPY ./conf/supervisor/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#   Scripts.\nCOPY ./conf/scripts/start.sh /start.sh\nCOPY ./conf/mongodb.settings.php /mongodb.settings.php\nCOPY ./conf/scripts/foreground.sh /etc/apache2/foreground.sh\n#   Make start.sh executable.\nRUN chmod 755 /start.sh\n","originalDockerfileUglifiedHash":"1ce964323670b30956d51ec83f88b0a4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ab932ecccb1b015be56ecb46fe827965a91b7181.dockerfile"}