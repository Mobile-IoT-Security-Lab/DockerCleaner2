{"seed":2625912647,"processedDockerfileHash":"4f19b4fec5fe11f6a87074070b2421fa","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Builds OpenCV3 environment\n#   If building on OSX or Windows you want to add at least 4 cores to the VirtualBox \n#   Boot2Docker machine to build OpenCV3\n#\nFROM debian:jessie\nMAINTAINER Willem Prins <willem.prins@admobilize.com>\nENV OPENCV_VERSION=\"3.1.0\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential cmake ccache curl gfortran git libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev libavcodec-dev libavformat-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libgtk2.0-dev libswscale-dev libv4l-dev libatlas-base-dev libfreetype6-dev libxvidcore-dev libx264-dev libtbb-dev libavutil-dev libavdevice-dev libavfilter-dev libavresample-dev libpostproc-dev libopenexr-dev libssl-dev libcurl4-openssl-dev libpthread-stubs0-dev pkg-config python-dev vim yasm -yq \\\n && apt-get clean \\\n && rm -rf /var/tmp/* /var/lib/apt/lists/* /tmp/*\n#   ---------------------------------------Node JS ---------------------------------------------\nRUN set -ex \\\n && for key in 9554F04D7259F04124DE6B476D5A82AC7E37093B 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 0034A06D9D9B0064CE8ADF6BF1747F4AD2306D93 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nENV NODE_VERSION=\"5.3.0\"\nRUN curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --verify SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.gz$\" SHASUMS256.txt.asc | sha256sum -c - \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C /usr/local --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" SHASUMS256.txt.asc\nRUN npm install node-gyp@9.3.1 -g\n#   ------------------------------------- OpenCV ----------------------------------------\nRUN mkdir -p /opt/src/opencv-${OPENCV_VERSION}/build \\\n && curl -sLo /opt/src/opencv3.tar.gz https://github.com/Itseez/opencv/archive/${OPENCV_VERSION}.tar.gz \\\n && tar -xzvf /opt/src/opencv3.tar.gz -C /opt/src \\\n && cd /opt/src/opencv-${OPENCV_VERSION}/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_IPP=OFF -D WITH_OPENMP=ON -D WITH_GSTREAMER=ON .. \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /opt/src\n#   ----------------------------------- nlohmann/json ---------------------------------------\nRUN mkdir -p /opt/src/json/build \\\n && curl -Lo /opt/src/json.tar.gz https://github.com/nlohmann/json/tarball/master \\\n && tar -xzvf /opt/src/json.tar.gz -C /opt/src/json --strip-components=1 \\\n && mv /opt/src/json/src/json.hpp /usr/include \\\n && rm -rf /opt/sr\n#  ---------------------------------- Gesture ---------------------------------------\nRUN git clone https://github.com/matrix-io/matrix-gesture-cpp-sdk.git /root/gesture-cpp-sdk \\\n && git clone https://github.com/matrix-io/matrix-gesture-node-sdk.git /root/gesture-node-sdk\nRUN cd /root/gesture-node-sdk \\\n && npm install \\\n && npm run root-setup\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  Builds OpenCV3 environment\n#  If building on OSX or Windows you want to add at least 4 cores to the VirtualBox \n#  Boot2Docker machine to build OpenCV3\n#\nFROM debian:jessie\nMAINTAINER Willem Prins <willem.prins@admobilize.com>\nENV OPENCV_VERSION=\"3.1.0\"\nRUN apt-get update \\\n && apt-get install build-essential cmake ccache curl gfortran git libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev libavcodec-dev libavformat-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libgtk2.0-dev libswscale-dev libv4l-dev libatlas-base-dev libfreetype6-dev libxvidcore-dev libx264-dev libtbb-dev libavutil-dev libavdevice-dev libavfilter-dev libavresample-dev libpostproc-dev libopenexr-dev libssl-dev libcurl4-openssl-dev libpthread-stubs0-dev pkg-config python-dev vim yasm -yq \\\n && apt-get clean \\\n && rm -rf /var/tmp/* /var/lib/apt/lists/* /tmp/*\n#  ---------------------------------------Node JS ---------------------------------------------\nRUN set -ex \\\n && for key in 9554F04D7259F04124DE6B476D5A82AC7E37093B 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 0034A06D9D9B0064CE8ADF6BF1747F4AD2306D93 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nENV NODE_VERSION=\"5.3.0\"\nRUN curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --verify SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.gz$\" SHASUMS256.txt.asc | sha256sum -c - \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C /usr/local --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" SHASUMS256.txt.asc\nRUN npm install node-gyp -g\n#  ------------------------------------- OpenCV ----------------------------------------\nRUN mkdir -p /opt/src/opencv-${OPENCV_VERSION}/build \\\n && curl -sLo /opt/src/opencv3.tar.gz https://github.com/Itseez/opencv/archive/${OPENCV_VERSION}.tar.gz \\\n && tar -xzvf /opt/src/opencv3.tar.gz -C /opt/src \\\n && cd /opt/src/opencv-${OPENCV_VERSION}/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_IPP=OFF -D WITH_OPENMP=ON -D WITH_GSTREAMER=ON .. \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /opt/src\n#  ----------------------------------- nlohmann/json ---------------------------------------\nRUN mkdir -p /opt/src/json/build \\\n && curl -Lo /opt/src/json.tar.gz https://github.com/nlohmann/json/tarball/master \\\n && tar -xzvf /opt/src/json.tar.gz -C /opt/src/json --strip-components=1 \\\n && mv /opt/src/json/src/json.hpp /usr/include \\\n && rm -rf /opt/sr\n# ---------------------------------- Gesture ---------------------------------------\nRUN git clone https://github.com/matrix-io/matrix-gesture-cpp-sdk.git /root/gesture-cpp-sdk \\\n && git clone https://github.com/matrix-io/matrix-gesture-node-sdk.git /root/gesture-node-sdk\nRUN cd /root/gesture-node-sdk \\\n && npm install \\\n && npm run root-setup\n","injectedSmells":[],"originalDockerfileHash":"77406c422ddda4367237937d9c843f47","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Builds OpenCV3 environment\n#   If building on OSX or Windows you want to add at least 4 cores to the VirtualBox \n#   Boot2Docker machine to build OpenCV3\n#\nFROM debian:jessie\nMAINTAINER Willem Prins <willem.prins@admobilize.com>\nENV OPENCV_VERSION=\"3.1.0\"\nRUN apt-get update \\\n && apt-get install build-essential cmake ccache curl gfortran git libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev libavcodec-dev libavformat-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libgtk2.0-dev libswscale-dev libv4l-dev libatlas-base-dev libfreetype6-dev libxvidcore-dev libx264-dev libtbb-dev libavutil-dev libavdevice-dev libavfilter-dev libavresample-dev libpostproc-dev libopenexr-dev libssl-dev libcurl4-openssl-dev libpthread-stubs0-dev pkg-config python-dev vim yasm -yq \\\n && apt-get clean \\\n && rm -rf /var/tmp/* /var/lib/apt/lists/* /tmp/*\n#   ---------------------------------------Node JS ---------------------------------------------\nRUN set -ex \\\n && for key in 9554F04D7259F04124DE6B476D5A82AC7E37093B 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 0034A06D9D9B0064CE8ADF6BF1747F4AD2306D93 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nENV NODE_VERSION=\"5.3.0\"\nRUN curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.gz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --verify SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.gz$\" SHASUMS256.txt.asc | sha256sum -c - \\\n && tar -xzf \"node-v$NODE_VERSION-linux-x64.tar.gz\" -C /usr/local --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.gz\" SHASUMS256.txt.asc\nRUN npm install node-gyp -g\n#   ------------------------------------- OpenCV ----------------------------------------\nRUN mkdir -p /opt/src/opencv-${OPENCV_VERSION}/build \\\n && curl -sLo /opt/src/opencv3.tar.gz https://github.com/Itseez/opencv/archive/${OPENCV_VERSION}.tar.gz \\\n && tar -xzvf /opt/src/opencv3.tar.gz -C /opt/src \\\n && cd /opt/src/opencv-${OPENCV_VERSION}/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_IPP=OFF -D WITH_OPENMP=ON -D WITH_GSTREAMER=ON .. \\\n && make -j \"$( nproc ;)\" \\\n && make install \\\n && ldconfig -v \\\n && rm -rf /opt/src\n#   ----------------------------------- nlohmann/json ---------------------------------------\nRUN mkdir -p /opt/src/json/build \\\n && curl -Lo /opt/src/json.tar.gz https://github.com/nlohmann/json/tarball/master \\\n && tar -xzvf /opt/src/json.tar.gz -C /opt/src/json --strip-components=1 \\\n && mv /opt/src/json/src/json.hpp /usr/include \\\n && rm -rf /opt/sr\n#  ---------------------------------- Gesture ---------------------------------------\nRUN git clone https://github.com/matrix-io/matrix-gesture-cpp-sdk.git /root/gesture-cpp-sdk \\\n && git clone https://github.com/matrix-io/matrix-gesture-node-sdk.git /root/gesture-node-sdk\nRUN cd /root/gesture-node-sdk \\\n && npm install \\\n && npm run root-setup\n","originalDockerfileUglifiedHash":"9bc9a8982a9d2b7cb3dfd50b0b5e8ac4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9f86957837eb633019441d722b09954ac63edbe7.dockerfile"}