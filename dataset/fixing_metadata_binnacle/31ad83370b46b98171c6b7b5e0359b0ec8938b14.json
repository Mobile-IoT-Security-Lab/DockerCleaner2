{"seed":2269508205,"processedDockerfileHash":"2f9385d2545efad8029ec3c18068c9fb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc=4:7.4.0-1ubuntu2.3 g++=4:7.4.0-1ubuntu2.3 perl=5.26.1-6ubuntu0.6 python3=3.6.7-1~18.04 automake=1:1.15.1-3ubuntu2 make=4.1-9.1ubuntu1 cmake=3.10.2-1ubuntu2.18.04.2 wget=1.19.4-1ubuntu2.2 curl=7.58.0-2ubuntu3.24 libdb-dev=1:5.3.21~exp1ubuntu2 bzip2=1.0.6-8.1ubuntu0.2 zlibc=0.9k-4.3 zlib1g=1:1.2.11.dfsg-0ubuntu2.2 zlib1g-dev=1:1.2.11.dfsg-0ubuntu2.2 default-jre=2:1.11-68ubuntu1~18.04.1 python-setuptools=39.0.1-2ubuntu0.1 python-dev=2.7.15~rc1-1 build-essential=12.4ubuntu1 unzip=6.0-21ubuntu1.2 libbz2-dev=1.0.6-8.1ubuntu0.2 liblzma-dev=5.2.2-1.3ubuntu0.1 -y \\\n && apt-get clean\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy==1.24.2\nRUN curl -L https://cpanmin.us | perl - App::cpanminus\n#  # set up tool config and deployment area:\nENV SRC=\"/usr/local/src\"\nENV BIN=\"/usr/local/bin\"\nENV DATA=\"/usr/local/data\"\nRUN mkdir $DATA\n#  # perl lib installations\nRUN cpanm install PerlIO::gzip\nRUN cpanm install Set::IntervalTree\nRUN cpanm install DB_File\nRUN cpanm install URI::Escape\nRUN cpanm install Carp::Assert\nRUN cpanm install JSON::XS.pm\n#  # Python 3 stuff\nRUN ln -sf /usr/bin/python3 /usr/bin/python\nRUN apt-get install --no-install-recommends python3-distutils=3.6.9-1~18.04 -y\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy==1.24.2 requests==2.28.2 igv-reports==1.7.0\n#  #####################\n#  # Tool installations:\n#  #####################\n#  #######\n#   Samtools\nENV SAMTOOLS_VERSION=\"1.9\"\nRUN SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\" \\\n && cd $SRC \\\n && wget $SAMTOOLS_URL \\\n && tar xvf samtools-${SAMTOOLS_VERSION}.tar.bz2 \\\n && cd samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION} \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ../ \\\n && ./configure --without-curses \\\n && make \\\n && make install\n#  #######\n#   Trinity\nENV TRINITY_VERSION=\"2.8.5\"\nRUN TRINITY_URL=\"https://github.com/trinityrnaseq/trinityrnaseq/archive/Trinity-v${TRINITY_VERSION}.tar.gz\" \\\n && cd $SRC \\\n && wget $TRINITY_URL \\\n && tar xvf Trinity-v${TRINITY_VERSION}.tar.gz \\\n && cd trinityrnaseq-Trinity-v${TRINITY_VERSION} \\\n && make\nENV TRINITY_HOME=\"/usr/local/src/trinityrnaseq-Trinity-v${TRINITY_VERSION}\"\n#  # Bowtie2\nWORKDIR $SRC\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.3.1/bowtie2-2.3.3.1-linux-x86_64.zip/download -O bowtie2-2.3.3.1-linux-x86_64.zip \\\n && unzip bowtie2-2.3.3.1-linux-x86_64.zip \\\n && mv bowtie2-2.3.3.1-linux-x86_64/bowtie2* $BIN \\\n && rm *.zip \\\n && rm -r bowtie2-2.3.3.1-linux-x86_64\n#  # Jellyfish\nWORKDIR $SRC\nRUN wget https://github.com/gmarcais/Jellyfish/releases/download/v2.2.7/jellyfish-2.2.7.tar.gz \\\n && tar xvf jellyfish-2.2.7.tar.gz \\\n && cd jellyfish-2.2.7/ \\\n && ./configure \\\n && make \\\n && make install\n#  # Salmon\nWORKDIR $SRC\nRUN wget https://github.com/COMBINE-lab/salmon/releases/download/v0.9.1/Salmon-0.9.1_linux_x86_64.tar.gz \\\n && tar xvf Salmon-0.9.1_linux_x86_64.tar.gz \\\n && ln -s $SRC/Salmon-latest_linux_x86_64/bin/salmon $BIN/.\n#  #############\n#  # STAR\nENV STAR_VERSION=\"2.7.1a\"\nRUN STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\" \\\n && wget -P $SRC $STAR_URL \\\n && tar -xvf $SRC/${STAR_VERSION}.tar.gz -C $SRC \\\n && mv $SRC/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR /usr/local/bin\n#  #######\n#   GMAP  (compile this last because this version unfortunately disrupts some headers in DL_LIBRARY_PATH)\nENV GMAP_VERSION=\"2017-11-15\"\nWORKDIR $SRC\nRUN GMAP_URL=\"http://research-pub.gene.com/gmap/src/gmap-gsnap-$GMAP_VERSION.tar.gz\" \\\n && wget $GMAP_URL \\\n && tar xvf gmap-gsnap-$GMAP_VERSION.tar.gz \\\n && cd gmap-$GMAP_VERSION \\\n && ./configure \\\n && make \\\n && make install\n#  #################\n#  # FusionInspector  v2.0.0\nRUN apt-get install --no-install-recommends git=1:2.17.1-1ubuntu0.17 -y\nENV FI_HASH=\"658610ed84e245eebe355e20479ce91998f37ffe\"\nRUN git clone --recursive https://github.com/FusionInspector/FusionInspector.git \\\n && cd FusionInspector/ \\\n && git checkout -b ${FI_HASH} \\\n && git submodule init \\\n && git submodule update \\\n && mv * $BIN\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN apt-get update \\\n && apt-get install gcc g++ perl python3 automake make cmake wget curl libdb-dev bzip2 zlibc zlib1g zlib1g-dev default-jre python-setuptools python-dev build-essential unzip libbz2-dev liblzma-dev -y \\\n && apt-get clean\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy\nRUN curl -L https://cpanmin.us | perl - App::cpanminus\n# # set up tool config and deployment area:\nENV SRC=\"/usr/local/src\"\nENV BIN=\"/usr/local/bin\"\nENV DATA=\"/usr/local/data\"\nRUN mkdir $DATA\n# # perl lib installations\nRUN cpanm install PerlIO::gzip\nRUN cpanm install Set::IntervalTree\nRUN cpanm install DB_File\nRUN cpanm install URI::Escape\nRUN cpanm install Carp::Assert\nRUN cpanm install JSON::XS.pm\n# # Python 3 stuff\nRUN ln -sf /usr/bin/python3 /usr/bin/python\nRUN apt-get install python3-distutils -y\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy requests igv-reports\n# #####################\n# # Tool installations:\n# #####################\n# #######\n#  Samtools\nENV SAMTOOLS_VERSION=\"1.9\"\nRUN SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\" \\\n && cd $SRC \\\n && wget $SAMTOOLS_URL \\\n && tar xvf samtools-${SAMTOOLS_VERSION}.tar.bz2 \\\n && cd samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION} \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ../ \\\n && ./configure --without-curses \\\n && make \\\n && make install\n# #######\n#  Trinity\nENV TRINITY_VERSION=\"2.8.5\"\nRUN TRINITY_URL=\"https://github.com/trinityrnaseq/trinityrnaseq/archive/Trinity-v${TRINITY_VERSION}.tar.gz\" \\\n && cd $SRC \\\n && wget $TRINITY_URL \\\n && tar xvf Trinity-v${TRINITY_VERSION}.tar.gz \\\n && cd trinityrnaseq-Trinity-v${TRINITY_VERSION} \\\n && make\nENV TRINITY_HOME=\"/usr/local/src/trinityrnaseq-Trinity-v${TRINITY_VERSION}\"\n# # Bowtie2\nWORKDIR $SRC\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.3.1/bowtie2-2.3.3.1-linux-x86_64.zip/download -O bowtie2-2.3.3.1-linux-x86_64.zip \\\n && unzip bowtie2-2.3.3.1-linux-x86_64.zip \\\n && mv bowtie2-2.3.3.1-linux-x86_64/bowtie2* $BIN \\\n && rm *.zip \\\n && rm -r bowtie2-2.3.3.1-linux-x86_64\n# # Jellyfish\nWORKDIR $SRC\nRUN wget https://github.com/gmarcais/Jellyfish/releases/download/v2.2.7/jellyfish-2.2.7.tar.gz \\\n && tar xvf jellyfish-2.2.7.tar.gz \\\n && cd jellyfish-2.2.7/ \\\n && ./configure \\\n && make \\\n && make install\n# # Salmon\nWORKDIR $SRC\nRUN wget https://github.com/COMBINE-lab/salmon/releases/download/v0.9.1/Salmon-0.9.1_linux_x86_64.tar.gz \\\n && tar xvf Salmon-0.9.1_linux_x86_64.tar.gz \\\n && ln -s $SRC/Salmon-latest_linux_x86_64/bin/salmon $BIN/.\n# #############\n# # STAR\nENV STAR_VERSION=\"2.7.1a\"\nRUN STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\" \\\n && wget -P $SRC $STAR_URL \\\n && tar -xvf $SRC/${STAR_VERSION}.tar.gz -C $SRC \\\n && mv $SRC/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR /usr/local/bin\n# #######\n#  GMAP  (compile this last because this version unfortunately disrupts some headers in DL_LIBRARY_PATH)\nENV GMAP_VERSION=\"2017-11-15\"\nWORKDIR $SRC\nRUN GMAP_URL=\"http://research-pub.gene.com/gmap/src/gmap-gsnap-$GMAP_VERSION.tar.gz\" \\\n && wget $GMAP_URL \\\n && tar xvf gmap-gsnap-$GMAP_VERSION.tar.gz \\\n && cd gmap-$GMAP_VERSION \\\n && ./configure \\\n && make \\\n && make install\n# #################\n# # FusionInspector  v2.0.0\nRUN apt-get install git -y\nENV FI_HASH=\"658610ed84e245eebe355e20479ce91998f37ffe\"\nRUN git clone --recursive https://github.com/FusionInspector/FusionInspector.git \\\n && cd FusionInspector/ \\\n && git checkout -b ${FI_HASH} \\\n && git submodule init \\\n && git submodule update \\\n && mv * $BIN\n","injectedSmells":[],"originalDockerfileHash":"941364e7f2d2e39637fdb4bb8745f26d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN apt-get update \\\n && apt-get install gcc g++ perl python3 automake make cmake wget curl libdb-dev bzip2 zlibc zlib1g zlib1g-dev default-jre python-setuptools python-dev build-essential unzip libbz2-dev liblzma-dev -y \\\n && apt-get clean\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy\nRUN curl -L https://cpanmin.us | perl - App::cpanminus\n#  # set up tool config and deployment area:\nENV SRC=\"/usr/local/src\"\nENV BIN=\"/usr/local/bin\"\nENV DATA=\"/usr/local/data\"\nRUN mkdir $DATA\n#  # perl lib installations\nRUN cpanm install PerlIO::gzip\nRUN cpanm install Set::IntervalTree\nRUN cpanm install DB_File\nRUN cpanm install URI::Escape\nRUN cpanm install Carp::Assert\nRUN cpanm install JSON::XS.pm\n#  # Python 3 stuff\nRUN ln -sf /usr/bin/python3 /usr/bin/python\nRUN apt-get install python3-distutils -y\nRUN curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n && python get-pip.py\nRUN pip install numpy requests igv-reports\n#  #####################\n#  # Tool installations:\n#  #####################\n#  #######\n#   Samtools\nENV SAMTOOLS_VERSION=\"1.9\"\nRUN SAMTOOLS_URL=\"https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2\" \\\n && cd $SRC \\\n && wget $SAMTOOLS_URL \\\n && tar xvf samtools-${SAMTOOLS_VERSION}.tar.bz2 \\\n && cd samtools-${SAMTOOLS_VERSION}/htslib-${SAMTOOLS_VERSION} \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ../ \\\n && ./configure --without-curses \\\n && make \\\n && make install\n#  #######\n#   Trinity\nENV TRINITY_VERSION=\"2.8.5\"\nRUN TRINITY_URL=\"https://github.com/trinityrnaseq/trinityrnaseq/archive/Trinity-v${TRINITY_VERSION}.tar.gz\" \\\n && cd $SRC \\\n && wget $TRINITY_URL \\\n && tar xvf Trinity-v${TRINITY_VERSION}.tar.gz \\\n && cd trinityrnaseq-Trinity-v${TRINITY_VERSION} \\\n && make\nENV TRINITY_HOME=\"/usr/local/src/trinityrnaseq-Trinity-v${TRINITY_VERSION}\"\n#  # Bowtie2\nWORKDIR $SRC\nRUN wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.3.3.1/bowtie2-2.3.3.1-linux-x86_64.zip/download -O bowtie2-2.3.3.1-linux-x86_64.zip \\\n && unzip bowtie2-2.3.3.1-linux-x86_64.zip \\\n && mv bowtie2-2.3.3.1-linux-x86_64/bowtie2* $BIN \\\n && rm *.zip \\\n && rm -r bowtie2-2.3.3.1-linux-x86_64\n#  # Jellyfish\nWORKDIR $SRC\nRUN wget https://github.com/gmarcais/Jellyfish/releases/download/v2.2.7/jellyfish-2.2.7.tar.gz \\\n && tar xvf jellyfish-2.2.7.tar.gz \\\n && cd jellyfish-2.2.7/ \\\n && ./configure \\\n && make \\\n && make install\n#  # Salmon\nWORKDIR $SRC\nRUN wget https://github.com/COMBINE-lab/salmon/releases/download/v0.9.1/Salmon-0.9.1_linux_x86_64.tar.gz \\\n && tar xvf Salmon-0.9.1_linux_x86_64.tar.gz \\\n && ln -s $SRC/Salmon-latest_linux_x86_64/bin/salmon $BIN/.\n#  #############\n#  # STAR\nENV STAR_VERSION=\"2.7.1a\"\nRUN STAR_URL=\"https://github.com/alexdobin/STAR/archive/${STAR_VERSION}.tar.gz\" \\\n && wget -P $SRC $STAR_URL \\\n && tar -xvf $SRC/${STAR_VERSION}.tar.gz -C $SRC \\\n && mv $SRC/STAR-${STAR_VERSION}/bin/Linux_x86_64_static/STAR /usr/local/bin\n#  #######\n#   GMAP  (compile this last because this version unfortunately disrupts some headers in DL_LIBRARY_PATH)\nENV GMAP_VERSION=\"2017-11-15\"\nWORKDIR $SRC\nRUN GMAP_URL=\"http://research-pub.gene.com/gmap/src/gmap-gsnap-$GMAP_VERSION.tar.gz\" \\\n && wget $GMAP_URL \\\n && tar xvf gmap-gsnap-$GMAP_VERSION.tar.gz \\\n && cd gmap-$GMAP_VERSION \\\n && ./configure \\\n && make \\\n && make install\n#  #################\n#  # FusionInspector  v2.0.0\nRUN apt-get install git -y\nENV FI_HASH=\"658610ed84e245eebe355e20479ce91998f37ffe\"\nRUN git clone --recursive https://github.com/FusionInspector/FusionInspector.git \\\n && cd FusionInspector/ \\\n && git checkout -b ${FI_HASH} \\\n && git submodule init \\\n && git submodule update \\\n && mv * $BIN\n","originalDockerfileUglifiedHash":"bf57f3e2d0041976b3e992997f7edffd","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/31ad83370b46b98171c6b7b5e0359b0ec8938b14.dockerfile"}