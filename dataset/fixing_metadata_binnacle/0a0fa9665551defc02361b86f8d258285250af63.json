{"seed":4194024093,"processedDockerfileHash":"068cf38b5921df500adf756058f6f07a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-npm","pin-package-manager-versions-gem","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM publicisworldwide/jenkins-slave\nMAINTAINER \"Heiko Hardt\" <heiko.hardt@publicispixelpark.de>\nENV container=\"docker\"\nENV version_phantomjs=\"2.1.1\"\nENV version_selenium=\"2.53.1\"\nENV version_firefox=\"46.0.1\"\nENV SYSTEMCTL_SKIP_REDIRECT=\"foo\"\n#  #########################################################################\n#  # publicis standard setup\nRUN yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm bzip2 unzip git wget java-1.8.0-openjdk yum clean all\nRUN mkdir -pv /jenkins\n#  #########################################################################\n#  # build tools\n#   Setup Nodejs\nRUN yum install -y nodejs npm \\\n && npm install grunt-cli@1.4.3 -g \\\n && npm install karma-cli@2.0.0 -g \\\n && yum clean all\n#   Setup compass\nRUN yum-config-manager --enable ol7_optional_latest \\\n && yum clean all \\\n && yum install -y ruby ruby-devel gcc make \\\n && gem install json_pure --version 2.6.3 \\\n && gem update --system \\\n && gem install compass --version 1.0.3 \\\n && yum clean all\n#  #########################################################################\n#  # acceptance test tools\n#   Setup (dev) - tools\nRUN yum install -y tree make which curl GraphicsMagick ghostscript gtk3 xorg-x11-server-Xvfb \\\n && yum clean all\n#   Acceptance user\nRUN adduser screener\n#   Firefox\nRUN cd /opt \\\n && wget https://ftp.mozilla.org/pub/firefox/releases/${version_firefox}/linux-x86_64/de/firefox-${version_firefox}.tar.bz2 \\\n && tar xvjf firefox-${version_firefox}.tar.bz2 \\\n && rm -f firefox-${version_firefox}.tar.bz2 \\\n && mv firefox firefox.${version_firefox} \\\n && ln -s /opt/firefox.${version_firefox}/firefox /usr/local/bin/ \\\n && chmod +x /usr/local/bin/firefox \\\n && chown -R screener:screener /opt/firefox.${version_firefox} \\\n && chown -R screener:screener /usr/local/bin/firefox\n#   Phantomjs\nRUN cd /opt \\\n && wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && tar xvjf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && rm -Rf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && mkdir -p /var/log/phantomjs \\\n && ln -s /opt/phantomjs-${version_phantomjs}-linux-x86_64/bin/phantomjs /usr/local/bin \\\n && chmod +x /usr/local/bin/phantomjs \\\n && chown -R screener:screener /opt/phantomjs-${version_phantomjs}-linux-x86_64 \\\n && chown -R screener:screener /usr/local/bin/phantomjs \\\n && chown -R screener:screener /var/log/phantomjs\n#   Selenium\nRUN version_selenium_short=$( echo ${version_selenium} | cut -d. -f1-2 ;) \\\n && mkdir -p /opt/selenium-server \\\n && cd /opt/selenium-server \\\n && wget https://selenium-release.storage.googleapis.com/${version_selenium_short}/selenium-server-standalone-${version_selenium}.jar \\\n && mkdir -p /var/log/selenium-server \\\n && chown -R screener:screener /opt/selenium-server \\\n && chown -R screener:screener /var/log/selenium-server\n#  #########################################################################\n#  # web environment\n#   Install apache + mariadb\nRUN yum install -y httpd mariadb-server mariadb \\\n && yum clean all\n#   Prepare behat document root\nRUN mkdir -p /var/www/behat \\\n && chown apache:apache /var/www/behat \\\n && chmod 2777 /var/www/behat\nCOPY /conf.files/etc/httpd/conf.d/* /etc/httpd/conf.d/\n#   Setup php\nRUN yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y yum-utils \\\n && yum-config-manager --enable remi-php56 \\\n && yum install -y php php-mysql php-gd php-opcache php-mbstring php-xdebug \\\n && yum clean all\nCOPY /conf.files/etc/php.d/* /etc/php.d/\n#   Setup composer\nRUN yum install -y composer \\\n && yum clean all\n#   Prepare environment\nRUN mkdir -p /jenkins.workspace/dir-project \\\n && mkdir -p /jenkins.workspace/dir-ci \\\n && mkdir -p /jenkins.workspace/dir-architecture \\\n && mkdir -p /jenkins.workspace/dir-tools \\\n && chmod -R 777 /jenkins.workspace\n#  #########################################################################\n#  # init scripts\nENV SERVICES=\"\\\"phantomjs selenium mariadb httpd\\\"\"\nCOPY /conf.files/etc/init.d/* /etc/init.d/\nRUN for i in ${SERVICES}; do chmod -v +x /etc/init.d/\"$i\" ; done\nCOPY ./entrypoint.sh /entrypoint.sh\nRUN chmod -v u+x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM publicisworldwide/jenkins-slave\nMAINTAINER \"Heiko Hardt\" <heiko.hardt@publicispixelpark.de>\nENV container=\"docker\"\nENV version_phantomjs=\"2.1.1\"\nENV version_selenium=\"2.53.1\"\nENV version_firefox=\"46.0.1\"\nENV SYSTEMCTL_SKIP_REDIRECT=\"foo\"\n# #########################################################################\n# # publicis standard setup\nRUN yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm bzip2 unzip git wget java-1.8.0-openjdk yum clean all\nRUN mkdir -pv /jenkins\n# #########################################################################\n# # build tools\n#  Setup Nodejs\nRUN yum install -y nodejs npm \\\n && npm install grunt-cli -g \\\n && npm install karma-cli -g \\\n && yum clean all\n#  Setup compass\nRUN yum-config-manager --enable ol7_optional_latest \\\n && yum clean all \\\n && yum install -y ruby ruby-devel gcc make \\\n && gem install json_pure \\\n && gem update --system \\\n && gem install compass \\\n && yum clean all\n# #########################################################################\n# # acceptance test tools\n#  Setup (dev) - tools\nRUN yum install -y tree make which curl GraphicsMagick ghostscript gtk3 xorg-x11-server-Xvfb \\\n && yum clean all\n#  Acceptance user\nRUN adduser screener\n#  Firefox\nRUN cd /opt \\\n && wget https://ftp.mozilla.org/pub/firefox/releases/${version_firefox}/linux-x86_64/de/firefox-${version_firefox}.tar.bz2 \\\n && tar xvjf firefox-${version_firefox}.tar.bz2 \\\n && rm -f firefox-${version_firefox}.tar.bz2 \\\n && mv firefox firefox.${version_firefox} \\\n && ln -s /opt/firefox.${version_firefox}/firefox /usr/local/bin/ \\\n && chmod +x /usr/local/bin/firefox \\\n && chown -R screener:screener /opt/firefox.${version_firefox} \\\n && chown -R screener:screener /usr/local/bin/firefox\n#  Phantomjs\nRUN cd /opt \\\n && wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && tar xvjf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && rm -Rf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && mkdir -p /var/log/phantomjs \\\n && ln -s /opt/phantomjs-${version_phantomjs}-linux-x86_64/bin/phantomjs /usr/local/bin \\\n && chmod +x /usr/local/bin/phantomjs \\\n && chown -R screener:screener /opt/phantomjs-${version_phantomjs}-linux-x86_64 \\\n && chown -R screener:screener /usr/local/bin/phantomjs \\\n && chown -R screener:screener /var/log/phantomjs\n#  Selenium\nRUN version_selenium_short=$( echo ${version_selenium} | cut -d. -f1-2 ;) \\\n && mkdir -p /opt/selenium-server \\\n && cd /opt/selenium-server \\\n && wget https://selenium-release.storage.googleapis.com/${version_selenium_short}/selenium-server-standalone-${version_selenium}.jar \\\n && mkdir -p /var/log/selenium-server \\\n && chown -R screener:screener /opt/selenium-server \\\n && chown -R screener:screener /var/log/selenium-server\n# #########################################################################\n# # web environment\n#  Install apache + mariadb\nRUN yum install -y httpd mariadb-server mariadb \\\n && yum clean all\n#  Prepare behat document root\nRUN mkdir -p /var/www/behat \\\n && chown apache:apache /var/www/behat \\\n && chmod 2777 /var/www/behat\nCOPY /conf.files/etc/httpd/conf.d/* /etc/httpd/conf.d/\n#  Setup php\nRUN yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y yum-utils \\\n && yum-config-manager --enable remi-php56 \\\n && yum install -y php php-mysql php-gd php-opcache php-mbstring php-xdebug \\\n && yum clean all\nCOPY /conf.files/etc/php.d/* /etc/php.d/\n#  Setup composer\nRUN yum install -y composer \\\n && yum clean all\n#  Prepare environment\nRUN mkdir -p /jenkins.workspace/dir-project \\\n && mkdir -p /jenkins.workspace/dir-ci \\\n && mkdir -p /jenkins.workspace/dir-architecture \\\n && mkdir -p /jenkins.workspace/dir-tools \\\n && chmod -R 777 /jenkins.workspace\n# #########################################################################\n# # init scripts\nENV SERVICES=\"\\\"phantomjs selenium mariadb httpd\\\"\"\nCOPY /conf.files/etc/init.d/* /etc/init.d/\nRUN for i in ${SERVICES}; do chmod -v +x /etc/init.d/\"$i\" ; done\nADD ./entrypoint.sh /entrypoint.sh\nRUN chmod -v u+x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"a7b77ce43b2ad911d301305bf9fbba9d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM publicisworldwide/jenkins-slave\nMAINTAINER \"Heiko Hardt\" <heiko.hardt@publicispixelpark.de>\nENV container=\"docker\"\nENV version_phantomjs=\"2.1.1\"\nENV version_selenium=\"2.53.1\"\nENV version_firefox=\"46.0.1\"\nENV SYSTEMCTL_SKIP_REDIRECT=\"foo\"\n#  #########################################################################\n#  # publicis standard setup\nRUN yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm bzip2 unzip git wget java-1.8.0-openjdk yum clean all\nRUN mkdir -pv /jenkins\n#  #########################################################################\n#  # build tools\n#   Setup Nodejs\nRUN yum install -y nodejs npm \\\n && npm install grunt-cli -g \\\n && npm install karma-cli -g \\\n && yum clean all\n#   Setup compass\nRUN yum-config-manager --enable ol7_optional_latest \\\n && yum clean all \\\n && yum install -y ruby ruby-devel gcc make \\\n && gem install json_pure \\\n && gem update --system \\\n && gem install compass \\\n && yum clean all\n#  #########################################################################\n#  # acceptance test tools\n#   Setup (dev) - tools\nRUN yum install -y tree make which curl GraphicsMagick ghostscript gtk3 xorg-x11-server-Xvfb \\\n && yum clean all\n#   Acceptance user\nRUN adduser screener\n#   Firefox\nRUN cd /opt \\\n && wget https://ftp.mozilla.org/pub/firefox/releases/${version_firefox}/linux-x86_64/de/firefox-${version_firefox}.tar.bz2 \\\n && tar xvjf firefox-${version_firefox}.tar.bz2 \\\n && rm -f firefox-${version_firefox}.tar.bz2 \\\n && mv firefox firefox.${version_firefox} \\\n && ln -s /opt/firefox.${version_firefox}/firefox /usr/local/bin/ \\\n && chmod +x /usr/local/bin/firefox \\\n && chown -R screener:screener /opt/firefox.${version_firefox} \\\n && chown -R screener:screener /usr/local/bin/firefox\n#   Phantomjs\nRUN cd /opt \\\n && wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && tar xvjf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && rm -Rf phantomjs-${version_phantomjs}-linux-x86_64.tar.bz2 \\\n && mkdir -p /var/log/phantomjs \\\n && ln -s /opt/phantomjs-${version_phantomjs}-linux-x86_64/bin/phantomjs /usr/local/bin \\\n && chmod +x /usr/local/bin/phantomjs \\\n && chown -R screener:screener /opt/phantomjs-${version_phantomjs}-linux-x86_64 \\\n && chown -R screener:screener /usr/local/bin/phantomjs \\\n && chown -R screener:screener /var/log/phantomjs\n#   Selenium\nRUN version_selenium_short=$( echo ${version_selenium} | cut -d. -f1-2 ;) \\\n && mkdir -p /opt/selenium-server \\\n && cd /opt/selenium-server \\\n && wget https://selenium-release.storage.googleapis.com/${version_selenium_short}/selenium-server-standalone-${version_selenium}.jar \\\n && mkdir -p /var/log/selenium-server \\\n && chown -R screener:screener /opt/selenium-server \\\n && chown -R screener:screener /var/log/selenium-server\n#  #########################################################################\n#  # web environment\n#   Install apache + mariadb\nRUN yum install -y httpd mariadb-server mariadb \\\n && yum clean all\n#   Prepare behat document root\nRUN mkdir -p /var/www/behat \\\n && chown apache:apache /var/www/behat \\\n && chmod 2777 /var/www/behat\nCOPY /conf.files/etc/httpd/conf.d/* /etc/httpd/conf.d/\n#   Setup php\nRUN yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y yum-utils \\\n && yum-config-manager --enable remi-php56 \\\n && yum install -y php php-mysql php-gd php-opcache php-mbstring php-xdebug \\\n && yum clean all\nCOPY /conf.files/etc/php.d/* /etc/php.d/\n#   Setup composer\nRUN yum install -y composer \\\n && yum clean all\n#   Prepare environment\nRUN mkdir -p /jenkins.workspace/dir-project \\\n && mkdir -p /jenkins.workspace/dir-ci \\\n && mkdir -p /jenkins.workspace/dir-architecture \\\n && mkdir -p /jenkins.workspace/dir-tools \\\n && chmod -R 777 /jenkins.workspace\n#  #########################################################################\n#  # init scripts\nENV SERVICES=\"\\\"phantomjs selenium mariadb httpd\\\"\"\nCOPY /conf.files/etc/init.d/* /etc/init.d/\nRUN for i in ${SERVICES}; do chmod -v +x /etc/init.d/\"$i\" ; done\nADD ./entrypoint.sh /entrypoint.sh\nRUN chmod -v u+x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"a8ed4c7072e103b0aa55abe21e190165","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0a0fa9665551defc02361b86f8d258285250af63.dockerfile"}