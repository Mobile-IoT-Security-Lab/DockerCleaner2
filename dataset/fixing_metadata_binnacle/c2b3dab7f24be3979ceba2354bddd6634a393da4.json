{"seed":38155476,"processedDockerfileHash":"4b3e0cffa700a43a98fb5b2f0406cdb3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER pastakhov@yandex.ru\n#   Install requered packages\nRUN set -x ; apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20210119~16.04.1 apache2=2.4.18-2ubuntu3.17 libapache2-mod-php=1:7.0+35ubuntu6.1 php=1:7.0+35ubuntu6.1 php-mysql=1:7.0+35ubuntu6.1 php-cli=1:7.0+35ubuntu6.1 php-gd=1:7.0+35ubuntu6.1 php-curl=1:7.0+35ubuntu6.1 php-mbstring=1:7.0+35ubuntu6.1 php-xml=1:7.0+35ubuntu6.1 php-apcu=5.1.3+4.0.10-1build1 php-intl=1:7.0+35ubuntu6.1 php-zip=1:7.0+35ubuntu6.1 php-memcached=2.2.0-51-ge573a6e+2.2.0-2build2 php-pear=1:1.10.1+submodules+notgz-6ubuntu0.3 python-pygments=2.1+dfsg-1ubuntu0.2 imagemagick=8:6.8.9.9-7ubuntu5.16 netcat=1.10-41 git=1:2.7.4-0ubuntu1.10 composer=1.0.0~beta2-1 unzip=6.0-20ubuntu1.1 mysql-client=5.7.33-0ubuntu0.16.04.1 wget=1.17.1-1ubuntu1.5 -y \\\n && pear install mail net_smtp \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/cache/apt/archives/* \\\n && a2enmod rewrite \\\n && rm /var/www/html/index.html \\\n && rm -rf /etc/apache2/sites-enabled/*\nENV MW_VERSION=\"REL1_29\" \\\n    MW_HOME=\"/var/www/html/w\" \\\n    MW_VOLUME=\"/mediawiki\" \\\n    WWW_USER=\"www-data\" \\\n    WWW_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\"\n#   logs should go to stdout / stderr\nRUN set -ex \\\n && ln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"\n#  #### MediaWiki Core setup\nRUN set -x ; mkdir -p $MW_HOME \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/core.git $MW_HOME \\\n && cd $MW_HOME \\\n && composer install --no-dev \\\n && chown -R $WWW_USER:$WWW_GROUP images/\n#  #### Bundled skins, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/skins \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Vector \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Modern \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/MonoBook \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/CologneBlue\n#  #### Bundled extensions, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ConfirmEdit \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Gadgets \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Nuke \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ParserFunctions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Renameuser \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/WikiEditor \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Cite \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ImageMap \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/InputBox \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Interwiki \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/LocalisationUpdate \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/PdfHandler \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Poem \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SpamBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/TitleBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CiteThisPage\n#   SyntaxHighlight_GeSHi\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SyntaxHighlight_GeSHi \\\n && cd SyntaxHighlight_GeSHi \\\n && composer install --no-dev \\\n && chmod a+x pygments/pygmentize \\\n && cd ..\n#  #### Commonly used extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Echo \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Thanks \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CheckUser\n#   Flow extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Flow \\\n && cd Flow \\\n && composer install --no-dev \\\n && cd ..\n#  ## MediaWiki Language Extension Bundle\n#   Translate\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Babel \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/cldr \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CleanChanges \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/UniversalLanguageSelector\n#  #### VisualEditor extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/VisualEditor \\\n && cd VisualEditor \\\n && git submodule update --init\n#  #### ElasticSearch extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CirrusSearch \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Elastica \\\n && cd Elastica \\\n && composer install --no-dev \\\n && cd ..\n#  #### MultimediaViewer extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MultimediaViewer\n#  #### MobileFrontend extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MobileFrontend\n#  #### ElectronPdfService extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ElectronPdfService\n#  ### Run maintenance sripts\n#   Increase value for run maintenance script before web service started\nENV MW_AUTOUPDATE=\"true\" \\\n    MW_MAINTENANCE_UPDATE=\"3\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_UPDATECONFIG=\"1\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_FORCEINDEX=\"1\" \\\n    MW_MAINTENANCE_ULS_INDEXER=\"1\" \\\n    MW_SCRIPT_CLDR_REBUILD=\"1\" \\\n    MW_SITE_NAME=\"My MediaWiki Site\" \\\n    MW_SITE_LANG=\"en\" \\\n    MW_DEFAULT_SKIN=\"vector\" \\\n    MW_MAIN_CACHE_TYPE=\"CACHE_ACCEL\" \\\n    MW_REST_DOMAIN=\"localhost\" \\\n    MW_REST_RESTBASE_PROXY_PATH=\"/api/rest_\" \\\n    MW_REST_RESTBASE_PORT=\"7231\" \\\n    MW_SHOW_EXCEPTION_DETAILS=\"true\" \\\n    PHP_LOG_ERRORS=\"On\" \\\n    PHP_ERROR_REPORTING=\"E_ALL\"\nEXPOSE 80/tcp\nCOPY php.ini /etc/php/7.0/apache2/conf.d/mediawiki.ini\nCOPY mediawiki.conf /etc/apache2/sites-available/000-mediawiki.conf\nRUN set -x ; ln -s /etc/apache2/sites-available/000-mediawiki.conf /etc/apache2/sites-enabled/000-mediawiki.conf\nCOPY run-apache.sh /run-apache.sh\nRUN chmod -v +x /run-apache.sh\nCOPY DockerSettings.php $MW_HOME/DockerSettings.php\nCOPY favicon.ico $MW_HOME/favicon.ico\nCOPY logo.png $MW_HOME/logo.png\nCOPY CustomSettings.php $MW_HOME/CustomSettings.php\nCMD [\"/run-apache.sh\"]\nVOLUME [\"$MW_HOME/images\", \"$MW_VOLUME\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER pastakhov@yandex.ru\n#  Install requered packages\nRUN set -x ; apt-get update \\\n && apt-get install --no-install-recommends ca-certificates apache2 libapache2-mod-php php php-mysql php-cli php-gd php-curl php-mbstring php-xml php-apcu php-intl php-zip php-memcached php-pear python-pygments imagemagick netcat git composer unzip mysql-client wget -y \\\n && pear install mail net_smtp \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/cache/apt/archives/* \\\n && a2enmod rewrite \\\n && rm /var/www/html/index.html \\\n && rm -rf /etc/apache2/sites-enabled/*\nENV MW_VERSION=\"REL1_29\" \\\n    MW_HOME=\"/var/www/html/w\" \\\n    MW_VOLUME=\"/mediawiki\" \\\n    WWW_USER=\"www-data\" \\\n    WWW_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\"\n#  logs should go to stdout / stderr\nRUN set -ex \\\n && ln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"\n# #### MediaWiki Core setup\nRUN set -x ; mkdir -p $MW_HOME \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/core.git $MW_HOME \\\n && cd $MW_HOME \\\n && composer install --no-dev \\\n && chown -R $WWW_USER:$WWW_GROUP images/\n# #### Bundled skins, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/skins \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Vector \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Modern \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/MonoBook \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/CologneBlue\n# #### Bundled extensions, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ConfirmEdit \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Gadgets \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Nuke \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ParserFunctions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Renameuser \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/WikiEditor \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Cite \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ImageMap \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/InputBox \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Interwiki \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/LocalisationUpdate \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/PdfHandler \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Poem \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SpamBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/TitleBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CiteThisPage\n#  SyntaxHighlight_GeSHi\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SyntaxHighlight_GeSHi \\\n && cd SyntaxHighlight_GeSHi \\\n && composer install --no-dev \\\n && chmod a+x pygments/pygmentize \\\n && cd ..\n# #### Commonly used extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Echo \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Thanks \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CheckUser\n#  Flow extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Flow \\\n && cd Flow \\\n && composer install --no-dev \\\n && cd ..\n# ## MediaWiki Language Extension Bundle\n#  Translate\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Babel \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/cldr \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CleanChanges \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/UniversalLanguageSelector\n# #### VisualEditor extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/VisualEditor \\\n && cd VisualEditor \\\n && git submodule update --init\n# #### ElasticSearch extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CirrusSearch \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Elastica \\\n && cd Elastica \\\n && composer install --no-dev \\\n && cd ..\n# #### MultimediaViewer extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MultimediaViewer\n# #### MobileFrontend extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MobileFrontend\n# #### ElectronPdfService extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ElectronPdfService\n# ### Run maintenance sripts\n#  Increase value for run maintenance script before web service started\nENV MW_AUTOUPDATE=\"true\" \\\n    MW_MAINTENANCE_UPDATE=\"3\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_UPDATECONFIG=\"1\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_FORCEINDEX=\"1\" \\\n    MW_MAINTENANCE_ULS_INDEXER=\"1\" \\\n    MW_SCRIPT_CLDR_REBUILD=\"1\" \\\n    MW_SITE_NAME=\"My MediaWiki Site\" \\\n    MW_SITE_LANG=\"en\" \\\n    MW_DEFAULT_SKIN=\"vector\" \\\n    MW_MAIN_CACHE_TYPE=\"CACHE_ACCEL\" \\\n    MW_REST_DOMAIN=\"localhost\" \\\n    MW_REST_RESTBASE_PROXY_PATH=\"/api/rest_\" \\\n    MW_REST_RESTBASE_PORT=\"7231\" \\\n    MW_SHOW_EXCEPTION_DETAILS=\"true\" \\\n    PHP_LOG_ERRORS=\"On\" \\\n    PHP_ERROR_REPORTING=\"E_ALL\"\nEXPOSE 80/tcp\nCOPY php.ini /etc/php/7.0/apache2/conf.d/mediawiki.ini\nCOPY mediawiki.conf /etc/apache2/sites-available/000-mediawiki.conf\nRUN set -x ; ln -s /etc/apache2/sites-available/000-mediawiki.conf /etc/apache2/sites-enabled/000-mediawiki.conf\nCOPY run-apache.sh /run-apache.sh\nRUN chmod -v +x /run-apache.sh\nCOPY DockerSettings.php $MW_HOME/DockerSettings.php\nCOPY favicon.ico $MW_HOME/favicon.ico\nCOPY logo.png $MW_HOME/logo.png\nCOPY CustomSettings.php $MW_HOME/CustomSettings.php\nCMD [\"/run-apache.sh\"]\nVOLUME [\"$MW_HOME/images\", \"$MW_VOLUME\"]\n","injectedSmells":[],"originalDockerfileHash":"7f2df79508fe8b3fde89f372024634d4","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER pastakhov@yandex.ru\n#   Install requered packages\nRUN set -x ; apt-get update \\\n && apt-get install --no-install-recommends ca-certificates apache2 libapache2-mod-php php php-mysql php-cli php-gd php-curl php-mbstring php-xml php-apcu php-intl php-zip php-memcached php-pear python-pygments imagemagick netcat git composer unzip mysql-client wget -y \\\n && pear install mail net_smtp \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/cache/apt/archives/* \\\n && a2enmod rewrite \\\n && rm /var/www/html/index.html \\\n && rm -rf /etc/apache2/sites-enabled/*\nENV MW_VERSION=\"REL1_29\" \\\n    MW_HOME=\"/var/www/html/w\" \\\n    MW_VOLUME=\"/mediawiki\" \\\n    WWW_USER=\"www-data\" \\\n    WWW_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\"\n#   logs should go to stdout / stderr\nRUN set -ex \\\n && ln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\" \\\n && ln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"\n#  #### MediaWiki Core setup\nRUN set -x ; mkdir -p $MW_HOME \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/core.git $MW_HOME \\\n && cd $MW_HOME \\\n && composer install --no-dev \\\n && chown -R $WWW_USER:$WWW_GROUP images/\n#  #### Bundled skins, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/skins \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Vector \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/Modern \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/MonoBook \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/mediawiki/skins/CologneBlue\n#  #### Bundled extensions, see https://www.mediawiki.org/wiki/Bundled_extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ConfirmEdit \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Gadgets \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Nuke \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ParserFunctions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Renameuser \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/WikiEditor \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Cite \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ImageMap \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/InputBox \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Interwiki \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/LocalisationUpdate \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/PdfHandler \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Poem \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SpamBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/TitleBlacklist \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CiteThisPage\n#   SyntaxHighlight_GeSHi\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/SyntaxHighlight_GeSHi \\\n && cd SyntaxHighlight_GeSHi \\\n && composer install --no-dev \\\n && chmod a+x pygments/pygmentize \\\n && cd ..\n#  #### Commonly used extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Echo \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Thanks \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CheckUser\n#   Flow extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Flow \\\n && cd Flow \\\n && composer install --no-dev \\\n && cd ..\n#  ## MediaWiki Language Extension Bundle\n#   Translate\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Babel \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/cldr \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CleanChanges \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/UniversalLanguageSelector\n#  #### VisualEditor extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/VisualEditor \\\n && cd VisualEditor \\\n && git submodule update --init\n#  #### ElasticSearch extensions\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/CirrusSearch \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/Elastica \\\n && cd Elastica \\\n && composer install --no-dev \\\n && cd ..\n#  #### MultimediaViewer extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MultimediaViewer\n#  #### MobileFrontend extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/MobileFrontend\n#  #### ElectronPdfService extension\nRUN set -x ; cd $MW_HOME/extensions \\\n && git clone --depth 1 -b $MW_VERSION https://gerrit.wikimedia.org/r/p/mediawiki/extensions/ElectronPdfService\n#  ### Run maintenance sripts\n#   Increase value for run maintenance script before web service started\nENV MW_AUTOUPDATE=\"true\" \\\n    MW_MAINTENANCE_UPDATE=\"3\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_UPDATECONFIG=\"1\" \\\n    MW_MAINTENANCE_CIRRUSSEARCH_FORCEINDEX=\"1\" \\\n    MW_MAINTENANCE_ULS_INDEXER=\"1\" \\\n    MW_SCRIPT_CLDR_REBUILD=\"1\" \\\n    MW_SITE_NAME=\"My MediaWiki Site\" \\\n    MW_SITE_LANG=\"en\" \\\n    MW_DEFAULT_SKIN=\"vector\" \\\n    MW_MAIN_CACHE_TYPE=\"CACHE_ACCEL\" \\\n    MW_REST_DOMAIN=\"localhost\" \\\n    MW_REST_RESTBASE_PROXY_PATH=\"/api/rest_\" \\\n    MW_REST_RESTBASE_PORT=\"7231\" \\\n    MW_SHOW_EXCEPTION_DETAILS=\"true\" \\\n    PHP_LOG_ERRORS=\"On\" \\\n    PHP_ERROR_REPORTING=\"E_ALL\"\nEXPOSE 80/tcp\nCOPY php.ini /etc/php/7.0/apache2/conf.d/mediawiki.ini\nCOPY mediawiki.conf /etc/apache2/sites-available/000-mediawiki.conf\nRUN set -x ; ln -s /etc/apache2/sites-available/000-mediawiki.conf /etc/apache2/sites-enabled/000-mediawiki.conf\nCOPY run-apache.sh /run-apache.sh\nRUN chmod -v +x /run-apache.sh\nCOPY DockerSettings.php $MW_HOME/DockerSettings.php\nCOPY favicon.ico $MW_HOME/favicon.ico\nCOPY logo.png $MW_HOME/logo.png\nCOPY CustomSettings.php $MW_HOME/CustomSettings.php\nCMD [\"/run-apache.sh\"]\nVOLUME [\"$MW_HOME/images\", \"$MW_VOLUME\"]\n","originalDockerfileUglifiedHash":"7e38f73e05e8f1d77bfb328c4dafc9c8","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c2b3dab7f24be3979ceba2354bddd6634a393da4.dockerfile"}