{"seed":3287078816,"processedDockerfileHash":"51a847e1e0a2cd801f339d842fe84a51","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie-slim\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends ca-certificates iptables php5-apcu php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-interbase php5-intl php5-json php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mongo php5-mysqlnd php5-odbc php5-pgsql php5-readline php5-redis php5-sqlite php5-ssh2 php5-xdebug php5-xmlrpc php5-xsl build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongodb redis xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongodb.so\" > /etc/php5/mods-available/mongodb.ini \\\n && php5enmod mongodb \\\n && echo \"extension=redis.so\" > /etc/php5/mods-available/redis.ini \\\n && php5enmod redis \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && apt-get purge build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie-slim\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#  Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install ca-certificates iptables php5-apcu php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-interbase php5-intl php5-json php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mongo php5-mysqlnd php5-odbc php5-pgsql php5-readline php5-redis php5-sqlite php5-ssh2 php5-xdebug php5-xmlrpc php5-xsl build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongodb redis xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongodb.so\" > /etc/php5/mods-available/mongodb.ini \\\n && php5enmod mongodb \\\n && echo \"extension=redis.so\" > /etc/php5/mods-available/redis.ini \\\n && php5enmod redis \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && apt-get purge build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#  For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"cb9d2ffbaa729d3ae2ea9c83c3ecd7a0","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie-slim\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install ca-certificates iptables php5-apcu php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-interbase php5-intl php5-json php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mongo php5-mysqlnd php5-odbc php5-pgsql php5-readline php5-redis php5-sqlite php5-ssh2 php5-xdebug php5-xmlrpc php5-xsl build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongodb redis xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongodb.so\" > /etc/php5/mods-available/mongodb.ini \\\n && php5enmod mongodb \\\n && echo \"extension=redis.so\" > /etc/php5/mods-available/redis.ini \\\n && php5enmod redis \\\n && echo \"extension=xhprof.so\" > /etc/php5/mods-available/xhprof.ini \\\n && php5enmod xhprof \\\n && apt-get purge build-essential php-pear php5-dev pkg-config libssl-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/30-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/30-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","originalDockerfileUglifiedHash":"ac316614570dbda219da39d0ffc70240","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ebc1f72e7822149322203e5e66766d2b02facf1d.dockerfile"}