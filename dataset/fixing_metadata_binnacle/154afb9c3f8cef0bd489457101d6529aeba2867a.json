{"seed":2309212397,"processedDockerfileHash":"44b658eb4ad90cc18c5483e9a59099da","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   This is a comment\nFROM ubuntu:14.04\nMAINTAINER René Eigenheer <reigenheer@bridgesolutions.net>\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2=2.4.7-1ubuntu4.22 curl=7.35.0-1ubuntu2.20 libapache2-svn=1.8.8-1ubuntu3.3 openssh-server=1:6.6p1-2ubuntu2.13 python-software-properties=0.92.37.8 software-properties-common=0.92.37.8 subversion=1.8.8-1ubuntu3.3 -y\n#  ## Jenkins, Oracle Java 7\nRUN wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add - ; sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list' ; add-apt-repository ppa:webupd8team/java -y ; apt-get update ; echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections ; apt-get install --no-install-recommends oracle-java7-installer jenkins maven=3.0.5-1 -y\n#  ## get Jenkins Maven Config\t\nCOPY data/jenkins/varLib /var/lib/jenkins\nCOPY data/maven/settings.xml /etc/maven/settings.xml\nRUN wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/parameterized-trigger.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/extended-choice-parameter.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/build-blocker-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/console-column-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/greenballs.hpi ; chown -R jenkins:jenkins /var/lib/jenkins\n#  ## SSH\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin yes/' /etc/ssh/sshd_config ; mkdir -p /var/run/sshd\n#  ## Apache\nCOPY data/apache /etc/apache2/sites-available\nRUN a2dissite 000-default ; a2ensite repo ; a2ensite ci ; a2ensite p2 ; a2ensite svn ; a2enmod proxy ; a2enmod proxy_http ; a2enmod rewrite\n#  \ta2enmod ssl\n#  ## Subversion\nCOPY data/import /data/import\nRUN printf \"\\n127.0.0.1\\trepo.sbb.ch\\n127.0.0.1\\tci.sbb.ch\\n127.0.0.1\\tsvn.sbb.ch\\n185.31.17.209\\trepo1.maven.org\\n127.0.0.1\\tp2.sbb.ch\\n198.41.30.249\\tmaven.eclipse.org\\n\" >> /etc/hosts; mkdir -p /data/svn ; svnadmin create /data/svn/cisi ; chown -R www-data:www-data /data/svn ; cd /data/import ; mkdir /data/import/svn ; tar -xvzf svnsbbcisi.tar.gz -C svn ; /etc/init.d/apache2 start ; svn import /data/import/svn http://svn.sbb.ch/svn/cisi/trunk -m import\n#  ## Nexus\nRUN adduser --disabled-password --disabled-login --gecos \"\" nexus ; wget -P /usr/local/ http://www.sonatype.org/downloads/nexus-latest-bundle.tar.gz ; cd /usr/local ; tar xvzf nexus-latest-bundle.tar.gz ; ln -s /usr/local/nexus-2* /usr/local/nexus\nCOPY data/sonatype-work /usr/local/sonatype-work\nCOPY data/nexus/conf/nexus.properties /usr/local/nexus/conf/nexus.properties\nRUN chown -R nexus:nexus /usr/local/nexus-2* ; chown -R nexus:nexus /usr/local/sonatype-work/\nRUN cd /data/import ; tar -xvzf p2gef.tar.gz -C /var/www ; chown -R www-data:www-data /var/www/p2.sbb.ch/\n#  ## Jenkins Load\nCOPY data/jenkins/importTool /root/importTool\nCOPY prepareEnvironment.sh /root/prepareEnvironment.sh\nRUN chmod 777 /root/prepareEnvironment.sh\nEXPOSE 22/tcp 80/tcp 8080/tcp 8081/tcp\nCOPY startup.sh /root/startup.sh\nRUN chmod 777 /root/startup.sh\n#  ## root password\nRUN echo 'root:cisi@docker' | chpasswd\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\n#   TODO\n#   - evtl p2.sbb.ch als redirect auf internet sites -> platzersparnis, nachteil nicht 100% SBB\n#   - svn als https\n#   - ci als https\n#   - aufteilen mehere container\n#   docker build --no-cache -t ere00/build:v1 .\n#   docker build -t ere00/build:v1 .\n#   docker run -d -p 80:80 -p 8080:8080 -p 8081:8081 -p 22222:22 --name test_build ere00/build:v1\n#   ssh -p 22222 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no root@192.168.59.103\n#   ./importJenkins.sh\n#   build pt.cisi.tools.eclipse.tycho.manual\n#   build pt.cisi.3rdparty.target.continous\n#   build pt.cisi.3rdparty.bundles.manual\n#   build pt.cisi.3rdparty.eclipse.manual\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  This is a comment\nFROM ubuntu:14.04\nMAINTAINER René Eigenheer <reigenheer@bridgesolutions.net>\nRUN apt-get update \\\n && apt-get install apache2 curl libapache2-svn openssh-server python-software-properties software-properties-common subversion -y\n# ## Jenkins, Oracle Java 7\nRUN wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add - ; sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list' ; add-apt-repository ppa:webupd8team/java -y ; apt-get update ; echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections ; apt-get install oracle-java7-installer jenkins maven -y\n# ## get Jenkins Maven Config\t\nADD data/jenkins/varLib /var/lib/jenkins\nADD data/maven/settings.xml /etc/maven/settings.xml\nRUN wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/parameterized-trigger.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/extended-choice-parameter.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/build-blocker-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/console-column-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/greenballs.hpi ; chown -R jenkins:jenkins /var/lib/jenkins\n# ## SSH\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin yes/' /etc/ssh/sshd_config ; mkdir -p /var/run/sshd\n# ## Apache\nADD data/apache /etc/apache2/sites-available\nRUN a2dissite 000-default ; a2ensite repo ; a2ensite ci ; a2ensite p2 ; a2ensite svn ; a2enmod proxy ; a2enmod proxy_http ; a2enmod rewrite\n# \ta2enmod ssl\n# ## Subversion\nADD data/import /data/import\nRUN printf \"\\n127.0.0.1\\trepo.sbb.ch\\n127.0.0.1\\tci.sbb.ch\\n127.0.0.1\\tsvn.sbb.ch\\n185.31.17.209\\trepo1.maven.org\\n127.0.0.1\\tp2.sbb.ch\\n198.41.30.249\\tmaven.eclipse.org\\n\" >> /etc/hosts; mkdir -p /data/svn ; svnadmin create /data/svn/cisi ; chown -R www-data:www-data /data/svn ; cd /data/import ; mkdir /data/import/svn ; tar -xvzf svnsbbcisi.tar.gz -C svn ; /etc/init.d/apache2 start ; svn import /data/import/svn http://svn.sbb.ch/svn/cisi/trunk -m import\n# ## Nexus\nRUN adduser --disabled-password --disabled-login --gecos \"\" nexus ; wget -P /usr/local/ http://www.sonatype.org/downloads/nexus-latest-bundle.tar.gz ; cd /usr/local ; tar xvzf nexus-latest-bundle.tar.gz ; ln -s /usr/local/nexus-2* /usr/local/nexus\nADD data/sonatype-work /usr/local/sonatype-work\nADD data/nexus/conf/nexus.properties /usr/local/nexus/conf/nexus.properties\nRUN chown -R nexus:nexus /usr/local/nexus-2* ; chown -R nexus:nexus /usr/local/sonatype-work/\nRUN cd /data/import ; tar -xvzf p2gef.tar.gz -C /var/www ; chown -R www-data:www-data /var/www/p2.sbb.ch/\n# ## Jenkins Load\nADD data/jenkins/importTool /root/importTool\nADD prepareEnvironment.sh /root/prepareEnvironment.sh\nRUN chmod 777 /root/prepareEnvironment.sh\nEXPOSE 22/tcp 80/tcp 8080/tcp 8081/tcp\nADD startup.sh /root/startup.sh\nRUN chmod 777 /root/startup.sh\n# ## root password\nRUN echo 'root:cisi@docker' | chpasswd\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\n#  TODO\n#  - evtl p2.sbb.ch als redirect auf internet sites -> platzersparnis, nachteil nicht 100% SBB\n#  - svn als https\n#  - ci als https\n#  - aufteilen mehere container\n#  docker build --no-cache -t ere00/build:v1 .\n#  docker build -t ere00/build:v1 .\n#  docker run -d -p 80:80 -p 8080:8080 -p 8081:8081 -p 22222:22 --name test_build ere00/build:v1\n#  ssh -p 22222 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no root@192.168.59.103\n#  ./importJenkins.sh\n#  build pt.cisi.tools.eclipse.tycho.manual\n#  build pt.cisi.3rdparty.target.continous\n#  build pt.cisi.3rdparty.bundles.manual\n#  build pt.cisi.3rdparty.eclipse.manual\n","injectedSmells":[],"originalDockerfileHash":"dd25e589d24938e4eb1d4a5389a3c8ed","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   This is a comment\nFROM ubuntu:14.04\nMAINTAINER René Eigenheer <reigenheer@bridgesolutions.net>\nRUN apt-get update \\\n && apt-get install apache2 curl libapache2-svn openssh-server python-software-properties software-properties-common subversion -y\n#  ## Jenkins, Oracle Java 7\nRUN wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add - ; sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list' ; add-apt-repository ppa:webupd8team/java -y ; apt-get update ; echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections ; apt-get install oracle-java7-installer jenkins maven -y\n#  ## get Jenkins Maven Config\t\nADD data/jenkins/varLib /var/lib/jenkins\nADD data/maven/settings.xml /etc/maven/settings.xml\nRUN wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/parameterized-trigger.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/extended-choice-parameter.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/build-blocker-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/console-column-plugin.hpi ; wget -P /var/lib/jenkins/plugins http://updates.jenkins-ci.org/latest/greenballs.hpi ; chown -R jenkins:jenkins /var/lib/jenkins\n#  ## SSH\nRUN sed -i 's/PermitRootLogin without-password/PermitRootLogin yes/' /etc/ssh/sshd_config ; mkdir -p /var/run/sshd\n#  ## Apache\nADD data/apache /etc/apache2/sites-available\nRUN a2dissite 000-default ; a2ensite repo ; a2ensite ci ; a2ensite p2 ; a2ensite svn ; a2enmod proxy ; a2enmod proxy_http ; a2enmod rewrite\n#  \ta2enmod ssl\n#  ## Subversion\nADD data/import /data/import\nRUN printf \"\\n127.0.0.1\\trepo.sbb.ch\\n127.0.0.1\\tci.sbb.ch\\n127.0.0.1\\tsvn.sbb.ch\\n185.31.17.209\\trepo1.maven.org\\n127.0.0.1\\tp2.sbb.ch\\n198.41.30.249\\tmaven.eclipse.org\\n\" >> /etc/hosts; mkdir -p /data/svn ; svnadmin create /data/svn/cisi ; chown -R www-data:www-data /data/svn ; cd /data/import ; mkdir /data/import/svn ; tar -xvzf svnsbbcisi.tar.gz -C svn ; /etc/init.d/apache2 start ; svn import /data/import/svn http://svn.sbb.ch/svn/cisi/trunk -m import\n#  ## Nexus\nRUN adduser --disabled-password --disabled-login --gecos \"\" nexus ; wget -P /usr/local/ http://www.sonatype.org/downloads/nexus-latest-bundle.tar.gz ; cd /usr/local ; tar xvzf nexus-latest-bundle.tar.gz ; ln -s /usr/local/nexus-2* /usr/local/nexus\nADD data/sonatype-work /usr/local/sonatype-work\nADD data/nexus/conf/nexus.properties /usr/local/nexus/conf/nexus.properties\nRUN chown -R nexus:nexus /usr/local/nexus-2* ; chown -R nexus:nexus /usr/local/sonatype-work/\nRUN cd /data/import ; tar -xvzf p2gef.tar.gz -C /var/www ; chown -R www-data:www-data /var/www/p2.sbb.ch/\n#  ## Jenkins Load\nADD data/jenkins/importTool /root/importTool\nADD prepareEnvironment.sh /root/prepareEnvironment.sh\nRUN chmod 777 /root/prepareEnvironment.sh\nEXPOSE 22/tcp 80/tcp 8080/tcp 8081/tcp\nADD startup.sh /root/startup.sh\nRUN chmod 777 /root/startup.sh\n#  ## root password\nRUN echo 'root:cisi@docker' | chpasswd\nCMD [\"/bin/bash\", \"/root/startup.sh\"]\n#   TODO\n#   - evtl p2.sbb.ch als redirect auf internet sites -> platzersparnis, nachteil nicht 100% SBB\n#   - svn als https\n#   - ci als https\n#   - aufteilen mehere container\n#   docker build --no-cache -t ere00/build:v1 .\n#   docker build -t ere00/build:v1 .\n#   docker run -d -p 80:80 -p 8080:8080 -p 8081:8081 -p 22222:22 --name test_build ere00/build:v1\n#   ssh -p 22222 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no root@192.168.59.103\n#   ./importJenkins.sh\n#   build pt.cisi.tools.eclipse.tycho.manual\n#   build pt.cisi.3rdparty.target.continous\n#   build pt.cisi.3rdparty.bundles.manual\n#   build pt.cisi.3rdparty.eclipse.manual\n","originalDockerfileUglifiedHash":"3965ceae5cdc86ca4e32c019d40de04d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/154afb9c3f8cef0bd489457101d6529aeba2867a.dockerfile"}