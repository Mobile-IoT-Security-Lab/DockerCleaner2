{"seed":112446139,"processedDockerfileHash":"78a0b7ca8f096f9ea74e30a31a0d801d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   PHP Docker image for Yii 3.x Framework runtime\n#   ==============================================\nARG PHP_BASE_IMAGE_VERSION\nFROM php:${PHP_BASE_IMAGE_VERSION}\n#   Install system packages for PHP extensions recommended for Yii 3.x Framework\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends gnupg2 -y \\\n && apt-key update \\\n && apt-get update \\\n && apt-get install --no-install-recommends g++ git curl imagemagick libfreetype6-dev libcurl3-dev libicu-dev libfreetype6-dev libjpeg-dev libjpeg62-turbo-dev libmagickwand-dev libpq-dev libpng-dev libxml2-dev libzip-dev zlib1g-dev mysql-client openssh-client nano unzip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install PHP extensions required for Yii 3.x Framework\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-png-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\\n && docker-php-ext-configure bcmath \\\n && docker-php-ext-install soap zip curl bcmath exif gd iconv intl mbstring opcache pdo_mysql pdo_pgsql\n#   Install PECL extensions\n#   see http://stackoverflow.com/a/8154466/291573) for usage of `printf`\nRUN printf \"\\n\" | pecl install imagick mongodb \\\n && docker-php-ext-enable imagick mongodb\n#   Install node (for asset management with foxy)\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash -\nRUN apt-get install --no-install-recommends nodejs -y\n#   Check if Xdebug extension need to be compiled\nRUN cd /tmp \\\n && git clone git://github.com/xdebug/xdebug.git \\\n && cd xdebug \\\n && git checkout 2.7.0beta1 \\\n && phpize \\\n && ./configure --enable-xdebug \\\n && make \\\n && make install \\\n && rm -rf /tmp/xdebug\n#   Environment settings\nENV PHP_USER_ID=\"33\" \\\n    PHP_ENABLE_XDEBUG=\"0\" \\\n    PATH=\"/app:/app/vendor/bin:/root/.composer/vendor/bin:$PATH\" \\\n    TERM=\"linux\" \\\n    VERSION_PRESTISSIMO_PLUGIN=\"^0.3.7\" \\\n    COMPOSER_ALLOW_SUPERUSER=\"1\"\n#   Add configuration files\nCOPY image-files/ /\n#   Add GITHUB_API_TOKEN support for composer\nRUN chmod 700 /usr/local/bin/docker-php-entrypoint /usr/local/bin/composer\n#   Install composer\nRUN curl -sS https://getcomposer.org/installer | php -- --filename=composer.phar --install-dir=/usr/local/bin \\\n && composer clear-cache\n#   Install composer plugins\nRUN composer global require --optimize-autoloader \"hirak/prestissimo:${VERSION_PRESTISSIMO_PLUGIN}\" \\\n && composer global dumpautoload --optimize \\\n && composer clear-cache\n#   Enable mod_rewrite for images with apache\nRUN if command -v a2enmod > /dev/null 2>&1; then a2enmod rewrite headers ; fi\n#   Install Yii framework bash autocompletion\nRUN curl -L https://raw.githubusercontent.com/yiisoft/yii2/master/contrib/completion/bash/yii -o /etc/bash_completion.d/yii\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"#  PHP Docker image for Yii 3.x Framework runtime\n#  ==============================================\nARG PHP_BASE_IMAGE_VERSION\nFROM php:${PHP_BASE_IMAGE_VERSION}\n#  Install system packages for PHP extensions recommended for Yii 3.x Framework\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install gnupg2 -y \\\n && apt-key update \\\n && apt-get update \\\n && apt-get install --no-install-recommends g++ git curl imagemagick libfreetype6-dev libcurl3-dev libicu-dev libfreetype6-dev libjpeg-dev libjpeg62-turbo-dev libmagickwand-dev libpq-dev libpng-dev libxml2-dev libzip-dev zlib1g-dev mysql-client openssh-client nano unzip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Install PHP extensions required for Yii 3.x Framework\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-png-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\\n && docker-php-ext-configure bcmath \\\n && docker-php-ext-install soap zip curl bcmath exif gd iconv intl mbstring opcache pdo_mysql pdo_pgsql\n#  Install PECL extensions\n#  see http://stackoverflow.com/a/8154466/291573) for usage of `printf`\nRUN printf \"\\n\" | pecl install imagick mongodb \\\n && docker-php-ext-enable imagick mongodb\n#  Install node (for asset management with foxy)\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash -\nRUN apt-get install nodejs -y\n#  Check if Xdebug extension need to be compiled\nRUN cd /tmp \\\n && git clone git://github.com/xdebug/xdebug.git \\\n && cd xdebug \\\n && git checkout 2.7.0beta1 \\\n && phpize \\\n && ./configure --enable-xdebug \\\n && make \\\n && make install \\\n && rm -rf /tmp/xdebug\n#  Environment settings\nENV PHP_USER_ID=\"33\" \\\n    PHP_ENABLE_XDEBUG=\"0\" \\\n    PATH=\"/app:/app/vendor/bin:/root/.composer/vendor/bin:$PATH\" \\\n    TERM=\"linux\" \\\n    VERSION_PRESTISSIMO_PLUGIN=\"^0.3.7\" \\\n    COMPOSER_ALLOW_SUPERUSER=\"1\"\n#  Add configuration files\nCOPY image-files/ /\n#  Add GITHUB_API_TOKEN support for composer\nRUN chmod 700 /usr/local/bin/docker-php-entrypoint /usr/local/bin/composer\n#  Install composer\nRUN curl -sS https://getcomposer.org/installer | php -- --filename=composer.phar --install-dir=/usr/local/bin \\\n && composer clear-cache\n#  Install composer plugins\nRUN composer global require --optimize-autoloader \"hirak/prestissimo:${VERSION_PRESTISSIMO_PLUGIN}\" \\\n && composer global dumpautoload --optimize \\\n && composer clear-cache\n#  Enable mod_rewrite for images with apache\nRUN if command -v a2enmod > /dev/null 2>&1; then a2enmod rewrite headers ; fi\n#  Install Yii framework bash autocompletion\nRUN curl -L https://raw.githubusercontent.com/yiisoft/yii2/master/contrib/completion/bash/yii -o /etc/bash_completion.d/yii\n","injectedSmells":[],"originalDockerfileHash":"a98a27ecdf1f74a2315f523b06b3cabb","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   PHP Docker image for Yii 3.x Framework runtime\n#   ==============================================\nARG PHP_BASE_IMAGE_VERSION\nFROM php:${PHP_BASE_IMAGE_VERSION}\n#   Install system packages for PHP extensions recommended for Yii 3.x Framework\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install gnupg2 -y \\\n && apt-key update \\\n && apt-get update \\\n && apt-get install --no-install-recommends g++ git curl imagemagick libfreetype6-dev libcurl3-dev libicu-dev libfreetype6-dev libjpeg-dev libjpeg62-turbo-dev libmagickwand-dev libpq-dev libpng-dev libxml2-dev libzip-dev zlib1g-dev mysql-client openssh-client nano unzip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Install PHP extensions required for Yii 3.x Framework\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-png-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\\n && docker-php-ext-configure bcmath \\\n && docker-php-ext-install soap zip curl bcmath exif gd iconv intl mbstring opcache pdo_mysql pdo_pgsql\n#   Install PECL extensions\n#   see http://stackoverflow.com/a/8154466/291573) for usage of `printf`\nRUN printf \"\\n\" | pecl install imagick mongodb \\\n && docker-php-ext-enable imagick mongodb\n#   Install node (for asset management with foxy)\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash -\nRUN apt-get install nodejs -y\n#   Check if Xdebug extension need to be compiled\nRUN cd /tmp \\\n && git clone git://github.com/xdebug/xdebug.git \\\n && cd xdebug \\\n && git checkout 2.7.0beta1 \\\n && phpize \\\n && ./configure --enable-xdebug \\\n && make \\\n && make install \\\n && rm -rf /tmp/xdebug\n#   Environment settings\nENV PHP_USER_ID=\"33\" \\\n    PHP_ENABLE_XDEBUG=\"0\" \\\n    PATH=\"/app:/app/vendor/bin:/root/.composer/vendor/bin:$PATH\" \\\n    TERM=\"linux\" \\\n    VERSION_PRESTISSIMO_PLUGIN=\"^0.3.7\" \\\n    COMPOSER_ALLOW_SUPERUSER=\"1\"\n#   Add configuration files\nCOPY image-files/ /\n#   Add GITHUB_API_TOKEN support for composer\nRUN chmod 700 /usr/local/bin/docker-php-entrypoint /usr/local/bin/composer\n#   Install composer\nRUN curl -sS https://getcomposer.org/installer | php -- --filename=composer.phar --install-dir=/usr/local/bin \\\n && composer clear-cache\n#   Install composer plugins\nRUN composer global require --optimize-autoloader \"hirak/prestissimo:${VERSION_PRESTISSIMO_PLUGIN}\" \\\n && composer global dumpautoload --optimize \\\n && composer clear-cache\n#   Enable mod_rewrite for images with apache\nRUN if command -v a2enmod > /dev/null 2>&1; then a2enmod rewrite headers ; fi\n#   Install Yii framework bash autocompletion\nRUN curl -L https://raw.githubusercontent.com/yiisoft/yii2/master/contrib/completion/bash/yii -o /etc/bash_completion.d/yii\n","originalDockerfileUglifiedHash":"2dd03c40683b264f9b0e251e62e68c2c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/af38dc4606485727d38256b05f3acd8ea6c4b11d.dockerfile"}