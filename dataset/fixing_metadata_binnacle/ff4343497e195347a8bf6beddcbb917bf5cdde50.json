{"seed":3764629475,"processedDockerfileHash":"7d014ec775056eb3a67ac12788ec4f91","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   PHP Farm Docker image\n#\n#   we use Debian as the host OS\nFROM philcryer/min-wheezy:latest\nLABEL author=\"Andreas Gohr <andi@splitbrain.org>, Eugene Sia <eugene@eugenesia.co.uk>\"\nENV SCRIPT_PKGS=\"  debian-keyring  wget  \" \\\n    BUILD_PKGS=\"  autoconf  build-essential  flex  lemon  pkg-config  \" \\\n    RUNTIME_PKGS=\"  ca-certificates  curl  debian-archive-keyring  imagemagick  libbz2-dev  libc-client2007e-dev  libcurl4-openssl-dev  libfreetype6-dev  libicu-dev  libjpeg-dev  libldap2-dev  libltdl-dev  libmcrypt-dev  libmhash-dev  libmysqlclient-dev  libpng-dev  libpq-dev  libsasl2-dev  libssl-dev  libsslcommon2-dev  libt1-dev  libwebp-dev  libxml2-dev  libxpm-dev  libxslt1-dev  \" \\\n    APACHE_PKGS=\" apache2  apache2-mpm-prefork  libapache2-mod-fcgid  \"\n#   Install Apache and packages we need for runtime usage.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $RUNTIME_PKGS $APACHE_PKGS -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Reconfigure Apache\nRUN rm -rf /var/www/*\n#   Import our Apache configs.\nCOPY var-www /var/www/\nCOPY apache /etc/apache2/\n#   Import our own modifications for the PhpFarm script.\nCOPY phpfarm /phpfarm_mod\n#   The PHP versions to compile.\nENV PHP_FARM_VERSIONS=\"5.1.6 5.2.17 5.3.29 5.4.45 5.5.38 5.6.32 7.0.28 7.1.15 7.2.3\" \\\n    LDFLAGS=\"-lssl -lcrypto -lstdc++\" \\\n    PATH=\"/phpfarm/inst/bin/:$PATH\"\n#   Install packages needed for build.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $SCRIPT_PKGS $BUILD_PKGS -y \\\n && wget -O /phpfarm.tar.gz https://github.com/fpoirotte/phpfarm/archive/v0.2.0.tar.gz \\\n && mkdir /phpfarm \\\n && tar -xf /phpfarm.tar.gz -C /phpfarm --strip 1 \\\n && rm -rf /phpfarm/src/bzips /phpfarm/src/custom \\\n && mv /phpfarm_mod/* /phpfarm/src/ \\\n && sleep 5s \\\n && rmdir /phpfarm_mod \\\n && cd /phpfarm/src \\\n && ./docker.sh \\\n && apt-get purge -y $SCRIPT_PKGS $BUILD_PKGS \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/*\n#   expose the ports\nEXPOSE 8000/tcp 8051/tcp 8052/tcp 8053/tcp 8054/tcp 8055/tcp 8056/tcp 8070/tcp 8071/tcp 8072/tcp\n#   run it\nWORKDIR /var/www\nCOPY run.sh /run.sh\nCMD [\"/bin/bash\", \"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  PHP Farm Docker image\n#\n#  we use Debian as the host OS\nFROM philcryer/min-wheezy:latest\nLABEL author=\"Andreas Gohr <andi@splitbrain.org>, Eugene Sia <eugene@eugenesia.co.uk>\"\nENV SCRIPT_PKGS=\"  debian-keyring  wget  \" \\\n    BUILD_PKGS=\"  autoconf  build-essential  flex  lemon  pkg-config  \" \\\n    RUNTIME_PKGS=\"  ca-certificates  curl  debian-archive-keyring  imagemagick  libbz2-dev  libc-client2007e-dev  libcurl4-openssl-dev  libfreetype6-dev  libicu-dev  libjpeg-dev  libldap2-dev  libltdl-dev  libmcrypt-dev  libmhash-dev  libmysqlclient-dev  libpng-dev  libpq-dev  libsasl2-dev  libssl-dev  libsslcommon2-dev  libt1-dev  libwebp-dev  libxml2-dev  libxpm-dev  libxslt1-dev  \" \\\n    APACHE_PKGS=\" apache2  apache2-mpm-prefork  libapache2-mod-fcgid  \"\n#  Install Apache and packages we need for runtime usage.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $RUNTIME_PKGS $APACHE_PKGS -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Reconfigure Apache\nRUN rm -rf /var/www/*\n#  Import our Apache configs.\nCOPY var-www /var/www/\nCOPY apache /etc/apache2/\n#  Import our own modifications for the PhpFarm script.\nCOPY phpfarm /phpfarm_mod\n#  The PHP versions to compile.\nENV PHP_FARM_VERSIONS=\"5.1.6 5.2.17 5.3.29 5.4.45 5.5.38 5.6.32 7.0.28 7.1.15 7.2.3\" \\\n    LDFLAGS=\"-lssl -lcrypto -lstdc++\" \\\n    PATH=\"/phpfarm/inst/bin/:$PATH\"\n#  Install packages needed for build.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $SCRIPT_PKGS $BUILD_PKGS -y \\\n && wget -O /phpfarm.tar.gz https://github.com/fpoirotte/phpfarm/archive/v0.2.0.tar.gz \\\n && mkdir /phpfarm \\\n && tar -xf /phpfarm.tar.gz -C /phpfarm --strip 1 \\\n && rm -rf /phpfarm/src/bzips /phpfarm/src/custom \\\n && mv /phpfarm_mod/* /phpfarm/src/ \\\n && sleep 5s \\\n && rmdir /phpfarm_mod \\\n && cd /phpfarm/src \\\n && ./docker.sh \\\n && apt-get purge -y $SCRIPT_PKGS $BUILD_PKGS \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/*\n#  expose the ports\nEXPOSE 8000/tcp 8051/tcp 8052/tcp 8053/tcp 8054/tcp 8055/tcp 8056/tcp 8070/tcp 8071/tcp 8072/tcp\n#  run it\nWORKDIR /var/www\nCOPY run.sh /run.sh\nCMD [\"/bin/bash\", \"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"877558f13fa7145aeeaf77d5e063afe3","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   PHP Farm Docker image\n#\n#   we use Debian as the host OS\nFROM philcryer/min-wheezy:latest\nLABEL author=\"Andreas Gohr <andi@splitbrain.org>, Eugene Sia <eugene@eugenesia.co.uk>\"\nENV SCRIPT_PKGS=\"  debian-keyring  wget  \" \\\n    BUILD_PKGS=\"  autoconf  build-essential  flex  lemon  pkg-config  \" \\\n    RUNTIME_PKGS=\"  ca-certificates  curl  debian-archive-keyring  imagemagick  libbz2-dev  libc-client2007e-dev  libcurl4-openssl-dev  libfreetype6-dev  libicu-dev  libjpeg-dev  libldap2-dev  libltdl-dev  libmcrypt-dev  libmhash-dev  libmysqlclient-dev  libpng-dev  libpq-dev  libsasl2-dev  libssl-dev  libsslcommon2-dev  libt1-dev  libwebp-dev  libxml2-dev  libxpm-dev  libxslt1-dev  \" \\\n    APACHE_PKGS=\" apache2  apache2-mpm-prefork  libapache2-mod-fcgid  \"\n#   Install Apache and packages we need for runtime usage.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $RUNTIME_PKGS $APACHE_PKGS -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Reconfigure Apache\nRUN rm -rf /var/www/*\n#   Import our Apache configs.\nCOPY var-www /var/www/\nCOPY apache /etc/apache2/\n#   Import our own modifications for the PhpFarm script.\nCOPY phpfarm /phpfarm_mod\n#   The PHP versions to compile.\nENV PHP_FARM_VERSIONS=\"5.1.6 5.2.17 5.3.29 5.4.45 5.5.38 5.6.32 7.0.28 7.1.15 7.2.3\" \\\n    LDFLAGS=\"-lssl -lcrypto -lstdc++\" \\\n    PATH=\"/phpfarm/inst/bin/:$PATH\"\n#   Install packages needed for build.\nRUN apt-get update \\\n && apt-get install --no-install-recommends $SCRIPT_PKGS $BUILD_PKGS -y \\\n && wget -O /phpfarm.tar.gz https://github.com/fpoirotte/phpfarm/archive/v0.2.0.tar.gz \\\n && mkdir /phpfarm \\\n && tar -xf /phpfarm.tar.gz -C /phpfarm --strip 1 \\\n && rm -rf /phpfarm/src/bzips /phpfarm/src/custom \\\n && mv /phpfarm_mod/* /phpfarm/src/ \\\n && sleep 5s \\\n && rmdir /phpfarm_mod \\\n && cd /phpfarm/src \\\n && ./docker.sh \\\n && apt-get purge -y $SCRIPT_PKGS $BUILD_PKGS \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/*\n#   expose the ports\nEXPOSE 8000/tcp 8051/tcp 8052/tcp 8053/tcp 8054/tcp 8055/tcp 8056/tcp 8070/tcp 8071/tcp 8072/tcp\n#   run it\nWORKDIR /var/www\nCOPY run.sh /run.sh\nCMD [\"/bin/bash\", \"/run.sh\"]\n","originalDockerfileUglifiedHash":"e93bedb239cf7cecbc618655c486fb18","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ff4343497e195347a8bf6beddcbb917bf5cdde50.dockerfile"}