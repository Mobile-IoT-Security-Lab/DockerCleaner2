{"seed":215638109,"processedDockerfileHash":"233e67d89f74744592cdfae4095f583a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   A simple Pandoc machine for pandoc with filters, fonts and the latex bazaar\n#\n#   Based on :\n#      https://github.com/jagregory/pandoc-docker/blob/master/Dockerfile\n#      https://github.com/geometalab/docker-pandoc/blob/develop/Dockerfile\n#      https://github.com/vpetersson/docker-pandoc/blob/master/Dockerfile\nFROM debian:stretch-slim\n#   Proxy to APT cacher: e.g. http://apt-cacher-ng.docker:3142\nARG APT_CACHER\n#   Set the env variables to non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBIAN_PRIORITY=\"critical\"\nENV DEBCONF_NOWARNINGS=\"yes\"\n#\n#   Debian\n#\nRUN set -x \\\n && if [ -n \"${APT_CACHER}\" ] ; then echo \"Acquire::http::Proxy \\\"${APT_CACHER}\\\";\" | tee /etc/apt/apt.conf.d/01proxy ; fi ; apt-get update -qq \\\n && apt-get install --no-install-recommends openssh-client rsync locales lmodern texlive texlive-lang-french texlive-lang-german texlive-luatex texlive-pstricks texlive-xetex xzdec netbase fonts-lato fonts-liberation make git parallel wget unzip python3-pip python3-setuptools python3-wheel python3-yaml poppler-utils zlibc librsvg2-bin -qy \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/apt.conf.d/01proxy\n#\n#   Set Locale for UTF-8 support\n#   This is needed for panflute filters see :\n#   https://github.com/dalibo/pandocker/pull/86\n#\nRUN locale-gen C.UTF-8\nENV LANG=\"C.UTF-8\"\n#\n#   SSH pre-config / useful for Gitlab CI\n#\nRUN mkdir -p ~/.ssh \\\n && /bin/echo -e \"Host *\\n\\tStrictHostKeyChecking no\\n\\n\" > ~/.ssh/config\n#\n#   Add local cache/. It's empty by default so this does not change the final\n#   image on Docker Hub.\n#\n#   However, once warmed with make warm-cache, it can save a lots of bandwidth.\n#\nCOPY cache/ ./cache\n#\n#   Install pandoc from upstream. Debian package is too old.\n#\nARG PANDOC_VERSION=2.7\nCOPY fetch-pandoc.sh /usr/local/bin/\nRUN fetch-pandoc.sh ${PANDOC_VERSION} ./cache/pandoc.deb \\\n && dpkg --install ./cache/pandoc.deb \\\n && rm -f ./cache/pandoc.deb\n#\n#   Pandoc filters\n#\nCOPY requirements.txt ./\nRUN pip3 --no-cache-dir install --find-links file://${PWD}/cache -r requirements.txt\n#\n#   eisvogel template\n#\nARG TEMPLATES_DIR=/root/.pandoc/templates\nRUN mkdir -p ${TEMPLATES_DIR} \\\n && wget https://raw.githubusercontent.com/Wandmalfarbe/pandoc-latex-template/master/eisvogel.tex -O ${TEMPLATES_DIR}/eisvogel.latex\nRUN tlmgr init-usertree \\\n && tlmgr install ly1 inconsolata sourcesanspro sourcecodepro mweights noto\n#\n#   emojis support for latex\n#   https://github.com/mreq/xelatex-emoji\n#\nARG TEXMF=/usr/share/texmf/tex/latex/\nARG EMOJI_DIR=/tmp/twemoji\nRUN git clone --single-branch --depth=1 --branch gh-pages https://github.com/twitter/twemoji.git $EMOJI_DIR \\\n && mkdir -p ${TEXMF} \\\n && cd ${TEXMF} \\\n && git clone --single-branch --branch images https://github.com/daamien/xelatex-emoji.git \\\n && cp -r $EMOJI_DIR/2/svg xelatex-emoji/images \\\n && cd xelatex-emoji/images \\\n && ../bin/convert_svgs_to_pdfs ./*.svg \\\n && rm -f *.svg \\\n && rm -fr ${EMOJI_DIR} \\\n && cd ${TEXMF} \\\n && texhash\nVOLUME /pandoc\nWORKDIR /pandoc\n#   Compatibility with Pandoc 1.x arguments\n#   use `--entrypoint=pandoc1.sh` to activate it\nCOPY pandoc1.sh /usr/local/bin\nENTRYPOINT [\"pandoc\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  A simple Pandoc machine for pandoc with filters, fonts and the latex bazaar\n#\n#  Based on :\n#     https://github.com/jagregory/pandoc-docker/blob/master/Dockerfile\n#     https://github.com/geometalab/docker-pandoc/blob/develop/Dockerfile\n#     https://github.com/vpetersson/docker-pandoc/blob/master/Dockerfile\nFROM debian:stretch-slim\n#  Proxy to APT cacher: e.g. http://apt-cacher-ng.docker:3142\nARG APT_CACHER\n#  Set the env variables to non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBIAN_PRIORITY=\"critical\"\nENV DEBCONF_NOWARNINGS=\"yes\"\n#\n#  Debian\n#\nRUN set -x \\\n && if [ -n \"${APT_CACHER}\" ] ; then echo \"Acquire::http::Proxy \\\"${APT_CACHER}\\\";\" | tee /etc/apt/apt.conf.d/01proxy ; fi ; apt-get update -qq \\\n && apt-get install --no-install-recommends openssh-client rsync locales lmodern texlive texlive-lang-french texlive-lang-german texlive-luatex texlive-pstricks texlive-xetex xzdec netbase fonts-lato fonts-liberation make git parallel wget unzip python3-pip python3-setuptools python3-wheel python3-yaml poppler-utils zlibc librsvg2-bin -qy \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/apt.conf.d/01proxy\n#\n#  Set Locale for UTF-8 support\n#  This is needed for panflute filters see :\n#  https://github.com/dalibo/pandocker/pull/86\n#\nRUN locale-gen C.UTF-8\nENV LANG=\"C.UTF-8\"\n#\n#  SSH pre-config / useful for Gitlab CI\n#\nRUN mkdir -p ~/.ssh \\\n && /bin/echo -e \"Host *\\n\\tStrictHostKeyChecking no\\n\\n\" > ~/.ssh/config\n#\n#  Add local cache/. It's empty by default so this does not change the final\n#  image on Docker Hub.\n#\n#  However, once warmed with make warm-cache, it can save a lots of bandwidth.\n#\nADD cache/ ./cache\n#\n#  Install pandoc from upstream. Debian package is too old.\n#\nARG PANDOC_VERSION=2.7\nADD fetch-pandoc.sh /usr/local/bin/\nRUN fetch-pandoc.sh ${PANDOC_VERSION} ./cache/pandoc.deb \\\n && dpkg --install ./cache/pandoc.deb \\\n && rm -f ./cache/pandoc.deb\n#\n#  Pandoc filters\n#\nADD requirements.txt ./\nRUN pip3 --no-cache-dir install --find-links file://${PWD}/cache -r requirements.txt\n#\n#  eisvogel template\n#\nARG TEMPLATES_DIR=/root/.pandoc/templates\nRUN mkdir -p ${TEMPLATES_DIR} \\\n && wget https://raw.githubusercontent.com/Wandmalfarbe/pandoc-latex-template/master/eisvogel.tex -O ${TEMPLATES_DIR}/eisvogel.latex\nRUN tlmgr init-usertree \\\n && tlmgr install ly1 inconsolata sourcesanspro sourcecodepro mweights noto\n#\n#  emojis support for latex\n#  https://github.com/mreq/xelatex-emoji\n#\nARG TEXMF=/usr/share/texmf/tex/latex/\nARG EMOJI_DIR=/tmp/twemoji\nRUN git clone --single-branch --depth=1 --branch gh-pages https://github.com/twitter/twemoji.git $EMOJI_DIR \\\n && mkdir -p ${TEXMF} \\\n && cd ${TEXMF} \\\n && git clone --single-branch --branch images https://github.com/daamien/xelatex-emoji.git \\\n && cp -r $EMOJI_DIR/2/svg xelatex-emoji/images \\\n && cd xelatex-emoji/images \\\n && ../bin/convert_svgs_to_pdfs ./*.svg \\\n && rm -f *.svg \\\n && rm -fr ${EMOJI_DIR} \\\n && cd ${TEXMF} \\\n && texhash\nVOLUME /pandoc\nWORKDIR /pandoc\n#  Compatibility with Pandoc 1.x arguments\n#  use `--entrypoint=pandoc1.sh` to activate it\nADD pandoc1.sh /usr/local/bin\nENTRYPOINT [\"pandoc\"]\n","injectedSmells":[],"originalDockerfileHash":"7a565b0c8c72be66befe71e90cda605d","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   A simple Pandoc machine for pandoc with filters, fonts and the latex bazaar\n#\n#   Based on :\n#      https://github.com/jagregory/pandoc-docker/blob/master/Dockerfile\n#      https://github.com/geometalab/docker-pandoc/blob/develop/Dockerfile\n#      https://github.com/vpetersson/docker-pandoc/blob/master/Dockerfile\nFROM debian:stretch-slim\n#   Proxy to APT cacher: e.g. http://apt-cacher-ng.docker:3142\nARG APT_CACHER\n#   Set the env variables to non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV DEBIAN_PRIORITY=\"critical\"\nENV DEBCONF_NOWARNINGS=\"yes\"\n#\n#   Debian\n#\nRUN set -x \\\n && if [ -n \"${APT_CACHER}\" ] ; then echo \"Acquire::http::Proxy \\\"${APT_CACHER}\\\";\" | tee /etc/apt/apt.conf.d/01proxy ; fi ; apt-get update -qq \\\n && apt-get install --no-install-recommends openssh-client rsync locales lmodern texlive texlive-lang-french texlive-lang-german texlive-luatex texlive-pstricks texlive-xetex xzdec netbase fonts-lato fonts-liberation make git parallel wget unzip python3-pip python3-setuptools python3-wheel python3-yaml poppler-utils zlibc librsvg2-bin -qy \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/apt.conf.d/01proxy\n#\n#   Set Locale for UTF-8 support\n#   This is needed for panflute filters see :\n#   https://github.com/dalibo/pandocker/pull/86\n#\nRUN locale-gen C.UTF-8\nENV LANG=\"C.UTF-8\"\n#\n#   SSH pre-config / useful for Gitlab CI\n#\nRUN mkdir -p ~/.ssh \\\n && /bin/echo -e \"Host *\\n\\tStrictHostKeyChecking no\\n\\n\" > ~/.ssh/config\n#\n#   Add local cache/. It's empty by default so this does not change the final\n#   image on Docker Hub.\n#\n#   However, once warmed with make warm-cache, it can save a lots of bandwidth.\n#\nADD cache/ ./cache\n#\n#   Install pandoc from upstream. Debian package is too old.\n#\nARG PANDOC_VERSION=2.7\nADD fetch-pandoc.sh /usr/local/bin/\nRUN fetch-pandoc.sh ${PANDOC_VERSION} ./cache/pandoc.deb \\\n && dpkg --install ./cache/pandoc.deb \\\n && rm -f ./cache/pandoc.deb\n#\n#   Pandoc filters\n#\nADD requirements.txt ./\nRUN pip3 --no-cache-dir install --find-links file://${PWD}/cache -r requirements.txt\n#\n#   eisvogel template\n#\nARG TEMPLATES_DIR=/root/.pandoc/templates\nRUN mkdir -p ${TEMPLATES_DIR} \\\n && wget https://raw.githubusercontent.com/Wandmalfarbe/pandoc-latex-template/master/eisvogel.tex -O ${TEMPLATES_DIR}/eisvogel.latex\nRUN tlmgr init-usertree \\\n && tlmgr install ly1 inconsolata sourcesanspro sourcecodepro mweights noto\n#\n#   emojis support for latex\n#   https://github.com/mreq/xelatex-emoji\n#\nARG TEXMF=/usr/share/texmf/tex/latex/\nARG EMOJI_DIR=/tmp/twemoji\nRUN git clone --single-branch --depth=1 --branch gh-pages https://github.com/twitter/twemoji.git $EMOJI_DIR \\\n && mkdir -p ${TEXMF} \\\n && cd ${TEXMF} \\\n && git clone --single-branch --branch images https://github.com/daamien/xelatex-emoji.git \\\n && cp -r $EMOJI_DIR/2/svg xelatex-emoji/images \\\n && cd xelatex-emoji/images \\\n && ../bin/convert_svgs_to_pdfs ./*.svg \\\n && rm -f *.svg \\\n && rm -fr ${EMOJI_DIR} \\\n && cd ${TEXMF} \\\n && texhash\nVOLUME /pandoc\nWORKDIR /pandoc\n#   Compatibility with Pandoc 1.x arguments\n#   use `--entrypoint=pandoc1.sh` to activate it\nADD pandoc1.sh /usr/local/bin\nENTRYPOINT [\"pandoc\"]\n","originalDockerfileUglifiedHash":"e04b21d6c4be0077440553e037d13165","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/63f3971e55c523214ee793f436a2bfb4948e1670.dockerfile"}