{"seed":2346782148,"processedDockerfileHash":"c0c86698768222985d27d482260ab439","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.7\nLABEL maintainer=\"Denis Makogon. mail: lildee1991@gmail.com\"\nENV FFMPEG_VERSION=\"4.0\"\nENV FFMPEG_CORE=\"bash  tzdata  libass  libstdc++  libpng  libjpeg  xvidcore  x264-libs  x265  libvpx  libvorbis  opus  lame  fdk-aac  freetype  libcrypto1.0  libssl1.0  jasper-libs  libavc1394  yasm\"\nENV RUNTIME_DEPS=\"coreutils  make  cmake  gcc  g++  clang  linux-headers  git  curl\"\nENV BUILD_DEPS=\"fdk-aac-dev  freetype-dev  x264-dev  x265-dev  yasm-dev  libogg-dev  libvorbis-dev  opus-dev  libvpx-dev  lame-dev  xvidcore-dev  libass-dev  openssl-dev  musl-dev  build-base  libjpeg-turbo-dev  libpng-dev  jasper-dev  libavc1394-dev  libavc1394-dev  clang-dev\"\n#   FFMPEG\nRUN apk update \\\n && apk add apk-tools=2.10.1-r0 --no-cache \\\n && echo http://nl.alpinelinux.org/alpine/edge/testing >> /etc/apk/repositories \\\n && apk update \\\n && apk add ${RUNTIME_DEPS} --no-cache --virtual .runtime-deps \\\n && apk add ${FFMPEG_CORE} --no-cache \\\n && apk add ${BUILD_DEPS} --no-cache --virtual .build-deps \\\n && export SRC=/usr DIR=$( mktemp -d ;) \\\n && cd ${DIR} \\\n && curl -Os http://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && tar xzvf ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && cd ffmpeg-${FFMPEG_VERSION} \\\n && ./configure --prefix=\"${SRC}\" --extra-cflags=\"-I${SRC}/include\" --extra-ldflags=\"-L${SRC}/lib\" --bindir=\"${SRC}/bin\" --extra-libs=-ldl --enable-version3 --enable-libmp3lame --enable-pthreads --enable-libx264 --enable-libxvid --enable-gpl --enable-postproc --enable-nonfree --enable-avresample --enable-libfdk-aac --disable-debug --enable-small --enable-openssl --enable-libx265 --enable-libopus --enable-libvorbis --enable-libvpx --enable-libfreetype --enable-libass --enable-shared --enable-pic \\\n && make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && cd /tmp \\\n && rm -rf ${DIR} \\\n && apk del .build-deps \\\n && apk del .runtime-deps \\\n && rm -rf /var/cache/apk/*\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.7\nLABEL maintainer=\"Denis Makogon. mail: lildee1991@gmail.com\"\nENV FFMPEG_VERSION=\"4.0\"\nENV FFMPEG_CORE=\"bash  tzdata  libass  libstdc++  libpng  libjpeg  xvidcore  x264-libs  x265  libvpx  libvorbis  opus  lame  fdk-aac  freetype  libcrypto1.0  libssl1.0  jasper-libs  libavc1394  yasm\"\nENV RUNTIME_DEPS=\"coreutils  make  cmake  gcc  g++  clang  linux-headers  git  curl\"\nENV BUILD_DEPS=\"fdk-aac-dev  freetype-dev  x264-dev  x265-dev  yasm-dev  libogg-dev  libvorbis-dev  opus-dev  libvpx-dev  lame-dev  xvidcore-dev  libass-dev  openssl-dev  musl-dev  build-base  libjpeg-turbo-dev  libpng-dev  jasper-dev  libavc1394-dev  libavc1394-dev  clang-dev\"\n#  FFMPEG\nRUN apk update \\\n && apk add --no-cache apk-tools \\\n && echo http://nl.alpinelinux.org/alpine/edge/testing >> /etc/apk/repositories \\\n && apk update \\\n && apk add --no-cache --virtual .runtime-deps ${RUNTIME_DEPS} \\\n && apk add --no-cache ${FFMPEG_CORE} \\\n && apk add --no-cache --virtual .build-deps ${BUILD_DEPS} \\\n && export SRC=/usr DIR=$( mktemp -d ;) \\\n && cd ${DIR} \\\n && curl -Os http://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && tar xzvf ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && cd ffmpeg-${FFMPEG_VERSION} \\\n && ./configure --prefix=\"${SRC}\" --extra-cflags=\"-I${SRC}/include\" --extra-ldflags=\"-L${SRC}/lib\" --bindir=\"${SRC}/bin\" --extra-libs=-ldl --enable-version3 --enable-libmp3lame --enable-pthreads --enable-libx264 --enable-libxvid --enable-gpl --enable-postproc --enable-nonfree --enable-avresample --enable-libfdk-aac --disable-debug --enable-small --enable-openssl --enable-libx265 --enable-libopus --enable-libvorbis --enable-libvpx --enable-libfreetype --enable-libass --enable-shared --enable-pic \\\n && make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && cd /tmp \\\n && rm -rf ${DIR} \\\n && apk del .build-deps \\\n && apk del .runtime-deps \\\n && rm -rf /var/cache/apk/*\n","injectedSmells":[],"originalDockerfileHash":"0dba13d9b27c77860a4969008be10dc4","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.7\nLABEL maintainer=\"Denis Makogon. mail: lildee1991@gmail.com\"\nENV FFMPEG_VERSION=\"4.0\"\nENV FFMPEG_CORE=\"bash  tzdata  libass  libstdc++  libpng  libjpeg  xvidcore  x264-libs  x265  libvpx  libvorbis  opus  lame  fdk-aac  freetype  libcrypto1.0  libssl1.0  jasper-libs  libavc1394  yasm\"\nENV RUNTIME_DEPS=\"coreutils  make  cmake  gcc  g++  clang  linux-headers  git  curl\"\nENV BUILD_DEPS=\"fdk-aac-dev  freetype-dev  x264-dev  x265-dev  yasm-dev  libogg-dev  libvorbis-dev  opus-dev  libvpx-dev  lame-dev  xvidcore-dev  libass-dev  openssl-dev  musl-dev  build-base  libjpeg-turbo-dev  libpng-dev  jasper-dev  libavc1394-dev  libavc1394-dev  clang-dev\"\n#   FFMPEG\nRUN apk update \\\n && apk add --no-cache apk-tools \\\n && echo http://nl.alpinelinux.org/alpine/edge/testing >> /etc/apk/repositories \\\n && apk update \\\n && apk add --no-cache --virtual .runtime-deps ${RUNTIME_DEPS} \\\n && apk add --no-cache ${FFMPEG_CORE} \\\n && apk add --no-cache --virtual .build-deps ${BUILD_DEPS} \\\n && export SRC=/usr DIR=$( mktemp -d ;) \\\n && cd ${DIR} \\\n && curl -Os http://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && tar xzvf ffmpeg-${FFMPEG_VERSION}.tar.gz \\\n && cd ffmpeg-${FFMPEG_VERSION} \\\n && ./configure --prefix=\"${SRC}\" --extra-cflags=\"-I${SRC}/include\" --extra-ldflags=\"-L${SRC}/lib\" --bindir=\"${SRC}/bin\" --extra-libs=-ldl --enable-version3 --enable-libmp3lame --enable-pthreads --enable-libx264 --enable-libxvid --enable-gpl --enable-postproc --enable-nonfree --enable-avresample --enable-libfdk-aac --disable-debug --enable-small --enable-openssl --enable-libx265 --enable-libopus --enable-libvorbis --enable-libvpx --enable-libfreetype --enable-libass --enable-shared --enable-pic \\\n && make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && cd /tmp \\\n && rm -rf ${DIR} \\\n && apk del .build-deps \\\n && apk del .runtime-deps \\\n && rm -rf /var/cache/apk/*\n","originalDockerfileUglifiedHash":"a315988a71e7592f78e11fbfce1df379","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/bb0d101f5ffa58920670d7b9a731615abd7fccd8.dockerfile"}