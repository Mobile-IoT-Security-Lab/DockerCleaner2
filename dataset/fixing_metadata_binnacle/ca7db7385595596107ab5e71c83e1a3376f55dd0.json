{"seed":1363507525,"processedDockerfileHash":"b1fffc6e95fecd820e00d4bec8f60882","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nCMD [\"/sbin/my_init\"]\n#   Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#   Expose ports\nEXPOSE 3310/tcp 3389/tcp 5000/udp 5002/udp 5004/udp 6543/tcp 6544/tcp 6760/tcp 65001/tcp 65001/udp\n#   Add local files\nCOPY src/ /root/\n#   set volumes\nVOLUME /db /home/mythtv\n#   chfn workaround - Known issue within Dockers\nRUN ln -s -f /bin/true /usr/bin/chfn \\\n && locale-gen en_US.UTF-8 \\\n && mv /root/001-fix-the-time.sh /etc/my_init.d/001-fix-the-time.sh \\\n && mv /root/002-fix-the-config-etc.sh /etc/my_init.d/002-fix-the-config-etc.sh \\\n && mv /root/003-bring-up-the-database.sh /etc/my_init.d/003-bring-up-the-database.sh \\\n && mv /root/004-bring-up-rdp.sh /etc/my_init.d/004-bring-up-rdp.sh \\\n && mv /root/005-bring-up-the-backend.sh /etc/my_init.d/005-bring-up-the-backend.sh \\\n && mv /root/006-bring-up-mythweb.sh /etc/my_init.d/006-bring-up-mythweb.sh \\\n && chmod +x /etc/my_init.d/* \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && apt-add-repository ppa:ubuntu-mate-dev/ppa \\\n && apt-add-repository ppa:ubuntu-mate-dev/trusty-mate \\\n && sh -c 'echo \"deb http://ftp.osuosl.org/pub/mariadb/repo/5.5/ubuntu trusty main\" >> /etc/apt/sources.list.d/mariadb.list' \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys CBCB082A1BB943DB \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends wget openjdk-7-jre sudo mate-desktop-environment-core x11vnc xvfb gtk2-engines-murrine ttf-ubuntu-font-family supervisor -qy --force-yes \\\n && apt-get install --no-install-recommends xrdp -y \\\n && mv /root/xrdp.ini /etc/xrdp/xrdp.ini \\\n && apt-get install --no-install-recommends mariadb-server pwgen mythtv-backend -y \\\n && apt-get install --no-install-recommends mythweb -y \\\n && sed -i \"s/short_open_tag = Off/short_open_tag = On/\" /etc/php5/apache2/php.ini \\\n && sed -i \"s/error_reporting = .*$/error_reporting = E_ERROR | E_WARNING | E_PARSE/\" /etc/php5/apache2/php.ini \\\n && mv /root/ports.conf /etc/apache2/ports.conf \\\n && mv /root/000-default-mythbuntu.conf /etc/apache2/sites-available/000-default-mythbuntu.conf \\\n && mv /root/mythweb.conf /etc/apache2/sites-available/mythweb.conf \\\n && ln -s /etc/apache2/mods-available/cgi.load /etc/apache2/mods-enabled/cgi.load \\\n && echo AddHandler cgi-script .cgi .pl >> /etc/apache2/mods-enabled/mime.conf \\\n && mv /root/my.cnf /etc/mysql/my.cnf \\\n && usermod -u 99 mythtv \\\n && usermod -g 100 mythtv \\\n && mkdir -p /home/mythtv/.mythtv /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld /root/.mythtv \\\n && touch /var/log/mysql/mysql.log \\\n && echo \"mythtv:mythtv\" | chpasswd \\\n && usermod -s /bin/bash -d /home/mythtv -a -G users,mythtv,adm,sudo mythtv \\\n && chown -R mythtv:users /db /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.16\n#  Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nCMD [\"/sbin/my_init\"]\n#  Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#  Expose ports\nEXPOSE 3310/tcp 3389/tcp 5000/udp 5002/udp 5004/udp 6543/tcp 6544/tcp 6760/tcp 65001/tcp 65001/udp\n#  Add local files\nADD src/ /root/\n#  set volumes\nVOLUME /db /home/mythtv\n#  chfn workaround - Known issue within Dockers\nRUN ln -s -f /bin/true /usr/bin/chfn \\\n && locale-gen en_US.UTF-8 \\\n && mv /root/001-fix-the-time.sh /etc/my_init.d/001-fix-the-time.sh \\\n && mv /root/002-fix-the-config-etc.sh /etc/my_init.d/002-fix-the-config-etc.sh \\\n && mv /root/003-bring-up-the-database.sh /etc/my_init.d/003-bring-up-the-database.sh \\\n && mv /root/004-bring-up-rdp.sh /etc/my_init.d/004-bring-up-rdp.sh \\\n && mv /root/005-bring-up-the-backend.sh /etc/my_init.d/005-bring-up-the-backend.sh \\\n && mv /root/006-bring-up-mythweb.sh /etc/my_init.d/006-bring-up-mythweb.sh \\\n && chmod +x /etc/my_init.d/* \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && apt-add-repository ppa:ubuntu-mate-dev/ppa \\\n && apt-add-repository ppa:ubuntu-mate-dev/trusty-mate \\\n && sh -c 'echo \"deb http://ftp.osuosl.org/pub/mariadb/repo/5.5/ubuntu trusty main\" >> /etc/apt/sources.list.d/mariadb.list' \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys CBCB082A1BB943DB \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends wget openjdk-7-jre sudo mate-desktop-environment-core x11vnc xvfb gtk2-engines-murrine ttf-ubuntu-font-family supervisor -qy --force-yes \\\n && apt-get install xrdp -y \\\n && mv /root/xrdp.ini /etc/xrdp/xrdp.ini \\\n && apt-get install mariadb-server pwgen mythtv-backend -y \\\n && apt-get install mythweb -y \\\n && sed -i \"s/short_open_tag = Off/short_open_tag = On/\" /etc/php5/apache2/php.ini \\\n && sed -i \"s/error_reporting = .*$/error_reporting = E_ERROR | E_WARNING | E_PARSE/\" /etc/php5/apache2/php.ini \\\n && mv /root/ports.conf /etc/apache2/ports.conf \\\n && mv /root/000-default-mythbuntu.conf /etc/apache2/sites-available/000-default-mythbuntu.conf \\\n && mv /root/mythweb.conf /etc/apache2/sites-available/mythweb.conf \\\n && ln -s /etc/apache2/mods-available/cgi.load /etc/apache2/mods-enabled/cgi.load \\\n && echo AddHandler cgi-script .cgi .pl >> /etc/apache2/mods-enabled/mime.conf \\\n && mv /root/my.cnf /etc/mysql/my.cnf \\\n && usermod -u 99 mythtv \\\n && usermod -g 100 mythtv \\\n && mkdir -p /home/mythtv/.mythtv /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld /root/.mythtv \\\n && touch /var/log/mysql/mysql.log \\\n && echo \"mythtv:mythtv\" | chpasswd \\\n && usermod -s /bin/bash -d /home/mythtv -a -G users,mythtv,adm,sudo mythtv \\\n && chown -R mythtv:users /db /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","injectedSmells":[],"originalDockerfileHash":"bb59de6bfcafdc5a7fc58bd951457945","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nCMD [\"/sbin/my_init\"]\n#   Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#   Expose ports\nEXPOSE 3310/tcp 3389/tcp 5000/udp 5002/udp 5004/udp 6543/tcp 6544/tcp 6760/tcp 65001/tcp 65001/udp\n#   Add local files\nADD src/ /root/\n#   set volumes\nVOLUME /db /home/mythtv\n#   chfn workaround - Known issue within Dockers\nRUN ln -s -f /bin/true /usr/bin/chfn \\\n && locale-gen en_US.UTF-8 \\\n && mv /root/001-fix-the-time.sh /etc/my_init.d/001-fix-the-time.sh \\\n && mv /root/002-fix-the-config-etc.sh /etc/my_init.d/002-fix-the-config-etc.sh \\\n && mv /root/003-bring-up-the-database.sh /etc/my_init.d/003-bring-up-the-database.sh \\\n && mv /root/004-bring-up-rdp.sh /etc/my_init.d/004-bring-up-rdp.sh \\\n && mv /root/005-bring-up-the-backend.sh /etc/my_init.d/005-bring-up-the-backend.sh \\\n && mv /root/006-bring-up-mythweb.sh /etc/my_init.d/006-bring-up-mythweb.sh \\\n && chmod +x /etc/my_init.d/* \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://archive.ubuntu.com/ubuntu/ trusty-updates multiverse\" >> /etc/apt/sources.list \\\n && apt-add-repository ppa:ubuntu-mate-dev/ppa \\\n && apt-add-repository ppa:ubuntu-mate-dev/trusty-mate \\\n && sh -c 'echo \"deb http://ftp.osuosl.org/pub/mariadb/repo/5.5/ubuntu trusty main\" >> /etc/apt/sources.list.d/mariadb.list' \\\n && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys CBCB082A1BB943DB \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends wget openjdk-7-jre sudo mate-desktop-environment-core x11vnc xvfb gtk2-engines-murrine ttf-ubuntu-font-family supervisor -qy --force-yes \\\n && apt-get install xrdp -y \\\n && mv /root/xrdp.ini /etc/xrdp/xrdp.ini \\\n && apt-get install mariadb-server pwgen mythtv-backend -y \\\n && apt-get install mythweb -y \\\n && sed -i \"s/short_open_tag = Off/short_open_tag = On/\" /etc/php5/apache2/php.ini \\\n && sed -i \"s/error_reporting = .*$/error_reporting = E_ERROR | E_WARNING | E_PARSE/\" /etc/php5/apache2/php.ini \\\n && mv /root/ports.conf /etc/apache2/ports.conf \\\n && mv /root/000-default-mythbuntu.conf /etc/apache2/sites-available/000-default-mythbuntu.conf \\\n && mv /root/mythweb.conf /etc/apache2/sites-available/mythweb.conf \\\n && ln -s /etc/apache2/mods-available/cgi.load /etc/apache2/mods-enabled/cgi.load \\\n && echo AddHandler cgi-script .cgi .pl >> /etc/apache2/mods-enabled/mime.conf \\\n && mv /root/my.cnf /etc/mysql/my.cnf \\\n && usermod -u 99 mythtv \\\n && usermod -g 100 mythtv \\\n && mkdir -p /home/mythtv/.mythtv /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld /root/.mythtv \\\n && touch /var/log/mysql/mysql.log \\\n && echo \"mythtv:mythtv\" | chpasswd \\\n && usermod -s /bin/bash -d /home/mythtv -a -G users,mythtv,adm,sudo mythtv \\\n && chown -R mythtv:users /db /var/lib/mythtv /var/log/mythtv /var/log/mysql /var/run/mysqld \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","originalDockerfileUglifiedHash":"900331927f93889ef8167e1325c29431","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ca7db7385595596107ab5e71c83e1a3376f55dd0.dockerfile"}