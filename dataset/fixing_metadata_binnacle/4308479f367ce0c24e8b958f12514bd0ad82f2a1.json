{"seed":3109003081,"processedDockerfileHash":"384ca30d250559eb4b885f43658f5163","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   xDams DOCKERFILE 1.2 \n#   CREA IMMAGINE\n#   docker build -t=\"regesta/xdams\" .\n#   CREA CONTAINER\n#   docker run -dt --name xdams -p 8080:8080 regesta/xdams\n#   ACCEDI A CONTAINER\n#   docker exec -it xdams bash\n#   START CONTAINER\n#   docker start xdams\n#   STOP CONTAINER\n#   docker stop xdams\nFROM centos:latest\nMAINTAINER regesta \"info@xdams.org\"\nRUN yum -y -q update\nRUN yum install unzip zip wget nano -y\nRUN yum install libxslt.i686 -y\nRUN yum install libstdc++.i686 -y\nRUN yum install epel-release -y\nRUN yum -y -q update\nRUN yum install net-tools -y\nRUN yum install htop -y\n#   USERS\nRUN useradd -ms /bin/bash extraway\nRUN useradd -ms /bin/bash tomcat\nRUN echo \"extraway:extraway\" | chpasswd\nRUN echo \"tomcat:tomcat\" | chpasswd\n#   EXTRAWAY\nRUN wget http://media.regesta.com/dm_0/REGESTA/extraway/eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN unzip eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN mv /eXtraWay_OpenPlatform-1.0.0-linux-x64/* /opt\nCOPY context.stat.xml /opt/it-3di/extraway/xw/context\nCOPY xw.ini /opt/it-3di/extraway/xw/conf\nRUN chmod -R 755 /opt\nRUN chown -R extraway:extraway /opt\nRUN echo \"#!/bin/sh\" >> /etc/init.d/extraway\nRUN echo \"# Script di supporto per boot/shutdown: 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# @(#) HighWay_Version 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# $Id: HighWay_Version 0.0.2.0 $\" >> /etc/init.d/extraway\nRUN echo \"# chkconfig: 345 80 20\" >> /etc/init.d/extraway\nRUN echo \"# description: eXtraWay services: eXtraWay Server (xw)\" >> /etc/init.d/extraway\nRUN echo \"# Provides: xw\" >> /etc/init.d/extraway\nRUN echo \"# Required-Start: $local_fs $network $named $time\" >> /etc/init.d/extraway\nRUN echo \"# Required-Stop: $local_fs $network $time\" >> /etc/init.d/extraway\nRUN echo \"# Default-Start: 3 4 5\" >> /etc/init.d/extraway\nRUN echo \"# Default-Stop: 0 1 2 6\" >> /etc/init.d/extraway\nRUN echo \"# Short-Description: start and stop eXtraWay services\" >> /etc/init.d/extraway\nRUN echo \"# Description: start and stop eXtraWay server (xw) and eXtraWay log server\" >> /etc/init.d/extraway\nRUN echo \"# (xwls)\" >> /etc/init.d/extraway\nRUN echo \"lockdir='/var/lock/subsys'\" >> /etc/init.d/extraway\nRUN echo \"lockfile='extraway'\" >> /etc/init.d/extraway\nRUN echo \"if [ -d $lockdir ] \\\n && [ \\\"`id -u `\\\" = \\\"0\\\" ]; then\" >> /etc/init.d/extraway\nRUN echo \" case \\\"$1\\\" in\" >> /etc/init.d/extraway\nRUN echo \" start|restart)\" >> /etc/init.d/extraway\nRUN echo \" touch $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" stop)\" >> /etc/init.d/extraway\nRUN echo \" rm -f $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" esac\" >> /etc/init.d/extraway\nRUN echo \"fi\" >> /etc/init.d/extraway\nRUN echo \"/opt/it-3di/extra/init-files/extraway \\\"$1\\\"\" >> /etc/init.d/extraway\nRUN chmod +x /etc/init.d/extraway\n#   JAVA\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/jdk-8u162-linux-x64.tar.gz\nRUN tar -zxvf jdk-8u162-linux-x64.tar.gz\nRUN mv /jdk1.8.0_162 /usr/local\nRUN update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/local/jdk1.8.0_162/bin/java\" 1\n#   TOMCAT\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/apache-tomcat-8.5.27.zip\nRUN unzip apache-tomcat-8.5.27.zip\nRUN mv /apache-tomcat-8.5.27 /usr/local\nRUN echo \"<meta http-equiv='refresh' content='0;URL=xDams'>\" >> /usr/local/apache-tomcat-8.5.27/webapps/ROOT/index.html\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost\nRUN echo \"<Context path='/xDams' docBase='/opt/apps/xDams'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xDams.xml\nRUN echo \"<Context path='/xway' docBase='/opt/apps/xway'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xway.xml\nRUN chmod -R 755 /usr/local/apache-tomcat-8.5.27\nRUN chown -R tomcat:tomcat /usr/local/apache-tomcat-8.5.27\nRUN touch velocity.log\nRUN chown tomcat:tomcat velocity.log\nRUN echo \"#!/bin/bash\" >> /etc/init.d/tomcat\nRUN echo \"# description: Tomcat Start Stop Restart\" >> /etc/init.d/tomcat\nRUN echo \"# processname: tomcat\" >> /etc/init.d/tomcat\nRUN echo \"# chkconfig: 234 20 80\" >> /etc/init.d/tomcat\nRUN echo \"JAVA_HOME=/usr/local/jdk1.8.0_162\" >> /etc/init.d/tomcat\nRUN echo \"export JAVA_HOME\" >> /etc/init.d/tomcat\nRUN echo \"PATH=$JAVA_HOME/bin:$PATH\" >> /etc/init.d/tomcat\nRUN echo \"export PATH\" >> /etc/init.d/tomcat\nRUN echo \"CATALINA_HOME=/usr/local/apache-tomcat-8.5.27/bin\" >> /etc/init.d/tomcat\nRUN echo \"case $1 in\" >> /etc/init.d/tomcat\nRUN echo \"start)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"stop)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"restart)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"esac\" >> /etc/init.d/tomcat\nRUN echo \"exit 0\" >> /etc/init.d/tomcat\nRUN chmod +x /etc/init.d/tomcat\n#   xDams\nRUN mkdir /opt/apps\nRUN mkdir /opt/apps/xDams\nRUN mkdir /opt/apps/xway\nRUN wget https://github.com/xdamsorg/xDams-core/archive/master.zip\nRUN unzip master.zip\nRUN mv /xDams-core-master/dist/xDams.war /opt/apps/xDams\nRUN unzip /opt/apps/xDams/xDams.war -d /opt/apps/xDams\nRUN rm /opt/apps/xDams/xDams.war\nRUN mv /opt/it-3di/console/xway /opt/apps\nRUN mv /xDams-core-master/extraway-archive /xDams-core-master/db\nRUN mv /xDams-core-master/db /opt\nRUN rm -Rf /xDams-core-master\nCOPY web.xml /opt/apps/xway/WEB-INF\nCOPY servlet-context.xml /opt/apps/xDams/WEB-INF/spring/appServlet\nCOPY index.html /opt/apps/xway\nRUN chown -R extraway:tomcat /opt/db\nRUN chmod -R 775 /opt/db\nRUN chown -R tomcat:tomcat /opt/apps\nRUN usermod -a -G tomcat extraway\nRUN echo \"/etc/init.d/extraway stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/extraway start\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat start\" >> /etc/init.d/start\nRUN chmod +x /etc/init.d/start\nENTRYPOINT /etc/init.d/start \\\n && bash\nEXPOSE 8080/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  xDams DOCKERFILE 1.2 \n#  CREA IMMAGINE\n#  docker build -t=\"regesta/xdams\" .\n#  CREA CONTAINER\n#  docker run -dt --name xdams -p 8080:8080 regesta/xdams\n#  ACCEDI A CONTAINER\n#  docker exec -it xdams bash\n#  START CONTAINER\n#  docker start xdams\n#  STOP CONTAINER\n#  docker stop xdams\nFROM centos:latest\nMAINTAINER regesta \"info@xdams.org\"\nRUN yum -y -q update\nRUN yum install unzip zip wget nano -y\nRUN yum install libxslt.i686 -y\nRUN yum install libstdc++.i686 -y\nRUN yum install epel-release -y\nRUN yum -y -q update\nRUN yum install net-tools -y\nRUN yum install htop -y\n#  USERS\nRUN useradd -ms /bin/bash extraway\nRUN useradd -ms /bin/bash tomcat\nRUN echo \"extraway:extraway\" | chpasswd\nRUN echo \"tomcat:tomcat\" | chpasswd\n#  EXTRAWAY\nRUN wget http://media.regesta.com/dm_0/REGESTA/extraway/eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN unzip eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN mv /eXtraWay_OpenPlatform-1.0.0-linux-x64/* /opt\nCOPY context.stat.xml /opt/it-3di/extraway/xw/context\nCOPY xw.ini /opt/it-3di/extraway/xw/conf\nRUN chmod -R 755 /opt\nRUN chown -R extraway:extraway /opt\nRUN echo \"#!/bin/sh\" >> /etc/init.d/extraway\nRUN echo \"# Script di supporto per boot/shutdown: 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# @(#) HighWay_Version 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# $Id: HighWay_Version 0.0.2.0 $\" >> /etc/init.d/extraway\nRUN echo \"# chkconfig: 345 80 20\" >> /etc/init.d/extraway\nRUN echo \"# description: eXtraWay services: eXtraWay Server (xw)\" >> /etc/init.d/extraway\nRUN echo \"# Provides: xw\" >> /etc/init.d/extraway\nRUN echo \"# Required-Start: $local_fs $network $named $time\" >> /etc/init.d/extraway\nRUN echo \"# Required-Stop: $local_fs $network $time\" >> /etc/init.d/extraway\nRUN echo \"# Default-Start: 3 4 5\" >> /etc/init.d/extraway\nRUN echo \"# Default-Stop: 0 1 2 6\" >> /etc/init.d/extraway\nRUN echo \"# Short-Description: start and stop eXtraWay services\" >> /etc/init.d/extraway\nRUN echo \"# Description: start and stop eXtraWay server (xw) and eXtraWay log server\" >> /etc/init.d/extraway\nRUN echo \"# (xwls)\" >> /etc/init.d/extraway\nRUN echo \"lockdir='/var/lock/subsys'\" >> /etc/init.d/extraway\nRUN echo \"lockfile='extraway'\" >> /etc/init.d/extraway\nRUN echo \"if [ -d $lockdir ] \\\n && [ \\\"`id -u `\\\" = \\\"0\\\" ]; then\" >> /etc/init.d/extraway\nRUN echo \" case \\\"$1\\\" in\" >> /etc/init.d/extraway\nRUN echo \" start|restart)\" >> /etc/init.d/extraway\nRUN echo \" touch $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" stop)\" >> /etc/init.d/extraway\nRUN echo \" rm -f $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" esac\" >> /etc/init.d/extraway\nRUN echo \"fi\" >> /etc/init.d/extraway\nRUN echo \"/opt/it-3di/extra/init-files/extraway \\\"$1\\\"\" >> /etc/init.d/extraway\nRUN chmod +x /etc/init.d/extraway\n#  JAVA\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/jdk-8u162-linux-x64.tar.gz\nRUN tar -zxvf jdk-8u162-linux-x64.tar.gz\nRUN mv /jdk1.8.0_162 /usr/local\nRUN update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/local/jdk1.8.0_162/bin/java\" 1\n#  TOMCAT\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/apache-tomcat-8.5.27.zip\nRUN unzip apache-tomcat-8.5.27.zip\nRUN mv /apache-tomcat-8.5.27 /usr/local\nRUN echo \"<meta http-equiv='refresh' content='0;URL=xDams'>\" >> /usr/local/apache-tomcat-8.5.27/webapps/ROOT/index.html\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost\nRUN echo \"<Context path='/xDams' docBase='/opt/apps/xDams'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xDams.xml\nRUN echo \"<Context path='/xway' docBase='/opt/apps/xway'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xway.xml\nRUN chmod -R 755 /usr/local/apache-tomcat-8.5.27\nRUN chown -R tomcat:tomcat /usr/local/apache-tomcat-8.5.27\nRUN touch velocity.log\nRUN chown tomcat:tomcat velocity.log\nRUN echo \"#!/bin/bash\" >> /etc/init.d/tomcat\nRUN echo \"# description: Tomcat Start Stop Restart\" >> /etc/init.d/tomcat\nRUN echo \"# processname: tomcat\" >> /etc/init.d/tomcat\nRUN echo \"# chkconfig: 234 20 80\" >> /etc/init.d/tomcat\nRUN echo \"JAVA_HOME=/usr/local/jdk1.8.0_162\" >> /etc/init.d/tomcat\nRUN echo \"export JAVA_HOME\" >> /etc/init.d/tomcat\nRUN echo \"PATH=$JAVA_HOME/bin:$PATH\" >> /etc/init.d/tomcat\nRUN echo \"export PATH\" >> /etc/init.d/tomcat\nRUN echo \"CATALINA_HOME=/usr/local/apache-tomcat-8.5.27/bin\" >> /etc/init.d/tomcat\nRUN echo \"case $1 in\" >> /etc/init.d/tomcat\nRUN echo \"start)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"stop)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"restart)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"esac\" >> /etc/init.d/tomcat\nRUN echo \"exit 0\" >> /etc/init.d/tomcat\nRUN chmod +x /etc/init.d/tomcat\n#  xDams\nRUN mkdir /opt/apps\nRUN mkdir /opt/apps/xDams\nRUN mkdir /opt/apps/xway\nRUN wget https://github.com/xdamsorg/xDams-core/archive/master.zip\nRUN unzip master.zip\nRUN mv /xDams-core-master/dist/xDams.war /opt/apps/xDams\nRUN unzip /opt/apps/xDams/xDams.war -d /opt/apps/xDams\nRUN rm /opt/apps/xDams/xDams.war\nRUN mv /opt/it-3di/console/xway /opt/apps\nRUN mv /xDams-core-master/extraway-archive /xDams-core-master/db\nRUN mv /xDams-core-master/db /opt\nRUN rm -Rf /xDams-core-master\nCOPY web.xml /opt/apps/xway/WEB-INF\nCOPY servlet-context.xml /opt/apps/xDams/WEB-INF/spring/appServlet\nCOPY index.html /opt/apps/xway\nRUN chown -R extraway:tomcat /opt/db\nRUN chmod -R 775 /opt/db\nRUN chown -R tomcat:tomcat /opt/apps\nRUN usermod -a -G tomcat extraway\nRUN echo \"/etc/init.d/extraway stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/extraway start\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat start\" >> /etc/init.d/start\nRUN chmod +x /etc/init.d/start\nENTRYPOINT /etc/init.d/start \\\n && bash\nEXPOSE 8080/tcp\n","injectedSmells":[],"originalDockerfileHash":"f077a1456c4ed2c24ea35c5ab94f9f49","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   xDams DOCKERFILE 1.2 \n#   CREA IMMAGINE\n#   docker build -t=\"regesta/xdams\" .\n#   CREA CONTAINER\n#   docker run -dt --name xdams -p 8080:8080 regesta/xdams\n#   ACCEDI A CONTAINER\n#   docker exec -it xdams bash\n#   START CONTAINER\n#   docker start xdams\n#   STOP CONTAINER\n#   docker stop xdams\nFROM centos:latest\nMAINTAINER regesta \"info@xdams.org\"\nRUN yum -y -q update\nRUN yum install unzip zip wget nano -y\nRUN yum install libxslt.i686 -y\nRUN yum install libstdc++.i686 -y\nRUN yum install epel-release -y\nRUN yum -y -q update\nRUN yum install net-tools -y\nRUN yum install htop -y\n#   USERS\nRUN useradd -ms /bin/bash extraway\nRUN useradd -ms /bin/bash tomcat\nRUN echo \"extraway:extraway\" | chpasswd\nRUN echo \"tomcat:tomcat\" | chpasswd\n#   EXTRAWAY\nRUN wget http://media.regesta.com/dm_0/REGESTA/extraway/eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN unzip eXtraWay_OpenPlatform-1.0.0-linux-x64.zip\nRUN mv /eXtraWay_OpenPlatform-1.0.0-linux-x64/* /opt\nCOPY context.stat.xml /opt/it-3di/extraway/xw/context\nCOPY xw.ini /opt/it-3di/extraway/xw/conf\nRUN chmod -R 755 /opt\nRUN chown -R extraway:extraway /opt\nRUN echo \"#!/bin/sh\" >> /etc/init.d/extraway\nRUN echo \"# Script di supporto per boot/shutdown: 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# @(#) HighWay_Version 0.0.2.0\" >> /etc/init.d/extraway\nRUN echo \"# $Id: HighWay_Version 0.0.2.0 $\" >> /etc/init.d/extraway\nRUN echo \"# chkconfig: 345 80 20\" >> /etc/init.d/extraway\nRUN echo \"# description: eXtraWay services: eXtraWay Server (xw)\" >> /etc/init.d/extraway\nRUN echo \"# Provides: xw\" >> /etc/init.d/extraway\nRUN echo \"# Required-Start: $local_fs $network $named $time\" >> /etc/init.d/extraway\nRUN echo \"# Required-Stop: $local_fs $network $time\" >> /etc/init.d/extraway\nRUN echo \"# Default-Start: 3 4 5\" >> /etc/init.d/extraway\nRUN echo \"# Default-Stop: 0 1 2 6\" >> /etc/init.d/extraway\nRUN echo \"# Short-Description: start and stop eXtraWay services\" >> /etc/init.d/extraway\nRUN echo \"# Description: start and stop eXtraWay server (xw) and eXtraWay log server\" >> /etc/init.d/extraway\nRUN echo \"# (xwls)\" >> /etc/init.d/extraway\nRUN echo \"lockdir='/var/lock/subsys'\" >> /etc/init.d/extraway\nRUN echo \"lockfile='extraway'\" >> /etc/init.d/extraway\nRUN echo \"if [ -d $lockdir ] \\\n && [ \\\"`id -u `\\\" = \\\"0\\\" ]; then\" >> /etc/init.d/extraway\nRUN echo \" case \\\"$1\\\" in\" >> /etc/init.d/extraway\nRUN echo \" start|restart)\" >> /etc/init.d/extraway\nRUN echo \" touch $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" stop)\" >> /etc/init.d/extraway\nRUN echo \" rm -f $lockdir/$lockfile\" >> /etc/init.d/extraway\nRUN echo \" ;;\" >> /etc/init.d/extraway\nRUN echo \" esac\" >> /etc/init.d/extraway\nRUN echo \"fi\" >> /etc/init.d/extraway\nRUN echo \"/opt/it-3di/extra/init-files/extraway \\\"$1\\\"\" >> /etc/init.d/extraway\nRUN chmod +x /etc/init.d/extraway\n#   JAVA\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/jdk-8u162-linux-x64.tar.gz\nRUN tar -zxvf jdk-8u162-linux-x64.tar.gz\nRUN mv /jdk1.8.0_162 /usr/local\nRUN update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/local/jdk1.8.0_162/bin/java\" 1\n#   TOMCAT\nRUN wget http://media.regesta.com/dm_0/REGESTA/docker/apache-tomcat-8.5.27.zip\nRUN unzip apache-tomcat-8.5.27.zip\nRUN mv /apache-tomcat-8.5.27 /usr/local\nRUN echo \"<meta http-equiv='refresh' content='0;URL=xDams'>\" >> /usr/local/apache-tomcat-8.5.27/webapps/ROOT/index.html\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina\nRUN mkdir /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost\nRUN echo \"<Context path='/xDams' docBase='/opt/apps/xDams'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xDams.xml\nRUN echo \"<Context path='/xway' docBase='/opt/apps/xway'/>\" >> /usr/local/apache-tomcat-8.5.27/conf/Catalina/localhost/xway.xml\nRUN chmod -R 755 /usr/local/apache-tomcat-8.5.27\nRUN chown -R tomcat:tomcat /usr/local/apache-tomcat-8.5.27\nRUN touch velocity.log\nRUN chown tomcat:tomcat velocity.log\nRUN echo \"#!/bin/bash\" >> /etc/init.d/tomcat\nRUN echo \"# description: Tomcat Start Stop Restart\" >> /etc/init.d/tomcat\nRUN echo \"# processname: tomcat\" >> /etc/init.d/tomcat\nRUN echo \"# chkconfig: 234 20 80\" >> /etc/init.d/tomcat\nRUN echo \"JAVA_HOME=/usr/local/jdk1.8.0_162\" >> /etc/init.d/tomcat\nRUN echo \"export JAVA_HOME\" >> /etc/init.d/tomcat\nRUN echo \"PATH=$JAVA_HOME/bin:$PATH\" >> /etc/init.d/tomcat\nRUN echo \"export PATH\" >> /etc/init.d/tomcat\nRUN echo \"CATALINA_HOME=/usr/local/apache-tomcat-8.5.27/bin\" >> /etc/init.d/tomcat\nRUN echo \"case $1 in\" >> /etc/init.d/tomcat\nRUN echo \"start)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"stop)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"restart)\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/shutdown.sh\" >> /etc/init.d/tomcat\nRUN echo \"/bin/su tomcat $CATALINA_HOME/startup.sh\" >> /etc/init.d/tomcat\nRUN echo \";;\" >> /etc/init.d/tomcat\nRUN echo \"esac\" >> /etc/init.d/tomcat\nRUN echo \"exit 0\" >> /etc/init.d/tomcat\nRUN chmod +x /etc/init.d/tomcat\n#   xDams\nRUN mkdir /opt/apps\nRUN mkdir /opt/apps/xDams\nRUN mkdir /opt/apps/xway\nRUN wget https://github.com/xdamsorg/xDams-core/archive/master.zip\nRUN unzip master.zip\nRUN mv /xDams-core-master/dist/xDams.war /opt/apps/xDams\nRUN unzip /opt/apps/xDams/xDams.war -d /opt/apps/xDams\nRUN rm /opt/apps/xDams/xDams.war\nRUN mv /opt/it-3di/console/xway /opt/apps\nRUN mv /xDams-core-master/extraway-archive /xDams-core-master/db\nRUN mv /xDams-core-master/db /opt\nRUN rm -Rf /xDams-core-master\nCOPY web.xml /opt/apps/xway/WEB-INF\nCOPY servlet-context.xml /opt/apps/xDams/WEB-INF/spring/appServlet\nCOPY index.html /opt/apps/xway\nRUN chown -R extraway:tomcat /opt/db\nRUN chmod -R 775 /opt/db\nRUN chown -R tomcat:tomcat /opt/apps\nRUN usermod -a -G tomcat extraway\nRUN echo \"/etc/init.d/extraway stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat stop\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/extraway start\" >> /etc/init.d/start\nRUN echo \"/etc/init.d/tomcat start\" >> /etc/init.d/start\nRUN chmod +x /etc/init.d/start\nENTRYPOINT /etc/init.d/start \\\n && bash\nEXPOSE 8080/tcp\n","originalDockerfileUglifiedHash":"aa434a84d8eddf3e79a7e3b8f5e453e4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4308479f367ce0c24e8b958f12514bd0ad82f2a1.dockerfile"}