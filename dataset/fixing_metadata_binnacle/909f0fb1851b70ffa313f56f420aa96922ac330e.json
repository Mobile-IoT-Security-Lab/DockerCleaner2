{"seed":3755939058,"processedDockerfileHash":"119255b21a686f7ad524f2c838237624","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos7\n#   解释信息\nLABEL maintainer=\"HeLei <dayugog@gmail.com>\"\nENV PHP_VERSION=\"7.2.6\" \\\n    TZ=\"Asia/Shanghai\" \\\n    SRC_DIR=\"/home/work/src\" \\\n    APP_DIR=\"/home/work/app\" \\\n    WWW_DIR=\"/home/work/www\"\n#   设置系统时区\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n#   文件拷贝\nCOPY src/ $SRC_DIR\nRUN groupadd -r work \\\n && useradd -r -g work work \\\n && yum -y install wget gcc gcc++ gcc-c++ make git vim strace openssl openssl-devel curl-devel libjpeg libjpeg-devel bzip2-devel.x86_64 gmp-devel libxml2 libxml2-devel libxslt-devel libcurl libcurl-devel libpng libpng-devel freetype freetype-devel libedit-devel autoconf systemtap-sdt-devel \\\n && cd $SRC_DIR \\\n && tar zxvf php-$PHP_VERSION.tar.gz \\\n && cd php-$PHP_VERSION \\\n && mkdir -p $APP_DIR/php \\\n && BUILD_CONFIG=\" --prefix=$APP_DIR/php --datadir=$APP_DIR/php/data --disable-rpath --enable-dtrace --enable-shared --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-mbregex --enable-mbstring --enable-ftp --enable-gd-native-ttf --enable-pcntl --enable-sockets --enable-soap --enable-session --enable-opcache --enable-fpm --with-fpm-user=work --with-fpm-group=work --enable-zip --enable-inline-optimization --enable-gd-jis-conv --enable-mysqlnd --with-config-file-path=$APP_DIR/php/etc --with-mysql-sock=/var/run/mysql/mysql.sock --with-mcrypt --with-mhash --with-openssl --with-mysqli=shared,mysqlnd --with-pdo-mysql=shared,mysqlnd --with-gd --with-iconv --with-zlib --with-xmlrpc --without-pear --with-gettext --with-curl --with-jpeg-dir --with-freetype-dir --without-gdbm --with-libedit \" \\\n && ./configure $BUILD_CONFIG \\\n && make \\\n && make install \\\n && cd $APP_DIR \\\n && git clone https://github.com/phalcon/phalcon-devtools.git \\\n && cd phalcon-devtools \\\n && ln -s $( pwd ;)/phalcon.php /usr/bin/phalcon \\\n && chmod ugo+x /usr/bin/phalcon \\\n && yum clean all \\\n && rm -rf $SRC_DIR \\\n && mkdir -p $WWW_DIR \\\n && chown -R work:work /home\n#   设置环境变量\nENV PATH=\"$APP_DIR/php/sbin:$APP_DIR/php/bin:$PATH\"\n#   拷贝配置文件\nCOPY etc/ /home/work/app/php/etc\n#   拷贝so包\nCOPY extensions/ /home/work/app/php/lib/php/extensions/no-debug-non-zts-20170718\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos7\n#  解释信息\nLABEL maintainer=\"HeLei <dayugog@gmail.com>\"\nENV PHP_VERSION=\"7.2.6\" \\\n    TZ=\"Asia/Shanghai\" \\\n    SRC_DIR=\"/home/work/src\" \\\n    APP_DIR=\"/home/work/app\" \\\n    WWW_DIR=\"/home/work/www\"\n#  设置系统时区\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n#  文件拷贝\nCOPY src/ $SRC_DIR\nRUN groupadd -r work \\\n && useradd -r -g work work \\\n && yum -y install wget gcc gcc++ gcc-c++ make git vim strace openssl openssl-devel curl-devel libjpeg libjpeg-devel bzip2-devel.x86_64 gmp-devel libxml2 libxml2-devel libxslt-devel libcurl libcurl-devel libpng libpng-devel freetype freetype-devel libedit-devel autoconf systemtap-sdt-devel \\\n && cd $SRC_DIR \\\n && tar zxvf php-$PHP_VERSION.tar.gz \\\n && cd php-$PHP_VERSION \\\n && mkdir -p $APP_DIR/php \\\n && BUILD_CONFIG=\" --prefix=$APP_DIR/php --datadir=$APP_DIR/php/data --disable-rpath --enable-dtrace --enable-shared --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-mbregex --enable-mbstring --enable-ftp --enable-gd-native-ttf --enable-pcntl --enable-sockets --enable-soap --enable-session --enable-opcache --enable-fpm --with-fpm-user=work --with-fpm-group=work --enable-zip --enable-inline-optimization --enable-gd-jis-conv --enable-mysqlnd --with-config-file-path=$APP_DIR/php/etc --with-mysql-sock=/var/run/mysql/mysql.sock --with-mcrypt --with-mhash --with-openssl --with-mysqli=shared,mysqlnd --with-pdo-mysql=shared,mysqlnd --with-gd --with-iconv --with-zlib --with-xmlrpc --without-pear --with-gettext --with-curl --with-jpeg-dir --with-freetype-dir --without-gdbm --with-libedit \" \\\n && ./configure $BUILD_CONFIG \\\n && make \\\n && make install \\\n && cd $APP_DIR \\\n && git clone https://github.com/phalcon/phalcon-devtools.git \\\n && cd phalcon-devtools \\\n && ln -s $( pwd ;)/phalcon.php /usr/bin/phalcon \\\n && chmod ugo+x /usr/bin/phalcon \\\n && yum clean all \\\n && rm -rf $SRC_DIR \\\n && mkdir -p $WWW_DIR \\\n && chown -R work:work /home\n#  设置环境变量\nENV PATH=\"$APP_DIR/php/sbin:$APP_DIR/php/bin:$PATH\"\n#  拷贝配置文件\nCOPY etc/ /home/work/app/php/etc\n#  拷贝so包\nCOPY extensions/ /home/work/app/php/lib/php/extensions/no-debug-non-zts-20170718\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\n","injectedSmells":[],"originalDockerfileHash":"4ee39eace89e32c872566846dfdf14f2","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos7\n#   解释信息\nLABEL maintainer=\"HeLei <dayugog@gmail.com>\"\nENV PHP_VERSION=\"7.2.6\" \\\n    TZ=\"Asia/Shanghai\" \\\n    SRC_DIR=\"/home/work/src\" \\\n    APP_DIR=\"/home/work/app\" \\\n    WWW_DIR=\"/home/work/www\"\n#   设置系统时区\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\n#   文件拷贝\nCOPY src/ $SRC_DIR\nRUN groupadd -r work \\\n && useradd -r -g work work \\\n && yum -y install wget gcc gcc++ gcc-c++ make git vim strace openssl openssl-devel curl-devel libjpeg libjpeg-devel bzip2-devel.x86_64 gmp-devel libxml2 libxml2-devel libxslt-devel libcurl libcurl-devel libpng libpng-devel freetype freetype-devel libedit-devel autoconf systemtap-sdt-devel \\\n && cd $SRC_DIR \\\n && tar zxvf php-$PHP_VERSION.tar.gz \\\n && cd php-$PHP_VERSION \\\n && mkdir -p $APP_DIR/php \\\n && BUILD_CONFIG=\" --prefix=$APP_DIR/php --datadir=$APP_DIR/php/data --disable-rpath --enable-dtrace --enable-shared --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-mbregex --enable-mbstring --enable-ftp --enable-gd-native-ttf --enable-pcntl --enable-sockets --enable-soap --enable-session --enable-opcache --enable-fpm --with-fpm-user=work --with-fpm-group=work --enable-zip --enable-inline-optimization --enable-gd-jis-conv --enable-mysqlnd --with-config-file-path=$APP_DIR/php/etc --with-mysql-sock=/var/run/mysql/mysql.sock --with-mcrypt --with-mhash --with-openssl --with-mysqli=shared,mysqlnd --with-pdo-mysql=shared,mysqlnd --with-gd --with-iconv --with-zlib --with-xmlrpc --without-pear --with-gettext --with-curl --with-jpeg-dir --with-freetype-dir --without-gdbm --with-libedit \" \\\n && ./configure $BUILD_CONFIG \\\n && make \\\n && make install \\\n && cd $APP_DIR \\\n && git clone https://github.com/phalcon/phalcon-devtools.git \\\n && cd phalcon-devtools \\\n && ln -s $( pwd ;)/phalcon.php /usr/bin/phalcon \\\n && chmod ugo+x /usr/bin/phalcon \\\n && yum clean all \\\n && rm -rf $SRC_DIR \\\n && mkdir -p $WWW_DIR \\\n && chown -R work:work /home\n#   设置环境变量\nENV PATH=\"$APP_DIR/php/sbin:$APP_DIR/php/bin:$PATH\"\n#   拷贝配置文件\nCOPY etc/ /home/work/app/php/etc\n#   拷贝so包\nCOPY extensions/ /home/work/app/php/lib/php/extensions/no-debug-non-zts-20170718\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 9000/tcp\nCMD [\"php-fpm\"]\n","originalDockerfileUglifiedHash":"a572442b64811a7d4fd14bef57b93f54","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/909f0fb1851b70ffa313f56f420aa96922ac330e.dockerfile"}