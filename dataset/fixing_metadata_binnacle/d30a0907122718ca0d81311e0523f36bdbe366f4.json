{"seed":60864021,"processedDockerfileHash":"03d7dafadb405d3d3808bbcc302f8be1","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   © Copyright IBM Corporation 2018, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Dockerfile for Apache Storm version 2.0.0 #########\n#\n#   This Dockerfile builds a basic installation of Apache Storm.\n#\n#   Apache Storm is a free and open source distributed realtime computation system. Storm is simple, can be used with any programming language.\n#   Storm makes it easy to reliably process unbounded streams of data, doing for realtime processing what Hadoop did for batch processing.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To provide custom configuration for Storm use below command:\n#   docker run -d -p <host-port>:8080 --name <container-name> -v /<host_path>/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /<host_path>/storm.yaml:/opt/storm/conf/storm.yaml <image-name>\n#\n#   Run nimbus, supervisor & ui daemons using below command:\n#   (assuming that user has modified supervisord.conf & storm.yaml files with the requirements of nimbus, supervisor & ui daemons and started Apache ZooKeeper Server )\n#   e.g. docker run -d -p 8080:8080 --name stormtest1 -v /root/test/storm/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /root/test/storm/storm.yaml:/opt/storm/conf/storm.yaml super/storms\n#\n#   Official website: http://storm.apache.org/\n#\n#  ########################### supervisord.conf ##################################\n#   [supervisord]\n#   nodaemon=true\n#\n#   # Start nimbus daemon\n#   [program:nimbus]\n#   command=storm nimbus\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#   # Start supervisor daemon\n#   [program:supervisor]\n#   command=storm supervisor\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#   # Start ui daemon\n#   [program:ui]\n#   command=storm ui\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#  ################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/root\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-1.8.0-openjdk-s390x\"\nENV STORM_HOME=\"/opt/storm\"\nENV _JAVA_OPTIONS=\"-Xmx4096m\"\nENV JVM_ARGS=\"-Xms4096m -Xmx4096m\"\nENV MAVEN_OPTS=\"-Xms4096m -Xmx8192m -Xss4096k\"\nENV PATH=\"$JAVA_HOME/bin:$SOURCE_DIR/apache-maven-3.5.2/bin:$PATH:$STORM_HOME/bin\"\nWORKDIR $SOURCE_DIR\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends ant curl git gnupg2 gpgv nodejs openjdk-8-jdk python supervisor tar wget -y \\\n && cd $SOURCE_DIR \\\n && wget https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.5.2/apache-maven-3.5.2-bin.tar.gz \\\n && tar -xzf apache-maven-3.5.2-bin.tar.gz \\\n && cd $HOME \\\n && command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import - \\\n && command curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import - \\\n && curl -L https://get.rvm.io | bash -s stable --autolibs=enabled \\\n && . $HOME/.profile \\\n && wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash \\\n && . $HOME/.bashrc \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/storm.git \\\n && cd storm/ \\\n && git checkout tags/v2.0.0 \\\n && mvn clean install -DskipTests \\\n && ln -s $STORM_HOME/bin/storm /usr/bin/storm \\\n && cd $SOURCE_DIR/storm/storm-dist/binary \\\n && mvn package -Dgpg.skip=true \\\n && tar -zxf $SOURCE_DIR/storm/storm-dist/binary/final-package/target/apache-storm-2.0.0.tar.gz -C $SOURCE_DIR/ \\\n && cp -r $SOURCE_DIR/apache-storm-2.0.0 /opt/storm \\\n && apt-get remove -y ant curl git gnupg2 maven wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* $SOURCE_DIR/storm /root/.m2 $SOURCE_DIR/apache-maven-3.5.2-bin.tar.gz\n#   Define mount points for backup of config and logs\nVOLUME [\"/opt/storm/logs\", \"/opt/storm/conf\"]\n#   Port for Apache Storm\nEXPOSE 6700/tcp 6701/tcp 6702/tcp 6703/tcp 8080/tcp 2181/tcp 6627/tcp 8080/tcp 8000/tcp 3772/tcp 3773/tcp 3774/tcp\n#   Set Entrypoint\nCMD [\"/usr/bin/supervisord\"]\n#   End of Dockerfile\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  © Copyright IBM Corporation 2018, 2019.\n#  LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n# ######### Dockerfile for Apache Storm version 2.0.0 #########\n#\n#  This Dockerfile builds a basic installation of Apache Storm.\n#\n#  Apache Storm is a free and open source distributed realtime computation system. Storm is simple, can be used with any programming language.\n#  Storm makes it easy to reliably process unbounded streams of data, doing for realtime processing what Hadoop did for batch processing.\n#\n#  To build this image, from the directory containing this Dockerfile\n#  (assuming that the file is named Dockerfile):\n#  docker build -t <image_name> .\n#\n#  To provide custom configuration for Storm use below command:\n#  docker run -d -p <host-port>:8080 --name <container-name> -v /<host_path>/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /<host_path>/storm.yaml:/opt/storm/conf/storm.yaml <image-name>\n#\n#  Run nimbus, supervisor & ui daemons using below command:\n#  (assuming that user has modified supervisord.conf & storm.yaml files with the requirements of nimbus, supervisor & ui daemons and started Apache ZooKeeper Server )\n#  e.g. docker run -d -p 8080:8080 --name stormtest1 -v /root/test/storm/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /root/test/storm/storm.yaml:/opt/storm/conf/storm.yaml super/storms\n#\n#  Official website: http://storm.apache.org/\n#\n# ########################### supervisord.conf ##################################\n#  [supervisord]\n#  nodaemon=true\n#\n#  # Start nimbus daemon\n#  [program:nimbus]\n#  command=storm nimbus\n#  startsecs=5\n#  autostart=true\n#  autorestart=true\n#\n#  # Start supervisor daemon\n#  [program:supervisor]\n#  command=storm supervisor\n#  startsecs=5\n#  autostart=true\n#  autorestart=true\n#\n#  # Start ui daemon\n#  [program:ui]\n#  command=storm ui\n#  startsecs=5\n#  autostart=true\n#  autorestart=true\n#\n# ################################################################################\n#  Base Image\nFROM s390x/ubuntu:16.04\n#  The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/root\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-1.8.0-openjdk-s390x\"\nENV STORM_HOME=\"/opt/storm\"\nENV _JAVA_OPTIONS=\"-Xmx4096m\"\nENV JVM_ARGS=\"-Xms4096m -Xmx4096m\"\nENV MAVEN_OPTS=\"-Xms4096m -Xmx8192m -Xss4096k\"\nENV PATH=\"$JAVA_HOME/bin:$SOURCE_DIR/apache-maven-3.5.2/bin:$PATH:$STORM_HOME/bin\"\nWORKDIR $SOURCE_DIR\n#  Install dependencies\nRUN apt-get update \\\n && apt-get install ant curl git gnupg2 gpgv nodejs openjdk-8-jdk python supervisor tar wget -y \\\n && cd $SOURCE_DIR \\\n && wget https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.5.2/apache-maven-3.5.2-bin.tar.gz \\\n && tar -xzf apache-maven-3.5.2-bin.tar.gz \\\n && cd $HOME \\\n && command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import - \\\n && command curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import - \\\n && curl -L https://get.rvm.io | bash -s stable --autolibs=enabled \\\n && . $HOME/.profile \\\n && wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash \\\n && . $HOME/.bashrc \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/storm.git \\\n && cd storm/ \\\n && git checkout tags/v2.0.0 \\\n && mvn clean install -DskipTests \\\n && ln -s $STORM_HOME/bin/storm /usr/bin/storm \\\n && cd $SOURCE_DIR/storm/storm-dist/binary \\\n && mvn package -Dgpg.skip=true \\\n && tar -zxf $SOURCE_DIR/storm/storm-dist/binary/final-package/target/apache-storm-2.0.0.tar.gz -C $SOURCE_DIR/ \\\n && cp -r $SOURCE_DIR/apache-storm-2.0.0 /opt/storm \\\n && apt-get remove -y ant curl git gnupg2 maven wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* $SOURCE_DIR/storm /root/.m2 $SOURCE_DIR/apache-maven-3.5.2-bin.tar.gz\n#  Define mount points for backup of config and logs\nVOLUME [\"/opt/storm/logs\", \"/opt/storm/conf\"]\n#  Port for Apache Storm\nEXPOSE 6700/tcp 6701/tcp 6702/tcp 6703/tcp 8080/tcp 2181/tcp 6627/tcp 8080/tcp 8000/tcp 3772/tcp 3773/tcp 3774/tcp\n#  Set Entrypoint\nCMD [\"/usr/bin/supervisord\"]\n#  End of Dockerfile\n","injectedSmells":[],"originalDockerfileHash":"9d5879a3989c6a8e04d0af1903a0b615","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   © Copyright IBM Corporation 2018, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Dockerfile for Apache Storm version 2.0.0 #########\n#\n#   This Dockerfile builds a basic installation of Apache Storm.\n#\n#   Apache Storm is a free and open source distributed realtime computation system. Storm is simple, can be used with any programming language.\n#   Storm makes it easy to reliably process unbounded streams of data, doing for realtime processing what Hadoop did for batch processing.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To provide custom configuration for Storm use below command:\n#   docker run -d -p <host-port>:8080 --name <container-name> -v /<host_path>/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /<host_path>/storm.yaml:/opt/storm/conf/storm.yaml <image-name>\n#\n#   Run nimbus, supervisor & ui daemons using below command:\n#   (assuming that user has modified supervisord.conf & storm.yaml files with the requirements of nimbus, supervisor & ui daemons and started Apache ZooKeeper Server )\n#   e.g. docker run -d -p 8080:8080 --name stormtest1 -v /root/test/storm/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf -v /root/test/storm/storm.yaml:/opt/storm/conf/storm.yaml super/storms\n#\n#   Official website: http://storm.apache.org/\n#\n#  ########################### supervisord.conf ##################################\n#   [supervisord]\n#   nodaemon=true\n#\n#   # Start nimbus daemon\n#   [program:nimbus]\n#   command=storm nimbus\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#   # Start supervisor daemon\n#   [program:supervisor]\n#   command=storm supervisor\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#   # Start ui daemon\n#   [program:ui]\n#   command=storm ui\n#   startsecs=5\n#   autostart=true\n#   autorestart=true\n#\n#  ################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/root\"\nENV JAVA_HOME=\"/usr/lib/jvm/java-1.8.0-openjdk-s390x\"\nENV STORM_HOME=\"/opt/storm\"\nENV _JAVA_OPTIONS=\"-Xmx4096m\"\nENV JVM_ARGS=\"-Xms4096m -Xmx4096m\"\nENV MAVEN_OPTS=\"-Xms4096m -Xmx8192m -Xss4096k\"\nENV PATH=\"$JAVA_HOME/bin:$SOURCE_DIR/apache-maven-3.5.2/bin:$PATH:$STORM_HOME/bin\"\nWORKDIR $SOURCE_DIR\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install ant curl git gnupg2 gpgv nodejs openjdk-8-jdk python supervisor tar wget -y \\\n && cd $SOURCE_DIR \\\n && wget https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.5.2/apache-maven-3.5.2-bin.tar.gz \\\n && tar -xzf apache-maven-3.5.2-bin.tar.gz \\\n && cd $HOME \\\n && command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import - \\\n && command curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import - \\\n && curl -L https://get.rvm.io | bash -s stable --autolibs=enabled \\\n && . $HOME/.profile \\\n && wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash \\\n && . $HOME/.bashrc \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/apache/storm.git \\\n && cd storm/ \\\n && git checkout tags/v2.0.0 \\\n && mvn clean install -DskipTests \\\n && ln -s $STORM_HOME/bin/storm /usr/bin/storm \\\n && cd $SOURCE_DIR/storm/storm-dist/binary \\\n && mvn package -Dgpg.skip=true \\\n && tar -zxf $SOURCE_DIR/storm/storm-dist/binary/final-package/target/apache-storm-2.0.0.tar.gz -C $SOURCE_DIR/ \\\n && cp -r $SOURCE_DIR/apache-storm-2.0.0 /opt/storm \\\n && apt-get remove -y ant curl git gnupg2 maven wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* $SOURCE_DIR/storm /root/.m2 $SOURCE_DIR/apache-maven-3.5.2-bin.tar.gz\n#   Define mount points for backup of config and logs\nVOLUME [\"/opt/storm/logs\", \"/opt/storm/conf\"]\n#   Port for Apache Storm\nEXPOSE 6700/tcp 6701/tcp 6702/tcp 6703/tcp 8080/tcp 2181/tcp 6627/tcp 8080/tcp 8000/tcp 3772/tcp 3773/tcp 3774/tcp\n#   Set Entrypoint\nCMD [\"/usr/bin/supervisord\"]\n#   End of Dockerfile\n","originalDockerfileUglifiedHash":"e4036fb713784f68abb335516d4d1550","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d30a0907122718ca0d81311e0523f36bdbe366f4.dockerfile"}