{"seed":4206122601,"processedDockerfileHash":"20184beb151c669204bf856c216efb19","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"ARG ALPINE_VER=3.9\nARG SOURCE_IMAGE=alpine:${ALPINE_VER}\n#  ###############################################################################\n#   Source - busybox\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-busybox\nENV BUSYBOX_VER=\"1.30.0\"\nENV BUSYBOX_URL=\"https://busybox.net/downloads/binaries/${BUSYBOX_VER}-i686/busybox\"\nRUN wget -qO /usr/local/bin/busybox $BUSYBOX_URL\nRUN chmod +x /usr/local/bin/busybox\n#  ###############################################################################\n#   Source - confd\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-confd\nENV CONFD_VER=\"0.16.0\"\nENV CONFD_URL=\"https://github.com/kelseyhightower/confd/releases/download/v$CONFD_VER/confd-$CONFD_VER-linux-amd64\"\nRUN wget -qO /usr/local/bin/confd $CONFD_URL\nRUN chmod +x /usr/local/bin/confd\n#  ###############################################################################\n#   Source - gomplate\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-gomplate\nENV GOMPLATE_VER=\"3.1.0\"\nENV GOMPLATE_URL=\"https://github.com/hairyhenderson/gomplate/releases/download/v$GOMPLATE_VER/gomplate_linux-amd64\"\nRUN wget -qO /usr/local/bin/gomplate $GOMPLATE_URL\nRUN chmod +x /usr/local/bin/gomplate\n#  ###############################################################################\n#   Source - jq\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-jq\nENV JQ_VER=\"1.6\"\nENV JQ_URL=\"https://github.com/stedolan/jq/releases/download/jq-$JQ_VER/jq-linux64\"\nRUN wget -qO /usr/local/bin/jq $JQ_URL\nRUN chmod +x /usr/local/bin/jq\n#  ###############################################################################\n#   Source - lego\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-lego\nENV LEGO_VER=\"2.1.0\"\nENV LEGO_URL=\"https://github.com/xenolf/lego/releases/download/v$LEGO_VER/lego_v${LEGO_VER}_linux_amd64.tar.gz\"\nRUN wget -qO- $LEGO_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/lego /usr/local/bin/lego\n#  ###############################################################################\n#   Source - migrate\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-migrate\nENV MIGRATE_VER=\"4.2.3\"\nENV MIGRATE_URL=\"https://github.com/golang-migrate/migrate/releases/download/v$MIGRATE_VER/migrate.linux-amd64.tar.gz\"\nRUN wget -qO- $MIGRATE_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/migrate.linux-amd64 /usr/local/bin/migrate\n#  ###############################################################################\n#   Source - yq\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-yq\nENV YQ_VER=\"2.2.1\"\nENV YQ_URL=\"https://github.com/mikefarah/yq/releases/download/$YQ_VER/yq_linux_amd64\"\nRUN wget -qO /usr/local/bin/yq $YQ_URL\nRUN chmod +x /usr/local/bin/yq\n#  ###############################################################################\n#   Source - gosu\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-gosu\nENV GOSU_VER=\"1.11\"\nENV GOSU_URL=\"https://github.com/tianon/gosu/releases/download/${GOSU_VER}/gosu-amd64\"\nRUN wget -qO /usr/local/bin/gosu $GOSU_URL\nRUN chmod +x /usr/local/bin/gosu\n#  ###############################################################################\n#   Source - tini\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-tini\nENV TINI_VER=\"v0.18.0\"\nENV TINI_URL=\"https://github.com/krallin/tini/releases/download/${TINI_VER}/tini\"\nRUN wget -qO /usr/local/bin/tini $TINI_URL\nRUN chmod +x /usr/local/bin/tini\n#  ###############################################################################\n#   Source - dumb-init\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-dumb-init\nENV DUMB_INIT_VER=\"1.2.2\"\nENV DUMB_INIT_URL=\"https://github.com/Yelp/dumb-init/releases/download/v${DUMB_INIT_VER}/dumb-init_${DUMB_INIT_VER}_amd64\"\nRUN wget -qO /usr/local/bin/dumb-init $DUMB_INIT_URL\nRUN chmod +x /usr/local/bin/dumb-init\n#  ###############################################################################\n#   Source - containerpilot\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-containerpilot\nENV CONTAINERPILOT_VER=\"3.8.0\"\nENV CONTAINERPILOT_URL=\"https://github.com/joyent/containerpilot/releases/download/${CONTAINERPILOT_VER}/containerpilot-${CONTAINERPILOT_VER}.tar.gz\"\nRUN wget -qO- $CONTAINERPILOT_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/containerpilot /usr/local/bin/containerpilot\n#  ###############################################################################\n#   Source - envoy\n#  ###############################################################################\nFROM envoyproxy/envoy:v1.9.0 AS source-envoy\n#   Envoy already in /usr/local/bin\n#  ###############################################################################\n#   Source - awless\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-awless\nENV AWLESS_VER=\"0.1.11\"\nENV AWLESS_URL=\"https://github.com/wallix/awless/releases/download/v${AWLESS_VER}/awless-linux-amd64.tar.gz\"\nRUN wget -qO- $AWLESS_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/awless /usr/local/bin/awless\n#  ###############################################################################\n#   Sources\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS sources\nCOPY --from=source-busybox /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-confd /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gomplate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-jq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-lego /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-migrate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-yq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gosu /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-tini /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-dumb-init /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-containerpilot /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-envoy /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-awless /usr/local/bin/* /usr/local/bin/\n#  ###############################################################################\n#   Runtime\n#  ###############################################################################\nFROM $SOURCE_IMAGE\nRUN apk add bash=5.2.15-r0 make=4.3-r1 curl=7.88.1-r1 git=2.38.4-r1 --no-cache\n#   Sources\nCOPY --from=sources /usr/local/bin/* /usr/local/bin/\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"ARG ALPINE_VER=3.9\nARG SOURCE_IMAGE=alpine:${ALPINE_VER}\n# ###############################################################################\n#  Source - busybox\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-busybox\nENV BUSYBOX_VER=\"1.30.0\"\nENV BUSYBOX_URL=\"https://busybox.net/downloads/binaries/${BUSYBOX_VER}-i686/busybox\"\nRUN wget -qO /usr/local/bin/busybox $BUSYBOX_URL\nRUN chmod +x /usr/local/bin/busybox\n# ###############################################################################\n#  Source - confd\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-confd\nENV CONFD_VER=\"0.16.0\"\nENV CONFD_URL=\"https://github.com/kelseyhightower/confd/releases/download/v$CONFD_VER/confd-$CONFD_VER-linux-amd64\"\nRUN wget -qO /usr/local/bin/confd $CONFD_URL\nRUN chmod +x /usr/local/bin/confd\n# ###############################################################################\n#  Source - gomplate\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-gomplate\nENV GOMPLATE_VER=\"3.1.0\"\nENV GOMPLATE_URL=\"https://github.com/hairyhenderson/gomplate/releases/download/v$GOMPLATE_VER/gomplate_linux-amd64\"\nRUN wget -qO /usr/local/bin/gomplate $GOMPLATE_URL\nRUN chmod +x /usr/local/bin/gomplate\n# ###############################################################################\n#  Source - jq\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-jq\nENV JQ_VER=\"1.6\"\nENV JQ_URL=\"https://github.com/stedolan/jq/releases/download/jq-$JQ_VER/jq-linux64\"\nRUN wget -qO /usr/local/bin/jq $JQ_URL\nRUN chmod +x /usr/local/bin/jq\n# ###############################################################################\n#  Source - lego\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-lego\nENV LEGO_VER=\"2.1.0\"\nENV LEGO_URL=\"https://github.com/xenolf/lego/releases/download/v$LEGO_VER/lego_v${LEGO_VER}_linux_amd64.tar.gz\"\nRUN wget -qO- $LEGO_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/lego /usr/local/bin/lego\n# ###############################################################################\n#  Source - migrate\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-migrate\nENV MIGRATE_VER=\"4.2.3\"\nENV MIGRATE_URL=\"https://github.com/golang-migrate/migrate/releases/download/v$MIGRATE_VER/migrate.linux-amd64.tar.gz\"\nRUN wget -qO- $MIGRATE_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/migrate.linux-amd64 /usr/local/bin/migrate\n# ###############################################################################\n#  Source - yq\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-yq\nENV YQ_VER=\"2.2.1\"\nENV YQ_URL=\"https://github.com/mikefarah/yq/releases/download/$YQ_VER/yq_linux_amd64\"\nRUN wget -qO /usr/local/bin/yq $YQ_URL\nRUN chmod +x /usr/local/bin/yq\n# ###############################################################################\n#  Source - gosu\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-gosu\nENV GOSU_VER=\"1.11\"\nENV GOSU_URL=\"https://github.com/tianon/gosu/releases/download/${GOSU_VER}/gosu-amd64\"\nRUN wget -qO /usr/local/bin/gosu $GOSU_URL\nRUN chmod +x /usr/local/bin/gosu\n# ###############################################################################\n#  Source - tini\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-tini\nENV TINI_VER=\"v0.18.0\"\nENV TINI_URL=\"https://github.com/krallin/tini/releases/download/${TINI_VER}/tini\"\nRUN wget -qO /usr/local/bin/tini $TINI_URL\nRUN chmod +x /usr/local/bin/tini\n# ###############################################################################\n#  Source - dumb-init\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-dumb-init\nENV DUMB_INIT_VER=\"1.2.2\"\nENV DUMB_INIT_URL=\"https://github.com/Yelp/dumb-init/releases/download/v${DUMB_INIT_VER}/dumb-init_${DUMB_INIT_VER}_amd64\"\nRUN wget -qO /usr/local/bin/dumb-init $DUMB_INIT_URL\nRUN chmod +x /usr/local/bin/dumb-init\n# ###############################################################################\n#  Source - containerpilot\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-containerpilot\nENV CONTAINERPILOT_VER=\"3.8.0\"\nENV CONTAINERPILOT_URL=\"https://github.com/joyent/containerpilot/releases/download/${CONTAINERPILOT_VER}/containerpilot-${CONTAINERPILOT_VER}.tar.gz\"\nRUN wget -qO- $CONTAINERPILOT_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/containerpilot /usr/local/bin/containerpilot\n# ###############################################################################\n#  Source - envoy\n# ###############################################################################\nFROM envoyproxy/envoy:v1.9.0 AS source-envoy\n#  Envoy already in /usr/local/bin\n# ###############################################################################\n#  Source - awless\n# ###############################################################################\nFROM $SOURCE_IMAGE AS source-awless\nENV AWLESS_VER=\"0.1.11\"\nENV AWLESS_URL=\"https://github.com/wallix/awless/releases/download/v${AWLESS_VER}/awless-linux-amd64.tar.gz\"\nRUN wget -qO- $AWLESS_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/awless /usr/local/bin/awless\n# ###############################################################################\n#  Sources\n# ###############################################################################\nFROM $SOURCE_IMAGE AS sources\nCOPY --from=source-busybox /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-confd /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gomplate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-jq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-lego /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-migrate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-yq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gosu /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-tini /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-dumb-init /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-containerpilot /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-envoy /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-awless /usr/local/bin/* /usr/local/bin/\n# ###############################################################################\n#  Runtime\n# ###############################################################################\nFROM $SOURCE_IMAGE\nRUN apk add --no-cache bash make curl git\n#  Sources\nCOPY --from=sources /usr/local/bin/* /usr/local/bin/\n","injectedSmells":[],"originalDockerfileHash":"510ba0375a95546e8fd52de1fab45669","successfullyInjectedSmells":[],"originalDockerfileUglified":"ARG ALPINE_VER=3.9\nARG SOURCE_IMAGE=alpine:${ALPINE_VER}\n#  ###############################################################################\n#   Source - busybox\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-busybox\nENV BUSYBOX_VER=\"1.30.0\"\nENV BUSYBOX_URL=\"https://busybox.net/downloads/binaries/${BUSYBOX_VER}-i686/busybox\"\nRUN wget -qO /usr/local/bin/busybox $BUSYBOX_URL\nRUN chmod +x /usr/local/bin/busybox\n#  ###############################################################################\n#   Source - confd\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-confd\nENV CONFD_VER=\"0.16.0\"\nENV CONFD_URL=\"https://github.com/kelseyhightower/confd/releases/download/v$CONFD_VER/confd-$CONFD_VER-linux-amd64\"\nRUN wget -qO /usr/local/bin/confd $CONFD_URL\nRUN chmod +x /usr/local/bin/confd\n#  ###############################################################################\n#   Source - gomplate\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-gomplate\nENV GOMPLATE_VER=\"3.1.0\"\nENV GOMPLATE_URL=\"https://github.com/hairyhenderson/gomplate/releases/download/v$GOMPLATE_VER/gomplate_linux-amd64\"\nRUN wget -qO /usr/local/bin/gomplate $GOMPLATE_URL\nRUN chmod +x /usr/local/bin/gomplate\n#  ###############################################################################\n#   Source - jq\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-jq\nENV JQ_VER=\"1.6\"\nENV JQ_URL=\"https://github.com/stedolan/jq/releases/download/jq-$JQ_VER/jq-linux64\"\nRUN wget -qO /usr/local/bin/jq $JQ_URL\nRUN chmod +x /usr/local/bin/jq\n#  ###############################################################################\n#   Source - lego\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-lego\nENV LEGO_VER=\"2.1.0\"\nENV LEGO_URL=\"https://github.com/xenolf/lego/releases/download/v$LEGO_VER/lego_v${LEGO_VER}_linux_amd64.tar.gz\"\nRUN wget -qO- $LEGO_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/lego /usr/local/bin/lego\n#  ###############################################################################\n#   Source - migrate\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-migrate\nENV MIGRATE_VER=\"4.2.3\"\nENV MIGRATE_URL=\"https://github.com/golang-migrate/migrate/releases/download/v$MIGRATE_VER/migrate.linux-amd64.tar.gz\"\nRUN wget -qO- $MIGRATE_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/migrate.linux-amd64 /usr/local/bin/migrate\n#  ###############################################################################\n#   Source - yq\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-yq\nENV YQ_VER=\"2.2.1\"\nENV YQ_URL=\"https://github.com/mikefarah/yq/releases/download/$YQ_VER/yq_linux_amd64\"\nRUN wget -qO /usr/local/bin/yq $YQ_URL\nRUN chmod +x /usr/local/bin/yq\n#  ###############################################################################\n#   Source - gosu\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-gosu\nENV GOSU_VER=\"1.11\"\nENV GOSU_URL=\"https://github.com/tianon/gosu/releases/download/${GOSU_VER}/gosu-amd64\"\nRUN wget -qO /usr/local/bin/gosu $GOSU_URL\nRUN chmod +x /usr/local/bin/gosu\n#  ###############################################################################\n#   Source - tini\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-tini\nENV TINI_VER=\"v0.18.0\"\nENV TINI_URL=\"https://github.com/krallin/tini/releases/download/${TINI_VER}/tini\"\nRUN wget -qO /usr/local/bin/tini $TINI_URL\nRUN chmod +x /usr/local/bin/tini\n#  ###############################################################################\n#   Source - dumb-init\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-dumb-init\nENV DUMB_INIT_VER=\"1.2.2\"\nENV DUMB_INIT_URL=\"https://github.com/Yelp/dumb-init/releases/download/v${DUMB_INIT_VER}/dumb-init_${DUMB_INIT_VER}_amd64\"\nRUN wget -qO /usr/local/bin/dumb-init $DUMB_INIT_URL\nRUN chmod +x /usr/local/bin/dumb-init\n#  ###############################################################################\n#   Source - containerpilot\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-containerpilot\nENV CONTAINERPILOT_VER=\"3.8.0\"\nENV CONTAINERPILOT_URL=\"https://github.com/joyent/containerpilot/releases/download/${CONTAINERPILOT_VER}/containerpilot-${CONTAINERPILOT_VER}.tar.gz\"\nRUN wget -qO- $CONTAINERPILOT_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/containerpilot /usr/local/bin/containerpilot\n#  ###############################################################################\n#   Source - envoy\n#  ###############################################################################\nFROM envoyproxy/envoy:v1.9.0 AS source-envoy\n#   Envoy already in /usr/local/bin\n#  ###############################################################################\n#   Source - awless\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS source-awless\nENV AWLESS_VER=\"0.1.11\"\nENV AWLESS_URL=\"https://github.com/wallix/awless/releases/download/v${AWLESS_VER}/awless-linux-amd64.tar.gz\"\nRUN wget -qO- $AWLESS_URL | tar -C /tmp -xvzf -\nRUN mv /tmp/awless /usr/local/bin/awless\n#  ###############################################################################\n#   Sources\n#  ###############################################################################\nFROM $SOURCE_IMAGE AS sources\nCOPY --from=source-busybox /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-confd /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gomplate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-jq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-lego /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-migrate /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-yq /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-gosu /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-tini /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-dumb-init /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-containerpilot /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-envoy /usr/local/bin/* /usr/local/bin/\nCOPY --from=source-awless /usr/local/bin/* /usr/local/bin/\n#  ###############################################################################\n#   Runtime\n#  ###############################################################################\nFROM $SOURCE_IMAGE\nRUN apk add --no-cache bash make curl git\n#   Sources\nCOPY --from=sources /usr/local/bin/* /usr/local/bin/\n","originalDockerfileUglifiedHash":"cc48a01e87be196e55c753b944cb7d58","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c0200c143b807594e654b909ccf813bf30b679cc.dockerfile"}