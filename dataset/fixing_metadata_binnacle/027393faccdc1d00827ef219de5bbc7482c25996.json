{"seed":1655972432,"processedDockerfileHash":"a407b8c90111352793061ed394853e91","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER Matt Konda <mkonda@jemurai.com>\n#  ###############################################################################################\n#         Environment\n#\nRUN apt-get update \\\n && apt-get install --no-install-recommends git-core=1:2.7.4-0ubuntu1.10 sudo=1.8.16-0ubuntu1.10 curl=7.47.0-1ubuntu2.19 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 build-essential=12.1ubuntu2 libssl-dev=1.0.2g-1ubuntu4.20 libreadline-dev=6.3-8ubuntu2 libyaml-dev=0.1.6-3 libsqlite3-dev=3.11.0-1ubuntu1.5 sqlite3=3.11.0-1ubuntu1.5 libxml2-dev=2.9.3+dfsg1-1ubuntu0.7 libxslt1-dev=1.1.28-2.1ubuntu0.3 libffi-dev=3.2.1-4 libgdbm-dev=1.8.3-13.1 libncurses5-dev=6.0+20160213-1ubuntu1 automake=1:1.15-4ubuntu1 libtool=2.4.6-0.1 bison=2:3.0.4.dfsg-1 libffi-dev=3.2.1-4 gnupg=1.4.20-1ubuntu3.3 patch=2.7.5-1ubuntu0.16.04.2 gawk=1:4.1.3+dfsg-0.1 g++=4:5.3.1-1ubuntu1 gcc=4:5.3.1-1ubuntu1 make=4.1-6 libc6-dev=2.23-0ubuntu11.3 libcurl3-dev autoconf=2.69-9 libtool=2.4.6-0.1 ncurses-dev zlib1g=1:1.2.8.dfsg-2ubuntu4.3 libreadline6-dev=6.3-8ubuntu2 libreadline6=6.3-8ubuntu2 openssl=1.0.2g-1ubuntu4.20 libcurl4-openssl-dev=7.47.0-1ubuntu2.19 libgmp-dev=2:6.1.0+dfsg-2 clamav=0.103.2+dfsg-0ubuntu0.16.04.1 md5deep=4.4-2 nodejs=4.2.6~dfsg-1ubuntu4.2 npm=3.5.2-0ubuntu4 default-jre=2:1.8-56ubuntu2 unzip=6.0-20ubuntu1.1 python=2.7.12-1~16.04 python-pip=8.1.1-2ubuntu0.6 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n#  ################################################################################################\n#         Node Security\n#              Early because it needs to run as root.\n#              Requires nodejs npm\n#\n#  # retirejs locked to most recent pre-2.x.x version (2.x.x breaks the retirejs task)\nRUN npm install nsp@3.2.1 retire@1.6.2 eslint@8.38.0 eslint-plugin-scanjs-rules@0.2.1 eslint-plugin-no-unsafe-innerhtml@1.0.16 -g\nRUN ln -s /usr/bin/nodejs /usr/bin/node\n#  ################################################################################################\n#         User\n#\nRUN useradd -ms /bin/bash --groups sudo glue\nUSER glue\n#  ################################################################################################\n#         RVM / Ruby\n#\n#\nRUN gpg --keyserver hkp://pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\nRUN /bin/bash -l -c \"curl -L https://get.rvm.io | bash -s stable\"\nRUN /bin/bash -l -c \"source ~/.rvm/scripts/rvm\"\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.3.1\"\nRUN /bin/bash -l -c \"rvm use 2.3.1 --default\"\nRUN /bin/bash -l -c \"gem install curb --no-document\"\nENV PATH=\"$PATH:/home/glue/.rvm/rubies/ruby-2.3.1/bin\"\n#  ################################################################################################\n#         Python\n#\nRUN /bin/bash -l -c \"sudo pip install --upgrade pip\"\nRUN /bin/bash -l -c \"sudo pip install bandit\"\nRUN /bin/bash -l -c \"sudo pip install awsscout2\"\n#  ################################################################################################\n#         Java\n#\n#  # JDK needed for Dependency Check Maven plugin\nRUN sudo apt-get install -y software-properties-common\nRUN sudo add-apt-repository -y ppa:webupd8team/java\nRUN sudo apt-get update\n#  # Auto-accept the Oracle JDK license\nRUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections\nRUN sudo apt-get install -y oracle-java8-installer\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tools\"\nWORKDIR /home/glue/tools/\n#  ################################################################################################\n#         Truffle Hog\n#\n#   RUN /bin/bash -l -c \"sudo pip install truffleHog\"\nRUN git clone https://github.com/runako/truffleHog.git\nWORKDIR /home/glue/tools/truffleHog\nRUN git checkout rg-local-scan\nWORKDIR /home/glue/tools/\n#   OWASP DEPENDENCY CHECK (needs unzip and default-jre)\nRUN curl -L http://dl.bintray.com/jeremy-long/owasp/dependency-check-1.4.3-release.zip --output owasp-dep-check.zip\nRUN unzip owasp-dep-check.zip\n#   Maven\nRUN sudo apt-get install -y maven\n#   FINDBUGS (Experimental)\n#  RUN curl -L http://downloads.sourceforge.net/project/findbugs/findbugs/3.0.1/findbugs-3.0.1.zip --output findbugs.zip\n#  RUN unzip findbugs.zip\n#  RUN curl -L http://search.maven.org/remotecontent?filepath=com/h3xstream/findsecbugs/findsecbugs-plugin/1.4.4/findsecbugs-plugin-1.4.4.jar > findbugs-3.0.1/plugin/findsecbugs.jar\n#  RUN git clone https://github.com/find-sec-bugs/find-sec-bugs.git\n#   SBT plugin (for Scala)\nRUN sudo apt-get update\nRUN echo \"deb https://dl.bintray.com/sbt/debian /\" | sudo tee -a /etc/apt/sources.list.d/sbt.list\nRUN sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2EE0EA64E40A89B84B2DF73499E82A75642AC823\nRUN sudo apt-get install apt-transport-https\nRUN sudo apt-get update\nRUN sudo apt-get install sbt\nRUN mkdir -p /home/glue/.sbt/0.13/plugins\nRUN echo \"addSbtPlugin(\\\"net.vonbuchholtz\\\" % \\\"sbt-dependency-check\\\" % \\\"0.1.4\\\")\" > /home/glue/.sbt/0.13/plugins/build.sbt\n#  ################################################################################################\n#         Glue App\n#\n#  # Working Dir\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tmp\"\nWORKDIR /home/glue/\n#  # Core Pipeline (and ruby tools)\nRUN /bin/bash -l -c \"git clone https://github.com/OWASP/glue.git\"\n#  RUN /bin/bash -l -c \"mkdir -p /home/glue/glue\"\nCOPY . /home/glue/glue\nWORKDIR /home/glue/glue\nRUN /bin/bash -l -c \"gem install bundler; bundle install -j20; rm owasp-glue*.gem; gem build glue.gemspec; gem install owasp-glue*.gem;\"\nENTRYPOINT [\"glue\"]\nCMD [\"-h\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER Matt Konda <mkonda@jemurai.com>\n# ###############################################################################################\n#        Environment\n#\nRUN apt-get update \\\n && apt-get install git-core sudo curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libffi-dev libgdbm-dev libncurses5-dev automake libtool bison libffi-dev gnupg patch gawk g++ gcc make libc6-dev libcurl3-dev autoconf libtool ncurses-dev zlib1g libreadline6-dev libreadline6 openssl libcurl4-openssl-dev libgmp-dev clamav md5deep nodejs npm default-jre unzip python python-pip -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n# ################################################################################################\n#        Node Security\n#             Early because it needs to run as root.\n#             Requires nodejs npm\n#\n# # retirejs locked to most recent pre-2.x.x version (2.x.x breaks the retirejs task)\nRUN npm install nsp retire@1.6.2 eslint eslint-plugin-scanjs-rules eslint-plugin-no-unsafe-innerhtml -g\nRUN ln -s /usr/bin/nodejs /usr/bin/node\n# ################################################################################################\n#        User\n#\nRUN useradd -ms /bin/bash --groups sudo glue\nUSER glue\n# ################################################################################################\n#        RVM / Ruby\n#\n#\nRUN gpg --keyserver hkp://pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\nRUN /bin/bash -l -c \"curl -L https://get.rvm.io | bash -s stable\"\nRUN /bin/bash -l -c \"source ~/.rvm/scripts/rvm\"\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.3.1\"\nRUN /bin/bash -l -c \"rvm use 2.3.1 --default\"\nRUN /bin/bash -l -c \"gem install curb --no-document\"\nENV PATH=\"$PATH:/home/glue/.rvm/rubies/ruby-2.3.1/bin\"\n# ################################################################################################\n#        Python\n#\nRUN /bin/bash -l -c \"sudo pip install --upgrade pip\"\nRUN /bin/bash -l -c \"sudo pip install bandit\"\nRUN /bin/bash -l -c \"sudo pip install awsscout2\"\n# ################################################################################################\n#        Java\n#\n# # JDK needed for Dependency Check Maven plugin\nRUN sudo apt-get install -y software-properties-common\nRUN sudo add-apt-repository -y ppa:webupd8team/java\nRUN sudo apt-get update\n# # Auto-accept the Oracle JDK license\nRUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections\nRUN sudo apt-get install -y oracle-java8-installer\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tools\"\nWORKDIR /home/glue/tools/\n# ################################################################################################\n#        Truffle Hog\n#\n#  RUN /bin/bash -l -c \"sudo pip install truffleHog\"\nRUN git clone https://github.com/runako/truffleHog.git\nWORKDIR /home/glue/tools/truffleHog\nRUN git checkout rg-local-scan\nWORKDIR /home/glue/tools/\n#  OWASP DEPENDENCY CHECK (needs unzip and default-jre)\nRUN curl -L http://dl.bintray.com/jeremy-long/owasp/dependency-check-1.4.3-release.zip --output owasp-dep-check.zip\nRUN unzip owasp-dep-check.zip\n#  Maven\nRUN sudo apt-get install -y maven\n#  FINDBUGS (Experimental)\n# RUN curl -L http://downloads.sourceforge.net/project/findbugs/findbugs/3.0.1/findbugs-3.0.1.zip --output findbugs.zip\n# RUN unzip findbugs.zip\n# RUN curl -L http://search.maven.org/remotecontent?filepath=com/h3xstream/findsecbugs/findsecbugs-plugin/1.4.4/findsecbugs-plugin-1.4.4.jar > findbugs-3.0.1/plugin/findsecbugs.jar\n# RUN git clone https://github.com/find-sec-bugs/find-sec-bugs.git\n#  SBT plugin (for Scala)\nRUN sudo apt-get update\nRUN echo \"deb https://dl.bintray.com/sbt/debian /\" | sudo tee -a /etc/apt/sources.list.d/sbt.list\nRUN sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2EE0EA64E40A89B84B2DF73499E82A75642AC823\nRUN sudo apt-get install apt-transport-https\nRUN sudo apt-get update\nRUN sudo apt-get install sbt\nRUN mkdir -p /home/glue/.sbt/0.13/plugins\nRUN echo \"addSbtPlugin(\\\"net.vonbuchholtz\\\" % \\\"sbt-dependency-check\\\" % \\\"0.1.4\\\")\" > /home/glue/.sbt/0.13/plugins/build.sbt\n# ################################################################################################\n#        Glue App\n#\n# # Working Dir\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tmp\"\nWORKDIR /home/glue/\n# # Core Pipeline (and ruby tools)\nRUN /bin/bash -l -c \"git clone https://github.com/OWASP/glue.git\"\n# RUN /bin/bash -l -c \"mkdir -p /home/glue/glue\"\nADD . /home/glue/glue\nWORKDIR /home/glue/glue\nRUN /bin/bash -l -c \"gem install bundler; bundle install -j20; rm owasp-glue*.gem; gem build glue.gemspec; gem install owasp-glue*.gem;\"\nENTRYPOINT [\"glue\"]\nCMD [\"-h\"]\n","injectedSmells":[],"originalDockerfileHash":"c31c8d7dd61c6a248b98383b62b42250","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER Matt Konda <mkonda@jemurai.com>\n#  ###############################################################################################\n#         Environment\n#\nRUN apt-get update \\\n && apt-get install git-core sudo curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libffi-dev libgdbm-dev libncurses5-dev automake libtool bison libffi-dev gnupg patch gawk g++ gcc make libc6-dev libcurl3-dev autoconf libtool ncurses-dev zlib1g libreadline6-dev libreadline6 openssl libcurl4-openssl-dev libgmp-dev clamav md5deep nodejs npm default-jre unzip python python-pip -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n#  ################################################################################################\n#         Node Security\n#              Early because it needs to run as root.\n#              Requires nodejs npm\n#\n#  # retirejs locked to most recent pre-2.x.x version (2.x.x breaks the retirejs task)\nRUN npm install nsp retire@1.6.2 eslint eslint-plugin-scanjs-rules eslint-plugin-no-unsafe-innerhtml -g\nRUN ln -s /usr/bin/nodejs /usr/bin/node\n#  ################################################################################################\n#         User\n#\nRUN useradd -ms /bin/bash --groups sudo glue\nUSER glue\n#  ################################################################################################\n#         RVM / Ruby\n#\n#\nRUN gpg --keyserver hkp://pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\nRUN /bin/bash -l -c \"curl -L https://get.rvm.io | bash -s stable\"\nRUN /bin/bash -l -c \"source ~/.rvm/scripts/rvm\"\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.3.1\"\nRUN /bin/bash -l -c \"rvm use 2.3.1 --default\"\nRUN /bin/bash -l -c \"gem install curb --no-document\"\nENV PATH=\"$PATH:/home/glue/.rvm/rubies/ruby-2.3.1/bin\"\n#  ################################################################################################\n#         Python\n#\nRUN /bin/bash -l -c \"sudo pip install --upgrade pip\"\nRUN /bin/bash -l -c \"sudo pip install bandit\"\nRUN /bin/bash -l -c \"sudo pip install awsscout2\"\n#  ################################################################################################\n#         Java\n#\n#  # JDK needed for Dependency Check Maven plugin\nRUN sudo apt-get install -y software-properties-common\nRUN sudo add-apt-repository -y ppa:webupd8team/java\nRUN sudo apt-get update\n#  # Auto-accept the Oracle JDK license\nRUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections\nRUN sudo apt-get install -y oracle-java8-installer\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tools\"\nWORKDIR /home/glue/tools/\n#  ################################################################################################\n#         Truffle Hog\n#\n#   RUN /bin/bash -l -c \"sudo pip install truffleHog\"\nRUN git clone https://github.com/runako/truffleHog.git\nWORKDIR /home/glue/tools/truffleHog\nRUN git checkout rg-local-scan\nWORKDIR /home/glue/tools/\n#   OWASP DEPENDENCY CHECK (needs unzip and default-jre)\nRUN curl -L http://dl.bintray.com/jeremy-long/owasp/dependency-check-1.4.3-release.zip --output owasp-dep-check.zip\nRUN unzip owasp-dep-check.zip\n#   Maven\nRUN sudo apt-get install -y maven\n#   FINDBUGS (Experimental)\n#  RUN curl -L http://downloads.sourceforge.net/project/findbugs/findbugs/3.0.1/findbugs-3.0.1.zip --output findbugs.zip\n#  RUN unzip findbugs.zip\n#  RUN curl -L http://search.maven.org/remotecontent?filepath=com/h3xstream/findsecbugs/findsecbugs-plugin/1.4.4/findsecbugs-plugin-1.4.4.jar > findbugs-3.0.1/plugin/findsecbugs.jar\n#  RUN git clone https://github.com/find-sec-bugs/find-sec-bugs.git\n#   SBT plugin (for Scala)\nRUN sudo apt-get update\nRUN echo \"deb https://dl.bintray.com/sbt/debian /\" | sudo tee -a /etc/apt/sources.list.d/sbt.list\nRUN sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2EE0EA64E40A89B84B2DF73499E82A75642AC823\nRUN sudo apt-get install apt-transport-https\nRUN sudo apt-get update\nRUN sudo apt-get install sbt\nRUN mkdir -p /home/glue/.sbt/0.13/plugins\nRUN echo \"addSbtPlugin(\\\"net.vonbuchholtz\\\" % \\\"sbt-dependency-check\\\" % \\\"0.1.4\\\")\" > /home/glue/.sbt/0.13/plugins/build.sbt\n#  ################################################################################################\n#         Glue App\n#\n#  # Working Dir\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tmp\"\nWORKDIR /home/glue/\n#  # Core Pipeline (and ruby tools)\nRUN /bin/bash -l -c \"git clone https://github.com/OWASP/glue.git\"\n#  RUN /bin/bash -l -c \"mkdir -p /home/glue/glue\"\nADD . /home/glue/glue\nWORKDIR /home/glue/glue\nRUN /bin/bash -l -c \"gem install bundler; bundle install -j20; rm owasp-glue*.gem; gem build glue.gemspec; gem install owasp-glue*.gem;\"\nENTRYPOINT [\"glue\"]\nCMD [\"-h\"]\n","originalDockerfileUglifiedHash":"757398c743bf752b614e7bf8be88a3ab","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/027393faccdc1d00827ef219de5bbc7482c25996.dockerfile"}