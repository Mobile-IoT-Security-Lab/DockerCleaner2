{"seed":3470774579,"processedDockerfileHash":"bd4d384929259427d058f2160af06086","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Version 2.3\nFROM centos:centos6\nMAINTAINER Bernardo Gomez Palacio <bernardo.gomezpalacio@gmail.com>\nENV REFRESHED_AT=\"2015-03-19\"\n#   Install EPEL to have MySQL packages.\nRUN yum install -y http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n#   Install Zabbix release packages.\nRUN yum install -y http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm\n#   Refresh\nRUN yum makecache\n#   Installing Tools.\nRUN yum -y -q install monit nmap traceroute wget sudo\n#   Installing SNMP Utils\n#   RUN yum -y install libsnmp-dev libsnmp-base libsnmp-dev libsnmp-perl libnet-snmp-perl librrds-perl\nRUN yum -y -q install net-snmp-devel net-snmp-libs net-snmp net-snmp-perl net-snmp-python net-snmp-utils\n#   Install Lamp Stack, including PHP5 SNMP\nRUN yum -y -q install mysql mysql-server\n#   Install Apache and PHP5 with ldap support\nRUN yum -y -q install httpd php php-mysql php-snmp php-ldap\n#   Install packages.\nRUN yum -y -q install java-1.8.0-openjdk java-1.8.0-openjdk-devel\nCOPY ./profile.d/java.sh /etc/profile.d/java.sh\nRUN chmod 755 /etc/profile.d/java.sh\n#  RUN /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.25-3.b17.el6_6.x86_64/jre/bin/java\n#   Install Zabbix Server and PHP UI.\n#   Be aware of the Zabbix version number in the  zabbix22-dbfiles-mysql package(!).\nRUN yum -y -q install zabbix-agent zabbix-get zabbix-java-gateway zabbix-sender zabbix-server zabbix-server-mysql zabbix-web zabbix-web-mysql zabbix22-dbfiles-mysql\n#   YUM Cleanup\nRUN yum clean all \\\n && rm -rf /tmp/*\n#   MySQL\nCOPY ./mysql/my.cnf /etc/mysql/conf.d/my.cnf\n#   Get the tuneup kit\n#   https://major.io/mysqltuner/\nRUN wget http://mysqltuner.pl -O /usr/local/bin/mysqltuner.pl\nRUN chmod 755 /usr/local/bin/mysqltuner.pl\nCOPY ./sudoers.d/ /etc/sudoers.d/\n#   Zabbix Conf Files\nCOPY ./zabbix/zabbix.ini /etc/php.d/zabbix.ini\nCOPY ./zabbix/httpd_zabbix.conf /etc/httpd/conf.d/zabbix.conf\nCOPY ./zabbix/zabbix.conf.php /etc/zabbix/web/zabbix.conf.php\nCOPY ./zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf\nCOPY ./zabbix/zabbix_java_gateway.conf /etc/zabbix/zabbix_java_gateway.conf\nCOPY ./zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf\nRUN chmod 640 /etc/zabbix/zabbix_server.conf\nRUN chown root:zabbix /etc/zabbix/zabbix_server.conf\n#   Monit\nCOPY ./monitrc /etc/monitrc\nRUN chmod 600 /etc/monitrc\n#   https://github.com/dotcloud/docker/issues/1240#issuecomment-21807183\nRUN echo \"NETWORKING=yes\" > /etc/sysconfig/network\n#   Add the script that will start the repo.\nCOPY ./scripts/entrypoint.sh /bin/docker-zabbix\nRUN chmod 755 /bin/docker-zabbix\n#   Expose the Ports used by\n#   * Zabbix services\n#   * Apache with Zabbix UI\n#   * Monit\nEXPOSE 10051/tcp 10052/tcp 80/tcp 2812/tcp\nVOLUME [\"/var/lib/mysql\", \"/usr/lib/zabbix/alertscripts\", \"/usr/lib/zabbix/externalscripts\", \"/etc/zabbix/zabbix_agentd.d\"]\nENTRYPOINT [\"/bin/docker-zabbix\"]\nCMD [\"run\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Version 2.3\nFROM centos:centos6\nMAINTAINER Bernardo Gomez Palacio <bernardo.gomezpalacio@gmail.com>\nENV REFRESHED_AT=\"2015-03-19\"\n#  Install EPEL to have MySQL packages.\nRUN yum install -y http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n#  Install Zabbix release packages.\nRUN yum install -y http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm\n#  Refresh\nRUN yum makecache\n#  Installing Tools.\nRUN yum -y -q install monit nmap traceroute wget sudo\n#  Installing SNMP Utils\n#  RUN yum -y install libsnmp-dev libsnmp-base libsnmp-dev libsnmp-perl libnet-snmp-perl librrds-perl\nRUN yum -y -q install net-snmp-devel net-snmp-libs net-snmp net-snmp-perl net-snmp-python net-snmp-utils\n#  Install Lamp Stack, including PHP5 SNMP\nRUN yum -y -q install mysql mysql-server\n#  Install Apache and PHP5 with ldap support\nRUN yum -y -q install httpd php php-mysql php-snmp php-ldap\n#  Install packages.\nRUN yum -y -q install java-1.8.0-openjdk java-1.8.0-openjdk-devel\nCOPY ./profile.d/java.sh /etc/profile.d/java.sh\nRUN chmod 755 /etc/profile.d/java.sh\n# RUN /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.25-3.b17.el6_6.x86_64/jre/bin/java\n#  Install Zabbix Server and PHP UI.\n#  Be aware of the Zabbix version number in the  zabbix22-dbfiles-mysql package(!).\nRUN yum -y -q install zabbix-agent zabbix-get zabbix-java-gateway zabbix-sender zabbix-server zabbix-server-mysql zabbix-web zabbix-web-mysql zabbix22-dbfiles-mysql\n#  YUM Cleanup\nRUN yum clean all \\\n && rm -rf /tmp/*\n#  MySQL\nCOPY ./mysql/my.cnf /etc/mysql/conf.d/my.cnf\n#  Get the tuneup kit\n#  https://major.io/mysqltuner/\nRUN wget http://mysqltuner.pl -O /usr/local/bin/mysqltuner.pl\nRUN chmod 755 /usr/local/bin/mysqltuner.pl\nCOPY ./sudoers.d/ /etc/sudoers.d/\n#  Zabbix Conf Files\nCOPY ./zabbix/zabbix.ini /etc/php.d/zabbix.ini\nCOPY ./zabbix/httpd_zabbix.conf /etc/httpd/conf.d/zabbix.conf\nCOPY ./zabbix/zabbix.conf.php /etc/zabbix/web/zabbix.conf.php\nCOPY ./zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf\nCOPY ./zabbix/zabbix_java_gateway.conf /etc/zabbix/zabbix_java_gateway.conf\nCOPY ./zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf\nRUN chmod 640 /etc/zabbix/zabbix_server.conf\nRUN chown root:zabbix /etc/zabbix/zabbix_server.conf\n#  Monit\nADD ./monitrc /etc/monitrc\nRUN chmod 600 /etc/monitrc\n#  https://github.com/dotcloud/docker/issues/1240#issuecomment-21807183\nRUN echo \"NETWORKING=yes\" > /etc/sysconfig/network\n#  Add the script that will start the repo.\nADD ./scripts/entrypoint.sh /bin/docker-zabbix\nRUN chmod 755 /bin/docker-zabbix\n#  Expose the Ports used by\n#  * Zabbix services\n#  * Apache with Zabbix UI\n#  * Monit\nEXPOSE 10051/tcp 10052/tcp 80/tcp 2812/tcp\nVOLUME [\"/var/lib/mysql\", \"/usr/lib/zabbix/alertscripts\", \"/usr/lib/zabbix/externalscripts\", \"/etc/zabbix/zabbix_agentd.d\"]\nENTRYPOINT [\"/bin/docker-zabbix\"]\nCMD [\"run\"]\n","injectedSmells":[],"originalDockerfileHash":"6a0893f74c629ab3982bb2e5cedfd133","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Version 2.3\nFROM centos:centos6\nMAINTAINER Bernardo Gomez Palacio <bernardo.gomezpalacio@gmail.com>\nENV REFRESHED_AT=\"2015-03-19\"\n#   Install EPEL to have MySQL packages.\nRUN yum install -y http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n#   Install Zabbix release packages.\nRUN yum install -y http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm\n#   Refresh\nRUN yum makecache\n#   Installing Tools.\nRUN yum -y -q install monit nmap traceroute wget sudo\n#   Installing SNMP Utils\n#   RUN yum -y install libsnmp-dev libsnmp-base libsnmp-dev libsnmp-perl libnet-snmp-perl librrds-perl\nRUN yum -y -q install net-snmp-devel net-snmp-libs net-snmp net-snmp-perl net-snmp-python net-snmp-utils\n#   Install Lamp Stack, including PHP5 SNMP\nRUN yum -y -q install mysql mysql-server\n#   Install Apache and PHP5 with ldap support\nRUN yum -y -q install httpd php php-mysql php-snmp php-ldap\n#   Install packages.\nRUN yum -y -q install java-1.8.0-openjdk java-1.8.0-openjdk-devel\nCOPY ./profile.d/java.sh /etc/profile.d/java.sh\nRUN chmod 755 /etc/profile.d/java.sh\n#  RUN /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.25-3.b17.el6_6.x86_64/jre/bin/java\n#   Install Zabbix Server and PHP UI.\n#   Be aware of the Zabbix version number in the  zabbix22-dbfiles-mysql package(!).\nRUN yum -y -q install zabbix-agent zabbix-get zabbix-java-gateway zabbix-sender zabbix-server zabbix-server-mysql zabbix-web zabbix-web-mysql zabbix22-dbfiles-mysql\n#   YUM Cleanup\nRUN yum clean all \\\n && rm -rf /tmp/*\n#   MySQL\nCOPY ./mysql/my.cnf /etc/mysql/conf.d/my.cnf\n#   Get the tuneup kit\n#   https://major.io/mysqltuner/\nRUN wget http://mysqltuner.pl -O /usr/local/bin/mysqltuner.pl\nRUN chmod 755 /usr/local/bin/mysqltuner.pl\nCOPY ./sudoers.d/ /etc/sudoers.d/\n#   Zabbix Conf Files\nCOPY ./zabbix/zabbix.ini /etc/php.d/zabbix.ini\nCOPY ./zabbix/httpd_zabbix.conf /etc/httpd/conf.d/zabbix.conf\nCOPY ./zabbix/zabbix.conf.php /etc/zabbix/web/zabbix.conf.php\nCOPY ./zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf\nCOPY ./zabbix/zabbix_java_gateway.conf /etc/zabbix/zabbix_java_gateway.conf\nCOPY ./zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf\nRUN chmod 640 /etc/zabbix/zabbix_server.conf\nRUN chown root:zabbix /etc/zabbix/zabbix_server.conf\n#   Monit\nADD ./monitrc /etc/monitrc\nRUN chmod 600 /etc/monitrc\n#   https://github.com/dotcloud/docker/issues/1240#issuecomment-21807183\nRUN echo \"NETWORKING=yes\" > /etc/sysconfig/network\n#   Add the script that will start the repo.\nADD ./scripts/entrypoint.sh /bin/docker-zabbix\nRUN chmod 755 /bin/docker-zabbix\n#   Expose the Ports used by\n#   * Zabbix services\n#   * Apache with Zabbix UI\n#   * Monit\nEXPOSE 10051/tcp 10052/tcp 80/tcp 2812/tcp\nVOLUME [\"/var/lib/mysql\", \"/usr/lib/zabbix/alertscripts\", \"/usr/lib/zabbix/externalscripts\", \"/etc/zabbix/zabbix_agentd.d\"]\nENTRYPOINT [\"/bin/docker-zabbix\"]\nCMD [\"run\"]\n","originalDockerfileUglifiedHash":"260f50edc815320447dc92084bdf5a0c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/8d399b9e669749bf0e938feaf40b8a8a855331b9.dockerfile"}