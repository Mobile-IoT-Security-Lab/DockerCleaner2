{"seed":3005400036,"processedDockerfileHash":"55c1209bfac8964389bf35666992e8f0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM rsneddon/cudapythoncpu\n#  FROM kaixhin/cuda-caffe\nMAINTAINER R Sneddon <581894@bah.com>\n#   install fast-rcnn's deps\n#   Get dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends bc=1.07.1-3build1 cmake=3.25.1-1 curl=7.88.1-7ubuntu1 gcc-4.6 g++-4.6 gcc-4.6-multilib g++-4.6-multilib gfortran=4:12.2.0-3ubuntu1 git=1:2.39.2-1ubuntu1 libprotobuf-dev=3.21.12-1ubuntu7 libleveldb-dev=1.23-4 libsnappy-dev=1.1.9-3 libopencv-dev=4.6.0+dfsg-11 libboost-all-dev=1.74.0.3ubuntu7 libhdf5-serial-dev liblmdb-dev=0.9.24-1build2 libjpeg62=1:6b2-3.1 libfreeimage-dev=3.18.0+ds2-9 libatlas-base-dev=3.10.3-13ubuntu1 pkgconf=1.8.1-1ubuntu2 protobuf-compiler=3.21.12-1ubuntu7 python-dev python-pip unzip=6.0-27ubuntu1 -y \\\n && apt-get clean\n#   Use gcc 4.6\nRUN update-alternatives --install /usr/bin/cc cc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++-4.6 30 \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 30\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:2.39.2-1ubuntu1 python-numpy cython python-pip python-skimage python-protobuf python-opencv python-pandas python-yaml python-sklearn octave=7.3.0-1build1 python-ipdb -y --force-yes\nRUN pip install easydict==1.10 --upgrade\n#   octave is good enough for the PASCAL VOC stuff\nRUN ln -s /usr/bin/octave /usr/bin/matlab\n#   build fast-rcnn\nRUN cd /opt \\\n && git clone --recursive https://github.com/rbgirshick/fast-rcnn.git\nRUN export CPLUS_INCLUDE_PATH=/opt/anaconda2/include \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/include/python2.7 \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/lib/python2.7/site-packages/numpy/core/include\nCOPY Makefile.config /opt/fast-rcnn/caffe-fast-rcnn/Makefile.config\n#   Install Glog and Gflags \nRUN cd /opt \\\n && wget --quiet --no-check-certificate http://pkgs.fedoraproject.org/lookaside/pkgs/glog/glog-0.3.3.tar.gz/a6fd2c22f8996846e34c763422717c18/glog-0.3.3.tar.gz \\\n && tar zxvf glog-0.3.3.tar.gz \\\n && cd glog-0.3.3 \\\n && ./configure \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd .. \\\n && rm -rf glog-0.3.3.tar.gz \\\n && ldconfig \\\n && cd /opt\nRUN apt-get install --no-install-recommends unzip=6.0-27ubuntu1 -y\nRUN wget --no-check-certificate --quiet https://github.com/schuhschuh/gflags/archive/master.zip \\\n && unzip master.zip \\\n && cd gflags-master \\\n && mkdir build \\\n && cd build \\\n && export CXXFLAGS=\"-fPIC\" \\\n && cmake .. \\\n && make VERBOSE=1 \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd ../.. \\\n && rm master.zip\n#   Install python dependencies\nWORKDIR /opt\nRUN /opt/anaconda2/bin/conda install --yes conda==3.10.1 \\\n && conda install --yes cython \\\n && conda install --yes opencv \\\n && conda install --yes --channel https://conda.binstar.org/auto easydict\n#   To remove erro when loading libreadline from anaconda\nRUN rm /opt/anaconda2/lib/libreadline* \\\n && ldconfig\nWORKDIR /tmp\nRUN wget --no-check-certificate https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz\nRUN tar -xvf libpng-1.5.15.tar.gz \\\n && rm libpng-1.5.15.tar.gz\nWORKDIR /tmp/libpng-1.5.15\nRUN ./configure --prefix=/opt/libpng-1.5.15 \\\n && make check -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && make check -j$( nproc ;)\nRUN cd /opt/fast-rcnn/lib \\\n && make -j4\nRUN cd /opt/fast-rcnn/caffe-fast-rcnn \\\n && make -j4 \\\n && make -j4 pycaffe\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM rsneddon/cudapythoncpu\n# FROM kaixhin/cuda-caffe\nMAINTAINER R Sneddon <581894@bah.com>\n#  install fast-rcnn's deps\n#  Get dependencies\nRUN apt-get update \\\n && apt-get install bc cmake curl gcc-4.6 g++-4.6 gcc-4.6-multilib g++-4.6-multilib gfortran git libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev liblmdb-dev libjpeg62 libfreeimage-dev libatlas-base-dev pkgconf protobuf-compiler python-dev python-pip unzip -y \\\n && apt-get clean\n#  Use gcc 4.6\nRUN update-alternatives --install /usr/bin/cc cc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++-4.6 30 \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 30\nRUN apt-get update \\\n && apt-get install git python-numpy cython python-pip python-skimage python-protobuf python-opencv python-pandas python-yaml python-sklearn octave python-ipdb -y --force-yes\nRUN pip install easydict --upgrade\n#  octave is good enough for the PASCAL VOC stuff\nRUN ln -s /usr/bin/octave /usr/bin/matlab\n#  build fast-rcnn\nRUN cd /opt \\\n && git clone --recursive https://github.com/rbgirshick/fast-rcnn.git\nRUN export CPLUS_INCLUDE_PATH=/opt/anaconda2/include \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/include/python2.7 \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/lib/python2.7/site-packages/numpy/core/include\nADD Makefile.config /opt/fast-rcnn/caffe-fast-rcnn/Makefile.config\n#  Install Glog and Gflags \nRUN cd /opt \\\n && wget --quiet --no-check-certificate http://pkgs.fedoraproject.org/lookaside/pkgs/glog/glog-0.3.3.tar.gz/a6fd2c22f8996846e34c763422717c18/glog-0.3.3.tar.gz \\\n && tar zxvf glog-0.3.3.tar.gz \\\n && cd glog-0.3.3 \\\n && ./configure \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd .. \\\n && rm -rf glog-0.3.3.tar.gz \\\n && ldconfig \\\n && cd /opt\nRUN apt-get install unzip -y\nRUN wget --no-check-certificate --quiet https://github.com/schuhschuh/gflags/archive/master.zip \\\n && unzip master.zip \\\n && cd gflags-master \\\n && mkdir build \\\n && cd build \\\n && export CXXFLAGS=\"-fPIC\" \\\n && cmake .. \\\n && make VERBOSE=1 \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd ../.. \\\n && rm master.zip\n#  Install python dependencies\nWORKDIR /opt\nRUN /opt/anaconda2/bin/conda install --yes conda==3.10.1 \\\n && conda install --yes cython \\\n && conda install --yes opencv \\\n && conda install --yes --channel https://conda.binstar.org/auto easydict\n#  To remove erro when loading libreadline from anaconda\nRUN rm /opt/anaconda2/lib/libreadline* \\\n && ldconfig\nWORKDIR /tmp\nRUN wget --no-check-certificate https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz\nRUN tar -xvf libpng-1.5.15.tar.gz \\\n && rm libpng-1.5.15.tar.gz\nWORKDIR /tmp/libpng-1.5.15\nRUN ./configure --prefix=/opt/libpng-1.5.15 \\\n && make check -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && make check -j$( nproc ;)\nRUN cd /opt/fast-rcnn/lib \\\n && make -j4\nRUN cd /opt/fast-rcnn/caffe-fast-rcnn \\\n && make -j4 \\\n && make -j4 pycaffe\n","injectedSmells":[],"originalDockerfileHash":"3f3c39072e24067c183a04d9b322c3e4","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM rsneddon/cudapythoncpu\n#  FROM kaixhin/cuda-caffe\nMAINTAINER R Sneddon <581894@bah.com>\n#   install fast-rcnn's deps\n#   Get dependencies\nRUN apt-get update \\\n && apt-get install bc cmake curl gcc-4.6 g++-4.6 gcc-4.6-multilib g++-4.6-multilib gfortran git libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev liblmdb-dev libjpeg62 libfreeimage-dev libatlas-base-dev pkgconf protobuf-compiler python-dev python-pip unzip -y \\\n && apt-get clean\n#   Use gcc 4.6\nRUN update-alternatives --install /usr/bin/cc cc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++-4.6 30 \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 30 \\\n && update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 30\nRUN apt-get update \\\n && apt-get install git python-numpy cython python-pip python-skimage python-protobuf python-opencv python-pandas python-yaml python-sklearn octave python-ipdb -y --force-yes\nRUN pip install easydict --upgrade\n#   octave is good enough for the PASCAL VOC stuff\nRUN ln -s /usr/bin/octave /usr/bin/matlab\n#   build fast-rcnn\nRUN cd /opt \\\n && git clone --recursive https://github.com/rbgirshick/fast-rcnn.git\nRUN export CPLUS_INCLUDE_PATH=/opt/anaconda2/include \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/include/python2.7 \\\n && export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/lib/python2.7/site-packages/numpy/core/include\nADD Makefile.config /opt/fast-rcnn/caffe-fast-rcnn/Makefile.config\n#   Install Glog and Gflags \nRUN cd /opt \\\n && wget --quiet --no-check-certificate http://pkgs.fedoraproject.org/lookaside/pkgs/glog/glog-0.3.3.tar.gz/a6fd2c22f8996846e34c763422717c18/glog-0.3.3.tar.gz \\\n && tar zxvf glog-0.3.3.tar.gz \\\n && cd glog-0.3.3 \\\n && ./configure \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd .. \\\n && rm -rf glog-0.3.3.tar.gz \\\n && ldconfig \\\n && cd /opt\nRUN apt-get install unzip -y\nRUN wget --no-check-certificate --quiet https://github.com/schuhschuh/gflags/archive/master.zip \\\n && unzip master.zip \\\n && cd gflags-master \\\n && mkdir build \\\n && cd build \\\n && export CXXFLAGS=\"-fPIC\" \\\n && cmake .. \\\n && make VERBOSE=1 \\\n && make -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && cd ../.. \\\n && rm master.zip\n#   Install python dependencies\nWORKDIR /opt\nRUN /opt/anaconda2/bin/conda install --yes conda==3.10.1 \\\n && conda install --yes cython \\\n && conda install --yes opencv \\\n && conda install --yes --channel https://conda.binstar.org/auto easydict\n#   To remove erro when loading libreadline from anaconda\nRUN rm /opt/anaconda2/lib/libreadline* \\\n && ldconfig\nWORKDIR /tmp\nRUN wget --no-check-certificate https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz\nRUN tar -xvf libpng-1.5.15.tar.gz \\\n && rm libpng-1.5.15.tar.gz\nWORKDIR /tmp/libpng-1.5.15\nRUN ./configure --prefix=/opt/libpng-1.5.15 \\\n && make check -j$( nproc ;) \\\n && make install -j$( nproc ;) \\\n && make check -j$( nproc ;)\nRUN cd /opt/fast-rcnn/lib \\\n && make -j4\nRUN cd /opt/fast-rcnn/caffe-fast-rcnn \\\n && make -j4 \\\n && make -j4 pycaffe\n","originalDockerfileUglifiedHash":"302ad36f2d75e2e4332ebb3f9a0c756c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/644c7cf8a93f1a70091ef72444243d60446211ad.dockerfile"}