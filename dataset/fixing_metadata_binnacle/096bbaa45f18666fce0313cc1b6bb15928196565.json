{"seed":4293499941,"processedDockerfileHash":"946a8c15f741d61b260d5d6eb81e5fce","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-gem","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   Apache Thrift Docker build environment for CentOS\n#\n#   Known missing client libraries:\n#    - dotnet (will update to 2.0.0 separately)\n#    - haxe (not in centos)\nFROM centos:7.3.1611\nMAINTAINER Apache Thrift <dev@thrift.apache.org>\nRUN yum install -y epel-release\n#   General dependencies\nRUN yum install -y autoconf bison bison-devel clang clang-analyzer cmake3 curl flex gcc gcc-c++ gdb git libtool m4 make tar unzip valgrind wget \\\n && ln -s /usr/bin/cmake3 /usr/bin/cmake \\\n && ln -s /usr/bin/cpack3 /usr/bin/cpack \\\n && ln -s /usr/bin/ctest3 /usr/bin/ctest\n#   C++ dependencies\nRUN yum install -y boost-devel-static zlib-devel openssl-devel libevent-devel \\\n && cd /usr/lib64 \\\n && ln -s libboost_thread-mt.a libboost_thread.a\n#   C# Dependencies\nRUN yum install -y mono-core mono-devel mono-web-devel mono-extras\n#   D Dependencies\nRUN yum install -y http://downloads.dlang.org/releases/2.x/2.076.0/dmd-2.076.0-0.fedora.x86_64.rpm xdg-utils\nRUN curl -sSL https://github.com/D-Programming-Deimos/openssl/archive/master.tar.gz | tar xz \\\n && curl -sSL https://github.com/D-Programming-Deimos/libevent/archive/master.tar.gz | tar xz \\\n && mkdir -p /usr/include/dmd/druntime/import/deimos /usr/include/dmd/druntime/import/C \\\n && mv libevent-master/deimos/* openssl-master/deimos/* /usr/include/dmd/druntime/import/deimos/ \\\n && mv libevent-master/C/* openssl-master/C/* /usr/include/dmd/druntime/import/C/ \\\n && rm -rf libevent-master openssl-master\n#   Dart\nRUN cd /usr/local \\\n && wget -q https://storage.googleapis.com/dart-archive/channels/stable/release/1.24.2/sdk/dartsdk-linux-x64-release.zip \\\n && unzip -q dartsdk-linux-x64-release.zip \\\n && rm dartsdk-linux-x64-release.zip\nENV PATH=\"/usr/local/dart-sdk/bin:$PATH\"\n#   Erlang Dependencies\nRUN curl -sSL http://packages.erlang-solutions.com/rpm/centos/erlang_solutions.repo -o /etc/yum.repos.d/erlang_solutions.repo \\\n && yum install -y erlang-kernel erlang-erts erlang-stdlib erlang-eunit erlang-rebar erlang-tools\n#   GLibC Dependencies\nRUN yum install -y glib2-devel\n#   Go Dependencies\nRUN curl -sSL https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz | tar -C /usr/local/ -xz\nENV PATH=\"/usr/local/go/bin:$PATH\"\n#   Haskell Dependencies\nRUN yum -y install haskell-platform\n#   Haxe Dependencies\n#   Not in debian/stretch\n#   Java Dependencies\nRUN yum install -y ant junit ant-junit java-1.8.0-openjdk-devel\n#   Lua Dependencies\n#   Lua in epel is too old (5.1.4, need 5.2) so we get the latest\nRUN yum install -y readline-devel \\\n && wget -q http://www.lua.org/ftp/lua-5.3.4.tar.gz \\\n && tar xzf lua-5.3.4.tar.gz \\\n && cd lua-5.3.4 \\\n && sed -i 's/CFLAGS= /CFLAGS= -fPIC /g' src/Makefile \\\n && make linux \\\n && make install \\\n && cd .. \\\n && rm -rf lua-5*\n#   MinGW Dependencies\nRUN yum install -y mingw32-binutils mingw32-crt mingw32-nsis\n#   Node.js Dependencies\n#   Work around epel issue where they removed http-parser that nodejs depends on!\nRUN yum -y install https://opensource.enda.eu/packages/http-parser-2.7.1-3.el7.x86_64.rpm\nRUN yum install -y nodejs npm\n#   Ocaml Dependencies\nRUN yum install -y ocaml ocaml-ocamldoc \\\n && wget -q https://raw.github.com/ocaml/opam/master/shell/opam_installer.sh -O - | sh -s /usr/local/bin \\\n && opam init --yes \\\n && opam install --yes oasis \\\n && echo '. /root/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true' >> ~/.bashrc\n#   Perl Dependencies\nRUN yum install -y perl perl-version perl-Bit-Vector perl-Class-Accessor perl-ExtUtils-MakeMaker perl-Test-Simple perl-IO-Socket-SSL perl-Net-SSLeay perl-Crypt-SSLeay\n#   PHP Dependencies\nRUN yum install -y php php-devel php-pear re2c php-phpunit-PHPUnit bzip2\n#   Python Dependencies\nRUN yum install -y python python-devel python-pip python-setuptools python34 python34-devel python34-pip python34-setuptools\nRUN pip2 install --upgrade pip\nRUN pip2 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\nRUN pip3 install --upgrade pip\nRUN pip3 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\n#   Ruby Dependencies\nRUN yum install -y ruby ruby-devel rubygems \\\n && gem install bundler --version 2.4.12\n#   Rust\nRUN curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain 1.17.0\nENV PATH=\"/root/.cargo/bin:$PATH\"\n#   Clean up\nRUN rm -rf /tmp/* \\\n && yum clean all\nENV THRIFT_ROOT=\"/thrift\"\nRUN mkdir -p $THRIFT_ROOT/src\nCOPY Dockerfile $THRIFT_ROOT/\nWORKDIR $THRIFT_ROOT/src\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#  Apache Thrift Docker build environment for CentOS\n#\n#  Known missing client libraries:\n#   - dotnet (will update to 2.0.0 separately)\n#   - haxe (not in centos)\nFROM centos:7.3.1611\nMAINTAINER Apache Thrift <dev@thrift.apache.org>\nRUN yum install -y epel-release\n#  General dependencies\nRUN yum install -y autoconf bison bison-devel clang clang-analyzer cmake3 curl flex gcc gcc-c++ gdb git libtool m4 make tar unzip valgrind wget \\\n && ln -s /usr/bin/cmake3 /usr/bin/cmake \\\n && ln -s /usr/bin/cpack3 /usr/bin/cpack \\\n && ln -s /usr/bin/ctest3 /usr/bin/ctest\n#  C++ dependencies\nRUN yum install -y boost-devel-static zlib-devel openssl-devel libevent-devel \\\n && cd /usr/lib64 \\\n && ln -s libboost_thread-mt.a libboost_thread.a\n#  C# Dependencies\nRUN yum install -y mono-core mono-devel mono-web-devel mono-extras\n#  D Dependencies\nRUN yum install -y http://downloads.dlang.org/releases/2.x/2.076.0/dmd-2.076.0-0.fedora.x86_64.rpm xdg-utils\nRUN curl -sSL https://github.com/D-Programming-Deimos/openssl/archive/master.tar.gz | tar xz \\\n && curl -sSL https://github.com/D-Programming-Deimos/libevent/archive/master.tar.gz | tar xz \\\n && mkdir -p /usr/include/dmd/druntime/import/deimos /usr/include/dmd/druntime/import/C \\\n && mv libevent-master/deimos/* openssl-master/deimos/* /usr/include/dmd/druntime/import/deimos/ \\\n && mv libevent-master/C/* openssl-master/C/* /usr/include/dmd/druntime/import/C/ \\\n && rm -rf libevent-master openssl-master\n#  Dart\nRUN cd /usr/local \\\n && wget -q https://storage.googleapis.com/dart-archive/channels/stable/release/1.24.2/sdk/dartsdk-linux-x64-release.zip \\\n && unzip -q dartsdk-linux-x64-release.zip \\\n && rm dartsdk-linux-x64-release.zip\nENV PATH=\"/usr/local/dart-sdk/bin:$PATH\"\n#  Erlang Dependencies\nRUN curl -sSL http://packages.erlang-solutions.com/rpm/centos/erlang_solutions.repo -o /etc/yum.repos.d/erlang_solutions.repo \\\n && yum install -y erlang-kernel erlang-erts erlang-stdlib erlang-eunit erlang-rebar erlang-tools\n#  GLibC Dependencies\nRUN yum install -y glib2-devel\n#  Go Dependencies\nRUN curl -sSL https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz | tar -C /usr/local/ -xz\nENV PATH=\"/usr/local/go/bin:$PATH\"\n#  Haskell Dependencies\nRUN yum -y install haskell-platform\n#  Haxe Dependencies\n#  Not in debian/stretch\n#  Java Dependencies\nRUN yum install -y ant junit ant-junit java-1.8.0-openjdk-devel\n#  Lua Dependencies\n#  Lua in epel is too old (5.1.4, need 5.2) so we get the latest\nRUN yum install -y readline-devel \\\n && wget -q http://www.lua.org/ftp/lua-5.3.4.tar.gz \\\n && tar xzf lua-5.3.4.tar.gz \\\n && cd lua-5.3.4 \\\n && sed -i 's/CFLAGS= /CFLAGS= -fPIC /g' src/Makefile \\\n && make linux \\\n && make install \\\n && cd .. \\\n && rm -rf lua-5*\n#  MinGW Dependencies\nRUN yum install -y mingw32-binutils mingw32-crt mingw32-nsis\n#  Node.js Dependencies\n#  Work around epel issue where they removed http-parser that nodejs depends on!\nRUN yum -y install https://opensource.enda.eu/packages/http-parser-2.7.1-3.el7.x86_64.rpm\nRUN yum install -y nodejs npm\n#  Ocaml Dependencies\nRUN yum install -y ocaml ocaml-ocamldoc \\\n && wget -q https://raw.github.com/ocaml/opam/master/shell/opam_installer.sh -O - | sh -s /usr/local/bin \\\n && opam init --yes \\\n && opam install --yes oasis \\\n && echo '. /root/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true' >> ~/.bashrc\n#  Perl Dependencies\nRUN yum install -y perl perl-version perl-Bit-Vector perl-Class-Accessor perl-ExtUtils-MakeMaker perl-Test-Simple perl-IO-Socket-SSL perl-Net-SSLeay perl-Crypt-SSLeay\n#  PHP Dependencies\nRUN yum install -y php php-devel php-pear re2c php-phpunit-PHPUnit bzip2\n#  Python Dependencies\nRUN yum install -y python python-devel python-pip python-setuptools python34 python34-devel python34-pip python34-setuptools\nRUN pip2 install --upgrade pip\nRUN pip2 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\nRUN pip3 install --upgrade pip\nRUN pip3 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\n#  Ruby Dependencies\nRUN yum install -y ruby ruby-devel rubygems \\\n && gem install bundler\n#  Rust\nRUN curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain 1.17.0\nENV PATH=\"/root/.cargo/bin:$PATH\"\n#  Clean up\nRUN rm -rf /tmp/* \\\n && yum clean all\nENV THRIFT_ROOT=\"/thrift\"\nRUN mkdir -p $THRIFT_ROOT/src\nCOPY Dockerfile $THRIFT_ROOT/\nWORKDIR $THRIFT_ROOT/src\n","injectedSmells":[],"originalDockerfileHash":"3f054bc501f012014ec863e3ffe99c25","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#   Apache Thrift Docker build environment for CentOS\n#\n#   Known missing client libraries:\n#    - dotnet (will update to 2.0.0 separately)\n#    - haxe (not in centos)\nFROM centos:7.3.1611\nMAINTAINER Apache Thrift <dev@thrift.apache.org>\nRUN yum install -y epel-release\n#   General dependencies\nRUN yum install -y autoconf bison bison-devel clang clang-analyzer cmake3 curl flex gcc gcc-c++ gdb git libtool m4 make tar unzip valgrind wget \\\n && ln -s /usr/bin/cmake3 /usr/bin/cmake \\\n && ln -s /usr/bin/cpack3 /usr/bin/cpack \\\n && ln -s /usr/bin/ctest3 /usr/bin/ctest\n#   C++ dependencies\nRUN yum install -y boost-devel-static zlib-devel openssl-devel libevent-devel \\\n && cd /usr/lib64 \\\n && ln -s libboost_thread-mt.a libboost_thread.a\n#   C# Dependencies\nRUN yum install -y mono-core mono-devel mono-web-devel mono-extras\n#   D Dependencies\nRUN yum install -y http://downloads.dlang.org/releases/2.x/2.076.0/dmd-2.076.0-0.fedora.x86_64.rpm xdg-utils\nRUN curl -sSL https://github.com/D-Programming-Deimos/openssl/archive/master.tar.gz | tar xz \\\n && curl -sSL https://github.com/D-Programming-Deimos/libevent/archive/master.tar.gz | tar xz \\\n && mkdir -p /usr/include/dmd/druntime/import/deimos /usr/include/dmd/druntime/import/C \\\n && mv libevent-master/deimos/* openssl-master/deimos/* /usr/include/dmd/druntime/import/deimos/ \\\n && mv libevent-master/C/* openssl-master/C/* /usr/include/dmd/druntime/import/C/ \\\n && rm -rf libevent-master openssl-master\n#   Dart\nRUN cd /usr/local \\\n && wget -q https://storage.googleapis.com/dart-archive/channels/stable/release/1.24.2/sdk/dartsdk-linux-x64-release.zip \\\n && unzip -q dartsdk-linux-x64-release.zip \\\n && rm dartsdk-linux-x64-release.zip\nENV PATH=\"/usr/local/dart-sdk/bin:$PATH\"\n#   Erlang Dependencies\nRUN curl -sSL http://packages.erlang-solutions.com/rpm/centos/erlang_solutions.repo -o /etc/yum.repos.d/erlang_solutions.repo \\\n && yum install -y erlang-kernel erlang-erts erlang-stdlib erlang-eunit erlang-rebar erlang-tools\n#   GLibC Dependencies\nRUN yum install -y glib2-devel\n#   Go Dependencies\nRUN curl -sSL https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz | tar -C /usr/local/ -xz\nENV PATH=\"/usr/local/go/bin:$PATH\"\n#   Haskell Dependencies\nRUN yum -y install haskell-platform\n#   Haxe Dependencies\n#   Not in debian/stretch\n#   Java Dependencies\nRUN yum install -y ant junit ant-junit java-1.8.0-openjdk-devel\n#   Lua Dependencies\n#   Lua in epel is too old (5.1.4, need 5.2) so we get the latest\nRUN yum install -y readline-devel \\\n && wget -q http://www.lua.org/ftp/lua-5.3.4.tar.gz \\\n && tar xzf lua-5.3.4.tar.gz \\\n && cd lua-5.3.4 \\\n && sed -i 's/CFLAGS= /CFLAGS= -fPIC /g' src/Makefile \\\n && make linux \\\n && make install \\\n && cd .. \\\n && rm -rf lua-5*\n#   MinGW Dependencies\nRUN yum install -y mingw32-binutils mingw32-crt mingw32-nsis\n#   Node.js Dependencies\n#   Work around epel issue where they removed http-parser that nodejs depends on!\nRUN yum -y install https://opensource.enda.eu/packages/http-parser-2.7.1-3.el7.x86_64.rpm\nRUN yum install -y nodejs npm\n#   Ocaml Dependencies\nRUN yum install -y ocaml ocaml-ocamldoc \\\n && wget -q https://raw.github.com/ocaml/opam/master/shell/opam_installer.sh -O - | sh -s /usr/local/bin \\\n && opam init --yes \\\n && opam install --yes oasis \\\n && echo '. /root/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true' >> ~/.bashrc\n#   Perl Dependencies\nRUN yum install -y perl perl-version perl-Bit-Vector perl-Class-Accessor perl-ExtUtils-MakeMaker perl-Test-Simple perl-IO-Socket-SSL perl-Net-SSLeay perl-Crypt-SSLeay\n#   PHP Dependencies\nRUN yum install -y php php-devel php-pear re2c php-phpunit-PHPUnit bzip2\n#   Python Dependencies\nRUN yum install -y python python-devel python-pip python-setuptools python34 python34-devel python34-pip python34-setuptools\nRUN pip2 install --upgrade pip\nRUN pip2 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\nRUN pip3 install --upgrade pip\nRUN pip3 install --upgrade backports.ssl_match_hostname ipaddress setuptools six tornado tornado-testing twisted virtualenv zope-interface\n#   Ruby Dependencies\nRUN yum install -y ruby ruby-devel rubygems \\\n && gem install bundler\n#   Rust\nRUN curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain 1.17.0\nENV PATH=\"/root/.cargo/bin:$PATH\"\n#   Clean up\nRUN rm -rf /tmp/* \\\n && yum clean all\nENV THRIFT_ROOT=\"/thrift\"\nRUN mkdir -p $THRIFT_ROOT/src\nCOPY Dockerfile $THRIFT_ROOT/\nWORKDIR $THRIFT_ROOT/src\n","originalDockerfileUglifiedHash":"6598fd288f5317bbd84cf6903d71492e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/096bbaa45f18666fce0313cc1b6bb15928196565.dockerfile"}