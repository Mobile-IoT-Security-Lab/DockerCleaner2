{"seed":4283432892,"processedDockerfileHash":"b4f0d798c1c4ec108b0ecc480c5746ea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM jupyterhub-user\nMAINTAINER Thomas Krijnen <thomas@ifcopenshell.org>\nUSER root\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 git=1:2.39.2-1ubuntu1 cmake=3.25.1-1 build-essential=12.9ubuntu3 libgl1-mesa-dev=23.0.1-1ubuntu1 libfreetype6-dev=2.12.1+dfsg-4 swig=4.1.0-0.2 libglu1-mesa-dev=9.0.2-1.1 libzmq3-dev=4.3.4-6 libsqlite3-dev=3.40.1-1 libboost-all-dev=1.74.0.3ubuntu7 libicu-dev=72.1-3ubuntu1 python3-dev=3.11.2-1 -y )\n#   OCE\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/oce\nRUN mkdir oce/build \\\n && mkdir oce/install\nWORKDIR /opt/build/oce/build\nRUN git checkout copy_headers\nENV CFLAGS=\"-fPIC\"\nENV CXXFLAGS=\"-fPIC\"\nRUN cmake -DOCE_TESTING=OFF -DOCE_BUILD_SHARED_LIB=ON -DOCE_VISUALISATION=ON -DOCE_OCAF=OFF -DOCE_INSTALL_PREFIX=/opt/build/install/oce ..\nRUN make -j4 install\n#   IfcOpenShell\nWORKDIR /opt/build\nRUN git clone https://github.com/IfcOpenShell/IfcOpenShell\nWORKDIR IfcOpenShell/build\nRUN git checkout v0.6.0\nRUN which wget &> /dev/null || (apt-get update ;apt-get install --no-install-recommends wget=1.20.3 ) ; wget --no-verbose --output-document /tmp/ifcopenshell_version.json https://api.github.com/repos/IfcOpenShell/IfcOpenShell/git/refs/heads/v0.6.0\nRUN git pull\nRUN cmake -DCOLLADA_SUPPORT=Off -DBUILD_EXAMPLES=Off -DIFCXML_SUPPORT=Off -DOCC_INCLUDE_DIR=/opt/build/install/oce/include/oce -DOCC_LIBRARY_DIR=/opt/build/install/oce/lib -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ../cmake\nRUN make -j4 install\n#   pyOCC\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythonocc-core\nWORKDIR /opt/build/pythonocc-core/build\nRUN git checkout review/jupyter_render_improvements\nRUN cmake -DOCE_INCLUDE_PATH=/opt/build/install/oce/include/oce -DOCE_LIB_PATH=/opt/build/install/oce/lib -DPYTHONOCC_WRAP_VISU=ON -DPYTHONOCC_WRAP_OCAF=OFF -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ..\nRUN make -j4 install\nRUN echo \"/opt/build/install/oce/lib\" >> /etc/ld.so.conf.d/pyocc.conf\nRUN ldconfig\nRUN conda install -y matplotlib\nRUN conda install -y -c conda-forge ipywidgets\n#   pythreejs\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythreejs\nWORKDIR /opt/build/pythreejs\nRUN git checkout own_fixes\nRUN chown -R jovyan .\nUSER jovyan\nRUN /opt/conda/bin/pip install --user -e .\nWORKDIR /opt/build/pythreejs/js\nRUN npm run autogen\nRUN npm run build:all\nUSER root\nRUN jupyter nbextension install --py --symlink --sys-prefix pythreejs\nRUN jupyter nbextension enable pythreejs --py --sys-prefix\n#   populate workspace with examples\nWORKDIR /opt/build\nCOPY examples/populate_workspace.sh /opt/build/populate_workspace.sh\nRUN chmod +x /opt/build/populate_workspace.sh\nRUN sed -e '38i/opt/build/populate_workspace.sh' -i /usr/local/bin/start-singleuser.sh\nRUN git clone https://github.com/gatsoulis/py2ipynb\nCOPY examples/01_visualize.py /opt/examples/01_visualize.py\nCOPY examples/02_analyze.py /opt/examples/02_analyze.py\nCOPY examples/ifc_viewer.py /opt/examples/ifc_viewer.py\n#   viewer optimizations\n#   USER jovyan\n#   RUN /opt/conda/bin/pip install --user --upgrade --pre pyzmq\n#   USER root\n#   # COPY optimize_traitlets.py /home/jovyan/.local/lib/python3.6/site-packages/optimize_traitlets.py\n#   WORKDIR /opt/build\n#   RUN git clone https://github.com/vidartf/ipytunnel\n#   WORKDIR ipytunnel\n#   RUN chown -R jovyan .\n#   USER jovyan\n#   RUN /opt/conda/bin/pip install --user -e .\n#   USER root\n#   RUN jupyter nbextension enable --py --sys-prefix ipytunnel\nUSER jovyan\nWORKDIR /home/jovyan/work\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM jupyterhub-user\nMAINTAINER Thomas Krijnen <thomas@ifcopenshell.org>\nUSER root\nRUN apt-get update\nRUN apt-get install wget git cmake build-essential libgl1-mesa-dev libfreetype6-dev swig libglu1-mesa-dev libzmq3-dev libsqlite3-dev libboost-all-dev libicu-dev python3-dev -y\n#  OCE\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/oce\nRUN mkdir oce/build \\\n && mkdir oce/install\nWORKDIR /opt/build/oce/build\nRUN git checkout copy_headers\nENV CFLAGS=\"-fPIC\"\nENV CXXFLAGS=\"-fPIC\"\nRUN cmake -DOCE_TESTING=OFF -DOCE_BUILD_SHARED_LIB=ON -DOCE_VISUALISATION=ON -DOCE_OCAF=OFF -DOCE_INSTALL_PREFIX=/opt/build/install/oce ..\nRUN make -j4 install\n#  IfcOpenShell\nWORKDIR /opt/build\nRUN git clone https://github.com/IfcOpenShell/IfcOpenShell\nWORKDIR IfcOpenShell/build\nRUN git checkout v0.6.0\nADD https://api.github.com/repos/IfcOpenShell/IfcOpenShell/git/refs/heads/v0.6.0 /tmp/ifcopenshell_version.json\nRUN git pull\nRUN cmake -DCOLLADA_SUPPORT=Off -DBUILD_EXAMPLES=Off -DIFCXML_SUPPORT=Off -DOCC_INCLUDE_DIR=/opt/build/install/oce/include/oce -DOCC_LIBRARY_DIR=/opt/build/install/oce/lib -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ../cmake\nRUN make -j4 install\n#  pyOCC\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythonocc-core\nWORKDIR /opt/build/pythonocc-core/build\nRUN git checkout review/jupyter_render_improvements\nRUN cmake -DOCE_INCLUDE_PATH=/opt/build/install/oce/include/oce -DOCE_LIB_PATH=/opt/build/install/oce/lib -DPYTHONOCC_WRAP_VISU=ON -DPYTHONOCC_WRAP_OCAF=OFF -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ..\nRUN make -j4 install\nRUN echo \"/opt/build/install/oce/lib\" >> /etc/ld.so.conf.d/pyocc.conf\nRUN ldconfig\nRUN conda install -y matplotlib\nRUN conda install -y -c conda-forge ipywidgets\n#  pythreejs\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythreejs\nWORKDIR /opt/build/pythreejs\nRUN git checkout own_fixes\nRUN chown -R jovyan .\nUSER jovyan\nRUN /opt/conda/bin/pip install --user -e .\nWORKDIR /opt/build/pythreejs/js\nRUN npm run autogen\nRUN npm run build:all\nUSER root\nRUN jupyter nbextension install --py --symlink --sys-prefix pythreejs\nRUN jupyter nbextension enable pythreejs --py --sys-prefix\n#  populate workspace with examples\nWORKDIR /opt/build\nCOPY examples/populate_workspace.sh /opt/build/populate_workspace.sh\nRUN chmod +x /opt/build/populate_workspace.sh\nRUN sed -e '38i/opt/build/populate_workspace.sh' -i /usr/local/bin/start-singleuser.sh\nRUN git clone https://github.com/gatsoulis/py2ipynb\nCOPY examples/01_visualize.py /opt/examples/01_visualize.py\nCOPY examples/02_analyze.py /opt/examples/02_analyze.py\nCOPY examples/ifc_viewer.py /opt/examples/ifc_viewer.py\n#  viewer optimizations\n#  USER jovyan\n#  RUN /opt/conda/bin/pip install --user --upgrade --pre pyzmq\n#  USER root\n#  # COPY optimize_traitlets.py /home/jovyan/.local/lib/python3.6/site-packages/optimize_traitlets.py\n#  WORKDIR /opt/build\n#  RUN git clone https://github.com/vidartf/ipytunnel\n#  WORKDIR ipytunnel\n#  RUN chown -R jovyan .\n#  USER jovyan\n#  RUN /opt/conda/bin/pip install --user -e .\n#  USER root\n#  RUN jupyter nbextension enable --py --sys-prefix ipytunnel\nUSER jovyan\nWORKDIR /home/jovyan/work\n","injectedSmells":[],"originalDockerfileHash":"1447b76f6e336274b501e8a9ff4fffbc","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM jupyterhub-user\nMAINTAINER Thomas Krijnen <thomas@ifcopenshell.org>\nUSER root\nRUN apt-get update\nRUN apt-get install wget git cmake build-essential libgl1-mesa-dev libfreetype6-dev swig libglu1-mesa-dev libzmq3-dev libsqlite3-dev libboost-all-dev libicu-dev python3-dev -y\n#   OCE\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/oce\nRUN mkdir oce/build \\\n && mkdir oce/install\nWORKDIR /opt/build/oce/build\nRUN git checkout copy_headers\nENV CFLAGS=\"-fPIC\"\nENV CXXFLAGS=\"-fPIC\"\nRUN cmake -DOCE_TESTING=OFF -DOCE_BUILD_SHARED_LIB=ON -DOCE_VISUALISATION=ON -DOCE_OCAF=OFF -DOCE_INSTALL_PREFIX=/opt/build/install/oce ..\nRUN make -j4 install\n#   IfcOpenShell\nWORKDIR /opt/build\nRUN git clone https://github.com/IfcOpenShell/IfcOpenShell\nWORKDIR IfcOpenShell/build\nRUN git checkout v0.6.0\nADD https://api.github.com/repos/IfcOpenShell/IfcOpenShell/git/refs/heads/v0.6.0 /tmp/ifcopenshell_version.json\nRUN git pull\nRUN cmake -DCOLLADA_SUPPORT=Off -DBUILD_EXAMPLES=Off -DIFCXML_SUPPORT=Off -DOCC_INCLUDE_DIR=/opt/build/install/oce/include/oce -DOCC_LIBRARY_DIR=/opt/build/install/oce/lib -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ../cmake\nRUN make -j4 install\n#   pyOCC\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythonocc-core\nWORKDIR /opt/build/pythonocc-core/build\nRUN git checkout review/jupyter_render_improvements\nRUN cmake -DOCE_INCLUDE_PATH=/opt/build/install/oce/include/oce -DOCE_LIB_PATH=/opt/build/install/oce/lib -DPYTHONOCC_WRAP_VISU=ON -DPYTHONOCC_WRAP_OCAF=OFF -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.6m.so -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m -DPYTHON_EXECUTABLE=/opt/conda/bin/python ..\nRUN make -j4 install\nRUN echo \"/opt/build/install/oce/lib\" >> /etc/ld.so.conf.d/pyocc.conf\nRUN ldconfig\nRUN conda install -y matplotlib\nRUN conda install -y -c conda-forge ipywidgets\n#   pythreejs\nWORKDIR /opt/build\nRUN git clone https://github.com/aothms/pythreejs\nWORKDIR /opt/build/pythreejs\nRUN git checkout own_fixes\nRUN chown -R jovyan .\nUSER jovyan\nRUN /opt/conda/bin/pip install --user -e .\nWORKDIR /opt/build/pythreejs/js\nRUN npm run autogen\nRUN npm run build:all\nUSER root\nRUN jupyter nbextension install --py --symlink --sys-prefix pythreejs\nRUN jupyter nbextension enable pythreejs --py --sys-prefix\n#   populate workspace with examples\nWORKDIR /opt/build\nCOPY examples/populate_workspace.sh /opt/build/populate_workspace.sh\nRUN chmod +x /opt/build/populate_workspace.sh\nRUN sed -e '38i/opt/build/populate_workspace.sh' -i /usr/local/bin/start-singleuser.sh\nRUN git clone https://github.com/gatsoulis/py2ipynb\nCOPY examples/01_visualize.py /opt/examples/01_visualize.py\nCOPY examples/02_analyze.py /opt/examples/02_analyze.py\nCOPY examples/ifc_viewer.py /opt/examples/ifc_viewer.py\n#   viewer optimizations\n#   USER jovyan\n#   RUN /opt/conda/bin/pip install --user --upgrade --pre pyzmq\n#   USER root\n#   # COPY optimize_traitlets.py /home/jovyan/.local/lib/python3.6/site-packages/optimize_traitlets.py\n#   WORKDIR /opt/build\n#   RUN git clone https://github.com/vidartf/ipytunnel\n#   WORKDIR ipytunnel\n#   RUN chown -R jovyan .\n#   USER jovyan\n#   RUN /opt/conda/bin/pip install --user -e .\n#   USER root\n#   RUN jupyter nbextension enable --py --sys-prefix ipytunnel\nUSER jovyan\nWORKDIR /home/jovyan/work\n","originalDockerfileUglifiedHash":"11d59dc64d9f9d1e0a05f84ad8c2ae41","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4f1b2f49a91d341761512eed1988a6fa39de1a48.dockerfile"}