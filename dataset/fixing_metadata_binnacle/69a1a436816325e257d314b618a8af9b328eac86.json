{"seed":2238024329,"processedDockerfileHash":"9a3f98329466b7db864756e69d20c43c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM python:3.6.4-alpine3.7\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family --no-cache \\\n && apk add g++ git gtk+ gtk+-dev make mesa-dev openssl-dev patch --no-cache --virtual .build-deps \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#  Image\nFROM python:3.6.4-alpine3.7\n#  Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#  Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#  Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev openssl-dev patch \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\n","injectedSmells":[],"originalDockerfileHash":"44466e64c5003ad97ff9203285658a89","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM python:3.6.4-alpine3.7\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev openssl-dev patch \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\n","originalDockerfileUglifiedHash":"b867406f1f22db2ec942a96ede33034c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/69a1a436816325e257d314b618a8af9b328eac86.dockerfile"}