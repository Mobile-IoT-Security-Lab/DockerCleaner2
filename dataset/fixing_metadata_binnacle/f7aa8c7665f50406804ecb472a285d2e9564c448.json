{"seed":3369201840,"processedDockerfileHash":"79c62b2a24e8403e5c53903adcba9202","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER dev@cedvan.com\n#   Version Pydio\nENV PYDIO_VERSION=\"8.0.1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Install locales\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends locales=2.23-0ubuntu11.3 locales-all=2.23-0ubuntu11.3 -qy \\\n && echo 'LANG=en_US.UTF-8' > /etc/default/locale \\\n && dpkg-reconfigure locales\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#   Install requirements\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends apt-utils=1.2.35 ca-certificates=20210119~16.04.1 ssl-cert=1.0.37 libaprutil1=1.5.4-1build1 apt-transport-https=1.2.35 libapr1=1.5.2-3 wget=1.17.1-1ubuntu1.5 -qqy\n#   Install supervisor\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends supervisor=3.2.0-2ubuntu0.2 -qqy\n#   Install PHP\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends php-fpm=1:7.0+35ubuntu6.1 php-cli=1:7.0+35ubuntu6.1 php-gd=1:7.0+35ubuntu6.1 php-mcrypt=1:7.0+35ubuntu6.1 php-mysql=1:7.0+35ubuntu6.1 php-pgsql=1:7.0+35ubuntu6.1 php-dom php-intl=1:7.0+35ubuntu6.1 php-mbstring=1:7.0+35ubuntu6.1 php-sqlite3=1:7.0+35ubuntu6.1 -qqy\n#   Install Nginx\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends nginx=1.10.3-0ubuntu0.16.04.5 apache2-utils=2.4.18-2ubuntu3.17 -qqy\n#   Install MySQL\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends mysql-server=5.7.33-0ubuntu0.16.04.1 -qqy\n#   Configure PHP and Nginx\nRUN mkdir /run/php \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf\n#   Configure MySQL\nRUN mkdir /backup \\\n && cp -rf /var/lib/mysql /backup/mysql \\\n && rm -rf /var/lib/mysql\n#   Install build requirements\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends curl=7.47.0-1ubuntu2.19 git=1:2.7.4-0ubuntu1.10 unzip=6.0-20ubuntu1.1 -qqy\n#   Download Pydio\nRUN curl -sL https://github.com/pydio/pydio-core/archive/pydio-core-${PYDIO_VERSION}.tar.gz | tar xzC /tmp \\\n && rm -rf /var/www \\\n && mv /tmp/pydio-core-pydio-core-${PYDIO_VERSION} /var/www\n#   Install composer\nRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === '544e09ee996cdf60ece3804abc52599c22b1f40f4323403c44d44fdfdd586475ca9813a858088ffbc1f233e9b180f061') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php \\\n && php -r \"unlink('composer-setup.php');\" \\\n && mv composer.phar /bin/composer \\\n && chmod +x /bin/composer\n#   Install NPM\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends nodejs=4.2.6~dfsg-1ubuntu4.2 -qy\n#   Install Grunt\nRUN npm install grunt-cli@1.4.3 -g\n#   Install dependancies\nRUN cd /var/www/core/src/core \\\n && composer install \\\n && cd /var/www/core/src \\\n && find . -maxdepth 3 -name composer.json -execdir composer install\n#   Remove build requirements\nRUN apt-get remove -qy curl git wget unzip nodejs \\\n && apt-get autoremove -qy \\\n && apt-get autoclean -qy \\\n && rm -rf /bin/composer \\\n && rm -rf /root/.composer \\\n && rm -rf /too/.npm\n#   Load permissions\nRUN chown -R www-data:www-data /var/www\n#   Load Scripts bash for installing Pydio\nCOPY scripts /scripts/pydio/\nRUN chmod -R u+x /scripts/pydio\n#   Load assets\nCOPY assets/supervisor/conf.d /etc/supervisor/conf.d\nCOPY assets/supervisor/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY assets/vhosts /etc/nginx/sites-available\nCOPY assets/config /assets/config\n#   Clean\nRUN apt-get -qqy --purge autoremove \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nVOLUME /data/pydio\nVOLUME /var/lib/mysql\nEXPOSE 3306/tcp\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD /scripts/pydio/launch.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER dev@cedvan.com\n#  Version Pydio\nENV PYDIO_VERSION=\"8.0.1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  Install locales\nRUN apt-get update -qq \\\n && apt-get install locales locales-all -qy \\\n && echo 'LANG=en_US.UTF-8' > /etc/default/locale \\\n && dpkg-reconfigure locales\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#  Install requirements\nRUN apt-get update -qq \\\n && apt-get install apt-utils ca-certificates ssl-cert libaprutil1 apt-transport-https libapr1 wget -qqy\n#  Install supervisor\nRUN apt-get update -qq \\\n && apt-get install supervisor -qqy\n#  Install PHP\nRUN apt-get update -qq \\\n && apt-get install php-fpm php-cli php-gd php-mcrypt php-mysql php-pgsql php-dom php-intl php-mbstring php-sqlite3 -qqy\n#  Install Nginx\nRUN apt-get update -qq \\\n && apt-get install nginx apache2-utils -qqy\n#  Install MySQL\nRUN apt-get update -qq \\\n && apt-get install mysql-server -qqy\n#  Configure PHP and Nginx\nRUN mkdir /run/php \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf\n#  Configure MySQL\nRUN mkdir /backup \\\n && cp -rf /var/lib/mysql /backup/mysql \\\n && rm -rf /var/lib/mysql\n#  Install build requirements\nRUN apt-get update -qq \\\n && apt-get install curl git unzip -qqy\n#  Download Pydio\nRUN curl -sL https://github.com/pydio/pydio-core/archive/pydio-core-${PYDIO_VERSION}.tar.gz | tar xzC /tmp \\\n && rm -rf /var/www \\\n && mv /tmp/pydio-core-pydio-core-${PYDIO_VERSION} /var/www\n#  Install composer\nRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === '544e09ee996cdf60ece3804abc52599c22b1f40f4323403c44d44fdfdd586475ca9813a858088ffbc1f233e9b180f061') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php \\\n && php -r \"unlink('composer-setup.php');\" \\\n && mv composer.phar /bin/composer \\\n && chmod +x /bin/composer\n#  Install NPM\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get update -qq \\\n && apt-get install nodejs -qy\n#  Install Grunt\nRUN npm install grunt-cli -g\n#  Install dependancies\nRUN cd /var/www/core/src/core \\\n && composer install \\\n && cd /var/www/core/src \\\n && find . -maxdepth 3 -name composer.json -execdir composer install ; \\\n && find . -maxdepth 3 -name Gruntfile.js -execdir bash -c \"npm install \\\n && grunt \\\n && rm -rf node_modules\" ;\n#  Remove build requirements\nRUN apt-get remove -qy curl git wget unzip nodejs \\\n && apt-get autoremove -qy \\\n && apt-get autoclean -qy \\\n && rm -rf /bin/composer \\\n && rm -rf /root/.composer \\\n && rm -rf /too/.npm\n#  Load permissions\nRUN chown -R www-data:www-data /var/www\n#  Load Scripts bash for installing Pydio\nCOPY scripts /scripts/pydio/\nRUN chmod -R u+x /scripts/pydio\n#  Load assets\nCOPY assets/supervisor/conf.d /etc/supervisor/conf.d\nCOPY assets/supervisor/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY assets/vhosts /etc/nginx/sites-available\nCOPY assets/config /assets/config\n#  Clean\nRUN apt-get -qqy --purge autoremove \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nVOLUME /data/pydio\nVOLUME /var/lib/mysql\nEXPOSE 3306/tcp\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD /scripts/pydio/launch.sh\n","injectedSmells":[],"originalDockerfileHash":"1d564e00b056f49d9944266bc8d1f0b0","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER dev@cedvan.com\n#   Version Pydio\nENV PYDIO_VERSION=\"8.0.1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Install locales\nRUN apt-get update -qq \\\n && apt-get install locales locales-all -qy \\\n && echo 'LANG=en_US.UTF-8' > /etc/default/locale \\\n && dpkg-reconfigure locales\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\n#   Install requirements\nRUN apt-get update -qq \\\n && apt-get install apt-utils ca-certificates ssl-cert libaprutil1 apt-transport-https libapr1 wget -qqy\n#   Install supervisor\nRUN apt-get update -qq \\\n && apt-get install supervisor -qqy\n#   Install PHP\nRUN apt-get update -qq \\\n && apt-get install php-fpm php-cli php-gd php-mcrypt php-mysql php-pgsql php-dom php-intl php-mbstring php-sqlite3 -qqy\n#   Install Nginx\nRUN apt-get update -qq \\\n && apt-get install nginx apache2-utils -qqy\n#   Install MySQL\nRUN apt-get update -qq \\\n && apt-get install mysql-server -qqy\n#   Configure PHP and Nginx\nRUN mkdir /run/php \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf\n#   Configure MySQL\nRUN mkdir /backup \\\n && cp -rf /var/lib/mysql /backup/mysql \\\n && rm -rf /var/lib/mysql\n#   Install build requirements\nRUN apt-get update -qq \\\n && apt-get install curl git unzip -qqy\n#   Download Pydio\nRUN curl -sL https://github.com/pydio/pydio-core/archive/pydio-core-${PYDIO_VERSION}.tar.gz | tar xzC /tmp \\\n && rm -rf /var/www \\\n && mv /tmp/pydio-core-pydio-core-${PYDIO_VERSION} /var/www\n#   Install composer\nRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n && php -r \"if (hash_file('SHA384', 'composer-setup.php') === '544e09ee996cdf60ece3804abc52599c22b1f40f4323403c44d44fdfdd586475ca9813a858088ffbc1f233e9b180f061') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\\n && php composer-setup.php \\\n && php -r \"unlink('composer-setup.php');\" \\\n && mv composer.phar /bin/composer \\\n && chmod +x /bin/composer\n#   Install NPM\nRUN curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get update -qq \\\n && apt-get install nodejs -qy\n#   Install Grunt\nRUN npm install grunt-cli -g\n#   Install dependancies\nRUN cd /var/www/core/src/core \\\n && composer install \\\n && cd /var/www/core/src \\\n && find . -maxdepth 3 -name composer.json -execdir composer install\n#   Remove build requirements\nRUN apt-get remove -qy curl git wget unzip nodejs \\\n && apt-get autoremove -qy \\\n && apt-get autoclean -qy \\\n && rm -rf /bin/composer \\\n && rm -rf /root/.composer \\\n && rm -rf /too/.npm\n#   Load permissions\nRUN chown -R www-data:www-data /var/www\n#   Load Scripts bash for installing Pydio\nCOPY scripts /scripts/pydio/\nRUN chmod -R u+x /scripts/pydio\n#   Load assets\nCOPY assets/supervisor/conf.d /etc/supervisor/conf.d\nCOPY assets/supervisor/supervisord.conf /etc/supervisor/supervisord.conf\nCOPY assets/vhosts /etc/nginx/sites-available\nCOPY assets/config /assets/config\n#   Clean\nRUN apt-get -qqy --purge autoremove \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nVOLUME /data/pydio\nVOLUME /var/lib/mysql\nEXPOSE 3306/tcp\nEXPOSE 80/tcp\nEXPOSE 443/tcp\nCMD /scripts/pydio/launch.sh\n","originalDockerfileUglifiedHash":"f08ee6da0ed366a49e5ac6988a87d037","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f7aa8c7665f50406804ecb472a285d2e9564c448.dockerfile"}