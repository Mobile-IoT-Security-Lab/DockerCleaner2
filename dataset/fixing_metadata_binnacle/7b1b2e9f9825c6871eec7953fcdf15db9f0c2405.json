{"seed":3968200733,"processedDockerfileHash":"9b399e20b7e8d9e9b3e32b3ca6a6d109","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.2\" \\\n    UNBOUND_SHA256=\"19f2235a8936d89e7dc919bbfcef355de759f220e36bb5e1e931ac000ed04993\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.2.tar.gz\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nEXPOSE 53/tcp\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils=9.0.12+nmu1 ca-certificates=20200601~deb9u2 ldnsutils=1.7.0-1+deb9u1 libevent-2.0 libexpat1=2.2.0-2+deb9u5 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.2 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nCMD [\"/unbound.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.2\" \\\n    UNBOUND_SHA256=\"19f2235a8936d89e7dc919bbfcef355de759f220e36bb5e1e931ac000ed04993\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.2.tar.gz\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nEXPOSE 53/tcp\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.2 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nCMD [\"/unbound.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"1cbf4f6cf024fe9d0e08cdc8ec85f01d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:stretch AS openssl\nLABEL maintainer=\"Matthew Vance\"\nENV VERSION_OPENSSL=\"openssl-1.1.1c\" \\\n    SHA256_OPENSSL=\"f6fb3079ad15076154eda9413fed42877d668e7069d9b87396d0804fdb3f4c90\" \\\n    SOURCE_OPENSSL=\"https://www.openssl.org/source/\" \\\n    OPGP_OPENSSL=\"7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C\"\nWORKDIR /tmp/src\nRUN set -e -x \\\n && build_deps=\"build-essential ca-certificates curl dirmngr gnupg libidn2-0-dev libssl-dev\" \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends $build_deps -y \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz -o openssl.tar.gz \\\n && echo \"${SHA256_OPENSSL} ./openssl.tar.gz\" | sha256sum -c - \\\n && curl -L $SOURCE_OPENSSL$VERSION_OPENSSL.tar.gz.asc -o openssl.tar.gz.asc \\\n && GNUPGHOME=\"$( mktemp -d ;)\" \\\n && export GNUPGHOME \\\n && (gpg --no-tty --keyserver ipv4.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" || gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys \"$OPGP_OPENSSL\" ) \\\n && gpg --batch --verify openssl.tar.gz.asc openssl.tar.gz \\\n && tar xzf openssl.tar.gz \\\n && cd $VERSION_OPENSSL \\\n && ./config --prefix=/opt/openssl no-weak-ssl-ciphers no-ssl3 no-shared enable-ec_nistp_64_gcc_128 -DOPENSSL_NO_HEARTBEATS -fstack-protector-strong \\\n && make depend \\\n && make \\\n && make install_sw \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /tmp/* /var/tmp/* /var/lib/apt/lists/*\nFROM debian:stretch\nLABEL maintainer=\"Matthew Vance\"\nENV NAME=\"unbound\" \\\n    UNBOUND_VERSION=\"1.8.2\" \\\n    UNBOUND_SHA256=\"19f2235a8936d89e7dc919bbfcef355de759f220e36bb5e1e931ac000ed04993\" \\\n    UNBOUND_DOWNLOAD_URL=\"https://nlnetlabs.nl/downloads/unbound/unbound-1.8.2.tar.gz\" \\\n    VERSION=\"1\" \\\n    SUMMARY=\"${NAME} is a validating, recursive, and caching DNS resolver.\" \\\n    DESCRIPTION=\"${NAME} is a validating, recursive, and caching DNS resolver.\"\nLABEL summary=\"${SUMMARY}\" \\\n      description=\"${DESCRIPTION}\" \\\n      io.k8s.description=\"${DESCRIPTION}\" \\\n      io.k8s.display-name=\"Unbound ${UNBOUND_VERSION}\" \\\n      name=\"mvance/${NAME}\" \\\n      maintainer=\"Matthew Vance\"\nEXPOSE 53/tcp\nWORKDIR /tmp/src\nCOPY --from=openssl /opt/openssl /opt/openssl\nRUN build_deps=\"curl gcc libc-dev libevent-dev libexpat1-dev make\" \\\n && set -x \\\n && DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends bsdmainutils ca-certificates ldnsutils libevent-2.0 libexpat1 $build_deps -y \\\n && curl -sSL $UNBOUND_DOWNLOAD_URL -o unbound.tar.gz \\\n && echo \"${UNBOUND_SHA256} *unbound.tar.gz\" | sha256sum -c - \\\n && tar xzf unbound.tar.gz \\\n && rm -f unbound.tar.gz \\\n && cd unbound-1.8.2 \\\n && groupadd _unbound \\\n && useradd -g _unbound -s /etc -d /dev/null _unbound \\\n && ./configure --disable-dependency-tracking --prefix=/opt/unbound --with-pthreads --with-username=_unbound --with-ssl=/opt/openssl --with-libevent --enable-event-api \\\n && make install \\\n && mv /opt/unbound/etc/unbound/unbound.conf /opt/unbound/etc/unbound/unbound.conf.example \\\n && apt-get purge -y --auto-remove $build_deps \\\n && rm -rf /opt/unbound/share/man /tmp/* /var/tmp/* /var/lib/apt/lists/*\nCOPY a-records.conf /opt/unbound/etc/unbound/\nCOPY unbound.sh /\nRUN chmod +x /unbound.sh\nWORKDIR /opt/unbound/\nENV PATH=\"/opt/unbound/sbin:\\\"$PATH\\\"\"\nCMD [\"/unbound.sh\"]\n","originalDockerfileUglifiedHash":"1cbf4f6cf024fe9d0e08cdc8ec85f01d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7b1b2e9f9825c6871eec7953fcdf15db9f0c2405.dockerfile"}