{"seed":2012701323,"processedDockerfileHash":"8daf36e99763f0c4469903570f1c801a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   Copyright © 2017 Logistimo.\n#\n#   This file is part of Logistimo.\n#\n#   Logistimo software is a mobile & web platform for supply chain management and remote temperature monitoring in\n#   low-resource settings, made available under the terms of the GNU Affero General Public License (AGPL).\n#\n#   This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General\n#   Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any\n#   later version.\n#\n#   This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n#   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License\n#   for more details.\n#   \n#   You should have received a copy of the GNU Affero General Public License along with this program.  If not, see\n#   <http://www.gnu.org/licenses/>.\n#\n#   You can be released from the requirements of the license by purchasing a commercial license. To know more about\n#   the commercial license, please contact us at opensource@logistimo.com\n#\nFROM tomcat:7-jre8\nMAINTAINER dockers@logistimo.com\nARG warname\nENV TOMCAT_HOME=\"/usr/local/tomcat\"\nRUN rm -rf $TOMCAT_HOME/webapps/* \\\n && apt-get update \\\n && apt-get install --no-install-recommends gettext-base -y\nCOPY modules/web/target/$warname $TOMCAT_HOME/webapps/\nRUN wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/org/apache/commons/commons-pool2/2.2/commons-pool2-2.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/redis/clients/jedis/2.5.2/jedis-2.5.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/com/bluejeans/tomcat-redis-session-manager/2.0.0/tomcat-redis-session-manager-2.0.0.jar\nCOPY dockerfiles/context.xml $TOMCAT_HOME/conf/\nRUN unzip -o $TOMCAT_HOME/webapps/$warname -d $TOMCAT_HOME/webapps/ROOT/ \\\n && rm -rf $TOMCAT_HOME/webapps/$warname\nENV MYSQL_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_RO_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_USER=\"logistimo\" \\\n    MYSQL_PASS=\"logistimo\" \\\n    MYSQL_DATABASE=\"logistimo\" \\\n    REDIS_HOST=\"localhost\" \\\n    SENTINEL_HOST=\"\" \\\n    SENTINEL_MASTER=\"\" \\\n    HADOOP_HOST=\"localhost\" \\\n    MEDIA_HOST_URL=\"http://localhost:50070/webhdfs/v1\" \\\n    ZKR_HOST=\"localhost:2181\" \\\n    LOGI_HOST=\"localhost\" \\\n    ACTIVEMQ_HOST=\"tcp://localhost:61616\" \\\n    TASK_SERVER=\"true\" \\\n    TASK_URL=\"http://localhost:8080\" \\\n    TASK_QUEUE_TYPE=\"simple\" \\\n    TASK_EXPORT=\"true\" \\\n    EMAIL_HOST=\"localhost\" \\\n    EMAIL_PORT=\"25\" \\\n    EMAIL_FROMADDRESS=\"service@logistimo.com\" \\\n    EMAIL_FROMNAME=\"Logistimo Service\" \\\n    TASK_PORT=\"8080\" \\\n    CALLISTO_HOST_URL=\"http://localhost:8090\" \\\n    LOCAL_ENV=\"true\" \\\n    LOC_URL=\"http://localhost:9090\" \\\n    APPROVAL_URL=\"http://localhost:6400\" \\\n    STOCKREBALANCING_URL=\"http://localhost:8700\" \\\n    COLLABORATION_URL=\"http://localhost:9070/v1/collaboration/likes\" \\\n    CON_MAX_IDLE=\"50\" \\\n    CON_MIX_IDLE=\"20\" \\\n    CON_MAX_ACTIVE=\"150\" \\\n    CON_MAX_WAIT=\"1000\" \\\n    CACHE_TYPE=\"none\" \\\n    STATUS_FILE=\"\" \\\n    JMX_AGENT_PORT=\"8088\" \\\n    ORIGINS=\"*.logistimo.com,localhost\" \\\n    MAPI_URL=\"http://localhost:8080\" \\\n    CAPTCHA_ENABLE=\"true\" \\\n    GOOGLE_ANALYTICS_CLIENT_ID=\"\" \\\n    JAVA_OPTS=\"-Xms1024m -Xmx1024m -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\" \\\n    EVENTSUMMARYSERVICE_URL=\"http://logi-es:9010/v1/event-summaries\"\nENV WEB_APP_VER=\"$WEB_APP_VER\"\nRUN cd $TOMCAT_HOME \\\n && wget http://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.7/jmx_prometheus_javaagent-0.7.jar\nCOPY dockerfiles/jmx_exporter.json $TOMCAT_HOME/jmx_exporter.json\nCOPY dockerfiles/docker-entrypoint.sh /docker-entrypoint.sh\nRUN chmod +x /docker-entrypoint.sh\nEXPOSE 8080-8090\nCMD [\"/docker-entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n","originalDockerfile":"#\n#  Copyright © 2017 Logistimo.\n#\n#  This file is part of Logistimo.\n#\n#  Logistimo software is a mobile & web platform for supply chain management and remote temperature monitoring in\n#  low-resource settings, made available under the terms of the GNU Affero General Public License (AGPL).\n#\n#  This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General\n#  Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any\n#  later version.\n#\n#  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n#  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License\n#  for more details.\n#  \n#  You should have received a copy of the GNU Affero General Public License along with this program.  If not, see\n#  <http://www.gnu.org/licenses/>.\n#\n#  You can be released from the requirements of the license by purchasing a commercial license. To know more about\n#  the commercial license, please contact us at opensource@logistimo.com\n#\nFROM tomcat:7-jre8\nMAINTAINER dockers@logistimo.com\nARG warname\nENV TOMCAT_HOME=\"/usr/local/tomcat\"\nRUN rm -rf $TOMCAT_HOME/webapps/* \\\n && apt-get update \\\n && apt-get install gettext-base -y\nADD modules/web/target/$warname $TOMCAT_HOME/webapps/\nRUN wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/org/apache/commons/commons-pool2/2.2/commons-pool2-2.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/redis/clients/jedis/2.5.2/jedis-2.5.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/com/bluejeans/tomcat-redis-session-manager/2.0.0/tomcat-redis-session-manager-2.0.0.jar\nADD dockerfiles/context.xml $TOMCAT_HOME/conf/\nRUN unzip -o $TOMCAT_HOME/webapps/$warname -d $TOMCAT_HOME/webapps/ROOT/ \\\n && rm -rf $TOMCAT_HOME/webapps/$warname\nENV MYSQL_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_RO_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_USER=\"logistimo\" \\\n    MYSQL_PASS=\"logistimo\" \\\n    MYSQL_DATABASE=\"logistimo\" \\\n    REDIS_HOST=\"localhost\" \\\n    SENTINEL_HOST=\"\" \\\n    SENTINEL_MASTER=\"\" \\\n    HADOOP_HOST=\"localhost\" \\\n    MEDIA_HOST_URL=\"http://localhost:50070/webhdfs/v1\" \\\n    ZKR_HOST=\"localhost:2181\" \\\n    LOGI_HOST=\"localhost\" \\\n    ACTIVEMQ_HOST=\"tcp://localhost:61616\" \\\n    TASK_SERVER=\"true\" \\\n    TASK_URL=\"http://localhost:8080\" \\\n    TASK_QUEUE_TYPE=\"simple\" \\\n    TASK_EXPORT=\"true\" \\\n    EMAIL_HOST=\"localhost\" \\\n    EMAIL_PORT=\"25\" \\\n    EMAIL_FROMADDRESS=\"service@logistimo.com\" \\\n    EMAIL_FROMNAME=\"Logistimo Service\" \\\n    TASK_PORT=\"8080\" \\\n    CALLISTO_HOST_URL=\"http://localhost:8090\" \\\n    LOCAL_ENV=\"true\" \\\n    LOC_URL=\"http://localhost:9090\" \\\n    APPROVAL_URL=\"http://localhost:6400\" \\\n    STOCKREBALANCING_URL=\"http://localhost:8700\" \\\n    COLLABORATION_URL=\"http://localhost:9070/v1/collaboration/likes\" \\\n    CON_MAX_IDLE=\"50\" \\\n    CON_MIX_IDLE=\"20\" \\\n    CON_MAX_ACTIVE=\"150\" \\\n    CON_MAX_WAIT=\"1000\" \\\n    CACHE_TYPE=\"none\" \\\n    STATUS_FILE=\"\" \\\n    JMX_AGENT_PORT=\"8088\" \\\n    ORIGINS=\"*.logistimo.com,localhost\" \\\n    MAPI_URL=\"http://localhost:8080\" \\\n    CAPTCHA_ENABLE=\"true\" \\\n    GOOGLE_ANALYTICS_CLIENT_ID=\"\" \\\n    JAVA_OPTS=\"-Xms1024m -Xmx1024m -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\" \\\n    EVENTSUMMARYSERVICE_URL=\"http://logi-es:9010/v1/event-summaries\"\nENV WEB_APP_VER=\"$WEB_APP_VER\"\nRUN cd $TOMCAT_HOME \\\n && wget http://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.7/jmx_prometheus_javaagent-0.7.jar\nADD dockerfiles/jmx_exporter.json $TOMCAT_HOME/jmx_exporter.json\nCOPY dockerfiles/docker-entrypoint.sh /docker-entrypoint.sh\nRUN chmod +x /docker-entrypoint.sh\nEXPOSE 8080-8090\nCMD [\"/docker-entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"bc264d55607408242cef228577f7628b","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   Copyright © 2017 Logistimo.\n#\n#   This file is part of Logistimo.\n#\n#   Logistimo software is a mobile & web platform for supply chain management and remote temperature monitoring in\n#   low-resource settings, made available under the terms of the GNU Affero General Public License (AGPL).\n#\n#   This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General\n#   Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any\n#   later version.\n#\n#   This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n#   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License\n#   for more details.\n#   \n#   You should have received a copy of the GNU Affero General Public License along with this program.  If not, see\n#   <http://www.gnu.org/licenses/>.\n#\n#   You can be released from the requirements of the license by purchasing a commercial license. To know more about\n#   the commercial license, please contact us at opensource@logistimo.com\n#\nFROM tomcat:7-jre8\nMAINTAINER dockers@logistimo.com\nARG warname\nENV TOMCAT_HOME=\"/usr/local/tomcat\"\nRUN rm -rf $TOMCAT_HOME/webapps/* \\\n && apt-get update \\\n && apt-get install gettext-base -y\nADD modules/web/target/$warname $TOMCAT_HOME/webapps/\nRUN wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/org/apache/commons/commons-pool2/2.2/commons-pool2-2.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/redis/clients/jedis/2.5.2/jedis-2.5.2.jar \\\n && wget -P $TOMCAT_HOME/lib/ http://central.maven.org/maven2/com/bluejeans/tomcat-redis-session-manager/2.0.0/tomcat-redis-session-manager-2.0.0.jar\nADD dockerfiles/context.xml $TOMCAT_HOME/conf/\nRUN unzip -o $TOMCAT_HOME/webapps/$warname -d $TOMCAT_HOME/webapps/ROOT/ \\\n && rm -rf $TOMCAT_HOME/webapps/$warname\nENV MYSQL_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_RO_HOST_URL=\"jdbc:mariadb://localhost/logistimo?useUnicode=true&amp;characterEncoding=UTF-8\" \\\n    MYSQL_USER=\"logistimo\" \\\n    MYSQL_PASS=\"logistimo\" \\\n    MYSQL_DATABASE=\"logistimo\" \\\n    REDIS_HOST=\"localhost\" \\\n    SENTINEL_HOST=\"\" \\\n    SENTINEL_MASTER=\"\" \\\n    HADOOP_HOST=\"localhost\" \\\n    MEDIA_HOST_URL=\"http://localhost:50070/webhdfs/v1\" \\\n    ZKR_HOST=\"localhost:2181\" \\\n    LOGI_HOST=\"localhost\" \\\n    ACTIVEMQ_HOST=\"tcp://localhost:61616\" \\\n    TASK_SERVER=\"true\" \\\n    TASK_URL=\"http://localhost:8080\" \\\n    TASK_QUEUE_TYPE=\"simple\" \\\n    TASK_EXPORT=\"true\" \\\n    EMAIL_HOST=\"localhost\" \\\n    EMAIL_PORT=\"25\" \\\n    EMAIL_FROMADDRESS=\"service@logistimo.com\" \\\n    EMAIL_FROMNAME=\"Logistimo Service\" \\\n    TASK_PORT=\"8080\" \\\n    CALLISTO_HOST_URL=\"http://localhost:8090\" \\\n    LOCAL_ENV=\"true\" \\\n    LOC_URL=\"http://localhost:9090\" \\\n    APPROVAL_URL=\"http://localhost:6400\" \\\n    STOCKREBALANCING_URL=\"http://localhost:8700\" \\\n    COLLABORATION_URL=\"http://localhost:9070/v1/collaboration/likes\" \\\n    CON_MAX_IDLE=\"50\" \\\n    CON_MIX_IDLE=\"20\" \\\n    CON_MAX_ACTIVE=\"150\" \\\n    CON_MAX_WAIT=\"1000\" \\\n    CACHE_TYPE=\"none\" \\\n    STATUS_FILE=\"\" \\\n    JMX_AGENT_PORT=\"8088\" \\\n    ORIGINS=\"*.logistimo.com,localhost\" \\\n    MAPI_URL=\"http://localhost:8080\" \\\n    CAPTCHA_ENABLE=\"true\" \\\n    GOOGLE_ANALYTICS_CLIENT_ID=\"\" \\\n    JAVA_OPTS=\"-Xms1024m -Xmx1024m -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\" \\\n    EVENTSUMMARYSERVICE_URL=\"http://logi-es:9010/v1/event-summaries\"\nENV WEB_APP_VER=\"$WEB_APP_VER\"\nRUN cd $TOMCAT_HOME \\\n && wget http://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.7/jmx_prometheus_javaagent-0.7.jar\nADD dockerfiles/jmx_exporter.json $TOMCAT_HOME/jmx_exporter.json\nCOPY dockerfiles/docker-entrypoint.sh /docker-entrypoint.sh\nRUN chmod +x /docker-entrypoint.sh\nEXPOSE 8080-8090\nCMD [\"/docker-entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"78cd292995a043292a0cf04cf955a0f4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4e80757ac7c98a2bf37915efc68c6c5f12429722.dockerfile"}