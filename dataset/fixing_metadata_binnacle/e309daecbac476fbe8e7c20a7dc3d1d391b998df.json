{"seed":1874863575,"processedDockerfileHash":"d8f1b206a3d48225a7ba0f059f4e3ad6","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM php:7.2-fpm-stretch\nLABEL maintainer=\"dominik@pfaffenbauer.at\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends lsb-release -y \\\n && echo \"deb http://deb.debian.org/debian $( lsb_release -sc ;)-backports main\" > /etc/apt/sources.list.d/backports.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential openssl g++ zlib1g-dev libicu-dev libbz2-dev libpng-dev libc-client-dev libkrb5-dev libxml2-dev libxslt1.1 libxslt1-dev locales locales-all ffmpeg html2text ghostscript libreoffice pngcrush jpegoptim exiftool poppler-utils git wget libx11-dev libjpeg-dev python3-pip opencv-data webp graphviz cmake unzip cron liblcms2-dev liblqr-1-0-dev libpng-dev libopenjp2-7-dev libtiff-dev libfreetype6-dev libfontconfig1-dev libfftw3-dev libltdl-dev liblzma-dev libopenexr-dev libwmf-dev libdjvulibre-dev libpango1.0-dev libxext-dev libxt-dev librsvg2-dev libzip-dev libpng-dev libfreetype6-dev libjpeg-dev libxpm-dev libwebp-dev -y \\\n && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-xpm-dir=/usr/include --with-webp-dir=/usr/include/ \\\n && docker-php-ext-install intl mbstring mysqli bcmath gd bz2 soap xmlrpc xsl pdo pdo_mysql fileinfo exif zip opcache \\\n && wget http://www.imagemagick.org/download/ImageMagick.tar.gz \\\n && tar -xvf ImageMagick.tar.gz \\\n && cd ImageMagick-7.* \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig /usr/local/lib \\\n && pecl install imagick \\\n && pecl install apcu \\\n && cd .. \\\n && rm -rf ImageMagick* \\\n && pecl install redis \\\n && docker-php-ext-enable redis imagick apcu \\\n && docker-php-ext-configure imap --with-kerberos --with-imap-ssl \\\n && docker-php-ext-install imap \\\n && docker-php-ext-enable imap \\\n && cd ~ \\\n && wget https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.4/wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && tar xvf wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && mv wkhtmltox/bin/wkhtmlto* /usr/bin/ \\\n && rm -rf wkhtmltox \\\n && git clone https://github.com/mozilla/mozjpeg.git \\\n && cd mozjpeg \\\n && cmake -G\"Unix Makefiles\" \\\n && make \\\n && make install \\\n && ln -s /opt/mozjpeg/bin/cjpeg /usr/bin/cjpeg \\\n && cd .. \\\n && rm -rf mozjpeg \\\n && git clone https://github.com/wavexx/facedetect \\\n && pip3 install numpy opencv-python \\\n && cd facedetect \\\n && cp facedetect /usr/local/bin \\\n && cd .. \\\n && rm -rf facedetect \\\n && git clone https://github.com/google/zopfli.git \\\n && cd zopfli \\\n && make \\\n && cp zopfli /usr/bin/zopflipng \\\n && cd .. \\\n && rm -rf zopfli \\\n && wget http://static.jonof.id.au/dl/kenutils/pngout-20150319-linux.tar.gz \\\n && tar -xf pngout-20150319-linux.tar.gz \\\n && rm pngout-20150319-linux.tar.gz \\\n && cp pngout-20150319-linux/x86_64/pngout /bin/pngout \\\n && cd .. \\\n && rm -rf pngout-20150319-linux \\\n && wget http://prdownloads.sourceforge.net/advancemame/advancecomp-1.17.tar.gz \\\n && tar zxvf advancecomp-1.17.tar.gz \\\n && cd advancecomp-1.17 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf advancecomp-1.17 \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV COMPOSER_MEMORY_LIMIT=\"-1\"\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\nRUN set -eux ; composer global require \"hirak/prestissimo:^0.3\" --prefer-dist --no-progress --no-suggest --classmap-authoritative ; composer clear-cache\nENV PATH=\"${PATH}:/root/.composer/vendor/bin\"\n#  #<debug>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ iproute2 -y \\\n && pecl install xdebug \\\n && docker-php-ext-enable xdebug \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nRUN echo \"xdebug.idekey = PHPSTORM\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.default_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_autostart = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_connect_back = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.profiler_enable = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_host = 127.0.0.1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini\nENV PHP_DEBUG=\"1\"\nENV PHP_IDE_CONFIG=\"serverName=localhost\"\nCOPY entrypoint.sh /usr/local/bin\nRUN chmod +x /usr/local/bin/entrypoint.sh\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n#  #</debug>##\n#  #<autogenerated>##\n#  #</autogenerated>##\n#  #<autogenerated>##\n#  #</autogenerated>##\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM php:7.2-fpm-stretch\nLABEL maintainer=\"dominik@pfaffenbauer.at\"\nRUN apt-get update \\\n && apt-get install lsb-release -y \\\n && echo \"deb http://deb.debian.org/debian $( lsb_release -sc ;)-backports main\" > /etc/apt/sources.list.d/backports.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential openssl g++ zlib1g-dev libicu-dev libbz2-dev libpng-dev libc-client-dev libkrb5-dev libxml2-dev libxslt1.1 libxslt1-dev locales locales-all ffmpeg html2text ghostscript libreoffice pngcrush jpegoptim exiftool poppler-utils git wget libx11-dev libjpeg-dev python3-pip opencv-data webp graphviz cmake unzip cron liblcms2-dev liblqr-1-0-dev libpng-dev libopenjp2-7-dev libtiff-dev libfreetype6-dev libfontconfig1-dev libfftw3-dev libltdl-dev liblzma-dev libopenexr-dev libwmf-dev libdjvulibre-dev libpango1.0-dev libxext-dev libxt-dev librsvg2-dev libzip-dev libpng-dev libfreetype6-dev libjpeg-dev libxpm-dev libwebp-dev -y \\\n && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-xpm-dir=/usr/include --with-webp-dir=/usr/include/ \\\n && docker-php-ext-install intl mbstring mysqli bcmath gd bz2 soap xmlrpc xsl pdo pdo_mysql fileinfo exif zip opcache \\\n && wget http://www.imagemagick.org/download/ImageMagick.tar.gz \\\n && tar -xvf ImageMagick.tar.gz \\\n && cd ImageMagick-7.* \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig /usr/local/lib \\\n && pecl install imagick \\\n && pecl install apcu \\\n && cd .. \\\n && rm -rf ImageMagick* \\\n && pecl install redis \\\n && docker-php-ext-enable redis imagick apcu \\\n && docker-php-ext-configure imap --with-kerberos --with-imap-ssl \\\n && docker-php-ext-install imap \\\n && docker-php-ext-enable imap \\\n && cd ~ \\\n && wget https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.4/wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && tar xvf wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && mv wkhtmltox/bin/wkhtmlto* /usr/bin/ \\\n && rm -rf wkhtmltox \\\n && git clone https://github.com/mozilla/mozjpeg.git \\\n && cd mozjpeg \\\n && cmake -G\"Unix Makefiles\" \\\n && make \\\n && make install \\\n && ln -s /opt/mozjpeg/bin/cjpeg /usr/bin/cjpeg \\\n && cd .. \\\n && rm -rf mozjpeg \\\n && git clone https://github.com/wavexx/facedetect \\\n && pip3 install numpy opencv-python \\\n && cd facedetect \\\n && cp facedetect /usr/local/bin \\\n && cd .. \\\n && rm -rf facedetect \\\n && git clone https://github.com/google/zopfli.git \\\n && cd zopfli \\\n && make \\\n && cp zopfli /usr/bin/zopflipng \\\n && cd .. \\\n && rm -rf zopfli \\\n && wget http://static.jonof.id.au/dl/kenutils/pngout-20150319-linux.tar.gz \\\n && tar -xf pngout-20150319-linux.tar.gz \\\n && rm pngout-20150319-linux.tar.gz \\\n && cp pngout-20150319-linux/x86_64/pngout /bin/pngout \\\n && cd .. \\\n && rm -rf pngout-20150319-linux \\\n && wget http://prdownloads.sourceforge.net/advancemame/advancecomp-1.17.tar.gz \\\n && tar zxvf advancecomp-1.17.tar.gz \\\n && cd advancecomp-1.17 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf advancecomp-1.17 \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV COMPOSER_MEMORY_LIMIT=\"-1\"\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\nRUN set -eux ; composer global require \"hirak/prestissimo:^0.3\" --prefer-dist --no-progress --no-suggest --classmap-authoritative ; composer clear-cache\nENV PATH=\"${PATH}:/root/.composer/vendor/bin\"\n# #<debug>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ iproute2 -y \\\n && pecl install xdebug \\\n && docker-php-ext-enable xdebug \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nRUN echo \"xdebug.idekey = PHPSTORM\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.default_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_autostart = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_connect_back = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.profiler_enable = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_host = 127.0.0.1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini\nENV PHP_DEBUG=\"1\"\nENV PHP_IDE_CONFIG=\"serverName=localhost\"\nCOPY entrypoint.sh /usr/local/bin\nRUN chmod +x /usr/local/bin/entrypoint.sh\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n# #</debug>##\n# #<autogenerated>##\n# #</autogenerated>##\n# #<autogenerated>##\n# #</autogenerated>##\n","injectedSmells":[],"originalDockerfileHash":"56a5d8a7928fc662e5df267d6fc025d7","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM php:7.2-fpm-stretch\nLABEL maintainer=\"dominik@pfaffenbauer.at\"\nRUN apt-get update \\\n && apt-get install lsb-release -y \\\n && echo \"deb http://deb.debian.org/debian $( lsb_release -sc ;)-backports main\" > /etc/apt/sources.list.d/backports.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential openssl g++ zlib1g-dev libicu-dev libbz2-dev libpng-dev libc-client-dev libkrb5-dev libxml2-dev libxslt1.1 libxslt1-dev locales locales-all ffmpeg html2text ghostscript libreoffice pngcrush jpegoptim exiftool poppler-utils git wget libx11-dev libjpeg-dev python3-pip opencv-data webp graphviz cmake unzip cron liblcms2-dev liblqr-1-0-dev libpng-dev libopenjp2-7-dev libtiff-dev libfreetype6-dev libfontconfig1-dev libfftw3-dev libltdl-dev liblzma-dev libopenexr-dev libwmf-dev libdjvulibre-dev libpango1.0-dev libxext-dev libxt-dev librsvg2-dev libzip-dev libpng-dev libfreetype6-dev libjpeg-dev libxpm-dev libwebp-dev -y \\\n && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-xpm-dir=/usr/include --with-webp-dir=/usr/include/ \\\n && docker-php-ext-install intl mbstring mysqli bcmath gd bz2 soap xmlrpc xsl pdo pdo_mysql fileinfo exif zip opcache \\\n && wget http://www.imagemagick.org/download/ImageMagick.tar.gz \\\n && tar -xvf ImageMagick.tar.gz \\\n && cd ImageMagick-7.* \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig /usr/local/lib \\\n && pecl install imagick \\\n && pecl install apcu \\\n && cd .. \\\n && rm -rf ImageMagick* \\\n && pecl install redis \\\n && docker-php-ext-enable redis imagick apcu \\\n && docker-php-ext-configure imap --with-kerberos --with-imap-ssl \\\n && docker-php-ext-install imap \\\n && docker-php-ext-enable imap \\\n && cd ~ \\\n && wget https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.4/wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && tar xvf wkhtmltox-0.12.4_linux-generic-amd64.tar.xz \\\n && mv wkhtmltox/bin/wkhtmlto* /usr/bin/ \\\n && rm -rf wkhtmltox \\\n && git clone https://github.com/mozilla/mozjpeg.git \\\n && cd mozjpeg \\\n && cmake -G\"Unix Makefiles\" \\\n && make \\\n && make install \\\n && ln -s /opt/mozjpeg/bin/cjpeg /usr/bin/cjpeg \\\n && cd .. \\\n && rm -rf mozjpeg \\\n && git clone https://github.com/wavexx/facedetect \\\n && pip3 install numpy opencv-python \\\n && cd facedetect \\\n && cp facedetect /usr/local/bin \\\n && cd .. \\\n && rm -rf facedetect \\\n && git clone https://github.com/google/zopfli.git \\\n && cd zopfli \\\n && make \\\n && cp zopfli /usr/bin/zopflipng \\\n && cd .. \\\n && rm -rf zopfli \\\n && wget http://static.jonof.id.au/dl/kenutils/pngout-20150319-linux.tar.gz \\\n && tar -xf pngout-20150319-linux.tar.gz \\\n && rm pngout-20150319-linux.tar.gz \\\n && cp pngout-20150319-linux/x86_64/pngout /bin/pngout \\\n && cd .. \\\n && rm -rf pngout-20150319-linux \\\n && wget http://prdownloads.sourceforge.net/advancemame/advancecomp-1.17.tar.gz \\\n && tar zxvf advancecomp-1.17.tar.gz \\\n && cd advancecomp-1.17 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf advancecomp-1.17 \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nENV COMPOSER_ALLOW_SUPERUSER=\"1\"\nENV COMPOSER_MEMORY_LIMIT=\"-1\"\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\nRUN set -eux ; composer global require \"hirak/prestissimo:^0.3\" --prefer-dist --no-progress --no-suggest --classmap-authoritative ; composer clear-cache\nENV PATH=\"${PATH}:/root/.composer/vendor/bin\"\n#  #<debug>##\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ iproute2 -y \\\n && pecl install xdebug \\\n && docker-php-ext-enable xdebug \\\n && apt-get autoremove -y \\\n && apt-get remove -y autoconf automake libtool nasm make pkg-config libz-dev build-essential g++ \\\n && apt-get clean ; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/* ~/.composer\nRUN echo \"xdebug.idekey = PHPSTORM\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.default_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_enable = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_autostart = 1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_connect_back = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.profiler_enable = 0\" >> /usr/local/etc/php/conf.d/20-xdebug.ini \\\n && echo \"xdebug.remote_host = 127.0.0.1\" >> /usr/local/etc/php/conf.d/20-xdebug.ini\nENV PHP_DEBUG=\"1\"\nENV PHP_IDE_CONFIG=\"serverName=localhost\"\nCOPY entrypoint.sh /usr/local/bin\nRUN chmod +x /usr/local/bin/entrypoint.sh\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\n#  #</debug>##\n#  #<autogenerated>##\n#  #</autogenerated>##\n#  #<autogenerated>##\n#  #</autogenerated>##\n","originalDockerfileUglifiedHash":"3cd3e34f08abfc716cc812efc21ccf63","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e309daecbac476fbe8e7c20a7dc3d1d391b998df.dockerfile"}