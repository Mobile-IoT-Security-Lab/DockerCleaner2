{"seed":979340028,"processedDockerfileHash":"b8ce600a9d76d064b5739cd7d65456fe","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM swerpbox/alpine-base\nLABEL org.label-schema.vendor=\"SwerpBox: rTorrent/ruTorrent\" \\\n      org.label-schema.build-date=\"2017-02-12T00:12:00+00:00\" \\\n      org.label-schema.name=\"rTorrent and ruTorrent running on Alpine 3.5\" \\\n      org.label-schema.vcs-type=\"git\" \\\n      org.label-schema.vcs-url=\"https://github.com/strues/swerpbox\" \\\n      maintainer=\"Steven Truesdell <steven@strues.io>\"\nARG BUILD_CORES\nARG MEDIAINF_VER=\"0.7.90\"\nARG RTORRENT_VER=\"0.9.6\"\nARG LIBTORRENT_VER=\"0.13.6\"\nARG RUTORRENT_ADDR=\"https://github.com/Novik/ruTorrent/archive/master.tar.gz\"\n#   install runtime packages\nRUN apk add ca-certificates=20220614-r4 curl=7.88.1-r1 fcgi=2.4.2-r2 ffmpeg=5.1.3-r0 geoip=1.6.12-r3 gzip=1.12-r0 dtach=0.9-r3 tar=1.34-r2 unrar unzip=6.0-r13 wget=1.21.3-r2 irssi=1.4.4-r0 irssi-perl=1.4.4-r0 libressl-dev=3.6.2-r0 zlib=1.2.13-r0 zlib-dev=1.2.13-r0 libxml2-dev=2.10.4-r0 perl-archive-zip=1.68-r2 perl-net-ssleay=1.92-r2 perl-digest-sha1=2.13-r15 git=2.38.4-r1 zip=3.0-r10 --no-cache \\\n && apk add php7 php7-cgi php7-fpm php7-json php7-mbstring php7-sockets php7-opcache php7-mcrypt php7-xmlrpc php7-pear --no-cache --repository http://nl.alpinelinux.org/alpine/edge/community \\\n && apk add autoconf=2.71-r1 automake=1.16.5-r1 build-base=0.5-r3 subversion=1.14.2-r4 cppunit-dev=1.15.1-r1 curl-dev=7.88.1-r1 perl-dev=5.36.0-r0 file=5.43-r0 g++=12.2.1_git20220924-r4 gcc=12.2.1_git20220924-r4 libtool=2.4.7-r1 make=4.3-r1 ncurses-dev=6.3_p20221119-r0 --no-cache --virtual=build-deps \\\n && cd /tmp \\\n && git clone https://github.com/esmil/mktorrent \\\n && svn checkout http://svn.code.sf.net/p/xmlrpc-c/code/stable xmlrpc-c \\\n && git clone -b ${LIBTORRENT_VER} https://github.com/rakshasa/libtorrent.git \\\n && git clone -b ${RTORRENT_VER} https://github.com/rakshasa/rtorrent.git \\\n && cd /tmp/mktorrent \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && mkdir -p /var/www/public/rutorrent /defaults/rutorrent-conf \\\n && perl -MCPAN -e 'my $c = \"CPAN::HandleConfig\"; $c->load(doit => 1, autoconfig => 1); $c->edit(prerequisites_policy => \"follow\"); $c->edit(build_requires_install_policy => \"yes\"); $c->commit' \\\n && curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm HTML::Entities XML::LibXML JSON JSON::XS \\\n && curl -o /tmp/libmediainfo.tar.gz -L \"http://mediaarea.net/download/binary/libmediainfo0/${MEDIAINF_VER}/MediaInfo_DLL_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && curl -o /tmp/mediainfo.tar.gz -L \"http://mediaarea.net/download/binary/mediainfo/${MEDIAINF_VER}/MediaInfo_CLI_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && mkdir -p /tmp/libmediainfo /tmp/mediainfo \\\n && tar xf /tmp/libmediainfo.tar.gz -C /tmp/libmediainfo --strip-components=1 \\\n && tar xf /tmp/mediainfo.tar.gz -C /tmp/mediainfo --strip-components=1 \\\n && cd /tmp/libmediainfo \\\n && ./SO_Compile.sh \\\n && cd /tmp/libmediainfo/ZenLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/libmediainfo/MediaInfoLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/mediainfo \\\n && ./CLI_Compile.sh \\\n && cd /tmp/mediainfo/MediaInfo/Project/GNU/CLI \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/xmlrpc-c \\\n && ./configure \\\n && make -j ${NB_CORES} \\\n && make install \\\n && cd /tmp/libtorrent \\\n && ./autogen.sh \\\n && ./configure \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && cd /tmp/rtorrent \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && apk del --purge build-deps \\\n && rm -rf /tmp/*\n#   add local files\nCOPY rootfs/ /\n#   ports and volumes\nEXPOSE 49123/tcp 5000/tcp\nVOLUME [\"/config\", \"/data\", \"/logs\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM swerpbox/alpine-base\nLABEL org.label-schema.vendor=\"SwerpBox: rTorrent/ruTorrent\" \\\n      org.label-schema.build-date=\"2017-02-12T00:12:00+00:00\" \\\n      org.label-schema.name=\"rTorrent and ruTorrent running on Alpine 3.5\" \\\n      org.label-schema.vcs-type=\"git\" \\\n      org.label-schema.vcs-url=\"https://github.com/strues/swerpbox\" \\\n      maintainer=\"Steven Truesdell <steven@strues.io>\"\nARG BUILD_CORES\nARG MEDIAINF_VER=\"0.7.90\"\nARG RTORRENT_VER=\"0.9.6\"\nARG LIBTORRENT_VER=\"0.13.6\"\nARG RUTORRENT_ADDR=\"https://github.com/Novik/ruTorrent/archive/master.tar.gz\"\n#  install runtime packages\nRUN apk add --no-cache ca-certificates curl fcgi ffmpeg geoip gzip dtach tar unrar unzip wget irssi irssi-perl libressl-dev zlib zlib-dev libxml2-dev perl-archive-zip perl-net-ssleay perl-digest-sha1 git zip \\\n && apk add --no-cache --repository http://nl.alpinelinux.org/alpine/edge/community php7 php7-cgi php7-fpm php7-json php7-mbstring php7-sockets php7-opcache php7-mcrypt php7-xmlrpc php7-pear \\\n && apk add --no-cache --virtual=build-deps autoconf automake build-base subversion cppunit-dev curl-dev perl-dev file g++ gcc libtool make ncurses-dev \\\n && cd /tmp \\\n && git clone https://github.com/esmil/mktorrent \\\n && svn checkout http://svn.code.sf.net/p/xmlrpc-c/code/stable xmlrpc-c \\\n && git clone -b ${LIBTORRENT_VER} https://github.com/rakshasa/libtorrent.git \\\n && git clone -b ${RTORRENT_VER} https://github.com/rakshasa/rtorrent.git \\\n && cd /tmp/mktorrent \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && mkdir -p /var/www/public/rutorrent /defaults/rutorrent-conf \\\n && perl -MCPAN -e 'my $c = \"CPAN::HandleConfig\"; $c->load(doit => 1, autoconfig => 1); $c->edit(prerequisites_policy => \"follow\"); $c->edit(build_requires_install_policy => \"yes\"); $c->commit' \\\n && curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm HTML::Entities XML::LibXML JSON JSON::XS \\\n && curl -o /tmp/libmediainfo.tar.gz -L \"http://mediaarea.net/download/binary/libmediainfo0/${MEDIAINF_VER}/MediaInfo_DLL_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && curl -o /tmp/mediainfo.tar.gz -L \"http://mediaarea.net/download/binary/mediainfo/${MEDIAINF_VER}/MediaInfo_CLI_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && mkdir -p /tmp/libmediainfo /tmp/mediainfo \\\n && tar xf /tmp/libmediainfo.tar.gz -C /tmp/libmediainfo --strip-components=1 \\\n && tar xf /tmp/mediainfo.tar.gz -C /tmp/mediainfo --strip-components=1 \\\n && cd /tmp/libmediainfo \\\n && ./SO_Compile.sh \\\n && cd /tmp/libmediainfo/ZenLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/libmediainfo/MediaInfoLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/mediainfo \\\n && ./CLI_Compile.sh \\\n && cd /tmp/mediainfo/MediaInfo/Project/GNU/CLI \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/xmlrpc-c \\\n && ./configure \\\n && make -j ${NB_CORES} \\\n && make install \\\n && cd /tmp/libtorrent \\\n && ./autogen.sh \\\n && ./configure \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && cd /tmp/rtorrent \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && apk del --purge build-deps \\\n && rm -rf /tmp/*\n#  add local files\nCOPY rootfs/ /\n#  ports and volumes\nEXPOSE 49123/tcp 5000/tcp\nVOLUME [\"/config\", \"/data\", \"/logs\"]\n","injectedSmells":[],"originalDockerfileHash":"3d6d94939d75d8dbd1a7e8253a5f8afc","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM swerpbox/alpine-base\nLABEL org.label-schema.vendor=\"SwerpBox: rTorrent/ruTorrent\" \\\n      org.label-schema.build-date=\"2017-02-12T00:12:00+00:00\" \\\n      org.label-schema.name=\"rTorrent and ruTorrent running on Alpine 3.5\" \\\n      org.label-schema.vcs-type=\"git\" \\\n      org.label-schema.vcs-url=\"https://github.com/strues/swerpbox\" \\\n      maintainer=\"Steven Truesdell <steven@strues.io>\"\nARG BUILD_CORES\nARG MEDIAINF_VER=\"0.7.90\"\nARG RTORRENT_VER=\"0.9.6\"\nARG LIBTORRENT_VER=\"0.13.6\"\nARG RUTORRENT_ADDR=\"https://github.com/Novik/ruTorrent/archive/master.tar.gz\"\n#   install runtime packages\nRUN apk add --no-cache ca-certificates curl fcgi ffmpeg geoip gzip dtach tar unrar unzip wget irssi irssi-perl libressl-dev zlib zlib-dev libxml2-dev perl-archive-zip perl-net-ssleay perl-digest-sha1 git zip \\\n && apk add --no-cache --repository http://nl.alpinelinux.org/alpine/edge/community php7 php7-cgi php7-fpm php7-json php7-mbstring php7-sockets php7-opcache php7-mcrypt php7-xmlrpc php7-pear \\\n && apk add --no-cache --virtual=build-deps autoconf automake build-base subversion cppunit-dev curl-dev perl-dev file g++ gcc libtool make ncurses-dev \\\n && cd /tmp \\\n && git clone https://github.com/esmil/mktorrent \\\n && svn checkout http://svn.code.sf.net/p/xmlrpc-c/code/stable xmlrpc-c \\\n && git clone -b ${LIBTORRENT_VER} https://github.com/rakshasa/libtorrent.git \\\n && git clone -b ${RTORRENT_VER} https://github.com/rakshasa/rtorrent.git \\\n && cd /tmp/mktorrent \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && mkdir -p /var/www/public/rutorrent /defaults/rutorrent-conf \\\n && perl -MCPAN -e 'my $c = \"CPAN::HandleConfig\"; $c->load(doit => 1, autoconfig => 1); $c->edit(prerequisites_policy => \"follow\"); $c->edit(build_requires_install_policy => \"yes\"); $c->commit' \\\n && curl -L http://cpanmin.us | perl - App::cpanminus \\\n && cpanm HTML::Entities XML::LibXML JSON JSON::XS \\\n && curl -o /tmp/libmediainfo.tar.gz -L \"http://mediaarea.net/download/binary/libmediainfo0/${MEDIAINF_VER}/MediaInfo_DLL_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && curl -o /tmp/mediainfo.tar.gz -L \"http://mediaarea.net/download/binary/mediainfo/${MEDIAINF_VER}/MediaInfo_CLI_${MEDIAINF_VER}_GNU_FromSource.tar.gz\" \\\n && mkdir -p /tmp/libmediainfo /tmp/mediainfo \\\n && tar xf /tmp/libmediainfo.tar.gz -C /tmp/libmediainfo --strip-components=1 \\\n && tar xf /tmp/mediainfo.tar.gz -C /tmp/mediainfo --strip-components=1 \\\n && cd /tmp/libmediainfo \\\n && ./SO_Compile.sh \\\n && cd /tmp/libmediainfo/ZenLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/libmediainfo/MediaInfoLib/Project/GNU/Library \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/mediainfo \\\n && ./CLI_Compile.sh \\\n && cd /tmp/mediainfo/MediaInfo/Project/GNU/CLI \\\n && make -j $( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && cd /tmp/xmlrpc-c \\\n && ./configure \\\n && make -j ${NB_CORES} \\\n && make install \\\n && cd /tmp/libtorrent \\\n && ./autogen.sh \\\n && ./configure \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && cd /tmp/rtorrent \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c \\\n && make -j ${BUILD_CORES-$( grep -c \"processor\" /proc/cpuinfo ;)} \\\n && make install \\\n && apk del --purge build-deps \\\n && rm -rf /tmp/*\n#   add local files\nCOPY rootfs/ /\n#   ports and volumes\nEXPOSE 49123/tcp 5000/tcp\nVOLUME [\"/config\", \"/data\", \"/logs\"]\n","originalDockerfileUglifiedHash":"12a3e6ae7a5751ca7cf6a274230d24ca","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/304480e94397c77d7eb69841a8514169941af0e1.dockerfile"}