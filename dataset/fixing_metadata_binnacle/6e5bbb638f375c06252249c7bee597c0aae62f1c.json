{"seed":3065034841,"processedDockerfileHash":"1d27bded507060ab3e9ffb629d4d4d1f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos7\nMAINTAINER Jan Garaj info@monitoringartist.com\n#   ZABBIX_VERSION=trunk tags/2.4.7 branches/dev/ZBXNEXT-1263-1\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nENV ZABBIX_VERSION=\"trunk\" \\\n    ZS_enabled=\"true\" \\\n    ZA_enabled=\"true\" \\\n    ZW_enabled=\"true\" \\\n    SNMPTRAP_enabled=\"false\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\" \\\n    JAVA_HOME=\"/usr/lib/jvm/jre\" \\\n    JAVA=\"/usr/bin/java\" \\\n    PHP_date_timezone=\"UTC\" \\\n    PHP_max_execution_time=\"300\" \\\n    PHP_max_input_time=\"300\" \\\n    PHP_memory_limit=\"128M\" \\\n    PHP_error_reporting=\"E_ALL\" \\\n    ZS_ListenPort=\"10051\" \\\n    ZS_SourceIP=\"\" \\\n    ZS_LogFile=\"/tmp/zabbix_server.log\" \\\n    ZS_LogFileSize=\"10\" \\\n    ZS_DebugLevel=\"3\" \\\n    ZS_PidFile=\"/var/run/zabbix_server.pid\" \\\n    ZS_DBHost=\"zabbix.db\" \\\n    ZS_DBName=\"zabbix\" \\\n    ZS_DBSchema=\"\" \\\n    ZS_DBUser=\"zabbix\" \\\n    ZS_DBSocket=\"/tmp/mysql.sock\" \\\n    ZS_DBPort=\"3306\" \\\n    ZS_StartPollers=\"5\" \\\n    ZS_StartPollersUnreachable=\"1\" \\\n    ZS_StartTrappers=\"5\" \\\n    ZS_StartPingers=\"1\" \\\n    ZS_StartDiscoverers=\"1\" \\\n    ZS_StartHTTPPollers=\"1\" \\\n    ZS_StartTimers=\"1\" \\\n    ZS_JavaGateway=\"127.0.0.1\" \\\n    ZS_JavaGatewayPort=\"10052\" \\\n    ZS_StartJavaPollers=\"0\" \\\n    ZS_StartVMwareCollectors=\"0\" \\\n    ZS_VMwareFrequency=\"60\" \\\n    ZS_VMwarePerfFrequency=\"60\" \\\n    ZS_VMwareCacheSize=\"8M\" \\\n    ZS_VMwareTimeout=\"10\" \\\n    ZS_SNMPTrapperFile=\"/tmp/zabbix_traps.tmp\" \\\n    ZS_StartSNMPTrapper=\"0\" \\\n    ZS_ListenIP=\"0.0.0.0\" \\\n    ZS_HousekeepingFrequency=\"1\" \\\n    ZS_MaxHousekeeperDelete=\"500\" \\\n    ZS_SenderFrequency=\"30\" \\\n    ZS_CacheSize=\"8M\" \\\n    ZS_CacheUpdateFrequency=\"60\" \\\n    ZS_StartDBSyncers=\"4\" \\\n    ZS_HistoryCacheSize=\"8M\" \\\n    ZS_TrendCacheSize=\"4M\" \\\n    ZS_HistoryTextCacheSize=\"16M\" \\\n    ZS_ValueCacheSize=\"8M\" \\\n    ZS_Timeout=\"3\" \\\n    ZS_TrapperTimeout=\"300\" \\\n    ZS_UnreachablePeriod=\"45\" \\\n    ZS_UnavailableDelay=\"60\" \\\n    ZS_UnreachableDelay=\"15\" \\\n    ZS_AlertScriptsPath=\"/usr/local/share/zabbix/alertscripts\" \\\n    ZS_ExternalScripts=\"/usr/local/share/zabbix/externalscripts\" \\\n    ZS_FpingLocation=\"/usr/sbin/fping\" \\\n    ZS_Fping6Location=\"/usr/sbin/fping6\" \\\n    ZS_SSHKeyLocation=\"\" \\\n    ZS_LogSlowQueries=\"0\" \\\n    ZS_TmpDir=\"/tmp\" \\\n    ZS_StartProxyPollers=\"1\" \\\n    ZS_ProxyConfigFrequency=\"3600\" \\\n    ZS_ProxyDataFrequency=\"1\" \\\n    ZS_AllowRoot=\"0\" \\\n    ZS_User=\"zabbix\" \\\n    ZS_Include=\"\" \\\n    ZS_SSLCertLocation=\"/usr/local/share/zabbix/ssl/certs\" \\\n    ZS_SSLKeyLocation=\"/usr/local/share/zabbix/ssl/keys\" \\\n    ZS_SSLCALocation=\"\" \\\n    ZS_LoadModulePath=\"/usr/lib/zabbix/modules\" \\\n    ZS_LoadModule=\"\" \\\n    ZW_ZBX_SERVER=\"localhost\" \\\n    ZW_ZBX_SERVER_PORT=\"10051\" \\\n    ZW_ZBX_SERVER_NAME=\"Zabbix Server\" \\\n    TERM=\"xterm\"\n#   Layer: base\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y epel-release \\\n && sed -i -e \"\\|^https://\\\"http://|d\" /etc/yum.repos.d/epel.repo \\\n && yum clean all \\\n && yum install -y supervisor \\\n && yum install -y http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm \\\n && yum install -y nginx inotify-tools \\\n && `` groupmod --gid 80 --new-name www nginx \\\n && usermod --uid 80 --home /data/www --gid 80 --login www --shell /bin/bash --comment www nginx \\\n && `` rm -rf /etc/nginx/*.d /etc/nginx/*_params \\\n && `` mkdir -p /etc/nginx/ssl \\\n && openssl genrsa -out /etc/nginx/ssl/dummy.key 2048 \\\n && openssl req -new -key /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.csr -subj \"/C=GB/L=London/O=Company Ltd/CN=zabbix-docker\" \\\n && openssl x509 -req -days 3650 -in /etc/nginx/ssl/dummy.csr -signkey /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.crt \\\n && yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y --enablerepo=remi-php56 php-fpm php-gd php-bcmath php-ctype php-xml php-xmlreader php-xmlwriter php-session php-net-socket php-mbstring php-gettext php-cli php-mysqlnd php-opcache php-pdo php-snmp php-ldap \\\n && yum clean all \\\n && rm -rf /tmp/*\nCOPY container-files-base /\n#   Layer: zabbix\nCOPY container-files-zabbix /\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y tar svn gcc automake make nmap traceroute iptstate wget net-snmp-devel net-snmp-libs net-snmp net-snmp-perl iksemel net-snmp-python net-snmp-utils java-1.8.0-openjdk python-pip java-1.8.0-openjdk-devel mariadb-devel libxml2-devel gettext libcurl-devel OpenIPMI-devel mysql iksemel-devel libssh2-devel unixODBC unixODBC-devel mysql-connector-odbc postgresql-odbc openldap-devel telnet net-tools snmptt sudo \\\n && `` yum -y -q reinstall glibc-common \\\n && cp /usr/local/etc/zabbix_agentd.conf /tmp \\\n && svn co svn://svn.zabbix.com/${ZABBIX_VERSION} /usr/local/src/zabbix \\\n && cd /usr/local/src/zabbix \\\n && DATE=`date +%Y-%m-%d ` \\\n && sed -i \"s/ZABBIX_VERSION.*'\\(.*\\)'/ZABBIX_VERSION', '\\1 ($DATE)'/g\" frontends/php/include/defines.inc.php \\\n && sed -i \"s/ZABBIX_VERSION_RC.*\\\"\\(.*\\)\\\"/ZABBIX_VERSION_RC \\\"\\1 (${DATE})\\\"/g\" include/version.h \\\n && sed -i \"s/String VERSION =.*\\\"\\(.*\\)\\\"/String VERSION = \\\"\\1 (${DATE})\\\"/g\" src/zabbix_java/src/com/zabbix/gateway/GeneralInformation.java \\\n && ./bootstrap.sh \\\n && ./configure --enable-server --enable-agent --with-mysql --enable-java --with-net-snmp --with-libcurl --with-libxml2 --with-openipmi --enable-ipv6 --with-jabber --with-openssl --with-ssh2 --with-ldap --with-unixodbc \\\n && make dbschema \\\n && make install \\\n && cp /usr/local/etc/web/zabbix.conf.php /usr/local/src/zabbix/frontends/php/conf/ \\\n && pip install py-zabbix==1.1.7 \\\n && wget https://github.com/schweikert/fping/archive/3.10.tar.gz \\\n && tar -xvf 3.10.tar.gz \\\n && cd fping-3.10/ \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --enable-ipv6 --enable-ipv4 \\\n && make \\\n && make install \\\n && mv /health/ /usr/local/src/zabbix/frontends/php/ \\\n && setcap cap_net_raw+ep /usr/sbin/fping || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping' \\\n && setcap cap_net_raw+ep /usr/sbin/fping6 || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping6' \\\n && chmod 4710 /usr/sbin/fping \\\n && chmod 4710 /usr/sbin/fping6 \\\n && cd .. \\\n && cp -f /tmp/zabbix_agentd.conf /usr/local/etc/ \\\n && rm -rf fping-3.10 \\\n && rm -rf 3.10.tar.gz \\\n && cd /usr/local/src/zabbix/frontends/php \\\n && locale/make_mo.sh \\\n && yum autoremove -y gettext python-pip tar svn gcc automake mariadb-devel java-1.8.0-openjdk-devel libxml2-devel libcurl-devel OpenIPMI-devel iksemel-devel \\\n && yum install -y OpenIPMI-libs \\\n && chmod +x /config/bootstrap.sh \\\n && chmod +x /config/ds.sh \\\n && chmod +x /usr/local/src/zabbix/misc/snmptrap/zabbix_trap_receiver.pl \\\n && chmod +x /usr/share/snmptt/snmptthandler-embedded \\\n && yum clean all \\\n && mkdir -p /usr/local/share/ssl/certs \\\n && mkdir -p /usr/local/share/ssl/keys \\\n && mkdir -p /usr/lib/zabbix/modules \\\n && mkdir -p /etc/zabbix/snmp/mibs \\\n && rm -rf /tmp/*\n#   TODO apply http://geofrogger.net/review/snmptt-hide-generic-part.patch\nCMD [\"/config/bootstrap.sh\"]\nVOLUME [\"/etc/custom-config\", \"/usr/local/share/zabbix/externalscripts\", \"/usr/local/share/zabbix/ssl/certs\", \"/usr/local/share/zabbix/ssl/keys\", \"/usr/lib/zabbix/modules\", \"/usr/share/snmp/mibs\", \"/etc/snmp\"]\nEXPOSE 80/tcp 162/udp 10051/tcp 10052/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos7\nMAINTAINER Jan Garaj info@monitoringartist.com\n#  ZABBIX_VERSION=trunk tags/2.4.7 branches/dev/ZBXNEXT-1263-1\nENV ZABBIX_VERSION=\"trunk\" \\\n    ZS_enabled=\"true\" \\\n    ZA_enabled=\"true\" \\\n    ZW_enabled=\"true\" \\\n    SNMPTRAP_enabled=\"false\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\" \\\n    JAVA_HOME=\"/usr/lib/jvm/jre\" \\\n    JAVA=\"/usr/bin/java\" \\\n    PHP_date_timezone=\"UTC\" \\\n    PHP_max_execution_time=\"300\" \\\n    PHP_max_input_time=\"300\" \\\n    PHP_memory_limit=\"128M\" \\\n    PHP_error_reporting=\"E_ALL\" \\\n    ZS_ListenPort=\"10051\" \\\n    ZS_SourceIP=\"\" \\\n    ZS_LogFile=\"/tmp/zabbix_server.log\" \\\n    ZS_LogFileSize=\"10\" \\\n    ZS_DebugLevel=\"3\" \\\n    ZS_PidFile=\"/var/run/zabbix_server.pid\" \\\n    ZS_DBHost=\"zabbix.db\" \\\n    ZS_DBName=\"zabbix\" \\\n    ZS_DBSchema=\"\" \\\n    ZS_DBUser=\"zabbix\" \\\n    ZS_DBPassword=\"zabbix\" \\\n    ZS_DBSocket=\"/tmp/mysql.sock\" \\\n    ZS_DBPort=\"3306\" \\\n    ZS_StartPollers=\"5\" \\\n    ZS_StartPollersUnreachable=\"1\" \\\n    ZS_StartTrappers=\"5\" \\\n    ZS_StartPingers=\"1\" \\\n    ZS_StartDiscoverers=\"1\" \\\n    ZS_StartHTTPPollers=\"1\" \\\n    ZS_StartTimers=\"1\" \\\n    ZS_JavaGateway=\"127.0.0.1\" \\\n    ZS_JavaGatewayPort=\"10052\" \\\n    ZS_StartJavaPollers=\"0\" \\\n    ZS_StartVMwareCollectors=\"0\" \\\n    ZS_VMwareFrequency=\"60\" \\\n    ZS_VMwarePerfFrequency=\"60\" \\\n    ZS_VMwareCacheSize=\"8M\" \\\n    ZS_VMwareTimeout=\"10\" \\\n    ZS_SNMPTrapperFile=\"/tmp/zabbix_traps.tmp\" \\\n    ZS_StartSNMPTrapper=\"0\" \\\n    ZS_ListenIP=\"0.0.0.0\" \\\n    ZS_HousekeepingFrequency=\"1\" \\\n    ZS_MaxHousekeeperDelete=\"500\" \\\n    ZS_SenderFrequency=\"30\" \\\n    ZS_CacheSize=\"8M\" \\\n    ZS_CacheUpdateFrequency=\"60\" \\\n    ZS_StartDBSyncers=\"4\" \\\n    ZS_HistoryCacheSize=\"8M\" \\\n    ZS_TrendCacheSize=\"4M\" \\\n    ZS_HistoryTextCacheSize=\"16M\" \\\n    ZS_ValueCacheSize=\"8M\" \\\n    ZS_Timeout=\"3\" \\\n    ZS_TrapperTimeout=\"300\" \\\n    ZS_UnreachablePeriod=\"45\" \\\n    ZS_UnavailableDelay=\"60\" \\\n    ZS_UnreachableDelay=\"15\" \\\n    ZS_AlertScriptsPath=\"/usr/local/share/zabbix/alertscripts\" \\\n    ZS_ExternalScripts=\"/usr/local/share/zabbix/externalscripts\" \\\n    ZS_FpingLocation=\"/usr/sbin/fping\" \\\n    ZS_Fping6Location=\"/usr/sbin/fping6\" \\\n    ZS_SSHKeyLocation=\"\" \\\n    ZS_LogSlowQueries=\"0\" \\\n    ZS_TmpDir=\"/tmp\" \\\n    ZS_StartProxyPollers=\"1\" \\\n    ZS_ProxyConfigFrequency=\"3600\" \\\n    ZS_ProxyDataFrequency=\"1\" \\\n    ZS_AllowRoot=\"0\" \\\n    ZS_User=\"zabbix\" \\\n    ZS_Include=\"\" \\\n    ZS_SSLCertLocation=\"/usr/local/share/zabbix/ssl/certs\" \\\n    ZS_SSLKeyLocation=\"/usr/local/share/zabbix/ssl/keys\" \\\n    ZS_SSLCALocation=\"\" \\\n    ZS_LoadModulePath=\"/usr/lib/zabbix/modules\" \\\n    ZS_LoadModule=\"\" \\\n    ZW_ZBX_SERVER=\"localhost\" \\\n    ZW_ZBX_SERVER_PORT=\"10051\" \\\n    ZW_ZBX_SERVER_NAME=\"Zabbix Server\" \\\n    TERM=\"xterm\"\n#  Layer: base\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y epel-release \\\n && sed -i -e \"\\|^https://\\\"http://|d\" /etc/yum.repos.d/epel.repo \\\n && yum clean all \\\n && yum install -y supervisor \\\n && yum install -y http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm \\\n && yum install -y nginx inotify-tools \\\n && `` groupmod --gid 80 --new-name www nginx \\\n && usermod --uid 80 --home /data/www --gid 80 --login www --shell /bin/bash --comment www nginx \\\n && `` rm -rf /etc/nginx/*.d /etc/nginx/*_params \\\n && `` mkdir -p /etc/nginx/ssl \\\n && openssl genrsa -out /etc/nginx/ssl/dummy.key 2048 \\\n && openssl req -new -key /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.csr -subj \"/C=GB/L=London/O=Company Ltd/CN=zabbix-docker\" \\\n && openssl x509 -req -days 3650 -in /etc/nginx/ssl/dummy.csr -signkey /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.crt \\\n && yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y --enablerepo=remi-php56 php-fpm php-gd php-bcmath php-ctype php-xml php-xmlreader php-xmlwriter php-session php-net-socket php-mbstring php-gettext php-cli php-mysqlnd php-opcache php-pdo php-snmp php-ldap \\\n && yum clean all \\\n && rm -rf /tmp/*\nADD container-files-base /\n#  Layer: zabbix\nCOPY container-files-zabbix /\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y tar svn gcc automake make nmap traceroute iptstate wget net-snmp-devel net-snmp-libs net-snmp net-snmp-perl iksemel net-snmp-python net-snmp-utils java-1.8.0-openjdk python-pip java-1.8.0-openjdk-devel mariadb-devel libxml2-devel gettext libcurl-devel OpenIPMI-devel mysql iksemel-devel libssh2-devel unixODBC unixODBC-devel mysql-connector-odbc postgresql-odbc openldap-devel telnet net-tools snmptt sudo \\\n && `` yum -y -q reinstall glibc-common \\\n && cp /usr/local/etc/zabbix_agentd.conf /tmp \\\n && svn co svn://svn.zabbix.com/${ZABBIX_VERSION} /usr/local/src/zabbix \\\n && cd /usr/local/src/zabbix \\\n && DATE=`date +%Y-%m-%d ` \\\n && sed -i \"s/ZABBIX_VERSION.*'\\(.*\\)'/ZABBIX_VERSION', '\\1 ($DATE)'/g\" frontends/php/include/defines.inc.php \\\n && sed -i \"s/ZABBIX_VERSION_RC.*\\\"\\(.*\\)\\\"/ZABBIX_VERSION_RC \\\"\\1 (${DATE})\\\"/g\" include/version.h \\\n && sed -i \"s/String VERSION =.*\\\"\\(.*\\)\\\"/String VERSION = \\\"\\1 (${DATE})\\\"/g\" src/zabbix_java/src/com/zabbix/gateway/GeneralInformation.java \\\n && ./bootstrap.sh \\\n && ./configure --enable-server --enable-agent --with-mysql --enable-java --with-net-snmp --with-libcurl --with-libxml2 --with-openipmi --enable-ipv6 --with-jabber --with-openssl --with-ssh2 --with-ldap --with-unixodbc \\\n && make dbschema \\\n && make install \\\n && cp /usr/local/etc/web/zabbix.conf.php /usr/local/src/zabbix/frontends/php/conf/ \\\n && pip install py-zabbix \\\n && wget https://github.com/schweikert/fping/archive/3.10.tar.gz \\\n && tar -xvf 3.10.tar.gz \\\n && cd fping-3.10/ \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --enable-ipv6 --enable-ipv4 \\\n && make \\\n && make install \\\n && mv /health/ /usr/local/src/zabbix/frontends/php/ \\\n && setcap cap_net_raw+ep /usr/sbin/fping || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping' \\\n && setcap cap_net_raw+ep /usr/sbin/fping6 || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping6' \\\n && chmod 4710 /usr/sbin/fping \\\n && chmod 4710 /usr/sbin/fping6 \\\n && cd .. \\\n && cp -f /tmp/zabbix_agentd.conf /usr/local/etc/ \\\n && rm -rf fping-3.10 \\\n && rm -rf 3.10.tar.gz \\\n && cd /usr/local/src/zabbix/frontends/php \\\n && locale/make_mo.sh \\\n && yum autoremove -y gettext python-pip tar svn gcc automake mariadb-devel java-1.8.0-openjdk-devel libxml2-devel libcurl-devel OpenIPMI-devel iksemel-devel \\\n && yum install -y OpenIPMI-libs \\\n && chmod +x /config/bootstrap.sh \\\n && chmod +x /config/ds.sh \\\n && chmod +x /usr/local/src/zabbix/misc/snmptrap/zabbix_trap_receiver.pl \\\n && chmod +x /usr/share/snmptt/snmptthandler-embedded \\\n && yum clean all \\\n && mkdir -p /usr/local/share/ssl/certs \\\n && mkdir -p /usr/local/share/ssl/keys \\\n && mkdir -p /usr/lib/zabbix/modules \\\n && mkdir -p /etc/zabbix/snmp/mibs \\\n && rm -rf /tmp/*\n#  TODO apply http://geofrogger.net/review/snmptt-hide-generic-part.patch\nCMD [\"/config/bootstrap.sh\"]\nVOLUME [\"/etc/custom-config\", \"/usr/local/share/zabbix/externalscripts\", \"/usr/local/share/zabbix/ssl/certs\", \"/usr/local/share/zabbix/ssl/keys\", \"/usr/lib/zabbix/modules\", \"/usr/share/snmp/mibs\", \"/etc/snmp\"]\nEXPOSE 80/tcp 162/udp 10051/tcp 10052/tcp\n","injectedSmells":[],"originalDockerfileHash":"9485043a1ba8c1a8a07e040db6b0b859","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos7\nMAINTAINER Jan Garaj info@monitoringartist.com\n#   ZABBIX_VERSION=trunk tags/2.4.7 branches/dev/ZBXNEXT-1263-1\nENV ZABBIX_VERSION=\"trunk\" \\\n    ZS_enabled=\"true\" \\\n    ZA_enabled=\"true\" \\\n    ZW_enabled=\"true\" \\\n    SNMPTRAP_enabled=\"false\" \\\n    STATUS_PAGE_ALLOWED_IP=\"127.0.0.1\" \\\n    JAVA_HOME=\"/usr/lib/jvm/jre\" \\\n    JAVA=\"/usr/bin/java\" \\\n    PHP_date_timezone=\"UTC\" \\\n    PHP_max_execution_time=\"300\" \\\n    PHP_max_input_time=\"300\" \\\n    PHP_memory_limit=\"128M\" \\\n    PHP_error_reporting=\"E_ALL\" \\\n    ZS_ListenPort=\"10051\" \\\n    ZS_SourceIP=\"\" \\\n    ZS_LogFile=\"/tmp/zabbix_server.log\" \\\n    ZS_LogFileSize=\"10\" \\\n    ZS_DebugLevel=\"3\" \\\n    ZS_PidFile=\"/var/run/zabbix_server.pid\" \\\n    ZS_DBHost=\"zabbix.db\" \\\n    ZS_DBName=\"zabbix\" \\\n    ZS_DBSchema=\"\" \\\n    ZS_DBUser=\"zabbix\" \\\n    ZS_DBPassword=\"zabbix\" \\\n    ZS_DBSocket=\"/tmp/mysql.sock\" \\\n    ZS_DBPort=\"3306\" \\\n    ZS_StartPollers=\"5\" \\\n    ZS_StartPollersUnreachable=\"1\" \\\n    ZS_StartTrappers=\"5\" \\\n    ZS_StartPingers=\"1\" \\\n    ZS_StartDiscoverers=\"1\" \\\n    ZS_StartHTTPPollers=\"1\" \\\n    ZS_StartTimers=\"1\" \\\n    ZS_JavaGateway=\"127.0.0.1\" \\\n    ZS_JavaGatewayPort=\"10052\" \\\n    ZS_StartJavaPollers=\"0\" \\\n    ZS_StartVMwareCollectors=\"0\" \\\n    ZS_VMwareFrequency=\"60\" \\\n    ZS_VMwarePerfFrequency=\"60\" \\\n    ZS_VMwareCacheSize=\"8M\" \\\n    ZS_VMwareTimeout=\"10\" \\\n    ZS_SNMPTrapperFile=\"/tmp/zabbix_traps.tmp\" \\\n    ZS_StartSNMPTrapper=\"0\" \\\n    ZS_ListenIP=\"0.0.0.0\" \\\n    ZS_HousekeepingFrequency=\"1\" \\\n    ZS_MaxHousekeeperDelete=\"500\" \\\n    ZS_SenderFrequency=\"30\" \\\n    ZS_CacheSize=\"8M\" \\\n    ZS_CacheUpdateFrequency=\"60\" \\\n    ZS_StartDBSyncers=\"4\" \\\n    ZS_HistoryCacheSize=\"8M\" \\\n    ZS_TrendCacheSize=\"4M\" \\\n    ZS_HistoryTextCacheSize=\"16M\" \\\n    ZS_ValueCacheSize=\"8M\" \\\n    ZS_Timeout=\"3\" \\\n    ZS_TrapperTimeout=\"300\" \\\n    ZS_UnreachablePeriod=\"45\" \\\n    ZS_UnavailableDelay=\"60\" \\\n    ZS_UnreachableDelay=\"15\" \\\n    ZS_AlertScriptsPath=\"/usr/local/share/zabbix/alertscripts\" \\\n    ZS_ExternalScripts=\"/usr/local/share/zabbix/externalscripts\" \\\n    ZS_FpingLocation=\"/usr/sbin/fping\" \\\n    ZS_Fping6Location=\"/usr/sbin/fping6\" \\\n    ZS_SSHKeyLocation=\"\" \\\n    ZS_LogSlowQueries=\"0\" \\\n    ZS_TmpDir=\"/tmp\" \\\n    ZS_StartProxyPollers=\"1\" \\\n    ZS_ProxyConfigFrequency=\"3600\" \\\n    ZS_ProxyDataFrequency=\"1\" \\\n    ZS_AllowRoot=\"0\" \\\n    ZS_User=\"zabbix\" \\\n    ZS_Include=\"\" \\\n    ZS_SSLCertLocation=\"/usr/local/share/zabbix/ssl/certs\" \\\n    ZS_SSLKeyLocation=\"/usr/local/share/zabbix/ssl/keys\" \\\n    ZS_SSLCALocation=\"\" \\\n    ZS_LoadModulePath=\"/usr/lib/zabbix/modules\" \\\n    ZS_LoadModule=\"\" \\\n    ZW_ZBX_SERVER=\"localhost\" \\\n    ZW_ZBX_SERVER_PORT=\"10051\" \\\n    ZW_ZBX_SERVER_NAME=\"Zabbix Server\" \\\n    TERM=\"xterm\"\n#   Layer: base\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y epel-release \\\n && sed -i -e \"\\|^https://\\\"http://|d\" /etc/yum.repos.d/epel.repo \\\n && yum clean all \\\n && yum install -y supervisor \\\n && yum install -y http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm \\\n && yum install -y nginx inotify-tools \\\n && `` groupmod --gid 80 --new-name www nginx \\\n && usermod --uid 80 --home /data/www --gid 80 --login www --shell /bin/bash --comment www nginx \\\n && `` rm -rf /etc/nginx/*.d /etc/nginx/*_params \\\n && `` mkdir -p /etc/nginx/ssl \\\n && openssl genrsa -out /etc/nginx/ssl/dummy.key 2048 \\\n && openssl req -new -key /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.csr -subj \"/C=GB/L=London/O=Company Ltd/CN=zabbix-docker\" \\\n && openssl x509 -req -days 3650 -in /etc/nginx/ssl/dummy.csr -signkey /etc/nginx/ssl/dummy.key -out /etc/nginx/ssl/dummy.crt \\\n && yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm \\\n && yum install -y --enablerepo=remi-php56 php-fpm php-gd php-bcmath php-ctype php-xml php-xmlreader php-xmlwriter php-session php-net-socket php-mbstring php-gettext php-cli php-mysqlnd php-opcache php-pdo php-snmp php-ldap \\\n && yum clean all \\\n && rm -rf /tmp/*\nADD container-files-base /\n#   Layer: zabbix\nCOPY container-files-zabbix /\nRUN yum clean all \\\n && yum update -y \\\n && yum install -y tar svn gcc automake make nmap traceroute iptstate wget net-snmp-devel net-snmp-libs net-snmp net-snmp-perl iksemel net-snmp-python net-snmp-utils java-1.8.0-openjdk python-pip java-1.8.0-openjdk-devel mariadb-devel libxml2-devel gettext libcurl-devel OpenIPMI-devel mysql iksemel-devel libssh2-devel unixODBC unixODBC-devel mysql-connector-odbc postgresql-odbc openldap-devel telnet net-tools snmptt sudo \\\n && `` yum -y -q reinstall glibc-common \\\n && cp /usr/local/etc/zabbix_agentd.conf /tmp \\\n && svn co svn://svn.zabbix.com/${ZABBIX_VERSION} /usr/local/src/zabbix \\\n && cd /usr/local/src/zabbix \\\n && DATE=`date +%Y-%m-%d ` \\\n && sed -i \"s/ZABBIX_VERSION.*'\\(.*\\)'/ZABBIX_VERSION', '\\1 ($DATE)'/g\" frontends/php/include/defines.inc.php \\\n && sed -i \"s/ZABBIX_VERSION_RC.*\\\"\\(.*\\)\\\"/ZABBIX_VERSION_RC \\\"\\1 (${DATE})\\\"/g\" include/version.h \\\n && sed -i \"s/String VERSION =.*\\\"\\(.*\\)\\\"/String VERSION = \\\"\\1 (${DATE})\\\"/g\" src/zabbix_java/src/com/zabbix/gateway/GeneralInformation.java \\\n && ./bootstrap.sh \\\n && ./configure --enable-server --enable-agent --with-mysql --enable-java --with-net-snmp --with-libcurl --with-libxml2 --with-openipmi --enable-ipv6 --with-jabber --with-openssl --with-ssh2 --with-ldap --with-unixodbc \\\n && make dbschema \\\n && make install \\\n && cp /usr/local/etc/web/zabbix.conf.php /usr/local/src/zabbix/frontends/php/conf/ \\\n && pip install py-zabbix \\\n && wget https://github.com/schweikert/fping/archive/3.10.tar.gz \\\n && tar -xvf 3.10.tar.gz \\\n && cd fping-3.10/ \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --enable-ipv6 --enable-ipv4 \\\n && make \\\n && make install \\\n && mv /health/ /usr/local/src/zabbix/frontends/php/ \\\n && setcap cap_net_raw+ep /usr/sbin/fping || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping' \\\n && setcap cap_net_raw+ep /usr/sbin/fping6 || echo 'Warning: setcap cap_net_raw+ep /usr/sbin/fping6' \\\n && chmod 4710 /usr/sbin/fping \\\n && chmod 4710 /usr/sbin/fping6 \\\n && cd .. \\\n && cp -f /tmp/zabbix_agentd.conf /usr/local/etc/ \\\n && rm -rf fping-3.10 \\\n && rm -rf 3.10.tar.gz \\\n && cd /usr/local/src/zabbix/frontends/php \\\n && locale/make_mo.sh \\\n && yum autoremove -y gettext python-pip tar svn gcc automake mariadb-devel java-1.8.0-openjdk-devel libxml2-devel libcurl-devel OpenIPMI-devel iksemel-devel \\\n && yum install -y OpenIPMI-libs \\\n && chmod +x /config/bootstrap.sh \\\n && chmod +x /config/ds.sh \\\n && chmod +x /usr/local/src/zabbix/misc/snmptrap/zabbix_trap_receiver.pl \\\n && chmod +x /usr/share/snmptt/snmptthandler-embedded \\\n && yum clean all \\\n && mkdir -p /usr/local/share/ssl/certs \\\n && mkdir -p /usr/local/share/ssl/keys \\\n && mkdir -p /usr/lib/zabbix/modules \\\n && mkdir -p /etc/zabbix/snmp/mibs \\\n && rm -rf /tmp/*\n#   TODO apply http://geofrogger.net/review/snmptt-hide-generic-part.patch\nCMD [\"/config/bootstrap.sh\"]\nVOLUME [\"/etc/custom-config\", \"/usr/local/share/zabbix/externalscripts\", \"/usr/local/share/zabbix/ssl/certs\", \"/usr/local/share/zabbix/ssl/keys\", \"/usr/lib/zabbix/modules\", \"/usr/share/snmp/mibs\", \"/etc/snmp\"]\nEXPOSE 80/tcp 162/udp 10051/tcp 10052/tcp\n","originalDockerfileUglifiedHash":"0f26266e328881ca5dcf14641c8253a0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6e5bbb638f375c06252249c7bee597c0aae62f1c.dockerfile"}