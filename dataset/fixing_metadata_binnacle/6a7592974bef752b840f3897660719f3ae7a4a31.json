{"seed":4150101762,"processedDockerfileHash":"12447d4ed79a4c8dcde456b4567c77fc","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos6\nMAINTAINER Imagine Chiu<imagine10255@gmail.com>\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\n#   Install base tool\nRUN yum -y install vim wget tar\n#   Install develop tool\nRUN yum -y groupinstall development\n#   Install php rpm\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n#   Install SSH Service\nRUN yum install -y openssh-server passwd\nRUN sed -ri 's/#UsePAM no/UsePAM no/g' /etc/ssh/sshd_config \\\n && echo \"${SSH_PASSWORD}\" | passwd \"root\" --stdin\n#   Install crontab service\nRUN yum -y install vixie-cron crontabs\n#   Install Git need package\nRUN yum -y install curl-devel expat-devel gettext-devel devel zlib-devel perl-devel\n#   Install php-fpm (https://webtatic.com/packages/php56/\nRUN yum -y install php56w php56w-fpm php56w-mbstring php56w-xml php56w-mysql php56w-pdo php56w-gd php56w-pecl-imagick php56w-opcache php56w-pecl-memcache php56w-pecl-xdebug\n#   Install php-mssql,mcrypt\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\nRUN yum -y install php56w-mssql php56w-mcrypt\n#   Install nginx\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm \\\n && yum -y update nginx-release-centos \\\n && cp -p /etc/yum.repos.d/nginx.repo /etc/yum.repos.d/nginx.repo.backup \\\n && sed -i -e \"s/enabled=1/enabled=0/g\" /etc/yum.repos.d/nginx.repo\nRUN yum -y --enablerepo=nginx install nginx\n#   Setting composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer\n#   Install laravel-envoy\nRUN composer global require \"laravel/envoy=~1.0\"\n#   Install supervisor\nRUN yum -y install python-setuptools \\\n && easy_install supervisor \\\n && echo_supervisord_conf > /etc/supervisord.conf\n#   Install MariaDB(Only Client)\nRUN echo -e \"[mariadb]\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"name = MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"baseurl = http://yum.mariadb.org/10.0/centos6-amd64\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgcheck=1\" >> /etc/yum.repos.d/MariaDB.repo \\\n && yum -y install MariaDB-client\n#   Install Freetds(MSSQL)\nRUN cd ~/ \\\n && wget ftp://ftp.freetds.org/pub/freetds/stable/freetds-0.95.87.tar.gz \\\n && tar zxf ./freetds-0.95.87.tar.gz \\\n && cd ./freetds-0.95.87 \\\n && ./configure --prefix=/usr/local/freetds \\\n && gmake \\\n && gmake install \\\n && rm -rf ~/freetds-0.95.87*\n#   Install Git Laster Version\nRUN cd ~/ \\\n && wget https://www.kernel.org/pub/software/scm/git/git-2.6.3.tar.gz \\\n && tar zxf ./git-2.6.3.tar.gz \\\n && cd ./git-2.6.3 \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf ~/git-2.6.3*\n#   Copy files for setting\nCOPY . /opt/\n#   Create Base Enter Cont Command\nRUN chmod 755 /opt/docker/bash/init-bashrc.sh \\\n && echo \"/opt/docker/bash/init-bashrc.sh\" >> /root/.bashrc \\\n && echo 'export PATH=\"/root/.composer/vendor/bin:$PATH\"' >> /root/.bashrc\n#   Setting lnmp(php,lnmp)\nRUN chmod 755 /opt/docker/bash/setting-lnmp.sh \\\n && bash /opt/docker/bash/setting-lnmp.sh\n#   Setting DateTime Zone\nRUN cp -p /usr/share/zoneinfo/Asia/Taipei /etc/localtime\n#   Setup default path\nWORKDIR /home\n#   Private expose\nEXPOSE 22/tcp 80/tcp 8080/tcp\n#   Volume for web server install\nVOLUME [\"/home/website\",\"/home/config\",\"/home/logs\"]\n#   Start run shell\nCMD [\"bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos6\nMAINTAINER Imagine Chiu<imagine10255@gmail.com>\nENV SSH_PASSWORD=\"P@ssw0rd\"\n#  Install base tool\nRUN yum -y install vim wget tar\n#  Install develop tool\nRUN yum -y groupinstall development\n#  Install php rpm\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n#  Install SSH Service\nRUN yum install -y openssh-server passwd\nRUN sed -ri 's/#UsePAM no/UsePAM no/g' /etc/ssh/sshd_config \\\n && echo \"${SSH_PASSWORD}\" | passwd \"root\" --stdin\n#  Install crontab service\nRUN yum -y install vixie-cron crontabs\n#  Install Git need package\nRUN yum -y install curl-devel expat-devel gettext-devel devel zlib-devel perl-devel\n#  Install php-fpm (https://webtatic.com/packages/php56/\nRUN yum -y install php56w php56w-fpm php56w-mbstring php56w-xml php56w-mysql php56w-pdo php56w-gd php56w-pecl-imagick php56w-opcache php56w-pecl-memcache php56w-pecl-xdebug\n#  Install php-mssql,mcrypt\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\nRUN yum -y install php56w-mssql php56w-mcrypt\n#  Install nginx\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm \\\n && yum -y update nginx-release-centos \\\n && cp -p /etc/yum.repos.d/nginx.repo /etc/yum.repos.d/nginx.repo.backup \\\n && sed -i -e \"s/enabled=1/enabled=0/g\" /etc/yum.repos.d/nginx.repo\nRUN yum -y --enablerepo=nginx install nginx\n#  Setting composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer\n#  Install laravel-envoy\nRUN composer global require \"laravel/envoy=~1.0\"\n#  Install supervisor\nRUN yum -y install python-setuptools \\\n && easy_install supervisor \\\n && echo_supervisord_conf > /etc/supervisord.conf\n#  Install MariaDB(Only Client)\nRUN echo -e \"[mariadb]\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"name = MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"baseurl = http://yum.mariadb.org/10.0/centos6-amd64\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgcheck=1\" >> /etc/yum.repos.d/MariaDB.repo \\\n && yum -y install MariaDB-client\n#  Install Freetds(MSSQL)\nRUN cd ~/ \\\n && wget ftp://ftp.freetds.org/pub/freetds/stable/freetds-0.95.87.tar.gz \\\n && tar zxf ./freetds-0.95.87.tar.gz \\\n && cd ./freetds-0.95.87 \\\n && ./configure --prefix=/usr/local/freetds \\\n && gmake \\\n && gmake install \\\n && rm -rf ~/freetds-0.95.87*\n#  Install Git Laster Version\nRUN cd ~/ \\\n && wget https://www.kernel.org/pub/software/scm/git/git-2.6.3.tar.gz \\\n && tar zxf ./git-2.6.3.tar.gz \\\n && cd ./git-2.6.3 \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf ~/git-2.6.3*\n#  Copy files for setting\nADD . /opt/\n#  Create Base Enter Cont Command\nRUN chmod 755 /opt/docker/bash/init-bashrc.sh \\\n && echo \"/opt/docker/bash/init-bashrc.sh\" >> /root/.bashrc \\\n && echo 'export PATH=\"/root/.composer/vendor/bin:$PATH\"' >> /root/.bashrc\n#  Setting lnmp(php,lnmp)\nRUN chmod 755 /opt/docker/bash/setting-lnmp.sh \\\n && bash /opt/docker/bash/setting-lnmp.sh\n#  Setting DateTime Zone\nRUN cp -p /usr/share/zoneinfo/Asia/Taipei /etc/localtime\n#  Setup default path\nWORKDIR /home\n#  Private expose\nEXPOSE 22/tcp 80/tcp 8080/tcp\n#  Volume for web server install\nVOLUME [\"/home/website\",\"/home/config\",\"/home/logs\"]\n#  Start run shell\nCMD [\"bash\"]\n","injectedSmells":[],"originalDockerfileHash":"f0cdf1d1e2439c9ac9c0eae2f75d8702","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos6\nMAINTAINER Imagine Chiu<imagine10255@gmail.com>\nENV SSH_PASSWORD=\"P@ssw0rd\"\n#   Install base tool\nRUN yum -y install vim wget tar\n#   Install develop tool\nRUN yum -y groupinstall development\n#   Install php rpm\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n#   Install SSH Service\nRUN yum install -y openssh-server passwd\nRUN sed -ri 's/#UsePAM no/UsePAM no/g' /etc/ssh/sshd_config \\\n && echo \"${SSH_PASSWORD}\" | passwd \"root\" --stdin\n#   Install crontab service\nRUN yum -y install vixie-cron crontabs\n#   Install Git need package\nRUN yum -y install curl-devel expat-devel gettext-devel devel zlib-devel perl-devel\n#   Install php-fpm (https://webtatic.com/packages/php56/\nRUN yum -y install php56w php56w-fpm php56w-mbstring php56w-xml php56w-mysql php56w-pdo php56w-gd php56w-pecl-imagick php56w-opcache php56w-pecl-memcache php56w-pecl-xdebug\n#   Install php-mssql,mcrypt\nRUN rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\nRUN yum -y install php56w-mssql php56w-mcrypt\n#   Install nginx\nRUN rpm --import http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6 \\\n && rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm \\\n && yum -y update nginx-release-centos \\\n && cp -p /etc/yum.repos.d/nginx.repo /etc/yum.repos.d/nginx.repo.backup \\\n && sed -i -e \"s/enabled=1/enabled=0/g\" /etc/yum.repos.d/nginx.repo\nRUN yum -y --enablerepo=nginx install nginx\n#   Setting composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer\n#   Install laravel-envoy\nRUN composer global require \"laravel/envoy=~1.0\"\n#   Install supervisor\nRUN yum -y install python-setuptools \\\n && easy_install supervisor \\\n && echo_supervisord_conf > /etc/supervisord.conf\n#   Install MariaDB(Only Client)\nRUN echo -e \"[mariadb]\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"name = MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"baseurl = http://yum.mariadb.org/10.0/centos6-amd64\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\" >> /etc/yum.repos.d/MariaDB.repo \\\n && echo -e \"gpgcheck=1\" >> /etc/yum.repos.d/MariaDB.repo \\\n && yum -y install MariaDB-client\n#   Install Freetds(MSSQL)\nRUN cd ~/ \\\n && wget ftp://ftp.freetds.org/pub/freetds/stable/freetds-0.95.87.tar.gz \\\n && tar zxf ./freetds-0.95.87.tar.gz \\\n && cd ./freetds-0.95.87 \\\n && ./configure --prefix=/usr/local/freetds \\\n && gmake \\\n && gmake install \\\n && rm -rf ~/freetds-0.95.87*\n#   Install Git Laster Version\nRUN cd ~/ \\\n && wget https://www.kernel.org/pub/software/scm/git/git-2.6.3.tar.gz \\\n && tar zxf ./git-2.6.3.tar.gz \\\n && cd ./git-2.6.3 \\\n && ./configure \\\n && make \\\n && make install \\\n && rm -rf ~/git-2.6.3*\n#   Copy files for setting\nADD . /opt/\n#   Create Base Enter Cont Command\nRUN chmod 755 /opt/docker/bash/init-bashrc.sh \\\n && echo \"/opt/docker/bash/init-bashrc.sh\" >> /root/.bashrc \\\n && echo 'export PATH=\"/root/.composer/vendor/bin:$PATH\"' >> /root/.bashrc\n#   Setting lnmp(php,lnmp)\nRUN chmod 755 /opt/docker/bash/setting-lnmp.sh \\\n && bash /opt/docker/bash/setting-lnmp.sh\n#   Setting DateTime Zone\nRUN cp -p /usr/share/zoneinfo/Asia/Taipei /etc/localtime\n#   Setup default path\nWORKDIR /home\n#   Private expose\nEXPOSE 22/tcp 80/tcp 8080/tcp\n#   Volume for web server install\nVOLUME [\"/home/website\",\"/home/config\",\"/home/logs\"]\n#   Start run shell\nCMD [\"bash\"]\n","originalDockerfileUglifiedHash":"c350617d9535df23349fae8c7cf4f6a7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6a7592974bef752b840f3897660719f3ae7a4a31.dockerfile"}