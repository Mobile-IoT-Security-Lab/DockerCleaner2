{"seed":2584825079,"processedDockerfileHash":"fe52c2143babd346161cd25b9234f1ea","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM lsiobase/alpine:3.9 AS buildstage\n#  ############# build stage ##############\n#   package versions\nARG ARGTABLE_VER=\"2.13\"\nARG XMLTV_VER=\"v0.6.1\"\n#   environment settings\nARG TZ=\"Europe/Oslo\"\nARG TVHEADEND_COMMIT\nENV HOME=\"/config\"\n#   copy patches\nCOPY patches/ /tmp/patches/\nRUN echo \"**** install build packages ****\" \\\n && apk add autoconf automake bsd-compat-headers bzip2 cmake curl diffutils ffmpeg-dev file findutils g++ gcc gettext-dev git gzip jq libcurl libdvbcsa-dev libgcrypt-dev libhdhomerun-dev libtool libva-dev libvpx-dev libxml2-dev libxslt-dev linux-headers make openssl-dev opus-dev patch pcre2-dev perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-dev perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer pkgconf pngquant python sdl-dev tar uriparser-dev wget x264-dev x265-dev zlib-dev --no-cache \\\n && apk add gnu-libiconv-dev --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community\nRUN echo \"**** remove musl iconv.h and replace with gnu-iconv.h ****\" \\\n && rm -rf /usr/include/iconv.h \\\n && cp /usr/include/gnu-libiconv/iconv.h /usr/include/iconv.h\nRUN echo \"**** install perl modules for xmltv ****\" \\\n && curl -L https://cpanmin.us | perl - App::cpanminus \\\n && cpanm --installdeps /tmp/patches\nRUN echo \"**** compile XMLTV ****\" \\\n && git clone https://github.com/XMLTV/xmltv.git /tmp/xmltv \\\n && cd /tmp/xmltv \\\n && git checkout ${XMLTV_VER} \\\n && echo \"**** Perl 5.26 fixes for XMTLV ****\" \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_latex \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_text \\\n && sed \"s/\\(lib\\/set_share_dir.pl';\\)/.\\/\\1/\" -i grab/it/tv_grab_it.PL \\\n && sed \"s/\\(filter\\/Grep.pm';\\)/.\\/\\1/\" -i filter/tv_grep.PL \\\n && sed \"s/\\(lib\\/XMLTV.pm.in';\\)/.\\/\\1/\" -i lib/XMLTV.pm.PL \\\n && sed \"s/\\(lib\\/Ask\\/Term.pm';\\)/.\\/\\1/\" -i Makefile.PL \\\n && PERL5LIB=`pwd ` \\\n && echo -e \"yes\" | perl Makefile.PL PREFIX=/usr/ INSTALLDIRS=vendor \\\n && make -j 2 \\\n && make test \\\n && make DESTDIR=/tmp/xmltv-build install\nRUN echo \"**** compile tvheadend ****\" \\\n && if [ -z ${TVHEADEND_COMMIT+x} ] ; then TVHEADEND_COMMIT=$( curl -sX GET https://api.github.com/repos/tvheadend/tvheadend/commits/master | jq -r '. | .sha' ;) ; fi \\\n && mkdir -p /tmp/tvheadend \\\n && git clone https://github.com/tvheadend/tvheadend.git /tmp/tvheadend \\\n && cd /tmp/tvheadend \\\n && git checkout ${TVHEADEND_COMMIT} \\\n && ./configure `` --enable-libffmpeg_static --enable-libopus --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libx265 --enable-libfdkaac `` --disable-bintray_cache --enable-bundle --enable-dvbcsa --enable-hdhomerun_static --enable-hdhomerun_client --enable-libav --enable-pngquant --enable-trace --enable-vaapi --infodir=/usr/share/info --localstatedir=/var --mandir=/usr/share/man --prefix=/usr --sysconfdir=/config \\\n && make -j 2 \\\n && make DESTDIR=/tmp/tvheadend-build install\nRUN echo \"**** compile argtable2 ****\" \\\n && ARGTABLE_VER1=\"${ARGTABLE_VER//./-}\" \\\n && mkdir -p /tmp/argtable \\\n && curl -o /tmp/argtable-src.tar.gz -L \"https://sourceforge.net/projects/argtable/files/argtable/argtable-${ARGTABLE_VER}/argtable${ARGTABLE_VER1}.tar.gz\" \\\n && tar xf /tmp/argtable-src.tar.gz -C /tmp/argtable --strip-components=1 \\\n && cp /tmp/patches/config.* /tmp/argtable \\\n && cd /tmp/argtable \\\n && ./configure --prefix=/usr \\\n && make -j 2 \\\n && make check \\\n && make DESTDIR=/tmp/argtable-build install \\\n && echo \"**** copy to /usr for comskip dependency ****\" \\\n && cp -pr /tmp/argtable-build/usr/* /usr/\nRUN echo \"***** compile comskip ****\" \\\n && git clone git://github.com/erikkaashoek/Comskip /tmp/comskip \\\n && cd /tmp/comskip \\\n && ./autogen.sh \\\n && ./configure --bindir=/usr/bin --sysconfdir=/config/comskip \\\n && make -j 2 \\\n && make DESTDIR=/tmp/comskip-build install\n#  ############# runtime stage ##############\nFROM lsiobase/alpine:3.9\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"saarg\"\n#   environment settings\nENV HOME=\"/config\"\nRUN echo \"**** install runtime packages ****\" \\\n && apk add bsd-compat-headers bzip2 curl ffmpeg ffmpeg-libs gzip libcrypto1.1 libcurl libdvbcsa libhdhomerun-libs libssl1.1 libva libva-intel-driver libvpx libxml2 libxslt linux-headers openssl opus pcre2 perl perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer python tar uriparser wget x264 x265 zlib --no-cache \\\n && apk add gnu-libiconv --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community \\\n && echo \"**** Add Picons ****\" \\\n && mkdir -p /picons \\\n && curl -o /picons.tar.bz2 -L https://lsio-ci.ams3.digitaloceanspaces.com/picons/picons.tar.bz2\n#   copy local files and buildstage artifacts\nCOPY --from=buildstage /tmp/argtable-build/usr/ /usr/\nCOPY --from=buildstage /tmp/comskip-build/usr/ /usr/\nCOPY --from=buildstage /tmp/tvheadend-build/usr/ /usr/\nCOPY --from=buildstage /tmp/xmltv-build/usr/ /usr/\nCOPY --from=buildstage /usr/local/share/man/ /usr/local/share/man/\nCOPY --from=buildstage /usr/local/share/perl5/ /usr/local/share/perl5/\nCOPY root/ /\n#   ports and volumes\nEXPOSE 9981/tcp 9982/tcp\nVOLUME /config /recordings\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM lsiobase/alpine:3.9 AS buildstage\n# ############# build stage ##############\n#  package versions\nARG ARGTABLE_VER=\"2.13\"\nARG XMLTV_VER=\"v0.6.1\"\n#  environment settings\nARG TZ=\"Europe/Oslo\"\nARG TVHEADEND_COMMIT\nENV HOME=\"/config\"\n#  copy patches\nCOPY patches/ /tmp/patches/\nRUN echo \"**** install build packages ****\" \\\n && apk add --no-cache autoconf automake bsd-compat-headers bzip2 cmake curl diffutils ffmpeg-dev file findutils g++ gcc gettext-dev git gzip jq libcurl libdvbcsa-dev libgcrypt-dev libhdhomerun-dev libtool libva-dev libvpx-dev libxml2-dev libxslt-dev linux-headers make openssl-dev opus-dev patch pcre2-dev perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-dev perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer pkgconf pngquant python sdl-dev tar uriparser-dev wget x264-dev x265-dev zlib-dev \\\n && apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community gnu-libiconv-dev\nRUN echo \"**** remove musl iconv.h and replace with gnu-iconv.h ****\" \\\n && rm -rf /usr/include/iconv.h \\\n && cp /usr/include/gnu-libiconv/iconv.h /usr/include/iconv.h\nRUN echo \"**** install perl modules for xmltv ****\" \\\n && curl -L https://cpanmin.us | perl - App::cpanminus \\\n && cpanm --installdeps /tmp/patches\nRUN echo \"**** compile XMLTV ****\" \\\n && git clone https://github.com/XMLTV/xmltv.git /tmp/xmltv \\\n && cd /tmp/xmltv \\\n && git checkout ${XMLTV_VER} \\\n && echo \"**** Perl 5.26 fixes for XMTLV ****\" \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_latex \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_text \\\n && sed \"s/\\(lib\\/set_share_dir.pl';\\)/.\\/\\1/\" -i grab/it/tv_grab_it.PL \\\n && sed \"s/\\(filter\\/Grep.pm';\\)/.\\/\\1/\" -i filter/tv_grep.PL \\\n && sed \"s/\\(lib\\/XMLTV.pm.in';\\)/.\\/\\1/\" -i lib/XMLTV.pm.PL \\\n && sed \"s/\\(lib\\/Ask\\/Term.pm';\\)/.\\/\\1/\" -i Makefile.PL \\\n && PERL5LIB=`pwd ` \\\n && echo -e \"yes\" | perl Makefile.PL PREFIX=/usr/ INSTALLDIRS=vendor \\\n && make -j 2 \\\n && make test \\\n && make DESTDIR=/tmp/xmltv-build install\nRUN echo \"**** compile tvheadend ****\" \\\n && if [ -z ${TVHEADEND_COMMIT+x} ] ; then TVHEADEND_COMMIT=$( curl -sX GET https://api.github.com/repos/tvheadend/tvheadend/commits/master | jq -r '. | .sha' ;) ; fi \\\n && mkdir -p /tmp/tvheadend \\\n && git clone https://github.com/tvheadend/tvheadend.git /tmp/tvheadend \\\n && cd /tmp/tvheadend \\\n && git checkout ${TVHEADEND_COMMIT} \\\n && ./configure `` --enable-libffmpeg_static --enable-libopus --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libx265 --enable-libfdkaac `` --disable-bintray_cache --enable-bundle --enable-dvbcsa --enable-hdhomerun_static --enable-hdhomerun_client --enable-libav --enable-pngquant --enable-trace --enable-vaapi --infodir=/usr/share/info --localstatedir=/var --mandir=/usr/share/man --prefix=/usr --sysconfdir=/config \\\n && make -j 2 \\\n && make DESTDIR=/tmp/tvheadend-build install\nRUN echo \"**** compile argtable2 ****\" \\\n && ARGTABLE_VER1=\"${ARGTABLE_VER//./-}\" \\\n && mkdir -p /tmp/argtable \\\n && curl -o /tmp/argtable-src.tar.gz -L \"https://sourceforge.net/projects/argtable/files/argtable/argtable-${ARGTABLE_VER}/argtable${ARGTABLE_VER1}.tar.gz\" \\\n && tar xf /tmp/argtable-src.tar.gz -C /tmp/argtable --strip-components=1 \\\n && cp /tmp/patches/config.* /tmp/argtable \\\n && cd /tmp/argtable \\\n && ./configure --prefix=/usr \\\n && make -j 2 \\\n && make check \\\n && make DESTDIR=/tmp/argtable-build install \\\n && echo \"**** copy to /usr for comskip dependency ****\" \\\n && cp -pr /tmp/argtable-build/usr/* /usr/\nRUN echo \"***** compile comskip ****\" \\\n && git clone git://github.com/erikkaashoek/Comskip /tmp/comskip \\\n && cd /tmp/comskip \\\n && ./autogen.sh \\\n && ./configure --bindir=/usr/bin --sysconfdir=/config/comskip \\\n && make -j 2 \\\n && make DESTDIR=/tmp/comskip-build install\n# ############# runtime stage ##############\nFROM lsiobase/alpine:3.9\n#  set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"saarg\"\n#  environment settings\nENV HOME=\"/config\"\nRUN echo \"**** install runtime packages ****\" \\\n && apk add --no-cache bsd-compat-headers bzip2 curl ffmpeg ffmpeg-libs gzip libcrypto1.1 libcurl libdvbcsa libhdhomerun-libs libssl1.1 libva libva-intel-driver libvpx libxml2 libxslt linux-headers openssl opus pcre2 perl perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer python tar uriparser wget x264 x265 zlib \\\n && apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community gnu-libiconv \\\n && echo \"**** Add Picons ****\" \\\n && mkdir -p /picons \\\n && curl -o /picons.tar.bz2 -L https://lsio-ci.ams3.digitaloceanspaces.com/picons/picons.tar.bz2\n#  copy local files and buildstage artifacts\nCOPY --from=buildstage /tmp/argtable-build/usr/ /usr/\nCOPY --from=buildstage /tmp/comskip-build/usr/ /usr/\nCOPY --from=buildstage /tmp/tvheadend-build/usr/ /usr/\nCOPY --from=buildstage /tmp/xmltv-build/usr/ /usr/\nCOPY --from=buildstage /usr/local/share/man/ /usr/local/share/man/\nCOPY --from=buildstage /usr/local/share/perl5/ /usr/local/share/perl5/\nCOPY root/ /\n#  ports and volumes\nEXPOSE 9981/tcp 9982/tcp\nVOLUME /config /recordings\n","injectedSmells":[],"originalDockerfileHash":"f2f370c49060a9c1dccddcd79a114cf7","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM lsiobase/alpine:3.9 AS buildstage\n#  ############# build stage ##############\n#   package versions\nARG ARGTABLE_VER=\"2.13\"\nARG XMLTV_VER=\"v0.6.1\"\n#   environment settings\nARG TZ=\"Europe/Oslo\"\nARG TVHEADEND_COMMIT\nENV HOME=\"/config\"\n#   copy patches\nCOPY patches/ /tmp/patches/\nRUN echo \"**** install build packages ****\" \\\n && apk add --no-cache autoconf automake bsd-compat-headers bzip2 cmake curl diffutils ffmpeg-dev file findutils g++ gcc gettext-dev git gzip jq libcurl libdvbcsa-dev libgcrypt-dev libhdhomerun-dev libtool libva-dev libvpx-dev libxml2-dev libxslt-dev linux-headers make openssl-dev opus-dev patch pcre2-dev perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-dev perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer pkgconf pngquant python sdl-dev tar uriparser-dev wget x264-dev x265-dev zlib-dev \\\n && apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community gnu-libiconv-dev\nRUN echo \"**** remove musl iconv.h and replace with gnu-iconv.h ****\" \\\n && rm -rf /usr/include/iconv.h \\\n && cp /usr/include/gnu-libiconv/iconv.h /usr/include/iconv.h\nRUN echo \"**** install perl modules for xmltv ****\" \\\n && curl -L https://cpanmin.us | perl - App::cpanminus \\\n && cpanm --installdeps /tmp/patches\nRUN echo \"**** compile XMLTV ****\" \\\n && git clone https://github.com/XMLTV/xmltv.git /tmp/xmltv \\\n && cd /tmp/xmltv \\\n && git checkout ${XMLTV_VER} \\\n && echo \"**** Perl 5.26 fixes for XMTLV ****\" \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_latex \\\n && sed \"s/use POSIX 'tmpnam';//\" -i filter/tv_to_text \\\n && sed \"s/\\(lib\\/set_share_dir.pl';\\)/.\\/\\1/\" -i grab/it/tv_grab_it.PL \\\n && sed \"s/\\(filter\\/Grep.pm';\\)/.\\/\\1/\" -i filter/tv_grep.PL \\\n && sed \"s/\\(lib\\/XMLTV.pm.in';\\)/.\\/\\1/\" -i lib/XMLTV.pm.PL \\\n && sed \"s/\\(lib\\/Ask\\/Term.pm';\\)/.\\/\\1/\" -i Makefile.PL \\\n && PERL5LIB=`pwd ` \\\n && echo -e \"yes\" | perl Makefile.PL PREFIX=/usr/ INSTALLDIRS=vendor \\\n && make -j 2 \\\n && make test \\\n && make DESTDIR=/tmp/xmltv-build install\nRUN echo \"**** compile tvheadend ****\" \\\n && if [ -z ${TVHEADEND_COMMIT+x} ] ; then TVHEADEND_COMMIT=$( curl -sX GET https://api.github.com/repos/tvheadend/tvheadend/commits/master | jq -r '. | .sha' ;) ; fi \\\n && mkdir -p /tmp/tvheadend \\\n && git clone https://github.com/tvheadend/tvheadend.git /tmp/tvheadend \\\n && cd /tmp/tvheadend \\\n && git checkout ${TVHEADEND_COMMIT} \\\n && ./configure `` --enable-libffmpeg_static --enable-libopus --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libx265 --enable-libfdkaac `` --disable-bintray_cache --enable-bundle --enable-dvbcsa --enable-hdhomerun_static --enable-hdhomerun_client --enable-libav --enable-pngquant --enable-trace --enable-vaapi --infodir=/usr/share/info --localstatedir=/var --mandir=/usr/share/man --prefix=/usr --sysconfdir=/config \\\n && make -j 2 \\\n && make DESTDIR=/tmp/tvheadend-build install\nRUN echo \"**** compile argtable2 ****\" \\\n && ARGTABLE_VER1=\"${ARGTABLE_VER//./-}\" \\\n && mkdir -p /tmp/argtable \\\n && curl -o /tmp/argtable-src.tar.gz -L \"https://sourceforge.net/projects/argtable/files/argtable/argtable-${ARGTABLE_VER}/argtable${ARGTABLE_VER1}.tar.gz\" \\\n && tar xf /tmp/argtable-src.tar.gz -C /tmp/argtable --strip-components=1 \\\n && cp /tmp/patches/config.* /tmp/argtable \\\n && cd /tmp/argtable \\\n && ./configure --prefix=/usr \\\n && make -j 2 \\\n && make check \\\n && make DESTDIR=/tmp/argtable-build install \\\n && echo \"**** copy to /usr for comskip dependency ****\" \\\n && cp -pr /tmp/argtable-build/usr/* /usr/\nRUN echo \"***** compile comskip ****\" \\\n && git clone git://github.com/erikkaashoek/Comskip /tmp/comskip \\\n && cd /tmp/comskip \\\n && ./autogen.sh \\\n && ./configure --bindir=/usr/bin --sysconfdir=/config/comskip \\\n && make -j 2 \\\n && make DESTDIR=/tmp/comskip-build install\n#  ############# runtime stage ##############\nFROM lsiobase/alpine:3.9\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"saarg\"\n#   environment settings\nENV HOME=\"/config\"\nRUN echo \"**** install runtime packages ****\" \\\n && apk add --no-cache bsd-compat-headers bzip2 curl ffmpeg ffmpeg-libs gzip libcrypto1.1 libcurl libdvbcsa libhdhomerun-libs libssl1.1 libva libva-intel-driver libvpx libxml2 libxslt linux-headers openssl opus pcre2 perl perl-archive-zip perl-boolean perl-capture-tiny perl-cgi perl-compress-raw-zlib perl-data-dumper perl-date-manip perl-datetime perl-datetime-format-strptime perl-datetime-timezone perl-dbd-sqlite perl-dbi perl-digest-sha1 perl-doc perl-file-slurp perl-file-temp perl-file-which perl-getopt-long perl-html-parser perl-html-tree perl-http-cookies perl-io perl-io-compress perl-io-html perl-io-socket-ssl perl-io-stringy perl-json perl-libwww perl-lingua-en-numbers-ordinate perl-lingua-preferred perl-list-moreutils perl-lwp-useragent-determined perl-module-build perl-module-pluggable perl-net-ssleay perl-parse-recdescent perl-path-class perl-scalar-list-utils perl-term-progressbar perl-term-readkey perl-test-exception perl-test-requires perl-timedate perl-try-tiny perl-unicode-string perl-xml-libxml perl-xml-libxslt perl-xml-parser perl-xml-sax perl-xml-treepp perl-xml-twig perl-xml-writer python tar uriparser wget x264 x265 zlib \\\n && apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community gnu-libiconv \\\n && echo \"**** Add Picons ****\" \\\n && mkdir -p /picons \\\n && curl -o /picons.tar.bz2 -L https://lsio-ci.ams3.digitaloceanspaces.com/picons/picons.tar.bz2\n#   copy local files and buildstage artifacts\nCOPY --from=buildstage /tmp/argtable-build/usr/ /usr/\nCOPY --from=buildstage /tmp/comskip-build/usr/ /usr/\nCOPY --from=buildstage /tmp/tvheadend-build/usr/ /usr/\nCOPY --from=buildstage /tmp/xmltv-build/usr/ /usr/\nCOPY --from=buildstage /usr/local/share/man/ /usr/local/share/man/\nCOPY --from=buildstage /usr/local/share/perl5/ /usr/local/share/perl5/\nCOPY root/ /\n#   ports and volumes\nEXPOSE 9981/tcp 9982/tcp\nVOLUME /config /recordings\n","originalDockerfileUglifiedHash":"a3b7a08dafb898d25e74a154a38ca195","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/99af7c7142e968c788fe5bf4521463ca52445ee8.dockerfile"}