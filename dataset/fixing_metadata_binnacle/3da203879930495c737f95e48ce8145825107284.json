{"seed":3571799979,"processedDockerfileHash":"27e0187d8d8067d71d1cfb14a760a688","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\nMAINTAINER kfei <kfei@kfei.net>\nENV VER_LIBTORRENT=\"0.13.4\"\nENV VER_RTORRENT=\"0.9.4\"\nWORKDIR /usr/local/src\n#   This long disgusting instruction saves your image ~130 MB\nRUN build_deps=\"automake build-essential ca-certificates libc-ares-dev libcppunit-dev libtool\" ; build_deps=\"${build_deps} libssl-dev libxml2-dev libncurses5-dev pkg-config subversion wget\" ; set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${build_deps} -q -y \\\n && wget http://curl.haxx.se/download/curl-7.39.0.tar.gz \\\n && tar xzvfp curl-7.39.0.tar.gz \\\n && cd curl-7.39.0 \\\n && ./configure --enable-ares --enable-tls-srp --enable-gnu-tls --with-zlib --with-ssl \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf curl-* \\\n && ldconfig \\\n && svn --trust-server-cert checkout https://svn.code.sf.net/p/xmlrpc-c/code/stable/ xmlrpc-c \\\n && cd xmlrpc-c \\\n && ./configure --enable-libxml2-backend --disable-abyss-server --disable-cgi-server \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xmlrpc-c \\\n && ldconfig \\\n && wget -O libtorrent-$VER_LIBTORRENT.tar.gz https://github.com/rakshasa/libtorrent/archive/$VER_LIBTORRENT.tar.gz \\\n && tar xzf libtorrent-$VER_LIBTORRENT.tar.gz \\\n && cd libtorrent-$VER_LIBTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-posix-fallocate \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf libtorrent-* \\\n && ldconfig \\\n && wget -O rtorrent-$VER_RTORRENT.tar.gz https://github.com/rakshasa/rtorrent/archive/$VER_RTORRENT.tar.gz \\\n && tar xzf rtorrent-$VER_RTORRENT.tar.gz \\\n && cd rtorrent-$VER_RTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c --with-ncurses \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf rtorrent-* \\\n && ldconfig \\\n && mkdir -p /usr/share/nginx/html \\\n && cd /usr/share/nginx/html \\\n && mkdir rutorrent \\\n && curl -L -O https://github.com/Novik/ruTorrent/archive/master.tar.gz \\\n && tar xzvf master.tar.gz -C rutorrent --strip-components 1 \\\n && rm -rf *.tar.gz \\\n && apt-get purge -y --auto-remove ${build_deps} \\\n && apt-get autoremove -y\n#   Install required packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-utils libc-ares2 nginx php5-cli php5-fpm -q -y\n#   Install packages for ruTorrent plugins\nRUN apt-get update \\\n && apt-get install --no-install-recommends mediainfo unrar-free unzip -q -y\n#   For ffmpeg, which is required by the ruTorrent screenshots plugin\n#   This increases ~53 MB of the image size, remove it if you really don't need screenshots\nRUN echo \"deb http://www.deb-multimedia.org jessie main\" >> /etc/apt/sources.list \\\n && apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A401FF99368FA1F98152DE755C808C2B65558117 \\\n && apt-get update \\\n && apt-get install --no-install-recommends deb-multimedia-keyring ffmpeg -q -y\n#   IMPORTANT: Change the default login/password of ruTorrent before build\nRUN htpasswd -cb /usr/share/nginx/html/rutorrent/.htpasswd docktorrent p@ssw0rd\n#   Copy config files\nCOPY config/nginx/default /etc/nginx/sites-available/default\nCOPY config/rtorrent/.rtorrent.rc /root/.rtorrent.rc\nCOPY config/rutorrent/config.php /usr/share/nginx/html/rutorrent/conf/config.php\n#   Add the s6 binaries fs layer\nCOPY s6-1.1.3.2-musl-static.tar.xz /\n#   Service directories and the wrapper script\nCOPY rootfs /\n#   Run the wrapper script first\nENTRYPOINT [\"/usr/local/bin/docktorrent\"]\n#   Declare ports to expose\nEXPOSE 80/tcp 9527/tcp 45566/tcp\n#   Declare volumes\nVOLUME [\"/rtorrent\", \"/var/log\"]\n#   This should be removed in the latest version of Docker\nENV HOME=\"/root\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\nMAINTAINER kfei <kfei@kfei.net>\nENV VER_LIBTORRENT=\"0.13.4\"\nENV VER_RTORRENT=\"0.9.4\"\nWORKDIR /usr/local/src\n#  This long disgusting instruction saves your image ~130 MB\nRUN build_deps=\"automake build-essential ca-certificates libc-ares-dev libcppunit-dev libtool\" ; build_deps=\"${build_deps} libssl-dev libxml2-dev libncurses5-dev pkg-config subversion wget\" ; set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${build_deps} -q -y \\\n && wget http://curl.haxx.se/download/curl-7.39.0.tar.gz \\\n && tar xzvfp curl-7.39.0.tar.gz \\\n && cd curl-7.39.0 \\\n && ./configure --enable-ares --enable-tls-srp --enable-gnu-tls --with-zlib --with-ssl \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf curl-* \\\n && ldconfig \\\n && svn --trust-server-cert checkout https://svn.code.sf.net/p/xmlrpc-c/code/stable/ xmlrpc-c \\\n && cd xmlrpc-c \\\n && ./configure --enable-libxml2-backend --disable-abyss-server --disable-cgi-server \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xmlrpc-c \\\n && ldconfig \\\n && wget -O libtorrent-$VER_LIBTORRENT.tar.gz https://github.com/rakshasa/libtorrent/archive/$VER_LIBTORRENT.tar.gz \\\n && tar xzf libtorrent-$VER_LIBTORRENT.tar.gz \\\n && cd libtorrent-$VER_LIBTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-posix-fallocate \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf libtorrent-* \\\n && ldconfig \\\n && wget -O rtorrent-$VER_RTORRENT.tar.gz https://github.com/rakshasa/rtorrent/archive/$VER_RTORRENT.tar.gz \\\n && tar xzf rtorrent-$VER_RTORRENT.tar.gz \\\n && cd rtorrent-$VER_RTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c --with-ncurses \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf rtorrent-* \\\n && ldconfig \\\n && mkdir -p /usr/share/nginx/html \\\n && cd /usr/share/nginx/html \\\n && mkdir rutorrent \\\n && curl -L -O https://github.com/Novik/ruTorrent/archive/master.tar.gz \\\n && tar xzvf master.tar.gz -C rutorrent --strip-components 1 \\\n && rm -rf *.tar.gz \\\n && apt-get purge -y --auto-remove ${build_deps} \\\n && apt-get autoremove -y\n#  Install required packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-utils libc-ares2 nginx php5-cli php5-fpm -q -y\n#  Install packages for ruTorrent plugins\nRUN apt-get update \\\n && apt-get install --no-install-recommends mediainfo unrar-free unzip -q -y\n#  For ffmpeg, which is required by the ruTorrent screenshots plugin\n#  This increases ~53 MB of the image size, remove it if you really don't need screenshots\nRUN echo \"deb http://www.deb-multimedia.org jessie main\" >> /etc/apt/sources.list \\\n && apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A401FF99368FA1F98152DE755C808C2B65558117 \\\n && apt-get update \\\n && apt-get install --no-install-recommends deb-multimedia-keyring ffmpeg -q -y\n#  IMPORTANT: Change the default login/password of ruTorrent before build\nRUN htpasswd -cb /usr/share/nginx/html/rutorrent/.htpasswd docktorrent p@ssw0rd\n#  Copy config files\nCOPY config/nginx/default /etc/nginx/sites-available/default\nCOPY config/rtorrent/.rtorrent.rc /root/.rtorrent.rc\nCOPY config/rutorrent/config.php /usr/share/nginx/html/rutorrent/conf/config.php\n#  Add the s6 binaries fs layer\nADD s6-1.1.3.2-musl-static.tar.xz /\n#  Service directories and the wrapper script\nCOPY rootfs /\n#  Run the wrapper script first\nENTRYPOINT [\"/usr/local/bin/docktorrent\"]\n#  Declare ports to expose\nEXPOSE 80/tcp 9527/tcp 45566/tcp\n#  Declare volumes\nVOLUME [\"/rtorrent\", \"/var/log\"]\n#  This should be removed in the latest version of Docker\nENV HOME=\"/root\"\n","injectedSmells":[],"originalDockerfileHash":"58488e75580a57f1b3149a11d4e557ab","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\nMAINTAINER kfei <kfei@kfei.net>\nENV VER_LIBTORRENT=\"0.13.4\"\nENV VER_RTORRENT=\"0.9.4\"\nWORKDIR /usr/local/src\n#   This long disgusting instruction saves your image ~130 MB\nRUN build_deps=\"automake build-essential ca-certificates libc-ares-dev libcppunit-dev libtool\" ; build_deps=\"${build_deps} libssl-dev libxml2-dev libncurses5-dev pkg-config subversion wget\" ; set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${build_deps} -q -y \\\n && wget http://curl.haxx.se/download/curl-7.39.0.tar.gz \\\n && tar xzvfp curl-7.39.0.tar.gz \\\n && cd curl-7.39.0 \\\n && ./configure --enable-ares --enable-tls-srp --enable-gnu-tls --with-zlib --with-ssl \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf curl-* \\\n && ldconfig \\\n && svn --trust-server-cert checkout https://svn.code.sf.net/p/xmlrpc-c/code/stable/ xmlrpc-c \\\n && cd xmlrpc-c \\\n && ./configure --enable-libxml2-backend --disable-abyss-server --disable-cgi-server \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xmlrpc-c \\\n && ldconfig \\\n && wget -O libtorrent-$VER_LIBTORRENT.tar.gz https://github.com/rakshasa/libtorrent/archive/$VER_LIBTORRENT.tar.gz \\\n && tar xzf libtorrent-$VER_LIBTORRENT.tar.gz \\\n && cd libtorrent-$VER_LIBTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-posix-fallocate \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf libtorrent-* \\\n && ldconfig \\\n && wget -O rtorrent-$VER_RTORRENT.tar.gz https://github.com/rakshasa/rtorrent/archive/$VER_RTORRENT.tar.gz \\\n && tar xzf rtorrent-$VER_RTORRENT.tar.gz \\\n && cd rtorrent-$VER_RTORRENT \\\n && ./autogen.sh \\\n && ./configure --with-xmlrpc-c --with-ncurses \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf rtorrent-* \\\n && ldconfig \\\n && mkdir -p /usr/share/nginx/html \\\n && cd /usr/share/nginx/html \\\n && mkdir rutorrent \\\n && curl -L -O https://github.com/Novik/ruTorrent/archive/master.tar.gz \\\n && tar xzvf master.tar.gz -C rutorrent --strip-components 1 \\\n && rm -rf *.tar.gz \\\n && apt-get purge -y --auto-remove ${build_deps} \\\n && apt-get autoremove -y\n#   Install required packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-utils libc-ares2 nginx php5-cli php5-fpm -q -y\n#   Install packages for ruTorrent plugins\nRUN apt-get update \\\n && apt-get install --no-install-recommends mediainfo unrar-free unzip -q -y\n#   For ffmpeg, which is required by the ruTorrent screenshots plugin\n#   This increases ~53 MB of the image size, remove it if you really don't need screenshots\nRUN echo \"deb http://www.deb-multimedia.org jessie main\" >> /etc/apt/sources.list \\\n && apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A401FF99368FA1F98152DE755C808C2B65558117 \\\n && apt-get update \\\n && apt-get install --no-install-recommends deb-multimedia-keyring ffmpeg -q -y\n#   IMPORTANT: Change the default login/password of ruTorrent before build\nRUN htpasswd -cb /usr/share/nginx/html/rutorrent/.htpasswd docktorrent p@ssw0rd\n#   Copy config files\nCOPY config/nginx/default /etc/nginx/sites-available/default\nCOPY config/rtorrent/.rtorrent.rc /root/.rtorrent.rc\nCOPY config/rutorrent/config.php /usr/share/nginx/html/rutorrent/conf/config.php\n#   Add the s6 binaries fs layer\nADD s6-1.1.3.2-musl-static.tar.xz /\n#   Service directories and the wrapper script\nCOPY rootfs /\n#   Run the wrapper script first\nENTRYPOINT [\"/usr/local/bin/docktorrent\"]\n#   Declare ports to expose\nEXPOSE 80/tcp 9527/tcp 45566/tcp\n#   Declare volumes\nVOLUME [\"/rtorrent\", \"/var/log\"]\n#   This should be removed in the latest version of Docker\nENV HOME=\"/root\"\n","originalDockerfileUglifiedHash":"df397cd3259dc214e738fcdea40f460d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3da203879930495c737f95e48ce8145825107284.dockerfile"}