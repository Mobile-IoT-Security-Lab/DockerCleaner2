{"seed":1049184328,"processedDockerfileHash":"fe88567851073be83574f9fbaefa1cda","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\nMAINTAINER MacArthur Lab\n#   install commmon utilities\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-utils bzip2 curl emacs git htop less nano wget xterm -y --fix-missing\n#   install python\nRUN apt-get install --no-install-recommends python-dev -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install pip==23.1 setuptools==67.6.1 --upgrade\n#   install dependencies of the HaploPainter.pl script used to generate static pedigree images\nRUN apt-get update \\\n && apt-get install --no-install-recommends perl build-essential libcairo2-dev libglib2.0-bin libglib2.0-0 libgtk2.0-dev libpango1.0-dev -y\nRUN wget https://raw.github.com/miyagawa/cpanminus/master/cpanm -O /usr/bin/cpanm \\\n && chmod +x /usr/bin/cpanm \\\n && cpanm --notest Cairo DBI Gtk2 Tk Sort::Naturally\n#   install dev dependencies for react, javascript development. These are not needed at runtime.\nRUN apt-get update \\\n && curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get install --no-install-recommends nodejs -y\n#   install database clients for debugging\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb http://repo.mongodb.org/apt/debian jessie/mongodb-org/3.4 main\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends mongodb-org-tools mongodb-org-shell -y\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ jessie-pgdg main' >> /etc/apt/sources.list.d/postgresql.list \\\n && wget --no-check-certificate -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O- | apt-key add - \\\n && apt-get update \\\n && apt-get install --no-install-recommends postgresql postgresql-client -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends redis-tools -y\n#   install gcloud tools\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && curl https://sdk.cloud.google.com | bash \\\n && apt-get update \\\n && apt-get install --no-install-recommends gcc python-dev python-setuptools libffi-dev libssl-dev -y \\\n && pip install gsutil==5.23\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install --no-install-recommends google-cloud-sdk -y\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/$( curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl\n#   DISABLE_CACHE work-around to force git pull on every docker build, based on https://github.com/docker/docker/issues/1996\nARG DISABLE_CACHE=1\n#   update seqr repo\nRUN git clone -q https://github.com/macarthur-lab/seqr\nWORKDIR /seqr\n#   install seqr dependencies\nRUN pip install -r requirements.txt\nARG SEQR_SERVICE_PORT\nENV SEQR_SERVICE_PORT=\"$SEQR_SERVICE_PORT\"\nEXPOSE $SEQR_SERVICE_PORT\nENV PYTHONPATH=\"/seqr:/seqr_settings\"\nENV TERM=\"xterm\"\nRUN mkdir /seqr_settings\nCOPY readiness_probe /\nCOPY bin/*.sh /usr/local/bin/\nCOPY gitconfig /root/.gitconfig\nCOPY config/*.py /seqr_settings/\nCOPY bashrc /root/.bashrc\nCOPY entrypoint.sh /\nWORKDIR /seqr\nCMD [\"/entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\nMAINTAINER MacArthur Lab\n#  install commmon utilities\nRUN apt-get update \\\n && apt-get install apt-utils bzip2 curl emacs git htop less nano wget xterm -y --fix-missing\n#  install python\nRUN apt-get install python-dev -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install pip setuptools --upgrade\n#  install dependencies of the HaploPainter.pl script used to generate static pedigree images\nRUN apt-get update \\\n && apt-get install perl build-essential libcairo2-dev libglib2.0-bin libglib2.0-0 libgtk2.0-dev libpango1.0-dev -y\nRUN wget https://raw.github.com/miyagawa/cpanminus/master/cpanm -O /usr/bin/cpanm \\\n && chmod +x /usr/bin/cpanm \\\n && cpanm --notest Cairo DBI Gtk2 Tk Sort::Naturally\n#  install dev dependencies for react, javascript development. These are not needed at runtime.\nRUN apt-get update \\\n && curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get install nodejs -y\n#  install database clients for debugging\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb http://repo.mongodb.org/apt/debian jessie/mongodb-org/3.4 main\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install mongodb-org-tools mongodb-org-shell -y\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ jessie-pgdg main' >> /etc/apt/sources.list.d/postgresql.list \\\n && wget --no-check-certificate -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O- | apt-key add - \\\n && apt-get update \\\n && apt-get install postgresql postgresql-client -y\nRUN apt-get update \\\n && apt-get install redis-tools -y\n#  install gcloud tools\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && curl https://sdk.cloud.google.com | bash \\\n && apt-get update \\\n && apt-get install gcc python-dev python-setuptools libffi-dev libssl-dev -y \\\n && pip install gsutil\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install google-cloud-sdk -y\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/$( curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl\n#  DISABLE_CACHE work-around to force git pull on every docker build, based on https://github.com/docker/docker/issues/1996\nARG DISABLE_CACHE=1\n#  update seqr repo\nRUN git clone -q https://github.com/macarthur-lab/seqr\nWORKDIR /seqr\n#  install seqr dependencies\nRUN pip install -r requirements.txt\nARG SEQR_SERVICE_PORT\nENV SEQR_SERVICE_PORT=\"$SEQR_SERVICE_PORT\"\nEXPOSE $SEQR_SERVICE_PORT\nENV PYTHONPATH=\"/seqr:/seqr_settings\"\nENV TERM=\"xterm\"\nRUN mkdir /seqr_settings\nCOPY readiness_probe /\nCOPY bin/*.sh /usr/local/bin/\nCOPY gitconfig /root/.gitconfig\nCOPY config/*.py /seqr_settings/\nCOPY bashrc /root/.bashrc\nCOPY entrypoint.sh /\nWORKDIR /seqr\nCMD [\"/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"3798dd8ac6cae0ac988c64b43e894848","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\nMAINTAINER MacArthur Lab\n#   install commmon utilities\nRUN apt-get update \\\n && apt-get install apt-utils bzip2 curl emacs git htop less nano wget xterm -y --fix-missing\n#   install python\nRUN apt-get install python-dev -y \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py \\\n && pip install pip setuptools --upgrade\n#   install dependencies of the HaploPainter.pl script used to generate static pedigree images\nRUN apt-get update \\\n && apt-get install perl build-essential libcairo2-dev libglib2.0-bin libglib2.0-0 libgtk2.0-dev libpango1.0-dev -y\nRUN wget https://raw.github.com/miyagawa/cpanminus/master/cpanm -O /usr/bin/cpanm \\\n && chmod +x /usr/bin/cpanm \\\n && cpanm --notest Cairo DBI Gtk2 Tk Sort::Naturally\n#   install dev dependencies for react, javascript development. These are not needed at runtime.\nRUN apt-get update \\\n && curl -sL https://deb.nodesource.com/setup_8.x | bash - \\\n && apt-get install nodejs -y\n#   install database clients for debugging\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb http://repo.mongodb.org/apt/debian jessie/mongodb-org/3.4 main\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install mongodb-org-tools mongodb-org-shell -y\nRUN echo 'deb http://apt.postgresql.org/pub/repos/apt/ jessie-pgdg main' >> /etc/apt/sources.list.d/postgresql.list \\\n && wget --no-check-certificate -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O- | apt-key add - \\\n && apt-get update \\\n && apt-get install postgresql postgresql-client -y\nRUN apt-get update \\\n && apt-get install redis-tools -y\n#   install gcloud tools\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && curl https://sdk.cloud.google.com | bash \\\n && apt-get update \\\n && apt-get install gcc python-dev python-setuptools libffi-dev libssl-dev -y \\\n && pip install gsutil\nRUN CLOUDSDK_CORE_DISABLE_PROMPTS=1 \\\n && CLOUD_SDK_REPO=\"cloud-sdk-$( lsb_release -c -s ;)\" \\\n && echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" > /etc/apt/sources.list.d/google-cloud-sdk.list \\\n && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n && apt-get update \\\n && apt-get install google-cloud-sdk -y\nRUN curl -LO https://storage.googleapis.com/kubernetes-release/release/$( curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ;)/bin/linux/amd64/kubectl \\\n && chmod +x ./kubectl \\\n && mv ./kubectl /usr/local/bin/kubectl\n#   DISABLE_CACHE work-around to force git pull on every docker build, based on https://github.com/docker/docker/issues/1996\nARG DISABLE_CACHE=1\n#   update seqr repo\nRUN git clone -q https://github.com/macarthur-lab/seqr\nWORKDIR /seqr\n#   install seqr dependencies\nRUN pip install -r requirements.txt\nARG SEQR_SERVICE_PORT\nENV SEQR_SERVICE_PORT=\"$SEQR_SERVICE_PORT\"\nEXPOSE $SEQR_SERVICE_PORT\nENV PYTHONPATH=\"/seqr:/seqr_settings\"\nENV TERM=\"xterm\"\nRUN mkdir /seqr_settings\nCOPY readiness_probe /\nCOPY bin/*.sh /usr/local/bin/\nCOPY gitconfig /root/.gitconfig\nCOPY config/*.py /seqr_settings/\nCOPY bashrc /root/.bashrc\nCOPY entrypoint.sh /\nWORKDIR /seqr\nCMD [\"/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"661bd68486fb304de7bd4bc06a66f4c6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c394bd9e3959e0638e4435bf3567d302dd28acff.dockerfile"}