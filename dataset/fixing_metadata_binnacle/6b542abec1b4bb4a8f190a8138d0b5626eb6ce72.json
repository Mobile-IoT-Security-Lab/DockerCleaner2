{"seed":3903368033,"processedDockerfileHash":"1a4118c1d315c3e1af899affd8cfc6d6","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck"],"processedDockerfile":"FROM laristra/flecsi-third-party:fedora\nARG COVERAGE\nARG SONARQUBE\nARG SONARQUBE_TOKEN\nARG SONARQUBE_GITHUB_TOKEN\nARG CC\n#  for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\n#   Cleans and install \nENV CLOG_ENABLE_STDLOG=\"0\"\nRUN rm -rf /home/flecsi/.ccache\nCOPY flecsph /home/flecsi/flecsph\nCOPY ccache/ /home/flecsi/.ccache\nCOPY sonar/ /home/flecsi/.sonar\nUSER root\nRUN chown -R flecsi:flecsi /home/flecsi/flecsph /home/flecsi/.ccache /home/flecsi/.sonar\nRUN yum install -y which ; exit 0\nRUN yum install -y gsl-devel ; exit 0\nRUN apt-get install --no-install-recommends gsl-bin libgsl0-dev -y ; exit 0\n#  build flecsi\nRUN cd /home/flecsi \\\n && git clone -b feature/flecsph --depth 1 --recursive https://github.com/laristra/flecsi flecsi \\\n && cd flecsi \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DFLECSI_RUNTIME_MODEL=mpi -DENABLE_CLOG=OFF -DENABLE_MPI=ON -DENABLE_OPENMP=ON -DENABLE_MPI_CXX_BINDINGS=ON -DENABLE_CONFORMANCE_STANDARD=c++17 -DLegion_ROOT=/usr/local -DCMAKE_INSTALL_PREFIX=/usr/local -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_FLECSIT=OFF -DENABLE_FLECSI_TUTORIAL=OFF \\\n && make -j4 \\\n && make install\n#   Buidl FleCSPH \nENV LD_LIBRARY_PATH=\"/usr/local/lib64/:/usr/local/lib/:${LD_LIBRARY_PATH}\"\nUSER flecsi \nRUN cd /home/flecsi/flecsph \\\n && mkdir build \\\n && cd build \\\n && ccache -z \\\n && cmake -DENABLE_MPI=ON -DENABLE_UNIT_TESTS=ON -DENABLE_OPENMP=ON -DENABLE_DOXYGEN=ON -DCMAKE_CXX_FLAGS=\"-fpermissive\" -DCXX_CONFORMANCE_STANDARD=c++17 -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_CLOG=ON -DENABLE_COLOR_UNIT_TESTS=ON -DFleCSI_INCLUDE_DIR=/usr/local/include -DFleCSI_RUNTIME=/usr/local/share/FleCSI/runtime -DFleCSI_LIBRARY=/usr/local/lib*/libFleCSI.so -DENABLE_MPI_THREAD_MULITPLE=ON ${COVERAGE:+-DENABLE_COVERAGE_BUILD=ON} .. \\\n && HDF5_USE_SHLIB=yes ${SONARQUBE:+build-wrapper-linux-x86-64 --out-dir bw-output} make -j2 \\\n && ccache -s \\\n && make doxygen \\\n && make install DESTDIR=${PWD}/install \\\n && rm -rf ${PWD}/install \\\n && make test ARGS=\"-V\"\n#   COVERAGE & SONARQUE \nWORKDIR /home/flecsi/flecsph\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then $HOME/.local/bin/codecov -F \"${CC}\" --gcov-exec \"llvm-cov gcov\" ; else $HOME/.local/bin/codecov -F \"${CC}\" ; fi ; fi\nRUN if [ ${SONARQUBE} ] ; then sonar-scanner -Dsonar.projectKey=${TRAVIS_REPO_SLUG##*/} -Dsonar.projectName=${TRAVIS_REPO_SLUG#*/} -Dsonar.projectVersion=${TRAVIS_COMMIT} -Dsonar.branch=/${TRAVIS_BRANCH} -Dsonar.links.homepage=http://${TRAVIS_REPO_SLUG%%/*}.github.io/${TRAVIS_REPO_SLUG#*/} -Dsonar.links.ci=https://travis-ci.org/${TRAVIS_REPO_SLUG} -Dsonar.links.scm=https://github.com/${TRAVIS_REPO_SLUG} -Dsonar.links.issue=https://github.com/${TRAVIS_REPO_SLUG}/issues -Dsonar.sources=. -Dsonar.exclusions=build/CMakeFiles/**,cinch/**,build/doc/doxygen/**,build/include/** -Dsonar.cfamily.build-wrapper-output=build/bw-output -Dsonar.cfamily.gcov.reportsPath=. -Dsonar.host.url=https://sonarcloud.io -Dsonar.organization=${TRAVIS_REPO_SLUG%%/*} $( [ ${TRAVIS_PULL_REQUEST} != false ] \\\n && echo -Dsonar.analysis.mode=preview -Dsonar.github.pullRequest=${TRAVIS_PULL_REQUEST} -Dsonar.github.repository=${TRAVIS_REPO_SLUG} -Dsonar.github.oauth=${SONARQUBE_GITHUB_TOKEN} ;) -Dsonar.login=${SONARQUBE_TOKEN} ; fi\nWORKDIR /home/flecsi\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM laristra/flecsi-third-party:fedora\nARG COVERAGE\nARG SONARQUBE\nARG SONARQUBE_TOKEN\nARG SONARQUBE_GITHUB_TOKEN\nARG CC\n# for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\n#  Cleans and install \nENV CLOG_ENABLE_STDLOG=\"0\"\nRUN rm -rf /home/flecsi/.ccache\nCOPY flecsph /home/flecsi/flecsph\nCOPY ccache/ /home/flecsi/.ccache\nCOPY sonar/ /home/flecsi/.sonar\nUSER root\nRUN chown -R flecsi:flecsi /home/flecsi/flecsph /home/flecsi/.ccache /home/flecsi/.sonar\nRUN yum install -y which ; exit 0\nRUN yum install -y gsl-devel ; exit 0\nRUN apt-get install gsl-bin libgsl0-dev -y ; exit 0\n# build flecsi\nRUN cd /home/flecsi \\\n && git clone -b feature/flecsph --depth 1 --recursive https://github.com/laristra/flecsi flecsi \\\n && cd flecsi \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DFLECSI_RUNTIME_MODEL=mpi -DENABLE_CLOG=OFF -DENABLE_MPI=ON -DENABLE_OPENMP=ON -DENABLE_MPI_CXX_BINDINGS=ON -DENABLE_CONFORMANCE_STANDARD=c++17 -DLegion_ROOT=/usr/local -DCMAKE_INSTALL_PREFIX=/usr/local -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_FLECSIT=OFF -DENABLE_FLECSI_TUTORIAL=OFF \\\n && make -j4 \\\n && make install\n#  Buidl FleCSPH \nENV LD_LIBRARY_PATH=\"/usr/local/lib64/:/usr/local/lib/:${LD_LIBRARY_PATH}\"\nUSER flecsi \nRUN cd /home/flecsi/flecsph \\\n && mkdir build \\\n && cd build \\\n && ccache -z \\\n && cmake -DENABLE_MPI=ON -DENABLE_UNIT_TESTS=ON -DENABLE_OPENMP=ON -DENABLE_DOXYGEN=ON -DCMAKE_CXX_FLAGS=\"-fpermissive\" -DCXX_CONFORMANCE_STANDARD=c++17 -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_CLOG=ON -DENABLE_COLOR_UNIT_TESTS=ON -DFleCSI_INCLUDE_DIR=/usr/local/include -DFleCSI_RUNTIME=/usr/local/share/FleCSI/runtime -DFleCSI_LIBRARY=/usr/local/lib*/libFleCSI.so -DENABLE_MPI_THREAD_MULITPLE=ON ${COVERAGE:+-DENABLE_COVERAGE_BUILD=ON} .. \\\n && HDF5_USE_SHLIB=yes ${SONARQUBE:+build-wrapper-linux-x86-64 --out-dir bw-output} make -j2 \\\n && ccache -s \\\n && make doxygen \\\n && make install DESTDIR=${PWD}/install \\\n && rm -rf ${PWD}/install \\\n && make test ARGS=\"-V\"\n#  COVERAGE & SONARQUE \nWORKDIR /home/flecsi/flecsph\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then $HOME/.local/bin/codecov -F \"${CC}\" --gcov-exec \"llvm-cov gcov\" ; else $HOME/.local/bin/codecov -F \"${CC}\" ; fi ; fi\nRUN if [ ${SONARQUBE} ] ; then sonar-scanner -Dsonar.projectKey=${TRAVIS_REPO_SLUG##*/} -Dsonar.projectName=${TRAVIS_REPO_SLUG#*/} -Dsonar.projectVersion=${TRAVIS_COMMIT} -Dsonar.branch=/${TRAVIS_BRANCH} -Dsonar.links.homepage=http://${TRAVIS_REPO_SLUG%%/*}.github.io/${TRAVIS_REPO_SLUG#*/} -Dsonar.links.ci=https://travis-ci.org/${TRAVIS_REPO_SLUG} -Dsonar.links.scm=https://github.com/${TRAVIS_REPO_SLUG} -Dsonar.links.issue=https://github.com/${TRAVIS_REPO_SLUG}/issues -Dsonar.sources=. -Dsonar.exclusions=build/CMakeFiles/**,cinch/**,build/doc/doxygen/**,build/include/** -Dsonar.cfamily.build-wrapper-output=build/bw-output -Dsonar.cfamily.gcov.reportsPath=. -Dsonar.host.url=https://sonarcloud.io -Dsonar.organization=${TRAVIS_REPO_SLUG%%/*} $( [ ${TRAVIS_PULL_REQUEST} != false ] \\\n && echo -Dsonar.analysis.mode=preview -Dsonar.github.pullRequest=${TRAVIS_PULL_REQUEST} -Dsonar.github.repository=${TRAVIS_REPO_SLUG} -Dsonar.github.oauth=${SONARQUBE_GITHUB_TOKEN} ;) -Dsonar.login=${SONARQUBE_TOKEN} ; fi\nWORKDIR /home/flecsi\n","injectedSmells":[],"originalDockerfileHash":"249ee7c43cbc533d71a0aaace8a8ab61","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM laristra/flecsi-third-party:fedora\nARG COVERAGE\nARG SONARQUBE\nARG SONARQUBE_TOKEN\nARG SONARQUBE_GITHUB_TOKEN\nARG CC\n#  for coverage\nARG CI\nARG TRAVIS\nARG TRAVIS_BRANCH\nARG TRAVIS_JOB_NUMBER\nARG TRAVIS_PULL_REQUEST\nARG TRAVIS_JOB_ID\nARG TRAVIS_TAG\nARG TRAVIS_REPO_SLUG\nARG TRAVIS_COMMIT\nARG TRAVIS_OS_NAME\n#   Cleans and install \nENV CLOG_ENABLE_STDLOG=\"0\"\nRUN rm -rf /home/flecsi/.ccache\nCOPY flecsph /home/flecsi/flecsph\nCOPY ccache/ /home/flecsi/.ccache\nCOPY sonar/ /home/flecsi/.sonar\nUSER root\nRUN chown -R flecsi:flecsi /home/flecsi/flecsph /home/flecsi/.ccache /home/flecsi/.sonar\nRUN yum install -y which ; exit 0\nRUN yum install -y gsl-devel ; exit 0\nRUN apt-get install gsl-bin libgsl0-dev -y ; exit 0\n#  build flecsi\nRUN cd /home/flecsi \\\n && git clone -b feature/flecsph --depth 1 --recursive https://github.com/laristra/flecsi flecsi \\\n && cd flecsi \\\n && mkdir build \\\n && cd build \\\n && cmake .. -DFLECSI_RUNTIME_MODEL=mpi -DENABLE_CLOG=OFF -DENABLE_MPI=ON -DENABLE_OPENMP=ON -DENABLE_MPI_CXX_BINDINGS=ON -DENABLE_CONFORMANCE_STANDARD=c++17 -DLegion_ROOT=/usr/local -DCMAKE_INSTALL_PREFIX=/usr/local -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_FLECSIT=OFF -DENABLE_FLECSI_TUTORIAL=OFF \\\n && make -j4 \\\n && make install\n#   Buidl FleCSPH \nENV LD_LIBRARY_PATH=\"/usr/local/lib64/:/usr/local/lib/:${LD_LIBRARY_PATH}\"\nUSER flecsi \nRUN cd /home/flecsi/flecsph \\\n && mkdir build \\\n && cd build \\\n && ccache -z \\\n && cmake -DENABLE_MPI=ON -DENABLE_UNIT_TESTS=ON -DENABLE_OPENMP=ON -DENABLE_DOXYGEN=ON -DCMAKE_CXX_FLAGS=\"-fpermissive\" -DCXX_CONFORMANCE_STANDARD=c++17 -DENABLE_BOOST_PREPROCESSOR=ON -DENABLE_CLOG=ON -DENABLE_COLOR_UNIT_TESTS=ON -DFleCSI_INCLUDE_DIR=/usr/local/include -DFleCSI_RUNTIME=/usr/local/share/FleCSI/runtime -DFleCSI_LIBRARY=/usr/local/lib*/libFleCSI.so -DENABLE_MPI_THREAD_MULITPLE=ON ${COVERAGE:+-DENABLE_COVERAGE_BUILD=ON} .. \\\n && HDF5_USE_SHLIB=yes ${SONARQUBE:+build-wrapper-linux-x86-64 --out-dir bw-output} make -j2 \\\n && ccache -s \\\n && make doxygen \\\n && make install DESTDIR=${PWD}/install \\\n && rm -rf ${PWD}/install \\\n && make test ARGS=\"-V\"\n#   COVERAGE & SONARQUE \nWORKDIR /home/flecsi/flecsph\nRUN if [ ${COVERAGE} ] ; then if [ ${CC} = clang ] ; then $HOME/.local/bin/codecov -F \"${CC}\" --gcov-exec \"llvm-cov gcov\" ; else $HOME/.local/bin/codecov -F \"${CC}\" ; fi ; fi\nRUN if [ ${SONARQUBE} ] ; then sonar-scanner -Dsonar.projectKey=${TRAVIS_REPO_SLUG##*/} -Dsonar.projectName=${TRAVIS_REPO_SLUG#*/} -Dsonar.projectVersion=${TRAVIS_COMMIT} -Dsonar.branch=/${TRAVIS_BRANCH} -Dsonar.links.homepage=http://${TRAVIS_REPO_SLUG%%/*}.github.io/${TRAVIS_REPO_SLUG#*/} -Dsonar.links.ci=https://travis-ci.org/${TRAVIS_REPO_SLUG} -Dsonar.links.scm=https://github.com/${TRAVIS_REPO_SLUG} -Dsonar.links.issue=https://github.com/${TRAVIS_REPO_SLUG}/issues -Dsonar.sources=. -Dsonar.exclusions=build/CMakeFiles/**,cinch/**,build/doc/doxygen/**,build/include/** -Dsonar.cfamily.build-wrapper-output=build/bw-output -Dsonar.cfamily.gcov.reportsPath=. -Dsonar.host.url=https://sonarcloud.io -Dsonar.organization=${TRAVIS_REPO_SLUG%%/*} $( [ ${TRAVIS_PULL_REQUEST} != false ] \\\n && echo -Dsonar.analysis.mode=preview -Dsonar.github.pullRequest=${TRAVIS_PULL_REQUEST} -Dsonar.github.repository=${TRAVIS_REPO_SLUG} -Dsonar.github.oauth=${SONARQUBE_GITHUB_TOKEN} ;) -Dsonar.login=${SONARQUBE_TOKEN} ; fi\nWORKDIR /home/flecsi\n","originalDockerfileUglifiedHash":"f3ce01806b163c185ad7e901698abccc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6b542abec1b4bb4a8f190a8138d0b5626eb6ce72.dockerfile"}