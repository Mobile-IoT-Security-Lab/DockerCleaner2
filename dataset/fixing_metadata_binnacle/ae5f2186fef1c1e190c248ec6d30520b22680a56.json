{"seed":1808174192,"processedDockerfileHash":"ddf111dc4b3d01582509c38aa382e1ed","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install --no-install-recommends gcc=4:7.4.0-1ubuntu2.3 g++=4:7.4.0-1ubuntu2.3 perl=5.26.1-6ubuntu0.6 python=2.7.15~rc1-1 automake=1:1.15.1-3ubuntu2 make=4.1-9.1ubuntu1 cmake=3.10.2-1ubuntu2.18.04.2 less=487-0.1 vim=2:8.0.1453-1ubuntu1.11 wget=1.19.4-1ubuntu2.2 git=1:2.17.1-1ubuntu0.17 curl=7.58.0-2ubuntu3.24 libdb-dev=1:5.3.21~exp1ubuntu2 zlib1g-dev=1:1.2.11.dfsg-0ubuntu2.2 bzip2=1.0.6-8.1ubuntu0.2 libncurses5-dev=6.1-1ubuntu1.18.04 texlive-latex-base=2017.20180305-1 default-jre=2:1.11-68ubuntu1~18.04.1 python-pip=9.0.1-2.3~ubuntu1.18.04.8 python-dev=2.7.15~rc1-1 gfortran=4:7.4.0-1ubuntu2.3 build-essential=12.4ubuntu1 libghc-zlib-dev=0.6.1.2-1build1 libncurses-dev libbz2-dev=1.0.6-8.1ubuntu0.2 liblzma-dev=5.2.2-1.3ubuntu0.1 libpcre3-dev=2:8.39-9ubuntu0.1 libxml2-dev=2.9.4+dfsg1-6.1ubuntu1.8 libblas-dev=3.7.1-4ubuntu1 gfortran=4:7.4.0-1ubuntu2.3 git=1:2.17.1-1ubuntu0.17 unzip=6.0-21ubuntu1.2 ftp=0.17-34 libzmq3-dev=4.2.5-1ubuntu0.2 nano=2.9.3-2 ftp=0.17-34 fort77=1.15-11 libreadline-dev=7.0-3 libcurl4-openssl-dev=7.58.0-2ubuntu3.24 libx11-dev=2:1.6.4-3ubuntu0.4 libxt-dev=1:1.1.5-1 x11-common=1:7.7+19ubuntu7.1 libcairo2-dev=1.15.10-2ubuntu0.1 libpng-dev=1.6.34-1ubuntu0.18.04.2 libreadline6-dev libjpeg8-dev=8c-2ubuntu8 pkg-config=0.29.1-0ubuntu2 build-essential=12.4ubuntu1 cmake=3.10.2-1ubuntu2.18.04.2 gsl-bin=2.4+dfsg-6 libgsl0-dev libeigen3-dev=3.3.4-4 libboost-all-dev=1.65.1.0ubuntu1 libssl-dev=1.1.1-1ubuntu2.1~18.04.21 libcairo2-dev=1.15.10-2ubuntu0.1 libxt-dev=1:1.1.5-1 libgtk2.0-dev=2.24.32-1ubuntu1 libcairo2-dev=1.15.10-2ubuntu0.1 xvfb=2:1.19.6-1ubuntu4.14 xauth=1:1.0.10-1 xfonts-base=1:1.0.4+nmu1 apt-utils=1.6.14 apt-transport-https=1.6.14 gdebi-core=0.9.5.7+nmu2 locales=2.27-3ubuntu1.6 -y\nCOPY installR.sh /usr/local/src\nRUN /usr/local/src/installR.sh\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nCOPY install_rstudio_server.sh /usr/local/src\nRUN /usr/local/src/install_rstudio_server.sh\n#  ## User setup\nRUN groupadd -g 2000 training \\\n && useradd -m -u 2000 -g 2000 training\nRUN echo 'training:training' | chpasswd\nRUN chsh -s /bin/bash training\nENV HOME=\"/home/training\"\nRUN echo \"alias ll='ls -la -G'\" >> /home/training/.profile\nRUN usermod -G training,www-data training\nRUN usermod -a -G sudo training\nRUN apt-get install --no-install-recommends openssh-server=1:7.6p1-4ubuntu0.7 libncurses5-dev=6.1-1ubuntu1.18.04 apache2=2.4.29-1ubuntu4.27 supervisor=3.3.1-1.1 -y\n#  ########\n#  ## GateOne SSH interface\n#  ########\nRUN git clone https://github.com/liftoff/GateOne/ \\\n && cd GateOne \\\n && python setup.py install \\\n && pip install tornado==4.5.3 \\\n && python run_gateone.py --configure\nEXPOSE 22/tcp 80/tcp 443/tcp 8787/tcp\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"devtools\", dep = TRUE)'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fastcluster\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"useful\", dep = TRUE);'\n#  #\n#  # Seurat 2.0\n#  #\nRUN apt-get install --no-install-recommends libhdf5-dev=1.10.0-patch1+docs-4 -y\nRUN Rscript -e 'install.packages(\"/usr/local/src/caTools_1.17.1.mod.tar.gz\", repos=NULL, type=\"source\");'\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n#   needed for combat\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"sva\", dep = TRUE)'\n#   needed for seurat clustering (hopefully not in a future seurat release)\nRUN chmod 777 /usr/local/lib/R/site-library\n#  #################\n#  ###  singleCellTK\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"singleCellTK\", dep = TRUE);'\n#  # auto-run setup\nCOPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisor/conf.d/supervisord.conf\"]\n#  ###########################\n#  # more seurat configuration\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n#  # for Matan:\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"AUCell\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"destiny\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fgsea\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"DropletUtils\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"precrec\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"pbapply\", dep = TRUE);'\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install gcc g++ perl python automake make cmake less vim wget git curl libdb-dev zlib1g-dev bzip2 libncurses5-dev texlive-latex-base default-jre python-pip python-dev gfortran build-essential libghc-zlib-dev libncurses-dev libbz2-dev liblzma-dev libpcre3-dev libxml2-dev libblas-dev gfortran git unzip ftp libzmq3-dev nano ftp fort77 libreadline-dev libcurl4-openssl-dev libx11-dev libxt-dev x11-common libcairo2-dev libpng-dev libreadline6-dev libjpeg8-dev pkg-config build-essential cmake gsl-bin libgsl0-dev libeigen3-dev libboost-all-dev libssl-dev libcairo2-dev libxt-dev libgtk2.0-dev libcairo2-dev xvfb xauth xfonts-base apt-utils apt-transport-https gdebi-core locales -y\nCOPY installR.sh /usr/local/src\nRUN /usr/local/src/installR.sh\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nCOPY install_rstudio_server.sh /usr/local/src\nRUN /usr/local/src/install_rstudio_server.sh\n# ## User setup\nRUN groupadd -g 2000 training \\\n && useradd -m -u 2000 -g 2000 training\nRUN echo 'training:training' | chpasswd\nRUN chsh -s /bin/bash training\nENV HOME=\"/home/training\"\nRUN echo \"alias ll='ls -la -G'\" >> /home/training/.profile\nRUN usermod -G training,www-data training\nRUN usermod -a -G sudo training\nRUN apt-get install openssh-server libncurses5-dev apache2 supervisor -y\n# ########\n# ## GateOne SSH interface\n# ########\nRUN git clone https://github.com/liftoff/GateOne/ \\\n && cd GateOne \\\n && python setup.py install \\\n && pip install tornado==4.5.3 \\\n && python run_gateone.py --configure\nEXPOSE 22/tcp 80/tcp 443/tcp 8787/tcp\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"devtools\", dep = TRUE)'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fastcluster\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"useful\", dep = TRUE);'\n# #\n# # Seurat 2.0\n# #\nRUN apt-get install libhdf5-dev -y\nRUN Rscript -e 'install.packages(\"/usr/local/src/caTools_1.17.1.mod.tar.gz\", repos=NULL, type=\"source\");'\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n#  needed for combat\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"sva\", dep = TRUE)'\n#  needed for seurat clustering (hopefully not in a future seurat release)\nRUN chmod 777 /usr/local/lib/R/site-library\n# #################\n# ###  singleCellTK\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"singleCellTK\", dep = TRUE);'\n# # auto-run setup\nADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisor/conf.d/supervisord.conf\"]\n# ###########################\n# # more seurat configuration\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n# # for Matan:\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"AUCell\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"destiny\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fgsea\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"DropletUtils\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"precrec\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"pbapply\", dep = TRUE);'\n","injectedSmells":[],"originalDockerfileHash":"682fae8823fd0756b74f3d126bc68c70","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install gcc g++ perl python automake make cmake less vim wget git curl libdb-dev zlib1g-dev bzip2 libncurses5-dev texlive-latex-base default-jre python-pip python-dev gfortran build-essential libghc-zlib-dev libncurses-dev libbz2-dev liblzma-dev libpcre3-dev libxml2-dev libblas-dev gfortran git unzip ftp libzmq3-dev nano ftp fort77 libreadline-dev libcurl4-openssl-dev libx11-dev libxt-dev x11-common libcairo2-dev libpng-dev libreadline6-dev libjpeg8-dev pkg-config build-essential cmake gsl-bin libgsl0-dev libeigen3-dev libboost-all-dev libssl-dev libcairo2-dev libxt-dev libgtk2.0-dev libcairo2-dev xvfb xauth xfonts-base apt-utils apt-transport-https gdebi-core locales -y\nCOPY installR.sh /usr/local/src\nRUN /usr/local/src/installR.sh\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nCOPY install_rstudio_server.sh /usr/local/src\nRUN /usr/local/src/install_rstudio_server.sh\n#  ## User setup\nRUN groupadd -g 2000 training \\\n && useradd -m -u 2000 -g 2000 training\nRUN echo 'training:training' | chpasswd\nRUN chsh -s /bin/bash training\nENV HOME=\"/home/training\"\nRUN echo \"alias ll='ls -la -G'\" >> /home/training/.profile\nRUN usermod -G training,www-data training\nRUN usermod -a -G sudo training\nRUN apt-get install openssh-server libncurses5-dev apache2 supervisor -y\n#  ########\n#  ## GateOne SSH interface\n#  ########\nRUN git clone https://github.com/liftoff/GateOne/ \\\n && cd GateOne \\\n && python setup.py install \\\n && pip install tornado==4.5.3 \\\n && python run_gateone.py --configure\nEXPOSE 22/tcp 80/tcp 443/tcp 8787/tcp\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"devtools\", dep = TRUE)'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fastcluster\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"useful\", dep = TRUE);'\n#  #\n#  # Seurat 2.0\n#  #\nRUN apt-get install libhdf5-dev -y\nRUN Rscript -e 'install.packages(\"/usr/local/src/caTools_1.17.1.mod.tar.gz\", repos=NULL, type=\"source\");'\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n#   needed for combat\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"sva\", dep = TRUE)'\n#   needed for seurat clustering (hopefully not in a future seurat release)\nRUN chmod 777 /usr/local/lib/R/site-library\n#  #################\n#  ###  singleCellTK\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"singleCellTK\", dep = TRUE);'\n#  # auto-run setup\nADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisor/conf.d/supervisord.conf\"]\n#  ###########################\n#  # more seurat configuration\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n#  # for Matan:\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"AUCell\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"destiny\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fgsea\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"DropletUtils\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"precrec\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"pbapply\", dep = TRUE);'\n","originalDockerfileUglifiedHash":"55b09b9445a2bd5740b33a312f5470b7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/ae5f2186fef1c1e190c248ec6d30520b22680a56.dockerfile"}