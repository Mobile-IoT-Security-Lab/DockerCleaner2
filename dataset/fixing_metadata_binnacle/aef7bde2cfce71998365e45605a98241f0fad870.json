{"seed":3588155055,"processedDockerfileHash":"3cef943bbdd6cdf9b894e56944c5b2e0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck"],"processedDockerfile":"FROM alpine:latest\nRUN apk add ca-certificates=20220614-r4 perl-datetime=1.59-r0 perl-timedate=2.33-r1 --no-cache --repository https://dl-3.alpinelinux.org/alpine/latest-stable/community\nENV HOME=\"/home/user\"\nRUN adduser -u 1001 -D user \\\n && mkdir -p $HOME/.irssi \\\n && chown -R user:user $HOME\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.1.1\"\n#   https://otr.cypherpunks.ca/index.php#downloads\nENV LIB_OTR_VERSION=\"4.1.1\"\n#   https://github.com/cryptodotis/irssi-otr/releases\nENV IRSSI_OTR_VERSION=\"1.0.2\"\nRUN set -x \\\n && apk add autoconf=2.71-r1 automake=1.16.5-r1 curl=7.88.1-r1 gcc=12.2.1_git20220924-r4 glib-dev=2.74.6-r0 gnupg=2.2.40-r0 libc-dev=0.7.2-r3 libgcrypt-dev=1.10.1-r0 libtool=2.4.7-r1 lynx=2.8.9_p1-r8 make=4.3-r1 ncurses-dev=6.3_p20221119-r0 openssl-dev=3.0.8-r3 perl-dev=5.36.0-r0 pkgconf=1.9.4-r0 tar=1.34-r2 xz=5.2.9-r0 --no-cache --virtual .build-deps \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -o /tmp/irssi.tar.xz \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -o /tmp/irssi.tar.xz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 \\\n && gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz \\\n && rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc \\\n && mkdir -p /usr/src \\\n && tar -xJf /tmp/irssi.tar.xz -C /usr/src \\\n && rm /tmp/irssi.tar.xz \\\n && (cd /usr/src/irssi-$IRSSI_VERSION \\\n && ./configure --enable-true-color --with-bot --with-proxy --with-socks --prefix=/usr \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install ) \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz\" -o /tmp/libotr.tar.gz \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz.asc\" -o /tmp/libotr.tar.gz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && curl -sSL https://otr.cypherpunks.ca/gpgkey.asc | gpg --no-tty --import \\\n && gpg --batch --verify /tmp/libotr.tar.gz.asc /tmp/libotr.tar.gz \\\n && rm -rf \"$GNUPGHOME\" /tmp/libotr.tar.gz.asc \\\n && mkdir -p /usr/src/libotr \\\n && tar -xzf /tmp/libotr.tar.gz -C /usr/src/libotr --strip-components 1 \\\n && rm /tmp/libotr.tar.gz \\\n && (cd /usr/src/libotr \\\n && ./configure --with-pic --prefix=/usr \\\n && make \\\n && make install ) \\\n && mkdir -p /usr/src/irssi-otr \\\n && curl -sSL \"https://github.com/cryptodotis/irssi-otr/archive/v${IRSSI_OTR_VERSION}.tar.gz\" -o /tmp/irssi-otr.tar.gz \\\n && mkdir -p /usr/src/irssi-otr \\\n && tar -xf /tmp/irssi-otr.tar.gz -C /usr/src/irssi-otr --strip-components 1 \\\n && rm -f /tmp/irssi-otr.tar.gz \\\n && (cd /usr/src/irssi-otr \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install ) \\\n && rm -rf /usr/src/irssi-$IRSSI_VERSION \\\n && rm -rf /usr/src/libotr \\\n && rm -rf /usr/src/irssi-otr \\\n && runDeps=\"$( scanelf --needed --nobanner --recursive /usr | awk '{ gsub(/,/, \"\\nso:\", $2); print \"so:\" $2 }' | sort -u | xargs -r apk info --installed | sort -u ;)\" \\\n && apk add perl-libwww=6.67-r0 $runDeps --no-cache --virtual .irssi-rundeps \\\n && apk del .build-deps\nWORKDIR $HOME\nVOLUME $HOME/.irssi\nUSER user\nCMD [\"irssi\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:latest\nRUN apk --no-cache add --repository https://dl-3.alpinelinux.org/alpine/latest-stable/community ca-certificates perl-datetime perl-timedate\nENV HOME=\"/home/user\"\nRUN adduser -u 1001 -D user \\\n && mkdir -p $HOME/.irssi \\\n && chown -R user:user $HOME\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.1.1\"\n#  https://otr.cypherpunks.ca/index.php#downloads\nENV LIB_OTR_VERSION=\"4.1.1\"\n#  https://github.com/cryptodotis/irssi-otr/releases\nENV IRSSI_OTR_VERSION=\"1.0.2\"\nRUN set -x \\\n && apk add --no-cache --virtual .build-deps autoconf automake curl gcc glib-dev gnupg libc-dev libgcrypt-dev libtool lynx make ncurses-dev openssl-dev perl-dev pkgconf tar xz \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -o /tmp/irssi.tar.xz \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -o /tmp/irssi.tar.xz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 \\\n && gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz \\\n && rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc \\\n && mkdir -p /usr/src \\\n && tar -xJf /tmp/irssi.tar.xz -C /usr/src \\\n && rm /tmp/irssi.tar.xz \\\n && (cd /usr/src/irssi-$IRSSI_VERSION \\\n && ./configure --enable-true-color --with-bot --with-proxy --with-socks --prefix=/usr \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install ) \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz\" -o /tmp/libotr.tar.gz \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz.asc\" -o /tmp/libotr.tar.gz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && curl -sSL https://otr.cypherpunks.ca/gpgkey.asc | gpg --no-tty --import \\\n && gpg --batch --verify /tmp/libotr.tar.gz.asc /tmp/libotr.tar.gz \\\n && rm -rf \"$GNUPGHOME\" /tmp/libotr.tar.gz.asc \\\n && mkdir -p /usr/src/libotr \\\n && tar -xzf /tmp/libotr.tar.gz -C /usr/src/libotr --strip-components 1 \\\n && rm /tmp/libotr.tar.gz \\\n && (cd /usr/src/libotr \\\n && ./configure --with-pic --prefix=/usr \\\n && make \\\n && make install ) \\\n && mkdir -p /usr/src/irssi-otr \\\n && curl -sSL \"https://github.com/cryptodotis/irssi-otr/archive/v${IRSSI_OTR_VERSION}.tar.gz\" -o /tmp/irssi-otr.tar.gz \\\n && mkdir -p /usr/src/irssi-otr \\\n && tar -xf /tmp/irssi-otr.tar.gz -C /usr/src/irssi-otr --strip-components 1 \\\n && rm -f /tmp/irssi-otr.tar.gz \\\n && (cd /usr/src/irssi-otr \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install ) \\\n && rm -rf /usr/src/irssi-$IRSSI_VERSION \\\n && rm -rf /usr/src/libotr \\\n && rm -rf /usr/src/irssi-otr \\\n && runDeps=\"$( scanelf --needed --nobanner --recursive /usr | awk '{ gsub(/,/, \"\\nso:\", $2); print \"so:\" $2 }' | sort -u | xargs -r apk info --installed | sort -u ;)\" \\\n && apk add --no-cache --virtual .irssi-rundeps $runDeps perl-libwww \\\n && apk del .build-deps\nWORKDIR $HOME\nVOLUME $HOME/.irssi\nUSER user\nCMD [\"irssi\"]\n","injectedSmells":[],"originalDockerfileHash":"fce17515d09959e98e856b67d5dee6af","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:latest\nRUN apk --no-cache add --repository https://dl-3.alpinelinux.org/alpine/latest-stable/community ca-certificates perl-datetime perl-timedate\nENV HOME=\"/home/user\"\nRUN adduser -u 1001 -D user \\\n && mkdir -p $HOME/.irssi \\\n && chown -R user:user $HOME\nENV LANG=\"C.UTF-8\"\nENV IRSSI_VERSION=\"1.1.1\"\n#   https://otr.cypherpunks.ca/index.php#downloads\nENV LIB_OTR_VERSION=\"4.1.1\"\n#   https://github.com/cryptodotis/irssi-otr/releases\nENV IRSSI_OTR_VERSION=\"1.0.2\"\nRUN set -x \\\n && apk add --no-cache --virtual .build-deps autoconf automake curl gcc glib-dev gnupg libc-dev libgcrypt-dev libtool lynx make ncurses-dev openssl-dev perl-dev pkgconf tar xz \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz\" -o /tmp/irssi.tar.xz \\\n && curl -sSL \"https://github.com/irssi/irssi/releases/download/${IRSSI_VERSION}/irssi-${IRSSI_VERSION}.tar.xz.asc\" -o /tmp/irssi.tar.xz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && gpg --no-tty --keyserver ha.pool.sks-keyservers.net --recv-keys 7EE65E3082A5FB06AC7C368D00CCB587DDBEF0E1 \\\n && gpg --batch --verify /tmp/irssi.tar.xz.asc /tmp/irssi.tar.xz \\\n && rm -rf \"$GNUPGHOME\" /tmp/irssi.tar.xz.asc \\\n && mkdir -p /usr/src \\\n && tar -xJf /tmp/irssi.tar.xz -C /usr/src \\\n && rm /tmp/irssi.tar.xz \\\n && (cd /usr/src/irssi-$IRSSI_VERSION \\\n && ./configure --enable-true-color --with-bot --with-proxy --with-socks --prefix=/usr \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install ) \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz\" -o /tmp/libotr.tar.gz \\\n && curl -sSL \"https://otr.cypherpunks.ca/libotr-${LIB_OTR_VERSION}.tar.gz.asc\" -o /tmp/libotr.tar.gz.asc \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && curl -sSL https://otr.cypherpunks.ca/gpgkey.asc | gpg --no-tty --import \\\n && gpg --batch --verify /tmp/libotr.tar.gz.asc /tmp/libotr.tar.gz \\\n && rm -rf \"$GNUPGHOME\" /tmp/libotr.tar.gz.asc \\\n && mkdir -p /usr/src/libotr \\\n && tar -xzf /tmp/libotr.tar.gz -C /usr/src/libotr --strip-components 1 \\\n && rm /tmp/libotr.tar.gz \\\n && (cd /usr/src/libotr \\\n && ./configure --with-pic --prefix=/usr \\\n && make \\\n && make install ) \\\n && mkdir -p /usr/src/irssi-otr \\\n && curl -sSL \"https://github.com/cryptodotis/irssi-otr/archive/v${IRSSI_OTR_VERSION}.tar.gz\" -o /tmp/irssi-otr.tar.gz \\\n && mkdir -p /usr/src/irssi-otr \\\n && tar -xf /tmp/irssi-otr.tar.gz -C /usr/src/irssi-otr --strip-components 1 \\\n && rm -f /tmp/irssi-otr.tar.gz \\\n && (cd /usr/src/irssi-otr \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install ) \\\n && rm -rf /usr/src/irssi-$IRSSI_VERSION \\\n && rm -rf /usr/src/libotr \\\n && rm -rf /usr/src/irssi-otr \\\n && runDeps=\"$( scanelf --needed --nobanner --recursive /usr | awk '{ gsub(/,/, \"\\nso:\", $2); print \"so:\" $2 }' | sort -u | xargs -r apk info --installed | sort -u ;)\" \\\n && apk add --no-cache --virtual .irssi-rundeps $runDeps perl-libwww \\\n && apk del .build-deps\nWORKDIR $HOME\nVOLUME $HOME/.irssi\nUSER user\nCMD [\"irssi\"]\n","originalDockerfileUglifiedHash":"442eb5014d0221c1ea491c1cc72fe30b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/aef7bde2cfce71998365e45605a98241f0fad870.dockerfile"}