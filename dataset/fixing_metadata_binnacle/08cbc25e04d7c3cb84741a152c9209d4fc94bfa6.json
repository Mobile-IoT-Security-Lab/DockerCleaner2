{"seed":2270105282,"processedDockerfileHash":"9c9eb9e58a6abb49c077b8a3511a30b5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   MySQL Server with Apache and phpmyadmin\n#\n#   VERSION               0.0.1\n#\n#   Docs: \n#   - http://cweiske.de/tagebuch/Running%20Apache%20with%20a%20dozen%20PHP%20versions.htm\n#   - http://cweiske.de/tagebuch/Introducing%20phpfarm.htm\n#\nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 nano=7.2-1 curl=7.88.1-7ubuntu1 git=1:2.39.2-1ubuntu1 -y )\n#\n#   Install supervisord (used to handle processes)\n#\nRUN (apt-get update ;apt-get install --no-install-recommends supervisor=4.2.1-1ubuntu1 -y )\nCOPY ./supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#\n#   Install Apache\n#\nRUN (apt-get update ;apt-get install --no-install-recommends apache2=2.4.55-1ubuntu2 -y )\nRUN a2enmod rewrite status\nCOPY ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Preparations\n#\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends libxml2-dev=2.9.14+dfsg-1.1build2 libbz2-dev=1.0.8-5build1 libmcrypt-dev=2.5.8-7 libxslt1-dev=1.1.35-1 libssl-dev=3.0.8-1ubuntu1 libsslcommon2-dev libapr1-dev=1.7.2-2 libaprutil1-dev=1.6.3-1ubuntu1 libreadline-dev=8.2-1.3 make=4.3-4.1build1 libcurl4-openssl-dev=7.88.1-7ubuntu1 libjpeg-dev=8c-2ubuntu11 libpng12-dev libfreetype6-dev=2.12.1+dfsg-4 libxpm-dev=1:3.5.12-1.1 libgd-dev=2.3.3-7ubuntu2 libxpm4=1:3.5.12-1.1 t1lib-bin libtidy-dev=2:5.6.0-11build2 libc-client-dev -y )\n#   Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#\n#   Use phpfarm to manage PHP versions\n#\n#   Add one script per PHP version and update \nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nCOPY ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nCOPY ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/html/cgibin/phpcgi-5.3.27\nCOPY ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#   Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN (apt-get update ;apt-get install --no-install-recommends apache2-mpm-worker apache2-suexec libapache2-mod-fcgid=1:2.3.9-4 -y )\nRUN a2enmod actions fcgid suexec\nCOPY ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#   Install phpMyAdmin\nCOPY ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nCOPY ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#   Install vTiger\n#  ADD ./vtigercrm-5.4.0.tar.gz /var/www/html/\nCOPY ./vtigercrm-installed.tgz /var/www/html/\nCOPY ./src-vtiger/config.inc.php /var/www/html/vtigercrm/\n#\n#   Install MySQL\n#\n#   Bundle everything\nCOPY ./src-mysql /src-mysql\n#   Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#   Setup admin user and load data\nRUN /src-mysql/mysql-setup.sh\n#\n#   Start apache and mysql using supervisord\n#\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#   Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\nCOPY ./start.sh /\nEXPOSE 3306/tcp 80/tcp 443/tcp\nCMD [\"/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  MySQL Server with Apache and phpmyadmin\n#\n#  VERSION               0.0.1\n#\n#  Docs: \n#  - http://cweiske.de/tagebuch/Running%20Apache%20with%20a%20dozen%20PHP%20versions.htm\n#  - http://cweiske.de/tagebuch/Introducing%20phpfarm.htm\n#\nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#  Install supervisord (used to handle processes)\n#\nRUN apt-get install supervisor -y\nADD ./supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#\n#  Install Apache\n#\nRUN apt-get install apache2 -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#  Preparations\n#\nRUN apt-get update\nRUN apt-get install libxml2-dev libbz2-dev libmcrypt-dev libxslt1-dev libssl-dev libsslcommon2-dev libapr1-dev libaprutil1-dev libreadline-dev make libcurl4-openssl-dev libjpeg-dev libpng12-dev libfreetype6-dev libxpm-dev libgd-dev libxpm4 t1lib-bin libtidy-dev libc-client-dev -y\n#  Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#\n#  Use phpfarm to manage PHP versions\n#\n#  Add one script per PHP version and update \nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nADD ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nADD ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/html/cgibin/phpcgi-5.3.27\nADD ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#  Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN apt-get install apache2-mpm-worker apache2-suexec libapache2-mod-fcgid -y\nRUN a2enmod actions fcgid suexec\nADD ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#  Install phpMyAdmin\nADD ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nADD ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#  Install vTiger\n# ADD ./vtigercrm-5.4.0.tar.gz /var/www/html/\nADD ./vtigercrm-installed.tgz /var/www/html/\nADD ./src-vtiger/config.inc.php /var/www/html/vtigercrm/\n#\n#  Install MySQL\n#\n#  Bundle everything\nADD ./src-mysql /src-mysql\n#  Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#  Setup admin user and load data\nRUN /src-mysql/mysql-setup.sh\n#\n#  Start apache and mysql using supervisord\n#\n#  Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#  Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\nADD ./start.sh /\nEXPOSE 3306/tcp 80/tcp 443/tcp\nCMD [\"/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"747f5e9b876a20ab52ed4b13874f0ec2","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   MySQL Server with Apache and phpmyadmin\n#\n#   VERSION               0.0.1\n#\n#   Docs: \n#   - http://cweiske.de/tagebuch/Running%20Apache%20with%20a%20dozen%20PHP%20versions.htm\n#   - http://cweiske.de/tagebuch/Introducing%20phpfarm.htm\n#\nFROM ubuntu:latest\nMAINTAINER Jonas Colmsjö \"jonas@gizur.com\"\nRUN echo \"export HOME=/root\" >> /root/.profile\nRUN apt-get update\nRUN apt-get install wget nano curl git -y\n#\n#   Install supervisord (used to handle processes)\n#\nRUN apt-get install supervisor -y\nADD ./supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n#\n#   Install Apache\n#\nRUN apt-get install apache2 -y\nRUN a2enmod rewrite status\nADD ./etc-apache2-mods-available-status.conf /etc/apache2/mods-available/status.conf\nRUN rm /var/www/html/index.html\nRUN echo \"<?php\\nphpinfo();\\n \" > /var/www/html/info.php\n#\n#   Preparations\n#\nRUN apt-get update\nRUN apt-get install libxml2-dev libbz2-dev libmcrypt-dev libxslt1-dev libssl-dev libsslcommon2-dev libapr1-dev libaprutil1-dev libreadline-dev make libcurl4-openssl-dev libjpeg-dev libpng12-dev libfreetype6-dev libxpm-dev libgd-dev libxpm4 t1lib-bin libtidy-dev libc-client-dev -y\n#   Fix problem with libs in wrong place\nRUN ln -s /usr/lib/x86_64-linux-gnu/libXpm* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libkrb5* /usr/lib/\nRUN ln -s /usr/lib/x86_64-linux-gnu/libfreetype* /usr/lib/\n#\n#   Use phpfarm to manage PHP versions\n#\n#   Add one script per PHP version and update \nRUN cd /opt ; git clone git://git.code.sf.net/p/phpfarm/code phpfarm\nADD ./options.sh /opt/phpfarm/src/options.sh\nRUN cd /opt/phpfarm/src ; ./compile.sh 5.3.27\nADD ./var-www-html-cgibin-phpcgi-5.3.27 /var/www/html/cgibin/phpcgi-5.3.27\nADD ./opt-phpfarm-inst-php-5.3.27-lib-php.ini /opt/phpfarm/inst/php-5.3.27/lib/php.ini\n#   Manage PHP versions in Apache using FastCGI - old libapache2-mod-fastcgi \nRUN apt-get install apache2-mpm-worker apache2-suexec libapache2-mod-fcgid -y\nRUN a2enmod actions fcgid suexec\nADD ./etc-apache2-sites-available-000-default.conf /etc/apache2/sites-available/000-default.conf\n#   Install phpMyAdmin\nADD ./src-phpmyadmin/phpMyAdmin-4.0.8-all-languages.tar.gz /var/www/html/\nADD ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n#   Install vTiger\n#  ADD ./vtigercrm-5.4.0.tar.gz /var/www/html/\nADD ./vtigercrm-installed.tgz /var/www/html/\nADD ./src-vtiger/config.inc.php /var/www/html/vtigercrm/\n#\n#   Install MySQL\n#\n#   Bundle everything\nADD ./src-mysql /src-mysql\n#   Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n#   Setup admin user and load data\nRUN /src-mysql/mysql-setup.sh\n#\n#   Start apache and mysql using supervisord\n#\n#   Fix permissions\nRUN chown -R www-data:www-data /var/www/html\n#   Create a volume\nRUN mkdir /volume\nVOLUME [\"/volume\"]\nADD ./start.sh /\nEXPOSE 3306/tcp 80/tcp 443/tcp\nCMD [\"/start.sh\"]\n","originalDockerfileUglifiedHash":"9a7fddcd57ecf2377ef8e8d6aaa4cab1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/08cbc25e04d7c3cb84741a152c9209d4fc94bfa6.dockerfile"}