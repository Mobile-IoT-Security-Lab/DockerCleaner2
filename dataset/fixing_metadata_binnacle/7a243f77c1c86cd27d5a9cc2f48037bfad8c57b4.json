{"seed":1765886105,"processedDockerfileHash":"097189a717e8d4cafbd2c14b64f51683","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu\nMAINTAINER Sung-Huan Yu <sung-huan.yu@uni-wuerzburg.de>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN :\nRUN apt-get upgrade --yes\nRUN (apt-get update ;apt-get install --no-install-recommends default-jre=2:1.17-74 default-jdk=2:1.17-74 python3=3.11.2-1 python3-setuptools=66.1.1-1 python3-scipy=1.10.1-1 vim=2:9.0.1000-4ubuntu2 make=4.3-4.1build1 gcc=4:12.2.0-3ubuntu1 g++=4:12.2.0-3ubuntu1 gfortran=4:12.2.0-3ubuntu1 libx11-dev=2:1.8.4-2 wget=1.21.3-1ubuntu1 zip=3.0-13 unzip=6.0-27ubuntu1 python3-biopython=1.80+dfsg-4build1 cython3=0.29.32-2ubuntu2 software-properties-common=0.99.35 python3-software-properties=0.99.35 bioperl=1.7.8-1 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 ncbi-blast+=2.12.0+ds-3build1 pkg-config=1.8.1-1ubuntu2 python3-dev=3.11.2-1 libfreetype6-dev=2.12.1+dfsg-4 libxft-dev=2.3.6-1 r-base=4.2.2.20221110-2build1 libxml2-dev=2.9.14+dfsg-1.1build2 libpng-dev=1.6.39-2 python3-pip=23.0.1+dfsg-1 python-pip python3-numpy=1:1.24.2-1 imagemagick=8:6.9.11.60+dfsg-1.6 infernal=1.1.4-1 git=1:2.39.2-1ubuntu1 openssh-client=1:9.0p1-1ubuntu8 apache2=2.4.55-1ubuntu2 curl=7.88.1-7ubuntu1 build-essential=12.9ubuntu3 net-tools=2.10-0.1ubuntu3 librpc-xml-perl=0.82-1 ncbi-blast+-legacy=2.12.0+ds-3build1 nano=7.2-1 libf2c2=20140711-1 apache2-dev=2.4.55-1ubuntu2 libapache-singleton-perl=0.17-2 libjson-rpc-perl=1.06-3 libncurses5-dev=6.4-2 build-essential=12.9ubuntu3 hmmer=3.3.2+dfsg-1 lua5.1=5.1.5-9 blast2 snap=2013-11-29-11 cpanminus=1.7046-1 mummer=3.23+dfsg-8 exonerate=2.4.0-5 mafft=7.505-1 fasttree=2.1.11-2 libsvg-perl=2.87-1 libboost-all-dev=1.74.0.3ubuntu7 libgd-svg-perl=0.33-3 python-setuptools libc6-i386=2.37-0ubuntu2 lib32stdc++6=13-20230320-1ubuntu1 lib32gcc1 netcat genometools=1.6.2+ds-3 last-align=1447-1 libboost-iostreams-dev=1.74.0.3ubuntu7 libgsl-dev=2.7.1+dfsg-3 liblpsolve55-dev=5.5.2.5-2build2 libstdc++6=13-20230320-1ubuntu1 aragorn=1.2.38-4 tantan=40-1 libstorable-perl libbio-perl-perl=1.7.8-1 libsqlite3-dev=3.40.1-1 tree=2.1.0-1 --yes --fix-missing )\nRUN ln -fs /usr/bin/fasttree /usr/bin/FastTree\nRUN pip3 install matplotlib networkx READemption ANNOgesic\nRUN mkdir /tools /data\nWORKDIR /tools\n#   vienna package\nRUN wget http://www.tbi.univie.ac.at/RNA/packages/source/ViennaRNA-2.3.2.tar.gz \\\n && tar -zxvf ViennaRNA-2.3.2.tar.gz \\\n && cd ViennaRNA-2.3.2 \\\n && ./configure --without-perl --without-python \\\n && make \\\n && make install \\\n && cp src/Utils/relplot.pl /usr/local/bin \\\n && cp src/Utils/mountain.pl /usr/local/bin\n#   IntaRNA\nRUN wget https://github.com/BackofenLab/IntaRNA/releases/download/v2.0.4/intaRNA-2.0.4.tar.gz \\\n && tar -zxvf intaRNA-2.0.4.tar.gz \\\n && cd intaRNA-2.0.4 \\\n && ./configure \\\n && make \\\n && make install\n#   sratoolkit\nRUN wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.2/sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && tar -zxvf sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && rm sratoolkit.2.5.2-ubuntu64.tar.gz\n#   RATT\nRUN wget ftp://ftp.sanger.ac.uk/pub/resources/software/pagit/PAGIT.V1.64bit.tgz \\\n && tar -zxvf PAGIT.V1.64bit.tgz \\\n && mv PAGIT/RATT /opt/RATT \\\n && rm -rf PAGIT\n#   patch the error of perl version and the path of mummer\nRUN sed -i '244s/defined//' /opt/RATT/main.ratt.pl \\\n && sed -i '19s/$PAGIT_HOME/\\/usr/' /opt/RATT/start.ratt.sh\nENV RATT_HOME=\"/opt/RATT\" \\\n    PERL5LIB=\"/opt/RATT/:$PERL5LIB\" \\\n    PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/RATT:$PATH\"\n#   TSSpredator\nRUN wget https://lambda.informatik.uni-tuebingen.de/nexus/content/repositories/releases/org/uni-tuebingen/it/TSSpredator/1.06/TSSpredator-1.06.jar \\\n && cp TSSpredator-1.06.jar /usr/local/bin/TSSpredator.jar\n#   MEME\nRUN wget http://www.mpich.org/static/downloads/3.2/mpich-3.2.tar.gz \\\n && tar -zxvf mpich-3.2.tar.gz \\\n && cd mpich-3.2 \\\n && ./configure \\\n && make all install\nRUN wget http://meme-suite.org/meme-software/4.11.1/meme_4.11.1.tar.gz \\\n && tar -zxvf meme_4.11.1.tar.gz\nRUN perl -MCPAN -e 'install HTML::Template; install XML::Compile::SOAP11; install XML::Compile::WSDL11; install XML::Compile::Transport::SOAPHTTP; install XML::RPC'\nRUN cpan install HTML::Template \\\n && cpan HTML::PullParser \\\n && cpan XML::Simple \\\n && cpan XML::Compile::WSDL11 \\\n && cpan XML::Compile::SOAP11\nRUN cd meme_4.11.1 \\\n && ./configure --prefix=/tools/meme --with-url=http://meme.nbcr.net/meme --enable-build-libxml2 --enable-build-libxslt \\\n && make \\\n && make test \\\n && make install \\\n && cp /tools/meme/bin/* /usr/local/bin\n#  # htslib, samtools, bcftools\nRUN wget https://github.com/samtools/htslib/releases/download/1.3.1/htslib-1.3.1.tar.bz2\nRUN tar -jxvf htslib-1.3.1.tar.bz2 \\\n && cd htslib-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/samtools/releases/download/1.3.1/samtools-1.3.1.tar.bz2\nRUN tar -jxvf samtools-1.3.1.tar.bz2 \\\n && cd samtools-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/bcftools/releases/download/1.3.1/bcftools-1.3.1.tar.bz2\nRUN tar -jxvf bcftools-1.3.1.tar.bz2 \\\n && cd bcftools-1.3.1 \\\n && make \\\n && make install \\\n && cd ..\n#   segemehl TODO:update to latest version. Some parameters are changed\nRUN wget http://www.bioinf.uni-leipzig.de/Software/segemehl/old/segemehl_0_2_0.tar.gz \\\n && tar -zxvf segemehl_0_2_0.tar.gz \\\n && cd segemehl_0_2_0/segemehl \\\n && make all \\\n && cp *.x /usr/local/bin\n#   transtermHP\nRUN wget http://transterm.cbcb.umd.edu/transterm_hp_v2.09.zip \\\n && unzip transterm_hp_v2.09.zip \\\n && cd transterm_hp_v2.09 \\\n && cp transterm /usr/local/bin \\\n && cp expterm.dat /usr/local/bin\n#   CRT\nRUN wget http://www.room220.com/crt/CRT1.2-CLI.jar.zip \\\n && unzip CRT1.2-CLI.jar.zip \\\n && cp CRT1.2-CLI.jar /usr/local/bin/CRT.jar\n#   Psortb\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends supervisor=4.2.1-1ubuntu1 -y ) \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nWORKDIR /usr/local/src\nRUN echo '/usr/local/lib64' >> /etc/ld.so.conf \\\n && wget http://www.psort.org/download/docker/pft2.3.4.docker64bit.tar.gz \\\n && tar zxvf pft2.3.4.docker64bit.tar.gz \\\n && cp pftools/pfscan /usr/local/bin/\nRUN wget http://www.psort.org/download/libpsortb-1.0.tar.gz \\\n && tar zxvf libpsortb-1.0.tar.gz \\\n && cd libpsortb-1.0 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig\nRUN wget http://www.psort.org/download/bio-tools-psort-all.3.0.4.tar.gz \\\n && tar zxvf bio-tools-psort-all.3.0.4.tar.gz\nWORKDIR /usr/local/src/bio-tools-psort-all\nRUN wget http://www.psort.org/download/docker/psortb.defaults \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cp -r psort /usr/local/psortb\nRUN a2enmod cgid \\\n && wget http://www.psort.org/download/docker/apache.conf.fragment \\\n && cat apache.conf.fragment >> /etc/apache2/apache2.conf\nWORKDIR /usr/local/src\nRUN wget http://www.psort.org/download/docker/apache-svm.tar.gz \\\n && tar zxvf apache-svm.tar.gz \\\n && cd apache-svm \\\n && make \\\n && cp svmloc.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/startup.txt \\\n && mv startup.txt startup.pl \\\n && wget http://www.psort.org/download/docker/apache-psort.conf \\\n && cp apache-psort.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/apache-psortb.tar.gz \\\n && tar zxvf apache-psortb.tar.gz \\\n && cd apache-psortb \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /etc/apache2/conf-enabled/ \\\n && ln -s ../conf-available/svmloc.conf \\\n && ln -s ../conf-available/apache-psort.conf\nRUN wget http://www.psort.org/download/docker/Request.pm \\\n && cp Request.pm /usr/share/perl5/Apache/Singleton/Request.pm\nRUN wget http://www.psort.org/download/docker/CGI-FastTemplate-1.09.tar.gz \\\n && tar zxvf CGI-FastTemplate-1.09.tar.gz \\\n && cd CGI-FastTemplate-1.09 \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /var/www/html \\\n && wget http://www.psort.org/download/docker/psort-web.tar.gz \\\n && tar zxvf psort-web.tar.gz\nRUN rm -r pft2.3.4.docker64bit.tar.gz libpsortb-1.0.tar.gz libpsortb-1.0 bio-tools-psort-all.3.0.4.tar.gz bio-tools-psort-all\nRUN /etc/init.d/apache2 restart\nEXPOSE 80/tcp\nCMD [\"/opt/run.sh\"]\n#   copy psort to global execute\nRUN cp /usr/local/psortb/bin/psort /usr/local/bin\nWORKDIR /tools\n#   sometimes the pypi does not update to latest version.\n#   may need to re-write the code\nRUN pip3 install ANNOgesic --upgrade --force-reinstall\nRUN rm segemehl_0_2_0.tar.gz meme_4.11.1.tar.gz transterm_hp_v2.09.zip htslib-1.3.1.tar.bz2 bcftools-1.3.1.tar.bz2 samtools-1.3.1.tar.bz2 ViennaRNA-2.3.2.tar.gz intaRNA-2.0.4.tar.gz CRT1.2-CLI.jar.zip PAGIT.V1.64bit.tgz\n#   a patch for language setting, need to re-write the code.\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends locales=2.37-0ubuntu2 -y )\nRUN locale-gen en_US.UTF-8\nWORKDIR /data\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu\nMAINTAINER Sung-Huan Yu <sung-huan.yu@uni-wuerzburg.de>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update --yes\nRUN apt-get upgrade --yes\nRUN apt-get install default-jre default-jdk python3 python3-setuptools python3-scipy vim make gcc g++ gfortran libx11-dev wget zip unzip python3-biopython cython3 software-properties-common python3-software-properties bioperl zlib1g-dev ncbi-blast+ pkg-config python3-dev libfreetype6-dev libxft-dev r-base libxml2-dev libpng-dev python3-pip python-pip python3-numpy imagemagick infernal git openssh-client apache2 curl build-essential net-tools librpc-xml-perl ncbi-blast+-legacy nano libf2c2 apache2-dev libapache-singleton-perl libjson-rpc-perl libncurses5-dev build-essential hmmer lua5.1 blast2 snap cpanminus mummer exonerate mafft fasttree libsvg-perl libboost-all-dev libgd-svg-perl python-setuptools libc6-i386 lib32stdc++6 lib32gcc1 netcat genometools last-align libboost-iostreams-dev libgsl-dev liblpsolve55-dev libstdc++6 aragorn tantan libstorable-perl libbio-perl-perl libsqlite3-dev tree --yes --fix-missing\nRUN ln -fs /usr/bin/fasttree /usr/bin/FastTree\nRUN pip3 install matplotlib networkx READemption ANNOgesic\nRUN mkdir /tools /data\nWORKDIR /tools\n#  vienna package\nRUN wget http://www.tbi.univie.ac.at/RNA/packages/source/ViennaRNA-2.3.2.tar.gz \\\n && tar -zxvf ViennaRNA-2.3.2.tar.gz \\\n && cd ViennaRNA-2.3.2 \\\n && ./configure --without-perl --without-python \\\n && make \\\n && make install \\\n && cp src/Utils/relplot.pl /usr/local/bin \\\n && cp src/Utils/mountain.pl /usr/local/bin\n#  IntaRNA\nRUN wget https://github.com/BackofenLab/IntaRNA/releases/download/v2.0.4/intaRNA-2.0.4.tar.gz \\\n && tar -zxvf intaRNA-2.0.4.tar.gz \\\n && cd intaRNA-2.0.4 \\\n && ./configure \\\n && make \\\n && make install\n#  sratoolkit\nRUN wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.2/sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && tar -zxvf sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && rm sratoolkit.2.5.2-ubuntu64.tar.gz\n#  RATT\nRUN wget ftp://ftp.sanger.ac.uk/pub/resources/software/pagit/PAGIT.V1.64bit.tgz \\\n && tar -zxvf PAGIT.V1.64bit.tgz \\\n && mv PAGIT/RATT /opt/RATT \\\n && rm -rf PAGIT\n#  patch the error of perl version and the path of mummer\nRUN sed -i '244s/defined//' /opt/RATT/main.ratt.pl \\\n && sed -i '19s/$PAGIT_HOME/\\/usr/' /opt/RATT/start.ratt.sh\nENV RATT_HOME=\"/opt/RATT\" \\\n    PERL5LIB=\"/opt/RATT/:$PERL5LIB\" \\\n    PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/RATT:$PATH\"\n#  TSSpredator\nRUN wget https://lambda.informatik.uni-tuebingen.de/nexus/content/repositories/releases/org/uni-tuebingen/it/TSSpredator/1.06/TSSpredator-1.06.jar \\\n && cp TSSpredator-1.06.jar /usr/local/bin/TSSpredator.jar\n#  MEME\nRUN wget http://www.mpich.org/static/downloads/3.2/mpich-3.2.tar.gz \\\n && tar -zxvf mpich-3.2.tar.gz \\\n && cd mpich-3.2 \\\n && ./configure \\\n && make all install\nRUN wget http://meme-suite.org/meme-software/4.11.1/meme_4.11.1.tar.gz \\\n && tar -zxvf meme_4.11.1.tar.gz\nRUN perl -MCPAN -e 'install HTML::Template; install XML::Compile::SOAP11; install XML::Compile::WSDL11; install XML::Compile::Transport::SOAPHTTP; install XML::RPC'\nRUN cpan install HTML::Template \\\n && cpan HTML::PullParser \\\n && cpan XML::Simple \\\n && cpan XML::Compile::WSDL11 \\\n && cpan XML::Compile::SOAP11\nRUN cd meme_4.11.1 \\\n && ./configure --prefix=/tools/meme --with-url=http://meme.nbcr.net/meme --enable-build-libxml2 --enable-build-libxslt \\\n && make \\\n && make test \\\n && make install \\\n && cp /tools/meme/bin/* /usr/local/bin\n# # htslib, samtools, bcftools\nRUN wget https://github.com/samtools/htslib/releases/download/1.3.1/htslib-1.3.1.tar.bz2\nRUN tar -jxvf htslib-1.3.1.tar.bz2 \\\n && cd htslib-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/samtools/releases/download/1.3.1/samtools-1.3.1.tar.bz2\nRUN tar -jxvf samtools-1.3.1.tar.bz2 \\\n && cd samtools-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/bcftools/releases/download/1.3.1/bcftools-1.3.1.tar.bz2\nRUN tar -jxvf bcftools-1.3.1.tar.bz2 \\\n && cd bcftools-1.3.1 \\\n && make \\\n && make install \\\n && cd ..\n#  segemehl TODO:update to latest version. Some parameters are changed\nRUN wget http://www.bioinf.uni-leipzig.de/Software/segemehl/old/segemehl_0_2_0.tar.gz \\\n && tar -zxvf segemehl_0_2_0.tar.gz \\\n && cd segemehl_0_2_0/segemehl \\\n && make all \\\n && cp *.x /usr/local/bin\n#  transtermHP\nRUN wget http://transterm.cbcb.umd.edu/transterm_hp_v2.09.zip \\\n && unzip transterm_hp_v2.09.zip \\\n && cd transterm_hp_v2.09 \\\n && cp transterm /usr/local/bin \\\n && cp expterm.dat /usr/local/bin\n#  CRT\nRUN wget http://www.room220.com/crt/CRT1.2-CLI.jar.zip \\\n && unzip CRT1.2-CLI.jar.zip \\\n && cp CRT1.2-CLI.jar /usr/local/bin/CRT.jar\n#  Psortb\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install supervisor -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nWORKDIR /usr/local/src\nRUN echo '/usr/local/lib64' >> /etc/ld.so.conf \\\n && wget http://www.psort.org/download/docker/pft2.3.4.docker64bit.tar.gz \\\n && tar zxvf pft2.3.4.docker64bit.tar.gz \\\n && cp pftools/pfscan /usr/local/bin/\nRUN wget http://www.psort.org/download/libpsortb-1.0.tar.gz \\\n && tar zxvf libpsortb-1.0.tar.gz \\\n && cd libpsortb-1.0 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig\nRUN wget http://www.psort.org/download/bio-tools-psort-all.3.0.4.tar.gz \\\n && tar zxvf bio-tools-psort-all.3.0.4.tar.gz\nWORKDIR /usr/local/src/bio-tools-psort-all\nRUN wget http://www.psort.org/download/docker/psortb.defaults \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cp -r psort /usr/local/psortb\nRUN a2enmod cgid \\\n && wget http://www.psort.org/download/docker/apache.conf.fragment \\\n && cat apache.conf.fragment >> /etc/apache2/apache2.conf\nWORKDIR /usr/local/src\nRUN wget http://www.psort.org/download/docker/apache-svm.tar.gz \\\n && tar zxvf apache-svm.tar.gz \\\n && cd apache-svm \\\n && make \\\n && cp svmloc.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/startup.txt \\\n && mv startup.txt startup.pl \\\n && wget http://www.psort.org/download/docker/apache-psort.conf \\\n && cp apache-psort.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/apache-psortb.tar.gz \\\n && tar zxvf apache-psortb.tar.gz \\\n && cd apache-psortb \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /etc/apache2/conf-enabled/ \\\n && ln -s ../conf-available/svmloc.conf \\\n && ln -s ../conf-available/apache-psort.conf\nRUN wget http://www.psort.org/download/docker/Request.pm \\\n && cp Request.pm /usr/share/perl5/Apache/Singleton/Request.pm\nRUN wget http://www.psort.org/download/docker/CGI-FastTemplate-1.09.tar.gz \\\n && tar zxvf CGI-FastTemplate-1.09.tar.gz \\\n && cd CGI-FastTemplate-1.09 \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /var/www/html \\\n && wget http://www.psort.org/download/docker/psort-web.tar.gz \\\n && tar zxvf psort-web.tar.gz\nRUN rm -r pft2.3.4.docker64bit.tar.gz libpsortb-1.0.tar.gz libpsortb-1.0 bio-tools-psort-all.3.0.4.tar.gz bio-tools-psort-all\nRUN /etc/init.d/apache2 restart\nEXPOSE 80/tcp\nCMD [\"/opt/run.sh\"]\n#  copy psort to global execute\nRUN cp /usr/local/psortb/bin/psort /usr/local/bin\nWORKDIR /tools\n#  sometimes the pypi does not update to latest version.\n#  may need to re-write the code\nRUN pip3 install ANNOgesic --upgrade --force-reinstall\nRUN rm segemehl_0_2_0.tar.gz meme_4.11.1.tar.gz transterm_hp_v2.09.zip htslib-1.3.1.tar.bz2 bcftools-1.3.1.tar.bz2 samtools-1.3.1.tar.bz2 ViennaRNA-2.3.2.tar.gz intaRNA-2.0.4.tar.gz CRT1.2-CLI.jar.zip PAGIT.V1.64bit.tgz\n#  a patch for language setting, need to re-write the code.\nRUN apt-get update \\\n && apt-get install locales -y\nRUN locale-gen en_US.UTF-8\nWORKDIR /data\n","injectedSmells":[],"originalDockerfileHash":"965cda8686559bc4907136c069414899","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu\nMAINTAINER Sung-Huan Yu <sung-huan.yu@uni-wuerzburg.de>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update --yes\nRUN apt-get upgrade --yes\nRUN apt-get install default-jre default-jdk python3 python3-setuptools python3-scipy vim make gcc g++ gfortran libx11-dev wget zip unzip python3-biopython cython3 software-properties-common python3-software-properties bioperl zlib1g-dev ncbi-blast+ pkg-config python3-dev libfreetype6-dev libxft-dev r-base libxml2-dev libpng-dev python3-pip python-pip python3-numpy imagemagick infernal git openssh-client apache2 curl build-essential net-tools librpc-xml-perl ncbi-blast+-legacy nano libf2c2 apache2-dev libapache-singleton-perl libjson-rpc-perl libncurses5-dev build-essential hmmer lua5.1 blast2 snap cpanminus mummer exonerate mafft fasttree libsvg-perl libboost-all-dev libgd-svg-perl python-setuptools libc6-i386 lib32stdc++6 lib32gcc1 netcat genometools last-align libboost-iostreams-dev libgsl-dev liblpsolve55-dev libstdc++6 aragorn tantan libstorable-perl libbio-perl-perl libsqlite3-dev tree --yes --fix-missing\nRUN ln -fs /usr/bin/fasttree /usr/bin/FastTree\nRUN pip3 install matplotlib networkx READemption ANNOgesic\nRUN mkdir /tools /data\nWORKDIR /tools\n#   vienna package\nRUN wget http://www.tbi.univie.ac.at/RNA/packages/source/ViennaRNA-2.3.2.tar.gz \\\n && tar -zxvf ViennaRNA-2.3.2.tar.gz \\\n && cd ViennaRNA-2.3.2 \\\n && ./configure --without-perl --without-python \\\n && make \\\n && make install \\\n && cp src/Utils/relplot.pl /usr/local/bin \\\n && cp src/Utils/mountain.pl /usr/local/bin\n#   IntaRNA\nRUN wget https://github.com/BackofenLab/IntaRNA/releases/download/v2.0.4/intaRNA-2.0.4.tar.gz \\\n && tar -zxvf intaRNA-2.0.4.tar.gz \\\n && cd intaRNA-2.0.4 \\\n && ./configure \\\n && make \\\n && make install\n#   sratoolkit\nRUN wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.2/sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && tar -zxvf sratoolkit.2.5.2-ubuntu64.tar.gz \\\n && rm sratoolkit.2.5.2-ubuntu64.tar.gz\n#   RATT\nRUN wget ftp://ftp.sanger.ac.uk/pub/resources/software/pagit/PAGIT.V1.64bit.tgz \\\n && tar -zxvf PAGIT.V1.64bit.tgz \\\n && mv PAGIT/RATT /opt/RATT \\\n && rm -rf PAGIT\n#   patch the error of perl version and the path of mummer\nRUN sed -i '244s/defined//' /opt/RATT/main.ratt.pl \\\n && sed -i '19s/$PAGIT_HOME/\\/usr/' /opt/RATT/start.ratt.sh\nENV RATT_HOME=\"/opt/RATT\" \\\n    PERL5LIB=\"/opt/RATT/:$PERL5LIB\" \\\n    PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/RATT:$PATH\"\n#   TSSpredator\nRUN wget https://lambda.informatik.uni-tuebingen.de/nexus/content/repositories/releases/org/uni-tuebingen/it/TSSpredator/1.06/TSSpredator-1.06.jar \\\n && cp TSSpredator-1.06.jar /usr/local/bin/TSSpredator.jar\n#   MEME\nRUN wget http://www.mpich.org/static/downloads/3.2/mpich-3.2.tar.gz \\\n && tar -zxvf mpich-3.2.tar.gz \\\n && cd mpich-3.2 \\\n && ./configure \\\n && make all install\nRUN wget http://meme-suite.org/meme-software/4.11.1/meme_4.11.1.tar.gz \\\n && tar -zxvf meme_4.11.1.tar.gz\nRUN perl -MCPAN -e 'install HTML::Template; install XML::Compile::SOAP11; install XML::Compile::WSDL11; install XML::Compile::Transport::SOAPHTTP; install XML::RPC'\nRUN cpan install HTML::Template \\\n && cpan HTML::PullParser \\\n && cpan XML::Simple \\\n && cpan XML::Compile::WSDL11 \\\n && cpan XML::Compile::SOAP11\nRUN cd meme_4.11.1 \\\n && ./configure --prefix=/tools/meme --with-url=http://meme.nbcr.net/meme --enable-build-libxml2 --enable-build-libxslt \\\n && make \\\n && make test \\\n && make install \\\n && cp /tools/meme/bin/* /usr/local/bin\n#  # htslib, samtools, bcftools\nRUN wget https://github.com/samtools/htslib/releases/download/1.3.1/htslib-1.3.1.tar.bz2\nRUN tar -jxvf htslib-1.3.1.tar.bz2 \\\n && cd htslib-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/samtools/releases/download/1.3.1/samtools-1.3.1.tar.bz2\nRUN tar -jxvf samtools-1.3.1.tar.bz2 \\\n && cd samtools-1.3.1 \\\n && ./configure \\\n && make \\\n && make install \\\n && cd ..\nRUN wget https://github.com/samtools/bcftools/releases/download/1.3.1/bcftools-1.3.1.tar.bz2\nRUN tar -jxvf bcftools-1.3.1.tar.bz2 \\\n && cd bcftools-1.3.1 \\\n && make \\\n && make install \\\n && cd ..\n#   segemehl TODO:update to latest version. Some parameters are changed\nRUN wget http://www.bioinf.uni-leipzig.de/Software/segemehl/old/segemehl_0_2_0.tar.gz \\\n && tar -zxvf segemehl_0_2_0.tar.gz \\\n && cd segemehl_0_2_0/segemehl \\\n && make all \\\n && cp *.x /usr/local/bin\n#   transtermHP\nRUN wget http://transterm.cbcb.umd.edu/transterm_hp_v2.09.zip \\\n && unzip transterm_hp_v2.09.zip \\\n && cd transterm_hp_v2.09 \\\n && cp transterm /usr/local/bin \\\n && cp expterm.dat /usr/local/bin\n#   CRT\nRUN wget http://www.room220.com/crt/CRT1.2-CLI.jar.zip \\\n && unzip CRT1.2-CLI.jar.zip \\\n && cp CRT1.2-CLI.jar /usr/local/bin/CRT.jar\n#   Psortb\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n && apt-get install supervisor -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV APACHE_RUN_USER=\"www-data\" \\\n    APACHE_RUN_GROUP=\"www-data\" \\\n    APACHE_LOG_DIR=\"/var/log/apache2\" \\\n    APACHE_LOCK_DIR=\"/var/lock/apache2\" \\\n    APACHE_PID_FILE=\"/var/run/apache2.pid\"\nWORKDIR /usr/local/src\nRUN echo '/usr/local/lib64' >> /etc/ld.so.conf \\\n && wget http://www.psort.org/download/docker/pft2.3.4.docker64bit.tar.gz \\\n && tar zxvf pft2.3.4.docker64bit.tar.gz \\\n && cp pftools/pfscan /usr/local/bin/\nRUN wget http://www.psort.org/download/libpsortb-1.0.tar.gz \\\n && tar zxvf libpsortb-1.0.tar.gz \\\n && cd libpsortb-1.0 \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig\nRUN wget http://www.psort.org/download/bio-tools-psort-all.3.0.4.tar.gz \\\n && tar zxvf bio-tools-psort-all.3.0.4.tar.gz\nWORKDIR /usr/local/src/bio-tools-psort-all\nRUN wget http://www.psort.org/download/docker/psortb.defaults \\\n && perl Makefile.PL \\\n && make \\\n && make install \\\n && cp -r psort /usr/local/psortb\nRUN a2enmod cgid \\\n && wget http://www.psort.org/download/docker/apache.conf.fragment \\\n && cat apache.conf.fragment >> /etc/apache2/apache2.conf\nWORKDIR /usr/local/src\nRUN wget http://www.psort.org/download/docker/apache-svm.tar.gz \\\n && tar zxvf apache-svm.tar.gz \\\n && cd apache-svm \\\n && make \\\n && cp svmloc.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/startup.txt \\\n && mv startup.txt startup.pl \\\n && wget http://www.psort.org/download/docker/apache-psort.conf \\\n && cp apache-psort.conf /etc/apache2/conf-available/\nRUN wget http://www.psort.org/download/docker/apache-psortb.tar.gz \\\n && tar zxvf apache-psortb.tar.gz \\\n && cd apache-psortb \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /etc/apache2/conf-enabled/ \\\n && ln -s ../conf-available/svmloc.conf \\\n && ln -s ../conf-available/apache-psort.conf\nRUN wget http://www.psort.org/download/docker/Request.pm \\\n && cp Request.pm /usr/share/perl5/Apache/Singleton/Request.pm\nRUN wget http://www.psort.org/download/docker/CGI-FastTemplate-1.09.tar.gz \\\n && tar zxvf CGI-FastTemplate-1.09.tar.gz \\\n && cd CGI-FastTemplate-1.09 \\\n && perl Makefile.PL \\\n && make \\\n && make install\nRUN cd /var/www/html \\\n && wget http://www.psort.org/download/docker/psort-web.tar.gz \\\n && tar zxvf psort-web.tar.gz\nRUN rm -r pft2.3.4.docker64bit.tar.gz libpsortb-1.0.tar.gz libpsortb-1.0 bio-tools-psort-all.3.0.4.tar.gz bio-tools-psort-all\nRUN /etc/init.d/apache2 restart\nEXPOSE 80/tcp\nCMD [\"/opt/run.sh\"]\n#   copy psort to global execute\nRUN cp /usr/local/psortb/bin/psort /usr/local/bin\nWORKDIR /tools\n#   sometimes the pypi does not update to latest version.\n#   may need to re-write the code\nRUN pip3 install ANNOgesic --upgrade --force-reinstall\nRUN rm segemehl_0_2_0.tar.gz meme_4.11.1.tar.gz transterm_hp_v2.09.zip htslib-1.3.1.tar.bz2 bcftools-1.3.1.tar.bz2 samtools-1.3.1.tar.bz2 ViennaRNA-2.3.2.tar.gz intaRNA-2.0.4.tar.gz CRT1.2-CLI.jar.zip PAGIT.V1.64bit.tgz\n#   a patch for language setting, need to re-write the code.\nRUN apt-get update \\\n && apt-get install locales -y\nRUN locale-gen en_US.UTF-8\nWORKDIR /data\n","originalDockerfileUglifiedHash":"0eecc0a9f67b417b5c8bb30d9980a86a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7a243f77c1c86cd27d5a9cc2f48037bfad8c57b4.dockerfile"}