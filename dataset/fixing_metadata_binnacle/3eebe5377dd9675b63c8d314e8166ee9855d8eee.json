{"seed":2565620420,"processedDockerfileHash":"5a6d1d25a03f51b5699e81785ba3e8d9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.5\nMAINTAINER Huang Rui <vowstar@gmail.com>, Turtle <turtled@emqtt.io>\nENV EMQ_VERSION=\"v2.3-beta.1\"\nCOPY ./start.sh /start.sh\nRUN set -ex \\\n && apk add build-base=0.4-r1 bsd-compat-headers=0.7-r1 perl=5.24.4-r1 erlang=19.1.0-r0 erlang-public-key=19.1.0-r0 erlang-syntax-tools=19.1.0-r0 erlang-erl-docgen=19.1.0-r0 erlang-gs=19.1.0-r0 erlang-observer=19.1.0-r0 erlang-ssh=19.1.0-r0 erlang-cosfiletransfer=19.1.0-r0 erlang-runtime-tools=19.1.0-r0 erlang-os-mon=19.1.0-r0 erlang-tools=19.1.0-r0 erlang-cosproperty=19.1.0-r0 erlang-common-test=19.1.0-r0 erlang-dialyzer=19.1.0-r0 erlang-edoc=19.1.0-r0 erlang-otp-mibs=19.1.0-r0 erlang-crypto=19.1.0-r0 erlang-costransaction=19.1.0-r0 erlang-odbc=19.1.0-r0 erlang-inets=19.1.0-r0 erlang-asn1=19.1.0-r0 erlang-snmp=19.1.0-r0 erlang-erts=19.1.0-r0 erlang-et=19.1.0-r0 erlang-cosnotification=19.1.0-r0 erlang-xmerl=19.1.0-r0 erlang-typer=19.1.0-r0 erlang-coseventdomain=19.1.0-r0 erlang-stdlib=19.1.0-r0 erlang-diameter=19.1.0-r0 erlang-hipe=19.1.0-r0 erlang-ic=19.1.0-r0 erlang-eunit=19.1.0-r0 erlang-mnesia=19.1.0-r0 erlang-erl-interface=19.1.0-r0 erlang-sasl=19.1.0-r0 erlang-jinterface=19.1.0-r0 erlang-kernel=19.1.0-r0 erlang-orber=19.1.0-r0 erlang-costime=19.1.0-r0 erlang-percept=19.1.0-r0 erlang-dev=19.1.0-r0 erlang-eldap=19.1.0-r0 erlang-reltool=19.1.0-r0 erlang-debugger=19.1.0-r0 erlang-ssl=19.1.0-r0 erlang-megaco=19.1.0-r0 erlang-parsetools=19.1.0-r0 erlang-cosevent=19.1.0-r0 erlang-compiler=19.1.0-r0 --no-cache --virtual .build-deps \\\n && apk add git=2.11.3-r2 wget=1.18-r4 --no-cache --virtual .fetch-deps \\\n && apk add ncurses-terminfo-base=6.0_p20171125-r1 ncurses-terminfo=6.0_p20171125-r1 ncurses-libs=6.0_p20171125-r1 readline=6.3.008-r4 --no-cache --virtual .run-deps \\\n && git clone -b ${EMQ_VERSION} https://github.com/emqtt/emq-relx.git /emqttd \\\n && cd /emqttd \\\n && make \\\n && mkdir -p /opt \\\n && mv /emqttd/_rel/emqttd /opt/emqttd \\\n && cd / \\\n && rm -rf /emqttd \\\n && mv /start.sh /opt/emqttd/start.sh \\\n && chmod +x /opt/emqttd/start.sh \\\n && ln -s /opt/emqttd/bin/* /usr/local/bin/ \\\n && apk --purge del .build-deps .fetch-deps \\\n && rm -rf /var/cache/apk/*\nWORKDIR /opt/emqttd\n#   start emqttd and initial environments\nCMD [\"/opt/emqttd/start.sh\"]\nVOLUME [\"/opt/emqttd/log\", \"/opt/emqttd/data\", \"/opt/emqttd/lib\", \"/opt/emqttd/etc\"]\n#   emqttd will occupy these port:\n#   - 1883 port for MQTT\n#   - 8883 port for MQTT(SSL)\n#   - 8083 for WebSocket/HTTP\n#   - 8084 for WSS/HTTPS\n#   - 8080 for mgmt API\n#   - 18083 for dashboard\n#   - 4369 for port mapping\n#   - 6000-6999 for distributed node\nEXPOSE 1883/tcp 8883/tcp 8083/tcp 8084/tcp 8080/tcp 18083/tcp 4369/tcp 6000-6999\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.5\nMAINTAINER Huang Rui <vowstar@gmail.com>, Turtle <turtled@emqtt.io>\nENV EMQ_VERSION=\"v2.3-beta.1\"\nCOPY ./start.sh /start.sh\nRUN set -ex \\\n && apk --no-cache add --virtual .build-deps build-base bsd-compat-headers perl erlang erlang-public-key erlang-syntax-tools erlang-erl-docgen erlang-gs erlang-observer erlang-ssh erlang-cosfiletransfer erlang-runtime-tools erlang-os-mon erlang-tools erlang-cosproperty erlang-common-test erlang-dialyzer erlang-edoc erlang-otp-mibs erlang-crypto erlang-costransaction erlang-odbc erlang-inets erlang-asn1 erlang-snmp erlang-erts erlang-et erlang-cosnotification erlang-xmerl erlang-typer erlang-coseventdomain erlang-stdlib erlang-diameter erlang-hipe erlang-ic erlang-eunit erlang-mnesia erlang-erl-interface erlang-sasl erlang-jinterface erlang-kernel erlang-orber erlang-costime erlang-percept erlang-dev erlang-eldap erlang-reltool erlang-debugger erlang-ssl erlang-megaco erlang-parsetools erlang-cosevent erlang-compiler \\\n && apk add --no-cache --virtual .fetch-deps git wget \\\n && apk add --no-cache --virtual .run-deps ncurses-terminfo-base ncurses-terminfo ncurses-libs readline \\\n && git clone -b ${EMQ_VERSION} https://github.com/emqtt/emq-relx.git /emqttd \\\n && cd /emqttd \\\n && make \\\n && mkdir -p /opt \\\n && mv /emqttd/_rel/emqttd /opt/emqttd \\\n && cd / \\\n && rm -rf /emqttd \\\n && mv /start.sh /opt/emqttd/start.sh \\\n && chmod +x /opt/emqttd/start.sh \\\n && ln -s /opt/emqttd/bin/* /usr/local/bin/ \\\n && apk --purge del .build-deps .fetch-deps \\\n && rm -rf /var/cache/apk/*\nWORKDIR /opt/emqttd\n#  start emqttd and initial environments\nCMD [\"/opt/emqttd/start.sh\"]\nVOLUME [\"/opt/emqttd/log\", \"/opt/emqttd/data\", \"/opt/emqttd/lib\", \"/opt/emqttd/etc\"]\n#  emqttd will occupy these port:\n#  - 1883 port for MQTT\n#  - 8883 port for MQTT(SSL)\n#  - 8083 for WebSocket/HTTP\n#  - 8084 for WSS/HTTPS\n#  - 8080 for mgmt API\n#  - 18083 for dashboard\n#  - 4369 for port mapping\n#  - 6000-6999 for distributed node\nEXPOSE 1883/tcp 8883/tcp 8083/tcp 8084/tcp 8080/tcp 18083/tcp 4369/tcp 6000-6999\n","injectedSmells":[],"originalDockerfileHash":"cb991cdc3c042129ccfa403198ec42c4","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.5\nMAINTAINER Huang Rui <vowstar@gmail.com>, Turtle <turtled@emqtt.io>\nENV EMQ_VERSION=\"v2.3-beta.1\"\nCOPY ./start.sh /start.sh\nRUN set -ex \\\n && apk --no-cache add --virtual .build-deps build-base bsd-compat-headers perl erlang erlang-public-key erlang-syntax-tools erlang-erl-docgen erlang-gs erlang-observer erlang-ssh erlang-cosfiletransfer erlang-runtime-tools erlang-os-mon erlang-tools erlang-cosproperty erlang-common-test erlang-dialyzer erlang-edoc erlang-otp-mibs erlang-crypto erlang-costransaction erlang-odbc erlang-inets erlang-asn1 erlang-snmp erlang-erts erlang-et erlang-cosnotification erlang-xmerl erlang-typer erlang-coseventdomain erlang-stdlib erlang-diameter erlang-hipe erlang-ic erlang-eunit erlang-mnesia erlang-erl-interface erlang-sasl erlang-jinterface erlang-kernel erlang-orber erlang-costime erlang-percept erlang-dev erlang-eldap erlang-reltool erlang-debugger erlang-ssl erlang-megaco erlang-parsetools erlang-cosevent erlang-compiler \\\n && apk add --no-cache --virtual .fetch-deps git wget \\\n && apk add --no-cache --virtual .run-deps ncurses-terminfo-base ncurses-terminfo ncurses-libs readline \\\n && git clone -b ${EMQ_VERSION} https://github.com/emqtt/emq-relx.git /emqttd \\\n && cd /emqttd \\\n && make \\\n && mkdir -p /opt \\\n && mv /emqttd/_rel/emqttd /opt/emqttd \\\n && cd / \\\n && rm -rf /emqttd \\\n && mv /start.sh /opt/emqttd/start.sh \\\n && chmod +x /opt/emqttd/start.sh \\\n && ln -s /opt/emqttd/bin/* /usr/local/bin/ \\\n && apk --purge del .build-deps .fetch-deps \\\n && rm -rf /var/cache/apk/*\nWORKDIR /opt/emqttd\n#   start emqttd and initial environments\nCMD [\"/opt/emqttd/start.sh\"]\nVOLUME [\"/opt/emqttd/log\", \"/opt/emqttd/data\", \"/opt/emqttd/lib\", \"/opt/emqttd/etc\"]\n#   emqttd will occupy these port:\n#   - 1883 port for MQTT\n#   - 8883 port for MQTT(SSL)\n#   - 8083 for WebSocket/HTTP\n#   - 8084 for WSS/HTTPS\n#   - 8080 for mgmt API\n#   - 18083 for dashboard\n#   - 4369 for port mapping\n#   - 6000-6999 for distributed node\nEXPOSE 1883/tcp 8883/tcp 8083/tcp 8084/tcp 8080/tcp 18083/tcp 4369/tcp 6000-6999\n","originalDockerfileUglifiedHash":"95bfb16abd3362e33d01111b9533614d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3eebe5377dd9675b63c8d314e8166ee9855d8eee.dockerfile"}