{"seed":3083950349,"processedDockerfileHash":"f7055e7dea06f75f9ad89e264201ec37","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04\nENV TZ=\"Europe/Prague\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget=1.19.4-1ubuntu2.2 git=1:2.17.1-1ubuntu0.17 python=2.7.15~rc1-1 python-dev=2.7.15~rc1-1 python-nose=1.3.7-3 python-pip=9.0.1-2.3~ubuntu1.18.04.8 libboost-filesystem-dev=1.65.1.0ubuntu1 libboost-program-options-dev=1.65.1.0ubuntu1 libboost-python-dev=1.65.1.0ubuntu1 libboost-regex-dev=1.65.1.0ubuntu1 libboost-system-dev=1.65.1.0ubuntu1 libboost-thread-dev=1.65.1.0ubuntu1 libicu-dev=60.2-3ubuntu3.2 libxml2=2.9.4+dfsg1-6.1ubuntu1.8 libxml2-dev=2.9.4+dfsg1-6.1ubuntu1.8 libfreetype6=2.8.1-2ubuntu2.2 libfreetype6-dev=2.8.1-2ubuntu2.2 libjpeg-dev=8c-2ubuntu8 libpng-dev=1.6.34-1ubuntu0.18.04.2 libproj-dev=4.9.3-2 libtiff-dev=4.0.9-5ubuntu0.10 libcairo2=1.15.10-2ubuntu0.1 libcairo2-dev=1.15.10-2ubuntu0.1 python-cairo=1.16.2-1 python-cairo-dev=1.16.2-1 libcairomm-1.0-1v5=1.12.2-3 libcairomm-1.0-dev=1.12.2-3 ttf-unifont=1:10.0.07-1 ttf-dejavu=2.37-1 ttf-dejavu-core=2.37-1 ttf-dejavu-extra=2.37-1 git=1:2.17.1-1ubuntu0.17 build-essential=12.4ubuntu1 libgdal-dev=2.2.3+dfsg-2 python-gdal=2.2.3+dfsg-2 postgresql-10=10.23-0ubuntu0.18.04.1 postgresql-server-dev-10=10.23-0ubuntu0.18.04.1 postgresql-contrib-10 postgis=2.4.3+dfsg-4 libsqlite3-dev=3.22.0-1ubuntu0.7 osm2pgsql=0.94.0+ds-1 npm=3.5.2-0ubuntu4 uthash-dev=2.0.2-1 sqlite3=3.22.0-1ubuntu0.7 spatialite-bin=4.3.0-2build1 gdal-bin=2.2.3+dfsg-2 fonts-liberation=1:1.07.4-7~18.04.1 -y\nRUN pip2 install --upgrade pip\nRUN pip2 install psycopg2 pysqlite\nRUN cd /tmp \\\n && git clone https://github.com/mapnik/mapnik mapnik-2.3.x -b 2.3.x --depth 10 \\\n && cd mapnik-2.3.x \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/mapnik-2.3.x\nRUN npm install millstone@0.6.17 carto@1.2.0 --global\nRUN wget -O - http://m.m.i24.cc/osmconvert.c | cc -x c - -lz -O3 -o /usr/local/bin/osmconvert\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5mreader \\\n && cd o5mreader \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5mreader\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5m2sqlite \\\n && cd o5m2sqlite \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5msqlite\nRUN cp /usr/share/fonts/truetype/liberation/* /usr/local/lib/mapnik/fonts\nRUN cd /root \\\n && git clone https://github.com/bigr/map1.git \\\n && chmod -R 777 /root/map1\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && chmod -R 777 /root/map1 \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu_1000\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && cd /root/map1 \\\n && su postgres -c \"./get_data_pgis\"\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && cd /root/map1/vodak \\\n && su postgres -c \"./vodak.py gis_eu > /tmp/vodak.sql\" \\\n && su postgres -c \"psql -d gis_eu < vodak.sql\" \\\n && unlink /tmp/vodak.sql\nRUN cd /root/map1/stylesheets/general/prepare-db \\\n && cd /root/map1 \\\n && git pull \\\n && su postgres -c \"php ./get-sql.php | psql -d gis_eu\"\nCOPY srtm /root/map1/data/dem/\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nENV TZ=\"Europe/Prague\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN apt-get update \\\n && apt-get install wget git python python-dev python-nose python-pip libboost-filesystem-dev libboost-program-options-dev libboost-python-dev libboost-regex-dev libboost-system-dev libboost-thread-dev libicu-dev libxml2 libxml2-dev libfreetype6 libfreetype6-dev libjpeg-dev libpng-dev libproj-dev libtiff-dev libcairo2 libcairo2-dev python-cairo python-cairo-dev libcairomm-1.0-1v5 libcairomm-1.0-dev ttf-unifont ttf-dejavu ttf-dejavu-core ttf-dejavu-extra git build-essential libgdal-dev python-gdal postgresql-10 postgresql-server-dev-10 postgresql-contrib-10 postgis libsqlite3-dev osm2pgsql npm uthash-dev sqlite3 spatialite-bin gdal-bin fonts-liberation -y\nRUN pip2 install --upgrade pip\nRUN pip2 install psycopg2 pysqlite\nRUN cd /tmp \\\n && git clone https://github.com/mapnik/mapnik mapnik-2.3.x -b 2.3.x --depth 10 \\\n && cd mapnik-2.3.x \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/mapnik-2.3.x\nRUN npm install millstone carto --global\nRUN wget -O - http://m.m.i24.cc/osmconvert.c | cc -x c - -lz -O3 -o /usr/local/bin/osmconvert\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5mreader \\\n && cd o5mreader \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5mreader\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5m2sqlite \\\n && cd o5m2sqlite \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5msqlite\nRUN cp /usr/share/fonts/truetype/liberation/* /usr/local/lib/mapnik/fonts\nRUN cd /root \\\n && git clone https://github.com/bigr/map1.git \\\n && chmod -R 777 /root/map1\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && chmod -R 777 /root/map1 \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu_1000\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && cd /root/map1 \\\n && su postgres -c \"./get_data_pgis\"\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && cd /root/map1/vodak \\\n && su postgres -c \"./vodak.py gis_eu > /tmp/vodak.sql\" \\\n && su postgres -c \"psql -d gis_eu < vodak.sql\" \\\n && unlink /tmp/vodak.sql\nRUN cd /root/map1/stylesheets/general/prepare-db \\\n && cd /root/map1 \\\n && git pull \\\n && su postgres -c \"php ./get-sql.php | psql -d gis_eu\"\nCOPY srtm /root/map1/data/dem/\n","injectedSmells":[],"originalDockerfileHash":"21e716e7e6dfd87aaa68504eb7d1590d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nENV TZ=\"Europe/Prague\"\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n && echo $TZ > /etc/timezone\nRUN apt-get update \\\n && apt-get install wget git python python-dev python-nose python-pip libboost-filesystem-dev libboost-program-options-dev libboost-python-dev libboost-regex-dev libboost-system-dev libboost-thread-dev libicu-dev libxml2 libxml2-dev libfreetype6 libfreetype6-dev libjpeg-dev libpng-dev libproj-dev libtiff-dev libcairo2 libcairo2-dev python-cairo python-cairo-dev libcairomm-1.0-1v5 libcairomm-1.0-dev ttf-unifont ttf-dejavu ttf-dejavu-core ttf-dejavu-extra git build-essential libgdal-dev python-gdal postgresql-10 postgresql-server-dev-10 postgresql-contrib-10 postgis libsqlite3-dev osm2pgsql npm uthash-dev sqlite3 spatialite-bin gdal-bin fonts-liberation -y\nRUN pip2 install --upgrade pip\nRUN pip2 install psycopg2 pysqlite\nRUN cd /tmp \\\n && git clone https://github.com/mapnik/mapnik mapnik-2.3.x -b 2.3.x --depth 10 \\\n && cd mapnik-2.3.x \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/mapnik-2.3.x\nRUN npm install millstone carto --global\nRUN wget -O - http://m.m.i24.cc/osmconvert.c | cc -x c - -lz -O3 -o /usr/local/bin/osmconvert\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5mreader \\\n && cd o5mreader \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5mreader\nRUN cd /tmp \\\n && git clone https://github.com/bigr/o5m2sqlite \\\n && cd o5m2sqlite \\\n && ./configure \\\n && make \\\n && make install \\\n && ldconfig \\\n && rm -rf /tmp/o5msqlite\nRUN cp /usr/share/fonts/truetype/liberation/* /usr/local/lib/mapnik/fonts\nRUN cd /root \\\n && git clone https://github.com/bigr/map1.git \\\n && chmod -R 777 /root/map1\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && chmod -R 777 /root/map1 \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && su postgres -c \"createdb -E UTF8 -O postgres gis_eu_1000\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION postgis;\\\"\" \\\n && su postgres -c \"psql gis_eu_1000 -c \\\"CREATE EXTENSION hstore;\\\"\" \\\n && cd /root/map1 \\\n && su postgres -c \"./get_data_pgis\"\nRUN /etc/init.d/postgresql start \\\n && cd /root/map1 \\\n && git pull \\\n && cd /root/map1/vodak \\\n && su postgres -c \"./vodak.py gis_eu > /tmp/vodak.sql\" \\\n && su postgres -c \"psql -d gis_eu < vodak.sql\" \\\n && unlink /tmp/vodak.sql\nRUN cd /root/map1/stylesheets/general/prepare-db \\\n && cd /root/map1 \\\n && git pull \\\n && su postgres -c \"php ./get-sql.php | psql -d gis_eu\"\nCOPY srtm /root/map1/data/dem/\n","originalDockerfileUglifiedHash":"21e716e7e6dfd87aaa68504eb7d1590d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/da43a5418ef926ce226214afa406cc3af13600fa.dockerfile"}