{"seed":1242204422,"processedDockerfileHash":"d3b973479de3329ba5b404a60a078ee7","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"#  ################################################################\n#   Dockerfile\n#\n#   Version:          1.0\n#   Software:         OptiType\n#   Software Version: 1.3\n#   Description:      Accurate NGS-based 4-digit HLA typing\n#   Website:          https://github.com/FRED-2/OptiType/\n#   Tags:             Genomics\n#   Provides:         OptiType 1.3\n#   Base Image:       biodckr/biodocker\n#   Build Cmd:        docker build --rm -t fred2/opitype .\n#   Pull Cmd:         docker pull fred2/optitype\n#   Run Cmd:          docker run -v /path/to/file/dir:/data fred2/optitype\n#  ################################################################\n#   Source Image\nFROM biocontainers/biocontainers:latest\n#  ################# BEGIN INSTALLATION ###########################\nUSER root\n#   install\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.99.35 -y \\\n && apt-get update \\\n && apt-get install --no-install-recommends gcc-4.9 g++-4.9 coinor-cbc=2.10.8+ds1-1 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 libbz2-dev=1.0.8-5build1 -y \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9 \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean \\\n && apt-get purge\n#  HLA Typing\n#  OptiType dependecies\nRUN curl -O https://support.hdfgroup.org/ftp/HDF5/current18/bin/hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && tar -xvf hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/bin/* /usr/local/bin/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/lib/* /usr/local/lib/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/include/* /usr/local/include/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/share/* /usr/local/share/ \\\n && rm -rf hdf5-1.8.21-Std-centos7-x86_64-shared_64/ \\\n && rm -f hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz\nENV LD_LIBRARY_PATH=\"/usr/local/lib:$LD_LIBRARY_PATH\"\nENV HDF5_DIR=\"/usr/local/\"\nRUN pip install pip==23.1 --upgrade \\\n && pip install numpy==1.24.2 pyomo==6.5.0 pysam==0.21.0 matplotlib==3.7.1 tables==3.8.0 pandas==2.0.0 future==0.18.3\n#  installing optitype form git repository (version Dec 09 2015) and wirtig config.ini\nRUN git clone https://github.com/FRED-2/OptiType.git \\\n && sed -i -e '1i#!/usr/bin/env python\\' OptiType/OptiTypePipeline.py \\\n && mv OptiType/ /usr/local/bin/ \\\n && chmod 777 /usr/local/bin/OptiType/OptiTypePipeline.py \\\n && echo \"[mapping]\\nrazers3=/usr/local/bin/razers3 \\nthreads=1 \\n\\n[ilp]\\nsolver=cbc \\nthreads=1 \\n\\n[behavior]\\ndeletebam=true \\nunpaired_weight=0 \\nuse_discordant=false\\n\" >> /usr/local/bin/OptiType/config.ini\n#  installing razers3\nRUN git clone https://github.com/seqan/seqan.git seqan-src \\\n && cd seqan-src \\\n && cmake -DCMAKE_BUILD_TYPE=Release \\\n && make razers3 \\\n && cp bin/razers3 /usr/local/bin \\\n && cd .. \\\n && rm -rf seqan-src\nENV PATH=\"/usr/local/bin/OptiType:$PATH\"\n#   Change user to back to biodocker\nUSER biodocker\n#   Change workdir to /data/\nWORKDIR /data/\n#   Define default command\nENTRYPOINT [\"OptiTypePipeline.py\"]\nCMD [\"-h\"]\n#  #################### INSTALLATION END ##########################\n#   File Author / Maintainer\nMAINTAINER Benjamin Schubert <schubert@informatik.uni-tuebingen.de>\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ################################################################\n#  Dockerfile\n#\n#  Version:          1.0\n#  Software:         OptiType\n#  Software Version: 1.3\n#  Description:      Accurate NGS-based 4-digit HLA typing\n#  Website:          https://github.com/FRED-2/OptiType/\n#  Tags:             Genomics\n#  Provides:         OptiType 1.3\n#  Base Image:       biodckr/biodocker\n#  Build Cmd:        docker build --rm -t fred2/opitype .\n#  Pull Cmd:         docker pull fred2/optitype\n#  Run Cmd:          docker run -v /path/to/file/dir:/data fred2/optitype\n# ################################################################\n#  Source Image\nFROM biocontainers/biocontainers:latest\n# ################# BEGIN INSTALLATION ###########################\nUSER root\n#  install\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && apt-get update \\\n && apt-get install gcc-4.9 g++-4.9 coinor-cbc zlib1g-dev libbz2-dev -y \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9 \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean \\\n && apt-get purge\n# HLA Typing\n# OptiType dependecies\nRUN curl -O https://support.hdfgroup.org/ftp/HDF5/current18/bin/hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && tar -xvf hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/bin/* /usr/local/bin/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/lib/* /usr/local/lib/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/include/* /usr/local/include/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/share/* /usr/local/share/ \\\n && rm -rf hdf5-1.8.21-Std-centos7-x86_64-shared_64/ \\\n && rm -f hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz\nENV LD_LIBRARY_PATH=\"/usr/local/lib:$LD_LIBRARY_PATH\"\nENV HDF5_DIR=\"/usr/local/\"\nRUN pip install pip --upgrade \\\n && pip install numpy pyomo pysam matplotlib tables pandas future\n# installing optitype form git repository (version Dec 09 2015) and wirtig config.ini\nRUN git clone https://github.com/FRED-2/OptiType.git \\\n && sed -i -e '1i#!/usr/bin/env python\\' OptiType/OptiTypePipeline.py \\\n && mv OptiType/ /usr/local/bin/ \\\n && chmod 777 /usr/local/bin/OptiType/OptiTypePipeline.py \\\n && echo \"[mapping]\\nrazers3=/usr/local/bin/razers3 \\nthreads=1 \\n\\n[ilp]\\nsolver=cbc \\nthreads=1 \\n\\n[behavior]\\ndeletebam=true \\nunpaired_weight=0 \\nuse_discordant=false\\n\" >> /usr/local/bin/OptiType/config.ini\n# installing razers3\nRUN git clone https://github.com/seqan/seqan.git seqan-src \\\n && cd seqan-src \\\n && cmake -DCMAKE_BUILD_TYPE=Release \\\n && make razers3 \\\n && cp bin/razers3 /usr/local/bin \\\n && cd .. \\\n && rm -rf seqan-src\nENV PATH=\"/usr/local/bin/OptiType:$PATH\"\n#  Change user to back to biodocker\nUSER biodocker\n#  Change workdir to /data/\nWORKDIR /data/\n#  Define default command\nENTRYPOINT [\"OptiTypePipeline.py\"]\nCMD [\"-h\"]\n# #################### INSTALLATION END ##########################\n#  File Author / Maintainer\nMAINTAINER Benjamin Schubert <schubert@informatik.uni-tuebingen.de>\n","injectedSmells":[],"originalDockerfileHash":"9cab607d00fa5e55d2b621bd4a0a8906","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ################################################################\n#   Dockerfile\n#\n#   Version:          1.0\n#   Software:         OptiType\n#   Software Version: 1.3\n#   Description:      Accurate NGS-based 4-digit HLA typing\n#   Website:          https://github.com/FRED-2/OptiType/\n#   Tags:             Genomics\n#   Provides:         OptiType 1.3\n#   Base Image:       biodckr/biodocker\n#   Build Cmd:        docker build --rm -t fred2/opitype .\n#   Pull Cmd:         docker pull fred2/optitype\n#   Run Cmd:          docker run -v /path/to/file/dir:/data fred2/optitype\n#  ################################################################\n#   Source Image\nFROM biocontainers/biocontainers:latest\n#  ################# BEGIN INSTALLATION ###########################\nUSER root\n#   install\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && apt-get update \\\n && apt-get install gcc-4.9 g++-4.9 coinor-cbc zlib1g-dev libbz2-dev -y \\\n && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9 \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean \\\n && apt-get purge\n#  HLA Typing\n#  OptiType dependecies\nRUN curl -O https://support.hdfgroup.org/ftp/HDF5/current18/bin/hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && tar -xvf hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/bin/* /usr/local/bin/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/lib/* /usr/local/lib/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/include/* /usr/local/include/ \\\n && mv hdf5-1.8.21-Std-centos7-x86_64-shared_64/share/* /usr/local/share/ \\\n && rm -rf hdf5-1.8.21-Std-centos7-x86_64-shared_64/ \\\n && rm -f hdf5-1.8.21-Std-centos7-x86_64-shared_64.tar.gz\nENV LD_LIBRARY_PATH=\"/usr/local/lib:$LD_LIBRARY_PATH\"\nENV HDF5_DIR=\"/usr/local/\"\nRUN pip install pip --upgrade \\\n && pip install numpy pyomo pysam matplotlib tables pandas future\n#  installing optitype form git repository (version Dec 09 2015) and wirtig config.ini\nRUN git clone https://github.com/FRED-2/OptiType.git \\\n && sed -i -e '1i#!/usr/bin/env python\\' OptiType/OptiTypePipeline.py \\\n && mv OptiType/ /usr/local/bin/ \\\n && chmod 777 /usr/local/bin/OptiType/OptiTypePipeline.py \\\n && echo \"[mapping]\\nrazers3=/usr/local/bin/razers3 \\nthreads=1 \\n\\n[ilp]\\nsolver=cbc \\nthreads=1 \\n\\n[behavior]\\ndeletebam=true \\nunpaired_weight=0 \\nuse_discordant=false\\n\" >> /usr/local/bin/OptiType/config.ini\n#  installing razers3\nRUN git clone https://github.com/seqan/seqan.git seqan-src \\\n && cd seqan-src \\\n && cmake -DCMAKE_BUILD_TYPE=Release \\\n && make razers3 \\\n && cp bin/razers3 /usr/local/bin \\\n && cd .. \\\n && rm -rf seqan-src\nENV PATH=\"/usr/local/bin/OptiType:$PATH\"\n#   Change user to back to biodocker\nUSER biodocker\n#   Change workdir to /data/\nWORKDIR /data/\n#   Define default command\nENTRYPOINT [\"OptiTypePipeline.py\"]\nCMD [\"-h\"]\n#  #################### INSTALLATION END ##########################\n#   File Author / Maintainer\nMAINTAINER Benjamin Schubert <schubert@informatik.uni-tuebingen.de>\n","originalDockerfileUglifiedHash":"0145c51c9e465e1be9b401a0733940ba","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/226fcae68dc1ec8f2f45e8aca00325d4048f1191.dockerfile"}