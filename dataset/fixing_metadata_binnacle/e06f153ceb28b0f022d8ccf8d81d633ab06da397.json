{"seed":2637550670,"processedDockerfileHash":"50b4f8ac180fce880cbd95fbf209d30e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:edge\nMAINTAINER Onni Hakala - Geniem Oy. <onni.hakala@geniem.com>\n#   Install dependencies and small amount of devtools\nRUN apk add curl=8.0.1-r1 bash=5.2.15-r2 nano=7.2-r0 nginx=1.22.1-r0 ca-certificates=20230106-r0 libssh2=1.10.0-r3 libpng=1.6.39-r2 freetype=2.13.0-r2 libjpeg-turbo=2.1.5.1-r1 libgcc=12.2.1_git20220924-r9 libxml2=2.10.4-r0 libstdc++=12.2.1_git20220924-r9 icu-libs=72.1-r2 libltdl=2.4.7-r1 libmcrypt=2.5.8-r10 ncurses=6.4_p20230401-r2 msmtp=1.8.23-r0 gettext=0.21.1-r2 mysql-client=10.11.2-r4 tzdata=2023c-r0 php5 php5-fpm php5-json php5-zlib php5-xml php5-pdo php5-phar php5-openssl php5-pdo_mysql php5-mysqli php5-gd php5-mcrypt php5-curl php5-opcache php5-ctype php5-intl php5-bcmath php5-dom php5-xmlreader php5-apcu php5-mysql php5-iconv --update \\\n && ln -s /etc/php5 /etc/php \\\n && ln -s /usr/lib/php5 /usr/lib/php \\\n && mkdir -p /var/log/php/ \\\n && mkdir -p /var/log/mail \\\n && apk add musl=1.2.3_git20230322-r0 -u \\\n && deluser nginx \\\n && mkdir -p /var/log/nginx \\\n && mkdir -p /tmp/nginx/body \\\n && rm -rf /var/www/localhost \\\n && mkdir -p /var/www/uploads \\\n && mkdir -p /var/www/project/web \\\n && rm /var/spool/cron/crontabs/root \\\n && curl -L https://github.com/just-containers/s6-overlay/releases/download/v1.17.2.0/s6-overlay-amd64.tar.gz | tar -xvzC / \\\n && curl -L https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar -o /usr/local/bin/wp-cli \\\n && chmod +rx /usr/local/bin/wp-cli \\\n && apk add less=608-r1 \\\n && curl -L https://raw.githubusercontent.com/kvz/cronlock/master/cronlock -o /usr/local/bin/cronlock \\\n && chmod +rx /usr/local/bin/cronlock \\\n && rm -rf /var/cache/apk/* \\\n && rm -rf /tmp/*\n#  #\n#   Add Project files like nginx and php-fpm processes and configs\n#   Also custom scripts and bashrc\n#  #\nCOPY rootfs/ /\n#   Update path with composer files + wpcs\nENV TERM=\"xterm\" \\\n    DB_HOST=\"\" \\\n    DB_NAME=\"\" \\\n    DB_USER=\" DB_PASSWORD= DB_PORT=3306\" \\\n    PORT=\"80\" \\\n    WP_REDIS_PORT=\"6379\" \\\n    WP_REDIS_DATABASE=\"0\" \\\n    WP_REDIS_SCHEME=\"tcp\" \\\n    WP_REDIS_CLIENT=\"pecl\" \\\n    CRONLOCK_HOST=\"\" \\\n    PROJECT_ROOT=\"/var/www/project\" \\\n    WEB_ROOT=\"/var/www/project/web\" \\\n    NGINX_INCLUDE_DIR=\"/var/www/project/nginx\" \\\n    NGINX_MAX_BODY_SIZE=\"64M\" \\\n    NGINX_FASTCGI_TIMEOUT=\"30\" \\\n    PHP_MEMORY_LIMIT=\"128M\" \\\n    WP_CORE=\"/var/www/project/web/wp SMTP_HOST=172.17.0.1\" \\\n    UPLOADS_ROOT=\"/var/www/uploads TZ=Europe/Helsinki\"\n#   Set default path to project folder for easier running commands in project\nWORKDIR ${PROJECT_ROOT}\nEXPOSE ${PORT}\nENTRYPOINT [\"/init\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:edge\nMAINTAINER Onni Hakala - Geniem Oy. <onni.hakala@geniem.com>\n#  Install dependencies and small amount of devtools\nRUN apk add --update curl bash nano nginx ca-certificates libssh2 libpng freetype libjpeg-turbo libgcc libxml2 libstdc++ icu-libs libltdl libmcrypt ncurses msmtp gettext mysql-client tzdata php5 php5-fpm php5-json php5-zlib php5-xml php5-pdo php5-phar php5-openssl php5-pdo_mysql php5-mysqli php5-gd php5-mcrypt php5-curl php5-opcache php5-ctype php5-intl php5-bcmath php5-dom php5-xmlreader php5-apcu php5-mysql php5-iconv \\\n && ln -s /etc/php5 /etc/php \\\n && ln -s /usr/lib/php5 /usr/lib/php \\\n && mkdir -p /var/log/php/ \\\n && mkdir -p /var/log/mail \\\n && apk add -u musl \\\n && deluser nginx \\\n && mkdir -p /var/log/nginx \\\n && mkdir -p /tmp/nginx/body \\\n && rm -rf /var/www/localhost \\\n && mkdir -p /var/www/uploads \\\n && mkdir -p /var/www/project/web \\\n && rm /var/spool/cron/crontabs/root \\\n && curl -L https://github.com/just-containers/s6-overlay/releases/download/v1.17.2.0/s6-overlay-amd64.tar.gz | tar -xvzC / \\\n && curl -L https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar -o /usr/local/bin/wp-cli \\\n && chmod +rx /usr/local/bin/wp-cli \\\n && apk add less \\\n && curl -L https://raw.githubusercontent.com/kvz/cronlock/master/cronlock -o /usr/local/bin/cronlock \\\n && chmod +rx /usr/local/bin/cronlock \\\n && rm -rf /var/cache/apk/* \\\n && rm -rf /tmp/*\n# #\n#  Add Project files like nginx and php-fpm processes and configs\n#  Also custom scripts and bashrc\n# #\nCOPY rootfs/ /\n#  Update path with composer files + wpcs\nENV TERM=\"xterm\" \\\n    DB_HOST=\"\" \\\n    DB_NAME=\"\" \\\n    DB_USER=\" DB_PASSWORD= DB_PORT=3306\" \\\n    PORT=\"80\" \\\n    WP_REDIS_PORT=\"6379\" \\\n    WP_REDIS_DATABASE=\"0\" \\\n    WP_REDIS_SCHEME=\"tcp\" \\\n    WP_REDIS_CLIENT=\"pecl\" \\\n    CRONLOCK_HOST=\"\" \\\n    PROJECT_ROOT=\"/var/www/project\" \\\n    WEB_ROOT=\"/var/www/project/web\" \\\n    NGINX_INCLUDE_DIR=\"/var/www/project/nginx\" \\\n    NGINX_MAX_BODY_SIZE=\"64M\" \\\n    NGINX_FASTCGI_TIMEOUT=\"30\" \\\n    PHP_MEMORY_LIMIT=\"128M\" \\\n    WP_CORE=\"/var/www/project/web/wp SMTP_HOST=172.17.0.1\" \\\n    UPLOADS_ROOT=\"/var/www/uploads TZ=Europe/Helsinki\"\n#  Set default path to project folder for easier running commands in project\nWORKDIR ${PROJECT_ROOT}\nEXPOSE ${PORT}\nENTRYPOINT [\"/init\"]\n","injectedSmells":[],"originalDockerfileHash":"4fef9bdcfd2b9cf559d1ef559d35d44e","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:edge\nMAINTAINER Onni Hakala - Geniem Oy. <onni.hakala@geniem.com>\n#   Install dependencies and small amount of devtools\nRUN apk add --update curl bash nano nginx ca-certificates libssh2 libpng freetype libjpeg-turbo libgcc libxml2 libstdc++ icu-libs libltdl libmcrypt ncurses msmtp gettext mysql-client tzdata php5 php5-fpm php5-json php5-zlib php5-xml php5-pdo php5-phar php5-openssl php5-pdo_mysql php5-mysqli php5-gd php5-mcrypt php5-curl php5-opcache php5-ctype php5-intl php5-bcmath php5-dom php5-xmlreader php5-apcu php5-mysql php5-iconv \\\n && ln -s /etc/php5 /etc/php \\\n && ln -s /usr/lib/php5 /usr/lib/php \\\n && mkdir -p /var/log/php/ \\\n && mkdir -p /var/log/mail \\\n && apk add -u musl \\\n && deluser nginx \\\n && mkdir -p /var/log/nginx \\\n && mkdir -p /tmp/nginx/body \\\n && rm -rf /var/www/localhost \\\n && mkdir -p /var/www/uploads \\\n && mkdir -p /var/www/project/web \\\n && rm /var/spool/cron/crontabs/root \\\n && curl -L https://github.com/just-containers/s6-overlay/releases/download/v1.17.2.0/s6-overlay-amd64.tar.gz | tar -xvzC / \\\n && curl -L https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar -o /usr/local/bin/wp-cli \\\n && chmod +rx /usr/local/bin/wp-cli \\\n && apk add less \\\n && curl -L https://raw.githubusercontent.com/kvz/cronlock/master/cronlock -o /usr/local/bin/cronlock \\\n && chmod +rx /usr/local/bin/cronlock \\\n && rm -rf /var/cache/apk/* \\\n && rm -rf /tmp/*\n#  #\n#   Add Project files like nginx and php-fpm processes and configs\n#   Also custom scripts and bashrc\n#  #\nCOPY rootfs/ /\n#   Update path with composer files + wpcs\nENV TERM=\"xterm\" \\\n    DB_HOST=\"\" \\\n    DB_NAME=\"\" \\\n    DB_USER=\" DB_PASSWORD= DB_PORT=3306\" \\\n    PORT=\"80\" \\\n    WP_REDIS_PORT=\"6379\" \\\n    WP_REDIS_DATABASE=\"0\" \\\n    WP_REDIS_SCHEME=\"tcp\" \\\n    WP_REDIS_CLIENT=\"pecl\" \\\n    CRONLOCK_HOST=\"\" \\\n    PROJECT_ROOT=\"/var/www/project\" \\\n    WEB_ROOT=\"/var/www/project/web\" \\\n    NGINX_INCLUDE_DIR=\"/var/www/project/nginx\" \\\n    NGINX_MAX_BODY_SIZE=\"64M\" \\\n    NGINX_FASTCGI_TIMEOUT=\"30\" \\\n    PHP_MEMORY_LIMIT=\"128M\" \\\n    WP_CORE=\"/var/www/project/web/wp SMTP_HOST=172.17.0.1\" \\\n    UPLOADS_ROOT=\"/var/www/uploads TZ=Europe/Helsinki\"\n#   Set default path to project folder for easier running commands in project\nWORKDIR ${PROJECT_ROOT}\nEXPOSE ${PORT}\nENTRYPOINT [\"/init\"]\n","originalDockerfileUglifiedHash":"b7f4f7a62dff8e0ca1df44d50d10dd67","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e06f153ceb28b0f022d8ccf8d81d633ab06da397.dockerfile"}