{"seed":930698291,"processedDockerfileHash":"bfb533bcd293465c6c47f834d42ad037","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get"],"processedDockerfile":"#   Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#   Licensed under the Educational Community License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#       http://opensource.org/licenses/ECL-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM maven:3.6-jdk-8-slim AS build\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends tar=1.30+dfsg-6 gzip=1.9-3+deb10u1 bzip2=1.0.6-9.2~deb10u2 git=1:2.20.1-2+deb10u8 ca-certificates=20200601~deb10u2 openssl=1.1.1n-0+deb10u4 make=4.2.1-1.2 gcc=4:8.3.0-1 g++=4:8.3.0-1 libc-dev -y \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\"\nUSER \"${OPENCAST_USER}\"\nRUN git clone --recursive \"${OPENCAST_REPO}\" \"${OPENCAST_SRC}\" \\\n && cd \"${OPENCAST_SRC}\" \\\n && git checkout \"${OPENCAST_BRANCH}\" \\\n && mvn --quiet --batch-mode install -DskipTests=true -Dcheckstyle.skip=true -DskipJasmineTests=true \\\n && tar -xzf build/opencast-dist-${OPENCAST_DISTRIBUTION}-*.tar.gz --strip 1 -C \"${OPENCAST_HOME}\" \\\n && rm -rf \"${OPENCAST_SRC}\"/* ~/.m2 ~/.npm ~/.node-gyp\nFROM openjdk:8-jdk-slim-stretch\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-allinone\" \\\n      org.label-schema.description=\"Docker image for the Opencast allinone distribution\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER sh\" \\\n      org.label-schema.docker.cmd.help=\"docker run --rm quay.io/opencast/allinone:7.0 app:help\"\nENV OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\"\nRUN groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_DATA}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_DATA}\"\nCOPY --from=build /usr/local/sbin/su-exec /usr/local/sbin/su-exec\nCOPY --chown=opencast:opencast --from=build \"${OPENCAST_HOME}\" \"${OPENCAST_HOME}\"\nCOPY --chown=opencast:opencast assets/scripts \"${OPENCAST_SCRIPTS}\"\nCOPY --chown=opencast:opencast assets/support \"${OPENCAST_SUPPORT}\"\nCOPY --chown=opencast:opencast assets/etc/* \"${OPENCAST_CONFIG}/\"\nCOPY assets/docker-entrypoint.sh assets/docker-healthcheck.sh /\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20200601~deb10u2 openssl=1.1.1n-0+deb10u4 tzdata=2021a-0+deb10u10 curl=7.64.0-4+deb10u5 jq=1.5+dfsg-2+b1 fontconfig=2.13.1-2 fonts-dejavu=2.37-1 fonts-freefont-ttf=20120503-9 fonts-liberation=1:1.07.4-9 fonts-linuxlibertine=5.3.0-4 hunspell=1.7.0-2 hunspell-en-au=1:2018.04.16-1 hunspell-en-ca=1:2018.04.16-1 hunspell-en-gb=1:6.2.0-1 hunspell-en-us=1:2018.04.16-1 hunspell-en-za=1:6.2.0-1 tesseract-ocr=4.0.0-2 tesseract-ocr-eng=1:4.00~git30-7274cfa-1 ffmpeg=7:4.1.10-0+deb10u1 libavcodec-extra=7:4.1.10-0+deb10u1 sox=14.4.2+git20190427-1+deb10u2 synfig=1.2.2-1 nfs-common=1:1.3.4-2.5+deb10u1 netcat-openbsd=1.195-2 -y \\\n && javac \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\" \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\"\nWORKDIR \"${OPENCAST_HOME}\"\nEXPOSE 8080/tcp\nVOLUME [ \"${OPENCAST_DATA}\" ]\nHEALTHCHECK --timeout=10s CMD /docker-healthcheck.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"app:start\"]\n","originalDockerfile":"#  Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#  Licensed under the Educational Community License, Version 2.0\n#  (the \"License\"); you may not use this file except in compliance with\n#  the License. You may obtain a copy of the License at\n#\n#      http://opensource.org/licenses/ECL-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM maven:3.6-jdk-8-slim AS build\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends tar gzip bzip2 git ca-certificates openssl make gcc g++ libc-dev -y \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\"\nUSER \"${OPENCAST_USER}\"\nRUN git clone --recursive \"${OPENCAST_REPO}\" \"${OPENCAST_SRC}\" \\\n && cd \"${OPENCAST_SRC}\" \\\n && git checkout \"${OPENCAST_BRANCH}\" \\\n && mvn --quiet --batch-mode install -DskipTests=true -Dcheckstyle.skip=true -DskipJasmineTests=true \\\n && tar -xzf build/opencast-dist-${OPENCAST_DISTRIBUTION}-*.tar.gz --strip 1 -C \"${OPENCAST_HOME}\" \\\n && rm -rf \"${OPENCAST_SRC}\"/* ~/.m2 ~/.npm ~/.node-gyp\nFROM openjdk:8-jdk-slim-stretch\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-allinone\" \\\n      org.label-schema.description=\"Docker image for the Opencast allinone distribution\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER sh\" \\\n      org.label-schema.docker.cmd.help=\"docker run --rm quay.io/opencast/allinone:7.0 app:help\"\nENV OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\"\nRUN groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_DATA}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_DATA}\"\nCOPY --from=build /usr/local/sbin/su-exec /usr/local/sbin/su-exec\nCOPY --chown=opencast:opencast --from=build \"${OPENCAST_HOME}\" \"${OPENCAST_HOME}\"\nCOPY --chown=opencast:opencast assets/scripts \"${OPENCAST_SCRIPTS}\"\nCOPY --chown=opencast:opencast assets/support \"${OPENCAST_SUPPORT}\"\nCOPY --chown=opencast:opencast assets/etc/* \"${OPENCAST_CONFIG}/\"\nCOPY assets/docker-entrypoint.sh assets/docker-healthcheck.sh /\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates openssl tzdata curl jq fontconfig fonts-dejavu fonts-freefont-ttf fonts-liberation fonts-linuxlibertine hunspell hunspell-en-au hunspell-en-ca hunspell-en-gb hunspell-en-us hunspell-en-za tesseract-ocr tesseract-ocr-eng ffmpeg libavcodec-extra sox synfig nfs-common netcat-openbsd -y \\\n && javac \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\" \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\"\nWORKDIR \"${OPENCAST_HOME}\"\nEXPOSE 8080/tcp\nVOLUME [ \"${OPENCAST_DATA}\" ]\nHEALTHCHECK --timeout=10s CMD /docker-healthcheck.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"app:start\"]\n","injectedSmells":[],"originalDockerfileHash":"aba403468a5d16fea3cea1f837795433","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n#   Licensed under the Educational Community License, Version 2.0\n#   (the \"License\"); you may not use this file except in compliance with\n#   the License. You may obtain a copy of the License at\n#\n#       http://opensource.org/licenses/ECL-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM maven:3.6-jdk-8-slim AS build\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\nENV OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends tar gzip bzip2 git ca-certificates openssl make gcc g++ libc-dev -y \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\"\nUSER \"${OPENCAST_USER}\"\nRUN git clone --recursive \"${OPENCAST_REPO}\" \"${OPENCAST_SRC}\" \\\n && cd \"${OPENCAST_SRC}\" \\\n && git checkout \"${OPENCAST_BRANCH}\" \\\n && mvn --quiet --batch-mode install -DskipTests=true -Dcheckstyle.skip=true -DskipJasmineTests=true \\\n && tar -xzf build/opencast-dist-${OPENCAST_DISTRIBUTION}-*.tar.gz --strip 1 -C \"${OPENCAST_HOME}\" \\\n && rm -rf \"${OPENCAST_SRC}\"/* ~/.m2 ~/.npm ~/.node-gyp\nFROM openjdk:8-jdk-slim-stretch\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-allinone\" \\\n      org.label-schema.description=\"Docker image for the Opencast allinone distribution\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of Münster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER sh\" \\\n      org.label-schema.docker.cmd.help=\"docker run --rm quay.io/opencast/allinone:7.0 app:help\"\nENV OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_DISTRIBUTION=\"allinone\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\"\nRUN groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_DATA}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_DATA}\"\nCOPY --from=build /usr/local/sbin/su-exec /usr/local/sbin/su-exec\nCOPY --chown=opencast:opencast --from=build \"${OPENCAST_HOME}\" \"${OPENCAST_HOME}\"\nCOPY --chown=opencast:opencast assets/scripts \"${OPENCAST_SCRIPTS}\"\nCOPY --chown=opencast:opencast assets/support \"${OPENCAST_SUPPORT}\"\nCOPY --chown=opencast:opencast assets/etc/* \"${OPENCAST_CONFIG}/\"\nCOPY assets/docker-entrypoint.sh assets/docker-healthcheck.sh /\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates openssl tzdata curl jq fontconfig fonts-dejavu fonts-freefont-ttf fonts-liberation fonts-linuxlibertine hunspell hunspell-en-au hunspell-en-ca hunspell-en-gb hunspell-en-us hunspell-en-za tesseract-ocr tesseract-ocr-eng ffmpeg libavcodec-extra sox synfig nfs-common netcat-openbsd -y \\\n && javac \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\" \\\n && rm -rf /tmp/* /var/lib/apt/lists/* \"${OPENCAST_SCRIPTS}/TryToConnectToDb.java\"\nWORKDIR \"${OPENCAST_HOME}\"\nEXPOSE 8080/tcp\nVOLUME [ \"${OPENCAST_DATA}\" ]\nHEALTHCHECK --timeout=10s CMD /docker-healthcheck.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"app:start\"]\n","originalDockerfileUglifiedHash":"ad56ee7f87fa0bb2da87d4e3a6533475","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a5bcd76da10bbe717ace082ba9a5f1831d2d600f.dockerfile"}