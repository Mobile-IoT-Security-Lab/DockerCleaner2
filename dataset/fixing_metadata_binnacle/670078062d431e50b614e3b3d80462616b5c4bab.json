{"seed":1012482561,"processedDockerfileHash":"efed82905434b7c7a28313c117e224f8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   GCPlot all-in-one dockerfile\n#\nFROM openjdk:8-jdk\nARG GCPLOT_VERSION=2.0.1\nARG CASSANDRA_VERSION=311x\nARG ORIENTDB_VERSION=2.2.13\nENV GCPLOT_MEMORY=\"512m\"\nENV ORIENTDB_MEMORY=\"256m\"\nENV CASSANDRA_MEMORY=\"1g\"\n#   Install packages and create appropriate user\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends wget=1.21-1+deb11u1 curl=7.74.0-1.3+deb11u7 python unzip=6.0-26+deb11u1 nginx=1.18.0-6.1+deb11u3 net-tools=1.60+git20181103.0eebece-1 netcat=1.10-46 -y \\\n && groupadd --system gcserver \\\n && useradd -d /home/gcserver -u 1040 -g gcserver -s /bin/bash gcserver \\\n && mkdir -p /home/gcserver \\\n && mkdir -m 755 -p /home/gcserver/logs \\\n && mkdir -m 755 -p /home/gcserver/config \\\n && mkdir -m 755 -p /home/gcserver/lib \\\n && mkdir -m 777 -p /tmp/gcserver-file-uploads \\\n && chown gcserver:gcserver /tmp/gcserver-file-uploads \\\n && chown -R gcserver:gcserver /home/gcserver\nCOPY gcserver/logback.xml /home/gcserver/config\nCOPY gcserver/gcplot.properties /home/gcserver/config\nCOPY gcserver/gcserver /etc/init.d\nRUN chmod 755 /etc/init.d/gcserver \\\n && chmod -R 755 /home/gcserver/config/*\nRUN wget \"https://downloads.gcplot.com/artifacts/gcserver/${GCPLOT_VERSION}/com.gcplot.web-${GCPLOT_VERSION}-all.jar\" -O /home/gcserver/lib/bootstrap.jar \\\n && chown -R gcserver:gcserver /home/gcserver\n#   Install OrientDB\nRUN groupadd --system orientdb \\\n && useradd -d /var/orientdb -u 1041 -g orientdb -s /bin/bash orientdb \\\n && mkdir -p /var/orientdb \\\n && mkdir -p /var/lib/orientdb \\\n && mkdir -p /var/log/orientdb \\\n && chown -R orientdb:orientdb /var/orientdb \\\n && chown -R orientdb:orientdb /var/lib/orientdb \\\n && chown -R orientdb:orientdb /var/log/orientdb \\\n && wget \"http://orientdb.com/download.php?file=orientdb-community-$ORIENTDB_VERSION.tar.gz&os=multi\" -O /tmp/orientdb.tar.gz \\\n && tar -zvxf /tmp/orientdb.tar.gz --directory /opt \\\n && mv /opt/orientdb-community-$ORIENTDB_VERSION /opt/orientdb \\\n && chown -R orientdb:orientdb /opt/orientdb\nCOPY orientdb/orientdb-server-config.xml /opt/orientdb/config/orientdb-server-config.xml\nCOPY orientdb/orientdb-server-log.properties /opt/orientdb/config/orientdb-server-log.properties\nCOPY orientdb/orientdb.sh /opt/orientdb/bin/orientdb.sh\nRUN cp /opt/orientdb/bin/orientdb.sh /etc/init.d/orientdb \\\n && chmod 755 /etc/init.d/orientdb\n#   Install Cassandra\nRUN echo \"deb http://www.apache.org/dist/cassandra/debian $CASSANDRA_VERSION main\" | tee -a /etc/apt/sources.list.d/cassandra.sources.list \\\n && curl https://www.apache.org/dist/cassandra/KEYS | apt-key add - \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends cassandra -y \\\n && sed -i '/ulimit/d' /etc/init.d/cassandra\nCOPY cassandra/cassandra-rackdc.properties /etc/cassandra/cassandra-rackdc.properties\nCOPY cassandra/cassandra-topology.properties /etc/cassandra/cassandra-topology.properties\nCOPY cassandra/cassandra.yaml /etc/cassandra/cassandra.yaml\nCOPY cassandra/jvm.properties /etc/cassandra/jvm.options\nCOPY cassandra/cdb.cql /etc/cassandra/cdb.cql\nCOPY start.sh /start.sh\nRUN chmod 755 /start.sh\n#   Install UI\nRUN wget \"https://downloads.gcplot.com/artifacts/ui/$GCPLOT_VERSION/gcplot-ui-$GCPLOT_VERSION.tar.gz\" -O /tmp/gcplot-ui.tar.gz \\\n && tar -xvzf /tmp/gcplot-ui.tar.gz -C /tmp \\\n && sed -i \"s/${CACHE_BUSTER}/$( date +%s ;)/g\" /tmp/dist/index.html \\\n && mkdir /var/www/app \\\n && mkdir /var/www/landing \\\n && mv /tmp/dist/* /var/www/app \\\n && mv /tmp/landing/* /var/www/landing \\\n && chmod -R 755 /var/www/*\n#   Configuring nginx\nCOPY nginx/gcplot.conf /etc/nginx/sites-available/gcplot.conf\nCOPY nginx/nginx /etc/nginx/nginx.conf\nRUN ln -s /etc/nginx/sites-available/gcplot.conf /etc/nginx/sites-enabled/gcplot.conf \\\n && rm -rf /etc/nginx/sites-enabled/default \\\n && rm -rf /etc/nginx/sites-available/default\nVOLUME [\"/var/lib/cassandra\", \"/var/lib/orientdb\"]\nEXPOSE 9042/tcp 2424/tcp 2480/tcp 80/tcp\nCMD [\"/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  GCPlot all-in-one dockerfile\n#\nFROM openjdk:8-jdk\nARG GCPLOT_VERSION=2.0.1\nARG CASSANDRA_VERSION=311x\nARG ORIENTDB_VERSION=2.2.13\nENV GCPLOT_MEMORY=\"512m\"\nENV ORIENTDB_MEMORY=\"256m\"\nENV CASSANDRA_MEMORY=\"1g\"\n#  Install packages and create appropriate user\nRUN apt-get update -y \\\n && apt-get install wget curl python unzip nginx net-tools netcat -y \\\n && groupadd --system gcserver \\\n && useradd -d /home/gcserver -u 1040 -g gcserver -s /bin/bash gcserver \\\n && mkdir -p /home/gcserver \\\n && mkdir -m 755 -p /home/gcserver/logs \\\n && mkdir -m 755 -p /home/gcserver/config \\\n && mkdir -m 755 -p /home/gcserver/lib \\\n && mkdir -m 777 -p /tmp/gcserver-file-uploads \\\n && chown gcserver:gcserver /tmp/gcserver-file-uploads \\\n && chown -R gcserver:gcserver /home/gcserver\nCOPY gcserver/logback.xml /home/gcserver/config\nCOPY gcserver/gcplot.properties /home/gcserver/config\nCOPY gcserver/gcserver /etc/init.d\nRUN chmod 755 /etc/init.d/gcserver \\\n && chmod -R 755 /home/gcserver/config/*\nRUN wget \"https://downloads.gcplot.com/artifacts/gcserver/${GCPLOT_VERSION}/com.gcplot.web-${GCPLOT_VERSION}-all.jar\" -O /home/gcserver/lib/bootstrap.jar \\\n && chown -R gcserver:gcserver /home/gcserver\n#  Install OrientDB\nRUN groupadd --system orientdb \\\n && useradd -d /var/orientdb -u 1041 -g orientdb -s /bin/bash orientdb \\\n && mkdir -p /var/orientdb \\\n && mkdir -p /var/lib/orientdb \\\n && mkdir -p /var/log/orientdb \\\n && chown -R orientdb:orientdb /var/orientdb \\\n && chown -R orientdb:orientdb /var/lib/orientdb \\\n && chown -R orientdb:orientdb /var/log/orientdb \\\n && wget \"http://orientdb.com/download.php?file=orientdb-community-$ORIENTDB_VERSION.tar.gz&os=multi\" -O /tmp/orientdb.tar.gz \\\n && tar -zvxf /tmp/orientdb.tar.gz --directory /opt \\\n && mv /opt/orientdb-community-$ORIENTDB_VERSION /opt/orientdb \\\n && chown -R orientdb:orientdb /opt/orientdb\nCOPY orientdb/orientdb-server-config.xml /opt/orientdb/config/orientdb-server-config.xml\nCOPY orientdb/orientdb-server-log.properties /opt/orientdb/config/orientdb-server-log.properties\nCOPY orientdb/orientdb.sh /opt/orientdb/bin/orientdb.sh\nRUN cp /opt/orientdb/bin/orientdb.sh /etc/init.d/orientdb \\\n && chmod 755 /etc/init.d/orientdb\n#  Install Cassandra\nRUN echo \"deb http://www.apache.org/dist/cassandra/debian $CASSANDRA_VERSION main\" | tee -a /etc/apt/sources.list.d/cassandra.sources.list \\\n && curl https://www.apache.org/dist/cassandra/KEYS | apt-key add - \\\n && apt-get update -y \\\n && apt-get install cassandra -y \\\n && sed -i '/ulimit/d' /etc/init.d/cassandra\nCOPY cassandra/cassandra-rackdc.properties /etc/cassandra/cassandra-rackdc.properties\nCOPY cassandra/cassandra-topology.properties /etc/cassandra/cassandra-topology.properties\nCOPY cassandra/cassandra.yaml /etc/cassandra/cassandra.yaml\nCOPY cassandra/jvm.properties /etc/cassandra/jvm.options\nCOPY cassandra/cdb.cql /etc/cassandra/cdb.cql\nCOPY start.sh /start.sh\nRUN chmod 755 /start.sh\n#  Install UI\nRUN wget \"https://downloads.gcplot.com/artifacts/ui/$GCPLOT_VERSION/gcplot-ui-$GCPLOT_VERSION.tar.gz\" -O /tmp/gcplot-ui.tar.gz \\\n && tar -xvzf /tmp/gcplot-ui.tar.gz -C /tmp \\\n && sed -i \"s/${CACHE_BUSTER}/$( date +%s ;)/g\" /tmp/dist/index.html \\\n && mkdir /var/www/app \\\n && mkdir /var/www/landing \\\n && mv /tmp/dist/* /var/www/app \\\n && mv /tmp/landing/* /var/www/landing \\\n && chmod -R 755 /var/www/*\n#  Configuring nginx\nCOPY nginx/gcplot.conf /etc/nginx/sites-available/gcplot.conf\nCOPY nginx/nginx /etc/nginx/nginx.conf\nRUN ln -s /etc/nginx/sites-available/gcplot.conf /etc/nginx/sites-enabled/gcplot.conf \\\n && rm -rf /etc/nginx/sites-enabled/default \\\n && rm -rf /etc/nginx/sites-available/default\nVOLUME [\"/var/lib/cassandra\", \"/var/lib/orientdb\"]\nEXPOSE 9042/tcp 2424/tcp 2480/tcp 80/tcp\nCMD [\"/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"1fb896e2a544c834d78bbc7d3c594201","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   GCPlot all-in-one dockerfile\n#\nFROM openjdk:8-jdk\nARG GCPLOT_VERSION=2.0.1\nARG CASSANDRA_VERSION=311x\nARG ORIENTDB_VERSION=2.2.13\nENV GCPLOT_MEMORY=\"512m\"\nENV ORIENTDB_MEMORY=\"256m\"\nENV CASSANDRA_MEMORY=\"1g\"\n#   Install packages and create appropriate user\nRUN apt-get update -y \\\n && apt-get install wget curl python unzip nginx net-tools netcat -y \\\n && groupadd --system gcserver \\\n && useradd -d /home/gcserver -u 1040 -g gcserver -s /bin/bash gcserver \\\n && mkdir -p /home/gcserver \\\n && mkdir -m 755 -p /home/gcserver/logs \\\n && mkdir -m 755 -p /home/gcserver/config \\\n && mkdir -m 755 -p /home/gcserver/lib \\\n && mkdir -m 777 -p /tmp/gcserver-file-uploads \\\n && chown gcserver:gcserver /tmp/gcserver-file-uploads \\\n && chown -R gcserver:gcserver /home/gcserver\nCOPY gcserver/logback.xml /home/gcserver/config\nCOPY gcserver/gcplot.properties /home/gcserver/config\nCOPY gcserver/gcserver /etc/init.d\nRUN chmod 755 /etc/init.d/gcserver \\\n && chmod -R 755 /home/gcserver/config/*\nRUN wget \"https://downloads.gcplot.com/artifacts/gcserver/${GCPLOT_VERSION}/com.gcplot.web-${GCPLOT_VERSION}-all.jar\" -O /home/gcserver/lib/bootstrap.jar \\\n && chown -R gcserver:gcserver /home/gcserver\n#   Install OrientDB\nRUN groupadd --system orientdb \\\n && useradd -d /var/orientdb -u 1041 -g orientdb -s /bin/bash orientdb \\\n && mkdir -p /var/orientdb \\\n && mkdir -p /var/lib/orientdb \\\n && mkdir -p /var/log/orientdb \\\n && chown -R orientdb:orientdb /var/orientdb \\\n && chown -R orientdb:orientdb /var/lib/orientdb \\\n && chown -R orientdb:orientdb /var/log/orientdb \\\n && wget \"http://orientdb.com/download.php?file=orientdb-community-$ORIENTDB_VERSION.tar.gz&os=multi\" -O /tmp/orientdb.tar.gz \\\n && tar -zvxf /tmp/orientdb.tar.gz --directory /opt \\\n && mv /opt/orientdb-community-$ORIENTDB_VERSION /opt/orientdb \\\n && chown -R orientdb:orientdb /opt/orientdb\nCOPY orientdb/orientdb-server-config.xml /opt/orientdb/config/orientdb-server-config.xml\nCOPY orientdb/orientdb-server-log.properties /opt/orientdb/config/orientdb-server-log.properties\nCOPY orientdb/orientdb.sh /opt/orientdb/bin/orientdb.sh\nRUN cp /opt/orientdb/bin/orientdb.sh /etc/init.d/orientdb \\\n && chmod 755 /etc/init.d/orientdb\n#   Install Cassandra\nRUN echo \"deb http://www.apache.org/dist/cassandra/debian $CASSANDRA_VERSION main\" | tee -a /etc/apt/sources.list.d/cassandra.sources.list \\\n && curl https://www.apache.org/dist/cassandra/KEYS | apt-key add - \\\n && apt-get update -y \\\n && apt-get install cassandra -y \\\n && sed -i '/ulimit/d' /etc/init.d/cassandra\nCOPY cassandra/cassandra-rackdc.properties /etc/cassandra/cassandra-rackdc.properties\nCOPY cassandra/cassandra-topology.properties /etc/cassandra/cassandra-topology.properties\nCOPY cassandra/cassandra.yaml /etc/cassandra/cassandra.yaml\nCOPY cassandra/jvm.properties /etc/cassandra/jvm.options\nCOPY cassandra/cdb.cql /etc/cassandra/cdb.cql\nCOPY start.sh /start.sh\nRUN chmod 755 /start.sh\n#   Install UI\nRUN wget \"https://downloads.gcplot.com/artifacts/ui/$GCPLOT_VERSION/gcplot-ui-$GCPLOT_VERSION.tar.gz\" -O /tmp/gcplot-ui.tar.gz \\\n && tar -xvzf /tmp/gcplot-ui.tar.gz -C /tmp \\\n && sed -i \"s/${CACHE_BUSTER}/$( date +%s ;)/g\" /tmp/dist/index.html \\\n && mkdir /var/www/app \\\n && mkdir /var/www/landing \\\n && mv /tmp/dist/* /var/www/app \\\n && mv /tmp/landing/* /var/www/landing \\\n && chmod -R 755 /var/www/*\n#   Configuring nginx\nCOPY nginx/gcplot.conf /etc/nginx/sites-available/gcplot.conf\nCOPY nginx/nginx /etc/nginx/nginx.conf\nRUN ln -s /etc/nginx/sites-available/gcplot.conf /etc/nginx/sites-enabled/gcplot.conf \\\n && rm -rf /etc/nginx/sites-enabled/default \\\n && rm -rf /etc/nginx/sites-available/default\nVOLUME [\"/var/lib/cassandra\", \"/var/lib/orientdb\"]\nEXPOSE 9042/tcp 2424/tcp 2480/tcp 80/tcp\nCMD [\"/start.sh\"]\n","originalDockerfileUglifiedHash":"78dafca846613ed0fd42d56bf6600362","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/670078062d431e50b614e3b3d80462616b5c4bab.dockerfile"}