{"seed":3987584973,"processedDockerfileHash":"9296306e13a00243e06c01e4b9e01a03","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:17.10\nMAINTAINER Christian Schafmeister <meister@temple.edu>\n#   add LLVM repo\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install --no-install-recommends wget curl -y\nRUN curl http://apt.llvm.org/llvm-snapshot.gpg.key | apt-key add -\nRUN echo 'deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main' > /etc/apt/sources.list.d/llvm4.list\n#   Copied from the original dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install --no-install-recommends libunwind-dev liblzma-dev libgmp-dev binutils-gold binutils-dev zlib1g-dev libbz2-dev libexpat-dev -y\n#   Maybe need these...\n#    libncurses-dev libboost-filesystem-dev libboost-regex-dev \\\n#    libboost-date-time-dev libboost-program-options-dev libboost-system-dev \\\n#    libboost-iostreams-dev csh flex gfortran \\\n#    clang-6.0 libclang-common-6.0-dev libclang-6.0-dev libclang1-6.0 clang1-6.0-dbg \\\n#    libllvm5.0 libllvm5.0-dbg lldb-6.0 llvm-6.0 llvm-6.0-dev llvm-6.0-doc \\\n#    llvm-6.0-runtime clang-format-6.0 python-clang-6.0 lld-6.0\n#   install clasp runtime dependencies\nRUN apt-get install --no-install-recommends libboost-filesystem1.62.0 libboost-date-time1.62.0 libboost-program-options1.62.0 libboost-iostreams1.62.0 libgc1c2 llvm-6.0-runtime libgmpxx4ldbl clang-6.0 binutils python-clang-6.0 lld-6.0 libzmq3-dev -y \\\n && apt-get clean\n#   add app user\nRUN groupadd -g 9999 app \\\n && useradd -u 9999 -g 9999 -ms /bin/bash app\nENV HOME=\"/home/app\"\nRUN apt-get install --no-install-recommends python3.6 -y\nRUN cd /tmp \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\nRUN cd /tmp \\\n && bash Miniconda3-latest-Linux-x86_64.sh -b -p /home/app/miniconda\nENV PATH=\"/home/app/miniconda/bin:$PATH\"\nRUN /bin/bash -c \"source /home/app/miniconda/bin/activate\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends git-core -y\n#   AWS command-line utilities\nRUN apt-get install --no-install-recommends python-setuptools python-dev build-essential -y\nUSER root\n#   Install sudo\nRUN apt-get install --no-install-recommends sudo -y\nRUN easy_install pip\nRUN pip install awscli==1.27.114\nRUN whoami\nRUN python -m pip install numpy\nRUN apt-get install --no-install-recommends nodejs npm -y\nRUN conda create -n lab python=3.6 -y\nRUN /bin/bash -c \"source activate lab\"\n#  RUN conda install ipywidgets=7.1.2 -c conda-forge -y\nRUN conda install ipywidgets -c conda-forge -y\nRUN pip install nglview==1.1.2\nRUN nglview enable\nRUN conda install jupyterlab=0.32 -y -c conda-forge\nRUN pip install bqplot==0.12.39\nRUN jupyter-labextension install @jupyter-widgets/jupyterlab-manager nglview-js-widgets@1.1.2 bqplot\n#  RUN jupyter-labextension install nglview-js-widgets@1.1.2\nCOPY build/cando-build.tgz /home/app/clasp\nCOPY tools/dockerfiles/jupyter/kernels /home/app/.local/share/jupyter/kernels\nCOPY tools/dockerfiles/jupyter/jupyter_notebook_config.py /home/app/.jupyter/jupyter_notebook_config.py\n#   RUN chown -R app:app /home/app/.jupyter /home/app/.local\n#  USER app\nWORKDIR $HOME\nENV PATH=\"\\\"$PATH:$HOME/clasp/bin\\\"\"\n#   checkout quicklisp and its subprojects\nRUN git clone --depth=1 https://github.com/quicklisp/quicklisp-client.git $HOME/quicklisp\nRUN mkdir $HOME/quicklisp/local-projects\n#   Checkout quicklisp stuff - but not needed\nRUN cd $HOME/quicklisp/local-projects \\\n && git clone --depth=1 https://github.com/clasp-developers/usocket.git \\\n && git clone --depth=1 https://github.com/drmeister/cl-jupyter.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-jupyter-widgets.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-nglview.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-bqplot.git \\\n && git clone --depth=1 https://github.com/clasp-developers/uuid.git \\\n && git clone --depth=1 https://github.com/clasp-developers/trivial-backtrace.git \\\n && git clone --depth=1 https://github.com/clasp-developers/bordeaux-threads.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cffi.git\n#   checkout slime\nRUN git clone --depth=1 https://github.com/slime/slime $HOME/slime\nRUN clasp -l \"/home/app/quicklisp/setup.lisp\" -e '(setq core::*swank-home* \"/home/app/slime\")' -e '(load (format nil \"~a/swank-loader.lisp\" core::*swank-home*))' -e \"(swank-loader:init :delete nil :reload nil :load-contribs nil)\" -e \"(core:quit)\"\nCOPY --chown=app:app build/ambertools18-docker.tar.gz /home/app\nENV AMBERHOME=\"/home/app/amber18/\"\nRUN cp /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/ATOMTYPE_SYBYL.DEF /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/atomtype_sybyl.def\nCOPY tools/dockerfiles/start-demos.sh /home/app/start-demos.sh\nCOPY demos.tar /home/app/\nRUN apt-get install --no-install-recommends libgfortran4 -y\nENV HOME=\"/home/app/\"\nENTRYPOINT [\"jupyter\", \"lab\"]\nCMD [\"--allow-root\", \"--no-browser\", \"--ip=0.0.0.0\", \"--port=8888\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:17.10\nMAINTAINER Christian Schafmeister <meister@temple.edu>\n#  add LLVM repo\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install wget curl -y\nRUN curl http://apt.llvm.org/llvm-snapshot.gpg.key | apt-key add -\nRUN echo 'deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main' > /etc/apt/sources.list.d/llvm4.list\n#  Copied from the original dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install libunwind-dev liblzma-dev libgmp-dev binutils-gold binutils-dev zlib1g-dev libbz2-dev libexpat-dev -y\n#  Maybe need these...\n#   libncurses-dev libboost-filesystem-dev libboost-regex-dev \\\n#   libboost-date-time-dev libboost-program-options-dev libboost-system-dev \\\n#   libboost-iostreams-dev csh flex gfortran \\\n#   clang-6.0 libclang-common-6.0-dev libclang-6.0-dev libclang1-6.0 clang1-6.0-dbg \\\n#   libllvm5.0 libllvm5.0-dbg lldb-6.0 llvm-6.0 llvm-6.0-dev llvm-6.0-doc \\\n#   llvm-6.0-runtime clang-format-6.0 python-clang-6.0 lld-6.0\n#  install clasp runtime dependencies\nRUN apt-get install libboost-filesystem1.62.0 libboost-date-time1.62.0 libboost-program-options1.62.0 libboost-iostreams1.62.0 libgc1c2 llvm-6.0-runtime libgmpxx4ldbl clang-6.0 binutils python-clang-6.0 lld-6.0 libzmq3-dev -y \\\n && apt-get clean\n#  add app user\nRUN groupadd -g 9999 app \\\n && useradd -u 9999 -g 9999 -ms /bin/bash app\nENV HOME=\"/home/app\"\nRUN apt-get install python3.6 -y\nRUN cd /tmp \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\nRUN cd /tmp \\\n && bash Miniconda3-latest-Linux-x86_64.sh -b -p /home/app/miniconda\nENV PATH=\"/home/app/miniconda/bin:$PATH\"\nRUN /bin/bash -c \"source /home/app/miniconda/bin/activate\"\nRUN apt-get update \\\n && apt-get install git-core -y\n#  AWS command-line utilities\nRUN apt-get install python-setuptools python-dev build-essential -y\nUSER root\n#  Install sudo\nRUN apt-get install sudo -y\nRUN easy_install pip\nRUN pip install awscli\nRUN whoami\nRUN python -m pip install numpy\nRUN apt-get install nodejs npm -y\nRUN conda create -n lab python=3.6 -y\nRUN /bin/bash -c \"source activate lab\"\n# RUN conda install ipywidgets=7.1.2 -c conda-forge -y\nRUN conda install ipywidgets -c conda-forge -y\nRUN pip install nglview==1.1.2\nRUN nglview enable\nRUN conda install jupyterlab=0.32 -y -c conda-forge\nRUN pip install bqplot\nRUN jupyter-labextension install @jupyter-widgets/jupyterlab-manager nglview-js-widgets@1.1.2 bqplot\n# RUN jupyter-labextension install nglview-js-widgets@1.1.2\nADD build/cando-build.tgz /home/app/clasp\nADD tools/dockerfiles/jupyter/kernels /home/app/.local/share/jupyter/kernels\nADD tools/dockerfiles/jupyter/jupyter_notebook_config.py /home/app/.jupyter/jupyter_notebook_config.py\n#  RUN chown -R app:app /home/app/.jupyter /home/app/.local\n# USER app\nWORKDIR $HOME\nENV PATH=\"\\\"$PATH:$HOME/clasp/bin\\\"\"\n#  checkout quicklisp and its subprojects\nRUN git clone --depth=1 https://github.com/quicklisp/quicklisp-client.git $HOME/quicklisp\nRUN mkdir $HOME/quicklisp/local-projects\n#  Checkout quicklisp stuff - but not needed\nRUN cd $HOME/quicklisp/local-projects \\\n && git clone --depth=1 https://github.com/clasp-developers/usocket.git \\\n && git clone --depth=1 https://github.com/drmeister/cl-jupyter.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-jupyter-widgets.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-nglview.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-bqplot.git \\\n && git clone --depth=1 https://github.com/clasp-developers/uuid.git \\\n && git clone --depth=1 https://github.com/clasp-developers/trivial-backtrace.git \\\n && git clone --depth=1 https://github.com/clasp-developers/bordeaux-threads.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cffi.git\n#  checkout slime\nRUN git clone --depth=1 https://github.com/slime/slime $HOME/slime\nRUN clasp -l \"/home/app/quicklisp/setup.lisp\" -e '(setq core::*swank-home* \"/home/app/slime\")' -e '(load (format nil \"~a/swank-loader.lisp\" core::*swank-home*))' -e \"(swank-loader:init :delete nil :reload nil :load-contribs nil)\" -e \"(core:quit)\"\nADD --chown=app:app build/ambertools18-docker.tar.gz /home/app\nENV AMBERHOME=\"/home/app/amber18/\"\nRUN cp /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/ATOMTYPE_SYBYL.DEF /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/atomtype_sybyl.def\nADD tools/dockerfiles/start-demos.sh /home/app/start-demos.sh\nADD demos.tar /home/app/\nRUN apt-get install libgfortran4 -y\nENV HOME=\"/home/app/\"\nENTRYPOINT [\"jupyter\", \"lab\"]\nCMD [\"--allow-root\", \"--no-browser\", \"--ip=0.0.0.0\", \"--port=8888\"]\n","injectedSmells":[],"originalDockerfileHash":"af00a34628cbba1ef08d9133edadb7cd","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:17.10\nMAINTAINER Christian Schafmeister <meister@temple.edu>\n#   add LLVM repo\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install wget curl -y\nRUN curl http://apt.llvm.org/llvm-snapshot.gpg.key | apt-key add -\nRUN echo 'deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main' > /etc/apt/sources.list.d/llvm4.list\n#   Copied from the original dependencies\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get install libunwind-dev liblzma-dev libgmp-dev binutils-gold binutils-dev zlib1g-dev libbz2-dev libexpat-dev -y\n#   Maybe need these...\n#    libncurses-dev libboost-filesystem-dev libboost-regex-dev \\\n#    libboost-date-time-dev libboost-program-options-dev libboost-system-dev \\\n#    libboost-iostreams-dev csh flex gfortran \\\n#    clang-6.0 libclang-common-6.0-dev libclang-6.0-dev libclang1-6.0 clang1-6.0-dbg \\\n#    libllvm5.0 libllvm5.0-dbg lldb-6.0 llvm-6.0 llvm-6.0-dev llvm-6.0-doc \\\n#    llvm-6.0-runtime clang-format-6.0 python-clang-6.0 lld-6.0\n#   install clasp runtime dependencies\nRUN apt-get install libboost-filesystem1.62.0 libboost-date-time1.62.0 libboost-program-options1.62.0 libboost-iostreams1.62.0 libgc1c2 llvm-6.0-runtime libgmpxx4ldbl clang-6.0 binutils python-clang-6.0 lld-6.0 libzmq3-dev -y \\\n && apt-get clean\n#   add app user\nRUN groupadd -g 9999 app \\\n && useradd -u 9999 -g 9999 -ms /bin/bash app\nENV HOME=\"/home/app\"\nRUN apt-get install python3.6 -y\nRUN cd /tmp \\\n && wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\nRUN cd /tmp \\\n && bash Miniconda3-latest-Linux-x86_64.sh -b -p /home/app/miniconda\nENV PATH=\"/home/app/miniconda/bin:$PATH\"\nRUN /bin/bash -c \"source /home/app/miniconda/bin/activate\"\nRUN apt-get update \\\n && apt-get install git-core -y\n#   AWS command-line utilities\nRUN apt-get install python-setuptools python-dev build-essential -y\nUSER root\n#   Install sudo\nRUN apt-get install sudo -y\nRUN easy_install pip\nRUN pip install awscli\nRUN whoami\nRUN python -m pip install numpy\nRUN apt-get install nodejs npm -y\nRUN conda create -n lab python=3.6 -y\nRUN /bin/bash -c \"source activate lab\"\n#  RUN conda install ipywidgets=7.1.2 -c conda-forge -y\nRUN conda install ipywidgets -c conda-forge -y\nRUN pip install nglview==1.1.2\nRUN nglview enable\nRUN conda install jupyterlab=0.32 -y -c conda-forge\nRUN pip install bqplot\nRUN jupyter-labextension install @jupyter-widgets/jupyterlab-manager nglview-js-widgets@1.1.2 bqplot\n#  RUN jupyter-labextension install nglview-js-widgets@1.1.2\nADD build/cando-build.tgz /home/app/clasp\nADD tools/dockerfiles/jupyter/kernels /home/app/.local/share/jupyter/kernels\nADD tools/dockerfiles/jupyter/jupyter_notebook_config.py /home/app/.jupyter/jupyter_notebook_config.py\n#   RUN chown -R app:app /home/app/.jupyter /home/app/.local\n#  USER app\nWORKDIR $HOME\nENV PATH=\"\\\"$PATH:$HOME/clasp/bin\\\"\"\n#   checkout quicklisp and its subprojects\nRUN git clone --depth=1 https://github.com/quicklisp/quicklisp-client.git $HOME/quicklisp\nRUN mkdir $HOME/quicklisp/local-projects\n#   Checkout quicklisp stuff - but not needed\nRUN cd $HOME/quicklisp/local-projects \\\n && git clone --depth=1 https://github.com/clasp-developers/usocket.git \\\n && git clone --depth=1 https://github.com/drmeister/cl-jupyter.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-jupyter-widgets.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-nglview.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cl-bqplot.git \\\n && git clone --depth=1 https://github.com/clasp-developers/uuid.git \\\n && git clone --depth=1 https://github.com/clasp-developers/trivial-backtrace.git \\\n && git clone --depth=1 https://github.com/clasp-developers/bordeaux-threads.git \\\n && git clone --depth=1 https://github.com/clasp-developers/cffi.git\n#   checkout slime\nRUN git clone --depth=1 https://github.com/slime/slime $HOME/slime\nRUN clasp -l \"/home/app/quicklisp/setup.lisp\" -e '(setq core::*swank-home* \"/home/app/slime\")' -e '(load (format nil \"~a/swank-loader.lisp\" core::*swank-home*))' -e \"(swank-loader:init :delete nil :reload nil :load-contribs nil)\" -e \"(core:quit)\"\nADD --chown=app:app build/ambertools18-docker.tar.gz /home/app\nENV AMBERHOME=\"/home/app/amber18/\"\nRUN cp /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/ATOMTYPE_SYBYL.DEF /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/atomtype_sybyl.def\nADD tools/dockerfiles/start-demos.sh /home/app/start-demos.sh\nADD demos.tar /home/app/\nRUN apt-get install libgfortran4 -y\nENV HOME=\"/home/app/\"\nENTRYPOINT [\"jupyter\", \"lab\"]\nCMD [\"--allow-root\", \"--no-browser\", \"--ip=0.0.0.0\", \"--port=8888\"]\n","originalDockerfileUglifiedHash":"025226141c1fec44ca7f40704f3e973d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c5a6102a3eea54c11737e3336cc1cfcdf654ae7d.dockerfile"}