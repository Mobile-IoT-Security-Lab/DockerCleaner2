{"seed":3172856313,"processedDockerfileHash":"4c7a20aeedfa956e73ab472bcfaf1c58","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM postgres:9.6\nLABEL maintainer=\"M. Edward (Ed) Borasky <znmeb@znmeb.net>\"\n#   Repo for up-to-date R\nCOPY cran.list.stretch /etc/apt/sources.list.d/cran.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-key 'E19F5F87128899B192B1A2C2AD5F960A256A04AF'\n#   Backports\nCOPY backports.list.stretch /etc/apt/sources.list.d/backports.list\n#   Install apt packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends postgis postgresql-9.6-postgis-2.4 postgresql-9.6-postgis-2.4-scripts postgresql-9.6-postgis-scripts postgresql-9.6-pgrouting postgresql-9.6-mysql-fdw postgresql-9.6-ogr-fdw postgresql-9.6-python3-multicorn awscli bash-completion build-essential bzip2 ca-certificates cmake command-not-found curl emacs-nox expat gdal-bin geotiff-bin gsl-bin git less libboost-dev libboost-program-options-dev libcairo2-dev libexpat1-dev libgdal-dev libgeotiff-dev libgsl-dev libjq-dev libpq-dev libpqxx-dev libprotobuf-dev libspatialite-dev libssh2-1-dev libssl-dev libudunits2-dev libv8-3.14-dev lynx mdbtools mdbtools-dev nano openssh-client p7zip postgresql-client-9.6 proj-bin protobuf-compiler python-dev python3-dev python3-csvkit r-base-dev spatialite-bin tar time udunits-bin unixodbc-dev unar unrar-free unzip vim-nox virtualenvwrapper wget -qqy \\\n && apt-get clean \\\n && apt-file update \\\n && update-command-not-found\n#  librasterlite-dev \\\n#  rasterlite-bin \\\n#   copy the root scripts to /usr/local/src\nRUN mkdir -p /usr/local/src\nCOPY postgis-root-scripts /usr/local/src/\nRUN chmod +x /usr/local/src/*.bash\n#   database superusers\nRUN useradd --shell /bin/bash --user-group --create-home dbsuper \\\n && mkdir -p /home/dbsuper/Projects\nCOPY home-scripts /home/dbsuper/\nARG DB_USERS_TO_CREATE\nRUN bash /usr/local/src/make-dbusers-linux.bash \\\n && mkdir -p /gisdata \\\n && echo \"alias l='ls -ACF --color=auto'\" >> /etc/bash.bashrc \\\n && echo \"alias ll='ls -ltrAF --color=auto'\" >> /etc/bash.bashrc\n#   set up automatic restores and dbsuper home\nCOPY postgis-scripts/1make-dbsuper.sh Backups/restore-all.sh /docker-entrypoint-initdb.d/\nRUN chmod +x /home/dbsuper/*.bash \\\n && chmod +x /docker-entrypoint-initdb.d/*.sh \\\n && chown -R postgres:postgres /gisdata\nCOPY postgis-scripts/Rprofile.site /home/dbsuper/.Rprofile\nCOPY Backups /home/dbsuper/Backups\nCOPY Raw /home/dbsuper/Raw\nRUN chown -R dbsuper:dbsuper /home/dbsuper\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM postgres:9.6\nLABEL maintainer=\"M. Edward (Ed) Borasky <znmeb@znmeb.net>\"\n#  Repo for up-to-date R\nCOPY cran.list.stretch /etc/apt/sources.list.d/cran.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-key 'E19F5F87128899B192B1A2C2AD5F960A256A04AF'\n#  Backports\nCOPY backports.list.stretch /etc/apt/sources.list.d/backports.list\n#  Install apt packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends postgis postgresql-9.6-postgis-2.4 postgresql-9.6-postgis-2.4-scripts postgresql-9.6-postgis-scripts postgresql-9.6-pgrouting postgresql-9.6-mysql-fdw postgresql-9.6-ogr-fdw postgresql-9.6-python3-multicorn awscli bash-completion build-essential bzip2 ca-certificates cmake command-not-found curl emacs-nox expat gdal-bin geotiff-bin gsl-bin git less libboost-dev libboost-program-options-dev libcairo2-dev libexpat1-dev libgdal-dev libgeotiff-dev libgsl-dev libjq-dev libpq-dev libpqxx-dev libprotobuf-dev libspatialite-dev libssh2-1-dev libssl-dev libudunits2-dev libv8-3.14-dev lynx mdbtools mdbtools-dev nano openssh-client p7zip postgresql-client-9.6 proj-bin protobuf-compiler python-dev python3-dev python3-csvkit r-base-dev spatialite-bin tar time udunits-bin unixodbc-dev unar unrar-free unzip vim-nox virtualenvwrapper wget -qqy \\\n && apt-get clean \\\n && apt-file update \\\n && update-command-not-found\n# librasterlite-dev \\\n# rasterlite-bin \\\n#  copy the root scripts to /usr/local/src\nRUN mkdir -p /usr/local/src\nCOPY postgis-root-scripts /usr/local/src/\nRUN chmod +x /usr/local/src/*.bash\n#  database superusers\nRUN useradd --shell /bin/bash --user-group --create-home dbsuper \\\n && mkdir -p /home/dbsuper/Projects\nCOPY home-scripts /home/dbsuper/\nARG DB_USERS_TO_CREATE\nRUN bash /usr/local/src/make-dbusers-linux.bash \\\n && mkdir -p /gisdata \\\n && echo \"alias l='ls -ACF --color=auto'\" >> /etc/bash.bashrc \\\n && echo \"alias ll='ls -ltrAF --color=auto'\" >> /etc/bash.bashrc\n#  set up automatic restores and dbsuper home\nCOPY postgis-scripts/1make-dbsuper.sh Backups/restore-all.sh /docker-entrypoint-initdb.d/\nRUN chmod +x /home/dbsuper/*.bash \\\n && chmod +x /docker-entrypoint-initdb.d/*.sh \\\n && chown -R postgres:postgres /gisdata\nCOPY postgis-scripts/Rprofile.site /home/dbsuper/.Rprofile\nCOPY Backups /home/dbsuper/Backups\nCOPY Raw /home/dbsuper/Raw\nRUN chown -R dbsuper:dbsuper /home/dbsuper\n","injectedSmells":[],"originalDockerfileHash":"caabfd5586f23579e30dfb48bd1df1f9","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM postgres:9.6\nLABEL maintainer=\"M. Edward (Ed) Borasky <znmeb@znmeb.net>\"\n#   Repo for up-to-date R\nCOPY cran.list.stretch /etc/apt/sources.list.d/cran.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-key 'E19F5F87128899B192B1A2C2AD5F960A256A04AF'\n#   Backports\nCOPY backports.list.stretch /etc/apt/sources.list.d/backports.list\n#   Install apt packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends postgis postgresql-9.6-postgis-2.4 postgresql-9.6-postgis-2.4-scripts postgresql-9.6-postgis-scripts postgresql-9.6-pgrouting postgresql-9.6-mysql-fdw postgresql-9.6-ogr-fdw postgresql-9.6-python3-multicorn awscli bash-completion build-essential bzip2 ca-certificates cmake command-not-found curl emacs-nox expat gdal-bin geotiff-bin gsl-bin git less libboost-dev libboost-program-options-dev libcairo2-dev libexpat1-dev libgdal-dev libgeotiff-dev libgsl-dev libjq-dev libpq-dev libpqxx-dev libprotobuf-dev libspatialite-dev libssh2-1-dev libssl-dev libudunits2-dev libv8-3.14-dev lynx mdbtools mdbtools-dev nano openssh-client p7zip postgresql-client-9.6 proj-bin protobuf-compiler python-dev python3-dev python3-csvkit r-base-dev spatialite-bin tar time udunits-bin unixodbc-dev unar unrar-free unzip vim-nox virtualenvwrapper wget -qqy \\\n && apt-get clean \\\n && apt-file update \\\n && update-command-not-found\n#  librasterlite-dev \\\n#  rasterlite-bin \\\n#   copy the root scripts to /usr/local/src\nRUN mkdir -p /usr/local/src\nCOPY postgis-root-scripts /usr/local/src/\nRUN chmod +x /usr/local/src/*.bash\n#   database superusers\nRUN useradd --shell /bin/bash --user-group --create-home dbsuper \\\n && mkdir -p /home/dbsuper/Projects\nCOPY home-scripts /home/dbsuper/\nARG DB_USERS_TO_CREATE\nRUN bash /usr/local/src/make-dbusers-linux.bash \\\n && mkdir -p /gisdata \\\n && echo \"alias l='ls -ACF --color=auto'\" >> /etc/bash.bashrc \\\n && echo \"alias ll='ls -ltrAF --color=auto'\" >> /etc/bash.bashrc\n#   set up automatic restores and dbsuper home\nCOPY postgis-scripts/1make-dbsuper.sh Backups/restore-all.sh /docker-entrypoint-initdb.d/\nRUN chmod +x /home/dbsuper/*.bash \\\n && chmod +x /docker-entrypoint-initdb.d/*.sh \\\n && chown -R postgres:postgres /gisdata\nCOPY postgis-scripts/Rprofile.site /home/dbsuper/.Rprofile\nCOPY Backups /home/dbsuper/Backups\nCOPY Raw /home/dbsuper/Raw\nRUN chown -R dbsuper:dbsuper /home/dbsuper\n","originalDockerfileUglifiedHash":"40c80e405049dbc600028f9105079597","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/bcb59220da16ffd8bebaae58de3a58588ffad53b.dockerfile"}