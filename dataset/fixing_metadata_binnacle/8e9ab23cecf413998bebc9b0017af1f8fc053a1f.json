{"seed":3253486602,"processedDockerfileHash":"453d629e5684dbddf2de09329bbca6ec","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\n#   Build Arguments for openresty/nginx\nARG RESTY_VERSION=\"1.11.2.1\"\nARG RESTY_OPENSSL_VERSION=\"1.0.2j\"\nARG PAGESPEED_VERSION=\"1.11.33.4\"\nARG DEBIAN_FRONTEND=noninteractive\nARG TERM=xterm-color\nARG RESTY_CONFIG_OPTIONS=\" --with-http_addition_module  --with-http_auth_request_module  --with-http_flv_module  --with-http_gunzip_module  --with-http_gzip_static_module  --with-http_mp4_module  --with-http_random_index_module  --with-http_realip_module  --with-http_secure_link_module  --with-http_slice_module  --with-http_ssl_module  --with-http_stub_status_module  --with-http_sub_module  --with-http_v2_module  --with-http_geoip_module=dynamic  --with-file-aio  --with-ipv6  --with-pcre-jit  --with-stream  --with-stream_ssl_module  --with-threads  --without-http_autoindex_module  --without-http_browser_module  --without-http_userid_module  --without-mail_pop3_module  --without-mail_imap_module  --without-mail_smtp_module  --without-http_split_clients_module  --without-http_uwsgi_module  --without-http_scgi_module  --without-http_referer_module  --user=nginx  --group=nginx  --sbin-path=/usr/sbin  --modules-path=/usr/lib/nginx  --prefix=/etc/nginx  --conf-path=/etc/nginx/nginx.conf  --http-log-path=/var/log/nginx/access.log  --error-log-path=/var/log/nginx/error.log  --pid-path=/var/run/nginx.pid  --lock-path=/var/run/nginx/nginx.lock  --http-fastcgi-temp-path=/tmp/nginx/fastcgi  --http-proxy-temp-path=/tmp/nginx/proxy  --http-client-body-temp-path=/tmp/nginx/client_body  --add-module=/tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta  --add-module=/tmp/ngx_cache_purge-2.3  --with-openssl=/tmp/openssl-${RESTY_OPENSSL_VERSION}  \"\nARG BUILD_DEPS='build-essential curl libreadline-dev libncurses5-dev libpcre3-dev libgeoip-dev zlib1g-dev ca-certificates'\n#   Install base utils\nRUN apt-get update \\\n && apt-get install --no-install-recommends $BUILD_DEPS -y \\\n && cd /tmp/ \\\n && echo \"Downloading PageSpeed...\" \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && ls -lah \\\n && cd /tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta/ \\\n && echo \"Downloading PSOL...\" \\\n && curl -L https://dl.google.com/dl/page-speed/psol/${PAGESPEED_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/ \\\n && echo \"Downloading Nginx cache purge module...\" \\\n && curl -L http://labs.frickle.com/files/ngx_cache_purge-2.3.tar.gz | tar -zx \\\n && echo \"Downloading OpenSSL...\" \\\n && curl -L https://www.openssl.org/source/openssl-${RESTY_OPENSSL_VERSION}.tar.gz | tar -zx \\\n && echo \"Downloading openresty...\" \\\n && curl -L https://openresty.org/download/openresty-${RESTY_VERSION}.tar.gz | tar -zx \\\n && readonly NPROC=$( grep -c ^processor /proc/cpuinfo 2> /dev/null || 1 ;) \\\n && echo \"using up to $NPROC threads\" \\\n && cd openresty-${RESTY_VERSION} \\\n && ./configure -j${NPROC} ${_RESTY_CONFIG_DEPS} ${RESTY_CONFIG_OPTIONS} \\\n && make -j${NPROC} \\\n && make -j${NPROC} install \\\n && mkdir -p /var/lib/nginx /var/log/nginx \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get remove --purge -y $BUILD_DEPS $( apt-mark showauto ;) \\\n && rm -rf /tmp/* /var/log/apt/* \\\n && mkdir /tmp/nginx/ \\\n && mkdir -p /tmp/nginx/pagespeed/images/ \\\n && ln -sf /usr/lib/nginx /etc/nginx/modules \\\n && groupadd -g 8888 nginx \\\n && useradd -u 8888 -g nginx nginx \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log\nWORKDIR /config\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget=1.17.1-1ubuntu1.5 -y \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/nginx.conf \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/server.conf\nEXPOSE 80/tcp 443/tcp\nCMD [\"nginx\", \"-g\", \"daemon\", \"off\", \";\", \"-c\", \"/config/nginx.conf\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\n#  Build Arguments for openresty/nginx\nARG RESTY_VERSION=\"1.11.2.1\"\nARG RESTY_OPENSSL_VERSION=\"1.0.2j\"\nARG PAGESPEED_VERSION=\"1.11.33.4\"\nARG DEBIAN_FRONTEND=noninteractive\nARG TERM=xterm-color\nARG RESTY_CONFIG_OPTIONS=\" --with-http_addition_module  --with-http_auth_request_module  --with-http_flv_module  --with-http_gunzip_module  --with-http_gzip_static_module  --with-http_mp4_module  --with-http_random_index_module  --with-http_realip_module  --with-http_secure_link_module  --with-http_slice_module  --with-http_ssl_module  --with-http_stub_status_module  --with-http_sub_module  --with-http_v2_module  --with-http_geoip_module=dynamic  --with-file-aio  --with-ipv6  --with-pcre-jit  --with-stream  --with-stream_ssl_module  --with-threads  --without-http_autoindex_module  --without-http_browser_module  --without-http_userid_module  --without-mail_pop3_module  --without-mail_imap_module  --without-mail_smtp_module  --without-http_split_clients_module  --without-http_uwsgi_module  --without-http_scgi_module  --without-http_referer_module  --user=nginx  --group=nginx  --sbin-path=/usr/sbin  --modules-path=/usr/lib/nginx  --prefix=/etc/nginx  --conf-path=/etc/nginx/nginx.conf  --http-log-path=/var/log/nginx/access.log  --error-log-path=/var/log/nginx/error.log  --pid-path=/var/run/nginx.pid  --lock-path=/var/run/nginx/nginx.lock  --http-fastcgi-temp-path=/tmp/nginx/fastcgi  --http-proxy-temp-path=/tmp/nginx/proxy  --http-client-body-temp-path=/tmp/nginx/client_body  --add-module=/tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta  --add-module=/tmp/ngx_cache_purge-2.3  --with-openssl=/tmp/openssl-${RESTY_OPENSSL_VERSION}  \"\nARG BUILD_DEPS='build-essential curl libreadline-dev libncurses5-dev libpcre3-dev libgeoip-dev zlib1g-dev ca-certificates'\n#  Install base utils\nRUN apt-get update \\\n && apt-get install --no-install-recommends $BUILD_DEPS -y \\\n && cd /tmp/ \\\n && echo \"Downloading PageSpeed...\" \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && ls -lah \\\n && cd /tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta/ \\\n && echo \"Downloading PSOL...\" \\\n && curl -L https://dl.google.com/dl/page-speed/psol/${PAGESPEED_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/ \\\n && echo \"Downloading Nginx cache purge module...\" \\\n && curl -L http://labs.frickle.com/files/ngx_cache_purge-2.3.tar.gz | tar -zx \\\n && echo \"Downloading OpenSSL...\" \\\n && curl -L https://www.openssl.org/source/openssl-${RESTY_OPENSSL_VERSION}.tar.gz | tar -zx \\\n && echo \"Downloading openresty...\" \\\n && curl -L https://openresty.org/download/openresty-${RESTY_VERSION}.tar.gz | tar -zx \\\n && readonly NPROC=$( grep -c ^processor /proc/cpuinfo 2> /dev/null || 1 ;) \\\n && echo \"using up to $NPROC threads\" \\\n && cd openresty-${RESTY_VERSION} \\\n && ./configure -j${NPROC} ${_RESTY_CONFIG_DEPS} ${RESTY_CONFIG_OPTIONS} \\\n && make -j${NPROC} \\\n && make -j${NPROC} install \\\n && mkdir -p /var/lib/nginx /var/log/nginx \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get remove --purge -y $BUILD_DEPS $( apt-mark showauto ;) \\\n && rm -rf /tmp/* /var/log/apt/* \\\n && mkdir /tmp/nginx/ \\\n && mkdir -p /tmp/nginx/pagespeed/images/ \\\n && ln -sf /usr/lib/nginx /etc/nginx/modules \\\n && groupadd -g 8888 nginx \\\n && useradd -u 8888 -g nginx nginx \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log\nWORKDIR /config\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget -y \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/nginx.conf \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/server.conf\nEXPOSE 80/tcp 443/tcp\nCMD [\"nginx\", \"-g\", \"daemon\", \"off\", \";\", \"-c\", \"/config/nginx.conf\"]\n","injectedSmells":[],"originalDockerfileHash":"d032942a4659fbfe65c2ad39c1ec440a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\n#   Build Arguments for openresty/nginx\nARG RESTY_VERSION=\"1.11.2.1\"\nARG RESTY_OPENSSL_VERSION=\"1.0.2j\"\nARG PAGESPEED_VERSION=\"1.11.33.4\"\nARG DEBIAN_FRONTEND=noninteractive\nARG TERM=xterm-color\nARG RESTY_CONFIG_OPTIONS=\" --with-http_addition_module  --with-http_auth_request_module  --with-http_flv_module  --with-http_gunzip_module  --with-http_gzip_static_module  --with-http_mp4_module  --with-http_random_index_module  --with-http_realip_module  --with-http_secure_link_module  --with-http_slice_module  --with-http_ssl_module  --with-http_stub_status_module  --with-http_sub_module  --with-http_v2_module  --with-http_geoip_module=dynamic  --with-file-aio  --with-ipv6  --with-pcre-jit  --with-stream  --with-stream_ssl_module  --with-threads  --without-http_autoindex_module  --without-http_browser_module  --without-http_userid_module  --without-mail_pop3_module  --without-mail_imap_module  --without-mail_smtp_module  --without-http_split_clients_module  --without-http_uwsgi_module  --without-http_scgi_module  --without-http_referer_module  --user=nginx  --group=nginx  --sbin-path=/usr/sbin  --modules-path=/usr/lib/nginx  --prefix=/etc/nginx  --conf-path=/etc/nginx/nginx.conf  --http-log-path=/var/log/nginx/access.log  --error-log-path=/var/log/nginx/error.log  --pid-path=/var/run/nginx.pid  --lock-path=/var/run/nginx/nginx.lock  --http-fastcgi-temp-path=/tmp/nginx/fastcgi  --http-proxy-temp-path=/tmp/nginx/proxy  --http-client-body-temp-path=/tmp/nginx/client_body  --add-module=/tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta  --add-module=/tmp/ngx_cache_purge-2.3  --with-openssl=/tmp/openssl-${RESTY_OPENSSL_VERSION}  \"\nARG BUILD_DEPS='build-essential curl libreadline-dev libncurses5-dev libpcre3-dev libgeoip-dev zlib1g-dev ca-certificates'\n#   Install base utils\nRUN apt-get update \\\n && apt-get install --no-install-recommends $BUILD_DEPS -y \\\n && cd /tmp/ \\\n && echo \"Downloading PageSpeed...\" \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && ls -lah \\\n && cd /tmp/incubator-pagespeed-ngx-${PAGESPEED_VERSION}-beta/ \\\n && echo \"Downloading PSOL...\" \\\n && curl -L https://dl.google.com/dl/page-speed/psol/${PAGESPEED_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/ \\\n && echo \"Downloading Nginx cache purge module...\" \\\n && curl -L http://labs.frickle.com/files/ngx_cache_purge-2.3.tar.gz | tar -zx \\\n && echo \"Downloading OpenSSL...\" \\\n && curl -L https://www.openssl.org/source/openssl-${RESTY_OPENSSL_VERSION}.tar.gz | tar -zx \\\n && echo \"Downloading openresty...\" \\\n && curl -L https://openresty.org/download/openresty-${RESTY_VERSION}.tar.gz | tar -zx \\\n && readonly NPROC=$( grep -c ^processor /proc/cpuinfo 2> /dev/null || 1 ;) \\\n && echo \"using up to $NPROC threads\" \\\n && cd openresty-${RESTY_VERSION} \\\n && ./configure -j${NPROC} ${_RESTY_CONFIG_DEPS} ${RESTY_CONFIG_OPTIONS} \\\n && make -j${NPROC} \\\n && make -j${NPROC} install \\\n && mkdir -p /var/lib/nginx /var/log/nginx \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get remove --purge -y $BUILD_DEPS $( apt-mark showauto ;) \\\n && rm -rf /tmp/* /var/log/apt/* \\\n && mkdir /tmp/nginx/ \\\n && mkdir -p /tmp/nginx/pagespeed/images/ \\\n && ln -sf /usr/lib/nginx /etc/nginx/modules \\\n && groupadd -g 8888 nginx \\\n && useradd -u 8888 -g nginx nginx \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log\nWORKDIR /config\nRUN apt-get update \\\n && apt-get install --no-install-recommends wget -y \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/nginx.conf \\\n && wget --no-check-certificate https://raw.githubusercontent.com/jivesearch/jivesearch/master/frontend/nginx/server.conf\nEXPOSE 80/tcp 443/tcp\nCMD [\"nginx\", \"-g\", \"daemon\", \"off\", \";\", \"-c\", \"/config/nginx.conf\"]\n","originalDockerfileUglifiedHash":"389990348d426a131825b7fe58a6d549","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/8e9ab23cecf413998bebc9b0017af1f8fc053a1f.dockerfile"}