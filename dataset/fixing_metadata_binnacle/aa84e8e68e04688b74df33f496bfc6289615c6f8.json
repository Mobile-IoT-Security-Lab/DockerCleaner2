{"seed":3322502948,"processedDockerfileHash":"d374b80ec6fe0ac459192d44b7b2aecf","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-gem","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM reggaemuffin/steem-baseimage:latest\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf=2.71-3 automake=1:1.16.5-1.3 autotools-dev=20220109.1 bsdmainutils=12.1.7+nmu3ubuntu2 build-essential=12.9ubuntu3 cmake=3.25.1-1 doxygen=1.9.4-4 gdb=13.1-2ubuntu2 git=1:2.39.2-1ubuntu1 libboost-all-dev=1.74.0.3ubuntu7 libyajl-dev=2.1.0-3build2 libreadline-dev=8.2-1.3 libssl-dev=3.0.8-1ubuntu1 libtool=2.4.7-5 liblz4-tool=1.9.4-1 ncurses-dev pkg-config=1.8.1-1ubuntu2 python3=3.11.2-1 python3-dev=3.11.2-1 python3-jinja2=3.1.2-1 python3-pip=23.0.1+dfsg-1 nginx=1.22.0-1ubuntu3 fcgiwrap=1.1.0-14 awscli=2.9.19-1 jq=1.6-2.1ubuntu3 wget=1.21.3-1ubuntu1 virtualenv=20.19.0+ds-1 gdb=13.1-2ubuntu2 libgflags-dev=2.2.2-2 libsnappy-dev=1.1.9-3 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 libbz2-dev=1.0.8-5build1 liblz4-dev=1.9.4-1 libzstd-dev=1.5.4+dfsg2-4 lcov=1.16-1 ruby=1:3.1 ccache=4.7.4-1 -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr \\\n && gem install mtime_cache --version 1.0.2\nCOPY . /usr/local/src/steem\nRUN cd /usr/local/src/steem \\\n && git submodule update --init --recursive \\\n && sh ciscripts/compiletest.sh \\\n && cd /usr/local/src/steem/build \\\n && ./tests/chain_test \\\n && ./tests/plugin_test \\\n && cd .. \\\n && sh ./ciscripts/collectcoverage.sh \\\n && cd build \\\n && ./programs/util/test_fixed_string \\\n && cd /usr/local/src/steem \\\n && programs/build_helpers/get_config_check.sh \\\n && doxygen \\\n && PYTHONPATH=programs/build_helpers python3 -m steem_build_helpers.check_reflect \\\n && mkdir -p /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/build /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.mtime_cache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.ccache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/coverage.info /usr/local/src/steemtmp \\\n && rm -rf /usr/local/src/steem\nRUN apt-get remove -y autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen gdb git libboost-all-dev libyajl-dev libreadline-dev libssl-dev libtool liblz4-tool ncurses-dev pkg-config python3 python3-dev python3-jinja2 python3-pip nginx fcgiwrap awscli jq wget virtualenv gdb libgflags-dev libsnappy-dev zlib1g-dev libbz2-dev liblz4-dev libzstd-dev lcov ruby ccache \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM reggaemuffin/steem-baseimage:latest\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen gdb git libboost-all-dev libyajl-dev libreadline-dev libssl-dev libtool liblz4-tool ncurses-dev pkg-config python3 python3-dev python3-jinja2 python3-pip nginx fcgiwrap awscli jq wget virtualenv gdb libgflags-dev libsnappy-dev zlib1g-dev libbz2-dev liblz4-dev libzstd-dev lcov ruby ccache -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr \\\n && gem install mtime_cache\nADD . /usr/local/src/steem\nRUN cd /usr/local/src/steem \\\n && git submodule update --init --recursive \\\n && sh ciscripts/compiletest.sh \\\n && cd /usr/local/src/steem/build \\\n && ./tests/chain_test \\\n && ./tests/plugin_test \\\n && cd .. \\\n && sh ./ciscripts/collectcoverage.sh \\\n && cd build \\\n && ./programs/util/test_fixed_string \\\n && cd /usr/local/src/steem \\\n && programs/build_helpers/get_config_check.sh \\\n && doxygen \\\n && PYTHONPATH=programs/build_helpers python3 -m steem_build_helpers.check_reflect \\\n && mkdir -p /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/build /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.mtime_cache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.ccache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/coverage.info /usr/local/src/steemtmp \\\n && rm -rf /usr/local/src/steem\nRUN apt-get remove -y autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen gdb git libboost-all-dev libyajl-dev libreadline-dev libssl-dev libtool liblz4-tool ncurses-dev pkg-config python3 python3-dev python3-jinja2 python3-pip nginx fcgiwrap awscli jq wget virtualenv gdb libgflags-dev libsnappy-dev zlib1g-dev libbz2-dev liblz4-dev libzstd-dev lcov ruby ccache \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\n","injectedSmells":[],"originalDockerfileHash":"8c3e6bca7e8be3e0d3cd1f72c6095f24","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM reggaemuffin/steem-baseimage:latest\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen gdb git libboost-all-dev libyajl-dev libreadline-dev libssl-dev libtool liblz4-tool ncurses-dev pkg-config python3 python3-dev python3-jinja2 python3-pip nginx fcgiwrap awscli jq wget virtualenv gdb libgflags-dev libsnappy-dev zlib1g-dev libbz2-dev liblz4-dev libzstd-dev lcov ruby ccache -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr \\\n && gem install mtime_cache\nADD . /usr/local/src/steem\nRUN cd /usr/local/src/steem \\\n && git submodule update --init --recursive \\\n && sh ciscripts/compiletest.sh \\\n && cd /usr/local/src/steem/build \\\n && ./tests/chain_test \\\n && ./tests/plugin_test \\\n && cd .. \\\n && sh ./ciscripts/collectcoverage.sh \\\n && cd build \\\n && ./programs/util/test_fixed_string \\\n && cd /usr/local/src/steem \\\n && programs/build_helpers/get_config_check.sh \\\n && doxygen \\\n && PYTHONPATH=programs/build_helpers python3 -m steem_build_helpers.check_reflect \\\n && mkdir -p /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/build /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.mtime_cache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/.ccache /usr/local/src/steemtmp \\\n && mv /usr/local/src/steem/coverage.info /usr/local/src/steemtmp \\\n && rm -rf /usr/local/src/steem\nRUN apt-get remove -y autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen gdb git libboost-all-dev libyajl-dev libreadline-dev libssl-dev libtool liblz4-tool ncurses-dev pkg-config python3 python3-dev python3-jinja2 python3-pip nginx fcgiwrap awscli jq wget virtualenv gdb libgflags-dev libsnappy-dev zlib1g-dev libbz2-dev liblz4-dev libzstd-dev lcov ruby ccache \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\n","originalDockerfileUglifiedHash":"8c3e6bca7e8be3e0d3cd1f72c6095f24","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/aa84e8e68e04688b74df33f496bfc6289615c6f8.dockerfile"}