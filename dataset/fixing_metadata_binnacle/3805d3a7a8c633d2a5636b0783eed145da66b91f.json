{"seed":340995424,"processedDockerfileHash":"474a84d8e5127904fad2dc32bf01be42","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:17.10\nMAINTAINER Karl Stenerud <kstenerud@gmail.com>\n#   Lubuntu desktop in a Docker image, with RDP and X2go remote desktop access.\n#\n#   Run this image with --init. Otherwise you'll get zombies.\n#\n#   ARGs:\n#\n#   USER: The name of the desktop user to create (default ubuntu)\n#   PASSWORD: The password to use (default same as the user name)\n#   LANG_KB: The language and keyboard to set for the locale.\n#            Format <language> <region> <keyboard layout> <keyboard model>\n#            \"en US us pc105\" = LANG en_US.UTF-8, with \"us\" keyboard model \"pc105\"\n#   TIMEZONE: What time zone to set.\n#   =============\n#   Configuration\n#   =============\nARG USER=ubuntu\nARG PASSWORD=$USER\nARG LANG_KB=\"en US us pc105\"\nARG TIMEZONE=\"America/Vancouver\"\nARG XRDP_VERSION=v0.9.5\nARG XORGXRDP_VERSION=v0.2.5\n#   =============\n#   Initial Setup\n#   =============\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get autoremove -y \\\n && (apt-get update ;apt-get install --no-install-recommends locales tzdata debconf software-properties-common -y )\nCOPY fs/usr/sbin/set-lang-kb.sh /usr/sbin/\nRUN /usr/sbin/set-lang-kb.sh $LANG_KB\nRUN echo \"$TIMEZONE\" > /etc/timezone \\\n && dpkg-reconfigure -f noninteractive tzdata\n#   =================\n#   Main Installation\n#   =================\n#   Desktop Environment\nRUN (apt-get update ;apt-get install --no-install-recommends lubuntu-desktop -y ) \\\n && apt-get remove -y light-locker\n#   Repositories\nRUN add-apt-repository -y ppa:x2go/stable\nRUN :\n#   Other common software\nRUN (apt-get update ;apt-get install --no-install-recommends apt-transport-https autoconf bison build-essential curl file flex fuse gettext git gvfs-bin less libfuse-dev libglu1-mesa libjpeg-dev libpam0g-dev libssl-dev libtool libx11-dev libxfixes-dev libxml-parser-perl libxrandr-dev nasm net-tools openssh-server openvpn pkg-config python-libxml2 telnet unzip vim wget x11-apps x11-session-utils x2goserver x2goserver-xsession xbitmaps xfonts-scalable xinit xinput xorg xorg-docs-core xserver-xorg-core xserver-xorg-dev xsltproc zip -y )\n#   Xrdp from source\nRUN git clone https://github.com/neutrinolabs/xrdp.git \\\n && cd xrdp \\\n && git checkout ${XRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr --enable-fuse --enable-jpeg \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xrdp\nRUN git clone https://github.com/neutrinolabs/xorgxrdp.git \\\n && cd xorgxrdp \\\n && git checkout ${XORGXRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xorgxrdp\n#   Chrome Remote Desktop\nRUN wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && (apt-get update ;apt-get install --no-install-recommends ./google-chrome-stable_current_amd64.deb -y ) \\\n && rm google-chrome-stable_current_amd64.deb\nRUN wget -q https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb \\\n && (apt-get update ;apt-get install --no-install-recommends ./chrome-remote-desktop_current_amd64.deb -y ) \\\n && rm chrome-remote-desktop_current_amd64.deb\n#   Don't use COPY directly; it overwrites ownership and permissions!\nCOPY fs /tmp/docker-to-copy-fs\nRUN cp -R /tmp/docker-to-copy-fs/* / \\\n && rm -rf /tmp/docker-to-copy-fs\n#   ====\n#   User\n#   ====\nRUN desktop-user-add.sh $USER $PASSWORD\n#   ===================\n#   Final Configuration\n#   ===================\n#   Xrfb stuff\nRUN sed -i 's/allowed_users=console/allowed_users=anybody/' /etc/X11/Xwrapper.config\nRUN systemctl enable xrdp.service \\\n && systemctl enable xrdp-sesman.service\n#   Chrome Remote Desktop stuff\nRUN sed -i \"s/\\(chrome-remote-desktop.*\\)/\\1${USER}/g\" /etc/group\nENV CHROME_REMOTE_DESKTOP_DEFAULT_DESKTOP_SIZES=\"1920x1080\"\n#   Disable SSH DNS lookup becase it slows down SSH login terribly.\nRUN sed -i 's/UseDNS yes/UseDNS no/g' /etc/ssh/sshd_config\n#   Hack to load LXDE by default if .xsession doesn't exist\nRUN sed -i 's/^fi$/else\\n lxsession -s Lubuntu -e LXDE\\nfi/g' /etc/X11/Xsession.d/40x11-common_xsessionrc\nEXPOSE 3389/tcp\nEXPOSE 22/tcp\nCMD [\"/usr/sbin/ssupervisor.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:17.10\nMAINTAINER Karl Stenerud <kstenerud@gmail.com>\n#  Lubuntu desktop in a Docker image, with RDP and X2go remote desktop access.\n#\n#  Run this image with --init. Otherwise you'll get zombies.\n#\n#  ARGs:\n#\n#  USER: The name of the desktop user to create (default ubuntu)\n#  PASSWORD: The password to use (default same as the user name)\n#  LANG_KB: The language and keyboard to set for the locale.\n#           Format <language> <region> <keyboard layout> <keyboard model>\n#           \"en US us pc105\" = LANG en_US.UTF-8, with \"us\" keyboard model \"pc105\"\n#  TIMEZONE: What time zone to set.\n#  =============\n#  Configuration\n#  =============\nARG USER=ubuntu\nARG PASSWORD=$USER\nARG LANG_KB=\"en US us pc105\"\nARG TIMEZONE=\"America/Vancouver\"\nARG XRDP_VERSION=v0.9.5\nARG XORGXRDP_VERSION=v0.2.5\n#  =============\n#  Initial Setup\n#  =============\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get autoremove -y \\\n && apt-get install -y locales tzdata debconf software-properties-common\nCOPY fs/usr/sbin/set-lang-kb.sh /usr/sbin/\nRUN /usr/sbin/set-lang-kb.sh $LANG_KB\nRUN echo \"$TIMEZONE\" > /etc/timezone \\\n && dpkg-reconfigure -f noninteractive tzdata\n#  =================\n#  Main Installation\n#  =================\n#  Desktop Environment\nRUN apt-get install -y lubuntu-desktop \\\n && apt-get remove -y light-locker\n#  Repositories\nRUN add-apt-repository -y ppa:x2go/stable\nRUN apt-get update\n#  Other common software\nRUN apt-get install -y apt-transport-https autoconf bison build-essential curl file flex fuse gettext git gvfs-bin less libfuse-dev libglu1-mesa libjpeg-dev libpam0g-dev libssl-dev libtool libx11-dev libxfixes-dev libxml-parser-perl libxrandr-dev nasm net-tools openssh-server openvpn pkg-config python-libxml2 telnet unzip vim wget x11-apps x11-session-utils x2goserver x2goserver-xsession xbitmaps xfonts-scalable xinit xinput xorg xorg-docs-core xserver-xorg-core xserver-xorg-dev xsltproc zip\n#  Xrdp from source\nRUN git clone https://github.com/neutrinolabs/xrdp.git \\\n && cd xrdp \\\n && git checkout ${XRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr --enable-fuse --enable-jpeg \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xrdp\nRUN git clone https://github.com/neutrinolabs/xorgxrdp.git \\\n && cd xorgxrdp \\\n && git checkout ${XORGXRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xorgxrdp\n#  Chrome Remote Desktop\nRUN wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && apt-get install -y ./google-chrome-stable_current_amd64.deb \\\n && rm google-chrome-stable_current_amd64.deb\nRUN wget -q https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb \\\n && apt-get install -y ./chrome-remote-desktop_current_amd64.deb \\\n && rm chrome-remote-desktop_current_amd64.deb\n#  Don't use COPY directly; it overwrites ownership and permissions!\nCOPY fs /tmp/docker-to-copy-fs\nRUN cp -R /tmp/docker-to-copy-fs/* / \\\n && rm -rf /tmp/docker-to-copy-fs\n#  ====\n#  User\n#  ====\nRUN desktop-user-add.sh $USER $PASSWORD\n#  ===================\n#  Final Configuration\n#  ===================\n#  Xrfb stuff\nRUN sed -i 's/allowed_users=console/allowed_users=anybody/' /etc/X11/Xwrapper.config\nRUN systemctl enable xrdp.service \\\n && systemctl enable xrdp-sesman.service\n#  Chrome Remote Desktop stuff\nRUN sed -i \"s/\\(chrome-remote-desktop.*\\)/\\1${USER}/g\" /etc/group\nENV CHROME_REMOTE_DESKTOP_DEFAULT_DESKTOP_SIZES=\"1920x1080\"\n#  Disable SSH DNS lookup becase it slows down SSH login terribly.\nRUN sed -i 's/UseDNS yes/UseDNS no/g' /etc/ssh/sshd_config\n#  Hack to load LXDE by default if .xsession doesn't exist\nRUN sed -i 's/^fi$/else\\n lxsession -s Lubuntu -e LXDE\\nfi/g' /etc/X11/Xsession.d/40x11-common_xsessionrc\nEXPOSE 3389/tcp\nEXPOSE 22/tcp\nCMD [\"/usr/sbin/ssupervisor.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"b5cf37bfc09f56ad4bfe58f614532d60","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:17.10\nMAINTAINER Karl Stenerud <kstenerud@gmail.com>\n#   Lubuntu desktop in a Docker image, with RDP and X2go remote desktop access.\n#\n#   Run this image with --init. Otherwise you'll get zombies.\n#\n#   ARGs:\n#\n#   USER: The name of the desktop user to create (default ubuntu)\n#   PASSWORD: The password to use (default same as the user name)\n#   LANG_KB: The language and keyboard to set for the locale.\n#            Format <language> <region> <keyboard layout> <keyboard model>\n#            \"en US us pc105\" = LANG en_US.UTF-8, with \"us\" keyboard model \"pc105\"\n#   TIMEZONE: What time zone to set.\n#   =============\n#   Configuration\n#   =============\nARG USER=ubuntu\nARG PASSWORD=$USER\nARG LANG_KB=\"en US us pc105\"\nARG TIMEZONE=\"America/Vancouver\"\nARG XRDP_VERSION=v0.9.5\nARG XORGXRDP_VERSION=v0.2.5\n#   =============\n#   Initial Setup\n#   =============\nRUN apt-get update -y \\\n && apt-get upgrade -y \\\n && apt-get autoremove -y \\\n && apt-get install locales tzdata debconf software-properties-common -y\nCOPY fs/usr/sbin/set-lang-kb.sh /usr/sbin/\nRUN /usr/sbin/set-lang-kb.sh $LANG_KB\nRUN echo \"$TIMEZONE\" > /etc/timezone \\\n && dpkg-reconfigure -f noninteractive tzdata\n#   =================\n#   Main Installation\n#   =================\n#   Desktop Environment\nRUN apt-get install lubuntu-desktop -y \\\n && apt-get remove -y light-locker\n#   Repositories\nRUN add-apt-repository -y ppa:x2go/stable\nRUN apt-get update\n#   Other common software\nRUN apt-get install apt-transport-https autoconf bison build-essential curl file flex fuse gettext git gvfs-bin less libfuse-dev libglu1-mesa libjpeg-dev libpam0g-dev libssl-dev libtool libx11-dev libxfixes-dev libxml-parser-perl libxrandr-dev nasm net-tools openssh-server openvpn pkg-config python-libxml2 telnet unzip vim wget x11-apps x11-session-utils x2goserver x2goserver-xsession xbitmaps xfonts-scalable xinit xinput xorg xorg-docs-core xserver-xorg-core xserver-xorg-dev xsltproc zip -y\n#   Xrdp from source\nRUN git clone https://github.com/neutrinolabs/xrdp.git \\\n && cd xrdp \\\n && git checkout ${XRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr --enable-fuse --enable-jpeg \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xrdp\nRUN git clone https://github.com/neutrinolabs/xorgxrdp.git \\\n && cd xorgxrdp \\\n && git checkout ${XORGXRDP_VERSION} \\\n && ./bootstrap \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf xorgxrdp\n#   Chrome Remote Desktop\nRUN wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && apt-get install ./google-chrome-stable_current_amd64.deb -y \\\n && rm google-chrome-stable_current_amd64.deb\nRUN wget -q https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb \\\n && apt-get install ./chrome-remote-desktop_current_amd64.deb -y \\\n && rm chrome-remote-desktop_current_amd64.deb\n#   Don't use COPY directly; it overwrites ownership and permissions!\nCOPY fs /tmp/docker-to-copy-fs\nRUN cp -R /tmp/docker-to-copy-fs/* / \\\n && rm -rf /tmp/docker-to-copy-fs\n#   ====\n#   User\n#   ====\nRUN desktop-user-add.sh $USER $PASSWORD\n#   ===================\n#   Final Configuration\n#   ===================\n#   Xrfb stuff\nRUN sed -i 's/allowed_users=console/allowed_users=anybody/' /etc/X11/Xwrapper.config\nRUN systemctl enable xrdp.service \\\n && systemctl enable xrdp-sesman.service\n#   Chrome Remote Desktop stuff\nRUN sed -i \"s/\\(chrome-remote-desktop.*\\)/\\1${USER}/g\" /etc/group\nENV CHROME_REMOTE_DESKTOP_DEFAULT_DESKTOP_SIZES=\"1920x1080\"\n#   Disable SSH DNS lookup becase it slows down SSH login terribly.\nRUN sed -i 's/UseDNS yes/UseDNS no/g' /etc/ssh/sshd_config\n#   Hack to load LXDE by default if .xsession doesn't exist\nRUN sed -i 's/^fi$/else\\n lxsession -s Lubuntu -e LXDE\\nfi/g' /etc/X11/Xsession.d/40x11-common_xsessionrc\nEXPOSE 3389/tcp\nEXPOSE 22/tcp\nCMD [\"/usr/sbin/ssupervisor.sh\"]\n","originalDockerfileUglifiedHash":"bea5c4b84fc395101f0c3849cf29a9a2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3805d3a7a8c633d2a5636b0783eed145da66b91f.dockerfile"}