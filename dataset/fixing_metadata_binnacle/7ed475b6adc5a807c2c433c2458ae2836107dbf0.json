{"seed":2467551857,"processedDockerfileHash":"0cdefbdc8b09da9c8963939f72229fbb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Documentum Content Server 7.1 Patch 09\n#   Documentum is a registred trademark from EMC (http://www.emc.com/legal/emc-corporation-trademarks.htm)\n#  #FROM centos:centos6\nFROM base-centos6\nMAINTAINER Jean-Pierre FRANCONIERI <jean-pierre.franconieri@soprasteria.com>\nRUN mkdir /var/dctm-data /var/log/documentum \\\n && chmod 1777 /var/dctm-data /var/log/documentum\nVOLUME /var/dctm-data\nVOLUME /var/log/documentum\nRUN echo 'root:root' | chpasswd\nRUN yum update -y \\\n && yum -y --noplugins groupinstall base core compat-libraries\nRUN yum -y --noplugins clean all\n#   set timezone\nRUN mv /etc/localtime /etc/localtime.old ; ln -s /usr/share/zoneinfo/Europe/Paris /etc/localtime\n#   add our user and group first\nRUN groupadd dmadmin \\\n && useradd -g dmadmin dmadmin\nRUN echo dmadmin | passwd --stdin dmadmin\nRUN echo \"dmadmin ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers \\\n && echo \"Defaults:dmadmin !requiretty\" >> /etc/sudoers\n#   Creating documentum directories\nENV DOCUMENTUM=\"/opt/documentum\"\nENV DOCUMENTUM_SHARED=\"${DOCUMENTUM}/shared\"\nENV DM_HOME=\"${DOCUMENTUM}/product/7.1\"\nENV DOCUMENTUM_DATA=\"/var/dctm-data\"\nENV DOCUMENTUM_LOG=\"/var/log/documentum\"\nRUN mkdir -p ${DM_HOME} ${DOCUMENTUM_SHARED}\nRUN chown -R dmadmin:dmadmin ${DOCUMENTUM}\n#  # FIXME: cannot use volumes since chown fails to change ownership (may be specific to OSX)\n#  # see https://github.com/boot2docker/boot2docker/issues/581\n#  # VOLUME [ \"/var/log/documentum\", \"/var/dctm-data\"]\n#  # RUN ls -al /var/log/documentum /var/dctm-data\n#  #RUN mkdir -p ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\n#  #RUN chown -R dmadmin:dmadmin ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\nRUN echo \"dctm 49000/tcp # documentum repository service\" >> /etc/services \\\n && echo \"dctm_s 49001/tcp # documentum repository service\" >> /etc/services\nRUN echo \"#!/bin/sh\" > /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM=${DOCUMENTUM}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_SHARED=${DOCUMENTUM_SHARED}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DM_HOME=${DM_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_DATA=${DOCUMENTUM_DATA}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_LOG=${DOCUMENTUM_LOG}\" >> /etc/profile.d/documentum.sh \\\n && chmod a+x /etc/profile.d/documentum.sh\nCOPY ./bundles /bundles\nRUN chown -R dmadmin:dmadmin /bundles\n#   Installing content server\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir cs-install \\\n && cd cs-install \\\n && tar -xf /bundles/Content_Server_7.1_linux64_oracle.tar \\\n && chmod u+x serverSetup.bin \\\n && ./serverSetup.bin -f /bundles/cs-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/cs-install.log \\\n && cd .. \\\n && rm -rf cs-install \\\n && echo \"done\"\nUSER root\nRUN JAVA_BINARY=`ls -1d $DOCUMENTUM_SHARED/java*/*/bin/java 2> /dev/null | head -1 ` \\\n && JAVA_HOME=`dirname $JAVA_BINARY ` \\\n && JAVA_HOME=`dirname $JAVA_HOME ` \\\n && echo \"export JAVA_HOME=${JAVA_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export PATH=${JAVA_HOME}/bin:${PATH}\" >> /etc/profile.d/documentum.sh \\\n && echo \"done\"\n#   installing patch\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir patch-install \\\n && cd patch-install \\\n && tar -zxf /bundles/patch/CS_7.1.*.gz \\\n && source /etc/profile.d/documentum.sh \\\n && chmod u+x ./patch.bin \\\n && ./patch.bin LAX_VM $( which java ;) -f /bundles/patch/patch-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/patch-install.log \\\n && cd .. \\\n && rm -rf patch-install \\\n && echo \"done\"\nRUN echo \". $DM_HOME/bin/dm_set_server_env.sh\" >> /home/dmadmin/.bash_profile\n#   fix an issue in dfc.properties (left by installer with an empty broker entry)\nRUN cp --backup=numbered /bundles/dfc.properties ${DOCUMENTUM_SHARED}/config/\n#   add extra tools (ease dar deploying)\nRUN chmod a+x /bundles/dar-tools/*.sh \\\n && mv /bundles/dar-tools/*.* $DM_HOME/install/\nUSER root\nWORKDIR /\nCMD [\"/usr/sbin/sshd\", \"-D\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Documentum Content Server 7.1 Patch 09\n#  Documentum is a registred trademark from EMC (http://www.emc.com/legal/emc-corporation-trademarks.htm)\n# #FROM centos:centos6\nFROM base-centos6\nMAINTAINER Jean-Pierre FRANCONIERI <jean-pierre.franconieri@soprasteria.com>\nRUN mkdir /var/dctm-data /var/log/documentum \\\n && chmod 1777 /var/dctm-data /var/log/documentum\nVOLUME /var/dctm-data\nVOLUME /var/log/documentum\nRUN echo 'root:root' | chpasswd\nRUN yum update -y \\\n && yum -y --noplugins groupinstall base core compat-libraries\nRUN yum -y --noplugins clean all\n#  set timezone\nRUN mv /etc/localtime /etc/localtime.old ; ln -s /usr/share/zoneinfo/Europe/Paris /etc/localtime\n#  add our user and group first\nRUN groupadd dmadmin \\\n && useradd -g dmadmin dmadmin\nRUN echo dmadmin | passwd --stdin dmadmin\nRUN echo \"dmadmin ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers \\\n && echo \"Defaults:dmadmin !requiretty\" >> /etc/sudoers\n#  Creating documentum directories\nENV DOCUMENTUM=\"/opt/documentum\"\nENV DOCUMENTUM_SHARED=\"${DOCUMENTUM}/shared\"\nENV DM_HOME=\"${DOCUMENTUM}/product/7.1\"\nENV DOCUMENTUM_DATA=\"/var/dctm-data\"\nENV DOCUMENTUM_LOG=\"/var/log/documentum\"\nRUN mkdir -p ${DM_HOME} ${DOCUMENTUM_SHARED}\nRUN chown -R dmadmin:dmadmin ${DOCUMENTUM}\n# # FIXME: cannot use volumes since chown fails to change ownership (may be specific to OSX)\n# # see https://github.com/boot2docker/boot2docker/issues/581\n# # VOLUME [ \"/var/log/documentum\", \"/var/dctm-data\"]\n# # RUN ls -al /var/log/documentum /var/dctm-data\n# #RUN mkdir -p ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\n# #RUN chown -R dmadmin:dmadmin ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\nRUN echo \"dctm 49000/tcp # documentum repository service\" >> /etc/services \\\n && echo \"dctm_s 49001/tcp # documentum repository service\" >> /etc/services\nRUN echo \"#!/bin/sh\" > /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM=${DOCUMENTUM}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_SHARED=${DOCUMENTUM_SHARED}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DM_HOME=${DM_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_DATA=${DOCUMENTUM_DATA}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_LOG=${DOCUMENTUM_LOG}\" >> /etc/profile.d/documentum.sh \\\n && chmod a+x /etc/profile.d/documentum.sh\nCOPY ./bundles /bundles\nRUN chown -R dmadmin:dmadmin /bundles\n#  Installing content server\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir cs-install \\\n && cd cs-install \\\n && tar -xf /bundles/Content_Server_7.1_linux64_oracle.tar \\\n && chmod u+x serverSetup.bin \\\n && ./serverSetup.bin -f /bundles/cs-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/cs-install.log \\\n && cd .. \\\n && rm -rf cs-install \\\n && echo \"done\"\nUSER root\nRUN JAVA_BINARY=`ls -1d $DOCUMENTUM_SHARED/java*/*/bin/java 2> /dev/null | head -1 ` \\\n && JAVA_HOME=`dirname $JAVA_BINARY ` \\\n && JAVA_HOME=`dirname $JAVA_HOME ` \\\n && echo \"export JAVA_HOME=${JAVA_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export PATH=${JAVA_HOME}/bin:${PATH}\" >> /etc/profile.d/documentum.sh \\\n && echo \"done\"\n#  installing patch\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir patch-install \\\n && cd patch-install \\\n && tar -zxf /bundles/patch/CS_7.1.*.gz \\\n && source /etc/profile.d/documentum.sh \\\n && chmod u+x ./patch.bin \\\n && ./patch.bin LAX_VM $( which java ;) -f /bundles/patch/patch-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/patch-install.log \\\n && cd .. \\\n && rm -rf patch-install \\\n && echo \"done\"\nRUN echo \". $DM_HOME/bin/dm_set_server_env.sh\" >> /home/dmadmin/.bash_profile\n#  fix an issue in dfc.properties (left by installer with an empty broker entry)\nRUN cp --backup=numbered /bundles/dfc.properties ${DOCUMENTUM_SHARED}/config/\n#  add extra tools (ease dar deploying)\nRUN chmod a+x /bundles/dar-tools/*.sh \\\n && mv /bundles/dar-tools/*.* $DM_HOME/install/\nUSER root\nWORKDIR /\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n","injectedSmells":[],"originalDockerfileHash":"cbbdd09b8367e6734eba6e3a9313da71","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Documentum Content Server 7.1 Patch 09\n#   Documentum is a registred trademark from EMC (http://www.emc.com/legal/emc-corporation-trademarks.htm)\n#  #FROM centos:centos6\nFROM base-centos6\nMAINTAINER Jean-Pierre FRANCONIERI <jean-pierre.franconieri@soprasteria.com>\nRUN mkdir /var/dctm-data /var/log/documentum \\\n && chmod 1777 /var/dctm-data /var/log/documentum\nVOLUME /var/dctm-data\nVOLUME /var/log/documentum\nRUN echo 'root:root' | chpasswd\nRUN yum update -y \\\n && yum -y --noplugins groupinstall base core compat-libraries\nRUN yum -y --noplugins clean all\n#   set timezone\nRUN mv /etc/localtime /etc/localtime.old ; ln -s /usr/share/zoneinfo/Europe/Paris /etc/localtime\n#   add our user and group first\nRUN groupadd dmadmin \\\n && useradd -g dmadmin dmadmin\nRUN echo dmadmin | passwd --stdin dmadmin\nRUN echo \"dmadmin ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers \\\n && echo \"Defaults:dmadmin !requiretty\" >> /etc/sudoers\n#   Creating documentum directories\nENV DOCUMENTUM=\"/opt/documentum\"\nENV DOCUMENTUM_SHARED=\"${DOCUMENTUM}/shared\"\nENV DM_HOME=\"${DOCUMENTUM}/product/7.1\"\nENV DOCUMENTUM_DATA=\"/var/dctm-data\"\nENV DOCUMENTUM_LOG=\"/var/log/documentum\"\nRUN mkdir -p ${DM_HOME} ${DOCUMENTUM_SHARED}\nRUN chown -R dmadmin:dmadmin ${DOCUMENTUM}\n#  # FIXME: cannot use volumes since chown fails to change ownership (may be specific to OSX)\n#  # see https://github.com/boot2docker/boot2docker/issues/581\n#  # VOLUME [ \"/var/log/documentum\", \"/var/dctm-data\"]\n#  # RUN ls -al /var/log/documentum /var/dctm-data\n#  #RUN mkdir -p ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\n#  #RUN chown -R dmadmin:dmadmin ${DOCUMENTUM_DATA} ${DOCUMENTUM_LOG}\nRUN echo \"dctm 49000/tcp # documentum repository service\" >> /etc/services \\\n && echo \"dctm_s 49001/tcp # documentum repository service\" >> /etc/services\nRUN echo \"#!/bin/sh\" > /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM=${DOCUMENTUM}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_SHARED=${DOCUMENTUM_SHARED}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DM_HOME=${DM_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_DATA=${DOCUMENTUM_DATA}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export DOCUMENTUM_LOG=${DOCUMENTUM_LOG}\" >> /etc/profile.d/documentum.sh \\\n && chmod a+x /etc/profile.d/documentum.sh\nCOPY ./bundles /bundles\nRUN chown -R dmadmin:dmadmin /bundles\n#   Installing content server\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir cs-install \\\n && cd cs-install \\\n && tar -xf /bundles/Content_Server_7.1_linux64_oracle.tar \\\n && chmod u+x serverSetup.bin \\\n && ./serverSetup.bin -f /bundles/cs-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/cs-install.log \\\n && cd .. \\\n && rm -rf cs-install \\\n && echo \"done\"\nUSER root\nRUN JAVA_BINARY=`ls -1d $DOCUMENTUM_SHARED/java*/*/bin/java 2> /dev/null | head -1 ` \\\n && JAVA_HOME=`dirname $JAVA_BINARY ` \\\n && JAVA_HOME=`dirname $JAVA_HOME ` \\\n && echo \"export JAVA_HOME=${JAVA_HOME}\" >> /etc/profile.d/documentum.sh \\\n && echo \"export PATH=${JAVA_HOME}/bin:${PATH}\" >> /etc/profile.d/documentum.sh \\\n && echo \"done\"\n#   installing patch\nUSER dmadmin\nWORKDIR /tmp\nRUN mkdir patch-install \\\n && cd patch-install \\\n && tar -zxf /bundles/patch/CS_7.1.*.gz \\\n && source /etc/profile.d/documentum.sh \\\n && chmod u+x ./patch.bin \\\n && ./patch.bin LAX_VM $( which java ;) -f /bundles/patch/patch-install.properties \\\n && cp logs/install.log ${DOCUMENTUM_LOG}/patch-install.log \\\n && cd .. \\\n && rm -rf patch-install \\\n && echo \"done\"\nRUN echo \". $DM_HOME/bin/dm_set_server_env.sh\" >> /home/dmadmin/.bash_profile\n#   fix an issue in dfc.properties (left by installer with an empty broker entry)\nRUN cp --backup=numbered /bundles/dfc.properties ${DOCUMENTUM_SHARED}/config/\n#   add extra tools (ease dar deploying)\nRUN chmod a+x /bundles/dar-tools/*.sh \\\n && mv /bundles/dar-tools/*.* $DM_HOME/install/\nUSER root\nWORKDIR /\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n","originalDockerfileUglifiedHash":"f338a87483387b1fc4c5ebd38a1d70c2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7ed475b6adc5a807c2c433c2458ae2836107dbf0.dockerfile"}