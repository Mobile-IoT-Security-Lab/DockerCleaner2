{"seed":1696169734,"processedDockerfileHash":"09259f587d49d88073195088675f4b96","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM gentoo/stage3-amd64\nMAINTAINER mislav.novakovic@sartura.hr\n#   update system\nRUN emerge --sync\n#   install basic dependencies\nRUN emerge -q automake bison flex dev-vcs/git cmake vim supervisor pkg-config libev protobuf-c swig\n#   Netopeer2 requires ssh server\nRUN USE=server emerge -q libssh\n#   add password to root\nRUN echo \"root:root\" | chpasswd\n#   add netconf user\nRUN useradd --system netconf \\\n && echo \"netconf:netconf\" | chpasswd\n#   use /opt/dev as working directory\nRUN mkdir /opt/dev\nWORKDIR /opt/dev\n#   generate default ssh key\nRUN ssh-keygen -t rsa -N \"\" -f /etc/ssh/ssh_host_rsa_key\n#   libredblack\nRUN git clone https://github.com/sysrepo/libredblack.git \\\n && cd libredblack \\\n && sed -i '1s/^/#!\\/usr\\/bin\\/env python2\\n/' rbgen.in \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && ldconfig\n#   libyang\nRUN git clone https://github.com/CESNET/libyang.git \\\n && cd libyang \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   sysrepo\nRUN git clone https://github.com/sysrepo/sysrepo.git \\\n && cd sysrepo \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" -DREPOSITORY_LOC:PATH=/etc/sysrepo .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   libnetconf2\nRUN git clone https://github.com/CESNET/libnetconf2.git \\\n && cd libnetconf2 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   keystore\nRUN cd /opt/dev \\\n && git clone https://github.com/CESNET/Netopeer2.git \\\n && cd Netopeer2 \\\n && cd keystored \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   netopeer2\nRUN cd /opt/dev \\\n && cd Netopeer2/server \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && cd ../../cli \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install\n#   install python2 sysrepo language bindings\nRUN emerge -q python:2.7\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=2 .. \\\n && make -j2 \\\n && make install\n#   install lua5.1 sysrepo language bindings\nRUN echo \"=app-eselect/eselect-lua-1 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100\" >> /etc/portage/package.unmask \\\n && echo \"=app-eselect/eselect-lua-1\" >> /etc/portage/package.unmask \\\n && emerge -q lua:5.1\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.1 .. \\\n && make -j2 \\\n && make install\n#   install python3 sysrepo language bindings\nRUN emerge -q python:3.4\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=3 .. \\\n && make -j2 \\\n && make install\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.2 .. \\\n && make -j2 \\\n && make install\nENV EDITOR=\"vim\"\nEXPOSE 830/tcp\nCOPY supervisord.conf /etc/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM gentoo/stage3-amd64\nMAINTAINER mislav.novakovic@sartura.hr\n#  update system\nRUN emerge --sync\n#  install basic dependencies\nRUN emerge -q automake bison flex dev-vcs/git cmake vim supervisor pkg-config libev protobuf-c swig\n#  Netopeer2 requires ssh server\nRUN USE=server emerge -q libssh\n#  add password to root\nRUN echo \"root:root\" | chpasswd\n#  add netconf user\nRUN useradd --system netconf \\\n && echo \"netconf:netconf\" | chpasswd\n#  use /opt/dev as working directory\nRUN mkdir /opt/dev\nWORKDIR /opt/dev\n#  generate default ssh key\nRUN ssh-keygen -t rsa -N \"\" -f /etc/ssh/ssh_host_rsa_key\n#  libredblack\nRUN git clone https://github.com/sysrepo/libredblack.git \\\n && cd libredblack \\\n && sed -i '1s/^/#!\\/usr\\/bin\\/env python2\\n/' rbgen.in \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && ldconfig\n#  libyang\nRUN git clone https://github.com/CESNET/libyang.git \\\n && cd libyang \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#  sysrepo\nRUN git clone https://github.com/sysrepo/sysrepo.git \\\n && cd sysrepo \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" -DREPOSITORY_LOC:PATH=/etc/sysrepo .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#  libnetconf2\nRUN git clone https://github.com/CESNET/libnetconf2.git \\\n && cd libnetconf2 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#  keystore\nRUN cd /opt/dev \\\n && git clone https://github.com/CESNET/Netopeer2.git \\\n && cd Netopeer2 \\\n && cd keystored \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#  netopeer2\nRUN cd /opt/dev \\\n && cd Netopeer2/server \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && cd ../../cli \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install\n#  install python2 sysrepo language bindings\nRUN emerge -q python:2.7\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=2 .. \\\n && make -j2 \\\n && make install\n#  install lua5.1 sysrepo language bindings\nRUN echo \"=app-eselect/eselect-lua-1 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100\" >> /etc/portage/package.unmask \\\n && echo \"=app-eselect/eselect-lua-1\" >> /etc/portage/package.unmask \\\n && emerge -q lua:5.1\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.1 .. \\\n && make -j2 \\\n && make install\n#  install python3 sysrepo language bindings\nRUN emerge -q python:3.4\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=3 .. \\\n && make -j2 \\\n && make install\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.2 .. \\\n && make -j2 \\\n && make install\nENV EDITOR=\"vim\"\nEXPOSE 830/tcp\nCOPY supervisord.conf /etc/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\n","injectedSmells":[],"originalDockerfileHash":"5cdc8a7125f8cf7eb712957165197f06","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM gentoo/stage3-amd64\nMAINTAINER mislav.novakovic@sartura.hr\n#   update system\nRUN emerge --sync\n#   install basic dependencies\nRUN emerge -q automake bison flex dev-vcs/git cmake vim supervisor pkg-config libev protobuf-c swig\n#   Netopeer2 requires ssh server\nRUN USE=server emerge -q libssh\n#   add password to root\nRUN echo \"root:root\" | chpasswd\n#   add netconf user\nRUN useradd --system netconf \\\n && echo \"netconf:netconf\" | chpasswd\n#   use /opt/dev as working directory\nRUN mkdir /opt/dev\nWORKDIR /opt/dev\n#   generate default ssh key\nRUN ssh-keygen -t rsa -N \"\" -f /etc/ssh/ssh_host_rsa_key\n#   libredblack\nRUN git clone https://github.com/sysrepo/libredblack.git \\\n && cd libredblack \\\n && sed -i '1s/^/#!\\/usr\\/bin\\/env python2\\n/' rbgen.in \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && ldconfig\n#   libyang\nRUN git clone https://github.com/CESNET/libyang.git \\\n && cd libyang \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   sysrepo\nRUN git clone https://github.com/sysrepo/sysrepo.git \\\n && cd sysrepo \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" -DREPOSITORY_LOC:PATH=/etc/sysrepo .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   libnetconf2\nRUN git clone https://github.com/CESNET/libnetconf2.git \\\n && cd libnetconf2 \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   keystore\nRUN cd /opt/dev \\\n && git clone https://github.com/CESNET/Netopeer2.git \\\n && cd Netopeer2 \\\n && cd keystored \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && ldconfig\n#   netopeer2\nRUN cd /opt/dev \\\n && cd Netopeer2/server \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install \\\n && cd ../../cli \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE:String=\"Release\" .. \\\n && make -j2 \\\n && make install\n#   install python2 sysrepo language bindings\nRUN emerge -q python:2.7\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=2 .. \\\n && make -j2 \\\n && make install\n#   install lua5.1 sysrepo language bindings\nRUN echo \"=app-eselect/eselect-lua-1 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100 ~amd64\" >> /etc/portage/package.accept_keywords \\\n && echo \"=dev-lang/lua-5.1.5-r100\" >> /etc/portage/package.unmask \\\n && echo \"=app-eselect/eselect-lua-1\" >> /etc/portage/package.unmask \\\n && emerge -q lua:5.1\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.1 .. \\\n && make -j2 \\\n && make install\n#   install python3 sysrepo language bindings\nRUN emerge -q python:3.4\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_PYTHON_VERSION=3 .. \\\n && make -j2 \\\n && make install\nRUN cd /opt/dev/sysrepo/build \\\n && cmake -DGEN_LUA_VERSION=5.2 .. \\\n && make -j2 \\\n && make install\nENV EDITOR=\"vim\"\nEXPOSE 830/tcp\nCOPY supervisord.conf /etc/supervisord.conf\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\n","originalDockerfileUglifiedHash":"41b9e98c59b194a570b2171f85a8563d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/feec1c05ec2ceeab2d981ae036ae219d95b6aee6.dockerfile"}