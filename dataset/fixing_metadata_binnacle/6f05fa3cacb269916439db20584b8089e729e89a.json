{"seed":630168944,"processedDockerfileHash":"40e38d10ba537f25124bf2bbbf29fd57","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   ==================================================================\n#   cu90-py36-tf112-torch041\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   tensorflow    1.12.0  (pip)\n#   pytorch       0.4.1  (pip)\n#   ==================================================================\n#   FROM 10.11.3.8:5000/nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-9.0/bin:$PATH\"\nENV LC_ALL=\"C\"\n#   将tensorflow和pytorch安装包提前下载下来，然后拷贝到跟dockerfile同一个目录下面\nCOPY ./tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl ./\nCOPY ./torch-0.4.1-cp36-cp36m-linux_x86_64.whl ./\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm numba seaborn hypertools \\\n && $PIP_INSTALL tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl \\\n && $PIP_INSTALL torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  cu90-py36-tf112-torch041\n#  ------------------------------------------------------------------\n#  python        3.6    (apt)\n#  tensorflow    1.12.0  (pip)\n#  pytorch       0.4.1  (pip)\n#  ==================================================================\n#  FROM 10.11.3.8:5000/nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-9.0/bin:$PATH\"\nENV LC_ALL=\"C\"\n#  将tensorflow和pytorch安装包提前下载下来，然后拷贝到跟dockerfile同一个目录下面\nCOPY ./tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl ./\nCOPY ./torch-0.4.1-cp36-cp36m-linux_x86_64.whl ./\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm numba seaborn hypertools \\\n && $PIP_INSTALL tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl \\\n && $PIP_INSTALL torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","injectedSmells":[],"originalDockerfileHash":"b9bfb63d026dc988e2e52670258f9d70","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   cu90-py36-tf112-torch041\n#   ------------------------------------------------------------------\n#   python        3.6    (apt)\n#   tensorflow    1.12.0  (pip)\n#   pytorch       0.4.1  (pip)\n#   ==================================================================\n#   FROM 10.11.3.8:5000/nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-9.0/bin:$PATH\"\nENV LC_ALL=\"C\"\n#   将tensorflow和pytorch安装包提前下载下来，然后拷贝到跟dockerfile同一个目录下面\nCOPY ./tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl ./\nCOPY ./torch-0.4.1-cp36-cp36m-linux_x86_64.whl ./\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simple \" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential ca-certificates cmake git wget vim zip libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler libopenblas-dev liblapack-dev python-tk openssh-client openssh-server time tmux expect \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL pip \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL numpy h5py scipy pandas scikit-learn scikit-image scikit-video matplotlib Cython visdom dominate protobuf lmdb wheel nose leveldb Pillow six decorator opencv-python sklearn imageio packaging tqdm numba seaborn hypertools \\\n && $PIP_INSTALL tensorflow_gpu-1.12.0-cp36-cp36m-linux_x86_64.whl \\\n && $PIP_INSTALL torch-0.4.1-cp36-cp36m-linux_x86_64.whl torchvision \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\nEXPOSE 6006/tcp\n","originalDockerfileUglifiedHash":"0e38433f02ee9696df9814a345443dd9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6f05fa3cacb269916439db20584b8089e729e89a.dockerfile"}