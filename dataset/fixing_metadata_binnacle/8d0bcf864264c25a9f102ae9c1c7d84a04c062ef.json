{"seed":2803177137,"processedDockerfileHash":"ec5591f75e968af85ab926bea13315e3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:3.9\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\nLABEL maintainer=\"CrazyMax\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"nextcloud\" \\\n      org.label-schema.description=\"Nextcloud\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vendor=\"CrazyMax\" \\\n      org.label-schema.schema-version=\"1.0\"\nENV NEXTCLOUD_VERSION=\"13.0.12\" \\\n    CRONTAB_PATH=\"/var/spool/cron/crontabs\"\nRUN apk add ca-certificates=20191127-r2 ffmpeg=4.0.6-r0 libressl=2.7.5-r0 libsmbclient=4.8.12-r2 libxml2=2.9.9-r3 nginx=1.14.2-r5 php7=7.2.33-r0 php7-apcu php7-cli php7-bz2=7.2.33-r0 php7-curl=7.2.33-r0 php7-ctype=7.2.33-r0 php7-dom=7.2.33-r0 php7-exif=7.2.33-r0 php7-fileinfo=7.2.33-r0 php7-fpm=7.2.33-r0 php7-ftp=7.2.33-r0 php7-gmp=7.2.33-r0 php7-iconv=7.2.33-r0 php7-imagick php7-intl=7.2.33-r0 php7-json=7.2.33-r0 php7-ldap=7.2.33-r0 php7-mbstring=7.2.33-r0 php7-mcrypt php7-memcached php7-opcache=7.2.33-r0 php7-openssl=7.2.33-r0 php7-pcntl=7.2.33-r0 php7-pdo=7.2.33-r0 php7-pdo_mysql=7.2.33-r0 php7-pdo_pgsql=7.2.33-r0 php7-pdo_sqlite=7.2.33-r0 php7-posix=7.2.33-r0 php7-redis php7-session=7.2.33-r0 php7-simplexml=7.2.33-r0 php7-sqlite3=7.2.33-r0 php7-xml=7.2.33-r0 php7-xmlreader=7.2.33-r0 php7-xmlwriter=7.2.33-r0 php7-zip=7.2.33-r0 php7-zlib python3=3.6.9-r3 su-exec=0.2-r0 supervisor=3.3.4-r1 tzdata=2020c-r1 --update --no-cache \\\n && apk add autoconf=2.69-r2 automake=1.16.1-r0 build-base=0.5-r1 gnupg=2.2.19-r0 libtool=2.4.6-r5 pcre-dev=8.42-r2 php7-dev=7.2.33-r0 php7-pear=7.2.33-r0 samba-dev=4.8.12-r2 tar=1.32-r0 wget=1.20.3-r0 --update --no-cache -t build-dependencies \\\n && pip3 install --upgrade pip \\\n && pip3 install nextcloud_news_updater --install-option=\"--install-scripts=/usr/bin\" \\\n && rm -rf /var/www/* /tmp/* \\\n && cd /tmp \\\n && wget -q https://pecl.php.net/get/smbclient-1.0.0.tgz \\\n && pecl install smbclient-1.0.0.tgz \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc \\\n && wget -q https://nextcloud.com/nextcloud.asc \\\n && gpg --import nextcloud.asc \\\n && gpg --verify --batch --no-tty nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && tar -xjf nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 --strip 1 -C /var/www \\\n && rm -f nextcloud-${NEXTCLOUD_VERSION}.tar* nextcloud.asc \\\n && chown -R nginx. /var/lib/nginx /var/log/nginx /var/log/php7 /var/tmp/nginx /var/www \\\n && apk del build-dependencies \\\n && rm -rf /root/.gnupg /tmp/* /var/cache/apk/* /var/www/updater\nCOPY entrypoint.sh /entrypoint.sh\nCOPY assets /\nRUN chmod a+x /entrypoint.sh /usr/local/bin/* \\\n && chown -R nginx. /tpls/data /tpls/bootstrap.php\nEXPOSE 8000/tcp\nWORKDIR /var/www\nVOLUME [ \"/data\" ]\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.9\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\nLABEL maintainer=\"CrazyMax\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"nextcloud\" \\\n      org.label-schema.description=\"Nextcloud\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vendor=\"CrazyMax\" \\\n      org.label-schema.schema-version=\"1.0\"\nENV NEXTCLOUD_VERSION=\"13.0.12\" \\\n    CRONTAB_PATH=\"/var/spool/cron/crontabs\"\nRUN apk --update --no-cache add ca-certificates ffmpeg libressl libsmbclient libxml2 nginx php7 php7-apcu php7-cli php7-bz2 php7-curl php7-ctype php7-dom php7-exif php7-fileinfo php7-fpm php7-ftp php7-gmp php7-iconv php7-imagick php7-intl php7-json php7-ldap php7-mbstring php7-mcrypt php7-memcached php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-posix php7-redis php7-session php7-simplexml php7-sqlite3 php7-xml php7-xmlreader php7-xmlwriter php7-zip php7-zlib python3 su-exec supervisor tzdata \\\n && apk --update --no-cache add -t build-dependencies autoconf automake build-base gnupg libtool pcre-dev php7-dev php7-pear samba-dev tar wget \\\n && pip3 install --upgrade pip \\\n && pip3 install nextcloud_news_updater --install-option=\"--install-scripts=/usr/bin\" \\\n && rm -rf /var/www/* /tmp/* \\\n && cd /tmp \\\n && wget -q https://pecl.php.net/get/smbclient-1.0.0.tgz \\\n && pecl install smbclient-1.0.0.tgz \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc \\\n && wget -q https://nextcloud.com/nextcloud.asc \\\n && gpg --import nextcloud.asc \\\n && gpg --verify --batch --no-tty nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && tar -xjf nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 --strip 1 -C /var/www \\\n && rm -f nextcloud-${NEXTCLOUD_VERSION}.tar* nextcloud.asc \\\n && chown -R nginx. /var/lib/nginx /var/log/nginx /var/log/php7 /var/tmp/nginx /var/www \\\n && apk del build-dependencies \\\n && rm -rf /root/.gnupg /tmp/* /var/cache/apk/* /var/www/updater\nCOPY entrypoint.sh /entrypoint.sh\nCOPY assets /\nRUN chmod a+x /entrypoint.sh /usr/local/bin/* \\\n && chown -R nginx. /tpls/data /tpls/bootstrap.php\nEXPOSE 8000/tcp\nWORKDIR /var/www\nVOLUME [ \"/data\" ]\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\n","injectedSmells":[],"originalDockerfileHash":"0b7669c7955959a3abd4e157a71516b1","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.9\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\nLABEL maintainer=\"CrazyMax\" \\\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"nextcloud\" \\\n      org.label-schema.description=\"Nextcloud\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-url=\"https://github.com/crazy-max/docker-nextcloud\" \\\n      org.label-schema.vendor=\"CrazyMax\" \\\n      org.label-schema.schema-version=\"1.0\"\nENV NEXTCLOUD_VERSION=\"13.0.12\" \\\n    CRONTAB_PATH=\"/var/spool/cron/crontabs\"\nRUN apk --update --no-cache add ca-certificates ffmpeg libressl libsmbclient libxml2 nginx php7 php7-apcu php7-cli php7-bz2 php7-curl php7-ctype php7-dom php7-exif php7-fileinfo php7-fpm php7-ftp php7-gmp php7-iconv php7-imagick php7-intl php7-json php7-ldap php7-mbstring php7-mcrypt php7-memcached php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-posix php7-redis php7-session php7-simplexml php7-sqlite3 php7-xml php7-xmlreader php7-xmlwriter php7-zip php7-zlib python3 su-exec supervisor tzdata \\\n && apk --update --no-cache add -t build-dependencies autoconf automake build-base gnupg libtool pcre-dev php7-dev php7-pear samba-dev tar wget \\\n && pip3 install --upgrade pip \\\n && pip3 install nextcloud_news_updater --install-option=\"--install-scripts=/usr/bin\" \\\n && rm -rf /var/www/* /tmp/* \\\n && cd /tmp \\\n && wget -q https://pecl.php.net/get/smbclient-1.0.0.tgz \\\n && pecl install smbclient-1.0.0.tgz \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && wget -q https://download.nextcloud.com/server/releases/nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc \\\n && wget -q https://nextcloud.com/nextcloud.asc \\\n && gpg --import nextcloud.asc \\\n && gpg --verify --batch --no-tty nextcloud-${NEXTCLOUD_VERSION}.tar.bz2.asc nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 \\\n && tar -xjf nextcloud-${NEXTCLOUD_VERSION}.tar.bz2 --strip 1 -C /var/www \\\n && rm -f nextcloud-${NEXTCLOUD_VERSION}.tar* nextcloud.asc \\\n && chown -R nginx. /var/lib/nginx /var/log/nginx /var/log/php7 /var/tmp/nginx /var/www \\\n && apk del build-dependencies \\\n && rm -rf /root/.gnupg /tmp/* /var/cache/apk/* /var/www/updater\nCOPY entrypoint.sh /entrypoint.sh\nCOPY assets /\nRUN chmod a+x /entrypoint.sh /usr/local/bin/* \\\n && chown -R nginx. /tpls/data /tpls/bootstrap.php\nEXPOSE 8000/tcp\nWORKDIR /var/www\nVOLUME [ \"/data\" ]\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisord.conf\"]\n","originalDockerfileUglifiedHash":"0b7669c7955959a3abd4e157a71516b1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/8d0bcf864264c25a9f102ae9c1c7d84a04c062ef.dockerfile"}