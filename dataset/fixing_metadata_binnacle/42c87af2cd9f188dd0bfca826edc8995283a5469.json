{"seed":3055875722,"processedDockerfileHash":"2b89b5c83b7947eb3d3c6bf438a7072d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Antonin Bas <antonin@barefootnetworks.com>\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends automake=1:1.14.1-2ubuntu1 bridge-utils=1.5-6ubuntu2 build-essential=11.6ubuntu6 cmake=2.8.12.2-0ubuntu3 ethtool=1:3.13-1 git=1:1.9.1-1ubuntu0.10 libboost-dev=1.54.0.1ubuntu1 libboost-filesystem-dev=1.54.0.1ubuntu1 libboost-program-options-dev=1.54.0.1ubuntu1 libboost-system-dev=1.54.0.1ubuntu1 libboost-test-dev=1.54.0.1ubuntu1 libboost-thread-dev=1.54.0.1ubuntu1 libedit-dev=3.1-20130712-2 libevent-dev=2.0.21-stable-1ubuntu1.14.04.2 libffi-dev=3.1~rc1+r3.0.13-12ubuntu0.2 libgmp-dev=2:5.1.3+dfsg-1ubuntu1 libglib2.0-dev=2.40.2-0ubuntu1.1 libhiredis-dev=0.11.0-3 libjudy-dev=1.0.5-1ubuntu1 libnl-route-3-dev=3.2.21-1ubuntu4.1 libpcap0.8=1.5.3-2 libpcap0.8-dev=1.5.3-2 libtool=2.4.2-1.7ubuntu1 libssl-dev=1.0.1f-1ubuntu2.27 openssh-server=1:6.6p1-2ubuntu2.13 packit=1.0-2 pkg-config=0.26-1ubuntu4 python-dev=2.7.5-5ubuntu3 python-pip=1.5.4-1ubuntu4 python-pygraph=1.8.2-4 python-pygraphviz=1.2-1 python-setuptools=3.3-1ubuntu2 python-thrift=0.9.0-1build1 python-yaml=3.10-4ubuntu0.1 quagga=0.99.22.4-3ubuntu1.5 redis-server=2:2.8.4-2ubuntu0.2 redis-tools=2:2.8.4-2ubuntu0.2 subversion=1.8.8-1ubuntu3.3 tshark=2.6.6-1~ubuntu14.04.0 xterm=297-1ubuntu1 -y )\nRUN pip install tenjin==1.1.1\n#   install scapy\nRUN mkdir -p /tmp/scapy ; cd /tmp/scapy ; git clone https://github.com/p4lang/scapy-vxlan.git ; cd scapy-vxlan ; python setup.py install ; rm -fr /tmp/scapy\n#   install p4-hlir\nRUN mkdir -p /tmp/p4-hlir ; cd /tmp/p4-hlir ; git clone https://github.com/p4lang/p4-hlir.git ; cd p4-hlir ; python setup.py install ; rm -fr /tmp/p4-hlir\n#   install mstpd\nRUN mkdir -p /third-party/diffs\nCOPY diffs/mstpd.diff /third-party/diffs/mstpd.diff\nRUN cd /third-party ; svn checkout svn://svn.code.sf.net/p/mstpd/code/trunk mstpd ; cd mstpd ; patch -p0 -i /third-party/diffs/mstpd.diff ; make install\n#   install ctypesgen\nRUN mkdir -p /tmp/ctypesgen ; cd /tmp/ctypesgen ; git clone https://github.com/davidjamesca/ctypesgen.git ; cd ctypesgen ; python setup.py install ; rm -fr /tmp/ctypesgen\nCOPY p4factory /p4factory\nRUN mkdir -p /tmp/install_tmp ; cd install_tmp ; wget -c http://archive.apache.org/dist/thrift/0.9.2/thrift-0.9.2.tar.gz ; tar zxvf thrift-0.9.2.tar.gz ; cd thrift-0.9.2 ; ./configure --with-cpp=yes --with-c_glib=no --with-java=no --with-ruby=no --with-erlang=no --with-go=no --with-nodejs=no ; make -j4 ; make install ; ldconfig ; cd .. ; wget https://github.com/nanomsg/nanomsg/archive/1.0.0.tar.gz -O nanomsg-1.0.0.tar.gz ; tar -xzvf nanomsg-1.0.0.tar.gz ; cd nanomsg-1.0.0 ; mkdir build ; cd build ; cmake .. -DCMAKE_INSTALL_PREFIX=/usr ; cmake --build . ; cmake --build . --target install ; cd ../../ ; git clone https://github.com/nanomsg/nnpy.git ; cd nnpy ; git checkout c7e718a5173447c85182dc45f99e2abcf9cd4065 ; ldconfig ; pip install cffi==1.15.1 ; pip install . ; cd ../.. ; rm -rf /tmp/install_tmp\nENV VTYSH_PAGER=\"more\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Antonin Bas <antonin@barefootnetworks.com>\nRUN apt-get update\nRUN apt-get install automake bridge-utils build-essential cmake ethtool git libboost-dev libboost-filesystem-dev libboost-program-options-dev libboost-system-dev libboost-test-dev libboost-thread-dev libedit-dev libevent-dev libffi-dev libgmp-dev libglib2.0-dev libhiredis-dev libjudy-dev libnl-route-3-dev libpcap0.8 libpcap0.8-dev libtool libssl-dev openssh-server packit pkg-config python-dev python-pip python-pygraph python-pygraphviz python-setuptools python-thrift python-yaml quagga redis-server redis-tools subversion tshark xterm -y\nRUN pip install tenjin\n#  install scapy\nRUN mkdir -p /tmp/scapy ; cd /tmp/scapy ; git clone https://github.com/p4lang/scapy-vxlan.git ; cd scapy-vxlan ; python setup.py install ; rm -fr /tmp/scapy\n#  install p4-hlir\nRUN mkdir -p /tmp/p4-hlir ; cd /tmp/p4-hlir ; git clone https://github.com/p4lang/p4-hlir.git ; cd p4-hlir ; python setup.py install ; rm -fr /tmp/p4-hlir\n#  install mstpd\nRUN mkdir -p /third-party/diffs\nCOPY diffs/mstpd.diff /third-party/diffs/mstpd.diff\nRUN cd /third-party ; svn checkout svn://svn.code.sf.net/p/mstpd/code/trunk mstpd ; cd mstpd ; patch -p0 -i /third-party/diffs/mstpd.diff ; make install\n#  install ctypesgen\nRUN mkdir -p /tmp/ctypesgen ; cd /tmp/ctypesgen ; git clone https://github.com/davidjamesca/ctypesgen.git ; cd ctypesgen ; python setup.py install ; rm -fr /tmp/ctypesgen\nADD p4factory /p4factory\nRUN mkdir -p /tmp/install_tmp ; cd install_tmp ; wget -c http://archive.apache.org/dist/thrift/0.9.2/thrift-0.9.2.tar.gz ; tar zxvf thrift-0.9.2.tar.gz ; cd thrift-0.9.2 ; ./configure --with-cpp=yes --with-c_glib=no --with-java=no --with-ruby=no --with-erlang=no --with-go=no --with-nodejs=no ; make -j4 ; make install ; ldconfig ; cd .. ; wget https://github.com/nanomsg/nanomsg/archive/1.0.0.tar.gz -O nanomsg-1.0.0.tar.gz ; tar -xzvf nanomsg-1.0.0.tar.gz ; cd nanomsg-1.0.0 ; mkdir build ; cd build ; cmake .. -DCMAKE_INSTALL_PREFIX=/usr ; cmake --build . ; cmake --build . --target install ; cd ../../ ; git clone https://github.com/nanomsg/nnpy.git ; cd nnpy ; git checkout c7e718a5173447c85182dc45f99e2abcf9cd4065 ; ldconfig ; pip install cffi ; pip install . ; cd ../.. ; rm -rf /tmp/install_tmp\nENV VTYSH_PAGER=\"more\"\n","injectedSmells":[],"originalDockerfileHash":"ea4f85de0597f8ddcb74e21ab624f68a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Antonin Bas <antonin@barefootnetworks.com>\nRUN apt-get update\nRUN apt-get install automake bridge-utils build-essential cmake ethtool git libboost-dev libboost-filesystem-dev libboost-program-options-dev libboost-system-dev libboost-test-dev libboost-thread-dev libedit-dev libevent-dev libffi-dev libgmp-dev libglib2.0-dev libhiredis-dev libjudy-dev libnl-route-3-dev libpcap0.8 libpcap0.8-dev libtool libssl-dev openssh-server packit pkg-config python-dev python-pip python-pygraph python-pygraphviz python-setuptools python-thrift python-yaml quagga redis-server redis-tools subversion tshark xterm -y\nRUN pip install tenjin\n#   install scapy\nRUN mkdir -p /tmp/scapy ; cd /tmp/scapy ; git clone https://github.com/p4lang/scapy-vxlan.git ; cd scapy-vxlan ; python setup.py install ; rm -fr /tmp/scapy\n#   install p4-hlir\nRUN mkdir -p /tmp/p4-hlir ; cd /tmp/p4-hlir ; git clone https://github.com/p4lang/p4-hlir.git ; cd p4-hlir ; python setup.py install ; rm -fr /tmp/p4-hlir\n#   install mstpd\nRUN mkdir -p /third-party/diffs\nCOPY diffs/mstpd.diff /third-party/diffs/mstpd.diff\nRUN cd /third-party ; svn checkout svn://svn.code.sf.net/p/mstpd/code/trunk mstpd ; cd mstpd ; patch -p0 -i /third-party/diffs/mstpd.diff ; make install\n#   install ctypesgen\nRUN mkdir -p /tmp/ctypesgen ; cd /tmp/ctypesgen ; git clone https://github.com/davidjamesca/ctypesgen.git ; cd ctypesgen ; python setup.py install ; rm -fr /tmp/ctypesgen\nADD p4factory /p4factory\nRUN mkdir -p /tmp/install_tmp ; cd install_tmp ; wget -c http://archive.apache.org/dist/thrift/0.9.2/thrift-0.9.2.tar.gz ; tar zxvf thrift-0.9.2.tar.gz ; cd thrift-0.9.2 ; ./configure --with-cpp=yes --with-c_glib=no --with-java=no --with-ruby=no --with-erlang=no --with-go=no --with-nodejs=no ; make -j4 ; make install ; ldconfig ; cd .. ; wget https://github.com/nanomsg/nanomsg/archive/1.0.0.tar.gz -O nanomsg-1.0.0.tar.gz ; tar -xzvf nanomsg-1.0.0.tar.gz ; cd nanomsg-1.0.0 ; mkdir build ; cd build ; cmake .. -DCMAKE_INSTALL_PREFIX=/usr ; cmake --build . ; cmake --build . --target install ; cd ../../ ; git clone https://github.com/nanomsg/nnpy.git ; cd nnpy ; git checkout c7e718a5173447c85182dc45f99e2abcf9cd4065 ; ldconfig ; pip install cffi ; pip install . ; cd ../.. ; rm -rf /tmp/install_tmp\nENV VTYSH_PAGER=\"more\"\n","originalDockerfileUglifiedHash":"0638a209c6f9ebd7e4c5c9acb411a1b1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/42c87af2cd9f188dd0bfca826edc8995283a5469.dockerfile"}