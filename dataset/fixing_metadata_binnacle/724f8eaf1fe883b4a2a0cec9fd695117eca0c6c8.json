{"seed":3011588130,"processedDockerfileHash":"b694fac39681c956d17731f543a686ef","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":[],"processedDockerfile":"#   LICENSE UPL 1.0\n#\n#   Copyright (c) 1982-2018 Oracle and/or its affiliates. All rights reserved.\n#\n#   ORACLE DOCKERFILES PROJECT\n#   --------------------------\n#   This is the Dockerfile for Oracle Database 18c\n#   \n#   REQUIRED FILES TO BUILD THIS IMAGE\n#   ----------------------------------\n#   (1) db_home.zip\n#       Download Oracle Database 18c Enterprise Edition or Standard Edition 2 for Linux x64\n#       from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n#   HOW TO BUILD THIS IMAGE\n#   -----------------------\n#   Put all downloaded files in the same directory as this Dockerfile\n#   Run: \n#        $ docker build -t oracle/database:18.3.0-${EDITION} . \n#\n#   Pull base image\n#   ---------------\nFROM oraclelinux:7-slim AS base\n#   Maintainer\n#   ----------\nMAINTAINER Gerald Venzl <gerald.venzl@oracle.com>\n#   Environment variables required for this build (do NOT change)\n#   -------------------------------------------------------------\nENV ORACLE_BASE=\"/opt/oracle\" \\\n    ORACLE_HOME=\"/opt/oracle/product/18c/dbhome_1\" \\\n    INSTALL_DIR=\"/opt/install\" \\\n    INSTALL_FILE_1=\"LINUX.X64_180000_db_home.zip\" \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    START_FILE=\"startDB.sh\" \\\n    CREATE_DB_FILE=\"createDB.sh\" \\\n    SETUP_LINUX_FILE=\"setupLinuxEnv.sh\" \\\n    CHECK_SPACE_FILE=\"checkSpace.sh\" \\\n    CHECK_DB_FILE=\"checkDBStatus.sh\" \\\n    USER_SCRIPTS_FILE=\"runUserScripts.sh\" \\\n    INSTALL_DB_BINARIES_FILE=\"installDBBinaries.sh\"\n#   Use second ENV so that variable get substituted\nENV PATH=\"$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH\" \\\n    LD_LIBRARY_PATH=\"$ORACLE_HOME/lib:/usr/lib\" \\\n    CLASSPATH=\"$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\"\n#   Copy files needed during both installation and runtime\n#   -------------\nCOPY $SETUP_LINUX_FILE $CHECK_SPACE_FILE $INSTALL_DIR/\nCOPY $RUN_FILE $START_FILE $CREATE_DB_FILE $CONFIG_RSP $PWD_FILE $CHECK_DB_FILE $USER_SCRIPTS_FILE $ORACLE_BASE/\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$CHECK_SPACE_FILE \\\n && $INSTALL_DIR/$SETUP_LINUX_FILE \\\n && rm -rf $INSTALL_DIR\n#  ############################################\n#   -------------------------------------------\n#   Start new stage for installing the database\n#   -------------------------------------------\n#  ############################################\nFROM base AS builder\nARG DB_EDITION\n#   Install unzip for unzip operation\nRUN yum -y install unzip\n#   Copy DB install file\nCOPY --chown=oracle:dba $INSTALL_FILE_1 $INSTALL_RSP $INSTALL_DB_BINARIES_FILE $INSTALL_DIR/\n#   Install DB software binaries\nUSER oracle\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$INSTALL_DB_BINARIES_FILE $DB_EDITION\n#  ############################################\n#   -------------------------------------------\n#   Start new layer for database runtime\n#   -------------------------------------------\n#  ############################################\nFROM base\nUSER oracle\nCOPY --chown=oracle:dba --from=builder $ORACLE_BASE $ORACLE_BASE\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh \\\n && $ORACLE_HOME/root.sh\nUSER oracle\nWORKDIR /home/oracle\nVOLUME [\"$ORACLE_BASE/oradata\"]\nEXPOSE 1521/tcp 5500/tcp\nHEALTHCHECK --interval=60s --start-period=300s CMD \"$ORACLE_BASE/$CHECK_DB_FILE\" > /dev/null || exit 1\n#   Define default command to start Oracle Database. \nCMD exec $ORACLE_BASE/$RUN_FILE\n","originalDockerfile":"#  LICENSE UPL 1.0\n#\n#  Copyright (c) 1982-2018 Oracle and/or its affiliates. All rights reserved.\n#\n#  ORACLE DOCKERFILES PROJECT\n#  --------------------------\n#  This is the Dockerfile for Oracle Database 18c\n#  \n#  REQUIRED FILES TO BUILD THIS IMAGE\n#  ----------------------------------\n#  (1) db_home.zip\n#      Download Oracle Database 18c Enterprise Edition or Standard Edition 2 for Linux x64\n#      from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n#  HOW TO BUILD THIS IMAGE\n#  -----------------------\n#  Put all downloaded files in the same directory as this Dockerfile\n#  Run: \n#       $ docker build -t oracle/database:18.3.0-${EDITION} . \n#\n#  Pull base image\n#  ---------------\nFROM oraclelinux:7-slim AS base\n#  Maintainer\n#  ----------\nMAINTAINER Gerald Venzl <gerald.venzl@oracle.com>\n#  Environment variables required for this build (do NOT change)\n#  -------------------------------------------------------------\nENV ORACLE_BASE=\"/opt/oracle\" \\\n    ORACLE_HOME=\"/opt/oracle/product/18c/dbhome_1\" \\\n    INSTALL_DIR=\"/opt/install\" \\\n    INSTALL_FILE_1=\"LINUX.X64_180000_db_home.zip\" \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    START_FILE=\"startDB.sh\" \\\n    CREATE_DB_FILE=\"createDB.sh\" \\\n    SETUP_LINUX_FILE=\"setupLinuxEnv.sh\" \\\n    CHECK_SPACE_FILE=\"checkSpace.sh\" \\\n    CHECK_DB_FILE=\"checkDBStatus.sh\" \\\n    USER_SCRIPTS_FILE=\"runUserScripts.sh\" \\\n    INSTALL_DB_BINARIES_FILE=\"installDBBinaries.sh\"\n#  Use second ENV so that variable get substituted\nENV PATH=\"$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH\" \\\n    LD_LIBRARY_PATH=\"$ORACLE_HOME/lib:/usr/lib\" \\\n    CLASSPATH=\"$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\"\n#  Copy files needed during both installation and runtime\n#  -------------\nCOPY $SETUP_LINUX_FILE $CHECK_SPACE_FILE $INSTALL_DIR/\nCOPY $RUN_FILE $START_FILE $CREATE_DB_FILE $CONFIG_RSP $PWD_FILE $CHECK_DB_FILE $USER_SCRIPTS_FILE $ORACLE_BASE/\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$CHECK_SPACE_FILE \\\n && $INSTALL_DIR/$SETUP_LINUX_FILE \\\n && rm -rf $INSTALL_DIR\n# ############################################\n#  -------------------------------------------\n#  Start new stage for installing the database\n#  -------------------------------------------\n# ############################################\nFROM base AS builder\nARG DB_EDITION\n#  Install unzip for unzip operation\nRUN yum -y install unzip\n#  Copy DB install file\nCOPY --chown=oracle:dba $INSTALL_FILE_1 $INSTALL_RSP $INSTALL_DB_BINARIES_FILE $INSTALL_DIR/\n#  Install DB software binaries\nUSER oracle\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$INSTALL_DB_BINARIES_FILE $DB_EDITION\n# ############################################\n#  -------------------------------------------\n#  Start new layer for database runtime\n#  -------------------------------------------\n# ############################################\nFROM base\nUSER oracle\nCOPY --chown=oracle:dba --from=builder $ORACLE_BASE $ORACLE_BASE\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh \\\n && $ORACLE_HOME/root.sh\nUSER oracle\nWORKDIR /home/oracle\nVOLUME [\"$ORACLE_BASE/oradata\"]\nEXPOSE 1521/tcp 5500/tcp\nHEALTHCHECK --interval=60s --start-period=300s CMD \"$ORACLE_BASE/$CHECK_DB_FILE\" > /dev/null || exit 1\n#  Define default command to start Oracle Database. \nCMD exec $ORACLE_BASE/$RUN_FILE\n","injectedSmells":[],"originalDockerfileHash":"9e6be765c61770afd4fbbba8b3813022","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   LICENSE UPL 1.0\n#\n#   Copyright (c) 1982-2018 Oracle and/or its affiliates. All rights reserved.\n#\n#   ORACLE DOCKERFILES PROJECT\n#   --------------------------\n#   This is the Dockerfile for Oracle Database 18c\n#   \n#   REQUIRED FILES TO BUILD THIS IMAGE\n#   ----------------------------------\n#   (1) db_home.zip\n#       Download Oracle Database 18c Enterprise Edition or Standard Edition 2 for Linux x64\n#       from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n#   HOW TO BUILD THIS IMAGE\n#   -----------------------\n#   Put all downloaded files in the same directory as this Dockerfile\n#   Run: \n#        $ docker build -t oracle/database:18.3.0-${EDITION} . \n#\n#   Pull base image\n#   ---------------\nFROM oraclelinux:7-slim AS base\n#   Maintainer\n#   ----------\nMAINTAINER Gerald Venzl <gerald.venzl@oracle.com>\n#   Environment variables required for this build (do NOT change)\n#   -------------------------------------------------------------\nENV ORACLE_BASE=\"/opt/oracle\" \\\n    ORACLE_HOME=\"/opt/oracle/product/18c/dbhome_1\" \\\n    INSTALL_DIR=\"/opt/install\" \\\n    INSTALL_FILE_1=\"LINUX.X64_180000_db_home.zip\" \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    START_FILE=\"startDB.sh\" \\\n    CREATE_DB_FILE=\"createDB.sh\" \\\n    SETUP_LINUX_FILE=\"setupLinuxEnv.sh\" \\\n    CHECK_SPACE_FILE=\"checkSpace.sh\" \\\n    CHECK_DB_FILE=\"checkDBStatus.sh\" \\\n    USER_SCRIPTS_FILE=\"runUserScripts.sh\" \\\n    INSTALL_DB_BINARIES_FILE=\"installDBBinaries.sh\"\n#   Use second ENV so that variable get substituted\nENV PATH=\"$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH\" \\\n    LD_LIBRARY_PATH=\"$ORACLE_HOME/lib:/usr/lib\" \\\n    CLASSPATH=\"$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\"\n#   Copy files needed during both installation and runtime\n#   -------------\nCOPY $SETUP_LINUX_FILE $CHECK_SPACE_FILE $INSTALL_DIR/\nCOPY $RUN_FILE $START_FILE $CREATE_DB_FILE $CONFIG_RSP $PWD_FILE $CHECK_DB_FILE $USER_SCRIPTS_FILE $ORACLE_BASE/\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$CHECK_SPACE_FILE \\\n && $INSTALL_DIR/$SETUP_LINUX_FILE \\\n && rm -rf $INSTALL_DIR\n#  ############################################\n#   -------------------------------------------\n#   Start new stage for installing the database\n#   -------------------------------------------\n#  ############################################\nFROM base AS builder\nARG DB_EDITION\n#   Install unzip for unzip operation\nRUN yum -y install unzip\n#   Copy DB install file\nCOPY --chown=oracle:dba $INSTALL_FILE_1 $INSTALL_RSP $INSTALL_DB_BINARIES_FILE $INSTALL_DIR/\n#   Install DB software binaries\nUSER oracle\nRUN chmod ug+x $INSTALL_DIR/*.sh \\\n && sync \\\n && $INSTALL_DIR/$INSTALL_DB_BINARIES_FILE $DB_EDITION\n#  ############################################\n#   -------------------------------------------\n#   Start new layer for database runtime\n#   -------------------------------------------\n#  ############################################\nFROM base\nUSER oracle\nCOPY --chown=oracle:dba --from=builder $ORACLE_BASE $ORACLE_BASE\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh \\\n && $ORACLE_HOME/root.sh\nUSER oracle\nWORKDIR /home/oracle\nVOLUME [\"$ORACLE_BASE/oradata\"]\nEXPOSE 1521/tcp 5500/tcp\nHEALTHCHECK --interval=60s --start-period=300s CMD \"$ORACLE_BASE/$CHECK_DB_FILE\" > /dev/null || exit 1\n#   Define default command to start Oracle Database. \nCMD exec $ORACLE_BASE/$RUN_FILE\n","originalDockerfileUglifiedHash":"b694fac39681c956d17731f543a686ef","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/724f8eaf1fe883b4a2a0cec9fd695117eca0c6c8.dockerfile"}