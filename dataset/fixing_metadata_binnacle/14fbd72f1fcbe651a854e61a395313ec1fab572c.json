{"seed":1450178899,"processedDockerfileHash":"4778b2325c9b155d55c59fe6f21d06e9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Dan Robinson <dan.robinson@uk.ibm.com>\\\"\"\nLABEL ProductID=\"447aefb5fd1342d5b893f3934dfded73\" \\\n      ProductName=\"IBM Integration Bus\" \\\n      ProductVersion=\"10.0.0.11\"\n#   The URL to download the MQ installer from in tar.gz format\nARG MQ_URL=https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/messaging/mqadv/mqadv_dev904_ubuntu_x86-64.tar.gz\n#   The MQ packages to install\nARG MQ_PACKAGES=\"ibmmq-server ibmmq-java ibmmq-jre ibmmq-gskit ibmmq-msg-.* ibmmq-client ibmmq-sdk ibmmq-samples ibmmq-ft*\"\n#   Install additional packages required by MQ and IIB, this install process and the runtime scripts\nRUN export DEBIAN_FRONTEND=noninteractive \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends bash=4.3-14ubuntu1.4 bc=1.06.95-9build1 ca-certificates=20210119~16.04.1 coreutils=8.25-2ubuntu3~16.04 curl=7.47.0-1ubuntu2.19 debianutils=4.7 file=1:5.25-2ubuntu1.4 findutils=4.6.0+git+20160126-2 gawk=1:4.1.3+dfsg-0.1 grep=2.25-1~16.04.1 libc-bin=2.23-0ubuntu11.3 lsb-release=9.20160110ubuntu0.2 mount=2.27.1-6ubuntu3.10 passwd=1:4.2-3.1ubuntu5.4 procps=2:3.3.10-4ubuntu2.5 rsyslog=8.16.0-1ubuntu3.1 sed=4.2.2-7 sudo=1.8.16-0ubuntu1.10 tar=1.28-2.1ubuntu0.2 util-linux=2.27.1-6ubuntu3.10 -y \\\n && export DIR_EXTRACT=/tmp/mq \\\n && mkdir -p ${DIR_EXTRACT} \\\n && cd ${DIR_EXTRACT} \\\n && curl -LO $MQ_URL \\\n && tar -zxvf ./*.tar.gz \\\n && groupadd --system --gid 999 mqm \\\n && useradd --system --uid 999 --gid mqm mqm \\\n && usermod -G mqm root \\\n && export DIR_DEB=$( find ${DIR_EXTRACT} -name \"*.deb\" -printf \"%h\\n\" | sort -u | head -1 ;) \\\n && export MQLICENSE=$( find ${DIR_EXTRACT} -name \"mqlicense.sh\" ;) \\\n && ${MQLICENSE} -text_only -accept \\\n && echo \"deb [trusted=yes] file:${DIR_DEB} ./\" > /etc/apt/sources.list.d/IBM_MQ.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends $MQ_PACKAGES -y \\\n && find /opt/mqm -name '*.tar.gz' -delete \\\n && /opt/mqm/bin/setmqinst -p /opt/mqm -i \\\n && rm -f /etc/apt/sources.list.d/IBM_MQ.list \\\n && rm -rf ${DIR_EXTRACT} \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/mqm \\\n && sed -i 's/PASS_MAX_DAYS\\t99999/PASS_MAX_DAYS\\t90/' /etc/login.defs \\\n && sed -i 's/PASS_MIN_DAYS\\t0/PASS_MIN_DAYS\\t1/' /etc/login.defs \\\n && sed -i 's/password\\t\\[success=1 default=ignore\\]\\tpam_unix\\.so obscure sha512/password\\t[success=1 default=ignore]\\tpam_unix.so obscure sha512 minlen=8/' /etc/pam.d/common-password\nARG IIB_URL=http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/integration/10.0.0.11-IIB-LINUX64-DEVELOPER.tar.gz\n#   Install IIB V10 Developer edition\nRUN mkdir /opt/ibm \\\n && curl $IIB_URL | tar zx --exclude iib-10.0.0.11/tools --directory /opt/ibm \\\n && /opt/ibm/iib-10.0.0.11/iib make registry global accept license silently\n#   Configure system\nRUN echo \"IIB_10:\" > /etc/debian_chroot \\\n && touch /var/log/syslog \\\n && chown syslog:adm /var/log/syslog\n#   Create user to run as\nRUN groupadd -f mqbrkrs \\\n && groupadd -f mqclient \\\n && useradd --create-home --home-dir /home/iibuser -G mqbrkrs,sudo,mqm,mqclient iibuser \\\n && sed -e 's/^%sudo .*/%sudo ALL=NOPASSWD:ALL/g' -i /etc/sudoers\n#   Copy in script files\nCOPY *.sh /usr/local/bin/\nCOPY mq-config /etc/mqm/mq-config\nRUN chmod 755 /usr/local/bin/*.sh \\\n && chmod 755 /etc/mqm/mq-config\n#   Set BASH_ENV to source mqsiprofile when using docker exec bash -c\nENV BASH_ENV=\"/usr/local/bin/iib_env.sh\" \\\n    MQSI_MQTT_LOCAL_HOSTNAME=\"127.0.0.1\" \\\n    MQSI_DONT_RUN_LISTENER=\"true\" \\\n    LANG=\"en_US.UTF-8\"\n#   Expose default admin port and http ports\nEXPOSE 4414/tcp 7800/tcp 1414/tcp\nUSER iibuser\n#   Set entrypoint to run management script\nENTRYPOINT [\"iib_manage.sh\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Dan Robinson <dan.robinson@uk.ibm.com>\\\"\"\nLABEL ProductID=\"447aefb5fd1342d5b893f3934dfded73\" \\\n      ProductName=\"IBM Integration Bus\" \\\n      ProductVersion=\"10.0.0.11\"\n#  The URL to download the MQ installer from in tar.gz format\nARG MQ_URL=https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/messaging/mqadv/mqadv_dev904_ubuntu_x86-64.tar.gz\n#  The MQ packages to install\nARG MQ_PACKAGES=\"ibmmq-server ibmmq-java ibmmq-jre ibmmq-gskit ibmmq-msg-.* ibmmq-client ibmmq-sdk ibmmq-samples ibmmq-ft*\"\n#  Install additional packages required by MQ and IIB, this install process and the runtime scripts\nRUN export DEBIAN_FRONTEND=noninteractive \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends bash bc ca-certificates coreutils curl debianutils file findutils gawk grep libc-bin lsb-release mount passwd procps rsyslog sed sudo tar util-linux -y \\\n && export DIR_EXTRACT=/tmp/mq \\\n && mkdir -p ${DIR_EXTRACT} \\\n && cd ${DIR_EXTRACT} \\\n && curl -LO $MQ_URL \\\n && tar -zxvf ./*.tar.gz \\\n && groupadd --system --gid 999 mqm \\\n && useradd --system --uid 999 --gid mqm mqm \\\n && usermod -G mqm root \\\n && export DIR_DEB=$( find ${DIR_EXTRACT} -name \"*.deb\" -printf \"%h\\n\" | sort -u | head -1 ;) \\\n && export MQLICENSE=$( find ${DIR_EXTRACT} -name \"mqlicense.sh\" ;) \\\n && ${MQLICENSE} -text_only -accept \\\n && echo \"deb [trusted=yes] file:${DIR_DEB} ./\" > /etc/apt/sources.list.d/IBM_MQ.list \\\n && apt-get update \\\n && apt-get install $MQ_PACKAGES -y \\\n && find /opt/mqm -name '*.tar.gz' -delete \\\n && /opt/mqm/bin/setmqinst -p /opt/mqm -i \\\n && rm -f /etc/apt/sources.list.d/IBM_MQ.list \\\n && rm -rf ${DIR_EXTRACT} \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/mqm \\\n && sed -i 's/PASS_MAX_DAYS\\t99999/PASS_MAX_DAYS\\t90/' /etc/login.defs \\\n && sed -i 's/PASS_MIN_DAYS\\t0/PASS_MIN_DAYS\\t1/' /etc/login.defs \\\n && sed -i 's/password\\t\\[success=1 default=ignore\\]\\tpam_unix\\.so obscure sha512/password\\t[success=1 default=ignore]\\tpam_unix.so obscure sha512 minlen=8/' /etc/pam.d/common-password\nARG IIB_URL=http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/integration/10.0.0.11-IIB-LINUX64-DEVELOPER.tar.gz\n#  Install IIB V10 Developer edition\nRUN mkdir /opt/ibm \\\n && curl $IIB_URL | tar zx --exclude iib-10.0.0.11/tools --directory /opt/ibm \\\n && /opt/ibm/iib-10.0.0.11/iib make registry global accept license silently\n#  Configure system\nRUN echo \"IIB_10:\" > /etc/debian_chroot \\\n && touch /var/log/syslog \\\n && chown syslog:adm /var/log/syslog\n#  Create user to run as\nRUN groupadd -f mqbrkrs \\\n && groupadd -f mqclient \\\n && useradd --create-home --home-dir /home/iibuser -G mqbrkrs,sudo,mqm,mqclient iibuser \\\n && sed -e 's/^%sudo .*/%sudo ALL=NOPASSWD:ALL/g' -i /etc/sudoers\n#  Copy in script files\nCOPY *.sh /usr/local/bin/\nCOPY mq-config /etc/mqm/mq-config\nRUN chmod 755 /usr/local/bin/*.sh \\\n && chmod 755 /etc/mqm/mq-config\n#  Set BASH_ENV to source mqsiprofile when using docker exec bash -c\nENV BASH_ENV=\"/usr/local/bin/iib_env.sh\" \\\n    MQSI_MQTT_LOCAL_HOSTNAME=\"127.0.0.1\" \\\n    MQSI_DONT_RUN_LISTENER=\"true\" \\\n    LANG=\"en_US.UTF-8\"\n#  Expose default admin port and http ports\nEXPOSE 4414/tcp 7800/tcp 1414/tcp\nUSER iibuser\n#  Set entrypoint to run management script\nENTRYPOINT [\"iib_manage.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"288a50371ebaa8d6a2bf8edc566ff953","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nLABEL maintainer=\"\\\"Dan Robinson <dan.robinson@uk.ibm.com>\\\"\"\nLABEL ProductID=\"447aefb5fd1342d5b893f3934dfded73\" \\\n      ProductName=\"IBM Integration Bus\" \\\n      ProductVersion=\"10.0.0.11\"\n#   The URL to download the MQ installer from in tar.gz format\nARG MQ_URL=https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/messaging/mqadv/mqadv_dev904_ubuntu_x86-64.tar.gz\n#   The MQ packages to install\nARG MQ_PACKAGES=\"ibmmq-server ibmmq-java ibmmq-jre ibmmq-gskit ibmmq-msg-.* ibmmq-client ibmmq-sdk ibmmq-samples ibmmq-ft*\"\n#   Install additional packages required by MQ and IIB, this install process and the runtime scripts\nRUN export DEBIAN_FRONTEND=noninteractive \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends bash bc ca-certificates coreutils curl debianutils file findutils gawk grep libc-bin lsb-release mount passwd procps rsyslog sed sudo tar util-linux -y \\\n && export DIR_EXTRACT=/tmp/mq \\\n && mkdir -p ${DIR_EXTRACT} \\\n && cd ${DIR_EXTRACT} \\\n && curl -LO $MQ_URL \\\n && tar -zxvf ./*.tar.gz \\\n && groupadd --system --gid 999 mqm \\\n && useradd --system --uid 999 --gid mqm mqm \\\n && usermod -G mqm root \\\n && export DIR_DEB=$( find ${DIR_EXTRACT} -name \"*.deb\" -printf \"%h\\n\" | sort -u | head -1 ;) \\\n && export MQLICENSE=$( find ${DIR_EXTRACT} -name \"mqlicense.sh\" ;) \\\n && ${MQLICENSE} -text_only -accept \\\n && echo \"deb [trusted=yes] file:${DIR_DEB} ./\" > /etc/apt/sources.list.d/IBM_MQ.list \\\n && apt-get update \\\n && apt-get install $MQ_PACKAGES -y \\\n && find /opt/mqm -name '*.tar.gz' -delete \\\n && /opt/mqm/bin/setmqinst -p /opt/mqm -i \\\n && rm -f /etc/apt/sources.list.d/IBM_MQ.list \\\n && rm -rf ${DIR_EXTRACT} \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /var/mqm \\\n && sed -i 's/PASS_MAX_DAYS\\t99999/PASS_MAX_DAYS\\t90/' /etc/login.defs \\\n && sed -i 's/PASS_MIN_DAYS\\t0/PASS_MIN_DAYS\\t1/' /etc/login.defs \\\n && sed -i 's/password\\t\\[success=1 default=ignore\\]\\tpam_unix\\.so obscure sha512/password\\t[success=1 default=ignore]\\tpam_unix.so obscure sha512 minlen=8/' /etc/pam.d/common-password\nARG IIB_URL=http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/integration/10.0.0.11-IIB-LINUX64-DEVELOPER.tar.gz\n#   Install IIB V10 Developer edition\nRUN mkdir /opt/ibm \\\n && curl $IIB_URL | tar zx --exclude iib-10.0.0.11/tools --directory /opt/ibm \\\n && /opt/ibm/iib-10.0.0.11/iib make registry global accept license silently\n#   Configure system\nRUN echo \"IIB_10:\" > /etc/debian_chroot \\\n && touch /var/log/syslog \\\n && chown syslog:adm /var/log/syslog\n#   Create user to run as\nRUN groupadd -f mqbrkrs \\\n && groupadd -f mqclient \\\n && useradd --create-home --home-dir /home/iibuser -G mqbrkrs,sudo,mqm,mqclient iibuser \\\n && sed -e 's/^%sudo .*/%sudo ALL=NOPASSWD:ALL/g' -i /etc/sudoers\n#   Copy in script files\nCOPY *.sh /usr/local/bin/\nCOPY mq-config /etc/mqm/mq-config\nRUN chmod 755 /usr/local/bin/*.sh \\\n && chmod 755 /etc/mqm/mq-config\n#   Set BASH_ENV to source mqsiprofile when using docker exec bash -c\nENV BASH_ENV=\"/usr/local/bin/iib_env.sh\" \\\n    MQSI_MQTT_LOCAL_HOSTNAME=\"127.0.0.1\" \\\n    MQSI_DONT_RUN_LISTENER=\"true\" \\\n    LANG=\"en_US.UTF-8\"\n#   Expose default admin port and http ports\nEXPOSE 4414/tcp 7800/tcp 1414/tcp\nUSER iibuser\n#   Set entrypoint to run management script\nENTRYPOINT [\"iib_manage.sh\"]\n","originalDockerfileUglifiedHash":"f81fa976a5665616870b602f63d08c15","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/14fbd72f1fcbe651a854e61a395313ec1fab572c.dockerfile"}