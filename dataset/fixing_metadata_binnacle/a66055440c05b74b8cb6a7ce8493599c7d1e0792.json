{"seed":2518547500,"processedDockerfileHash":"e428799027b8fe431c959c7008ef3345","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck"],"processedDockerfile":"FROM node:11-stretch\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update --no-install-recommends \\\n && apt-get install --no-install-recommends build-essential bzip2 ca-certificates chromium chromium-l10n dbus jq libasound2 libatk1.0-0 libav-tools libavcodec-extra57 libc6 libcairo-gobject2 libcairo2 libdbus-1-3 libdbus-glib-1-2 libfontconfig1 libfreetype6 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libgtk2.0-0 libpango-1.0-0 libpangocairo-1.0-0 libstartup-notification0 libstdc++6 libx11-6 libxcomposite1 libxdamage1 libxext6 libxfixes3 libxml2-utils libxrender1 libxt6 lsb-release menu openbox python-dev python-pip unzip wget x11vnc xauth xvfb zip -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install setuptools==39.2.0\nRUN pip install cffi==1.10.0\nRUN pip install Fabric==1.13.2 Jinja2==2.9.6 argparse==1.4.0 awscli==1.15.32 pycrypto==2.6.1 requests==2.18.4\nRUN cd /tmp \\\n && wget https://www.openssl.org/source/old/0.9.x/openssl-0.9.8zg.tar.gz \\\n && tar zxf openssl-0.9.8zg.tar.gz \\\n && cd openssl-0.9.8zg \\\n && ./config \\\n && make \\\n && make install\nENV PATH=\"\\\"/usr/local/ssl/bin:$PATH\\\"\"\nRUN mkdir /app\nRUN chown node:node -R /app\n#   Prevent errors when running xvfb as node user\nRUN mkdir /tmp/.X11-unix \\\n && chmod 1777 /tmp/.X11-unix \\\n && chown root /tmp/.X11-unix\n#   Expose port for VNC\nEXPOSE 5900/tcp\nRUN npm install npm@latest yarn@latest -g\nUSER node\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/60.0b16/linux-x86_64/en-US/firefox-60.0b16.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox60 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox60 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/62.0b20/linux-x86_64/en-US/firefox-62.0b20.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox62 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox62 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/66.0b9/linux-x86_64/en-US/firefox-66.0b9.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox66 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox66 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-devedition-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxBeta \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxBeta \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-nightly-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxNightly \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxNightly \\\n && rm -f /home/node/firefox.tar.bz2\n#   Cliqz Beta\nRUN wget 'https://repository.cliqz.com/dist/beta/latest/cliqz.en-US.linux-x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzBeta \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzBeta \\\n && rm -f /home/node/cliqz.tar.bz2\n#   Cliqz Stable\nRUN wget 'https://cdn.cliqz.com/browser-f/download/linux/cliqz.en-US.release.x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzStable \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzStable \\\n && rm -f /home/node/cliqz.tar.bz2\nCOPY package.json /app/\nCOPY package-lock.json /app/\nWORKDIR /app/\nRUN npm ci\nHEALTHCHECK CMD curl --fail http://127.0.0.1:3000 || exit 1\n","originalDockerfile":"FROM node:11-stretch\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update --no-install-recommends \\\n && apt-get install build-essential bzip2 ca-certificates chromium chromium-l10n dbus jq libasound2 libatk1.0-0 libav-tools libavcodec-extra57 libc6 libcairo-gobject2 libcairo2 libdbus-1-3 libdbus-glib-1-2 libfontconfig1 libfreetype6 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libgtk2.0-0 libpango-1.0-0 libpangocairo-1.0-0 libstartup-notification0 libstdc++6 libx11-6 libxcomposite1 libxdamage1 libxext6 libxfixes3 libxml2-utils libxrender1 libxt6 lsb-release menu openbox python-dev python-pip unzip wget x11vnc xauth xvfb zip -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install setuptools==39.2.0\nRUN pip install cffi==1.10.0\nRUN pip install Fabric==1.13.2 Jinja2==2.9.6 argparse==1.4.0 awscli==1.15.32 pycrypto==2.6.1 requests==2.18.4\nRUN cd /tmp \\\n && wget https://www.openssl.org/source/old/0.9.x/openssl-0.9.8zg.tar.gz \\\n && tar zxf openssl-0.9.8zg.tar.gz \\\n && cd openssl-0.9.8zg \\\n && ./config \\\n && make \\\n && make install\nENV PATH=\"\\\"/usr/local/ssl/bin:$PATH\\\"\"\nRUN mkdir /app\nRUN chown node:node -R /app\n#  Prevent errors when running xvfb as node user\nRUN mkdir /tmp/.X11-unix \\\n && chmod 1777 /tmp/.X11-unix \\\n && chown root /tmp/.X11-unix\n#  Expose port for VNC\nEXPOSE 5900/tcp\nRUN npm install npm@latest yarn@latest -g\nUSER node\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/60.0b16/linux-x86_64/en-US/firefox-60.0b16.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox60 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox60 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/62.0b20/linux-x86_64/en-US/firefox-62.0b20.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox62 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox62 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/66.0b9/linux-x86_64/en-US/firefox-66.0b9.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox66 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox66 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-devedition-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxBeta \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxBeta \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-nightly-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxNightly \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxNightly \\\n && rm -f /home/node/firefox.tar.bz2\n#  Cliqz Beta\nRUN wget 'https://repository.cliqz.com/dist/beta/latest/cliqz.en-US.linux-x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzBeta \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzBeta \\\n && rm -f /home/node/cliqz.tar.bz2\n#  Cliqz Stable\nRUN wget 'https://cdn.cliqz.com/browser-f/download/linux/cliqz.en-US.release.x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzStable \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzStable \\\n && rm -f /home/node/cliqz.tar.bz2\nCOPY package.json /app/\nCOPY package-lock.json /app/\nWORKDIR /app/\nRUN npm ci\n","injectedSmells":[],"originalDockerfileHash":"f44a8351497b03cf576d2a6b961dfc2c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM node:11-stretch\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update --no-install-recommends \\\n && apt-get install build-essential bzip2 ca-certificates chromium chromium-l10n dbus jq libasound2 libatk1.0-0 libav-tools libavcodec-extra57 libc6 libcairo-gobject2 libcairo2 libdbus-1-3 libdbus-glib-1-2 libfontconfig1 libfreetype6 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libgtk2.0-0 libpango-1.0-0 libpangocairo-1.0-0 libstartup-notification0 libstdc++6 libx11-6 libxcomposite1 libxdamage1 libxext6 libxfixes3 libxml2-utils libxrender1 libxt6 lsb-release menu openbox python-dev python-pip unzip wget x11vnc xauth xvfb zip -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN pip install setuptools==39.2.0\nRUN pip install cffi==1.10.0\nRUN pip install Fabric==1.13.2 Jinja2==2.9.6 argparse==1.4.0 awscli==1.15.32 pycrypto==2.6.1 requests==2.18.4\nRUN cd /tmp \\\n && wget https://www.openssl.org/source/old/0.9.x/openssl-0.9.8zg.tar.gz \\\n && tar zxf openssl-0.9.8zg.tar.gz \\\n && cd openssl-0.9.8zg \\\n && ./config \\\n && make \\\n && make install\nENV PATH=\"\\\"/usr/local/ssl/bin:$PATH\\\"\"\nRUN mkdir /app\nRUN chown node:node -R /app\n#   Prevent errors when running xvfb as node user\nRUN mkdir /tmp/.X11-unix \\\n && chmod 1777 /tmp/.X11-unix \\\n && chown root /tmp/.X11-unix\n#   Expose port for VNC\nEXPOSE 5900/tcp\nRUN npm install npm@latest yarn@latest -g\nUSER node\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/60.0b16/linux-x86_64/en-US/firefox-60.0b16.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox60 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox60 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/62.0b20/linux-x86_64/en-US/firefox-62.0b20.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox62 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox62 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget https://ftp.mozilla.org/pub/devedition/releases/66.0b9/linux-x86_64/en-US/firefox-66.0b9.tar.bz2 -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefox66 \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefox66 \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-devedition-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxBeta \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxBeta \\\n && rm -f /home/node/firefox.tar.bz2\nRUN wget 'https://download.mozilla.org/?product=firefox-nightly-latest&os=linux64&lang=en-US' -O /home/node/firefox.tar.bz2 \\\n && mkdir /home/node/firefoxNightly \\\n && tar xjvf /home/node/firefox.tar.bz2 -C /home/node/firefoxNightly \\\n && rm -f /home/node/firefox.tar.bz2\n#   Cliqz Beta\nRUN wget 'https://repository.cliqz.com/dist/beta/latest/cliqz.en-US.linux-x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzBeta \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzBeta \\\n && rm -f /home/node/cliqz.tar.bz2\n#   Cliqz Stable\nRUN wget 'https://cdn.cliqz.com/browser-f/download/linux/cliqz.en-US.release.x86_64.tar.bz2' -O /home/node/cliqz.tar.bz2 \\\n && mkdir /home/node/cliqzStable \\\n && tar xjvf /home/node/cliqz.tar.bz2 -C /home/node/cliqzStable \\\n && rm -f /home/node/cliqz.tar.bz2\nCOPY package.json /app/\nCOPY package-lock.json /app/\nWORKDIR /app/\nRUN npm ci\n","originalDockerfileUglifiedHash":"bf635bfd6ca5f87ffa642b0135329dfa","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a66055440c05b74b8cb6a7ce8493599c7d1e0792.dockerfile"}