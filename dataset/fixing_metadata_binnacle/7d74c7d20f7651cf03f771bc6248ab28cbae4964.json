{"seed":1365019150,"processedDockerfileHash":"a1445d9bf58877b628056023a977df9c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM dianne\nUSER root\n#   install base packages and MAVProxy dependencies\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install --no-install-recommends g++=4:12.2.0-3ubuntu1 gawk=1:5.2.1-2 python-pip python-matplotlib python-serial python-wxgtk2.8 python-scipy python-opencv python-numpy python-pyparsing ccache=4.7.4-1 realpath libopencv-dev=4.6.0+dfsg-11 -y -f\n#   use bash instead of sh\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\n#   install MAVProxy\nRUN pip install future==0.18.3 \\\n && apt-get install --no-install-recommends libxml2-dev=2.9.14+dfsg-1.1build2 libxslt1-dev=1.1.35-1 -y \\\n && pip2 install pymavlink catkin_pkg --upgrade \\\n && pip install MAVProxy==1.5.2\n#   install ROS Indigo\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116 \\\n && apt-get update \\\n && apt-get install --no-install-recommends ros-indigo-ros-base python-rosinstall ros-indigo-octomap-msgs ros-indigo-joy ros-indigo-geodesy ros-indigo-octomap-ros ros-indigo-mavlink ros-indigo-control-toolbox ros-indigo-transmission-interface ros-indigo-joint-limits-interface unzip=6.0-27ubuntu1 -y \\\n && rosdep init\n#   source ROS stuff\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/dianne/.bashrc \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> /home/dianne/.bashrc\n#   install Gazebo\nRUN sh -c 'echo \"deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\" > /etc/apt/sources.list.d/gazebo-stable.list' \\\n && wget http://packages.osrfoundation.org/gazebo.key -O - | apt-key add - \\\n && apt-get update \\\n && apt-get remove .*gazebo.* '.*sdformat.*' '.*ignition-math.*' \\\n && apt-get update \\\n && apt-get install --no-install-recommends gazebo7 libgazebo7-dev drcsim7 xvfb=2:21.1.7-1ubuntu2 -y\n#   download Gazebo models\nRUN mkdir -p ~/.gazebo/models \\\n && git clone https://github.com/erlerobot/erle_gazebo_models \\\n && mv erle_gazebo_models/* ~/.gazebo/models\nWORKDIR /opt\nRUN mkdir -p ros_catkin_ws/src \\\n && chown -R dianne:dianne ros_catkin_ws \\\n && mkdir ardupilot \\\n && chown dianne:dianne ardupilot\nUSER dianne\n#   download additional ROS packages\nRUN rosdep update \\\n && git clone https://github.com/erlerobot/ardupilot -b gazebo \\\n && source /opt/ros/indigo/setup.bash \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc \\\n && cd ros_catkin_ws/src \\\n && catkin_init_workspace \\\n && cd .. \\\n && catkin_make \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> ~/.bashrc \\\n && cd src \\\n && git clone https://github.com/erlerobot/ardupilot_sitl_gazebo_plugin \\\n && git clone https://github.com/tu-darmstadt-ros-pkg/hector_gazebo/ \\\n && git clone https://github.com/erlerobot/rotors_simulator -b sonar_plugin \\\n && git clone https://github.com/PX4/mav_comm.git \\\n && git clone https://github.com/ethz-asl/glog_catkin.git \\\n && git clone https://github.com/catkin/catkin_simple.git \\\n && git clone https://github.com/erlerobot/mavros.git \\\n && git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git -b indigo-devel\n#   patch and build ROS packages from source\nRUN cd ros_catkin_ws \\\n && source devel/setup.bash \\\n && cd src/ardupilot_sitl_gazebo_plugin \\\n && git apply /home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/ardupilot_sitl_gazebo_plugin.patch \\\n && cd ../.. \\\n && catkin_make --pkg mav_msgs mavros_msgs gazebo_msgs \\\n && source devel/setup.bash \\\n && catkin_make -j 4\n#   build APMrover\nRUN cd ardupilot/APMrover2 \\\n && make sitl -j 4\n#   Go back to dianne home\nWORKDIR ${home}\nUSER dianne\n#   build and export Rover runtime\nRUN ./gradlew -x :be.iminds.iot.dianne.rl.environment.ale:assemble assemble export.runtime.agent.rover\nENV DISPLAY=\":99\"\n#   set default target\nENV TARGET=\"runtime.agent.rover\"\n#   run\nENTRYPOINT [\"/home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/entrypoint.sh\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM dianne\nUSER root\n#  install base packages and MAVProxy dependencies\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install g++ gawk python-pip python-matplotlib python-serial python-wxgtk2.8 python-scipy python-opencv python-numpy python-pyparsing ccache realpath libopencv-dev -y -f\n#  use bash instead of sh\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\n#  install MAVProxy\nRUN pip install future \\\n && apt-get install libxml2-dev libxslt1-dev -y \\\n && pip2 install pymavlink catkin_pkg --upgrade \\\n && pip install MAVProxy==1.5.2\n#  install ROS Indigo\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116 \\\n && apt-get update \\\n && apt-get install ros-indigo-ros-base python-rosinstall ros-indigo-octomap-msgs ros-indigo-joy ros-indigo-geodesy ros-indigo-octomap-ros ros-indigo-mavlink ros-indigo-control-toolbox ros-indigo-transmission-interface ros-indigo-joint-limits-interface unzip -y \\\n && rosdep init\n#  source ROS stuff\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/dianne/.bashrc \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> /home/dianne/.bashrc\n#  install Gazebo\nRUN sh -c 'echo \"deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\" > /etc/apt/sources.list.d/gazebo-stable.list' \\\n && wget http://packages.osrfoundation.org/gazebo.key -O - | apt-key add - \\\n && apt-get update \\\n && apt-get remove .*gazebo.* '.*sdformat.*' '.*ignition-math.*' \\\n && apt-get update \\\n && apt-get install gazebo7 libgazebo7-dev drcsim7 xvfb -y\n#  download Gazebo models\nRUN mkdir -p ~/.gazebo/models \\\n && git clone https://github.com/erlerobot/erle_gazebo_models \\\n && mv erle_gazebo_models/* ~/.gazebo/models\nWORKDIR /opt\nRUN mkdir -p ros_catkin_ws/src \\\n && chown -R dianne:dianne ros_catkin_ws \\\n && mkdir ardupilot \\\n && chown dianne:dianne ardupilot\nUSER dianne\n#  download additional ROS packages\nRUN rosdep update \\\n && git clone https://github.com/erlerobot/ardupilot -b gazebo \\\n && source /opt/ros/indigo/setup.bash \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc \\\n && cd ros_catkin_ws/src \\\n && catkin_init_workspace \\\n && cd .. \\\n && catkin_make \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> ~/.bashrc \\\n && cd src \\\n && git clone https://github.com/erlerobot/ardupilot_sitl_gazebo_plugin \\\n && git clone https://github.com/tu-darmstadt-ros-pkg/hector_gazebo/ \\\n && git clone https://github.com/erlerobot/rotors_simulator -b sonar_plugin \\\n && git clone https://github.com/PX4/mav_comm.git \\\n && git clone https://github.com/ethz-asl/glog_catkin.git \\\n && git clone https://github.com/catkin/catkin_simple.git \\\n && git clone https://github.com/erlerobot/mavros.git \\\n && git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git -b indigo-devel\n#  patch and build ROS packages from source\nRUN cd ros_catkin_ws \\\n && source devel/setup.bash \\\n && cd src/ardupilot_sitl_gazebo_plugin \\\n && git apply /home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/ardupilot_sitl_gazebo_plugin.patch \\\n && cd ../.. \\\n && catkin_make --pkg mav_msgs mavros_msgs gazebo_msgs \\\n && source devel/setup.bash \\\n && catkin_make -j 4\n#  build APMrover\nRUN cd ardupilot/APMrover2 \\\n && make sitl -j 4\n#  Go back to dianne home\nWORKDIR ${home}\nUSER dianne\n#  build and export Rover runtime\nRUN ./gradlew -x :be.iminds.iot.dianne.rl.environment.ale:assemble assemble export.runtime.agent.rover\nENV DISPLAY=\":99\"\n#  set default target\nENV TARGET=\"runtime.agent.rover\"\n#  run\nENTRYPOINT [\"/home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"8771b6deac42b15aa619fa6c515c8a0e","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM dianne\nUSER root\n#   install base packages and MAVProxy dependencies\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install g++ gawk python-pip python-matplotlib python-serial python-wxgtk2.8 python-scipy python-opencv python-numpy python-pyparsing ccache realpath libopencv-dev -y -f\n#   use bash instead of sh\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\n#   install MAVProxy\nRUN pip install future \\\n && apt-get install libxml2-dev libxslt1-dev -y \\\n && pip2 install pymavlink catkin_pkg --upgrade \\\n && pip install MAVProxy==1.5.2\n#   install ROS Indigo\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116 \\\n && apt-get update \\\n && apt-get install ros-indigo-ros-base python-rosinstall ros-indigo-octomap-msgs ros-indigo-joy ros-indigo-geodesy ros-indigo-octomap-ros ros-indigo-mavlink ros-indigo-control-toolbox ros-indigo-transmission-interface ros-indigo-joint-limits-interface unzip -y \\\n && rosdep init\n#   source ROS stuff\nRUN echo \"source /opt/ros/indigo/setup.bash\" >> /home/dianne/.bashrc \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> /home/dianne/.bashrc\n#   install Gazebo\nRUN sh -c 'echo \"deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\" > /etc/apt/sources.list.d/gazebo-stable.list' \\\n && wget http://packages.osrfoundation.org/gazebo.key -O - | apt-key add - \\\n && apt-get update \\\n && apt-get remove .*gazebo.* '.*sdformat.*' '.*ignition-math.*' \\\n && apt-get update \\\n && apt-get install gazebo7 libgazebo7-dev drcsim7 xvfb -y\n#   download Gazebo models\nRUN mkdir -p ~/.gazebo/models \\\n && git clone https://github.com/erlerobot/erle_gazebo_models \\\n && mv erle_gazebo_models/* ~/.gazebo/models\nWORKDIR /opt\nRUN mkdir -p ros_catkin_ws/src \\\n && chown -R dianne:dianne ros_catkin_ws \\\n && mkdir ardupilot \\\n && chown dianne:dianne ardupilot\nUSER dianne\n#   download additional ROS packages\nRUN rosdep update \\\n && git clone https://github.com/erlerobot/ardupilot -b gazebo \\\n && source /opt/ros/indigo/setup.bash \\\n && echo \"source /opt/ros/indigo/setup.bash\" >> ~/.bashrc \\\n && cd ros_catkin_ws/src \\\n && catkin_init_workspace \\\n && cd .. \\\n && catkin_make \\\n && echo \"source /opt/ros_catkin_ws/devel/setup.bash\" >> ~/.bashrc \\\n && cd src \\\n && git clone https://github.com/erlerobot/ardupilot_sitl_gazebo_plugin \\\n && git clone https://github.com/tu-darmstadt-ros-pkg/hector_gazebo/ \\\n && git clone https://github.com/erlerobot/rotors_simulator -b sonar_plugin \\\n && git clone https://github.com/PX4/mav_comm.git \\\n && git clone https://github.com/ethz-asl/glog_catkin.git \\\n && git clone https://github.com/catkin/catkin_simple.git \\\n && git clone https://github.com/erlerobot/mavros.git \\\n && git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git -b indigo-devel\n#   patch and build ROS packages from source\nRUN cd ros_catkin_ws \\\n && source devel/setup.bash \\\n && cd src/ardupilot_sitl_gazebo_plugin \\\n && git apply /home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/ardupilot_sitl_gazebo_plugin.patch \\\n && cd ../.. \\\n && catkin_make --pkg mav_msgs mavros_msgs gazebo_msgs \\\n && source devel/setup.bash \\\n && catkin_make -j 4\n#   build APMrover\nRUN cd ardupilot/APMrover2 \\\n && make sitl -j 4\n#   Go back to dianne home\nWORKDIR ${home}\nUSER dianne\n#   build and export Rover runtime\nRUN ./gradlew -x :be.iminds.iot.dianne.rl.environment.ale:assemble assemble export.runtime.agent.rover\nENV DISPLAY=\":99\"\n#   set default target\nENV TARGET=\"runtime.agent.rover\"\n#   run\nENTRYPOINT [\"/home/dianne/be.iminds.iot.dianne.rl.environment.erlerover/entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"6a947d7bc28e803e7fee755547f274b5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7d74c7d20f7651cf03f771bc6248ab28cbae4964.dockerfile"}