{"seed":3116929900,"processedDockerfileHash":"d758af92ab13a2f4d7cf610819eb1081","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos6\n#   Add yum repositories\nCOPY config/yum-repos/elasticsearch.repo /etc/yum.repos.d/elasticsearch.repo\n#   Install RPM packages\nCOPY scripts/install-rpm-packages.sh /opt/lumify/scripts/install-rpm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-rpm-packages.sh\n#   Install NPM packages\nCOPY scripts/install-npm-packages.sh /opt/lumify/scripts/install-npm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-npm-packages.sh\n#   Passwordless SSH\nCOPY scripts/install-ssh.sh /opt/lumify/scripts/install-ssh.sh\nCOPY config/ssh_config /root/.ssh/config\nRUN /bin/bash /opt/lumify/scripts/install-ssh.sh\nEXPOSE 22/tcp\n#   Install Java\nCOPY scripts/install-java.sh /opt/lumify/scripts/install-java.sh\nCOPY config/java/java.sh /etc/profile.d/java.sh\nENV PATH=\"$PATH:/opt/jdk/bin\"\nENV JAVA_HOME=\"/opt/jdk\"\nENV _JAVA_OPTIONS=\"-Djava.net.preferIPv4Stack=true\"\nRUN /bin/bash /opt/lumify/scripts/install-java.sh\n#   Install Maven\nCOPY scripts/install-maven.sh /opt/lumify/scripts/install-maven.sh\nENV PATH=\"$PATH:/opt/maven/bin\"\nENV MVN_HOME=\"/opt/maven\"\nRUN /bin/bash /opt/lumify/scripts/install-maven.sh\n#   Install ZooKeeper\nCOPY scripts/install-zookeeper.sh /opt/lumify/scripts/install-zookeeper.sh\nENV PATH=\"$PATH:/opt/zookeeper/bin\"\nENV ZOOKEEPER_HOME=\"/opt/zookeeper\"\nRUN /bin/bash /opt/lumify/scripts/install-zookeeper.sh\nEXPOSE 2181/tcp 2888/tcp 3888/tcp\n#   Install Hadoop\nCOPY scripts/install-hadoop.sh /opt/lumify/scripts/install-hadoop.sh\nCOPY config/hadoop/core-site.xml.template /opt/hadoop-2.3.0/etc/hadoop/core-site.xml.template\nCOPY config/hadoop/hadoop-native-64bit.tar.gz /opt/hadoop-2.3.0/hadoop-native-64bit.tar.gz\nENV HADOOP_PREFIX=\"/opt/hadoop\"\nENV HADOOP_COMMON_HOME=\"/opt/hadoop\"\nENV HADOOP_HDFS_HOME=\"/opt/hadoop\"\nENV HADOOP_MAPRED_HOME=\"/opt/hadoop\"\nENV HADOOP_YARN_HOME=\"/opt/hadoop\"\nENV HADOOP_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV YARN_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV PATH=\"$PATH:/opt/hadoop/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-hadoop.sh\nCOPY config/hadoop/hdfs-site.xml /opt/hadoop-2.3.0/etc/hadoop/hdfs-site.xml\nCOPY config/hadoop/mapred-site.xml /opt/hadoop-2.3.0/etc/hadoop/mapred-site.xml\nCOPY config/hadoop/yarn-site.xml /opt/hadoop-2.3.0/etc/hadoop/yarn-site.xml\nVOLUME [\"/var/lib/hadoop-hdfs\", \"/var/local/hadoop\"]\nEXPOSE 8020/tcp 8032/tcp 8088/tcp 9000/tcp 50010/tcp 50020/tcp 50030/tcp 50060/tcp 50070/tcp 50075/tcp 50090/tcp\n#   Install Accumulo\nCOPY scripts/install-accumulo.sh /opt/lumify/scripts/install-accumulo.sh\nENV PATH=\"$PATH:/opt/accumulo/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-accumulo.sh\nEXPOSE 9997/tcp 9999/tcp 50091/tcp 50095/tcp\n#   Install ElasticSearch\nCOPY scripts/install-elasticsearch.sh /opt/lumify/scripts/install-elasticsearch.sh\nENV PATH=\"$PATH:/opt/elasticsearch/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-elasticsearch.sh\nCOPY config/elasticsearch/elasticsearch.yml /opt/elasticsearch/config/elasticsearch.yml\nVOLUME [\"/opt/elasticsearch-1.4.4/data/\"]\nEXPOSE 9200/tcp 9300/tcp\n#   Install RabbitMQ\nCOPY scripts/install-rabbitmq.sh /opt/lumify/scripts/install-rabbitmq.sh\nENV PATH=\"$PATH:/opt/rabbitmq/sbin\"\nRUN /bin/bash /opt/lumify/scripts/install-rabbitmq.sh\nCOPY config/rabbitmq/etc/rabbitmq/rabbitmq.config /opt/rabbitmq_server-3.4.1/etc/rabbitmq/rabbitmq.config\nVOLUME [\"/opt/rabbitmq_server-3.4.1/var\"]\nEXPOSE 5672/tcp 5673/tcp 15672/tcp\n#   Install Jetty\nCOPY scripts/install-jetty.sh /opt/lumify/scripts/install-jetty.sh\nRUN /bin/bash /opt/lumify/scripts/install-jetty.sh\nCOPY config/jetty/start.ini /opt/jetty/start.ini\nCOPY config/jetty/jetty-logging.properties /opt/jetty/resources/jetty-logging.properties\nCOPY config/jetty/jetty.xml /opt/jetty/etc/jetty.xml\nCOPY config/jetty/jetty-http.xml /opt/jetty/etc/jetty-http.xml\nCOPY config/jetty/jetty-https.xml /opt/jetty/etc/jetty-https.xml\nCOPY config/jetty/jetty-ssl.xml /opt/jetty/etc/jetty-ssl.xml\nCOPY config/jetty/jetty.jks /opt/jetty/etc/jetty.jks\nENV PATH=\"$PATH:/opt/jetty/bin\"\nVOLUME [\"/opt/jetty/webapps\"]\nEXPOSE 8080/tcp 8443/tcp\n#   add scripts\nCOPY scripts/docker-entrypoint.sh /opt/docker-entrypoint.sh\nCOPY dev/start.sh /opt/start.sh\nCOPY dev/stop.sh /opt/stop.sh\nCOPY dev/status.sh /opt/status.sh\nRUN chmod +x /opt/start.sh \\\n && chmod +x /opt/stop.sh \\\n && chmod +x /opt/status.sh \\\n && chmod +x /opt/docker-entrypoint.sh\n#   Set working environment\nVOLUME [\"/tmp\", \"/var/log\", \"/opt/lumify\", \"/opt/lumify-source\"]\nWORKDIR /home/root/lumify\nENTRYPOINT [\"/opt/docker-entrypoint.sh\"]\nCMD [\"start\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos6\n#  Add yum repositories\nADD config/yum-repos/elasticsearch.repo /etc/yum.repos.d/elasticsearch.repo\n#  Install RPM packages\nADD scripts/install-rpm-packages.sh /opt/lumify/scripts/install-rpm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-rpm-packages.sh\n#  Install NPM packages\nADD scripts/install-npm-packages.sh /opt/lumify/scripts/install-npm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-npm-packages.sh\n#  Passwordless SSH\nADD scripts/install-ssh.sh /opt/lumify/scripts/install-ssh.sh\nADD config/ssh_config /root/.ssh/config\nRUN /bin/bash /opt/lumify/scripts/install-ssh.sh\nEXPOSE 22/tcp\n#  Install Java\nADD scripts/install-java.sh /opt/lumify/scripts/install-java.sh\nADD config/java/java.sh /etc/profile.d/java.sh\nENV PATH=\"$PATH:/opt/jdk/bin\"\nENV JAVA_HOME=\"/opt/jdk\"\nENV _JAVA_OPTIONS=\"-Djava.net.preferIPv4Stack=true\"\nRUN /bin/bash /opt/lumify/scripts/install-java.sh\n#  Install Maven\nADD scripts/install-maven.sh /opt/lumify/scripts/install-maven.sh\nENV PATH=\"$PATH:/opt/maven/bin\"\nENV MVN_HOME=\"/opt/maven\"\nRUN /bin/bash /opt/lumify/scripts/install-maven.sh\n#  Install ZooKeeper\nADD scripts/install-zookeeper.sh /opt/lumify/scripts/install-zookeeper.sh\nENV PATH=\"$PATH:/opt/zookeeper/bin\"\nENV ZOOKEEPER_HOME=\"/opt/zookeeper\"\nRUN /bin/bash /opt/lumify/scripts/install-zookeeper.sh\nEXPOSE 2181/tcp 2888/tcp 3888/tcp\n#  Install Hadoop\nADD scripts/install-hadoop.sh /opt/lumify/scripts/install-hadoop.sh\nADD config/hadoop/core-site.xml.template /opt/hadoop-2.3.0/etc/hadoop/core-site.xml.template\nCOPY config/hadoop/hadoop-native-64bit.tar.gz /opt/hadoop-2.3.0/hadoop-native-64bit.tar.gz\nENV HADOOP_PREFIX=\"/opt/hadoop\"\nENV HADOOP_COMMON_HOME=\"/opt/hadoop\"\nENV HADOOP_HDFS_HOME=\"/opt/hadoop\"\nENV HADOOP_MAPRED_HOME=\"/opt/hadoop\"\nENV HADOOP_YARN_HOME=\"/opt/hadoop\"\nENV HADOOP_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV YARN_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV PATH=\"$PATH:/opt/hadoop/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-hadoop.sh\nADD config/hadoop/hdfs-site.xml /opt/hadoop-2.3.0/etc/hadoop/hdfs-site.xml\nADD config/hadoop/mapred-site.xml /opt/hadoop-2.3.0/etc/hadoop/mapred-site.xml\nADD config/hadoop/yarn-site.xml /opt/hadoop-2.3.0/etc/hadoop/yarn-site.xml\nVOLUME [\"/var/lib/hadoop-hdfs\", \"/var/local/hadoop\"]\nEXPOSE 8020/tcp 8032/tcp 8088/tcp 9000/tcp 50010/tcp 50020/tcp 50030/tcp 50060/tcp 50070/tcp 50075/tcp 50090/tcp\n#  Install Accumulo\nADD scripts/install-accumulo.sh /opt/lumify/scripts/install-accumulo.sh\nENV PATH=\"$PATH:/opt/accumulo/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-accumulo.sh\nEXPOSE 9997/tcp 9999/tcp 50091/tcp 50095/tcp\n#  Install ElasticSearch\nADD scripts/install-elasticsearch.sh /opt/lumify/scripts/install-elasticsearch.sh\nENV PATH=\"$PATH:/opt/elasticsearch/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-elasticsearch.sh\nADD config/elasticsearch/elasticsearch.yml /opt/elasticsearch/config/elasticsearch.yml\nVOLUME [\"/opt/elasticsearch-1.4.4/data/\"]\nEXPOSE 9200/tcp 9300/tcp\n#  Install RabbitMQ\nADD scripts/install-rabbitmq.sh /opt/lumify/scripts/install-rabbitmq.sh\nENV PATH=\"$PATH:/opt/rabbitmq/sbin\"\nRUN /bin/bash /opt/lumify/scripts/install-rabbitmq.sh\nADD config/rabbitmq/etc/rabbitmq/rabbitmq.config /opt/rabbitmq_server-3.4.1/etc/rabbitmq/rabbitmq.config\nVOLUME [\"/opt/rabbitmq_server-3.4.1/var\"]\nEXPOSE 5672/tcp 5673/tcp 15672/tcp\n#  Install Jetty\nADD scripts/install-jetty.sh /opt/lumify/scripts/install-jetty.sh\nRUN /bin/bash /opt/lumify/scripts/install-jetty.sh\nADD config/jetty/start.ini /opt/jetty/start.ini\nADD config/jetty/jetty-logging.properties /opt/jetty/resources/jetty-logging.properties\nADD config/jetty/jetty.xml /opt/jetty/etc/jetty.xml\nADD config/jetty/jetty-http.xml /opt/jetty/etc/jetty-http.xml\nADD config/jetty/jetty-https.xml /opt/jetty/etc/jetty-https.xml\nADD config/jetty/jetty-ssl.xml /opt/jetty/etc/jetty-ssl.xml\nADD config/jetty/jetty.jks /opt/jetty/etc/jetty.jks\nENV PATH=\"$PATH:/opt/jetty/bin\"\nVOLUME [\"/opt/jetty/webapps\"]\nEXPOSE 8080/tcp 8443/tcp\n#  add scripts\nADD scripts/docker-entrypoint.sh /opt/docker-entrypoint.sh\nADD dev/start.sh /opt/start.sh\nADD dev/stop.sh /opt/stop.sh\nADD dev/status.sh /opt/status.sh\nRUN chmod +x /opt/start.sh \\\n && chmod +x /opt/stop.sh \\\n && chmod +x /opt/status.sh \\\n && chmod +x /opt/docker-entrypoint.sh\n#  Set working environment\nVOLUME [\"/tmp\", \"/var/log\", \"/opt/lumify\", \"/opt/lumify-source\"]\nWORKDIR /home/root/lumify\nENTRYPOINT [\"/opt/docker-entrypoint.sh\"]\nCMD [\"start\"]\n","injectedSmells":[],"originalDockerfileHash":"267546536cbc93e01ab36480b9c8936c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos6\n#   Add yum repositories\nADD config/yum-repos/elasticsearch.repo /etc/yum.repos.d/elasticsearch.repo\n#   Install RPM packages\nADD scripts/install-rpm-packages.sh /opt/lumify/scripts/install-rpm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-rpm-packages.sh\n#   Install NPM packages\nADD scripts/install-npm-packages.sh /opt/lumify/scripts/install-npm-packages.sh\nRUN /bin/bash /opt/lumify/scripts/install-npm-packages.sh\n#   Passwordless SSH\nADD scripts/install-ssh.sh /opt/lumify/scripts/install-ssh.sh\nADD config/ssh_config /root/.ssh/config\nRUN /bin/bash /opt/lumify/scripts/install-ssh.sh\nEXPOSE 22/tcp\n#   Install Java\nADD scripts/install-java.sh /opt/lumify/scripts/install-java.sh\nADD config/java/java.sh /etc/profile.d/java.sh\nENV PATH=\"$PATH:/opt/jdk/bin\"\nENV JAVA_HOME=\"/opt/jdk\"\nENV _JAVA_OPTIONS=\"-Djava.net.preferIPv4Stack=true\"\nRUN /bin/bash /opt/lumify/scripts/install-java.sh\n#   Install Maven\nADD scripts/install-maven.sh /opt/lumify/scripts/install-maven.sh\nENV PATH=\"$PATH:/opt/maven/bin\"\nENV MVN_HOME=\"/opt/maven\"\nRUN /bin/bash /opt/lumify/scripts/install-maven.sh\n#   Install ZooKeeper\nADD scripts/install-zookeeper.sh /opt/lumify/scripts/install-zookeeper.sh\nENV PATH=\"$PATH:/opt/zookeeper/bin\"\nENV ZOOKEEPER_HOME=\"/opt/zookeeper\"\nRUN /bin/bash /opt/lumify/scripts/install-zookeeper.sh\nEXPOSE 2181/tcp 2888/tcp 3888/tcp\n#   Install Hadoop\nADD scripts/install-hadoop.sh /opt/lumify/scripts/install-hadoop.sh\nADD config/hadoop/core-site.xml.template /opt/hadoop-2.3.0/etc/hadoop/core-site.xml.template\nCOPY config/hadoop/hadoop-native-64bit.tar.gz /opt/hadoop-2.3.0/hadoop-native-64bit.tar.gz\nENV HADOOP_PREFIX=\"/opt/hadoop\"\nENV HADOOP_COMMON_HOME=\"/opt/hadoop\"\nENV HADOOP_HDFS_HOME=\"/opt/hadoop\"\nENV HADOOP_MAPRED_HOME=\"/opt/hadoop\"\nENV HADOOP_YARN_HOME=\"/opt/hadoop\"\nENV HADOOP_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV YARN_CONF_DIR=\"/opt/hadoop/etc/hadoop\"\nENV PATH=\"$PATH:/opt/hadoop/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-hadoop.sh\nADD config/hadoop/hdfs-site.xml /opt/hadoop-2.3.0/etc/hadoop/hdfs-site.xml\nADD config/hadoop/mapred-site.xml /opt/hadoop-2.3.0/etc/hadoop/mapred-site.xml\nADD config/hadoop/yarn-site.xml /opt/hadoop-2.3.0/etc/hadoop/yarn-site.xml\nVOLUME [\"/var/lib/hadoop-hdfs\", \"/var/local/hadoop\"]\nEXPOSE 8020/tcp 8032/tcp 8088/tcp 9000/tcp 50010/tcp 50020/tcp 50030/tcp 50060/tcp 50070/tcp 50075/tcp 50090/tcp\n#   Install Accumulo\nADD scripts/install-accumulo.sh /opt/lumify/scripts/install-accumulo.sh\nENV PATH=\"$PATH:/opt/accumulo/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-accumulo.sh\nEXPOSE 9997/tcp 9999/tcp 50091/tcp 50095/tcp\n#   Install ElasticSearch\nADD scripts/install-elasticsearch.sh /opt/lumify/scripts/install-elasticsearch.sh\nENV PATH=\"$PATH:/opt/elasticsearch/bin\"\nRUN /bin/bash /opt/lumify/scripts/install-elasticsearch.sh\nADD config/elasticsearch/elasticsearch.yml /opt/elasticsearch/config/elasticsearch.yml\nVOLUME [\"/opt/elasticsearch-1.4.4/data/\"]\nEXPOSE 9200/tcp 9300/tcp\n#   Install RabbitMQ\nADD scripts/install-rabbitmq.sh /opt/lumify/scripts/install-rabbitmq.sh\nENV PATH=\"$PATH:/opt/rabbitmq/sbin\"\nRUN /bin/bash /opt/lumify/scripts/install-rabbitmq.sh\nADD config/rabbitmq/etc/rabbitmq/rabbitmq.config /opt/rabbitmq_server-3.4.1/etc/rabbitmq/rabbitmq.config\nVOLUME [\"/opt/rabbitmq_server-3.4.1/var\"]\nEXPOSE 5672/tcp 5673/tcp 15672/tcp\n#   Install Jetty\nADD scripts/install-jetty.sh /opt/lumify/scripts/install-jetty.sh\nRUN /bin/bash /opt/lumify/scripts/install-jetty.sh\nADD config/jetty/start.ini /opt/jetty/start.ini\nADD config/jetty/jetty-logging.properties /opt/jetty/resources/jetty-logging.properties\nADD config/jetty/jetty.xml /opt/jetty/etc/jetty.xml\nADD config/jetty/jetty-http.xml /opt/jetty/etc/jetty-http.xml\nADD config/jetty/jetty-https.xml /opt/jetty/etc/jetty-https.xml\nADD config/jetty/jetty-ssl.xml /opt/jetty/etc/jetty-ssl.xml\nADD config/jetty/jetty.jks /opt/jetty/etc/jetty.jks\nENV PATH=\"$PATH:/opt/jetty/bin\"\nVOLUME [\"/opt/jetty/webapps\"]\nEXPOSE 8080/tcp 8443/tcp\n#   add scripts\nADD scripts/docker-entrypoint.sh /opt/docker-entrypoint.sh\nADD dev/start.sh /opt/start.sh\nADD dev/stop.sh /opt/stop.sh\nADD dev/status.sh /opt/status.sh\nRUN chmod +x /opt/start.sh \\\n && chmod +x /opt/stop.sh \\\n && chmod +x /opt/status.sh \\\n && chmod +x /opt/docker-entrypoint.sh\n#   Set working environment\nVOLUME [\"/tmp\", \"/var/log\", \"/opt/lumify\", \"/opt/lumify-source\"]\nWORKDIR /home/root/lumify\nENTRYPOINT [\"/opt/docker-entrypoint.sh\"]\nCMD [\"start\"]\n","originalDockerfileUglifiedHash":"8bcaa21fb25a7b3f1982af44a7ab3725","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a85d44e55acb3ca95d62522e08e87446f30c26d5.dockerfile"}