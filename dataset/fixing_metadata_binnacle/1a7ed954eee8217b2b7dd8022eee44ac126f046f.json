{"seed":2992790987,"processedDockerfileHash":"cd8a1ba46a009026a394db050c468024","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  # -*- docker-image-name: \"scaleway/debian:stretch\" -*-\nARG MULTIARCH_ARCH\nFROM multiarch/debian-debootstrap:${MULTIARCH_ARCH}-stretch\nMAINTAINER Scaleway <opensource@scaleway.com> (@scaleway)\n#   Environment\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    SCW_BASE_IMAGE=\"scaleway/debian:stretch\"\n#   Configure aptitude\n#   Note that, `${ARCH}` is set in the multiarch/debian-debootstrap image\n#   gnupg needs to be installed before the PPA is added from the overlay/apt\nRUN apt-get update \\\n && apt-get install --no-install-recommends gnupg -y\nCOPY ./overlay/etc/apt/ ./overlay-${ARCH}*/etc/apt/ /etc/apt/\n#   Add Scaleway PPA\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys FEC8C91445F9E441\nRUN apt-get update \\\n && apt-get install --no-install-recommends cloud-init -y\n#   Adding and calling builder-enter\nCOPY ./overlay-base/usr/local/sbin/scw-builder-enter /usr/local/sbin/\nRUN /bin/sh -xe /usr/local/sbin/scw-builder-enter\n#   Install packages\nRUN apt-get update -q \\\n && apt-get -y -qq upgrade \\\n && apt-get install --no-install-recommends bash-completion bc bootlogd ca-certificates cron curl dbus dmidecode dstat ethstatus file fio haveged htop ifupdown ioping iotop iperf iptables iputils-ping isc-dhcp-client kmod less libnss-myhostname locales locate lsb-release lsof make man-db mg mosh nano net-tools netcat ntp ntpdate python-apt python-yaml rsync rsyslog screen shunit2 socat ssh sudo sysstat systemd-sysv tcpdump tmux uuid-runtime vim wget whiptail unattended-upgrades linux-image-\"$( dpkg --print-architecture | sed 's/armhf/armmp/' ;)\" grub-efi-$( dpkg --print-architecture | sed 's/armhf/arm/' ;) -y -qq \\\n && apt-get clean\n#   Default target\nRUN systemctl set-default multi-user\n#   Enable update-motd.d support\nRUN rm -f /etc/motd \\\n && ln -s /var/run/motd /etc/motd\n#   Patch rootfs\nCOPY ./overlay/ ./overlay-base/ ./overlay-${ARCH}*/ /\n#   Configure locales\nRUN locale-gen\n#   Configure Systemd\nRUN systemctl preset --preset-mode=full $( cat /etc/systemd/system-preset/*scw*.preset | cut -d' ' -f2 | tr '\\n' ' ' ;)\nRUN systemctl disable systemd-modules-load.service systemd-update-utmp-runlevel proc-sys-fs-binfmt_misc.automount kmod-static-nodes.service\nRUN systemctl enable networking.service\nRUN rm -f /sbin/init \\\n && ln -sf ../lib/systemd/systemd /sbin/init\n#   Fix permissions\nRUN chmod 755 /etc/default\n#   Clean rootfs from image-builder\nRUN /usr/local/sbin/scw-builder-leave\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# # -*- docker-image-name: \"scaleway/debian:stretch\" -*-\nARG MULTIARCH_ARCH\nFROM multiarch/debian-debootstrap:${MULTIARCH_ARCH}-stretch\nMAINTAINER Scaleway <opensource@scaleway.com> (@scaleway)\n#  Environment\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    SCW_BASE_IMAGE=\"scaleway/debian:stretch\"\n#  Configure aptitude\n#  Note that, `${ARCH}` is set in the multiarch/debian-debootstrap image\n#  gnupg needs to be installed before the PPA is added from the overlay/apt\nRUN apt-get update \\\n && apt-get install gnupg -y\nCOPY ./overlay/etc/apt/ ./overlay-${ARCH}*/etc/apt/ /etc/apt/\n#  Add Scaleway PPA\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys FEC8C91445F9E441\nRUN apt-get update \\\n && apt-get install cloud-init -y\n#  Adding and calling builder-enter\nCOPY ./overlay-base/usr/local/sbin/scw-builder-enter /usr/local/sbin/\nRUN /bin/sh -xe /usr/local/sbin/scw-builder-enter\n#  Install packages\nRUN apt-get update -q \\\n && apt-get -y -qq upgrade \\\n && apt-get install bash-completion bc bootlogd ca-certificates cron curl dbus dmidecode dstat ethstatus file fio haveged htop ifupdown ioping iotop iperf iptables iputils-ping isc-dhcp-client kmod less libnss-myhostname locales locate lsb-release lsof make man-db mg mosh nano net-tools netcat ntp ntpdate python-apt python-yaml rsync rsyslog screen shunit2 socat ssh sudo sysstat systemd-sysv tcpdump tmux uuid-runtime vim wget whiptail unattended-upgrades linux-image-\"$( dpkg --print-architecture | sed 's/armhf/armmp/' ;)\" grub-efi-$( dpkg --print-architecture | sed 's/armhf/arm/' ;) -y -qq \\\n && apt-get clean\n#  Default target\nRUN systemctl set-default multi-user\n#  Enable update-motd.d support\nRUN rm -f /etc/motd \\\n && ln -s /var/run/motd /etc/motd\n#  Patch rootfs\nCOPY ./overlay/ ./overlay-base/ ./overlay-${ARCH}*/ /\n#  Configure locales\nRUN locale-gen\n#  Configure Systemd\nRUN systemctl preset --preset-mode=full $( cat /etc/systemd/system-preset/*scw*.preset | cut -d' ' -f2 | tr '\\n' ' ' ;)\nRUN systemctl disable systemd-modules-load.service systemd-update-utmp-runlevel proc-sys-fs-binfmt_misc.automount kmod-static-nodes.service\nRUN systemctl enable networking.service\nRUN rm -f /sbin/init \\\n && ln -sf ../lib/systemd/systemd /sbin/init\n#  Fix permissions\nRUN chmod 755 /etc/default\n#  Clean rootfs from image-builder\nRUN /usr/local/sbin/scw-builder-leave\n","injectedSmells":[],"originalDockerfileHash":"3ab33bd285ddb772c9f8b44db2625dcb","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  # -*- docker-image-name: \"scaleway/debian:stretch\" -*-\nARG MULTIARCH_ARCH\nFROM multiarch/debian-debootstrap:${MULTIARCH_ARCH}-stretch\nMAINTAINER Scaleway <opensource@scaleway.com> (@scaleway)\n#   Environment\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    SCW_BASE_IMAGE=\"scaleway/debian:stretch\"\n#   Configure aptitude\n#   Note that, `${ARCH}` is set in the multiarch/debian-debootstrap image\n#   gnupg needs to be installed before the PPA is added from the overlay/apt\nRUN apt-get update \\\n && apt-get install gnupg -y\nCOPY ./overlay/etc/apt/ ./overlay-${ARCH}*/etc/apt/ /etc/apt/\n#   Add Scaleway PPA\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys FEC8C91445F9E441\nRUN apt-get update \\\n && apt-get install cloud-init -y\n#   Adding and calling builder-enter\nCOPY ./overlay-base/usr/local/sbin/scw-builder-enter /usr/local/sbin/\nRUN /bin/sh -xe /usr/local/sbin/scw-builder-enter\n#   Install packages\nRUN apt-get update -q \\\n && apt-get -y -qq upgrade \\\n && apt-get install bash-completion bc bootlogd ca-certificates cron curl dbus dmidecode dstat ethstatus file fio haveged htop ifupdown ioping iotop iperf iptables iputils-ping isc-dhcp-client kmod less libnss-myhostname locales locate lsb-release lsof make man-db mg mosh nano net-tools netcat ntp ntpdate python-apt python-yaml rsync rsyslog screen shunit2 socat ssh sudo sysstat systemd-sysv tcpdump tmux uuid-runtime vim wget whiptail unattended-upgrades linux-image-\"$( dpkg --print-architecture | sed 's/armhf/armmp/' ;)\" grub-efi-$( dpkg --print-architecture | sed 's/armhf/arm/' ;) -y -qq \\\n && apt-get clean\n#   Default target\nRUN systemctl set-default multi-user\n#   Enable update-motd.d support\nRUN rm -f /etc/motd \\\n && ln -s /var/run/motd /etc/motd\n#   Patch rootfs\nCOPY ./overlay/ ./overlay-base/ ./overlay-${ARCH}*/ /\n#   Configure locales\nRUN locale-gen\n#   Configure Systemd\nRUN systemctl preset --preset-mode=full $( cat /etc/systemd/system-preset/*scw*.preset | cut -d' ' -f2 | tr '\\n' ' ' ;)\nRUN systemctl disable systemd-modules-load.service systemd-update-utmp-runlevel proc-sys-fs-binfmt_misc.automount kmod-static-nodes.service\nRUN systemctl enable networking.service\nRUN rm -f /sbin/init \\\n && ln -sf ../lib/systemd/systemd /sbin/init\n#   Fix permissions\nRUN chmod 755 /etc/default\n#   Clean rootfs from image-builder\nRUN /usr/local/sbin/scw-builder-leave\n","originalDockerfileUglifiedHash":"552056df18c05a2dd290a4db1000a604","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1a7ed954eee8217b2b7dd8022eee44ac126f046f.dockerfile"}