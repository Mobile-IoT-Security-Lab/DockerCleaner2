{"seed":3728436121,"processedDockerfileHash":"2e34ad32145731d99c1211836c637e15","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM tensorflow/tensorflow:latest-gpu-py3\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential curl software-properties-common python3-pip -y \\\n && add-apt-repository -y ppa:jonathonf/python-3.6 \\\n && apt-get update \\\n && apt-get install --no-install-recommends python3.6 python3.6-dev -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   pip has to be installed before setuptools, setuptools has to be installed before tensorflow\nRUN python3.6 -m pip install --no-cache-dir -U pip\nRUN python3.6 -m pip install --no-cache-dir -U setuptools\n#   also useful\nRUN python3.6 -m pip install --no-cache-dir ipython requests numpy pandas quandl\nRUN python3.6 -m pip install --no-cache-dir tensorflow-gpu==1.11.0\n#   Tensorflow should be fine by here\nRUN python3.6-config --includes \\\n && cd /usr/bin \\\n && rm python3 \\\n && ln -s python3.6 python3\nRUN apt-get update -y -qq \\\n && apt-get install --no-install-recommends wget unzip build-essential cmake git pkg-config libatlas-base-dev libgtk2.0-dev libavcodec-dev libavformat-dev libswscale-dev libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libv4l-dev libdc1394-22-dev qt4-default libatk-adaptor libcanberra-gtk-module imagemagick python3-tk python-tk -y\nWORKDIR /\n#   Get OpenCV\nRUN git clone https://github.com/opencv/opencv.git\nENV OPENCV_VERSION=\"3.4.3\"\nRUN cd opencv \\\n && git checkout $OPENCV_VERSION \\\n && cd / \\\n && git clone https://github.com/opencv/opencv_contrib \\\n && cd opencv_contrib \\\n && git checkout $OPENCV_VERSION \\\n && mkdir /opencv/build\nRUN cd /opencv/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D INSTALL_C_EXAMPLES=OFF -D INSTALL_PYTHON_EXAMPLES=OFF -D OPENCV_EXTRA_MODULES_PATH=/opencv_contrib/modules -D BUILD_EXAMPLES=OFF -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_DOCS=OFF -D BUILD_TESTS=OFF -D BUILD_PERF_TESTS=OFF -D WITH_TBB=ON -D WITH_OPENMP=ON -D WITH_IPP=ON -D WITH_CSTRIPES=ON -D WITH_OPENCL=ON -D WITH_V4L=ON -D BUILD_opencv_python3=ON .. \\\n && make -j$NUM_CORES \\\n && make install \\\n && ldconfig \\\n && cd / \\\n && rm -r /opencv \\\n && rm -r /opencv_contrib\nRUN apt-get update \\\n && apt-get install --no-install-recommends libgtk-3-dev libboost-all-dev -y\nRUN pip3 install PyQt5\nWORKDIR /src\nCMD [\"python3\", \"main.py\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM tensorflow/tensorflow:latest-gpu-py3\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential curl software-properties-common python3-pip -y \\\n && add-apt-repository -y ppa:jonathonf/python-3.6 \\\n && apt-get update \\\n && apt-get install python3.6 python3.6-dev -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  pip has to be installed before setuptools, setuptools has to be installed before tensorflow\nRUN python3.6 -m pip install --no-cache-dir -U pip\nRUN python3.6 -m pip install --no-cache-dir -U setuptools\n#  also useful\nRUN python3.6 -m pip install --no-cache-dir ipython requests numpy pandas quandl\nRUN python3.6 -m pip install --no-cache-dir tensorflow-gpu==1.11.0\n#  Tensorflow should be fine by here\nRUN python3.6-config --includes \\\n && cd /usr/bin \\\n && rm python3 \\\n && ln -s python3.6 python3\nRUN apt-get update -y -qq \\\n && apt-get install wget unzip build-essential cmake git pkg-config libatlas-base-dev libgtk2.0-dev libavcodec-dev libavformat-dev libswscale-dev libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libv4l-dev libdc1394-22-dev qt4-default libatk-adaptor libcanberra-gtk-module imagemagick python3-tk python-tk -y\nWORKDIR /\n#  Get OpenCV\nRUN git clone https://github.com/opencv/opencv.git\nENV OPENCV_VERSION=\"3.4.3\"\nRUN cd opencv \\\n && git checkout $OPENCV_VERSION \\\n && cd / \\\n && git clone https://github.com/opencv/opencv_contrib \\\n && cd opencv_contrib \\\n && git checkout $OPENCV_VERSION \\\n && mkdir /opencv/build\nRUN cd /opencv/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D INSTALL_C_EXAMPLES=OFF -D INSTALL_PYTHON_EXAMPLES=OFF -D OPENCV_EXTRA_MODULES_PATH=/opencv_contrib/modules -D BUILD_EXAMPLES=OFF -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_DOCS=OFF -D BUILD_TESTS=OFF -D BUILD_PERF_TESTS=OFF -D WITH_TBB=ON -D WITH_OPENMP=ON -D WITH_IPP=ON -D WITH_CSTRIPES=ON -D WITH_OPENCL=ON -D WITH_V4L=ON -D BUILD_opencv_python3=ON .. \\\n && make -j$NUM_CORES \\\n && make install \\\n && ldconfig \\\n && cd / \\\n && rm -r /opencv \\\n && rm -r /opencv_contrib\nRUN apt-get update \\\n && apt-get install libgtk-3-dev libboost-all-dev -y\nRUN pip3 install PyQt5\nWORKDIR /src\nCMD [\"python3\", \"main.py\"]\n","injectedSmells":[],"originalDockerfileHash":"94648dce902eaf84b4507bbfde3b6b99","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tensorflow/tensorflow:latest-gpu-py3\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential curl software-properties-common python3-pip -y \\\n && add-apt-repository -y ppa:jonathonf/python-3.6 \\\n && apt-get update \\\n && apt-get install python3.6 python3.6-dev -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   pip has to be installed before setuptools, setuptools has to be installed before tensorflow\nRUN python3.6 -m pip install --no-cache-dir -U pip\nRUN python3.6 -m pip install --no-cache-dir -U setuptools\n#   also useful\nRUN python3.6 -m pip install --no-cache-dir ipython requests numpy pandas quandl\nRUN python3.6 -m pip install --no-cache-dir tensorflow-gpu==1.11.0\n#   Tensorflow should be fine by here\nRUN python3.6-config --includes \\\n && cd /usr/bin \\\n && rm python3 \\\n && ln -s python3.6 python3\nRUN apt-get update -y -qq \\\n && apt-get install wget unzip build-essential cmake git pkg-config libatlas-base-dev libgtk2.0-dev libavcodec-dev libavformat-dev libswscale-dev libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libv4l-dev libdc1394-22-dev qt4-default libatk-adaptor libcanberra-gtk-module imagemagick python3-tk python-tk -y\nWORKDIR /\n#   Get OpenCV\nRUN git clone https://github.com/opencv/opencv.git\nENV OPENCV_VERSION=\"3.4.3\"\nRUN cd opencv \\\n && git checkout $OPENCV_VERSION \\\n && cd / \\\n && git clone https://github.com/opencv/opencv_contrib \\\n && cd opencv_contrib \\\n && git checkout $OPENCV_VERSION \\\n && mkdir /opencv/build\nRUN cd /opencv/build \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D INSTALL_C_EXAMPLES=OFF -D INSTALL_PYTHON_EXAMPLES=OFF -D OPENCV_EXTRA_MODULES_PATH=/opencv_contrib/modules -D BUILD_EXAMPLES=OFF -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_DOCS=OFF -D BUILD_TESTS=OFF -D BUILD_PERF_TESTS=OFF -D WITH_TBB=ON -D WITH_OPENMP=ON -D WITH_IPP=ON -D WITH_CSTRIPES=ON -D WITH_OPENCL=ON -D WITH_V4L=ON -D BUILD_opencv_python3=ON .. \\\n && make -j$NUM_CORES \\\n && make install \\\n && ldconfig \\\n && cd / \\\n && rm -r /opencv \\\n && rm -r /opencv_contrib\nRUN apt-get update \\\n && apt-get install libgtk-3-dev libboost-all-dev -y\nRUN pip3 install PyQt5\nWORKDIR /src\nCMD [\"python3\", \"main.py\"]\n","originalDockerfileUglifiedHash":"2227488cd488654410ed1ff354e368df","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/232beaa487c9c04296e5c99e12ecdee0a5168bcb.dockerfile"}