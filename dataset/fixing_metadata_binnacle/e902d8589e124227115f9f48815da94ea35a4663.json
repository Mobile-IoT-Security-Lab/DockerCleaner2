{"seed":4078861032,"processedDockerfileHash":"7d01bc7762ce3e98e910262308d93de8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"AXErunners\\\"\"\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8\"\nENV OPTDIR=\"/opt\"\nENV ANDROID_NDK_HOME=\"${OPTDIR}/android-ndk\"\nENV ANDROID_NDK_VERSION=\"17c\"\nENV ANDROID_NDK_HOME_V=\"${ANDROID_NDK_HOME}-r${ANDROID_NDK_VERSION}\"\nENV ANDROID_NDK_ARCHIVE=\"android-ndk-r${ANDROID_NDK_VERSION}-linux-x86_64.zip\"\nENV ANDROID_NDK_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_NDK_ARCHIVE}\"\nENV ANDROID_SDK_HOME=\"${OPTDIR}/android-sdk\"\nENV ANDROID_SDK_TOOLS_VERSION=\"4333796\"\nENV ANDROID_SDK_BUILD_TOOLS_VERSION=\"28.0.3\"\nENV ANDROID_SDK_TOOLS_ARCHIVE=\"sdk-tools-linux-${ANDROID_SDK_TOOLS_VERSION}.zip\"\nENV ANDROID_SDK_TOOLS_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_SDK_TOOLS_ARCHIVE}\"\nENV USE_SDK_WRAPPER=\"1\"\nENV GRADLE_OPTS=\"-Xmx1536M -Dorg.gradle.jvmargs='-Xmx1536M'\"\nENV USER=\"buildozer\"\nENV HOMEDIR=\"/home/${USER}\"\nENV WORKDIR=\"${HOMEDIR}/build\" \\\n    PATH=\"${HOMEDIR}/.local/bin:${PATH}\"\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.24.32.20 -y \\\n && add-apt-repository ppa:kivy-team/kivy \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.24.32.20 language-pack-en=1:18.04+20190718 build-essential=12.4ubuntu1 ccache=3.4.1-1 git=1:2.17.1-1ubuntu0.17 libncurses5:i386 libstdc++6:i386 libgtk2.0-0:i386 libpangox-1.0-0:i386 libpangoxft-1.0-0:i386 libidn11:i386 openjdk-8-jdk=8u362-ga-0ubuntu1~18.04.1 unzip=6.0-21ubuntu1.2 zlib1g-dev=1:1.2.11.dfsg-0ubuntu2.2 zlib1g:i386 zip=3.0-11build1 sudo=1.8.21p2-3ubuntu1.5 python3-dev=3.6.7-1~18.04 python3-kivy=1.9.1-1build3 lbzip2=2.5-2 wget=1.19.4-1ubuntu2.2 curl=7.58.0-2ubuntu3.24 ca-certificates=20211016ubuntu0.18.04.1 patch=2.7.6-2ubuntu1.1 vim=2:8.0.1453-1ubuntu1.11 less=487-0.1 autoconf=2.69-11 automake=1:1.15.1-3ubuntu2 libtool=2.4.6-2 libffi-dev=3.2.1-8 cmake=3.10.2-1ubuntu2.18.04.2 gettext=0.19.8.1-6ubuntu0.3 libltdl-dev=2.4.6-2 pkg-config=0.29.1-0ubuntu2 locales=2.27-3ubuntu1.6 ffmpeg=7:3.4.11-0ubuntu0.1 libsdl2-dev=2.0.8+dfsg1-1ubuntu1.18.04.4 libsdl2-image-dev=2.0.3+dfsg1-1 libsdl2-mixer-dev=2.0.2+dfsg1-2 libsdl2-ttf-dev=2.0.14+dfsg1-2 libportmidi-dev=1:217-6 libswscale-dev=7:3.4.11-0ubuntu0.1 libavformat-dev=7:3.4.11-0ubuntu0.1 libavcodec-dev=7:3.4.11-0ubuntu0.1 -y \\\n && locale-gen en_US.UTF-8 \\\n && rm -rf /var/lib/apt/lists/*\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python3 get-pip.py \\\n && pip3 install --upgrade setuptools cython==0.28.6 image\nRUN git config --global user.email \"buildozer@example.com\" \\\n && git config --global user.name \"Buildozer\"\nRUN adduser --disabled-password --gecos '' ${USER} \\\n && mkdir /home/buildozer/build \\\n && chown ${USER}.${USER} ${WORKDIR}\nRUN usermod -append --groups sudo ${USER}\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\nRUN cd ${OPTDIR} \\\n && git clone https://github.com/kivy/python-for-android \\\n && cd python-for-android \\\n && git remote add sombernight https://github.com/SomberNight/python-for-android \\\n && git fetch --all \\\n && git checkout dec1badc3bd134a9a1c69275339423a95d63413e \\\n && git cherry-pick d7f722e4e5d4b3e6f5b1733c95e6a433f78ee570 \\\n && git cherry-pick a607f4a446773ac0b0a5150171092b0617fbe670 \\\n && python3 -m pip install -e . \\\n && cd ${OPTDIR} \\\n && git clone https://github.com/kivy/buildozer \\\n && cd buildozer \\\n && git checkout 6142acfa40cf9a225644470e5410333c35a3bc4a \\\n && python3 -m pip install -e .\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_SDK_TOOLS_DL_URL}\" --output \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}\" \\\n && unzip -q \"${ANDROID_SDK_TOOLS_ARCHIVE}\" -d \"${ANDROID_SDK_HOME}\" \\\n && rm -rf \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}/.android/\" \\\n && echo '### User Sources for Android SDK Manager' > \"${ANDROID_SDK_HOME}/.android/repositories.cfg\" \\\n && yes | \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-24\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-28\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"extras;android;m2repository\" > /dev/null \\\n && chmod +x \"${ANDROID_SDK_HOME}/tools/bin/avdmanager\"\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_NDK_DL_URL}\" --output \"${ANDROID_NDK_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_NDK_HOME_V}\" \\\n && unzip -q \"${ANDROID_NDK_ARCHIVE}\" -d \"${OPTDIR}\" \\\n && chown -R ${USER}.${USER} ${OPTDIR} \\\n && ln -sfn \"${ANDROID_NDK_HOME_V}\" \"${ANDROID_NDK_HOME}\" \\\n && rm -rf \"${ANDROID_NDK_ARCHIVE}\"\nUSER ${USER}\nWORKDIR ${WORKDIR}\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"AXErunners\\\"\"\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8\"\nENV OPTDIR=\"/opt\"\nENV ANDROID_NDK_HOME=\"${OPTDIR}/android-ndk\"\nENV ANDROID_NDK_VERSION=\"17c\"\nENV ANDROID_NDK_HOME_V=\"${ANDROID_NDK_HOME}-r${ANDROID_NDK_VERSION}\"\nENV ANDROID_NDK_ARCHIVE=\"android-ndk-r${ANDROID_NDK_VERSION}-linux-x86_64.zip\"\nENV ANDROID_NDK_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_NDK_ARCHIVE}\"\nENV ANDROID_SDK_HOME=\"${OPTDIR}/android-sdk\"\nENV ANDROID_SDK_TOOLS_VERSION=\"4333796\"\nENV ANDROID_SDK_BUILD_TOOLS_VERSION=\"28.0.3\"\nENV ANDROID_SDK_TOOLS_ARCHIVE=\"sdk-tools-linux-${ANDROID_SDK_TOOLS_VERSION}.zip\"\nENV ANDROID_SDK_TOOLS_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_SDK_TOOLS_ARCHIVE}\"\nENV USE_SDK_WRAPPER=\"1\"\nENV GRADLE_OPTS=\"-Xmx1536M -Dorg.gradle.jvmargs='-Xmx1536M'\"\nENV USER=\"buildozer\"\nENV HOMEDIR=\"/home/${USER}\"\nENV WORKDIR=\"${HOMEDIR}/build\" \\\n    PATH=\"${HOMEDIR}/.local/bin:${PATH}\"\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository ppa:kivy-team/kivy \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common language-pack-en build-essential ccache git libncurses5:i386 libstdc++6:i386 libgtk2.0-0:i386 libpangox-1.0-0:i386 libpangoxft-1.0-0:i386 libidn11:i386 openjdk-8-jdk unzip zlib1g-dev zlib1g:i386 zip sudo python3-dev python3-kivy lbzip2 wget curl ca-certificates patch vim less autoconf automake libtool libffi-dev cmake gettext libltdl-dev pkg-config locales ffmpeg libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev libportmidi-dev libswscale-dev libavformat-dev libavcodec-dev -y \\\n && locale-gen en_US.UTF-8 \\\n && rm -rf /var/lib/apt/lists/*\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python3 get-pip.py \\\n && pip3 install --upgrade setuptools cython==0.28.6 image\nRUN git config --global user.email \"buildozer@example.com\" \\\n && git config --global user.name \"Buildozer\"\nRUN adduser --disabled-password --gecos '' ${USER} \\\n && mkdir /home/buildozer/build \\\n && chown ${USER}.${USER} ${WORKDIR}\nRUN usermod -append --groups sudo ${USER}\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\nRUN cd ${OPTDIR} \\\n && git clone https://github.com/kivy/python-for-android \\\n && cd python-for-android \\\n && git remote add sombernight https://github.com/SomberNight/python-for-android \\\n && git fetch --all \\\n && git checkout dec1badc3bd134a9a1c69275339423a95d63413e \\\n && git cherry-pick d7f722e4e5d4b3e6f5b1733c95e6a433f78ee570 \\\n && git cherry-pick a607f4a446773ac0b0a5150171092b0617fbe670 \\\n && python3 -m pip install -e . \\\n && cd ${OPTDIR} \\\n && git clone https://github.com/kivy/buildozer \\\n && cd buildozer \\\n && git checkout 6142acfa40cf9a225644470e5410333c35a3bc4a \\\n && python3 -m pip install -e .\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_SDK_TOOLS_DL_URL}\" --output \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}\" \\\n && unzip -q \"${ANDROID_SDK_TOOLS_ARCHIVE}\" -d \"${ANDROID_SDK_HOME}\" \\\n && rm -rf \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}/.android/\" \\\n && echo '### User Sources for Android SDK Manager' > \"${ANDROID_SDK_HOME}/.android/repositories.cfg\" \\\n && yes | \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-24\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-28\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"extras;android;m2repository\" > /dev/null \\\n && chmod +x \"${ANDROID_SDK_HOME}/tools/bin/avdmanager\"\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_NDK_DL_URL}\" --output \"${ANDROID_NDK_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_NDK_HOME_V}\" \\\n && unzip -q \"${ANDROID_NDK_ARCHIVE}\" -d \"${OPTDIR}\" \\\n && chown -R ${USER}.${USER} ${OPTDIR} \\\n && ln -sfn \"${ANDROID_NDK_HOME_V}\" \"${ANDROID_NDK_HOME}\" \\\n && rm -rf \"${ANDROID_NDK_ARCHIVE}\"\nUSER ${USER}\nWORKDIR ${WORKDIR}\n","injectedSmells":[],"originalDockerfileHash":"58c0d5c7aea63ecf847d2dadf31e7ae8","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"AXErunners\\\"\"\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8\"\nENV OPTDIR=\"/opt\"\nENV ANDROID_NDK_HOME=\"${OPTDIR}/android-ndk\"\nENV ANDROID_NDK_VERSION=\"17c\"\nENV ANDROID_NDK_HOME_V=\"${ANDROID_NDK_HOME}-r${ANDROID_NDK_VERSION}\"\nENV ANDROID_NDK_ARCHIVE=\"android-ndk-r${ANDROID_NDK_VERSION}-linux-x86_64.zip\"\nENV ANDROID_NDK_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_NDK_ARCHIVE}\"\nENV ANDROID_SDK_HOME=\"${OPTDIR}/android-sdk\"\nENV ANDROID_SDK_TOOLS_VERSION=\"4333796\"\nENV ANDROID_SDK_BUILD_TOOLS_VERSION=\"28.0.3\"\nENV ANDROID_SDK_TOOLS_ARCHIVE=\"sdk-tools-linux-${ANDROID_SDK_TOOLS_VERSION}.zip\"\nENV ANDROID_SDK_TOOLS_DL_URL=\"https://dl.google.com/android/repository/${ANDROID_SDK_TOOLS_ARCHIVE}\"\nENV USE_SDK_WRAPPER=\"1\"\nENV GRADLE_OPTS=\"-Xmx1536M -Dorg.gradle.jvmargs='-Xmx1536M'\"\nENV USER=\"buildozer\"\nENV HOMEDIR=\"/home/${USER}\"\nENV WORKDIR=\"${HOMEDIR}/build\" \\\n    PATH=\"${HOMEDIR}/.local/bin:${PATH}\"\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository ppa:kivy-team/kivy \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common language-pack-en build-essential ccache git libncurses5:i386 libstdc++6:i386 libgtk2.0-0:i386 libpangox-1.0-0:i386 libpangoxft-1.0-0:i386 libidn11:i386 openjdk-8-jdk unzip zlib1g-dev zlib1g:i386 zip sudo python3-dev python3-kivy lbzip2 wget curl ca-certificates patch vim less autoconf automake libtool libffi-dev cmake gettext libltdl-dev pkg-config locales ffmpeg libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev libportmidi-dev libswscale-dev libavformat-dev libavcodec-dev -y \\\n && locale-gen en_US.UTF-8 \\\n && rm -rf /var/lib/apt/lists/*\nRUN wget https://bootstrap.pypa.io/get-pip.py \\\n && python3 get-pip.py \\\n && pip3 install --upgrade setuptools cython==0.28.6 image\nRUN git config --global user.email \"buildozer@example.com\" \\\n && git config --global user.name \"Buildozer\"\nRUN adduser --disabled-password --gecos '' ${USER} \\\n && mkdir /home/buildozer/build \\\n && chown ${USER}.${USER} ${WORKDIR}\nRUN usermod -append --groups sudo ${USER}\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\nRUN cd ${OPTDIR} \\\n && git clone https://github.com/kivy/python-for-android \\\n && cd python-for-android \\\n && git remote add sombernight https://github.com/SomberNight/python-for-android \\\n && git fetch --all \\\n && git checkout dec1badc3bd134a9a1c69275339423a95d63413e \\\n && git cherry-pick d7f722e4e5d4b3e6f5b1733c95e6a433f78ee570 \\\n && git cherry-pick a607f4a446773ac0b0a5150171092b0617fbe670 \\\n && python3 -m pip install -e . \\\n && cd ${OPTDIR} \\\n && git clone https://github.com/kivy/buildozer \\\n && cd buildozer \\\n && git checkout 6142acfa40cf9a225644470e5410333c35a3bc4a \\\n && python3 -m pip install -e .\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_SDK_TOOLS_DL_URL}\" --output \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}\" \\\n && unzip -q \"${ANDROID_SDK_TOOLS_ARCHIVE}\" -d \"${ANDROID_SDK_HOME}\" \\\n && rm -rf \"${ANDROID_SDK_TOOLS_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_SDK_HOME}/.android/\" \\\n && echo '### User Sources for Android SDK Manager' > \"${ANDROID_SDK_HOME}/.android/repositories.cfg\" \\\n && yes | \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-24\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"platforms;android-28\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"build-tools;${ANDROID_SDK_BUILD_TOOLS_VERSION}\" > /dev/null \\\n && \"${ANDROID_SDK_HOME}/tools/bin/sdkmanager\" \"extras;android;m2repository\" > /dev/null \\\n && chmod +x \"${ANDROID_SDK_HOME}/tools/bin/avdmanager\"\nRUN cd ${OPTDIR} \\\n && curl -# \"${ANDROID_NDK_DL_URL}\" --output \"${ANDROID_NDK_ARCHIVE}\" \\\n && mkdir --parents \"${ANDROID_NDK_HOME_V}\" \\\n && unzip -q \"${ANDROID_NDK_ARCHIVE}\" -d \"${OPTDIR}\" \\\n && chown -R ${USER}.${USER} ${OPTDIR} \\\n && ln -sfn \"${ANDROID_NDK_HOME_V}\" \"${ANDROID_NDK_HOME}\" \\\n && rm -rf \"${ANDROID_NDK_ARCHIVE}\"\nUSER ${USER}\nWORKDIR ${WORKDIR}\n","originalDockerfileUglifiedHash":"58c0d5c7aea63ecf847d2dadf31e7ae8","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e902d8589e124227115f9f48815da94ea35a4663.dockerfile"}