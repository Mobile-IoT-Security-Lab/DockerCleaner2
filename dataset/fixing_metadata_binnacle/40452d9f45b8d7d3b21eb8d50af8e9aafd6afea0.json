{"seed":1329988876,"processedDockerfileHash":"4faed2fe691ac68182ba4c3428d58131","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM alpine:3.7\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add libstdc++=6.4.0-r5 libx11=1.6.6-r0 libxrender=0.9.10-r2 libxext=1.3.3-r2 libssl1.0=1.0.2t-r0 ca-certificates=20190108-r0 fontconfig=2.12.6-r0 freetype=2.8.1-r4 ttf-dejavu=2.37-r0 ttf-droid=20121017-r0 ttf-freefont=20120503-r0 ttf-liberation=2.00.1-r1 ttf-ubuntu-font-family=0.83-r0 --no-cache \\\n && apk add g++=6.4.0-r5 git=2.15.4-r0 gtk+=2.24.31-r0 gtk+-dev=2.24.31-r0 make=4.2.1-r0 mesa-dev=17.2.4-r1 openssl-dev=1.0.2t-r0 patch=2.7.6-r0 --no-cache --virtual .build-deps \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nENTRYPOINT [\"wkhtmltopdf\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#  Image\nFROM alpine:3.7\n#  Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#  Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#  Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev openssl-dev patch \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nENTRYPOINT [\"wkhtmltopdf\"]\n","injectedSmells":[],"originalDockerfileHash":"29fd39d8673fafe5392105494f46050c","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   NOTE: THIS DOCKERFILE IS GENERATED VIA \"update.sh\"\n#\n#   PLEASE DO NOT EDIT IT DIRECTLY.\n#\n#   Image\nFROM alpine:3.7\n#   Environment variables\nENV WKHTMLTOX_VERSION=\"0.12.4\"\n#   Copy patches\nRUN mkdir -p /tmp/patches\nCOPY conf/* /tmp/patches/\n#   Install needed packages\nRUN apk add --no-cache libstdc++ libx11 libxrender libxext libssl1.0 ca-certificates fontconfig freetype ttf-dejavu ttf-droid ttf-freefont ttf-liberation ttf-ubuntu-font-family \\\n && apk add --no-cache --virtual .build-deps g++ git gtk+ gtk+-dev make mesa-dev openssl-dev patch \\\n && git clone --recursive https://github.com/wkhtmltopdf/wkhtmltopdf.git /tmp/wkhtmltopdf \\\n && cd /tmp/wkhtmltopdf \\\n && git checkout tags/$WKHTMLTOX_VERSION \\\n && cd /tmp/wkhtmltopdf/qt \\\n && patch -p1 -i /tmp/patches/qt-musl.patch \\\n && patch -p1 -i /tmp/patches/qt-musl-iconv-no-bom.patch \\\n && patch -p1 -i /tmp/patches/qt-recursive-global-mutex.patch \\\n && patch -p1 -i /tmp/patches/qt-font-pixel-size.patch \\\n && patch -p1 -i /tmp/patches/qt-gcc6.patch \\\n && sed -i \"s|-O2|$CXXFLAGS|\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/g++.conf \\\n && sed -i \"/^QMAKE_LFLAGS\\s/s|+=|+= $LDFLAGS|g\" mkspecs/common/g++.conf \\\n && NB_CORES=$( grep -c '^processor' /proc/cpuinfo ;) \\\n && ./configure -confirm-license -opensource -prefix /usr -datadir /usr/share/qt -sysconfdir /etc -plugindir /usr/lib/qt/plugins -importdir /usr/lib/qt/imports -silent -release -static -webkit -script -svg -exceptions -xmlpatterns -openssl-linked -no-fast -no-largefile -no-accessibility -no-stl -no-sql-ibase -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-qt3support -no-opengl -no-openvg -no-system-proxies -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -no-javascript-jit -no-scripttools -no-declarative -no-declarative-debug -no-mmx -no-3dnow -no-sse -no-sse2 -no-sse3 -no-ssse3 -no-sse4.1 -no-sse4.2 -no-avx -no-neon -no-rpath -no-nis -no-cups -no-pch -no-dbus -no-separate-debug-info -no-gtkstyle -no-nas-sound -no-opengl -no-openvg -no-sm -no-xshape -no-xvideo -no-xsync -no-xinerama -no-xcursor -no-xfixes -no-xrandr -no-mitshm -no-xinput -no-xkb -no-glib -no-icu -nomake demos -nomake docs -nomake examples -nomake tools -nomake tests -nomake translations -graphicssystem raster -qt-zlib -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -optimized-qmake -iconv -xrender -fontconfig -D ENABLE_VIDEO=0 \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && cd /tmp/wkhtmltopdf \\\n && qmake \\\n && make --jobs $(($NB_CORES * 2)) --silent \\\n && make install \\\n && make clean \\\n && make distclean \\\n && cd /tmp/wkhtmltopdf/qt \\\n && make uninstall \\\n && make clean \\\n && make distclean \\\n && rm -rf /tmp/* \\\n && apk del .build-deps\nENTRYPOINT [\"wkhtmltopdf\"]\n","originalDockerfileUglifiedHash":"bf4d6bcbc61e906a798f97dd23cfaaeb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/40452d9f45b8d7d3b21eb8d50af8e9aafd6afea0.dockerfile"}