{"seed":1121237847,"processedDockerfileHash":"de2064b93c2812270add913b3413bae3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER pr3d4t0r\nLABEL author=\"pr3d4t0r - Eugene Ciurana\"\nLABEL copyright=\"(c) Copyright 2015, 2016 by CIME Software Ltd.\"\nLABEL description=\"Baikal / SabreDAV robust calendar and address book server with scheduling and email notifications\"\nLABEL license=\"See: LICENSE.txt for complete licensing information.\"\nLABEL support=\"caldav AT cime.net\"\nLABEL version=\"2.1\"\n#  ## \"set-locale\"\nRUN locale-gen en_US.UTF-8 \\\n && update-locale LANG=en_US.UTF-8 \\\n && update-locale LANGUAGE=en_US.UTF-8 \\\n && update-locale LC_ALL=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV TERM=\"xterm\"\n#  ## \"configure-apt\"\nRUN echo \"APT::Get::Assume-Yes true;\" >> /etc/apt/apt.conf.d/80custom; echo \"APT::Get::Quiet true;\" >> /etc/apt/apt.conf.d/80custom; rm -Rvf /var/lib/apt/lists/* ; :\n#  ## \"configure-postfix\"\n#\n#   These parameters are specific to your own Postfix relay!  Use your host and domain\n#   names.\nRUN echo \"postfix postfix/mailname string calendar.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/main_mailer_type string 'Satellite system'\" | debconf-set-selections \\\n && echo \"postfix postfix/relayhost string smtpcal.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/root_address string cal-bounce@example.org\" | debconf-set-selections\n#  ## \"system-requirements\"\nRUN (apt-get update ;apt-get install --no-install-recommends apache2=2.4.18-2ubuntu3.17 )\nRUN (apt-get update ;apt-get install --no-install-recommends curl=7.47.0-1ubuntu2.19 )\nRUN (apt-get update ;apt-get install --no-install-recommends postfix=3.1.0-3ubuntu0.4 )\nRUN (apt-get update ;apt-get install --no-install-recommends mailutils=1:2.99.99-1ubuntu2 )\nRUN (apt-get update ;apt-get install --no-install-recommends rsyslog=8.16.0-1ubuntu3.1 )\nRUN (apt-get update ;apt-get install --no-install-recommends sqlite3=3.11.0-1ubuntu1.5 )\nRUN (apt-get update ;apt-get install --no-install-recommends php=1:7.0+35ubuntu6.1 )\nRUN (apt-get update ;apt-get install --no-install-recommends libapache2-mod-php=1:7.0+35ubuntu6.1 )\nRUN (apt-get update ;apt-get install --no-install-recommends php-date=1.4.7-2build1 )\nRUN (apt-get update ;apt-get install --no-install-recommends php-dom )\nRUN (apt-get update ;apt-get install --no-install-recommends php-mbstring=1:7.0+35ubuntu6.1 )\nRUN (apt-get update ;apt-get install --no-install-recommends php-sqlite3=1:7.0+35ubuntu6.1 )\nRUN (apt-get update ;apt-get install --no-install-recommends unzip=6.0-20ubuntu1.1 )\n#  ## \"Baikal-installation\"\nWORKDIR /var/www\nRUN curl -LO https://github.com/fruux/Baikal/releases/download/0.4.6/baikal-0.4.6.zip \\\n && unzip baikal-0.4.6.zip \\\n && rm -f baikal-0.4.6.zip\nRUN mv baikal calendar_server\nRUN rm -Rvf /var/www/calendar_server/Specific/db/.empty\n#   Scheduling and email delivery.  See:\n#   http://sabre.io/dav/scheduling/\n#   https://groups.google.com/forum/#!searchin/sabredav-discuss/scheduling|sort:relevance/sabredav-discuss/CrGZXqw4sRw/vsHYq6FDcnkJ\n#   This needs to be patched on the Baikal start up Server.php, NOT in the SabreDAV server.\nCOPY resources/Server.php /var/www/calendar_server/Core/Frameworks/Baikal/Core/Server.php\nCOPY resources/baikal.apache2 /var/www/calendar_server/Specific/virtualhosts/baikal.apache2\nCOPY cal_infox.php /var/www/calendar_server/html/\n#   The Baikal administration wizard creates these two config files when first run.  Preserve them\n#   and save them to the resources/ directory.  These files must be preserved for upgrades.\n#   Both files are already in the .gitignore file.\n#\n#   To use them:  uncomment these two lines and copy them to the Specific/ directory, per the\n#   Baikal upgrade instructions at:  http://sabre.io/baikal/upgrade/\n#   COPY                    resources/config.php /var/www/calendar_server/Specific/\n#   COPY                    resources/config.system.php /var/www/calendar_server/Specific/\nWORKDIR /var/www/calendar_server\nRUN chown -Rf www-data:www-data Specific\nWORKDIR /etc/apache2/sites-available\nRUN /etc/init.d/apache2 stop ; a2enmod rewrite\nRUN mv -f 000-default.conf ..\nRUN ln -s /var/www/calendar_server/Specific/virtualhosts/baikal.apache2 000-default.conf\nRUN echo \"error_log = syslog\" >> /etc/php/7.0/apache2/php.ini\n#  ## \"web-server-configuration-and-launch\"\nWORKDIR /\nCOPY bin/runapache2 /\n#   httpoxy vulnerability fix:\nRUN awk '/vim: syntax/ { printf(\"# Poxy; CVE-2016-5387\\nLoadModule headers_module /usr/lib/apache2/modules/mod_headers.so\\nRequestHeader unset Proxy early\\n%s\\n\", $0); next; } { print; }' /etc/apache2/apache2.conf > /tmp/apache2.conf\nRUN cat /tmp/apache2.conf > /etc/apache2/apache2.conf \\\n && rm /tmp/apache2.conf\nENTRYPOINT [\"/runapache2\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER pr3d4t0r\nLABEL author=\"pr3d4t0r - Eugene Ciurana\"\nLABEL copyright=\"(c) Copyright 2015, 2016 by CIME Software Ltd.\"\nLABEL description=\"Baikal / SabreDAV robust calendar and address book server with scheduling and email notifications\"\nLABEL license=\"See: LICENSE.txt for complete licensing information.\"\nLABEL support=\"caldav AT cime.net\"\nLABEL version=\"2.1\"\n# ## \"set-locale\"\nRUN locale-gen en_US.UTF-8 \\\n && update-locale LANG=en_US.UTF-8 \\\n && update-locale LANGUAGE=en_US.UTF-8 \\\n && update-locale LC_ALL=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV TERM=\"xterm\"\n# ## \"configure-apt\"\nRUN echo \"APT::Get::Assume-Yes true;\" >> /etc/apt/apt.conf.d/80custom; echo \"APT::Get::Quiet true;\" >> /etc/apt/apt.conf.d/80custom; rm -Rvf /var/lib/apt/lists/* ; apt-get update\n# ## \"configure-postfix\"\n#\n#  These parameters are specific to your own Postfix relay!  Use your host and domain\n#  names.\nRUN echo \"postfix postfix/mailname string calendar.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/main_mailer_type string 'Satellite system'\" | debconf-set-selections \\\n && echo \"postfix postfix/relayhost string smtpcal.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/root_address string cal-bounce@example.org\" | debconf-set-selections\n# ## \"system-requirements\"\nRUN apt-get install apache2\nRUN apt-get install curl\nRUN apt-get install postfix\nRUN apt-get install mailutils\nRUN apt-get install rsyslog\nRUN apt-get install sqlite3\nRUN apt-get install php\nRUN apt-get install libapache2-mod-php\nRUN apt-get install php-date\nRUN apt-get install php-dom\nRUN apt-get install php-mbstring\nRUN apt-get install php-sqlite3\nRUN apt-get install unzip\n# ## \"Baikal-installation\"\nWORKDIR /var/www\nRUN curl -LO https://github.com/fruux/Baikal/releases/download/0.4.6/baikal-0.4.6.zip \\\n && unzip baikal-0.4.6.zip \\\n && rm -f baikal-0.4.6.zip\nRUN mv baikal calendar_server\nRUN rm -Rvf /var/www/calendar_server/Specific/db/.empty\n#  Scheduling and email delivery.  See:\n#  http://sabre.io/dav/scheduling/\n#  https://groups.google.com/forum/#!searchin/sabredav-discuss/scheduling|sort:relevance/sabredav-discuss/CrGZXqw4sRw/vsHYq6FDcnkJ\n#  This needs to be patched on the Baikal start up Server.php, NOT in the SabreDAV server.\nCOPY resources/Server.php /var/www/calendar_server/Core/Frameworks/Baikal/Core/Server.php\nCOPY resources/baikal.apache2 /var/www/calendar_server/Specific/virtualhosts/baikal.apache2\nCOPY cal_infox.php /var/www/calendar_server/html/\n#  The Baikal administration wizard creates these two config files when first run.  Preserve them\n#  and save them to the resources/ directory.  These files must be preserved for upgrades.\n#  Both files are already in the .gitignore file.\n#\n#  To use them:  uncomment these two lines and copy them to the Specific/ directory, per the\n#  Baikal upgrade instructions at:  http://sabre.io/baikal/upgrade/\n#  COPY                    resources/config.php /var/www/calendar_server/Specific/\n#  COPY                    resources/config.system.php /var/www/calendar_server/Specific/\nWORKDIR /var/www/calendar_server\nRUN chown -Rf www-data:www-data Specific\nWORKDIR /etc/apache2/sites-available\nRUN /etc/init.d/apache2 stop ; a2enmod rewrite\nRUN mv -f 000-default.conf ..\nRUN ln -s /var/www/calendar_server/Specific/virtualhosts/baikal.apache2 000-default.conf\nRUN echo \"error_log = syslog\" >> /etc/php/7.0/apache2/php.ini\n# ## \"web-server-configuration-and-launch\"\nWORKDIR /\nCOPY bin/runapache2 /\n#  httpoxy vulnerability fix:\nRUN awk '/vim: syntax/ { printf(\"# Poxy; CVE-2016-5387\\nLoadModule headers_module /usr/lib/apache2/modules/mod_headers.so\\nRequestHeader unset Proxy early\\n%s\\n\", $0); next; } { print; }' /etc/apache2/apache2.conf > /tmp/apache2.conf\nRUN cat /tmp/apache2.conf > /etc/apache2/apache2.conf \\\n && rm /tmp/apache2.conf\nENTRYPOINT [\"/runapache2\"]\n","injectedSmells":[],"originalDockerfileHash":"ce700f6fe5c26bfe15e204cb42d4bb57","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER pr3d4t0r\nLABEL author=\"pr3d4t0r - Eugene Ciurana\"\nLABEL copyright=\"(c) Copyright 2015, 2016 by CIME Software Ltd.\"\nLABEL description=\"Baikal / SabreDAV robust calendar and address book server with scheduling and email notifications\"\nLABEL license=\"See: LICENSE.txt for complete licensing information.\"\nLABEL support=\"caldav AT cime.net\"\nLABEL version=\"2.1\"\n#  ## \"set-locale\"\nRUN locale-gen en_US.UTF-8 \\\n && update-locale LANG=en_US.UTF-8 \\\n && update-locale LANGUAGE=en_US.UTF-8 \\\n && update-locale LC_ALL=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV TERM=\"xterm\"\n#  ## \"configure-apt\"\nRUN echo \"APT::Get::Assume-Yes true;\" >> /etc/apt/apt.conf.d/80custom; echo \"APT::Get::Quiet true;\" >> /etc/apt/apt.conf.d/80custom; rm -Rvf /var/lib/apt/lists/* ; apt-get update\n#  ## \"configure-postfix\"\n#\n#   These parameters are specific to your own Postfix relay!  Use your host and domain\n#   names.\nRUN echo \"postfix postfix/mailname string calendar.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/main_mailer_type string 'Satellite system'\" | debconf-set-selections \\\n && echo \"postfix postfix/relayhost string smtpcal.example.org\" | debconf-set-selections \\\n && echo \"postfix postfix/root_address string cal-bounce@example.org\" | debconf-set-selections\n#  ## \"system-requirements\"\nRUN apt-get install apache2\nRUN apt-get install curl\nRUN apt-get install postfix\nRUN apt-get install mailutils\nRUN apt-get install rsyslog\nRUN apt-get install sqlite3\nRUN apt-get install php\nRUN apt-get install libapache2-mod-php\nRUN apt-get install php-date\nRUN apt-get install php-dom\nRUN apt-get install php-mbstring\nRUN apt-get install php-sqlite3\nRUN apt-get install unzip\n#  ## \"Baikal-installation\"\nWORKDIR /var/www\nRUN curl -LO https://github.com/fruux/Baikal/releases/download/0.4.6/baikal-0.4.6.zip \\\n && unzip baikal-0.4.6.zip \\\n && rm -f baikal-0.4.6.zip\nRUN mv baikal calendar_server\nRUN rm -Rvf /var/www/calendar_server/Specific/db/.empty\n#   Scheduling and email delivery.  See:\n#   http://sabre.io/dav/scheduling/\n#   https://groups.google.com/forum/#!searchin/sabredav-discuss/scheduling|sort:relevance/sabredav-discuss/CrGZXqw4sRw/vsHYq6FDcnkJ\n#   This needs to be patched on the Baikal start up Server.php, NOT in the SabreDAV server.\nCOPY resources/Server.php /var/www/calendar_server/Core/Frameworks/Baikal/Core/Server.php\nCOPY resources/baikal.apache2 /var/www/calendar_server/Specific/virtualhosts/baikal.apache2\nCOPY cal_infox.php /var/www/calendar_server/html/\n#   The Baikal administration wizard creates these two config files when first run.  Preserve them\n#   and save them to the resources/ directory.  These files must be preserved for upgrades.\n#   Both files are already in the .gitignore file.\n#\n#   To use them:  uncomment these two lines and copy them to the Specific/ directory, per the\n#   Baikal upgrade instructions at:  http://sabre.io/baikal/upgrade/\n#   COPY                    resources/config.php /var/www/calendar_server/Specific/\n#   COPY                    resources/config.system.php /var/www/calendar_server/Specific/\nWORKDIR /var/www/calendar_server\nRUN chown -Rf www-data:www-data Specific\nWORKDIR /etc/apache2/sites-available\nRUN /etc/init.d/apache2 stop ; a2enmod rewrite\nRUN mv -f 000-default.conf ..\nRUN ln -s /var/www/calendar_server/Specific/virtualhosts/baikal.apache2 000-default.conf\nRUN echo \"error_log = syslog\" >> /etc/php/7.0/apache2/php.ini\n#  ## \"web-server-configuration-and-launch\"\nWORKDIR /\nCOPY bin/runapache2 /\n#   httpoxy vulnerability fix:\nRUN awk '/vim: syntax/ { printf(\"# Poxy; CVE-2016-5387\\nLoadModule headers_module /usr/lib/apache2/modules/mod_headers.so\\nRequestHeader unset Proxy early\\n%s\\n\", $0); next; } { print; }' /etc/apache2/apache2.conf > /tmp/apache2.conf\nRUN cat /tmp/apache2.conf > /etc/apache2/apache2.conf \\\n && rm /tmp/apache2.conf\nENTRYPOINT [\"/runapache2\"]\n","originalDockerfileUglifiedHash":"997810908ae688e36a442498b768cf8d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b20eeac4d02e6a2e1a87ce451c481d25e55f7880.dockerfile"}