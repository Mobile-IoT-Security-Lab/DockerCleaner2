{"seed":547073646,"processedDockerfileHash":"ff7e3822c79468aa10dca9bd3465fb4c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   LICENSE CDDL 1.0 + GPL 2.0\n#\n#   DOCKERFILE FOR ORACLE DB 11g\n#   --------------------------\nFROM oraclelinux:7.1\n#  #######################################\n#   Install OS needed packages\n#  #######################################\nRUN yum -y install wget sed unzip sudo\nRUN cd /etc/yum.repos.d\nRUN wget http://public-yum.oracle.com/public-yum-ol6.repo\n#   changing the field enabled=0 to enabled=1 to reflect repositories that correspond to the machine's operating system release. \nRUN sed \"s|enabled=0|enabled=1|g\" public-yum-ol6.repo\nRUN yum -y install oracle-rdbms-server-11gR2-preinstall\nRUN yum clean all\n#  #######################################\n#   Install ORACLE 11g Enterprise Edition\n#  #######################################\nCOPY installation_files/linux.x64_11gR2_database_1of2.zip /tmp/install/linux.x64_11gR2_database_1of2.zip\nCOPY installation_files/linux.x64_11gR2_database_2of2.zip /tmp/install/linux.x64_11gR2_database_2of2.zip\nCOPY installation_files/oraInst.loc /etc/oraInst.loc\nCOPY installation_files/oracle.sh /usr/local/bin/oracle.sh\nRUN chmod -R 775 /usr/local/bin/oracle.sh\nRUN cd /tmp/install \\\n && unzip linux.x64_11gR2_database_1of2 \\\n && unzip linux.x64_11gR2_database_2of2 \\\n && rm *.zip\n#  RUN groupadd -g 54321 oinstall && groupadd -g 54322 dba\nRUN userdel oracle \\\n && rm -rf /home/oracle \\\n && rm /var/spool/mail/oracle\nRUN useradd -m -u 54321 -g oinstall -G dba oracle\nRUN echo \"oracle:oracle\" | chpasswd\nENV ORACLE_SID=\"ORCL\"\nENV ORACLE_BASE=\"/u01/app/oracle\"\nENV ORACLE_HOME=\"$ORACLE_BASE/product/11.2/db_1\"\nENV ORACLE_INVENTORY=\"$ORACLE_BASE/oraInventory\"\nENV PATH=\"$ORACLE_HOME/bin:$PATH\"\nRUN mkdir -p $ORACLE_BASE \\\n && chown -R oracle:oinstall $ORACLE_BASE \\\n && chmod -R 775 $ORACLE_BASE\nRUN mkdir -p $ORACLE_INVENTORY \\\n && chown -R oracle:oinstall $ORACLE_INVENTORY \\\n && chmod -R 775 $ORACLE_INVENTORY\n#  ADD sysctl.conf /etc/sysctl.conf\nRUN echo \"oracle soft stack 10240\" >> /etc/security/limits.conf\n#   To avoid error: sudo: sorry, you must have a tty to run sudo\nRUN sed -i -e \"s/Defaults requiretty.*/ #Defaults requiretty/g\" /etc/sudoers\nUSER oracle\nRUN cd /tmp/install/database/\nRUN /tmp/install/database/runInstaller -silent -ignoreSysPrereqs -ignorePrereq -force oracle.install.option=INSTALL_DB_SWONLY UNIX_GROUP_NAME=oinstall INVENTORY_LOCATION=$ORACLE_INVENTORY ORACLE_HOME=$ORACLE_HOME ORACLE_HOME_NAME=\"OraDb11g_Home1\" ORACLE_BASE=$ORACLE_BASE oracle.install.db.InstallEdition=SE oracle.install.db.isCustomInstall=false oracle.install.db.DBA_GROUP=dba oracle.install.db.OPER_GROUP=dba DECLINE_SECURITY_UPDATES=true -waitforcompletion\nUSER root\nRUN rm -rf /tmp/install\n#   Run the root.sh script to execute the final steps after the installation\nRUN $ORACLE_HOME/root.sh\nEXPOSE 1521/tcp 1158/tcp\n#  #######################################\n#   Create a new database\n#  #######################################\n#   Copy all init scripts & files and create the ORCL instance\nCOPY database_files/oracle-.bashrc /home/oracle/.bashrc\nCOPY database_files/initORCL.ora $ORACLE_HOME/dbs/initORCL.ora\nCOPY database_files/createdb.sql $ORACLE_HOME/config/scripts/createdb.sql\nCOPY database_files/create.sh /tmp/create.sh\nRUN mkdir -p $ORACLE_BASE/oradata \\\n && chown -R oracle:oinstall $ORACLE_BASE/oradata \\\n && chmod -R 775 $ORACLE_BASE/oradata \\\n && mkdir -p $ORACLE_BASE/fast_recovery_area \\\n && chown -R oracle:oinstall $ORACLE_BASE/fast_recovery_area \\\n && chmod -R 775 $ORACLE_BASE/fast_recovery_area\nRUN /tmp/create.sh \\\n && rm /tmp/create.sh \\\n && echo \"ORCL:$ORACLE_HOME:Y\" >> /etc/oratab\nVOLUME [  \"$ORACLE_BASE/admin/docker/adump\",  \"$ORACLE_BASE/diag\",  \"$ORACLE_BASE/oradata/docker\",  \"$ORACLE_HOME/cfgtoollogs\",  \"$ORACLE_HOME/log\",  \"$ORACLE_HOME/rdbms/log\" ]\n#  #######################################\n#   Start Oracle command\n#  #######################################\nCMD oracle.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  LICENSE CDDL 1.0 + GPL 2.0\n#\n#  DOCKERFILE FOR ORACLE DB 11g\n#  --------------------------\nFROM oraclelinux:7.1\n# #######################################\n#  Install OS needed packages\n# #######################################\nRUN yum -y install wget sed unzip sudo\nRUN cd /etc/yum.repos.d\nRUN wget http://public-yum.oracle.com/public-yum-ol6.repo\n#  changing the field enabled=0 to enabled=1 to reflect repositories that correspond to the machine's operating system release. \nRUN sed \"s|enabled=0|enabled=1|g\" public-yum-ol6.repo\nRUN yum -y install oracle-rdbms-server-11gR2-preinstall\nRUN yum clean all\n# #######################################\n#  Install ORACLE 11g Enterprise Edition\n# #######################################\nADD installation_files/linux.x64_11gR2_database_1of2.zip /tmp/install/linux.x64_11gR2_database_1of2.zip\nADD installation_files/linux.x64_11gR2_database_2of2.zip /tmp/install/linux.x64_11gR2_database_2of2.zip\nADD installation_files/oraInst.loc /etc/oraInst.loc\nADD installation_files/oracle.sh /usr/local/bin/oracle.sh\nRUN chmod -R 775 /usr/local/bin/oracle.sh\nRUN cd /tmp/install \\\n && unzip linux.x64_11gR2_database_1of2 \\\n && unzip linux.x64_11gR2_database_2of2 \\\n && rm *.zip\n# RUN groupadd -g 54321 oinstall && groupadd -g 54322 dba\nRUN userdel oracle \\\n && rm -rf /home/oracle \\\n && rm /var/spool/mail/oracle\nRUN useradd -m -u 54321 -g oinstall -G dba oracle\nRUN echo \"oracle:oracle\" | chpasswd\nENV ORACLE_SID=\"ORCL\"\nENV ORACLE_BASE=\"/u01/app/oracle\"\nENV ORACLE_HOME=\"$ORACLE_BASE/product/11.2/db_1\"\nENV ORACLE_INVENTORY=\"$ORACLE_BASE/oraInventory\"\nENV PATH=\"$ORACLE_HOME/bin:$PATH\"\nRUN mkdir -p $ORACLE_BASE \\\n && chown -R oracle:oinstall $ORACLE_BASE \\\n && chmod -R 775 $ORACLE_BASE\nRUN mkdir -p $ORACLE_INVENTORY \\\n && chown -R oracle:oinstall $ORACLE_INVENTORY \\\n && chmod -R 775 $ORACLE_INVENTORY\n# ADD sysctl.conf /etc/sysctl.conf\nRUN echo \"oracle soft stack 10240\" >> /etc/security/limits.conf\n#  To avoid error: sudo: sorry, you must have a tty to run sudo\nRUN sed -i -e \"s/Defaults requiretty.*/ #Defaults requiretty/g\" /etc/sudoers\nUSER oracle\nRUN cd /tmp/install/database/\nRUN /tmp/install/database/runInstaller -silent -ignoreSysPrereqs -ignorePrereq -force oracle.install.option=INSTALL_DB_SWONLY UNIX_GROUP_NAME=oinstall INVENTORY_LOCATION=$ORACLE_INVENTORY ORACLE_HOME=$ORACLE_HOME ORACLE_HOME_NAME=\"OraDb11g_Home1\" ORACLE_BASE=$ORACLE_BASE oracle.install.db.InstallEdition=SE oracle.install.db.isCustomInstall=false oracle.install.db.DBA_GROUP=dba oracle.install.db.OPER_GROUP=dba DECLINE_SECURITY_UPDATES=true -waitforcompletion\nUSER root\nRUN rm -rf /tmp/install\n#  Run the root.sh script to execute the final steps after the installation\nRUN $ORACLE_HOME/root.sh\nEXPOSE 1521/tcp 1158/tcp\n# #######################################\n#  Create a new database\n# #######################################\n#  Copy all init scripts & files and create the ORCL instance\nADD database_files/oracle-.bashrc /home/oracle/.bashrc\nADD database_files/initORCL.ora $ORACLE_HOME/dbs/initORCL.ora\nADD database_files/createdb.sql $ORACLE_HOME/config/scripts/createdb.sql\nADD database_files/create.sh /tmp/create.sh\nRUN mkdir -p $ORACLE_BASE/oradata \\\n && chown -R oracle:oinstall $ORACLE_BASE/oradata \\\n && chmod -R 775 $ORACLE_BASE/oradata \\\n && mkdir -p $ORACLE_BASE/fast_recovery_area \\\n && chown -R oracle:oinstall $ORACLE_BASE/fast_recovery_area \\\n && chmod -R 775 $ORACLE_BASE/fast_recovery_area\nRUN /tmp/create.sh \\\n && rm /tmp/create.sh \\\n && echo \"ORCL:$ORACLE_HOME:Y\" >> /etc/oratab\nVOLUME [  \"$ORACLE_BASE/admin/docker/adump\",  \"$ORACLE_BASE/diag\",  \"$ORACLE_BASE/oradata/docker\",  \"$ORACLE_HOME/cfgtoollogs\",  \"$ORACLE_HOME/log\",  \"$ORACLE_HOME/rdbms/log\" ]\n# #######################################\n#  Start Oracle command\n# #######################################\nCMD oracle.sh\n","injectedSmells":[],"originalDockerfileHash":"14646c42ae55fc08d7d59e7e209bae6e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   LICENSE CDDL 1.0 + GPL 2.0\n#\n#   DOCKERFILE FOR ORACLE DB 11g\n#   --------------------------\nFROM oraclelinux:7.1\n#  #######################################\n#   Install OS needed packages\n#  #######################################\nRUN yum -y install wget sed unzip sudo\nRUN cd /etc/yum.repos.d\nRUN wget http://public-yum.oracle.com/public-yum-ol6.repo\n#   changing the field enabled=0 to enabled=1 to reflect repositories that correspond to the machine's operating system release. \nRUN sed \"s|enabled=0|enabled=1|g\" public-yum-ol6.repo\nRUN yum -y install oracle-rdbms-server-11gR2-preinstall\nRUN yum clean all\n#  #######################################\n#   Install ORACLE 11g Enterprise Edition\n#  #######################################\nADD installation_files/linux.x64_11gR2_database_1of2.zip /tmp/install/linux.x64_11gR2_database_1of2.zip\nADD installation_files/linux.x64_11gR2_database_2of2.zip /tmp/install/linux.x64_11gR2_database_2of2.zip\nADD installation_files/oraInst.loc /etc/oraInst.loc\nADD installation_files/oracle.sh /usr/local/bin/oracle.sh\nRUN chmod -R 775 /usr/local/bin/oracle.sh\nRUN cd /tmp/install \\\n && unzip linux.x64_11gR2_database_1of2 \\\n && unzip linux.x64_11gR2_database_2of2 \\\n && rm *.zip\n#  RUN groupadd -g 54321 oinstall && groupadd -g 54322 dba\nRUN userdel oracle \\\n && rm -rf /home/oracle \\\n && rm /var/spool/mail/oracle\nRUN useradd -m -u 54321 -g oinstall -G dba oracle\nRUN echo \"oracle:oracle\" | chpasswd\nENV ORACLE_SID=\"ORCL\"\nENV ORACLE_BASE=\"/u01/app/oracle\"\nENV ORACLE_HOME=\"$ORACLE_BASE/product/11.2/db_1\"\nENV ORACLE_INVENTORY=\"$ORACLE_BASE/oraInventory\"\nENV PATH=\"$ORACLE_HOME/bin:$PATH\"\nRUN mkdir -p $ORACLE_BASE \\\n && chown -R oracle:oinstall $ORACLE_BASE \\\n && chmod -R 775 $ORACLE_BASE\nRUN mkdir -p $ORACLE_INVENTORY \\\n && chown -R oracle:oinstall $ORACLE_INVENTORY \\\n && chmod -R 775 $ORACLE_INVENTORY\n#  ADD sysctl.conf /etc/sysctl.conf\nRUN echo \"oracle soft stack 10240\" >> /etc/security/limits.conf\n#   To avoid error: sudo: sorry, you must have a tty to run sudo\nRUN sed -i -e \"s/Defaults requiretty.*/ #Defaults requiretty/g\" /etc/sudoers\nUSER oracle\nRUN cd /tmp/install/database/\nRUN /tmp/install/database/runInstaller -silent -ignoreSysPrereqs -ignorePrereq -force oracle.install.option=INSTALL_DB_SWONLY UNIX_GROUP_NAME=oinstall INVENTORY_LOCATION=$ORACLE_INVENTORY ORACLE_HOME=$ORACLE_HOME ORACLE_HOME_NAME=\"OraDb11g_Home1\" ORACLE_BASE=$ORACLE_BASE oracle.install.db.InstallEdition=SE oracle.install.db.isCustomInstall=false oracle.install.db.DBA_GROUP=dba oracle.install.db.OPER_GROUP=dba DECLINE_SECURITY_UPDATES=true -waitforcompletion\nUSER root\nRUN rm -rf /tmp/install\n#   Run the root.sh script to execute the final steps after the installation\nRUN $ORACLE_HOME/root.sh\nEXPOSE 1521/tcp 1158/tcp\n#  #######################################\n#   Create a new database\n#  #######################################\n#   Copy all init scripts & files and create the ORCL instance\nADD database_files/oracle-.bashrc /home/oracle/.bashrc\nADD database_files/initORCL.ora $ORACLE_HOME/dbs/initORCL.ora\nADD database_files/createdb.sql $ORACLE_HOME/config/scripts/createdb.sql\nADD database_files/create.sh /tmp/create.sh\nRUN mkdir -p $ORACLE_BASE/oradata \\\n && chown -R oracle:oinstall $ORACLE_BASE/oradata \\\n && chmod -R 775 $ORACLE_BASE/oradata \\\n && mkdir -p $ORACLE_BASE/fast_recovery_area \\\n && chown -R oracle:oinstall $ORACLE_BASE/fast_recovery_area \\\n && chmod -R 775 $ORACLE_BASE/fast_recovery_area\nRUN /tmp/create.sh \\\n && rm /tmp/create.sh \\\n && echo \"ORCL:$ORACLE_HOME:Y\" >> /etc/oratab\nVOLUME [  \"$ORACLE_BASE/admin/docker/adump\",  \"$ORACLE_BASE/diag\",  \"$ORACLE_BASE/oradata/docker\",  \"$ORACLE_HOME/cfgtoollogs\",  \"$ORACLE_HOME/log\",  \"$ORACLE_HOME/rdbms/log\" ]\n#  #######################################\n#   Start Oracle command\n#  #######################################\nCMD oracle.sh\n","originalDockerfileUglifiedHash":"fd7ef883264aa48ecb524ed8d5e4532c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b1161de620e97c06f0e144efc88e9b35395768b1.dockerfile"}