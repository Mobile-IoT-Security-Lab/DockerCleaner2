{"seed":366565654,"processedDockerfileHash":"adee7ed74ded11667f2b0a13b0de61a2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   To build, cd to this directory, then:\n#     docker build -t ss-shiny-devel .\n#\n#   To run with the built-in shiny-examples:\n#     docker run --rm -p 3838:3838 --name ss ss-shiny-devel\nFROM ubuntu:16.04\nMAINTAINER Winston Chang \"winston@rstudio.com\"\n#   =====================================================================\n#   R\n#   =====================================================================\n#   Don't print \"debconf: unable to initialize frontend: Dialog\" messages\nARG DEBIAN_FRONTEND=noninteractive\n#   Need this to add R repo\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.96.20.10 -y\n#   Add R apt repository\nRUN add-apt-repository \"deb http://cran.r-project.org/bin/linux/ubuntu $( lsb_release -cs ;)/\"\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 0x51716619e084dab9\n#   Install basic stuff and R\nRUN apt-get update \\\n && apt-get install --no-install-recommends sudo=1.8.16-0ubuntu1.10 git=1:2.7.4-0ubuntu1.10 curl=7.47.0-1ubuntu2.19 vim-tiny=2:7.4.1689-3ubuntu1.5 less=481-2.1ubuntu0.2 wget=1.17.1-1ubuntu1.5 r-base=3.2.3-4 r-base-dev=3.2.3-4 r-recommended=3.2.3-4 fonts-texgyre=20150923-1 texinfo=6.1.0.dfsg.1-5 locales=2.23-0ubuntu11.3 -y\n#   Install jt for working with JSON from the RSC API\nRUN cd /usr/local \\\n && wget -O - https://github.com/micha/json-table/raw/master/jt.tar.gz | tar xzvf -\n#   Install jo for making JSON from bash\nRUN cd /tmp \\\n && wget -O - https://github.com/jpmens/jo/releases/download/v1.1/jo-1.1.tar.gz | tar xzvf - \\\n && cd jo-1.1 \\\n && ./configure \\\n && make install\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nRUN echo 'options(\\n repos = c(CRAN = \"https://cloud.r-project.org/\"),\\n download.file.method = \"libcurl\"\\n)' >> /etc/R/Rprofile.site\n#   Install TinyTeX (subset of TeXLive)\n#   From FAQ 5 and 6 here: https://yihui.name/tinytex/faq/\n#   Also install ae, parskip, and listings packages to build R vignettes\nRUN wget -qO- \"https://github.com/yihui/tinytex/raw/master/tools/install-unx.sh\" | sh -s - --admin --no-path \\\n && ~/.TinyTeX/bin/*/tlmgr path add \\\n && tlmgr install metafont mfware inconsolata tex ae parskip listings \\\n && tlmgr path add \\\n && Rscript -e \"source('https://install-github.me/yihui/tinytex'); tinytex::r_texmf()\"\n#   This is necessary for non-root users to follow symlinks to /root/.TinyTeX\nRUN chmod 755 /root\n#   Create docker user with empty password (will have uid and gid 1000)\nRUN useradd --create-home --shell /bin/bash docker \\\n && passwd docker -d \\\n && adduser docker sudo\n#   =====================================================================\n#   Shiny Examples\n#   =====================================================================\nRUN apt-get update \\\n && apt-get install --no-install-recommends libxml2-dev=2.9.3+dfsg1-1ubuntu0.7 libssl-dev=1.0.2g-1ubuntu4.20 libcairo2-dev=1.14.6-1 libxt-dev=1:1.1.5-0ubuntu1 libcurl4-openssl-dev=7.47.0-1ubuntu2.19 parallel=20161222-1~ubuntu0.16.04.1 -y\nRUN bash -c 'echo \"will cite\" | parallel --bibtex'\nRUN R -e \"install.packages(c('devtools', 'packrat'))\"\n#   Install shiny-examples, and fix permissions for apps that require write\n#   access to /shiny-examples\nRUN cd / \\\n && wget -nv https://github.com/rstudio/shiny-examples/archive/master.zip \\\n && unzip -x master.zip \\\n && mv shiny-examples-master shiny-examples \\\n && cd shiny-examples\n#   Packages that need to be installed from GitHub\nRUN R -e 'source(\"/install_deps.R\", echo = TRUE)'\nCOPY deployApp.R /usr/local/bin\nCOPY set_public.sh /usr/local/bin\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  To build, cd to this directory, then:\n#    docker build -t ss-shiny-devel .\n#\n#  To run with the built-in shiny-examples:\n#    docker run --rm -p 3838:3838 --name ss ss-shiny-devel\nFROM ubuntu:16.04\nMAINTAINER Winston Chang \"winston@rstudio.com\"\n#  =====================================================================\n#  R\n#  =====================================================================\n#  Don't print \"debconf: unable to initialize frontend: Dialog\" messages\nARG DEBIAN_FRONTEND=noninteractive\n#  Need this to add R repo\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#  Add R apt repository\nRUN add-apt-repository \"deb http://cran.r-project.org/bin/linux/ubuntu $( lsb_release -cs ;)/\"\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 0x51716619e084dab9\n#  Install basic stuff and R\nRUN apt-get update \\\n && apt-get install sudo git curl vim-tiny less wget r-base r-base-dev r-recommended fonts-texgyre texinfo locales -y\n#  Install jt for working with JSON from the RSC API\nRUN cd /usr/local \\\n && wget -O - https://github.com/micha/json-table/raw/master/jt.tar.gz | tar xzvf -\n#  Install jo for making JSON from bash\nRUN cd /tmp \\\n && wget -O - https://github.com/jpmens/jo/releases/download/v1.1/jo-1.1.tar.gz | tar xzvf - \\\n && cd jo-1.1 \\\n && ./configure \\\n && make install\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nRUN echo 'options(\\n repos = c(CRAN = \"https://cloud.r-project.org/\"),\\n download.file.method = \"libcurl\"\\n)' >> /etc/R/Rprofile.site\n#  Install TinyTeX (subset of TeXLive)\n#  From FAQ 5 and 6 here: https://yihui.name/tinytex/faq/\n#  Also install ae, parskip, and listings packages to build R vignettes\nRUN wget -qO- \"https://github.com/yihui/tinytex/raw/master/tools/install-unx.sh\" | sh -s - --admin --no-path \\\n && ~/.TinyTeX/bin/*/tlmgr path add \\\n && tlmgr install metafont mfware inconsolata tex ae parskip listings \\\n && tlmgr path add \\\n && Rscript -e \"source('https://install-github.me/yihui/tinytex'); tinytex::r_texmf()\"\n#  This is necessary for non-root users to follow symlinks to /root/.TinyTeX\nRUN chmod 755 /root\n#  Create docker user with empty password (will have uid and gid 1000)\nRUN useradd --create-home --shell /bin/bash docker \\\n && passwd docker -d \\\n && adduser docker sudo\n#  =====================================================================\n#  Shiny Examples\n#  =====================================================================\nRUN apt-get update \\\n && apt-get install libxml2-dev libssl-dev libcairo2-dev libxt-dev libcurl4-openssl-dev parallel -y\nRUN bash -c 'echo \"will cite\" | parallel --bibtex'\nRUN R -e \"install.packages(c('devtools', 'packrat'))\"\n#  Install shiny-examples, and fix permissions for apps that require write\n#  access to /shiny-examples\nRUN cd / \\\n && wget -nv https://github.com/rstudio/shiny-examples/archive/master.zip \\\n && unzip -x master.zip \\\n && mv shiny-examples-master shiny-examples \\\n && cd shiny-examples\n#  Packages that need to be installed from GitHub\nRUN R -e 'source(\"/install_deps.R\", echo = TRUE)'\nCOPY deployApp.R /usr/local/bin\nCOPY set_public.sh /usr/local/bin\n","injectedSmells":[],"originalDockerfileHash":"17adc5542f1b8adde1d0e89315d95916","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   To build, cd to this directory, then:\n#     docker build -t ss-shiny-devel .\n#\n#   To run with the built-in shiny-examples:\n#     docker run --rm -p 3838:3838 --name ss ss-shiny-devel\nFROM ubuntu:16.04\nMAINTAINER Winston Chang \"winston@rstudio.com\"\n#   =====================================================================\n#   R\n#   =====================================================================\n#   Don't print \"debconf: unable to initialize frontend: Dialog\" messages\nARG DEBIAN_FRONTEND=noninteractive\n#   Need this to add R repo\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#   Add R apt repository\nRUN add-apt-repository \"deb http://cran.r-project.org/bin/linux/ubuntu $( lsb_release -cs ;)/\"\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 0x51716619e084dab9\n#   Install basic stuff and R\nRUN apt-get update \\\n && apt-get install sudo git curl vim-tiny less wget r-base r-base-dev r-recommended fonts-texgyre texinfo locales -y\n#   Install jt for working with JSON from the RSC API\nRUN cd /usr/local \\\n && wget -O - https://github.com/micha/json-table/raw/master/jt.tar.gz | tar xzvf -\n#   Install jo for making JSON from bash\nRUN cd /tmp \\\n && wget -O - https://github.com/jpmens/jo/releases/download/v1.1/jo-1.1.tar.gz | tar xzvf - \\\n && cd jo-1.1 \\\n && ./configure \\\n && make install\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8\nENV LANG=\"en_US.UTF-8\"\nRUN echo 'options(\\n repos = c(CRAN = \"https://cloud.r-project.org/\"),\\n download.file.method = \"libcurl\"\\n)' >> /etc/R/Rprofile.site\n#   Install TinyTeX (subset of TeXLive)\n#   From FAQ 5 and 6 here: https://yihui.name/tinytex/faq/\n#   Also install ae, parskip, and listings packages to build R vignettes\nRUN wget -qO- \"https://github.com/yihui/tinytex/raw/master/tools/install-unx.sh\" | sh -s - --admin --no-path \\\n && ~/.TinyTeX/bin/*/tlmgr path add \\\n && tlmgr install metafont mfware inconsolata tex ae parskip listings \\\n && tlmgr path add \\\n && Rscript -e \"source('https://install-github.me/yihui/tinytex'); tinytex::r_texmf()\"\n#   This is necessary for non-root users to follow symlinks to /root/.TinyTeX\nRUN chmod 755 /root\n#   Create docker user with empty password (will have uid and gid 1000)\nRUN useradd --create-home --shell /bin/bash docker \\\n && passwd docker -d \\\n && adduser docker sudo\n#   =====================================================================\n#   Shiny Examples\n#   =====================================================================\nRUN apt-get update \\\n && apt-get install libxml2-dev libssl-dev libcairo2-dev libxt-dev libcurl4-openssl-dev parallel -y\nRUN bash -c 'echo \"will cite\" | parallel --bibtex'\nRUN R -e \"install.packages(c('devtools', 'packrat'))\"\n#   Install shiny-examples, and fix permissions for apps that require write\n#   access to /shiny-examples\nRUN cd / \\\n && wget -nv https://github.com/rstudio/shiny-examples/archive/master.zip \\\n && unzip -x master.zip \\\n && mv shiny-examples-master shiny-examples \\\n && cd shiny-examples\n#   Packages that need to be installed from GitHub\nRUN R -e 'source(\"/install_deps.R\", echo = TRUE)'\nCOPY deployApp.R /usr/local/bin\nCOPY set_public.sh /usr/local/bin\n","originalDockerfileUglifiedHash":"45b5829c1c901f94a2437e8bc63c8d03","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/686be1c601bea5abc52d2fe79dd389353c9b6c1b.dockerfile"}