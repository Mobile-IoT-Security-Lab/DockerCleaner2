{"seed":3354241715,"processedDockerfileHash":"fcaf4b1606a3291cb1f5c16a508d80f4","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:xenial\nMAINTAINER Arif Islam<arif@dreamfactory.com>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends software-properties-common=0.96.20.10 -y\nRUN LANG=C.UTF-8 add-apt-repository ppa:ondrej/php -y \\\n && apt-get update \\\n && apt-get install --no-install-recommends git-core=1:2.7.4-0ubuntu1.10 curl=7.47.0-1ubuntu2.19 mcrypt=2.6.8-1.3ubuntu1 nginx=1.10.3-0ubuntu0.16.04.5 openssl=1.0.2g-1ubuntu4.20 python=2.7.12-1~16.04 nodejs=4.2.6~dfsg-1ubuntu4.2 zip=3.0-11 ssmtp=2.64-8ubuntu1 wget=1.17.1-1ubuntu1.5 php7.1-fpm php7.1-common php7.1-cli php7.1-curl php7.1-json php7.1-mcrypt php7.1-mysqlnd php7.1-pgsql php7.1-sqlite php-pear=1:1.10.1+submodules+notgz-6ubuntu0.3 php7.1-dev php7.1-ldap php7.1-interbase php7.1-mbstring php7.1-bcmath php7.1-zip php7.1-soap php7.1-sybase php7.1-xml -y --allow-unauthenticated\nRUN apt-get install --no-install-recommends python-pip=8.1.1-2ubuntu0.6 pkg-config=0.29.1-0ubuntu1 -y --allow-unauthenticated\nRUN ln -s /usr/bin/nodejs /usr/bin/node \\\n && curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add - \\\n && curl https://packages.microsoft.com/config/ubuntu/16.04/prod.list > /etc/apt/sources.list.d/mssql-release.list \\\n && apt-get install --no-install-recommends apt-transport-https=1.2.35 locales=2.23-0ubuntu11.3 -y \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && apt-get update \\\n && ACCEPT_EULA=Y apt-get install -y --no-install-recommends mssql-tools unixodbc-dev \\\n && pecl install sqlsrv pdo_sqlsrv \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.1/mods-available/sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.1/mods-available/pdo_sqlsrv.ini \\\n && phpenmod sqlsrv pdo_sqlsrv \\\n && pip install bunch==1.0.1 \\\n && pecl install igbinary \\\n && echo \"extension=igbinary.so\" > /etc/php/7.1/mods-available/igbinary.ini \\\n && phpenmod igbinary \\\n && pecl install mongodb \\\n && echo \"extension=mongodb.so\" > /etc/php/7.1/mods-available/mongodb.ini \\\n && phpenmod mongodb \\\n && git clone https://github.com/dreamfactorysoftware/v8-compiled.git /v8 \\\n && mkdir /opt/v8\nWORKDIR /v8\nRUN cp -R ubuntu_16.04/PHP7.1/* /opt/v8 \\\n && git clone https://github.com/phpv8/v8js.git /v8js\nWORKDIR /v8js\nRUN git checkout 1.3.6 \\\n && git pull origin 1.3.6 \\\n && phpize \\\n && ./configure --with-v8js=/opt/v8 \\\n && make \\\n && make install \\\n && echo \"extension=v8js.so\" > /etc/php/7.1/mods-available/v8js.ini \\\n && phpenmod v8js\nWORKDIR /\nRUN rm -Rf v8 \\\n && rm -Rf v8js\n#   install php cassandra extension\nRUN mkdir /cassandra\nWORKDIR /cassandra\nRUN apt-get install --no-install-recommends libgmp-dev=2:6.1.0+dfsg-2 libpcre3-dev=2:8.38-3.1 g++=4:5.3.1-1ubuntu1 make=4.1-6 cmake=3.5.1-1ubuntu3 libssl-dev=1.0.2g-1ubuntu4.20 -y \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv-dev_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && dpkg -i --force-overwrite libuv_1.11.0-1_amd64.deb \\\n && dpkg -i libuv-dev_1.11.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && git clone https://github.com/datastax/php-driver.git\nWORKDIR /cassandra/php-driver\nRUN git checkout tags/v1.2.2\nWORKDIR /cassandra/php-driver/ext\nRUN phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=cassandra.so\" > /etc/php/7.1/mods-available/cassandra.ini \\\n && phpenmod cassandra\nWORKDIR /\nRUN rm -Rf cassandra\n#   install php couchbase extension\nRUN mkdir /couchbase\nWORKDIR /couchbase\nRUN wget http://packages.couchbase.com/releases/couchbase-release/couchbase-release-1.0-2-amd64.deb \\\n && dpkg -i couchbase-release-1.0-2-amd64.deb \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends libcouchbase-dev build-essential=12.1ubuntu2 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 -y --allow-unauthenticated \\\n && pecl install pcs-1.3.3 \\\n && pecl install couchbase \\\n && echo \"extension=pcs.so\" > /etc/php/7.1/mods-available/pcs.ini \\\n && echo \"extension=couchbase.so\" > /etc/php/7.1/mods-available/xcouchbase.ini \\\n && phpenmod pcs \\\n && phpenmod xcouchbase\nWORKDIR /\nRUN rm -Rf couchbase\n#   configure sendmail\nRUN echo 'sendmail_path = \"/usr/sbin/ssmtp -t\"' > /etc/php/7.1/cli/conf.d/mail.ini\n#   install composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer \\\n && chmod +x /usr/local/bin/composer\n#   Configure Nginx/php-fpm\nRUN rm /etc/nginx/sites-enabled/default\nCOPY dreamfactory.conf /etc/nginx/sites-available/dreamfactory.conf\nRUN ln -s /etc/nginx/sites-available/dreamfactory.conf /etc/nginx/sites-enabled/dreamfactory.conf \\\n && sed -i \"s/pm.max_children = 5/pm.max_children = 5000/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.start_servers = 2/pm.start_servers = 150/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.min_spare_servers = 1/pm.min_spare_servers = 100/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.max_spare_servers = 3/pm.max_spare_servers = 200/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm = dynamic/pm = ondemand/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/worker_connections 768;/worker_connections 2048;/\" /etc/nginx/nginx.conf \\\n && sed -i \"s/keepalive_timeout 65;/keepalive_timeout 10;/\" /etc/nginx/nginx.conf\n#   get app src\nRUN git clone https://github.com/dreamfactorysoftware/dreamfactory.git /opt/dreamfactory\nWORKDIR /opt/dreamfactory\n#   install packages\nRUN composer install --no-dev \\\n && php artisan df:env --db_connection=sqlite --df_install=Docker \\\n && chown -R www-data:www-data /opt/dreamfactory\nCOPY docker-entrypoint.sh /docker-entrypoint.sh\n#   set proper permission to docker-entrypoint.sh script and forward error logs to docker log collector\nRUN chmod +x /docker-entrypoint.sh \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nCMD [\"/docker-entrypoint.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:xenial\nMAINTAINER Arif Islam<arif@dreamfactory.com>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends software-properties-common -y\nRUN LANG=C.UTF-8 add-apt-repository ppa:ondrej/php -y \\\n && apt-get update \\\n && apt-get install --no-install-recommends git-core curl mcrypt nginx openssl python nodejs zip ssmtp wget php7.1-fpm php7.1-common php7.1-cli php7.1-curl php7.1-json php7.1-mcrypt php7.1-mysqlnd php7.1-pgsql php7.1-sqlite php-pear php7.1-dev php7.1-ldap php7.1-interbase php7.1-mbstring php7.1-bcmath php7.1-zip php7.1-soap php7.1-sybase php7.1-xml -y --allow-unauthenticated\nRUN apt-get install python-pip pkg-config -y --allow-unauthenticated\nRUN ln -s /usr/bin/nodejs /usr/bin/node \\\n && curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add - \\\n && curl https://packages.microsoft.com/config/ubuntu/16.04/prod.list > /etc/apt/sources.list.d/mssql-release.list \\\n && apt-get install --no-install-recommends apt-transport-https locales -y \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && apt-get update \\\n && ACCEPT_EULA=Y apt-get install -y --no-install-recommends mssql-tools unixodbc-dev \\\n && pecl install sqlsrv pdo_sqlsrv \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.1/mods-available/sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.1/mods-available/pdo_sqlsrv.ini \\\n && phpenmod sqlsrv pdo_sqlsrv \\\n && pip install bunch \\\n && pecl install igbinary \\\n && echo \"extension=igbinary.so\" > /etc/php/7.1/mods-available/igbinary.ini \\\n && phpenmod igbinary \\\n && pecl install mongodb \\\n && echo \"extension=mongodb.so\" > /etc/php/7.1/mods-available/mongodb.ini \\\n && phpenmod mongodb \\\n && git clone https://github.com/dreamfactorysoftware/v8-compiled.git /v8 \\\n && mkdir /opt/v8\nWORKDIR /v8\nRUN cp -R ubuntu_16.04/PHP7.1/* /opt/v8 \\\n && git clone https://github.com/phpv8/v8js.git /v8js\nWORKDIR /v8js\nRUN git checkout 1.3.6 \\\n && git pull origin 1.3.6 \\\n && phpize \\\n && ./configure --with-v8js=/opt/v8 \\\n && make \\\n && make install \\\n && echo \"extension=v8js.so\" > /etc/php/7.1/mods-available/v8js.ini \\\n && phpenmod v8js\nWORKDIR /\nRUN rm -Rf v8 \\\n && rm -Rf v8js\n#  install php cassandra extension\nRUN mkdir /cassandra\nWORKDIR /cassandra\nRUN apt-get install --no-install-recommends libgmp-dev libpcre3-dev g++ make cmake libssl-dev -y \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv-dev_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && dpkg -i --force-overwrite libuv_1.11.0-1_amd64.deb \\\n && dpkg -i libuv-dev_1.11.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && git clone https://github.com/datastax/php-driver.git\nWORKDIR /cassandra/php-driver\nRUN git checkout tags/v1.2.2\nWORKDIR /cassandra/php-driver/ext\nRUN phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=cassandra.so\" > /etc/php/7.1/mods-available/cassandra.ini \\\n && phpenmod cassandra\nWORKDIR /\nRUN rm -Rf cassandra\n#  install php couchbase extension\nRUN mkdir /couchbase\nWORKDIR /couchbase\nRUN wget http://packages.couchbase.com/releases/couchbase-release/couchbase-release-1.0-2-amd64.deb \\\n && dpkg -i couchbase-release-1.0-2-amd64.deb \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends libcouchbase-dev build-essential zlib1g-dev -y --allow-unauthenticated \\\n && pecl install pcs-1.3.3 \\\n && pecl install couchbase \\\n && echo \"extension=pcs.so\" > /etc/php/7.1/mods-available/pcs.ini \\\n && echo \"extension=couchbase.so\" > /etc/php/7.1/mods-available/xcouchbase.ini \\\n && phpenmod pcs \\\n && phpenmod xcouchbase\nWORKDIR /\nRUN rm -Rf couchbase\n#  configure sendmail\nRUN echo 'sendmail_path = \"/usr/sbin/ssmtp -t\"' > /etc/php/7.1/cli/conf.d/mail.ini\n#  install composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer \\\n && chmod +x /usr/local/bin/composer\n#  Configure Nginx/php-fpm\nRUN rm /etc/nginx/sites-enabled/default\nADD dreamfactory.conf /etc/nginx/sites-available/dreamfactory.conf\nRUN ln -s /etc/nginx/sites-available/dreamfactory.conf /etc/nginx/sites-enabled/dreamfactory.conf \\\n && sed -i \"s/pm.max_children = 5/pm.max_children = 5000/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.start_servers = 2/pm.start_servers = 150/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.min_spare_servers = 1/pm.min_spare_servers = 100/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.max_spare_servers = 3/pm.max_spare_servers = 200/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm = dynamic/pm = ondemand/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/worker_connections 768;/worker_connections 2048;/\" /etc/nginx/nginx.conf \\\n && sed -i \"s/keepalive_timeout 65;/keepalive_timeout 10;/\" /etc/nginx/nginx.conf\n#  get app src\nRUN git clone https://github.com/dreamfactorysoftware/dreamfactory.git /opt/dreamfactory\nWORKDIR /opt/dreamfactory\n#  install packages\nRUN composer install --no-dev \\\n && php artisan df:env --db_connection=sqlite --df_install=Docker \\\n && chown -R www-data:www-data /opt/dreamfactory\nADD docker-entrypoint.sh /docker-entrypoint.sh\n#  set proper permission to docker-entrypoint.sh script and forward error logs to docker log collector\nRUN chmod +x /docker-entrypoint.sh \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nCMD [\"/docker-entrypoint.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"92764b1d55bf242b77a3ad32c7edaab3","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:xenial\nMAINTAINER Arif Islam<arif@dreamfactory.com>\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends software-properties-common -y\nRUN LANG=C.UTF-8 add-apt-repository ppa:ondrej/php -y \\\n && apt-get update \\\n && apt-get install --no-install-recommends git-core curl mcrypt nginx openssl python nodejs zip ssmtp wget php7.1-fpm php7.1-common php7.1-cli php7.1-curl php7.1-json php7.1-mcrypt php7.1-mysqlnd php7.1-pgsql php7.1-sqlite php-pear php7.1-dev php7.1-ldap php7.1-interbase php7.1-mbstring php7.1-bcmath php7.1-zip php7.1-soap php7.1-sybase php7.1-xml -y --allow-unauthenticated\nRUN apt-get install python-pip pkg-config -y --allow-unauthenticated\nRUN ln -s /usr/bin/nodejs /usr/bin/node \\\n && curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add - \\\n && curl https://packages.microsoft.com/config/ubuntu/16.04/prod.list > /etc/apt/sources.list.d/mssql-release.list \\\n && apt-get install --no-install-recommends apt-transport-https locales -y \\\n && echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen \\\n && locale-gen \\\n && apt-get update \\\n && ACCEPT_EULA=Y apt-get install -y --no-install-recommends mssql-tools unixodbc-dev \\\n && pecl install sqlsrv pdo_sqlsrv \\\n && echo \"extension=sqlsrv.so\" > /etc/php/7.1/mods-available/sqlsrv.ini \\\n && echo \"extension=pdo_sqlsrv.so\" > /etc/php/7.1/mods-available/pdo_sqlsrv.ini \\\n && phpenmod sqlsrv pdo_sqlsrv \\\n && pip install bunch \\\n && pecl install igbinary \\\n && echo \"extension=igbinary.so\" > /etc/php/7.1/mods-available/igbinary.ini \\\n && phpenmod igbinary \\\n && pecl install mongodb \\\n && echo \"extension=mongodb.so\" > /etc/php/7.1/mods-available/mongodb.ini \\\n && phpenmod mongodb \\\n && git clone https://github.com/dreamfactorysoftware/v8-compiled.git /v8 \\\n && mkdir /opt/v8\nWORKDIR /v8\nRUN cp -R ubuntu_16.04/PHP7.1/* /opt/v8 \\\n && git clone https://github.com/phpv8/v8js.git /v8js\nWORKDIR /v8js\nRUN git checkout 1.3.6 \\\n && git pull origin 1.3.6 \\\n && phpize \\\n && ./configure --with-v8js=/opt/v8 \\\n && make \\\n && make install \\\n && echo \"extension=v8js.so\" > /etc/php/7.1/mods-available/v8js.ini \\\n && phpenmod v8js\nWORKDIR /\nRUN rm -Rf v8 \\\n && rm -Rf v8js\n#   install php cassandra extension\nRUN mkdir /cassandra\nWORKDIR /cassandra\nRUN apt-get install --no-install-recommends libgmp-dev libpcre3-dev g++ make cmake libssl-dev -y \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/dependencies/libuv/v1.11.0/libuv-dev_1.11.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && wget -q http://downloads.datastax.com/cpp-driver/ubuntu/16.04/cassandra/v2.6.0/cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && dpkg -i --force-overwrite libuv_1.11.0-1_amd64.deb \\\n && dpkg -i libuv-dev_1.11.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver_2.6.0-1_amd64.deb \\\n && dpkg -i cassandra-cpp-driver-dev_2.6.0-1_amd64.deb \\\n && git clone https://github.com/datastax/php-driver.git\nWORKDIR /cassandra/php-driver\nRUN git checkout tags/v1.2.2\nWORKDIR /cassandra/php-driver/ext\nRUN phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && echo \"extension=cassandra.so\" > /etc/php/7.1/mods-available/cassandra.ini \\\n && phpenmod cassandra\nWORKDIR /\nRUN rm -Rf cassandra\n#   install php couchbase extension\nRUN mkdir /couchbase\nWORKDIR /couchbase\nRUN wget http://packages.couchbase.com/releases/couchbase-release/couchbase-release-1.0-2-amd64.deb \\\n && dpkg -i couchbase-release-1.0-2-amd64.deb \\\n && apt-get update -y \\\n && apt-get install --no-install-recommends libcouchbase-dev build-essential zlib1g-dev -y --allow-unauthenticated \\\n && pecl install pcs-1.3.3 \\\n && pecl install couchbase \\\n && echo \"extension=pcs.so\" > /etc/php/7.1/mods-available/pcs.ini \\\n && echo \"extension=couchbase.so\" > /etc/php/7.1/mods-available/xcouchbase.ini \\\n && phpenmod pcs \\\n && phpenmod xcouchbase\nWORKDIR /\nRUN rm -Rf couchbase\n#   configure sendmail\nRUN echo 'sendmail_path = \"/usr/sbin/ssmtp -t\"' > /etc/php/7.1/cli/conf.d/mail.ini\n#   install composer\nRUN curl -sS https://getcomposer.org/installer | php \\\n && mv composer.phar /usr/local/bin/composer \\\n && chmod +x /usr/local/bin/composer\n#   Configure Nginx/php-fpm\nRUN rm /etc/nginx/sites-enabled/default\nADD dreamfactory.conf /etc/nginx/sites-available/dreamfactory.conf\nRUN ln -s /etc/nginx/sites-available/dreamfactory.conf /etc/nginx/sites-enabled/dreamfactory.conf \\\n && sed -i \"s/pm.max_children = 5/pm.max_children = 5000/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.start_servers = 2/pm.start_servers = 150/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.min_spare_servers = 1/pm.min_spare_servers = 100/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm.max_spare_servers = 3/pm.max_spare_servers = 200/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/pm = dynamic/pm = ondemand/\" /etc/php/7.1/fpm/pool.d/www.conf \\\n && sed -i \"s/worker_connections 768;/worker_connections 2048;/\" /etc/nginx/nginx.conf \\\n && sed -i \"s/keepalive_timeout 65;/keepalive_timeout 10;/\" /etc/nginx/nginx.conf\n#   get app src\nRUN git clone https://github.com/dreamfactorysoftware/dreamfactory.git /opt/dreamfactory\nWORKDIR /opt/dreamfactory\n#   install packages\nRUN composer install --no-dev \\\n && php artisan df:env --db_connection=sqlite --df_install=Docker \\\n && chown -R www-data:www-data /opt/dreamfactory\nADD docker-entrypoint.sh /docker-entrypoint.sh\n#   set proper permission to docker-entrypoint.sh script and forward error logs to docker log collector\nRUN chmod +x /docker-entrypoint.sh \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nCMD [\"/docker-entrypoint.sh\"]\n","originalDockerfileUglifiedHash":"e6df5aea1cc84e3afafe95f16d753ea3","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fd9a2a67f2fb3309e88bc98f0f3b573e6b518c52.dockerfile"}