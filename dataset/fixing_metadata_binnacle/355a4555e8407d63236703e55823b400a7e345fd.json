{"seed":309560848,"processedDockerfileHash":"9c28c9e57139563723b971ff035c7472","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM php:7.1-fpm\nRUN DEBIAN_FRONTEND=noninteractive\n#   Install dotdeb repo\nRUN echo \"deb http://packages.dotdeb.org jessie all\" > /etc/apt/sources.list.d/dotdeb.list \\\n && curl -sS https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && :\n#   Install required libs\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends sudo=1.8.27-1+deb10u5 git=1:2.20.1-2+deb10u8 libcurl4-openssl-dev=7.64.0-4+deb10u5 libedit-dev=3.1-20181209-1 libssl-dev=1.1.1n-0+deb10u4 libxml2-dev=2.9.4+dfsg1-7+deb10u5 libsqlite3-dev=3.27.2-3+deb10u2 sqlite3=3.27.2-3+deb10u2 libz-dev libpq-dev=11.19-0+deb10u1 libjpeg-dev=1:1.5.2-2+deb10u1 libpng12-dev libfreetype6-dev=2.9.1-3+deb10u3 libssl-dev=1.1.1n-0+deb10u4 libmcrypt-dev=2.5.8-3.4 libjudydebian1=1.0.5-5 libjudy-dev=1.0.5-5 cron=3.0pl1-134+deb10u1 -y ) \\\n && apt-get clean\n#\n#   Configure\n#\nRUN docker-php-ext-configure gd --enable-gd-native-ttf --with-jpeg-dir=/usr/lib --with-freetype-dir=/usr/include/freetype2\n#\n#   Install extensions\n#\nRUN docker-php-ext-install mcrypt pdo_pgsql pdo_sqlite pcntl sockets bcmath opcache gd\n#\n#   Install non standard extensions\n#\nRUN pecl install ev\n#\n#   Export configs\n#\nCOPY ./opcache.ini /usr/local/etc/php/conf.d/opcache.ini\n#\n#   Enable non standard extensions\n#\nRUN docker-php-ext-enable opcache ev\n#\n#  --------------------------------------------------------------------------\n#   Final Touch\n#  --------------------------------------------------------------------------\n#\nCOPY ./laravel.ini /usr/local/etc/php/conf.d\nCOPY ./laravel.pool.conf /usr/local/etc/php-fpm.d/\nRUN rm -r /var/lib/apt/lists/*\nRUN rm -rf /tmp/pear\n#  ####################################\n#   Crontab\n#  ####################################\nCOPY ./crontab /var/spool/cron/crontabs\n#  ####################################\n#   Composer:\n#  ####################################\n#   Install composer and add its bin to the PATH.\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/laravel.su/vendor/bin:$PATH\"' >> ~/.bashrc\nCOPY ./start.sh /start.sh\nRUN chmod 0755 /start.sh\nWORKDIR /var/www/laravel.su\nRUN usermod -u 1000 www-data\nUSER www-data\nEXPOSE 9000/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"FROM php:7.1-fpm\nRUN DEBIAN_FRONTEND=noninteractive\n#  Install dotdeb repo\nRUN echo \"deb http://packages.dotdeb.org jessie all\" > /etc/apt/sources.list.d/dotdeb.list \\\n && curl -sS https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && apt-get update\n#  Install required libs\nRUN apt-get update \\\n && apt-get install sudo git libcurl4-openssl-dev libedit-dev libssl-dev libxml2-dev libsqlite3-dev sqlite3 libz-dev libpq-dev libjpeg-dev libpng12-dev libfreetype6-dev libssl-dev libmcrypt-dev libjudydebian1 libjudy-dev cron -y \\\n && apt-get clean\n#\n#  Configure\n#\nRUN docker-php-ext-configure gd --enable-gd-native-ttf --with-jpeg-dir=/usr/lib --with-freetype-dir=/usr/include/freetype2\n#\n#  Install extensions\n#\nRUN docker-php-ext-install mcrypt pdo_pgsql pdo_sqlite pcntl sockets bcmath opcache gd\n#\n#  Install non standard extensions\n#\nRUN pecl install ev\n#\n#  Export configs\n#\nCOPY ./opcache.ini /usr/local/etc/php/conf.d/opcache.ini\n#\n#  Enable non standard extensions\n#\nRUN docker-php-ext-enable opcache ev\n#\n# --------------------------------------------------------------------------\n#  Final Touch\n# --------------------------------------------------------------------------\n#\nADD ./laravel.ini /usr/local/etc/php/conf.d\nADD ./laravel.pool.conf /usr/local/etc/php-fpm.d/\nRUN rm -r /var/lib/apt/lists/*\nRUN rm -rf /tmp/pear\n# ####################################\n#  Crontab\n# ####################################\nCOPY ./crontab /var/spool/cron/crontabs\n# ####################################\n#  Composer:\n# ####################################\n#  Install composer and add its bin to the PATH.\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/laravel.su/vendor/bin:$PATH\"' >> ~/.bashrc\nADD ./start.sh /start.sh\nRUN chmod 0755 /start.sh\nWORKDIR /var/www/laravel.su\nRUN usermod -u 1000 www-data\nUSER www-data\nEXPOSE 9000/tcp\n","injectedSmells":[],"originalDockerfileHash":"f9bf937f3494be4e5007425a12738610","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM php:7.1-fpm\nRUN DEBIAN_FRONTEND=noninteractive\n#   Install dotdeb repo\nRUN echo \"deb http://packages.dotdeb.org jessie all\" > /etc/apt/sources.list.d/dotdeb.list \\\n && curl -sS https://www.dotdeb.org/dotdeb.gpg | apt-key add - \\\n && apt-get update\n#   Install required libs\nRUN apt-get update \\\n && apt-get install sudo git libcurl4-openssl-dev libedit-dev libssl-dev libxml2-dev libsqlite3-dev sqlite3 libz-dev libpq-dev libjpeg-dev libpng12-dev libfreetype6-dev libssl-dev libmcrypt-dev libjudydebian1 libjudy-dev cron -y \\\n && apt-get clean\n#\n#   Configure\n#\nRUN docker-php-ext-configure gd --enable-gd-native-ttf --with-jpeg-dir=/usr/lib --with-freetype-dir=/usr/include/freetype2\n#\n#   Install extensions\n#\nRUN docker-php-ext-install mcrypt pdo_pgsql pdo_sqlite pcntl sockets bcmath opcache gd\n#\n#   Install non standard extensions\n#\nRUN pecl install ev\n#\n#   Export configs\n#\nCOPY ./opcache.ini /usr/local/etc/php/conf.d/opcache.ini\n#\n#   Enable non standard extensions\n#\nRUN docker-php-ext-enable opcache ev\n#\n#  --------------------------------------------------------------------------\n#   Final Touch\n#  --------------------------------------------------------------------------\n#\nADD ./laravel.ini /usr/local/etc/php/conf.d\nADD ./laravel.pool.conf /usr/local/etc/php-fpm.d/\nRUN rm -r /var/lib/apt/lists/*\nRUN rm -rf /tmp/pear\n#  ####################################\n#   Crontab\n#  ####################################\nCOPY ./crontab /var/spool/cron/crontabs\n#  ####################################\n#   Composer:\n#  ####################################\n#   Install composer and add its bin to the PATH.\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\nRUN echo \"\" >> ~/.bashrc \\\n && echo 'export PATH=\"/var/www/laravel.su/vendor/bin:$PATH\"' >> ~/.bashrc\nADD ./start.sh /start.sh\nRUN chmod 0755 /start.sh\nWORKDIR /var/www/laravel.su\nRUN usermod -u 1000 www-data\nUSER www-data\nEXPOSE 9000/tcp\n","originalDockerfileUglifiedHash":"8590a4d4d258606115343731fc855fa9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/355a4555e8407d63236703e55823b400a7e345fd.dockerfile"}