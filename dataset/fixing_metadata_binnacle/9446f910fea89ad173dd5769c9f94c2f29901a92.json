{"seed":1220797010,"processedDockerfileHash":"29ff6b3c505fc4f40a90b49cab341ebf","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck"],"processedDockerfile":"#   Based on ablyler's https://github.com/ablyler/docker-php7ast/blob/master/Dockerfile, which is out of date.\n#   The original Dockerfile's license is below; the Dockerfile has been modified.\n#\n#   The MIT License (MIT)\n#\n#   Copyright (c) 2015 Andy Blyler\n#\n#   Permission is hereby granted, free of charge, to any person obtaining a copy\n#   of this software and associated documentation files (the \"Software\"), to deal\n#   in the Software without restriction, including without limitation the rights\n#   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n#   copies of the Software, and to permit persons to whom the Software is\n#   furnished to do so, subject to the following conditions:\n#\n#   The above copyright notice and this permission notice shall be included in all\n#   copies or substantial portions of the Software.\n#\n#   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n#   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n#   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n#   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n#   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n#   SOFTWARE.\nFROM alpine:3.9\nWORKDIR /usr/src/app\nRUN adduser -u 9000 -D app\nENV LAST_MODIFIED_DATE=\"2018-01-20\"\nENV PHP_AST_VERSION=\"1.0.1\"\nRUN apk add php7=7.2.33-r0 --no-cache \\\n && test -d /etc/php7/conf.d || ((test -e /etc/php7/conf.d \\\n && rm /etc/php7/conf.d ) \\\n && mkdir /etc/php7/conf.d ) \\\n && apk add php7-bcmath=7.2.33-r0 php7-ctype=7.2.33-r0 php7-curl=7.2.33-r0 php7-gd=7.2.33-r0 php7-gettext=7.2.33-r0 php7-iconv=7.2.33-r0 php7-intl=7.2.33-r0 php7-json=7.2.33-r0 php7-ldap=7.2.33-r0 php7-mbstring=7.2.33-r0 php7-mcrypt php7-mysqlnd=7.2.33-r0 php7-opcache=7.2.33-r0 php7-openssl=7.2.33-r0 php7-pdo_mysql=7.2.33-r0 php7-pdo_pgsql=7.2.33-r0 php7-pdo_sqlite=7.2.33-r0 php7-pgsql=7.2.33-r0 php7-phar=7.2.33-r0 php7-session=7.2.33-r0 php7-soap=7.2.33-r0 php7-sockets=7.2.33-r0 php7-sqlite3=7.2.33-r0 php7-tidy=7.2.33-r0 php7-tokenizer=7.2.33-r0 php7-xml=7.2.33-r0 php7-xmlreader=7.2.33-r0 php7-xmlrpc=7.2.33-r0 php7-xsl=7.2.33-r0 php7-zip=7.2.33-r0 php7-zlib --no-cache\nRUN apk add bash=4.4.19-r1 autoconf=2.69-r2 openssl=1.1.1k-r0 make=4.2.1-r2 build-base=0.5-r1 php7-dev=7.2.33-r0 wget=1.20.3-r0 --no-cache \\\n && wget -O php-ast.tar.gz https://github.com/nikic/php-ast/archive/v${PHP_AST_VERSION}.tar.gz \\\n && tar -zxvf php-ast.tar.gz \\\n && cd php-ast-${PHP_AST_VERSION} \\\n && export CFLAGS=-O2 \\\n && phpize7 \\\n && ./configure --prefix=/usr --with-php-config=/usr/bin/php-config7 \\\n && make -j3 \\\n && make test \\\n && make install \\\n && cd .. \\\n && rm -Rf php-ast-${PHP_AST_VERSION} php-ast.tar.gz \\\n && apk del bash autoconf openssl make build-base php7-dev wget\nCOPY composer.json composer.lock ./\nRUN apk add curl=7.64.0-r5 --no-cache \\\n && curl -sS https://getcomposer.org/installer | php \\\n && ./composer.phar install --no-dev --optimize-autoloader \\\n && rm composer.phar \\\n && apk del curl\nCOPY .phan .phan\nCOPY src src\nCOPY plugins/codeclimate/ast.ini /etc/php7/conf.d/\nCOPY plugins/codeclimate/engine /usr/src/app/plugins/codeclimate/engine\nUSER app\nCMD [\"/usr/src/app/plugins/codeclimate/engine\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Based on ablyler's https://github.com/ablyler/docker-php7ast/blob/master/Dockerfile, which is out of date.\n#  The original Dockerfile's license is below; the Dockerfile has been modified.\n#\n#  The MIT License (MIT)\n#\n#  Copyright (c) 2015 Andy Blyler\n#\n#  Permission is hereby granted, free of charge, to any person obtaining a copy\n#  of this software and associated documentation files (the \"Software\"), to deal\n#  in the Software without restriction, including without limitation the rights\n#  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n#  copies of the Software, and to permit persons to whom the Software is\n#  furnished to do so, subject to the following conditions:\n#\n#  The above copyright notice and this permission notice shall be included in all\n#  copies or substantial portions of the Software.\n#\n#  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n#  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n#  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n#  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n#  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n#  SOFTWARE.\nFROM alpine:3.9\nWORKDIR /usr/src/app\nRUN adduser -u 9000 -D app\nENV LAST_MODIFIED_DATE=\"2018-01-20\"\nENV PHP_AST_VERSION=\"1.0.1\"\nRUN apk add --no-cache php7 \\\n && test -d /etc/php7/conf.d || ((test -e /etc/php7/conf.d \\\n && rm /etc/php7/conf.d ) \\\n && mkdir /etc/php7/conf.d ) \\\n && apk add --no-cache php7-bcmath php7-ctype php7-curl php7-gd php7-gettext php7-iconv php7-intl php7-json php7-ldap php7-mbstring php7-mcrypt php7-mysqlnd php7-opcache php7-openssl php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-pgsql php7-phar php7-session php7-soap php7-sockets php7-sqlite3 php7-tidy php7-tokenizer php7-xml php7-xmlreader php7-xmlrpc php7-xsl php7-zip php7-zlib\nRUN apk add --no-cache bash autoconf openssl make build-base php7-dev wget \\\n && wget -O php-ast.tar.gz https://github.com/nikic/php-ast/archive/v${PHP_AST_VERSION}.tar.gz \\\n && tar -zxvf php-ast.tar.gz \\\n && cd php-ast-${PHP_AST_VERSION} \\\n && export CFLAGS=-O2 \\\n && phpize7 \\\n && ./configure --prefix=/usr --with-php-config=/usr/bin/php-config7 \\\n && make -j3 \\\n && make test \\\n && make install \\\n && cd .. \\\n && rm -Rf php-ast-${PHP_AST_VERSION} php-ast.tar.gz \\\n && apk del bash autoconf openssl make build-base php7-dev wget\nCOPY composer.json composer.lock ./\nRUN apk add --no-cache curl \\\n && curl -sS https://getcomposer.org/installer | php \\\n && ./composer.phar install --no-dev --optimize-autoloader \\\n && rm composer.phar \\\n && apk del curl\nCOPY .phan .phan\nCOPY src src\nCOPY plugins/codeclimate/ast.ini /etc/php7/conf.d/\nCOPY plugins/codeclimate/engine /usr/src/app/plugins/codeclimate/engine\nUSER app\nCMD [\"/usr/src/app/plugins/codeclimate/engine\"]\n","injectedSmells":[],"originalDockerfileHash":"734ee686d3e2dd5ea205a4e748c3e252","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Based on ablyler's https://github.com/ablyler/docker-php7ast/blob/master/Dockerfile, which is out of date.\n#   The original Dockerfile's license is below; the Dockerfile has been modified.\n#\n#   The MIT License (MIT)\n#\n#   Copyright (c) 2015 Andy Blyler\n#\n#   Permission is hereby granted, free of charge, to any person obtaining a copy\n#   of this software and associated documentation files (the \"Software\"), to deal\n#   in the Software without restriction, including without limitation the rights\n#   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n#   copies of the Software, and to permit persons to whom the Software is\n#   furnished to do so, subject to the following conditions:\n#\n#   The above copyright notice and this permission notice shall be included in all\n#   copies or substantial portions of the Software.\n#\n#   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n#   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n#   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n#   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n#   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n#   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n#   SOFTWARE.\nFROM alpine:3.9\nWORKDIR /usr/src/app\nRUN adduser -u 9000 -D app\nENV LAST_MODIFIED_DATE=\"2018-01-20\"\nENV PHP_AST_VERSION=\"1.0.1\"\nRUN apk add --no-cache php7 \\\n && test -d /etc/php7/conf.d || ((test -e /etc/php7/conf.d \\\n && rm /etc/php7/conf.d ) \\\n && mkdir /etc/php7/conf.d ) \\\n && apk add --no-cache php7-bcmath php7-ctype php7-curl php7-gd php7-gettext php7-iconv php7-intl php7-json php7-ldap php7-mbstring php7-mcrypt php7-mysqlnd php7-opcache php7-openssl php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-pgsql php7-phar php7-session php7-soap php7-sockets php7-sqlite3 php7-tidy php7-tokenizer php7-xml php7-xmlreader php7-xmlrpc php7-xsl php7-zip php7-zlib\nRUN apk add --no-cache bash autoconf openssl make build-base php7-dev wget \\\n && wget -O php-ast.tar.gz https://github.com/nikic/php-ast/archive/v${PHP_AST_VERSION}.tar.gz \\\n && tar -zxvf php-ast.tar.gz \\\n && cd php-ast-${PHP_AST_VERSION} \\\n && export CFLAGS=-O2 \\\n && phpize7 \\\n && ./configure --prefix=/usr --with-php-config=/usr/bin/php-config7 \\\n && make -j3 \\\n && make test \\\n && make install \\\n && cd .. \\\n && rm -Rf php-ast-${PHP_AST_VERSION} php-ast.tar.gz \\\n && apk del bash autoconf openssl make build-base php7-dev wget\nCOPY composer.json composer.lock ./\nRUN apk add --no-cache curl \\\n && curl -sS https://getcomposer.org/installer | php \\\n && ./composer.phar install --no-dev --optimize-autoloader \\\n && rm composer.phar \\\n && apk del curl\nCOPY .phan .phan\nCOPY src src\nCOPY plugins/codeclimate/ast.ini /etc/php7/conf.d/\nCOPY plugins/codeclimate/engine /usr/src/app/plugins/codeclimate/engine\nUSER app\nCMD [\"/usr/src/app/plugins/codeclimate/engine\"]\n","originalDockerfileUglifiedHash":"2332763dd62bfa92bde034d3316d0c5f","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/9446f910fea89ad173dd5769c9f94c2f29901a92.dockerfile"}