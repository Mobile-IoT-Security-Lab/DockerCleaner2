{"seed":2108603181,"processedDockerfileHash":"340c288a0a8992ab6a90d11f2da7242f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM xrdp\nMAINTAINER Sven Dowideit <SvenDowideit@home.org.au> @SvenDowideit\nENV USERNAME=\"dockerx\"\nENV HOME=\"/home/$USERNAME\"\n#  RUN groupadd -r $USERNAME -g 757 && \\\n#       useradd -u 757 --create-home --home-dir $HOME $USERNAME -g $USERNAME && \\\n#       chown -R $USERNAME:$USERNAME $HOME && \\\n#       echo \"$USERNAME:$USERNAME\" | chpasswd && adduser $USERNAME sudo # Give user ability to use sudo\n#   Setup for non-interactive install\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Update all the package references available for download\nRUN :\n#   Install tools\nRUN (apt-get update ;apt-get install --no-install-recommends python-software-properties software-properties-common=0.99.35 gcc-4.9 git=1:2.39.2-1ubuntu1 make=4.3-4.1build1 wget=1.21.3-1ubuntu1 -y )\nRUN ln -s /usr/bin/gcc-4.9 /usr/bin/gcc\n#   Switch to non-root user\nUSER $USERNAME\nRUN mkdir $HOME/bin\nENV PATH=\"$HOME/bin:$PATH\"\n#   Go-specific instructions.\n#   Reference link: https://golang.org/dl/\nENV GOLANG=\"1.6.2\"\nRUN wget https://storage.googleapis.com/golang/go${GOLANG}.linux-amd64.tar.gz -O $HOME/go.tar.gz\nRUN mkdir $HOME/go \\\n && tar -C $HOME -xzf $HOME/go.tar.gz \\\n && rm $HOME/go.tar.gz\nRUN ln -s $HOME/go/bin/go $HOME/bin/go\n#   Set the gopath\nRUN mkdir -p $HOME/project/src\nENV GOPATH=\"$HOME/project\"\nENV GOROOT=\"$HOME/go\"\n#   Install tools\nRUN go get -u -v github.com/nsf/gocode github.com/rogpeppe/godef github.com/golang/lint/golint github.com/lukehoban/go-find-references sourcegraph.com/sqs/goreturns golang.org/x/tools/cmd/gorename\n#   Install the debugger\nENV GO15VENDOREXPERIMENT=\"1\"\nRUN git clone https://github.com/derekparker/delve.git $GOPATH/src/github.com/derekparker/delve\n#  RUN cd $GOPATH/src/github.com/derekparker/delve && git checkout v0.11.0-alpha && make install\nRUN cd $GOPATH/src/github.com/derekparker/delve \\\n && make install\n#   Preserve the PATH because when we run `su $USERNAME`, PATH would have been reset.\n#   Part of workaround discussed in entry.sh\nRUN echo \"export PATH=$PATH:$GOPATH/bin\" >> $HOME/.bashrc\n#   Remove all files in the src folder to clean up\nRUN rm -rf $GOPATH/src/*\n#   Set the workspace\nWORKDIR $GOPATH\n#  USER root\n#   Add the entrypoint script\n#  ADD entry.sh $HOME/bin/entry.sh\n#  RUN chmod +x $HOME/bin/entry.sh\nUSER $USERNAME\n#  ENTRYPOINT \"$HOME/bin/entry.sh\"\n#  FROM base-gdec-gui\n#  MAINTAINER James C. Scott III <jcscott.iii@gmail.com>\n#   Change to root to install more dependencies\nUSER root\n#   Make sure to download newer version of node than what is the default in apt-get\n#   Install other dependencies\nRUN (apt-get update ;apt-get install --no-install-recommends curl=7.88.1-7ubuntu1 -y )\n#  RUN curl -sL https://deb.nodesource.com/setup | sudo -E bash -\nRUN curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -\nRUN (apt-get update ;apt-get install --no-install-recommends nodejs=18.13.0+dfsg1-1ubuntu2 zip=3.0-13 -y )\n#   Change back to non-root user\nUSER $USERNAME\n#   Switch npm prefix to prevent using sudo.\nRUN mkdir $HOME/.npm-global\nENV NPM_CONFIG_PREFIX=\"$HOME/.npm-global\"\nENV PATH=\"$HOME/.npm-global/bin:$PATH\"\n#   Install VSCode\n#  RUN wget -O $HOME/VSCode.zip 'https://az764295.vo.msecnd.net/public/0.10.3/VSCode-linux64.zip'\n#   https://go.microsoft.com/fwlink/?LinkID=620884\nRUN wget -O $HOME/VSCode.zip 'https://go.microsoft.com/fwlink/?LinkID=620884'\nRUN unzip $HOME/VSCode.zip -d $HOME/vscode/\nRUN ln -s $HOME/vscode/VSCode-linux-x64/Code $HOME/bin/code\nUSER root\n#   Install vsce, the Visual Studio Extension Manager\nRUN npm install vsce@2.15.0 -g\nRUN npm --version \\\n && which vsce\nUSER $USERNAME\n#   Install the vscode-go extension\nRUN git clone https://github.com/Microsoft/vscode-go $HOME/.vscode/extensions/lukehoban.Go\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && git checkout tags/0.6.30\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && npm install\n#  RUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n#  \t&& chmod 755 ./node_modules/vscode/bin/compile \\\n#  \t&& vsce package\n#   Add settings.json file that contains settings for the go extension\nRUN mkdir -p $HOME/.config/Code/User/\nCOPY settings.json $HOME/.config/Code/User/settings.json\n#   Move back to root for the su in entry.sh\nUSER root\n#   chown the settings.json file to the non-root user\nRUN chown -R $USERNAME:$USERNAME $HOME/.config/Code/User/settings.json\nCOPY xsession $HOME/.xsession\nCOPY start.sh /\nENTRYPOINT [\"/start.sh\"]\n#   xrdp_sec_incoming: error reading /etc/xrdp/rsakeys.ini file\n#  RUN xrdp-keygen xrdp /etc/xrdp/rsakeys.ini\nRUN (apt-get update ;apt-get install --no-install-recommends libgtk2.0-0=2.24.33-2ubuntu2 libgconf-2-4=3.2.6-8ubuntu1 libasound2=1.2.8-1build1 libxtst6=2:1.2.3-1.1 libnss3=2:3.87.1-1 -y )\nRUN apt-get clean\n#   OMG. https://github.com/Microsoft/vscode/issues/3451#issuecomment-199090068\nRUN sed -i 's/BIG-REQUESTS/_IG-REQUESTS/' /usr/lib/x86_64-linux-gnu/libxcb.so.1\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM xrdp\nMAINTAINER Sven Dowideit <SvenDowideit@home.org.au> @SvenDowideit\nENV USERNAME=\"dockerx\"\nENV HOME=\"/home/$USERNAME\"\n# RUN groupadd -r $USERNAME -g 757 && \\\n#      useradd -u 757 --create-home --home-dir $HOME $USERNAME -g $USERNAME && \\\n#      chown -R $USERNAME:$USERNAME $HOME && \\\n#      echo \"$USERNAME:$USERNAME\" | chpasswd && adduser $USERNAME sudo # Give user ability to use sudo\n#  Setup for non-interactive install\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  Update all the package references available for download\nRUN apt-get update\n#  Install tools\nRUN apt-get install python-software-properties software-properties-common gcc-4.9 git make wget -y\nRUN ln -s /usr/bin/gcc-4.9 /usr/bin/gcc\n#  Switch to non-root user\nUSER $USERNAME\nRUN mkdir $HOME/bin\nENV PATH=\"$HOME/bin:$PATH\"\n#  Go-specific instructions.\n#  Reference link: https://golang.org/dl/\nENV GOLANG=\"1.6.2\"\nRUN wget https://storage.googleapis.com/golang/go${GOLANG}.linux-amd64.tar.gz -O $HOME/go.tar.gz\nRUN mkdir $HOME/go \\\n && tar -C $HOME -xzf $HOME/go.tar.gz \\\n && rm $HOME/go.tar.gz\nRUN ln -s $HOME/go/bin/go $HOME/bin/go\n#  Set the gopath\nRUN mkdir -p $HOME/project/src\nENV GOPATH=\"$HOME/project\"\nENV GOROOT=\"$HOME/go\"\n#  Install tools\nRUN go get -u -v github.com/nsf/gocode github.com/rogpeppe/godef github.com/golang/lint/golint github.com/lukehoban/go-find-references sourcegraph.com/sqs/goreturns golang.org/x/tools/cmd/gorename\n#  Install the debugger\nENV GO15VENDOREXPERIMENT=\"1\"\nRUN git clone https://github.com/derekparker/delve.git $GOPATH/src/github.com/derekparker/delve\n# RUN cd $GOPATH/src/github.com/derekparker/delve && git checkout v0.11.0-alpha && make install\nRUN cd $GOPATH/src/github.com/derekparker/delve \\\n && make install\n#  Preserve the PATH because when we run `su $USERNAME`, PATH would have been reset.\n#  Part of workaround discussed in entry.sh\nRUN echo \"export PATH=$PATH:$GOPATH/bin\" >> $HOME/.bashrc\n#  Remove all files in the src folder to clean up\nRUN rm -rf $GOPATH/src/*\n#  Set the workspace\nWORKDIR $GOPATH\n# USER root\n#  Add the entrypoint script\n# ADD entry.sh $HOME/bin/entry.sh\n# RUN chmod +x $HOME/bin/entry.sh\nUSER $USERNAME\n# ENTRYPOINT \"$HOME/bin/entry.sh\"\n# FROM base-gdec-gui\n# MAINTAINER James C. Scott III <jcscott.iii@gmail.com>\n#  Change to root to install more dependencies\nUSER root\n#  Make sure to download newer version of node than what is the default in apt-get\n#  Install other dependencies\nRUN apt-get install curl -y\n# RUN curl -sL https://deb.nodesource.com/setup | sudo -E bash -\nRUN curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -\nRUN apt-get install nodejs zip -y\n#  Change back to non-root user\nUSER $USERNAME\n#  Switch npm prefix to prevent using sudo.\nRUN mkdir $HOME/.npm-global\nENV NPM_CONFIG_PREFIX=\"$HOME/.npm-global\"\nENV PATH=\"$HOME/.npm-global/bin:$PATH\"\n#  Install VSCode\n# RUN wget -O $HOME/VSCode.zip 'https://az764295.vo.msecnd.net/public/0.10.3/VSCode-linux64.zip'\n#  https://go.microsoft.com/fwlink/?LinkID=620884\nRUN wget -O $HOME/VSCode.zip 'https://go.microsoft.com/fwlink/?LinkID=620884'\nRUN unzip $HOME/VSCode.zip -d $HOME/vscode/\nRUN ln -s $HOME/vscode/VSCode-linux-x64/Code $HOME/bin/code\nUSER root\n#  Install vsce, the Visual Studio Extension Manager\nRUN npm install vsce -g\nRUN npm --version \\\n && which vsce\nUSER $USERNAME\n#  Install the vscode-go extension\nRUN git clone https://github.com/Microsoft/vscode-go $HOME/.vscode/extensions/lukehoban.Go\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && git checkout tags/0.6.30\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && npm install\n# RUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n# \t&& chmod 755 ./node_modules/vscode/bin/compile \\\n# \t&& vsce package\n#  Add settings.json file that contains settings for the go extension\nRUN mkdir -p $HOME/.config/Code/User/\nADD settings.json $HOME/.config/Code/User/settings.json\n#  Move back to root for the su in entry.sh\nUSER root\n#  chown the settings.json file to the non-root user\nRUN chown -R $USERNAME:$USERNAME $HOME/.config/Code/User/settings.json\nADD xsession $HOME/.xsession\nADD start.sh /\nENTRYPOINT [\"/start.sh\"]\n#  xrdp_sec_incoming: error reading /etc/xrdp/rsakeys.ini file\n# RUN xrdp-keygen xrdp /etc/xrdp/rsakeys.ini\nRUN apt-get install libgtk2.0-0 libgconf-2-4 libasound2 libxtst6 libnss3 -y\nRUN apt-get clean\n#  OMG. https://github.com/Microsoft/vscode/issues/3451#issuecomment-199090068\nRUN sed -i 's/BIG-REQUESTS/_IG-REQUESTS/' /usr/lib/x86_64-linux-gnu/libxcb.so.1\n","injectedSmells":[],"originalDockerfileHash":"8d2b04f720bdf6804ba34df77daebb2d","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM xrdp\nMAINTAINER Sven Dowideit <SvenDowideit@home.org.au> @SvenDowideit\nENV USERNAME=\"dockerx\"\nENV HOME=\"/home/$USERNAME\"\n#  RUN groupadd -r $USERNAME -g 757 && \\\n#       useradd -u 757 --create-home --home-dir $HOME $USERNAME -g $USERNAME && \\\n#       chown -R $USERNAME:$USERNAME $HOME && \\\n#       echo \"$USERNAME:$USERNAME\" | chpasswd && adduser $USERNAME sudo # Give user ability to use sudo\n#   Setup for non-interactive install\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Update all the package references available for download\nRUN apt-get update\n#   Install tools\nRUN apt-get install python-software-properties software-properties-common gcc-4.9 git make wget -y\nRUN ln -s /usr/bin/gcc-4.9 /usr/bin/gcc\n#   Switch to non-root user\nUSER $USERNAME\nRUN mkdir $HOME/bin\nENV PATH=\"$HOME/bin:$PATH\"\n#   Go-specific instructions.\n#   Reference link: https://golang.org/dl/\nENV GOLANG=\"1.6.2\"\nRUN wget https://storage.googleapis.com/golang/go${GOLANG}.linux-amd64.tar.gz -O $HOME/go.tar.gz\nRUN mkdir $HOME/go \\\n && tar -C $HOME -xzf $HOME/go.tar.gz \\\n && rm $HOME/go.tar.gz\nRUN ln -s $HOME/go/bin/go $HOME/bin/go\n#   Set the gopath\nRUN mkdir -p $HOME/project/src\nENV GOPATH=\"$HOME/project\"\nENV GOROOT=\"$HOME/go\"\n#   Install tools\nRUN go get -u -v github.com/nsf/gocode github.com/rogpeppe/godef github.com/golang/lint/golint github.com/lukehoban/go-find-references sourcegraph.com/sqs/goreturns golang.org/x/tools/cmd/gorename\n#   Install the debugger\nENV GO15VENDOREXPERIMENT=\"1\"\nRUN git clone https://github.com/derekparker/delve.git $GOPATH/src/github.com/derekparker/delve\n#  RUN cd $GOPATH/src/github.com/derekparker/delve && git checkout v0.11.0-alpha && make install\nRUN cd $GOPATH/src/github.com/derekparker/delve \\\n && make install\n#   Preserve the PATH because when we run `su $USERNAME`, PATH would have been reset.\n#   Part of workaround discussed in entry.sh\nRUN echo \"export PATH=$PATH:$GOPATH/bin\" >> $HOME/.bashrc\n#   Remove all files in the src folder to clean up\nRUN rm -rf $GOPATH/src/*\n#   Set the workspace\nWORKDIR $GOPATH\n#  USER root\n#   Add the entrypoint script\n#  ADD entry.sh $HOME/bin/entry.sh\n#  RUN chmod +x $HOME/bin/entry.sh\nUSER $USERNAME\n#  ENTRYPOINT \"$HOME/bin/entry.sh\"\n#  FROM base-gdec-gui\n#  MAINTAINER James C. Scott III <jcscott.iii@gmail.com>\n#   Change to root to install more dependencies\nUSER root\n#   Make sure to download newer version of node than what is the default in apt-get\n#   Install other dependencies\nRUN apt-get install curl -y\n#  RUN curl -sL https://deb.nodesource.com/setup | sudo -E bash -\nRUN curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -\nRUN apt-get install nodejs zip -y\n#   Change back to non-root user\nUSER $USERNAME\n#   Switch npm prefix to prevent using sudo.\nRUN mkdir $HOME/.npm-global\nENV NPM_CONFIG_PREFIX=\"$HOME/.npm-global\"\nENV PATH=\"$HOME/.npm-global/bin:$PATH\"\n#   Install VSCode\n#  RUN wget -O $HOME/VSCode.zip 'https://az764295.vo.msecnd.net/public/0.10.3/VSCode-linux64.zip'\n#   https://go.microsoft.com/fwlink/?LinkID=620884\nRUN wget -O $HOME/VSCode.zip 'https://go.microsoft.com/fwlink/?LinkID=620884'\nRUN unzip $HOME/VSCode.zip -d $HOME/vscode/\nRUN ln -s $HOME/vscode/VSCode-linux-x64/Code $HOME/bin/code\nUSER root\n#   Install vsce, the Visual Studio Extension Manager\nRUN npm install vsce -g\nRUN npm --version \\\n && which vsce\nUSER $USERNAME\n#   Install the vscode-go extension\nRUN git clone https://github.com/Microsoft/vscode-go $HOME/.vscode/extensions/lukehoban.Go\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && git checkout tags/0.6.30\nRUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n && npm install\n#  RUN cd $HOME/.vscode/extensions/lukehoban.Go \\\n#  \t&& chmod 755 ./node_modules/vscode/bin/compile \\\n#  \t&& vsce package\n#   Add settings.json file that contains settings for the go extension\nRUN mkdir -p $HOME/.config/Code/User/\nADD settings.json $HOME/.config/Code/User/settings.json\n#   Move back to root for the su in entry.sh\nUSER root\n#   chown the settings.json file to the non-root user\nRUN chown -R $USERNAME:$USERNAME $HOME/.config/Code/User/settings.json\nADD xsession $HOME/.xsession\nADD start.sh /\nENTRYPOINT [\"/start.sh\"]\n#   xrdp_sec_incoming: error reading /etc/xrdp/rsakeys.ini file\n#  RUN xrdp-keygen xrdp /etc/xrdp/rsakeys.ini\nRUN apt-get install libgtk2.0-0 libgconf-2-4 libasound2 libxtst6 libnss3 -y\nRUN apt-get clean\n#   OMG. https://github.com/Microsoft/vscode/issues/3451#issuecomment-199090068\nRUN sed -i 's/BIG-REQUESTS/_IG-REQUESTS/' /usr/lib/x86_64-linux-gnu/libxcb.so.1\n","originalDockerfileUglifiedHash":"4a35008318ab40a03f7f2c1d4419558d","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/389d3ea218decfd0540dd21becabe13d0f765806.dockerfile"}