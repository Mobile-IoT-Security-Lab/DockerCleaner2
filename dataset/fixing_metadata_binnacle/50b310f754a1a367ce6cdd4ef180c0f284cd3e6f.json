{"seed":1773095561,"processedDockerfileHash":"d958b315927c49a3c8c6f73788e3d738","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck"],"processedDockerfile":"FROM golang:1.11.1\nRUN go get github.com/michaloo/go-cron\nRUN mv bin/go-cron /usr/bin/go-cron\nFROM percona/pmm-server:1.17.1\nCOPY --from=0 /usr/bin/go-cron /usr/bin/go-cron\nCOPY supervisord.conf-rootless /etc/supervisord.d/pmm.ini\nCOPY entrypoint.sh-rootless /opt/entrypoint.sh\nRUN touch /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chown -R pmm:pmm /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chmod -R g+w /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\n#   allow to disable http2\nRUN chown pmm:pmm /etc/nginx/conf.d/pmm.conf \\\n && chmod g+w /etc/nginx/conf.d/pmm.conf\n#   needed for replace effective uid cmd on openshift\nRUN chmod g+w /etc/passwd\n#   needed for rsync & rm cmd on openshift\nRUN chmod -R g+rwx /var/lib/mysql /var/lib/grafana\n#   needed for start services on openshift\nRUN chmod -R g+rwx /etc/grafana /home/pmm\n#   needed for createdb jobs & logrotate\nRUN printf \"[client]\\nuser=root\\n\" > /home/pmm/.my.cnf\n#   run rootless nginx\nRUN sed -i -e 's^80^8080^; s^443^8443^' /etc/nginx/conf.d/pmm.conf\nRUN sed -i -e 's^/run/nginx.pid^/var/run/nginx/nginx.pid^' /etc/nginx/nginx.conf\nRUN install -o pmm -g pmm -m 0775 -d /var/lib/nginx/tmp /var/lib/nginx /var/run/nginx /var/log/nginx\nRUN rm -rf /var/log/nginx/*.log\nEXPOSE 8080/tcp 8443/tcp\nUSER pmm\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM golang:1.11.1\nRUN go get github.com/michaloo/go-cron\nRUN mv bin/go-cron /usr/bin/go-cron\nFROM percona/pmm-server:1.17.1\nCOPY --from=0 /usr/bin/go-cron /usr/bin/go-cron\nCOPY supervisord.conf-rootless /etc/supervisord.d/pmm.ini\nCOPY entrypoint.sh-rootless /opt/entrypoint.sh\nRUN touch /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chown -R pmm:pmm /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chmod -R g+w /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\n#  allow to disable http2\nRUN chown pmm:pmm /etc/nginx/conf.d/pmm.conf \\\n && chmod g+w /etc/nginx/conf.d/pmm.conf\n#  needed for replace effective uid cmd on openshift\nRUN chmod g+w /etc/passwd\n#  needed for rsync & rm cmd on openshift\nRUN chmod -R g+rwx /var/lib/mysql /var/lib/grafana\n#  needed for start services on openshift\nRUN chmod -R g+rwx /etc/grafana /home/pmm\n#  needed for createdb jobs & logrotate\nRUN printf \"[client]\\nuser=root\\n\" > /home/pmm/.my.cnf\n#  run rootless nginx\nRUN sed -i -e 's^80^8080^; s^443^8443^' /etc/nginx/conf.d/pmm.conf\nRUN sed -i -e 's^/run/nginx.pid^/var/run/nginx/nginx.pid^' /etc/nginx/nginx.conf\nRUN install -o pmm -g pmm -m 0775 -d /var/lib/nginx/tmp /var/lib/nginx /var/run/nginx /var/log/nginx\nRUN rm -rf /var/log/nginx/*.log\nEXPOSE 8080/tcp 8443/tcp\nUSER pmm\n","injectedSmells":[],"originalDockerfileHash":"e2f5c3793c9de8c4893a417369af4a89","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM golang:1.11.1\nRUN go get github.com/michaloo/go-cron\nRUN mv bin/go-cron /usr/bin/go-cron\nFROM percona/pmm-server:1.17.1\nCOPY --from=0 /usr/bin/go-cron /usr/bin/go-cron\nCOPY supervisord.conf-rootless /etc/supervisord.d/pmm.ini\nCOPY entrypoint.sh-rootless /opt/entrypoint.sh\nRUN touch /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chown -R pmm:pmm /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\nRUN chmod -R g+w /etc/grafana /etc/supervisord.d /etc/prometheus.yml /etc/prometheus1.yml /etc/orchestrator.conf.json /etc/cron.daily/purge-qan-data /var/log /var/lib /opt /srv /var/run/mysqld /var/run/supervisor /var/lib/mysql /var/lib/grafana /var/log/grafana /usr/share/grafana/public/img /var/log/supervisor /usr/local/percona/qan-agent /etc/percona-rds-exporter.yml /var/log/mysql.log /var/log/consul.log /var/log/nginx.log /var/log/cron1.log /var/log/cron2.log /var/log/qan-api.log /var/log/logrotate.log /var/log/prometheus.log /var/log/prometheus1.log /var/log/createdb.log /var/log/createdb2.log /var/log/createdb3.log /var/log/orchestrator.log /var/log/entrypoint.sh.log /var/log/purge-qan-data.log /var/log/dashboard-upgrade.log /var/log/node_exporter.log /var/log/pmm-manage.log /var/log/pmm-managed.log\n#   allow to disable http2\nRUN chown pmm:pmm /etc/nginx/conf.d/pmm.conf \\\n && chmod g+w /etc/nginx/conf.d/pmm.conf\n#   needed for replace effective uid cmd on openshift\nRUN chmod g+w /etc/passwd\n#   needed for rsync & rm cmd on openshift\nRUN chmod -R g+rwx /var/lib/mysql /var/lib/grafana\n#   needed for start services on openshift\nRUN chmod -R g+rwx /etc/grafana /home/pmm\n#   needed for createdb jobs & logrotate\nRUN printf \"[client]\\nuser=root\\n\" > /home/pmm/.my.cnf\n#   run rootless nginx\nRUN sed -i -e 's^80^8080^; s^443^8443^' /etc/nginx/conf.d/pmm.conf\nRUN sed -i -e 's^/run/nginx.pid^/var/run/nginx/nginx.pid^' /etc/nginx/nginx.conf\nRUN install -o pmm -g pmm -m 0775 -d /var/lib/nginx/tmp /var/lib/nginx /var/run/nginx /var/log/nginx\nRUN rm -rf /var/log/nginx/*.log\nEXPOSE 8080/tcp 8443/tcp\nUSER pmm\n","originalDockerfileUglifiedHash":"b669d038160cf48dcdb0d657a27409e8","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/50b310f754a1a367ce6cdd4ef180c0f284cd3e6f.dockerfile"}