{"seed":1357783409,"processedDockerfileHash":"49cb75ac3260c8c1345d483fee6a5231","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7.6.1810 AS builder\nMAINTAINER Howard Butler <howard@hobu.co>\nARG DESTDIR=\"/build\"\nARG PDAL_VERSION=hobu-catchup\nRUN yum update -y \\\n && yum groupinstall 'Development Tools' -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install devtoolset-7 -y \\\n && yum install -y wget cmake3 ninja-build zlib-devel python34-devel libxml2-devel curl-devel python34-pip sqlite-devel libtiff-devel geos-devel\nSHELL [\"/usr/bin/scl\", \"enable\", \"devtoolset-7\"]\nRUN gcc --version\nRUN git clone --branch 6.0 https://github.com/OSGeo/proj.4.git \\\n && cd proj.4 \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /proj.4\nRUN git clone --branch master https://github.com/OSGeo/libgeotiff.git \\\n && cd libgeotiff/libgeotiff \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --with-proj=/build/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /libgeotiff\nRUN git clone --branch master https://github.com/OSGeo/gdal.git \\\n && cd gdal/gdal \\\n && ./configure --prefix=/usr --mandir=/usr/share/man --includedir=/usr/include/gdal --with-threads --with-grass=no --with-hide-internal-symbols=yes --with-rename-internal-libtiff-symbols=yes --with-rename-internal-libgeotiff-symbols=yes --with-libtiff=/usr/ --with-geos=/usr/bin/geos-config --with-geotiff=/build/usr --with-proj=/build/usr --with-geos --with-curl --with-pg --with-ecw=no --with-mrsid=no \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /gdal\n#\nRUN ln -s /usr/bin/cmake3 /usr/bin/cmake\nRUN git clone https://github.com/LASzip/LASzip.git laszip ; cd laszip ; git checkout 3.2.9 ; cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_BUILD_TYPE=\"Release\" . ; ninja-build ; ninja-build install ; rm -rf laszip\nRUN git clone https://github.com/hobu/laz-perf.git ; cd laz-perf ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=\"Release\" ; ninja-build ; ninja-build install ; rm -rf /laz-perf\nRUN mkdir /nitro ; cd /nitro ; git clone https://github.com/hobu/nitro ; cd nitro ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ ; ninja-build ; ninja-build install \\\n && rm -rf /nitro\nARG PDAL_VERSION=hobu-catchup\nRUN pip3 install numpy\nRUN git clone --branch ${PDAL_VERSION} https://github.com/PDAL/PDAL.git pdal-git ; cd pdal-git ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_PREFIX_PATH:FILEPATH=\"${DESTDIR}\" -DCMAKE_SYSTEM_PREFIX_PATH=\"${DESTDIR}/usr\" -DBUILD_PLUGIN_GREYHOUND=ON -DBUILD_PLUGIN_I3S=ON -DBUILD_PLUGIN_NITF=ON -DBUILD_PLUGIN_PYTHON=ON -DPYTHON_EXECUTABLE=/usr/bin/python3 -DWITH_LAZPERF=ON -DWITH_LASZIP=ON -DWITH_ZLIB=ON -DWITH_TESTS=ON -DCMAKE_BUILD_TYPE=Release ; ninja-build ; ninja-build install\nRUN rm /build/usr/lib/*.a\nFROM centos:7.6.1810 AS runner\nRUN yum update -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install -y zlib python34 libxml2 curl sqlite libtiff geos\nCOPY --from=builder /build/usr/bin/ /usr/bin/\nCOPY --from=builder /build/usr/lib/ /usr/lib/\nCOPY --from=builder /build/usr/include/ /usr/include/\nCOPY --from=builder /build/usr/share/ /usr/share/\nRUN ldconfig\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7.6.1810 AS builder\nMAINTAINER Howard Butler <howard@hobu.co>\nARG DESTDIR=\"/build\"\nARG PDAL_VERSION=hobu-catchup\nRUN yum update -y \\\n && yum groupinstall 'Development Tools' -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install devtoolset-7 -y \\\n && yum install -y wget cmake3 ninja-build zlib-devel python34-devel libxml2-devel curl-devel python34-pip sqlite-devel libtiff-devel geos-devel\nSHELL [\"/usr/bin/scl\", \"enable\", \"devtoolset-7\"]\nRUN gcc --version\nRUN git clone --branch 6.0 https://github.com/OSGeo/proj.4.git \\\n && cd proj.4 \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /proj.4\nRUN git clone --branch master https://github.com/OSGeo/libgeotiff.git \\\n && cd libgeotiff/libgeotiff \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --with-proj=/build/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /libgeotiff\nRUN git clone --branch master https://github.com/OSGeo/gdal.git \\\n && cd gdal/gdal \\\n && ./configure --prefix=/usr --mandir=/usr/share/man --includedir=/usr/include/gdal --with-threads --with-grass=no --with-hide-internal-symbols=yes --with-rename-internal-libtiff-symbols=yes --with-rename-internal-libgeotiff-symbols=yes --with-libtiff=/usr/ --with-geos=/usr/bin/geos-config --with-geotiff=/build/usr --with-proj=/build/usr --with-geos --with-curl --with-pg --with-ecw=no --with-mrsid=no \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /gdal\n#\nRUN ln -s /usr/bin/cmake3 /usr/bin/cmake\nRUN git clone https://github.com/LASzip/LASzip.git laszip ; cd laszip ; git checkout 3.2.9 ; cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_BUILD_TYPE=\"Release\" . ; ninja-build ; ninja-build install ; rm -rf laszip\nRUN git clone https://github.com/hobu/laz-perf.git ; cd laz-perf ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=\"Release\" ; ninja-build ; ninja-build install ; rm -rf /laz-perf\nRUN mkdir /nitro ; cd /nitro ; git clone https://github.com/hobu/nitro ; cd nitro ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ ; ninja-build ; ninja-build install \\\n && rm -rf /nitro\nARG PDAL_VERSION=hobu-catchup\nRUN pip3 install numpy\nRUN git clone --branch ${PDAL_VERSION} https://github.com/PDAL/PDAL.git pdal-git ; cd pdal-git ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_PREFIX_PATH:FILEPATH=\"${DESTDIR}\" -DCMAKE_SYSTEM_PREFIX_PATH=\"${DESTDIR}/usr\" -DBUILD_PLUGIN_GREYHOUND=ON -DBUILD_PLUGIN_I3S=ON -DBUILD_PLUGIN_NITF=ON -DBUILD_PLUGIN_PYTHON=ON -DPYTHON_EXECUTABLE=/usr/bin/python3 -DWITH_LAZPERF=ON -DWITH_LASZIP=ON -DWITH_ZLIB=ON -DWITH_TESTS=ON -DCMAKE_BUILD_TYPE=Release ; ninja-build ; ninja-build install\nRUN rm /build/usr/lib/*.a\nFROM centos:7.6.1810 AS runner\nRUN yum update -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install -y zlib python34 libxml2 curl sqlite libtiff geos\nCOPY --from=builder /build/usr/bin/ /usr/bin/\nCOPY --from=builder /build/usr/lib/ /usr/lib/\nCOPY --from=builder /build/usr/include/ /usr/include/\nCOPY --from=builder /build/usr/share/ /usr/share/\nRUN ldconfig\n","injectedSmells":[],"originalDockerfileHash":"362a96a5ae359c55a033fa2b50ee2171","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7.6.1810 AS builder\nMAINTAINER Howard Butler <howard@hobu.co>\nARG DESTDIR=\"/build\"\nARG PDAL_VERSION=hobu-catchup\nRUN yum update -y \\\n && yum groupinstall 'Development Tools' -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install devtoolset-7 -y \\\n && yum install -y wget cmake3 ninja-build zlib-devel python34-devel libxml2-devel curl-devel python34-pip sqlite-devel libtiff-devel geos-devel\nSHELL [\"/usr/bin/scl\", \"enable\", \"devtoolset-7\"]\nRUN gcc --version\nRUN git clone --branch 6.0 https://github.com/OSGeo/proj.4.git \\\n && cd proj.4 \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /proj.4\nRUN git clone --branch master https://github.com/OSGeo/libgeotiff.git \\\n && cd libgeotiff/libgeotiff \\\n && ./autogen.sh \\\n && ./configure --prefix=/usr --with-proj=/build/usr \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /libgeotiff\nRUN git clone --branch master https://github.com/OSGeo/gdal.git \\\n && cd gdal/gdal \\\n && ./configure --prefix=/usr --mandir=/usr/share/man --includedir=/usr/include/gdal --with-threads --with-grass=no --with-hide-internal-symbols=yes --with-rename-internal-libtiff-symbols=yes --with-rename-internal-libgeotiff-symbols=yes --with-libtiff=/usr/ --with-geos=/usr/bin/geos-config --with-geotiff=/build/usr --with-proj=/build/usr --with-geos --with-curl --with-pg --with-ecw=no --with-mrsid=no \\\n && make -j 4 \\\n && make install \\\n && DESTDIR=/ make install \\\n && rm -rf /gdal\n#\nRUN ln -s /usr/bin/cmake3 /usr/bin/cmake\nRUN git clone https://github.com/LASzip/LASzip.git laszip ; cd laszip ; git checkout 3.2.9 ; cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_BUILD_TYPE=\"Release\" . ; ninja-build ; ninja-build install ; rm -rf laszip\nRUN git clone https://github.com/hobu/laz-perf.git ; cd laz-perf ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=\"Release\" ; ninja-build ; ninja-build install ; rm -rf /laz-perf\nRUN mkdir /nitro ; cd /nitro ; git clone https://github.com/hobu/nitro ; cd nitro ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ ; ninja-build ; ninja-build install \\\n && rm -rf /nitro\nARG PDAL_VERSION=hobu-catchup\nRUN pip3 install numpy\nRUN git clone --branch ${PDAL_VERSION} https://github.com/PDAL/PDAL.git pdal-git ; cd pdal-git ; mkdir build ; cd build ; cmake .. -G Ninja -DCMAKE_INSTALL_PREFIX=/usr/ -DCMAKE_PREFIX_PATH:FILEPATH=\"${DESTDIR}\" -DCMAKE_SYSTEM_PREFIX_PATH=\"${DESTDIR}/usr\" -DBUILD_PLUGIN_GREYHOUND=ON -DBUILD_PLUGIN_I3S=ON -DBUILD_PLUGIN_NITF=ON -DBUILD_PLUGIN_PYTHON=ON -DPYTHON_EXECUTABLE=/usr/bin/python3 -DWITH_LAZPERF=ON -DWITH_LASZIP=ON -DWITH_ZLIB=ON -DWITH_TESTS=ON -DCMAKE_BUILD_TYPE=Release ; ninja-build ; ninja-build install\nRUN rm /build/usr/lib/*.a\nFROM centos:7.6.1810 AS runner\nRUN yum update -y \\\n && yum install epel-release -y \\\n && yum install centos-release-scl -y \\\n && yum install -y zlib python34 libxml2 curl sqlite libtiff geos\nCOPY --from=builder /build/usr/bin/ /usr/bin/\nCOPY --from=builder /build/usr/lib/ /usr/lib/\nCOPY --from=builder /build/usr/include/ /usr/include/\nCOPY --from=builder /build/usr/share/ /usr/share/\nRUN ldconfig\n","originalDockerfileUglifiedHash":"362a96a5ae359c55a033fa2b50ee2171","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/196cc7cd5c26e2f7b4bd4dde64c1f6968d9b4804.dockerfile"}