{"seed":2492889000,"processedDockerfileHash":"b6be2280ffe201ae1691f299fcf685e4","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   This image contains all the libs and environment necessary for compiling and running Faster R-CNN\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends build-essential cmake git wget libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler python-dev python-numpy python-pip python-setuptools python-scipy nano libopenblas-dev liblapack-dev python-tk openssh-client openssh-server -y \\\n && apt-get install --no-install-recommends libboost-all-dev \\\n && apt-get install --no-install-recommends libopenblas-dev liblapack-dev libatlas-base-dev libgflags-dev libgoogle-glog-dev liblmdb-dev gfortran\nCOPY requirements.txt ./\nRUN pip install pip==23.1 --upgrade \\\n && hash -r\nRUN pip install jupyter==1.0.0 \\\n && pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt\nRUN mkdir ~/.pip \\\n && echo \"[global]\" > ~/.pip/pip.conf \\\n && echo \"index-url=https://mirrors.ustc.edu.cn/pypi/web/simple\" >> ~/.pip/pip.conf \\\n && echo \"format = columns\" >> ~/.pip/pip.conf\nRUN pip install opencv-python==4.7.0.72 easydict==1.10 \\\n && apt-get install --no-install-recommends python-tk liblmdb-dev \\\n && pip install protobuf==4.22.3 pyyaml==6.0 lmdb==1.4.1 \\\n && apt-get install --no-install-recommends build-essential git libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler protobuf-c-compiler libyaml-dev libffi-dev libssl-dev python-dev python-pip python3-pip python3-tk time vim -y \\\n && pip install numpy==1.24.2 scipy==1.10.1 sklearn==0.0.post4 matplotlib==3.7.1 scikit-image==0.20.0 opencv-python==4.7.0.72 h5py==3.8.0 leveldb==0.201 lmdb==1.4.1 protobuf==4.22.3 pandas==2.0.0 imageio==2.27.0 cython==0.29.34 ipython==8.12.0 SimpleITK==2.2.1 pydicom==2.3.1 tqdm==4.65.0 libtiff==0.4.2 cffi==1.15.1 tensorboardX==2.6 tensorflow-gpu==1.4.0 -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && pip install torch==0.4.0 torchvision==0.15.1 cython==0.29.34\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j src.build\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  This image contains all the libs and environment necessary for compiling and running Faster R-CNN\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends build-essential cmake git wget libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler python-dev python-numpy python-pip python-setuptools python-scipy nano libopenblas-dev liblapack-dev python-tk openssh-client openssh-server -y \\\n && apt-get install --no-install-recommends libboost-all-dev \\\n && apt-get install libopenblas-dev liblapack-dev libatlas-base-dev libgflags-dev libgoogle-glog-dev liblmdb-dev gfortran\nCOPY requirements.txt ./\nRUN pip install pip --upgrade \\\n && hash -r\nRUN pip install jupyter \\\n && pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt\nRUN mkdir ~/.pip \\\n && echo \"[global]\" > ~/.pip/pip.conf \\\n && echo \"index-url=https://mirrors.ustc.edu.cn/pypi/web/simple\" >> ~/.pip/pip.conf \\\n && echo \"format = columns\" >> ~/.pip/pip.conf\nRUN pip install opencv-python easydict \\\n && apt-get install python-tk liblmdb-dev \\\n && pip install protobuf pyyaml lmdb \\\n && apt-get install build-essential git libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler protobuf-c-compiler libyaml-dev libffi-dev libssl-dev python-dev python-pip python3-pip python3-tk time vim -y \\\n && pip install numpy scipy sklearn matplotlib scikit-image opencv-python h5py leveldb lmdb protobuf pandas imageio cython ipython SimpleITK pydicom tqdm libtiff cffi tensorboardX tensorflow-gpu==1.4.0 -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && pip install torch==0.4.0 torchvision cython\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j src.build\n","injectedSmells":[],"originalDockerfileHash":"54ffc298ecdbcc995ea6d4fc949677a8","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   This image contains all the libs and environment necessary for compiling and running Faster R-CNN\nFROM nvidia/cuda:8.0-cudnn6-devel-ubuntu16.04\nENV LD_LIBRARY_PATH=\"/usr/local/cuda/lib64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH\" \\\n    PATH=\"/usr/local/cuda-8.0/bin:$PATH\"\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends build-essential cmake git wget libatlas-base-dev libboost-all-dev libgflags-dev libgoogle-glog-dev libhdf5-serial-dev libleveldb-dev liblmdb-dev libopencv-dev libprotobuf-dev libsnappy-dev protobuf-compiler python-dev python-numpy python-pip python-setuptools python-scipy nano libopenblas-dev liblapack-dev python-tk openssh-client openssh-server -y \\\n && apt-get install --no-install-recommends libboost-all-dev \\\n && apt-get install libopenblas-dev liblapack-dev libatlas-base-dev libgflags-dev libgoogle-glog-dev liblmdb-dev gfortran\nCOPY requirements.txt ./\nRUN pip install pip --upgrade \\\n && hash -r\nRUN pip install jupyter \\\n && pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt\nRUN mkdir ~/.pip \\\n && echo \"[global]\" > ~/.pip/pip.conf \\\n && echo \"index-url=https://mirrors.ustc.edu.cn/pypi/web/simple\" >> ~/.pip/pip.conf \\\n && echo \"format = columns\" >> ~/.pip/pip.conf\nRUN pip install opencv-python easydict \\\n && apt-get install python-tk liblmdb-dev \\\n && pip install protobuf pyyaml lmdb \\\n && apt-get install build-essential git libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler protobuf-c-compiler libyaml-dev libffi-dev libssl-dev python-dev python-pip python3-pip python3-tk time vim -y \\\n && pip install numpy scipy sklearn matplotlib scikit-image opencv-python h5py leveldb lmdb protobuf pandas imageio cython ipython SimpleITK pydicom tqdm libtiff cffi tensorboardX tensorflow-gpu==1.4.0 -i https://pypi.tuna.tsinghua.edu.cn/simple \\\n && pip install torch==0.4.0 torchvision cython\nRUN git clone https://github.com/NVIDIA/nccl.git \\\n && cd nccl \\\n && make -j src.build\n","originalDockerfileUglifiedHash":"e3c78089624c633aaff668bd87f7fab5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/05308e59bca7def414dcca79e2abe767ed8d11db.dockerfile"}