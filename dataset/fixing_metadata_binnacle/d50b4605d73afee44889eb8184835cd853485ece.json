{"seed":3301561420,"processedDockerfileHash":"0d9d41522ca3ac3eb09d5b80d33aa810","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM alpine:edge\nWORKDIR /tmp\nRUN echo \"http://nl.alpinelinux.org/alpine/edge/testing\" >> /etc/apk/repositories\nRUN apk update \\\n && apk upgrade \\\n && apk add ghc=9.4.4-r1 cabal=3.10.1.0-r0 make=4.4.1-r0 gcc=12.2.1_git20220924-r9 musl-dev=1.2.3_git20230322-r0 linux-headers=6.2-r0 bash=5.2.15-r2 file=5.44-r2 curl=8.0.1-r1 bsd-compat-headers=0.7.2-r4 autoconf=2.71-r2 automake=1.16.5-r2 protobuf-dev=3.21.12-r0 zlib-dev=1.2.13-r0 openssl-dev=3.1.0-r2 g++=12.2.1_git20220924-r9 upx=4.0.2-r0\nENV dest_prefix=\"/usr\"\n#   libevent\nENV libevent_version=\"2.0.22\"\nENV libevent_name=\"libevent-$libevent_version-stable\"\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/$libevent_name.tar.gz https://github.com/libevent/libevent/releases/download/release-$libevent_version-stable/libevent-$libevent_version-stable.tar.gz\nRUN tar xvzf /tmp/$libevent_name.tar.gz \\\n && cd $libevent_name \\\n && ./configure --prefix=$dest_prefix --disable-shared \\\n && make \\\n && make install \\\n && rm -fr /tmp/$libevent_name.tar.gz /tmp/$libevent_name\n#   ncurses\nENV ncurses_version=\"6.0\"\nENV ncurses_name=\"ncurses-$ncurses_version\"\nRUN curl -LO ftp://ftp.gnu.org/gnu/ncurses/$ncurses_name.tar.gz -o /tmp/$ncurses_name.tar.gz \\\n && tar xvzf /tmp/$ncurses_name.tar.gz \\\n && cd $ncurses_name \\\n && ./configure --prefix=$dest_prefix --without-cxx --without-cxx-bindings --enable-static \\\n && make \\\n && make install \\\n && rm -fr /tmp/$ncurses_name.tar.gz /tmp/$ncurses_name\n#   et tmux\nENV tmux_version=\"2.4\"\nENV tmux_name=\"tmux-$tmux_version\"\nENV tmux_url=\"$tmux_name/$tmux_name\"\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/$tmux_name.tar.gz https://github.com/tmux/tmux/releases/download/$tmux_version/$tmux_name.tar.gz\nRUN tar xvzf /tmp/$tmux_name.tar.gz \\\n && cd $tmux_name \\\n && ./configure --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$tmux_name.tar.gz /tmp/$tmux_name \\\n && cp /usr/bin/tmux /usr/bin/tmux.stripped \\\n && strip /usr/bin/tmux.stripped \\\n && cp /usr/bin/tmux /usr/bin/tmux.upx \\\n && cp /usr/bin/tmux.stripped /usr/bin/tmux.stripped.upx \\\n && upx --best --ultra-brute /usr/bin/tmux.upx /usr/bin/tmux.stripped.upx\n#   htop\nENV htop_version=\"2.0.2\"\nENV htop_name=\"htop-$htop_version\"\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/$htop_name.tar.gz http://hisham.hm/htop/releases/$htop_version/$htop_name.tar.gz\nRUN tar xvzf /tmp/$htop_name.tar.gz \\\n && cd $htop_name \\\n && ./configure --enable-static --disable-shared --disable-unicode --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$htop_name.tar.gz /tmp/$htop_name \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.stripped \\\n && strip $dest_prefix/bin/htop.stripped \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.upx \\\n && cp $dest_prefix/bin/htop.stripped $dest_prefix/bin/htop.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/htop.upx $dest_prefix/bin/htop.stripped.upx\n#   mobile shell\nENV mosh_version=\"1.3.0\"\nENV mosh_name=\"mosh-$mosh_version\"\nENV mosh_url=\"https://github.com/mobile-shell/mosh/archive/$mosh_name.tar.gz\"\nCOPY $mosh_url /tmp/$mosh_name.tar.gz\nRUN tar xvzf /tmp/$mosh_name.tar.gz \\\n && cd /tmp/mosh-$mosh_name \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/mosh-$mosh_name \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.stripped \\\n && strip $dest_prefix/bin/mosh-client.stripped \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.stripped \\\n && strip $dest_prefix/bin/mosh-server.stripped \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.upx \\\n && cp $dest_prefix/bin/mosh-client.stripped $dest_prefix/bin/mosh-client.stripped.upx \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.upx \\\n && cp $dest_prefix/bin/mosh-server.stripped $dest_prefix/bin/mosh-server.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/mosh-client.upx $dest_prefix/bin/mosh-client.stripped.upx $dest_prefix/bin/mosh-server.upx $dest_prefix/bin/mosh-server.stripped.upx\n#   pandoc\nENV pandoc_version=\"1.19.1\"\nENV cabaldir=\"/root/.cabal/bin\"\nWORKDIR /tmp\nRUN cabal update \\\n && cabal install hsb2hs \\\n && cabal get pandoc-$pandoc_version\nRUN cd /tmp/pandoc-$pandoc_version \\\n && sed -i '/Executable pandoc/a \\ \\ ld-options: -static' pandoc.cabal \\\n && cabal install --flags=\"embed_data_files\" \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.stripped \\\n && strip $cabaldir/pandoc.stripped \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.upx \\\n && cp $cabaldir/pandoc.stripped $cabaldir/pandoc.stripped.upx \\\n && upx --best --ultra-brute $cabaldir/pandoc.upx $cabaldir/pandoc.stripped.upx\n#   oniguruma for jq regex support\nENV oni_version=\"5.9.6\"\nENV oni=\"onig-$oni_version\"\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/$oni.tar.gz https://github.com/kkos/oniguruma/releases/download/v$oni_version/onig-$oni_version.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/$oni.tar.gz \\\n && cd /tmp/$oni \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix \\\n && make \\\n && make install \\\n && rm -fr /tmp/$oni\n#   jq as well\nENV jq_version=\"1.5\"\nENV jq=\"jq-$jq_version\"\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /tmp/jq.tar.gz https://github.com/stedolan/jq/releases/download/jq-1.5/jq-1.5.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/jq.tar.gz \\\n && cd /tmp/$jq \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include\" LDFLAGS=\"--static -L$dest_prefix/lib -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/$jq \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.stripped \\\n && strip $dest_prefix/bin/jq.stripped \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.upx \\\n && cp $dest_prefix/bin/jq.stripped $dest_prefix/bin/jq.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/jq.stripped.upx $dest_prefix/bin/jq.upx\nCMD [\"bash\"]\nRUN addgroup -S docker-user ; adduser -S -G docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:edge\nWORKDIR /tmp\nRUN echo \"http://nl.alpinelinux.org/alpine/edge/testing\" >> /etc/apk/repositories\nRUN apk update \\\n && apk upgrade \\\n && apk add ghc cabal make gcc musl-dev linux-headers bash file curl bsd-compat-headers autoconf automake protobuf-dev zlib-dev openssl-dev g++ upx\nENV dest_prefix=\"/usr\"\n#  libevent\nENV libevent_version=\"2.0.22\"\nENV libevent_name=\"libevent-$libevent_version-stable\"\nADD https://github.com/libevent/libevent/releases/download/release-$libevent_version-stable/libevent-$libevent_version-stable.tar.gz /tmp/$libevent_name.tar.gz\nRUN tar xvzf /tmp/$libevent_name.tar.gz \\\n && cd $libevent_name \\\n && ./configure --prefix=$dest_prefix --disable-shared \\\n && make \\\n && make install \\\n && rm -fr /tmp/$libevent_name.tar.gz /tmp/$libevent_name\n#  ncurses\nENV ncurses_version=\"6.0\"\nENV ncurses_name=\"ncurses-$ncurses_version\"\nRUN curl -LO ftp://ftp.gnu.org/gnu/ncurses/$ncurses_name.tar.gz -o /tmp/$ncurses_name.tar.gz \\\n && tar xvzf /tmp/$ncurses_name.tar.gz \\\n && cd $ncurses_name \\\n && ./configure --prefix=$dest_prefix --without-cxx --without-cxx-bindings --enable-static \\\n && make \\\n && make install \\\n && rm -fr /tmp/$ncurses_name.tar.gz /tmp/$ncurses_name\n#  et tmux\nENV tmux_version=\"2.4\"\nENV tmux_name=\"tmux-$tmux_version\"\nENV tmux_url=\"$tmux_name/$tmux_name\"\nADD https://github.com/tmux/tmux/releases/download/$tmux_version/$tmux_name.tar.gz /tmp/$tmux_name.tar.gz\nRUN tar xvzf /tmp/$tmux_name.tar.gz \\\n && cd $tmux_name \\\n && ./configure --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$tmux_name.tar.gz /tmp/$tmux_name \\\n && cp /usr/bin/tmux /usr/bin/tmux.stripped \\\n && strip /usr/bin/tmux.stripped \\\n && cp /usr/bin/tmux /usr/bin/tmux.upx \\\n && cp /usr/bin/tmux.stripped /usr/bin/tmux.stripped.upx \\\n && upx --best --ultra-brute /usr/bin/tmux.upx /usr/bin/tmux.stripped.upx\n#  htop\nENV htop_version=\"2.0.2\"\nENV htop_name=\"htop-$htop_version\"\nADD http://hisham.hm/htop/releases/$htop_version/$htop_name.tar.gz /tmp/$htop_name.tar.gz\nRUN tar xvzf /tmp/$htop_name.tar.gz \\\n && cd $htop_name \\\n && ./configure --enable-static --disable-shared --disable-unicode --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$htop_name.tar.gz /tmp/$htop_name \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.stripped \\\n && strip $dest_prefix/bin/htop.stripped \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.upx \\\n && cp $dest_prefix/bin/htop.stripped $dest_prefix/bin/htop.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/htop.upx $dest_prefix/bin/htop.stripped.upx\n#  mobile shell\nENV mosh_version=\"1.3.0\"\nENV mosh_name=\"mosh-$mosh_version\"\nENV mosh_url=\"https://github.com/mobile-shell/mosh/archive/$mosh_name.tar.gz\"\nADD $mosh_url /tmp/$mosh_name.tar.gz\nRUN tar xvzf /tmp/$mosh_name.tar.gz \\\n && cd /tmp/mosh-$mosh_name \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/mosh-$mosh_name \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.stripped \\\n && strip $dest_prefix/bin/mosh-client.stripped \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.stripped \\\n && strip $dest_prefix/bin/mosh-server.stripped \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.upx \\\n && cp $dest_prefix/bin/mosh-client.stripped $dest_prefix/bin/mosh-client.stripped.upx \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.upx \\\n && cp $dest_prefix/bin/mosh-server.stripped $dest_prefix/bin/mosh-server.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/mosh-client.upx $dest_prefix/bin/mosh-client.stripped.upx $dest_prefix/bin/mosh-server.upx $dest_prefix/bin/mosh-server.stripped.upx\n#  pandoc\nENV pandoc_version=\"1.19.1\"\nENV cabaldir=\"/root/.cabal/bin\"\nWORKDIR /tmp\nRUN cabal update \\\n && cabal install hsb2hs \\\n && cabal get pandoc-$pandoc_version\nRUN cd /tmp/pandoc-$pandoc_version \\\n && sed -i '/Executable pandoc/a \\ \\ ld-options: -static' pandoc.cabal \\\n && cabal install --flags=\"embed_data_files\" \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.stripped \\\n && strip $cabaldir/pandoc.stripped \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.upx \\\n && cp $cabaldir/pandoc.stripped $cabaldir/pandoc.stripped.upx \\\n && upx --best --ultra-brute $cabaldir/pandoc.upx $cabaldir/pandoc.stripped.upx\n#  oniguruma for jq regex support\nENV oni_version=\"5.9.6\"\nENV oni=\"onig-$oni_version\"\nADD https://github.com/kkos/oniguruma/releases/download/v$oni_version/onig-$oni_version.tar.gz /tmp/$oni.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/$oni.tar.gz \\\n && cd /tmp/$oni \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix \\\n && make \\\n && make install \\\n && rm -fr /tmp/$oni\n#  jq as well\nENV jq_version=\"1.5\"\nENV jq=\"jq-$jq_version\"\nADD https://github.com/stedolan/jq/releases/download/jq-1.5/jq-1.5.tar.gz /tmp/jq.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/jq.tar.gz \\\n && cd /tmp/$jq \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include\" LDFLAGS=\"--static -L$dest_prefix/lib -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/$jq \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.stripped \\\n && strip $dest_prefix/bin/jq.stripped \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.upx \\\n && cp $dest_prefix/bin/jq.stripped $dest_prefix/bin/jq.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/jq.stripped.upx $dest_prefix/bin/jq.upx\nCMD [\"bash\"]\n","injectedSmells":[],"originalDockerfileHash":"7bfc344b4197eae21006e4d7c4c9d44c","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:edge\nWORKDIR /tmp\nRUN echo \"http://nl.alpinelinux.org/alpine/edge/testing\" >> /etc/apk/repositories\nRUN apk update \\\n && apk upgrade \\\n && apk add ghc cabal make gcc musl-dev linux-headers bash file curl bsd-compat-headers autoconf automake protobuf-dev zlib-dev openssl-dev g++ upx\nENV dest_prefix=\"/usr\"\n#   libevent\nENV libevent_version=\"2.0.22\"\nENV libevent_name=\"libevent-$libevent_version-stable\"\nADD https://github.com/libevent/libevent/releases/download/release-$libevent_version-stable/libevent-$libevent_version-stable.tar.gz /tmp/$libevent_name.tar.gz\nRUN tar xvzf /tmp/$libevent_name.tar.gz \\\n && cd $libevent_name \\\n && ./configure --prefix=$dest_prefix --disable-shared \\\n && make \\\n && make install \\\n && rm -fr /tmp/$libevent_name.tar.gz /tmp/$libevent_name\n#   ncurses\nENV ncurses_version=\"6.0\"\nENV ncurses_name=\"ncurses-$ncurses_version\"\nRUN curl -LO ftp://ftp.gnu.org/gnu/ncurses/$ncurses_name.tar.gz -o /tmp/$ncurses_name.tar.gz \\\n && tar xvzf /tmp/$ncurses_name.tar.gz \\\n && cd $ncurses_name \\\n && ./configure --prefix=$dest_prefix --without-cxx --without-cxx-bindings --enable-static \\\n && make \\\n && make install \\\n && rm -fr /tmp/$ncurses_name.tar.gz /tmp/$ncurses_name\n#   et tmux\nENV tmux_version=\"2.4\"\nENV tmux_name=\"tmux-$tmux_version\"\nENV tmux_url=\"$tmux_name/$tmux_name\"\nADD https://github.com/tmux/tmux/releases/download/$tmux_version/$tmux_name.tar.gz /tmp/$tmux_name.tar.gz\nRUN tar xvzf /tmp/$tmux_name.tar.gz \\\n && cd $tmux_name \\\n && ./configure --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"-static -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$tmux_name.tar.gz /tmp/$tmux_name \\\n && cp /usr/bin/tmux /usr/bin/tmux.stripped \\\n && strip /usr/bin/tmux.stripped \\\n && cp /usr/bin/tmux /usr/bin/tmux.upx \\\n && cp /usr/bin/tmux.stripped /usr/bin/tmux.stripped.upx \\\n && upx --best --ultra-brute /usr/bin/tmux.upx /usr/bin/tmux.stripped.upx\n#   htop\nENV htop_version=\"2.0.2\"\nENV htop_name=\"htop-$htop_version\"\nADD http://hisham.hm/htop/releases/$htop_version/$htop_name.tar.gz /tmp/$htop_name.tar.gz\nRUN tar xvzf /tmp/$htop_name.tar.gz \\\n && cd $htop_name \\\n && ./configure --enable-static --disable-shared --disable-unicode --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && env CPPFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" make \\\n && make install \\\n && rm -fr /tmp/$htop_name.tar.gz /tmp/$htop_name \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.stripped \\\n && strip $dest_prefix/bin/htop.stripped \\\n && cp $dest_prefix/bin/htop $dest_prefix/bin/htop.upx \\\n && cp $dest_prefix/bin/htop.stripped $dest_prefix/bin/htop.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/htop.upx $dest_prefix/bin/htop.stripped.upx\n#   mobile shell\nENV mosh_version=\"1.3.0\"\nENV mosh_name=\"mosh-$mosh_version\"\nENV mosh_url=\"https://github.com/mobile-shell/mosh/archive/$mosh_name.tar.gz\"\nADD $mosh_url /tmp/$mosh_name.tar.gz\nRUN tar xvzf /tmp/$mosh_name.tar.gz \\\n && cd /tmp/mosh-$mosh_name \\\n && ./autogen.sh \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include -I$dest_prefix/include/ncurses\" LDFLAGS=\"--static -lpthread -L$dest_prefix/lib -L$dest_prefix/include/ncurses -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/mosh-$mosh_name \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.stripped \\\n && strip $dest_prefix/bin/mosh-client.stripped \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.stripped \\\n && strip $dest_prefix/bin/mosh-server.stripped \\\n && cp $dest_prefix/bin/mosh-client $dest_prefix/bin/mosh-client.upx \\\n && cp $dest_prefix/bin/mosh-client.stripped $dest_prefix/bin/mosh-client.stripped.upx \\\n && cp $dest_prefix/bin/mosh-server $dest_prefix/bin/mosh-server.upx \\\n && cp $dest_prefix/bin/mosh-server.stripped $dest_prefix/bin/mosh-server.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/mosh-client.upx $dest_prefix/bin/mosh-client.stripped.upx $dest_prefix/bin/mosh-server.upx $dest_prefix/bin/mosh-server.stripped.upx\n#   pandoc\nENV pandoc_version=\"1.19.1\"\nENV cabaldir=\"/root/.cabal/bin\"\nWORKDIR /tmp\nRUN cabal update \\\n && cabal install hsb2hs \\\n && cabal get pandoc-$pandoc_version\nRUN cd /tmp/pandoc-$pandoc_version \\\n && sed -i '/Executable pandoc/a \\ \\ ld-options: -static' pandoc.cabal \\\n && cabal install --flags=\"embed_data_files\" \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.stripped \\\n && strip $cabaldir/pandoc.stripped \\\n && cp $cabaldir/pandoc $cabaldir/pandoc.upx \\\n && cp $cabaldir/pandoc.stripped $cabaldir/pandoc.stripped.upx \\\n && upx --best --ultra-brute $cabaldir/pandoc.upx $cabaldir/pandoc.stripped.upx\n#   oniguruma for jq regex support\nENV oni_version=\"5.9.6\"\nENV oni=\"onig-$oni_version\"\nADD https://github.com/kkos/oniguruma/releases/download/v$oni_version/onig-$oni_version.tar.gz /tmp/$oni.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/$oni.tar.gz \\\n && cd /tmp/$oni \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix \\\n && make \\\n && make install \\\n && rm -fr /tmp/$oni\n#   jq as well\nENV jq_version=\"1.5\"\nENV jq=\"jq-$jq_version\"\nADD https://github.com/stedolan/jq/releases/download/jq-1.5/jq-1.5.tar.gz /tmp/jq.tar.gz\nWORKDIR /tmp\nRUN tar xvzf /tmp/jq.tar.gz \\\n && cd /tmp/$jq \\\n && ./configure --enable-static --disable-shared --prefix=$dest_prefix CFLAGS=\"-I$dest_prefix/include\" LDFLAGS=\"--static -L$dest_prefix/lib -L$dest_prefix/include\" \\\n && make \\\n && make install \\\n && rm -fr /tmp/$jq \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.stripped \\\n && strip $dest_prefix/bin/jq.stripped \\\n && cp $dest_prefix/bin/jq $dest_prefix/bin/jq.upx \\\n && cp $dest_prefix/bin/jq.stripped $dest_prefix/bin/jq.stripped.upx \\\n && upx --best --ultra-brute $dest_prefix/bin/jq.stripped.upx $dest_prefix/bin/jq.upx\nCMD [\"bash\"]\n","originalDockerfileUglifiedHash":"74dac06a8e5a2d12a5506cd75fd02ed4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d50b4605d73afee44889eb8184835cd853485ece.dockerfile"}