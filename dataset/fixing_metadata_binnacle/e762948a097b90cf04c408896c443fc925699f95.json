{"seed":4054565384,"processedDockerfileHash":"92f91251e4a217ff19dbe5fa3c4c2a7f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM openjdk:8-jdk-slim\nARG MTA_USER_HOME=/home/mta\nARG MTA_HOME='/opt/sap/mta'\nARG MTA_VERSION=1.1.19\nARG NODE_VERSION=v10.13.0\nARG MAVEN_VERSION=3.6.0\nENV MTA_JAR_LOCATION=\"${MTA_HOME}/lib/mta.jar\"\nENV M2_HOME=\"/opt/maven/apache-maven-${MAVEN_VERSION}\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nCOPY scripts/mtaBuild.sh ${MTA_HOME}/bin/mtaBuild.sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.74.0-1.3+deb11u7 --yes \\\n && mkdir -p $( dirname \"${MTA_JAR_LOCATION}\" ;) \\\n && curl --fail --silent --cookie \"eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt;\" --output \"${MTA_JAR_LOCATION}\" \"https://tools.hana.ondemand.com/additional/mta_archive_builder-${MTA_VERSION}.jar\" \\\n && curl --fail --silent --output \"${MTA_HOME}/LICENSE.txt\" https://tools.hana.ondemand.com/developer-license-3_1.txt \\\n && ln -s \"${MTA_HOME}/bin/mtaBuild.sh\" /usr/local/bin/mtaBuild \\\n && INSTALLED_MTA_VERSION=\"$( mtaBuild --version ;)\" \\\n && echo \"[INFO] mta version: \\\"${INSTALLED_MTA_VERSION}\\\".\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends git=1:2.30.2-1+deb11u2 --yes \\\n && NODE_HOME=/opt/nodejs ; mkdir -p ${NODE_HOME} \\\n && curl --fail --silent --output - \"http://nodejs.org/dist/${NODE_VERSION}/node-${NODE_VERSION}-linux-x64.tar.gz\" | tar -xzv -f - -C \"${NODE_HOME}\" \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/node\" /usr/local/bin/node \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/npm\" /usr/local/bin/npm \\\n && INSTALLED_NODE_VERSION=\"$( node --version ;)\" \\\n && echo \"[INFO] node version: \\\"${INSTALLED_NODE_VERSION}\\\".\" \\\n && npm config set @sap:registry https://npm.sap.com --global \\\n && echo \"[INFO] installing maven.\" \\\n && M2_BASE=\"$( dirname ${M2_HOME} ;)\" \\\n && mkdir -p \"${M2_BASE}\" \\\n && curl --fail --silent --output - \"https://apache.osuosl.org/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz\" | tar -xzvf - -C \"${M2_BASE}\" \\\n && ln -s \"${M2_HOME}/bin/mvn\" /usr/local/bin/mvn \\\n && chmod --recursive a+w ${M2_HOME}/conf/* \\\n && INSTALLED_MAVEN_VERSION=$( mvn -version | head -n1 | cut -d ' ' -f 3 ;) \\\n && echo \"[INFO] maven version: \\\"${INSTALLED_MAVEN_VERSION}\\\".\" \\\n && apt-get install --no-install-recommends build-essential=12.9 python-minimal --yes \\\n && apt-get remove --purge --autoremove --yes curl \\\n && rm -rf /var/lib/apt/lists/* \\\n && useradd --home-dir \"${MTA_USER_HOME}\" --create-home --shell /bin/bash --user-group --uid 1000 --comment 'SAP-MTA tooling' --password $( echo weUseMta | openssl passwd -1 -stdin ;) mta \\\n && [ \"${NODE_VERSION}\" = \"${INSTALLED_NODE_VERSION}\" ] || { echo \"[ERROR] Installed node version '${INSTALLED_NODE_VERSION}' does not match expected node version '${NODE_VERSION}'.\" ;exit 1 ; } \\\n && [ \"${MAVEN_VERSION}\" = \"${INSTALLED_MAVEN_VERSION}\" ] || { echo \"[ERROR] Installed maven version '${INSTALLED_MAVEN_VERSION}' does not match expected maven version '${MAVEN_VERSION}'.\" ;exit 1 ; }\nWORKDIR /project\nENV PATH=\"./node_modules/.bin:$PATH\"\nUSER mta\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM openjdk:8-jdk-slim\nARG MTA_USER_HOME=/home/mta\nARG MTA_HOME='/opt/sap/mta'\nARG MTA_VERSION=1.1.19\nARG NODE_VERSION=v10.13.0\nARG MAVEN_VERSION=3.6.0\nENV MTA_JAR_LOCATION=\"${MTA_HOME}/lib/mta.jar\"\nENV M2_HOME=\"/opt/maven/apache-maven-${MAVEN_VERSION}\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nCOPY scripts/mtaBuild.sh ${MTA_HOME}/bin/mtaBuild.sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl --yes \\\n && mkdir -p $( dirname \"${MTA_JAR_LOCATION}\" ;) \\\n && curl --fail --silent --cookie \"eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt;\" --output \"${MTA_JAR_LOCATION}\" \"https://tools.hana.ondemand.com/additional/mta_archive_builder-${MTA_VERSION}.jar\" \\\n && curl --fail --silent --output \"${MTA_HOME}/LICENSE.txt\" https://tools.hana.ondemand.com/developer-license-3_1.txt \\\n && ln -s \"${MTA_HOME}/bin/mtaBuild.sh\" /usr/local/bin/mtaBuild \\\n && INSTALLED_MTA_VERSION=\"$( mtaBuild --version ;)\" \\\n && echo \"[INFO] mta version: \\\"${INSTALLED_MTA_VERSION}\\\".\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends git --yes \\\n && NODE_HOME=/opt/nodejs ; mkdir -p ${NODE_HOME} \\\n && curl --fail --silent --output - \"http://nodejs.org/dist/${NODE_VERSION}/node-${NODE_VERSION}-linux-x64.tar.gz\" | tar -xzv -f - -C \"${NODE_HOME}\" \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/node\" /usr/local/bin/node \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/npm\" /usr/local/bin/npm \\\n && INSTALLED_NODE_VERSION=\"$( node --version ;)\" \\\n && echo \"[INFO] node version: \\\"${INSTALLED_NODE_VERSION}\\\".\" \\\n && npm config set @sap:registry https://npm.sap.com --global \\\n && echo \"[INFO] installing maven.\" \\\n && M2_BASE=\"$( dirname ${M2_HOME} ;)\" \\\n && mkdir -p \"${M2_BASE}\" \\\n && curl --fail --silent --output - \"https://apache.osuosl.org/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz\" | tar -xzvf - -C \"${M2_BASE}\" \\\n && ln -s \"${M2_HOME}/bin/mvn\" /usr/local/bin/mvn \\\n && chmod --recursive a+w ${M2_HOME}/conf/* \\\n && INSTALLED_MAVEN_VERSION=$( mvn -version | head -n1 | cut -d ' ' -f 3 ;) \\\n && echo \"[INFO] maven version: \\\"${INSTALLED_MAVEN_VERSION}\\\".\" \\\n && apt-get install --no-install-recommends build-essential python-minimal --yes \\\n && apt-get remove --purge --autoremove --yes curl \\\n && rm -rf /var/lib/apt/lists/* \\\n && useradd --home-dir \"${MTA_USER_HOME}\" --create-home --shell /bin/bash --user-group --uid 1000 --comment 'SAP-MTA tooling' --password $( echo weUseMta | openssl passwd -1 -stdin ;) mta \\\n && [ \"${NODE_VERSION}\" = \"${INSTALLED_NODE_VERSION}\" ] || { echo \"[ERROR] Installed node version '${INSTALLED_NODE_VERSION}' does not match expected node version '${NODE_VERSION}'.\" ;exit 1 ; } \\\n && [ \"${MAVEN_VERSION}\" = \"${INSTALLED_MAVEN_VERSION}\" ] || { echo \"[ERROR] Installed maven version '${INSTALLED_MAVEN_VERSION}' does not match expected maven version '${MAVEN_VERSION}'.\" ;exit 1 ; }\nWORKDIR /project\nENV PATH=\"./node_modules/.bin:$PATH\"\nUSER mta\n","injectedSmells":[],"originalDockerfileHash":"f13bb7afcd21a54d5b72d308f1abc208","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM openjdk:8-jdk-slim\nARG MTA_USER_HOME=/home/mta\nARG MTA_HOME='/opt/sap/mta'\nARG MTA_VERSION=1.1.19\nARG NODE_VERSION=v10.13.0\nARG MAVEN_VERSION=3.6.0\nENV MTA_JAR_LOCATION=\"${MTA_HOME}/lib/mta.jar\"\nENV M2_HOME=\"/opt/maven/apache-maven-${MAVEN_VERSION}\"\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nCOPY scripts/mtaBuild.sh ${MTA_HOME}/bin/mtaBuild.sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl --yes \\\n && mkdir -p $( dirname \"${MTA_JAR_LOCATION}\" ;) \\\n && curl --fail --silent --cookie \"eula_3_1_agreed=tools.hana.ondemand.com/developer-license-3_1.txt;\" --output \"${MTA_JAR_LOCATION}\" \"https://tools.hana.ondemand.com/additional/mta_archive_builder-${MTA_VERSION}.jar\" \\\n && curl --fail --silent --output \"${MTA_HOME}/LICENSE.txt\" https://tools.hana.ondemand.com/developer-license-3_1.txt \\\n && ln -s \"${MTA_HOME}/bin/mtaBuild.sh\" /usr/local/bin/mtaBuild \\\n && INSTALLED_MTA_VERSION=\"$( mtaBuild --version ;)\" \\\n && echo \"[INFO] mta version: \\\"${INSTALLED_MTA_VERSION}\\\".\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends git --yes \\\n && NODE_HOME=/opt/nodejs ; mkdir -p ${NODE_HOME} \\\n && curl --fail --silent --output - \"http://nodejs.org/dist/${NODE_VERSION}/node-${NODE_VERSION}-linux-x64.tar.gz\" | tar -xzv -f - -C \"${NODE_HOME}\" \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/node\" /usr/local/bin/node \\\n && ln -s \"${NODE_HOME}/node-${NODE_VERSION}-linux-x64/bin/npm\" /usr/local/bin/npm \\\n && INSTALLED_NODE_VERSION=\"$( node --version ;)\" \\\n && echo \"[INFO] node version: \\\"${INSTALLED_NODE_VERSION}\\\".\" \\\n && npm config set @sap:registry https://npm.sap.com --global \\\n && echo \"[INFO] installing maven.\" \\\n && M2_BASE=\"$( dirname ${M2_HOME} ;)\" \\\n && mkdir -p \"${M2_BASE}\" \\\n && curl --fail --silent --output - \"https://apache.osuosl.org/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz\" | tar -xzvf - -C \"${M2_BASE}\" \\\n && ln -s \"${M2_HOME}/bin/mvn\" /usr/local/bin/mvn \\\n && chmod --recursive a+w ${M2_HOME}/conf/* \\\n && INSTALLED_MAVEN_VERSION=$( mvn -version | head -n1 | cut -d ' ' -f 3 ;) \\\n && echo \"[INFO] maven version: \\\"${INSTALLED_MAVEN_VERSION}\\\".\" \\\n && apt-get install --no-install-recommends build-essential python-minimal --yes \\\n && apt-get remove --purge --autoremove --yes curl \\\n && rm -rf /var/lib/apt/lists/* \\\n && useradd --home-dir \"${MTA_USER_HOME}\" --create-home --shell /bin/bash --user-group --uid 1000 --comment 'SAP-MTA tooling' --password $( echo weUseMta | openssl passwd -1 -stdin ;) mta \\\n && [ \"${NODE_VERSION}\" = \"${INSTALLED_NODE_VERSION}\" ] || { echo \"[ERROR] Installed node version '${INSTALLED_NODE_VERSION}' does not match expected node version '${NODE_VERSION}'.\" ;exit 1 ; } \\\n && [ \"${MAVEN_VERSION}\" = \"${INSTALLED_MAVEN_VERSION}\" ] || { echo \"[ERROR] Installed maven version '${INSTALLED_MAVEN_VERSION}' does not match expected maven version '${MAVEN_VERSION}'.\" ;exit 1 ; }\nWORKDIR /project\nENV PATH=\"./node_modules/.bin:$PATH\"\nUSER mta\n","originalDockerfileUglifiedHash":"f13bb7afcd21a54d5b72d308f1abc208","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e762948a097b90cf04c408896c443fc925699f95.dockerfile"}