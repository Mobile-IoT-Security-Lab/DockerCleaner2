{"seed":1948678350,"processedDockerfileHash":"b9199d28b194294c105cbb85fbb1b266","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  Version 0.1\n#  # fastdfs can not use alpine\nFROM centos:7\nMAINTAINER juneryo <https://github.com/juneryo/fastdfs-nginx-server>\n#  # fastdfs environment\nENV FASTDFS_VERSION=\"master\"\nENV LIBFASTCOMMON_VERSION=\"1.0.35\"\n#  # same as base_path in conf/storage.conf\nENV FASTDFS_BASE_PATH=\"/data/fdfs\"\n#  # nginx environment\nENV NGINX_VERSION=\"1.13.3\"\nENV ECHO_NGINX_MODULE_VERSION=\"master\"\nENV FASTDFS_NGINX_MODULE_VERSION=\"master\"\nENV NGINX_EVAL_MODULE_VERSION=\"master\"\nENV NGX_HTTP_REDIS_VERSION=\"0.3.8\"\n#  # create and link folders\nRUN mkdir -p /usr/src \\\n && mkdir -p $FASTDFS_BASE_PATH/data/M00 \\\n && mkdir /boot \\\n && ln -s $FASTDFS_BASE_PATH/data $FASTDFS_BASE_PATH/data/M00\n#  # install dependency packages\nRUN yum install -y gcc gcc-c++ gd gd-devel geoip geoip-devel gnupg libc libc-devel libevent libevent-devel libxslt libxslt-devel linux-headers openssl openssl-devel pcre pcre-devel perl unzip zlib zlib-devel\n#  # install fastdfs common lib\nCOPY install/fastdfs/libfastcommon-$LIBFASTCOMMON_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip libfastcommon-$LIBFASTCOMMON_VERSION.zip \\\n && cd libfastcommon-$LIBFASTCOMMON_VERSION \\\n && ./make.sh \\\n && ./make.sh install\n#  # install fastdfs\nCOPY install/fastdfs/fastdfs-$FASTDFS_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip fastdfs-$FASTDFS_VERSION.zip \\\n && cd fastdfs-$FASTDFS_VERSION \\\n && ./make.sh \\\n && ./make.sh install \\\n && cp conf/*.* /etc/fdfs\n#  # unzip nginx modules\nCOPY install/nginx/modules/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip /usr/src/\nCOPY install/nginx/modules/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip /usr/src/\nCOPY install/nginx/modules/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip /usr/src/\n#  # command ADD will auto unzip tar.gz\nCOPY install/nginx/modules/ngx_http_redis-$NGX_HTTP_REDIS_VERSION.tar.gz /usr/src/\nRUN cd /usr/src \\\n && unzip echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip \\\n && unzip fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip \\\n && unzip nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip\n#  # install nginx with extra modules\n#  # refer to： https://github.com/nginxinc/docker-nginx/blob/1.13.2/mainline/alpine/Dockerfile\nCOPY install/nginx/nginx-$NGINX_VERSION.tar.gz /usr/src/\nRUN mkdir -p /var/cache/nginx/client_temp \\\n && mkdir /var/cache/nginx/proxy_temp \\\n && mkdir /var/cache/nginx/fastcgi_temp \\\n && mkdir /var/cache/nginx/uwsgi_temp \\\n && mkdir /var/cache/nginx/scgi_temp\nRUN CONFIG=\" --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-threads --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-stream_realip_module --with-stream_geoip_module=dynamic --with-http_slice_module --with-mail --with-mail_ssl_module --with-compat --with-file-aio --with-http_v2_module --add-module=/usr/src/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION --add-module=/usr/src/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION/src --add-module=/usr/src/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION --add-module=/usr/src/ngx_http_redis-$NGX_HTTP_REDIS_VERSION \" \\\n && cd /usr/src/nginx-$NGINX_VERSION \\\n && ./configure $CONFIG --with-debug \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && mv objs/nginx objs/nginx-debug \\\n && mv objs/ngx_http_xslt_filter_module.so objs/ngx_http_xslt_filter_module-debug.so \\\n && mv objs/ngx_http_image_filter_module.so objs/ngx_http_image_filter_module-debug.so \\\n && mv objs/ngx_http_geoip_module.so objs/ngx_http_geoip_module-debug.so \\\n && mv objs/ngx_stream_geoip_module.so objs/ngx_stream_geoip_module-debug.so \\\n && ./configure $CONFIG \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && rm -rf /etc/nginx/html/ \\\n && mkdir /etc/nginx/conf.d/ \\\n && mkdir -p /usr/share/nginx/html/ \\\n && install -m644 html/index.html /usr/share/nginx/html/ \\\n && install -m644 html/50x.html /usr/share/nginx/html/ \\\n && install -m755 objs/nginx-debug /usr/sbin/nginx-debug \\\n && install -m755 objs/ngx_http_xslt_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_xslt_filter_module-debug.so \\\n && install -m755 objs/ngx_http_image_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_image_filter_module-debug.so \\\n && install -m755 objs/ngx_http_geoip_module-debug.so /usr/lib/nginx/modules/ngx_http_geoip_module-debug.so \\\n && install -m755 objs/ngx_stream_geoip_module-debug.so /usr/lib/nginx/modules/ngx_stream_geoip_module-debug.so \\\n && ln -s ../../usr/lib/nginx/modules /etc/nginx/modules \\\n && strip /usr/sbin/nginx* \\\n && strip /usr/lib/nginx/modules/*.so \\\n && yum install -y gettext \\\n && mv /usr/bin/envsubst /tmp/ \\\n && mv /tmp/envsubst /usr/local/bin/\nCOPY conf/nginx.conf /etc/nginx/nginx.conf\nCOPY conf/nginx.vh.default.conf /etc/nginx/conf.d/default.conf\n#  # some important fast and fast-nginx-module params:\n#  # base_path in tracker.conf\n#  # base_path, store_path0, tracker_server in storage.conf and mod_fastdfs.conf\nCOPY conf/tracker.conf /etc/fdfs/tracker.conf\nCOPY conf/storage.conf /etc/fdfs/storage.conf\nCOPY conf/http.conf /etc/fdfs/http.conf\nCOPY conf/mod_fastdfs.conf /etc/fdfs/mod_fastdfs.conf\nCOPY start.sh /boot/start.sh\nRUN chmod 755 /boot/start.sh\n#  # nginx port\nEXPOSE 24001/tcp 24002/tcp\n#  # fastdfs Tracker,Storage,FastDHT port\nEXPOSE 22122/tcp 23000/tcp 11411/tcp\nSTOPSIGNAL SIGTERM\nCMD [\"/boot/start.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# Version 0.1\n# # fastdfs can not use alpine\nFROM centos:7\nMAINTAINER juneryo <https://github.com/juneryo/fastdfs-nginx-server>\n# # fastdfs environment\nENV FASTDFS_VERSION=\"master\"\nENV LIBFASTCOMMON_VERSION=\"1.0.35\"\n# # same as base_path in conf/storage.conf\nENV FASTDFS_BASE_PATH=\"/data/fdfs\"\n# # nginx environment\nENV NGINX_VERSION=\"1.13.3\"\nENV ECHO_NGINX_MODULE_VERSION=\"master\"\nENV FASTDFS_NGINX_MODULE_VERSION=\"master\"\nENV NGINX_EVAL_MODULE_VERSION=\"master\"\nENV NGX_HTTP_REDIS_VERSION=\"0.3.8\"\n# # create and link folders\nRUN mkdir -p /usr/src \\\n && mkdir -p $FASTDFS_BASE_PATH/data/M00 \\\n && mkdir /boot \\\n && ln -s $FASTDFS_BASE_PATH/data $FASTDFS_BASE_PATH/data/M00\n# # install dependency packages\nRUN yum install -y gcc gcc-c++ gd gd-devel geoip geoip-devel gnupg libc libc-devel libevent libevent-devel libxslt libxslt-devel linux-headers openssl openssl-devel pcre pcre-devel perl unzip zlib zlib-devel\n# # install fastdfs common lib\nADD install/fastdfs/libfastcommon-$LIBFASTCOMMON_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip libfastcommon-$LIBFASTCOMMON_VERSION.zip \\\n && cd libfastcommon-$LIBFASTCOMMON_VERSION \\\n && ./make.sh \\\n && ./make.sh install\n# # install fastdfs\nADD install/fastdfs/fastdfs-$FASTDFS_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip fastdfs-$FASTDFS_VERSION.zip \\\n && cd fastdfs-$FASTDFS_VERSION \\\n && ./make.sh \\\n && ./make.sh install \\\n && cp conf/*.* /etc/fdfs\n# # unzip nginx modules\nADD install/nginx/modules/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip /usr/src/\nADD install/nginx/modules/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip /usr/src/\nADD install/nginx/modules/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip /usr/src/\n# # command ADD will auto unzip tar.gz\nADD install/nginx/modules/ngx_http_redis-$NGX_HTTP_REDIS_VERSION.tar.gz /usr/src/\nRUN cd /usr/src \\\n && unzip echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip \\\n && unzip fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip \\\n && unzip nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip\n# # install nginx with extra modules\n# # refer to： https://github.com/nginxinc/docker-nginx/blob/1.13.2/mainline/alpine/Dockerfile\nADD install/nginx/nginx-$NGINX_VERSION.tar.gz /usr/src/\nRUN mkdir -p /var/cache/nginx/client_temp \\\n && mkdir /var/cache/nginx/proxy_temp \\\n && mkdir /var/cache/nginx/fastcgi_temp \\\n && mkdir /var/cache/nginx/uwsgi_temp \\\n && mkdir /var/cache/nginx/scgi_temp\nRUN CONFIG=\" --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-threads --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-stream_realip_module --with-stream_geoip_module=dynamic --with-http_slice_module --with-mail --with-mail_ssl_module --with-compat --with-file-aio --with-http_v2_module --add-module=/usr/src/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION --add-module=/usr/src/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION/src --add-module=/usr/src/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION --add-module=/usr/src/ngx_http_redis-$NGX_HTTP_REDIS_VERSION \" \\\n && cd /usr/src/nginx-$NGINX_VERSION \\\n && ./configure $CONFIG --with-debug \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && mv objs/nginx objs/nginx-debug \\\n && mv objs/ngx_http_xslt_filter_module.so objs/ngx_http_xslt_filter_module-debug.so \\\n && mv objs/ngx_http_image_filter_module.so objs/ngx_http_image_filter_module-debug.so \\\n && mv objs/ngx_http_geoip_module.so objs/ngx_http_geoip_module-debug.so \\\n && mv objs/ngx_stream_geoip_module.so objs/ngx_stream_geoip_module-debug.so \\\n && ./configure $CONFIG \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && rm -rf /etc/nginx/html/ \\\n && mkdir /etc/nginx/conf.d/ \\\n && mkdir -p /usr/share/nginx/html/ \\\n && install -m644 html/index.html /usr/share/nginx/html/ \\\n && install -m644 html/50x.html /usr/share/nginx/html/ \\\n && install -m755 objs/nginx-debug /usr/sbin/nginx-debug \\\n && install -m755 objs/ngx_http_xslt_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_xslt_filter_module-debug.so \\\n && install -m755 objs/ngx_http_image_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_image_filter_module-debug.so \\\n && install -m755 objs/ngx_http_geoip_module-debug.so /usr/lib/nginx/modules/ngx_http_geoip_module-debug.so \\\n && install -m755 objs/ngx_stream_geoip_module-debug.so /usr/lib/nginx/modules/ngx_stream_geoip_module-debug.so \\\n && ln -s ../../usr/lib/nginx/modules /etc/nginx/modules \\\n && strip /usr/sbin/nginx* \\\n && strip /usr/lib/nginx/modules/*.so \\\n && yum install -y gettext \\\n && mv /usr/bin/envsubst /tmp/ \\\n && mv /tmp/envsubst /usr/local/bin/\nCOPY conf/nginx.conf /etc/nginx/nginx.conf\nCOPY conf/nginx.vh.default.conf /etc/nginx/conf.d/default.conf\n# # some important fast and fast-nginx-module params:\n# # base_path in tracker.conf\n# # base_path, store_path0, tracker_server in storage.conf and mod_fastdfs.conf\nCOPY conf/tracker.conf /etc/fdfs/tracker.conf\nCOPY conf/storage.conf /etc/fdfs/storage.conf\nCOPY conf/http.conf /etc/fdfs/http.conf\nCOPY conf/mod_fastdfs.conf /etc/fdfs/mod_fastdfs.conf\nCOPY start.sh /boot/start.sh\nRUN chmod 755 /boot/start.sh\n# # nginx port\nEXPOSE 24001/tcp 24002/tcp\n# # fastdfs Tracker,Storage,FastDHT port\nEXPOSE 22122/tcp 23000/tcp 11411/tcp\nSTOPSIGNAL SIGTERM\nCMD [\"/boot/start.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"69f596ae8efafb03fbc01ff8742678ce","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  Version 0.1\n#  # fastdfs can not use alpine\nFROM centos:7\nMAINTAINER juneryo <https://github.com/juneryo/fastdfs-nginx-server>\n#  # fastdfs environment\nENV FASTDFS_VERSION=\"master\"\nENV LIBFASTCOMMON_VERSION=\"1.0.35\"\n#  # same as base_path in conf/storage.conf\nENV FASTDFS_BASE_PATH=\"/data/fdfs\"\n#  # nginx environment\nENV NGINX_VERSION=\"1.13.3\"\nENV ECHO_NGINX_MODULE_VERSION=\"master\"\nENV FASTDFS_NGINX_MODULE_VERSION=\"master\"\nENV NGINX_EVAL_MODULE_VERSION=\"master\"\nENV NGX_HTTP_REDIS_VERSION=\"0.3.8\"\n#  # create and link folders\nRUN mkdir -p /usr/src \\\n && mkdir -p $FASTDFS_BASE_PATH/data/M00 \\\n && mkdir /boot \\\n && ln -s $FASTDFS_BASE_PATH/data $FASTDFS_BASE_PATH/data/M00\n#  # install dependency packages\nRUN yum install -y gcc gcc-c++ gd gd-devel geoip geoip-devel gnupg libc libc-devel libevent libevent-devel libxslt libxslt-devel linux-headers openssl openssl-devel pcre pcre-devel perl unzip zlib zlib-devel\n#  # install fastdfs common lib\nADD install/fastdfs/libfastcommon-$LIBFASTCOMMON_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip libfastcommon-$LIBFASTCOMMON_VERSION.zip \\\n && cd libfastcommon-$LIBFASTCOMMON_VERSION \\\n && ./make.sh \\\n && ./make.sh install\n#  # install fastdfs\nADD install/fastdfs/fastdfs-$FASTDFS_VERSION.zip /usr/src/\nRUN cd /usr/src \\\n && unzip fastdfs-$FASTDFS_VERSION.zip \\\n && cd fastdfs-$FASTDFS_VERSION \\\n && ./make.sh \\\n && ./make.sh install \\\n && cp conf/*.* /etc/fdfs\n#  # unzip nginx modules\nADD install/nginx/modules/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip /usr/src/\nADD install/nginx/modules/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip /usr/src/\nADD install/nginx/modules/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip /usr/src/\n#  # command ADD will auto unzip tar.gz\nADD install/nginx/modules/ngx_http_redis-$NGX_HTTP_REDIS_VERSION.tar.gz /usr/src/\nRUN cd /usr/src \\\n && unzip echo-nginx-module-$ECHO_NGINX_MODULE_VERSION.zip \\\n && unzip fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION.zip \\\n && unzip nginx-eval-module-$NGINX_EVAL_MODULE_VERSION.zip\n#  # install nginx with extra modules\n#  # refer to： https://github.com/nginxinc/docker-nginx/blob/1.13.2/mainline/alpine/Dockerfile\nADD install/nginx/nginx-$NGINX_VERSION.tar.gz /usr/src/\nRUN mkdir -p /var/cache/nginx/client_temp \\\n && mkdir /var/cache/nginx/proxy_temp \\\n && mkdir /var/cache/nginx/fastcgi_temp \\\n && mkdir /var/cache/nginx/uwsgi_temp \\\n && mkdir /var/cache/nginx/scgi_temp\nRUN CONFIG=\" --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-threads --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-stream_realip_module --with-stream_geoip_module=dynamic --with-http_slice_module --with-mail --with-mail_ssl_module --with-compat --with-file-aio --with-http_v2_module --add-module=/usr/src/echo-nginx-module-$ECHO_NGINX_MODULE_VERSION --add-module=/usr/src/fastdfs-nginx-module-$FASTDFS_NGINX_MODULE_VERSION/src --add-module=/usr/src/nginx-eval-module-$NGINX_EVAL_MODULE_VERSION --add-module=/usr/src/ngx_http_redis-$NGX_HTTP_REDIS_VERSION \" \\\n && cd /usr/src/nginx-$NGINX_VERSION \\\n && ./configure $CONFIG --with-debug \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && mv objs/nginx objs/nginx-debug \\\n && mv objs/ngx_http_xslt_filter_module.so objs/ngx_http_xslt_filter_module-debug.so \\\n && mv objs/ngx_http_image_filter_module.so objs/ngx_http_image_filter_module-debug.so \\\n && mv objs/ngx_http_geoip_module.so objs/ngx_http_geoip_module-debug.so \\\n && mv objs/ngx_stream_geoip_module.so objs/ngx_stream_geoip_module-debug.so \\\n && ./configure $CONFIG \\\n && make -j$( getconf _NPROCESSORS_ONLN ;) \\\n && make install \\\n && rm -rf /etc/nginx/html/ \\\n && mkdir /etc/nginx/conf.d/ \\\n && mkdir -p /usr/share/nginx/html/ \\\n && install -m644 html/index.html /usr/share/nginx/html/ \\\n && install -m644 html/50x.html /usr/share/nginx/html/ \\\n && install -m755 objs/nginx-debug /usr/sbin/nginx-debug \\\n && install -m755 objs/ngx_http_xslt_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_xslt_filter_module-debug.so \\\n && install -m755 objs/ngx_http_image_filter_module-debug.so /usr/lib/nginx/modules/ngx_http_image_filter_module-debug.so \\\n && install -m755 objs/ngx_http_geoip_module-debug.so /usr/lib/nginx/modules/ngx_http_geoip_module-debug.so \\\n && install -m755 objs/ngx_stream_geoip_module-debug.so /usr/lib/nginx/modules/ngx_stream_geoip_module-debug.so \\\n && ln -s ../../usr/lib/nginx/modules /etc/nginx/modules \\\n && strip /usr/sbin/nginx* \\\n && strip /usr/lib/nginx/modules/*.so \\\n && yum install -y gettext \\\n && mv /usr/bin/envsubst /tmp/ \\\n && mv /tmp/envsubst /usr/local/bin/\nCOPY conf/nginx.conf /etc/nginx/nginx.conf\nCOPY conf/nginx.vh.default.conf /etc/nginx/conf.d/default.conf\n#  # some important fast and fast-nginx-module params:\n#  # base_path in tracker.conf\n#  # base_path, store_path0, tracker_server in storage.conf and mod_fastdfs.conf\nCOPY conf/tracker.conf /etc/fdfs/tracker.conf\nCOPY conf/storage.conf /etc/fdfs/storage.conf\nCOPY conf/http.conf /etc/fdfs/http.conf\nCOPY conf/mod_fastdfs.conf /etc/fdfs/mod_fastdfs.conf\nCOPY start.sh /boot/start.sh\nRUN chmod 755 /boot/start.sh\n#  # nginx port\nEXPOSE 24001/tcp 24002/tcp\n#  # fastdfs Tracker,Storage,FastDHT port\nEXPOSE 22122/tcp 23000/tcp 11411/tcp\nSTOPSIGNAL SIGTERM\nCMD [\"/boot/start.sh\"]\n","originalDockerfileUglifiedHash":"5ac5d6090193615dea80fa2de027a1cc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/55392e1645d2ec8fe3d4e5aaf58c3ecfad43523e.dockerfile"}