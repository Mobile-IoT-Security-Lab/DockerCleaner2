{"seed":1802449155,"processedDockerfileHash":"c9ded5abd3d086a07f82314378e3b5d8","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Docker container for Observium Community Edition\n#\n#   It requires option of e.g. '--link observiumdb:observiumdb' with another MySQL or MariaDB container.\n#   Example usage:\n#   1. MySQL or MariaDB container\n#      $ docker run --name observiumdb \\\n#          -v /home/docker/observium/data:/var/lib/mysql \\\n#          -e MYSQL_ROOT_PASSWORD=passw0rd \\\n#          -e MYSQL_USER=observium \\\n#          -e MYSQL_PASSWORD=passw0rd \\\n#          -e MYSQL_DATABASE=observium \\\n#          mariadb\n#\n#   2. This Observium container\n#      $ docker run --name observiumapp --link observiumdb:observiumdb \\\n#          -v /home/docker/observium/logs:/opt/observium/logs \\\n#          -v /home/docker/observium/rrd:/opt/observium/rrd \\\n#          -e OBSERVIUM_ADMIN_USER=admin \\\n#          -e OBSERVIUM_ADMIN_PASS=passw0rd \\\n#          -e OBSERVIUM_DB_HOST=observiumdb \\\n#          -e OBSERVIUM_DB_USER=observium \\\n#          -e OBSERVIUM_DB_PASS=passw0rd \\\n#          -e OBSERVIUM_DB_NAME=observium \\\n#          -e OBSERVIUM_BASE_URL=http://yourserver.yourdomain:80 \\\n#          -p 80:80 mbixtech/observium\n#\n#   References:\n#    - Follow platform guideline specified in https://github.com/docker-library/official-images\n#   \nFROM ubuntu:16.04\nLABEL maintainer=\"\\\"somsakc@hotmail.com\\\"\"\nLABEL version=\"1.2\"\nLABEL description=\"Docker container for Observium Community Edition\"\nARG OBSERVIUM_ADMIN_USER=admin\nARG OBSERVIUM_ADMIN_PASS=passw0rd\nARG OBSERVIUM_DB_HOST=observiumdb\nARG OBSERVIUM_DB_USER=observium\nARG OBSERVIUM_DB_PASS=passw0rd\nARG OBSERVIUM_DB_NAME=observium\n#   set environment variables\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\nENV OBSERVIUM_DB_HOST=\"$OBSERVIUM_DB_HOST\"\nENV OBSERVIUM_DB_USER=\"$OBSERVIUM_DB_USER\"\nENV OBSERVIUM_DB_PASS=\"$OBSERVIUM_DB_PASS\"\nENV OBSERVIUM_DB_NAME=\"$OBSERVIUM_DB_NAME\"\n#   install prerequisites\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends libapache2-mod-php7.0=7.0.33-0ubuntu0.16.04.16 php7.0-cli=7.0.33-0ubuntu0.16.04.16 php7.0-mysql=7.0.33-0ubuntu0.16.04.16 php7.0-mysqli php7.0-gd=7.0.33-0ubuntu0.16.04.16 php7.0-mcrypt=7.0.33-0ubuntu0.16.04.16 php7.0-json=7.0.33-0ubuntu0.16.04.16 php-pear=1:1.10.1+submodules+notgz-6ubuntu0.3 snmp=5.7.3+dfsg-1ubuntu4.6 fping=3.13-1 mysql-client=5.7.33-0ubuntu0.16.04.1 python-mysqldb=1.3.7-1build2 rrdtool=1.5.5-4 subversion=1.9.3-2ubuntu1.3 whois=5.2.11 mtr-tiny=0.86-1ubuntu0.1 ipmitool=1.8.16-3ubuntu0.2 graphviz=2.38.0-12ubuntu2.1 imagemagick=8:6.8.9.9-7ubuntu5.16 apache2=2.4.18-2ubuntu3.17 -y )\nRUN (apt-get update ;apt-get install --no-install-recommends libvirt-bin=1.3.1-1ubuntu10.31 -y )\nRUN (apt-get update ;apt-get install --no-install-recommends cron=3.0pl1-128ubuntu2 supervisor=3.2.0-2ubuntu0.2 wget=1.17.1-1ubuntu1.5 locales=2.23-0ubuntu11.3 -y )\nRUN apt-get clean\n#   set locale\nRUN locale-gen en_US.UTF-8\n#   install observium package\nRUN mkdir -p /opt/observium /opt/observium/lock /opt/observium/logs /opt/observium/rrd\nRUN cd /opt \\\n && wget http://www.observium.org/observium-community-latest.tar.gz \\\n && tar zxvf observium-community-latest.tar.gz \\\n && rm observium-community-latest.tar.gz\n#   check version\nRUN [ -f /opt/observium/VERSION ] \\\n && cat /opt/observium/VERSION\n#   configure observium package\nRUN cd /opt/observium \\\n && cp config.php.default config.php \\\n && sed -i -e \"s/= 'localhost';/= getenv('OBSERVIUM_DB_HOST');/g\" config.php \\\n && sed -i -e \"s/= 'USERNAME';/= getenv('OBSERVIUM_DB_USER');/g\" config.php \\\n && sed -i -e \"s/= 'PASSWORD';/= getenv('OBSERVIUM_DB_PASS');/g\" config.php \\\n && sed -i -e \"s/= 'observium';/= getenv('OBSERVIUM_DB_NAME');/g\" config.php \\\n && echo \"$config['base_url'] = getenv('OBSERVIUM_BASE_URL');\" >> config.php\nCOPY observium-init /opt/observium/observium-init.sh\nRUN chmod a+x /opt/observium/observium-init.sh\nRUN chown -R www-data:www-data /opt/observium\nRUN find /opt -ls\n#  RUN cd /opt/observium && \\\n#      ./discovery.php -u && \\\n#      ./adduser.php $OBSERVIUM_ADMIN_USER $OBSERVIUM_ADMIN_PASS 10\n#   configure php modules\nRUN phpenmod mcrypt\n#   configure apache modules\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork \\\n && a2enmod php7.0 \\\n && a2enmod rewrite\n#   configure apache configuration\n#  RUN mv /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/000-default.conf.orig\nCOPY observium-apache24 /etc/apache2/sites-available/000-default.conf\nRUN rm -fr /var/www\n#   configure observium cron job\n#  COPY observium-cron /etc/cron.d/observium\nCOPY observium-cron /tmp/observium\nRUN echo \"\" >> /etc/crontab \\\n && cat /tmp/observium >> /etc/crontab \\\n && rm -f /tmp/observium\n#   configure container interfaces\nCOPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\"]\nEXPOSE 80/tcp\nVOLUME [\"/opt/observium/lock\", \"/opt/observium/logs\",\"/opt/observium/rrd\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Docker container for Observium Community Edition\n#\n#  It requires option of e.g. '--link observiumdb:observiumdb' with another MySQL or MariaDB container.\n#  Example usage:\n#  1. MySQL or MariaDB container\n#     $ docker run --name observiumdb \\\n#         -v /home/docker/observium/data:/var/lib/mysql \\\n#         -e MYSQL_ROOT_PASSWORD=passw0rd \\\n#         -e MYSQL_USER=observium \\\n#         -e MYSQL_PASSWORD=passw0rd \\\n#         -e MYSQL_DATABASE=observium \\\n#         mariadb\n#\n#  2. This Observium container\n#     $ docker run --name observiumapp --link observiumdb:observiumdb \\\n#         -v /home/docker/observium/logs:/opt/observium/logs \\\n#         -v /home/docker/observium/rrd:/opt/observium/rrd \\\n#         -e OBSERVIUM_ADMIN_USER=admin \\\n#         -e OBSERVIUM_ADMIN_PASS=passw0rd \\\n#         -e OBSERVIUM_DB_HOST=observiumdb \\\n#         -e OBSERVIUM_DB_USER=observium \\\n#         -e OBSERVIUM_DB_PASS=passw0rd \\\n#         -e OBSERVIUM_DB_NAME=observium \\\n#         -e OBSERVIUM_BASE_URL=http://yourserver.yourdomain:80 \\\n#         -p 80:80 mbixtech/observium\n#\n#  References:\n#   - Follow platform guideline specified in https://github.com/docker-library/official-images\n#  \nFROM ubuntu:16.04\nLABEL maintainer=\"\\\"somsakc@hotmail.com\\\"\"\nLABEL version=\"1.2\"\nLABEL description=\"Docker container for Observium Community Edition\"\nARG OBSERVIUM_ADMIN_USER=admin\nARG OBSERVIUM_ADMIN_PASS=passw0rd\nARG OBSERVIUM_DB_HOST=observiumdb\nARG OBSERVIUM_DB_USER=observium\nARG OBSERVIUM_DB_PASS=passw0rd\nARG OBSERVIUM_DB_NAME=observium\n#  set environment variables\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\nENV OBSERVIUM_DB_HOST=\"$OBSERVIUM_DB_HOST\"\nENV OBSERVIUM_DB_USER=\"$OBSERVIUM_DB_USER\"\nENV OBSERVIUM_DB_PASS=\"$OBSERVIUM_DB_PASS\"\nENV OBSERVIUM_DB_NAME=\"$OBSERVIUM_DB_NAME\"\n#  install prerequisites\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN apt-get update\nRUN apt-get install libapache2-mod-php7.0 php7.0-cli php7.0-mysql php7.0-mysqli php7.0-gd php7.0-mcrypt php7.0-json php-pear snmp fping mysql-client python-mysqldb rrdtool subversion whois mtr-tiny ipmitool graphviz imagemagick apache2 -y\nRUN apt-get install libvirt-bin -y\nRUN apt-get install cron supervisor wget locales -y\nRUN apt-get clean\n#  set locale\nRUN locale-gen en_US.UTF-8\n#  install observium package\nRUN mkdir -p /opt/observium /opt/observium/lock /opt/observium/logs /opt/observium/rrd\nRUN cd /opt \\\n && wget http://www.observium.org/observium-community-latest.tar.gz \\\n && tar zxvf observium-community-latest.tar.gz \\\n && rm observium-community-latest.tar.gz\n#  check version\nRUN [ -f /opt/observium/VERSION ] \\\n && cat /opt/observium/VERSION\n#  configure observium package\nRUN cd /opt/observium \\\n && cp config.php.default config.php \\\n && sed -i -e \"s/= 'localhost';/= getenv('OBSERVIUM_DB_HOST');/g\" config.php \\\n && sed -i -e \"s/= 'USERNAME';/= getenv('OBSERVIUM_DB_USER');/g\" config.php \\\n && sed -i -e \"s/= 'PASSWORD';/= getenv('OBSERVIUM_DB_PASS');/g\" config.php \\\n && sed -i -e \"s/= 'observium';/= getenv('OBSERVIUM_DB_NAME');/g\" config.php \\\n && echo \"$config['base_url'] = getenv('OBSERVIUM_BASE_URL');\" >> config.php\nCOPY observium-init /opt/observium/observium-init.sh\nRUN chmod a+x /opt/observium/observium-init.sh\nRUN chown -R www-data:www-data /opt/observium\nRUN find /opt -ls\n# RUN cd /opt/observium && \\\n#     ./discovery.php -u && \\\n#     ./adduser.php $OBSERVIUM_ADMIN_USER $OBSERVIUM_ADMIN_PASS 10\n#  configure php modules\nRUN phpenmod mcrypt\n#  configure apache modules\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork \\\n && a2enmod php7.0 \\\n && a2enmod rewrite\n#  configure apache configuration\n# RUN mv /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/000-default.conf.orig\nCOPY observium-apache24 /etc/apache2/sites-available/000-default.conf\nRUN rm -fr /var/www\n#  configure observium cron job\n# COPY observium-cron /etc/cron.d/observium\nCOPY observium-cron /tmp/observium\nRUN echo \"\" >> /etc/crontab \\\n && cat /tmp/observium >> /etc/crontab \\\n && rm -f /tmp/observium\n#  configure container interfaces\nCOPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\"]\nEXPOSE 80/tcp\nVOLUME [\"/opt/observium/lock\", \"/opt/observium/logs\",\"/opt/observium/rrd\"]\n","injectedSmells":[],"originalDockerfileHash":"c687e3fac1cf989833a8baa56b6f3103","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Docker container for Observium Community Edition\n#\n#   It requires option of e.g. '--link observiumdb:observiumdb' with another MySQL or MariaDB container.\n#   Example usage:\n#   1. MySQL or MariaDB container\n#      $ docker run --name observiumdb \\\n#          -v /home/docker/observium/data:/var/lib/mysql \\\n#          -e MYSQL_ROOT_PASSWORD=passw0rd \\\n#          -e MYSQL_USER=observium \\\n#          -e MYSQL_PASSWORD=passw0rd \\\n#          -e MYSQL_DATABASE=observium \\\n#          mariadb\n#\n#   2. This Observium container\n#      $ docker run --name observiumapp --link observiumdb:observiumdb \\\n#          -v /home/docker/observium/logs:/opt/observium/logs \\\n#          -v /home/docker/observium/rrd:/opt/observium/rrd \\\n#          -e OBSERVIUM_ADMIN_USER=admin \\\n#          -e OBSERVIUM_ADMIN_PASS=passw0rd \\\n#          -e OBSERVIUM_DB_HOST=observiumdb \\\n#          -e OBSERVIUM_DB_USER=observium \\\n#          -e OBSERVIUM_DB_PASS=passw0rd \\\n#          -e OBSERVIUM_DB_NAME=observium \\\n#          -e OBSERVIUM_BASE_URL=http://yourserver.yourdomain:80 \\\n#          -p 80:80 mbixtech/observium\n#\n#   References:\n#    - Follow platform guideline specified in https://github.com/docker-library/official-images\n#   \nFROM ubuntu:16.04\nLABEL maintainer=\"\\\"somsakc@hotmail.com\\\"\"\nLABEL version=\"1.2\"\nLABEL description=\"Docker container for Observium Community Edition\"\nARG OBSERVIUM_ADMIN_USER=admin\nARG OBSERVIUM_ADMIN_PASS=passw0rd\nARG OBSERVIUM_DB_HOST=observiumdb\nARG OBSERVIUM_DB_USER=observium\nARG OBSERVIUM_DB_PASS=passw0rd\nARG OBSERVIUM_DB_NAME=observium\n#   set environment variables\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US.UTF-8\"\nENV OBSERVIUM_DB_HOST=\"$OBSERVIUM_DB_HOST\"\nENV OBSERVIUM_DB_USER=\"$OBSERVIUM_DB_USER\"\nENV OBSERVIUM_DB_PASS=\"$OBSERVIUM_DB_PASS\"\nENV OBSERVIUM_DB_NAME=\"$OBSERVIUM_DB_NAME\"\n#   install prerequisites\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN apt-get update\nRUN apt-get install libapache2-mod-php7.0 php7.0-cli php7.0-mysql php7.0-mysqli php7.0-gd php7.0-mcrypt php7.0-json php-pear snmp fping mysql-client python-mysqldb rrdtool subversion whois mtr-tiny ipmitool graphviz imagemagick apache2 -y\nRUN apt-get install libvirt-bin -y\nRUN apt-get install cron supervisor wget locales -y\nRUN apt-get clean\n#   set locale\nRUN locale-gen en_US.UTF-8\n#   install observium package\nRUN mkdir -p /opt/observium /opt/observium/lock /opt/observium/logs /opt/observium/rrd\nRUN cd /opt \\\n && wget http://www.observium.org/observium-community-latest.tar.gz \\\n && tar zxvf observium-community-latest.tar.gz \\\n && rm observium-community-latest.tar.gz\n#   check version\nRUN [ -f /opt/observium/VERSION ] \\\n && cat /opt/observium/VERSION\n#   configure observium package\nRUN cd /opt/observium \\\n && cp config.php.default config.php \\\n && sed -i -e \"s/= 'localhost';/= getenv('OBSERVIUM_DB_HOST');/g\" config.php \\\n && sed -i -e \"s/= 'USERNAME';/= getenv('OBSERVIUM_DB_USER');/g\" config.php \\\n && sed -i -e \"s/= 'PASSWORD';/= getenv('OBSERVIUM_DB_PASS');/g\" config.php \\\n && sed -i -e \"s/= 'observium';/= getenv('OBSERVIUM_DB_NAME');/g\" config.php \\\n && echo \"$config['base_url'] = getenv('OBSERVIUM_BASE_URL');\" >> config.php\nCOPY observium-init /opt/observium/observium-init.sh\nRUN chmod a+x /opt/observium/observium-init.sh\nRUN chown -R www-data:www-data /opt/observium\nRUN find /opt -ls\n#  RUN cd /opt/observium && \\\n#      ./discovery.php -u && \\\n#      ./adduser.php $OBSERVIUM_ADMIN_USER $OBSERVIUM_ADMIN_PASS 10\n#   configure php modules\nRUN phpenmod mcrypt\n#   configure apache modules\nRUN a2dismod mpm_event \\\n && a2enmod mpm_prefork \\\n && a2enmod php7.0 \\\n && a2enmod rewrite\n#   configure apache configuration\n#  RUN mv /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/000-default.conf.orig\nCOPY observium-apache24 /etc/apache2/sites-available/000-default.conf\nRUN rm -fr /var/www\n#   configure observium cron job\n#  COPY observium-cron /etc/cron.d/observium\nCOPY observium-cron /tmp/observium\nRUN echo \"\" >> /etc/crontab \\\n && cat /tmp/observium >> /etc/crontab \\\n && rm -f /tmp/observium\n#   configure container interfaces\nCOPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\"]\nEXPOSE 80/tcp\nVOLUME [\"/opt/observium/lock\", \"/opt/observium/logs\",\"/opt/observium/rrd\"]\n","originalDockerfileUglifiedHash":"837ae8eaa945febd998d15ed3cb83993","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/91b953eefaec7f0c2f1fd198a3ac7f71f785e23f.dockerfile"}