{"seed":3473323409,"processedDockerfileHash":"440e8302907c7a92c01ad3d6bdd9720e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:18.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends apache2=2.4.29-1ubuntu4.27 curl=7.58.0-2ubuntu3.24 php-common=1:60ubuntu1 php-cli=1:7.2+60ubuntu1 php-dev=1:7.2+60ubuntu1 php-fpm=1:7.2+60ubuntu1 libpcre3-dev=2:8.39-9ubuntu0.1 php-gd=1:7.2+60ubuntu1 php-curl=1:7.2+60ubuntu1 php-imap=1:7.2+60ubuntu1 php-json=1:7.2+60ubuntu1 php-opcache php-xml=1:7.2+60ubuntu1 php-mbstring=1:7.2+60ubuntu1 php-mysql=1:7.2+60ubuntu1 php-sqlite3=1:7.2+60ubuntu1 php-apcu=5.1.9+4.0.11-1build1 libapache2-mod-php=1:7.2+60ubuntu1 cron=3.0pl1-128.1ubuntu1.2 postfix=3.3.0-1ubuntu0.4 sudo=1.8.21p2-3ubuntu1.5 rsync=3.1.2-2.1ubuntu1.6 git-core unzip=6.0-21ubuntu1.2 wget=1.19.4-1ubuntu2.2 mysql-client=5.7.41-0ubuntu0.18.04.1 -y -qq\n#   Use --build-arg option when running docker build to set these variables.\n#   If wish to \"mount\" a volume to your host, set AEGIR_UID and AEGIR_GIT to your local user's UID.\n#   There are both ARG and ENV lines to make sure the value persists.\n#   See https://docs.docker.com/engine/reference/builder/#/arg\nARG AEGIR_UID=1000\nENV AEGIR_UID=\"${AEGIR_UID:-1000}\"\nRUN echo \"Creating user aegir with UID $AEGIR_UID and GID $AEGIR_GID\"\nRUN addgroup --gid $AEGIR_UID aegir\nRUN adduser --uid $AEGIR_UID --gid $AEGIR_UID --system --shell /bin/bash --home /var/aegir aegir\nRUN adduser aegir www-data\nRUN a2enmod rewrite\nRUN a2enmod ssl\nRUN ln -s /var/aegir/config/apache.conf /etc/apache2/conf-available/aegir.conf\nRUN ln -s /etc/apache2/conf-available/aegir.conf /etc/apache2/conf-enabled/aegir.conf\nCOPY sudoers-aegir /etc/sudoers.d/aegir\nRUN chmod 0440 /etc/sudoers.d/aegir\nRUN wget https://raw.githubusercontent.com/composer/getcomposer.org/1b137f8bf6db3e79a38a5bc45324414a6b1f9df2/web/installer -O - -q | php -- --quiet\nRUN cp composer.phar /usr/local/bin/composer\nRUN wget https://github.com/drush-ops/drush/releases/download/8.1.16/drush.phar -O - -q > /usr/local/bin/drush\nRUN chmod +x /usr/local/bin/composer\nRUN chmod +x /usr/local/bin/drush\n#   Install fix-permissions and fix-ownership scripts\nRUN wget http://cgit.drupalcode.org/hosting_tasks_extra/plain/fix_permissions/scripts/standalone-install-fix-permissions-ownership.sh\nRUN bash standalone-install-fix-permissions-ownership.sh\nCOPY docker-entrypoint.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh\nCOPY run-tests.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/run-tests.sh\n#  COPY docker-entrypoint-tests.sh /usr/local/bin/\n#  RUN chmod +x /usr/local/bin/docker-entrypoint-tests.sh\nCOPY docker-entrypoint-queue.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint-queue.sh\n#   Prepare Aegir Logs folder.\nRUN mkdir /var/log/aegir\nRUN chown aegir:aegir /var/log/aegir\nRUN echo 'Hello, Aegir.' > /var/log/aegir/system.log\n#   Don't install provision. Downstream tags will do this with the right version.\n#  # Install Provision for all.\n#  ENV PROVISION_VERSION 7.x-3.x\n#  RUN mkdir -p /usr/share/drush/commands\n#  RUN drush dl --destination=/usr/share/drush/commands provision-$PROVISION_VERSION -y\nENV REGISTRY_REBUILD_VERSION=\"7.x-2.5\"\nRUN drush dl --destination=/usr/share/drush/commands registry_rebuild-$REGISTRY_REBUILD_VERSION -y\nUSER aegir\nRUN mkdir /var/aegir/config\nRUN mkdir /var/aegir/.drush\n#   You may change this environment at run time. User UID 1 is created with this email address.\nENV AEGIR_CLIENT_EMAIL=\"aegir@aegir.local.computer\"\nENV AEGIR_CLIENT_NAME=\"admin\"\nENV AEGIR_PROFILE=\"hostmaster\"\nENV AEGIR_VERSION=\"7.x-3.x\"\nENV PROVISION_VERSION=\"7.x-3.x\"\nENV AEGIR_WORKING_COPY=\"0\"\nENV AEGIR_HTTP_SERVICE_TYPE=\"apache\"\n#   Must be fixed across versions so we can upgrade containers.\nENV AEGIR_HOSTMASTER_ROOT=\"/var/aegir/hostmaster\"\nWORKDIR /var/aegir\n#   The Hostname of the database server to use\nENV AEGIR_DATABASE_SERVER=\"database\"\n#   For dev images (7.x-3.x branch)\nENV AEGIR_MAKEFILE=\"http://cgit.drupalcode.org/provision/plain/aegir.make\"\n#   For Releases:\n#   ENV AEGIR_MAKEFILE http://cgit.drupalcode.org/provision/plain/aegir-release.make?h=$AEGIR_VERSION\nVOLUME /var/aegir\n#   docker-entrypoint.sh waits for mysql and runs hostmaster install\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"drush\", \"@hostmaster\", \"hosting-queued\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -qq \\\n && apt-get install apache2 curl php-common php-cli php-dev php-fpm libpcre3-dev php-gd php-curl php-imap php-json php-opcache php-xml php-mbstring php-mysql php-sqlite3 php-apcu libapache2-mod-php cron postfix sudo rsync git-core unzip wget mysql-client -y -qq\n#  Use --build-arg option when running docker build to set these variables.\n#  If wish to \"mount\" a volume to your host, set AEGIR_UID and AEGIR_GIT to your local user's UID.\n#  There are both ARG and ENV lines to make sure the value persists.\n#  See https://docs.docker.com/engine/reference/builder/#/arg\nARG AEGIR_UID=1000\nENV AEGIR_UID=\"${AEGIR_UID:-1000}\"\nRUN echo \"Creating user aegir with UID $AEGIR_UID and GID $AEGIR_GID\"\nRUN addgroup --gid $AEGIR_UID aegir\nRUN adduser --uid $AEGIR_UID --gid $AEGIR_UID --system --shell /bin/bash --home /var/aegir aegir\nRUN adduser aegir www-data\nRUN a2enmod rewrite\nRUN a2enmod ssl\nRUN ln -s /var/aegir/config/apache.conf /etc/apache2/conf-available/aegir.conf\nRUN ln -s /etc/apache2/conf-available/aegir.conf /etc/apache2/conf-enabled/aegir.conf\nCOPY sudoers-aegir /etc/sudoers.d/aegir\nRUN chmod 0440 /etc/sudoers.d/aegir\nRUN wget https://raw.githubusercontent.com/composer/getcomposer.org/1b137f8bf6db3e79a38a5bc45324414a6b1f9df2/web/installer -O - -q | php -- --quiet\nRUN cp composer.phar /usr/local/bin/composer\nRUN wget https://github.com/drush-ops/drush/releases/download/8.1.16/drush.phar -O - -q > /usr/local/bin/drush\nRUN chmod +x /usr/local/bin/composer\nRUN chmod +x /usr/local/bin/drush\n#  Install fix-permissions and fix-ownership scripts\nRUN wget http://cgit.drupalcode.org/hosting_tasks_extra/plain/fix_permissions/scripts/standalone-install-fix-permissions-ownership.sh\nRUN bash standalone-install-fix-permissions-ownership.sh\nCOPY docker-entrypoint.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh\nCOPY run-tests.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/run-tests.sh\n# COPY docker-entrypoint-tests.sh /usr/local/bin/\n# RUN chmod +x /usr/local/bin/docker-entrypoint-tests.sh\nCOPY docker-entrypoint-queue.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint-queue.sh\n#  Prepare Aegir Logs folder.\nRUN mkdir /var/log/aegir\nRUN chown aegir:aegir /var/log/aegir\nRUN echo 'Hello, Aegir.' > /var/log/aegir/system.log\n#  Don't install provision. Downstream tags will do this with the right version.\n# # Install Provision for all.\n# ENV PROVISION_VERSION 7.x-3.x\n# RUN mkdir -p /usr/share/drush/commands\n# RUN drush dl --destination=/usr/share/drush/commands provision-$PROVISION_VERSION -y\nENV REGISTRY_REBUILD_VERSION=\"7.x-2.5\"\nRUN drush dl --destination=/usr/share/drush/commands registry_rebuild-$REGISTRY_REBUILD_VERSION -y\nUSER aegir\nRUN mkdir /var/aegir/config\nRUN mkdir /var/aegir/.drush\n#  You may change this environment at run time. User UID 1 is created with this email address.\nENV AEGIR_CLIENT_EMAIL=\"aegir@aegir.local.computer\"\nENV AEGIR_CLIENT_NAME=\"admin\"\nENV AEGIR_PROFILE=\"hostmaster\"\nENV AEGIR_VERSION=\"7.x-3.x\"\nENV PROVISION_VERSION=\"7.x-3.x\"\nENV AEGIR_WORKING_COPY=\"0\"\nENV AEGIR_HTTP_SERVICE_TYPE=\"apache\"\n#  Must be fixed across versions so we can upgrade containers.\nENV AEGIR_HOSTMASTER_ROOT=\"/var/aegir/hostmaster\"\nWORKDIR /var/aegir\n#  The Hostname of the database server to use\nENV AEGIR_DATABASE_SERVER=\"database\"\n#  For dev images (7.x-3.x branch)\nENV AEGIR_MAKEFILE=\"http://cgit.drupalcode.org/provision/plain/aegir.make\"\n#  For Releases:\n#  ENV AEGIR_MAKEFILE http://cgit.drupalcode.org/provision/plain/aegir-release.make?h=$AEGIR_VERSION\nVOLUME /var/aegir\n#  docker-entrypoint.sh waits for mysql and runs hostmaster install\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"drush\", \"@hostmaster\", \"hosting-queued\"]\n","injectedSmells":[],"originalDockerfileHash":"3534849ba321c5b009a1c879cf06b591","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update -qq \\\n && apt-get install apache2 curl php-common php-cli php-dev php-fpm libpcre3-dev php-gd php-curl php-imap php-json php-opcache php-xml php-mbstring php-mysql php-sqlite3 php-apcu libapache2-mod-php cron postfix sudo rsync git-core unzip wget mysql-client -y -qq\n#   Use --build-arg option when running docker build to set these variables.\n#   If wish to \"mount\" a volume to your host, set AEGIR_UID and AEGIR_GIT to your local user's UID.\n#   There are both ARG and ENV lines to make sure the value persists.\n#   See https://docs.docker.com/engine/reference/builder/#/arg\nARG AEGIR_UID=1000\nENV AEGIR_UID=\"${AEGIR_UID:-1000}\"\nRUN echo \"Creating user aegir with UID $AEGIR_UID and GID $AEGIR_GID\"\nRUN addgroup --gid $AEGIR_UID aegir\nRUN adduser --uid $AEGIR_UID --gid $AEGIR_UID --system --shell /bin/bash --home /var/aegir aegir\nRUN adduser aegir www-data\nRUN a2enmod rewrite\nRUN a2enmod ssl\nRUN ln -s /var/aegir/config/apache.conf /etc/apache2/conf-available/aegir.conf\nRUN ln -s /etc/apache2/conf-available/aegir.conf /etc/apache2/conf-enabled/aegir.conf\nCOPY sudoers-aegir /etc/sudoers.d/aegir\nRUN chmod 0440 /etc/sudoers.d/aegir\nRUN wget https://raw.githubusercontent.com/composer/getcomposer.org/1b137f8bf6db3e79a38a5bc45324414a6b1f9df2/web/installer -O - -q | php -- --quiet\nRUN cp composer.phar /usr/local/bin/composer\nRUN wget https://github.com/drush-ops/drush/releases/download/8.1.16/drush.phar -O - -q > /usr/local/bin/drush\nRUN chmod +x /usr/local/bin/composer\nRUN chmod +x /usr/local/bin/drush\n#   Install fix-permissions and fix-ownership scripts\nRUN wget http://cgit.drupalcode.org/hosting_tasks_extra/plain/fix_permissions/scripts/standalone-install-fix-permissions-ownership.sh\nRUN bash standalone-install-fix-permissions-ownership.sh\nCOPY docker-entrypoint.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh\nCOPY run-tests.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/run-tests.sh\n#  COPY docker-entrypoint-tests.sh /usr/local/bin/\n#  RUN chmod +x /usr/local/bin/docker-entrypoint-tests.sh\nCOPY docker-entrypoint-queue.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-entrypoint-queue.sh\n#   Prepare Aegir Logs folder.\nRUN mkdir /var/log/aegir\nRUN chown aegir:aegir /var/log/aegir\nRUN echo 'Hello, Aegir.' > /var/log/aegir/system.log\n#   Don't install provision. Downstream tags will do this with the right version.\n#  # Install Provision for all.\n#  ENV PROVISION_VERSION 7.x-3.x\n#  RUN mkdir -p /usr/share/drush/commands\n#  RUN drush dl --destination=/usr/share/drush/commands provision-$PROVISION_VERSION -y\nENV REGISTRY_REBUILD_VERSION=\"7.x-2.5\"\nRUN drush dl --destination=/usr/share/drush/commands registry_rebuild-$REGISTRY_REBUILD_VERSION -y\nUSER aegir\nRUN mkdir /var/aegir/config\nRUN mkdir /var/aegir/.drush\n#   You may change this environment at run time. User UID 1 is created with this email address.\nENV AEGIR_CLIENT_EMAIL=\"aegir@aegir.local.computer\"\nENV AEGIR_CLIENT_NAME=\"admin\"\nENV AEGIR_PROFILE=\"hostmaster\"\nENV AEGIR_VERSION=\"7.x-3.x\"\nENV PROVISION_VERSION=\"7.x-3.x\"\nENV AEGIR_WORKING_COPY=\"0\"\nENV AEGIR_HTTP_SERVICE_TYPE=\"apache\"\n#   Must be fixed across versions so we can upgrade containers.\nENV AEGIR_HOSTMASTER_ROOT=\"/var/aegir/hostmaster\"\nWORKDIR /var/aegir\n#   The Hostname of the database server to use\nENV AEGIR_DATABASE_SERVER=\"database\"\n#   For dev images (7.x-3.x branch)\nENV AEGIR_MAKEFILE=\"http://cgit.drupalcode.org/provision/plain/aegir.make\"\n#   For Releases:\n#   ENV AEGIR_MAKEFILE http://cgit.drupalcode.org/provision/plain/aegir-release.make?h=$AEGIR_VERSION\nVOLUME /var/aegir\n#   docker-entrypoint.sh waits for mysql and runs hostmaster install\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"drush\", \"@hostmaster\", \"hosting-queued\"]\n","originalDockerfileUglifiedHash":"82bdbd7a329d5d0a3c32947f77a67bb2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c759cdcf024ebcd6196b19111e307b12cd38ec8f.dockerfile"}