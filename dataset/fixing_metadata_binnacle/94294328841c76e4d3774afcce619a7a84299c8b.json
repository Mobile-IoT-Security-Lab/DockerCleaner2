{"seed":2863818246,"processedDockerfileHash":"d600a0872619542388b3d9dea1b66dc9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#  # Load docker image\n#\nFROM tatsy/ubuntu-cxx:opencv\n#\n#  # Environment variables\n#\nENV TERM=\"xterm\"\nENV BRANCH_NAME=\"@BRANCH_NAME@\"\nENV PULL_REQUEST=\"@PULL_REQUEST@\"\nENV CC=\"@C_COMPILER@\"\nENV CXX=\"@CXX_COMPILER@\"\nENV PYTHON_VERSION=\"@PYTHON_VERSION@\"\n#\n#  # update/upgrade\n#\nRUN :\nRUN apt-get upgrade -qq\n#\n#  # Install Gcovr\n#\nRUN (apt-get update ;apt-get install --no-install-recommends python-pip -qq )\nRUN pip install gcovr==6.0\n#\n#  # Install cppcheck, cccc, and doxygen\n#\nRUN (apt-get update ;apt-get install --no-install-recommends cppcheck cccc doxygen -qq )\n#\n#  # Install Python through Anaconda\n#\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh\nRUN bash miniconda.sh -b -p $HOME/anaconda\nENV PATH=\"\\\"$HOME/anaconda/bin:$PATH\\\"\"\nRUN conda update --yes conda\nRUN conda install --yes python=$PYTHON_VERSION setuptools numpy scipy pillow six libgcc\n#\n#  # Install Boost\n#\nRUN wget -q https://dl.bintray.com/boostorg/release/1.64.0/source/boost_1_64_0.tar.gz\nRUN tar -zxf boost_1_64_0.tar.gz\nRUN cd boost_1_64_0 \\\n && ./bootstrap.sh \\\n && ./b2 address-model=64 include=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -d0 --with-python -j2 install .\n#\n#  # Install Google test\n#\nRUN git clone https://github.com/google/googletest.git\nRUN cd googletest \\\n && mkdir build \\\n && cd build \\\n && cmake -D gtest_disable_pthreads=ON .. \\\n && make \\\n && make install\n#\n#  # Build lime\n#\nRUN git clone --depth 12 -b $BRANCH_NAME https://github.com/tatsy/lime.git\nRUN if [ $PULL_REQUEST != \"false\" ] ; then cd lime \\\n && git fetch origin +refs/pull/$PULL_REQUEST/merge \\\n && git checkout --quiet --force FETCH_HEAD ; fi\nRUN cd lime \\\n && git submodule update --init --recursive\nRUN cd lime \\\n && cmake -D CMAKE_BUILD_TYPE=Release -D LIME_BUILD_TESTS=ON -D GTEST_ROOT=/usr/local -D PYTHON_INCLUDE_DIR=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -D PYTHON_LIBRARY=`find $HOME/anaconda/lib -name python${PYTHON_VERSION} ` -D LIME_BUILD_PYTHON_MODULE=ON . \\\n && cmake --build .\n#\n#  # Install pylime\n#\nRUN cd lime \\\n && python setup.py install\n#\n#  # # of threads used by OpenMP\n#\nENV OMP_NUM_THREADS=\"4\"\n#\n#  # Define working direcotry\n#\nWORKDIR /root/lime\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n# # Load docker image\n#\nFROM tatsy/ubuntu-cxx:opencv\n#\n# # Environment variables\n#\nENV TERM=\"xterm\"\nENV BRANCH_NAME=\"@BRANCH_NAME@\"\nENV PULL_REQUEST=\"@PULL_REQUEST@\"\nENV CC=\"@C_COMPILER@\"\nENV CXX=\"@CXX_COMPILER@\"\nENV PYTHON_VERSION=\"@PYTHON_VERSION@\"\n#\n# # update/upgrade\n#\nRUN apt-get update -qq\nRUN apt-get upgrade -qq\n#\n# # Install Gcovr\n#\nRUN apt-get install python-pip -qq\nRUN pip install gcovr\n#\n# # Install cppcheck, cccc, and doxygen\n#\nRUN apt-get install cppcheck cccc doxygen -qq\n#\n# # Install Python through Anaconda\n#\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh\nRUN bash miniconda.sh -b -p $HOME/anaconda\nENV PATH=\"\\\"$HOME/anaconda/bin:$PATH\\\"\"\nRUN conda update --yes conda\nRUN conda install --yes python=$PYTHON_VERSION setuptools numpy scipy pillow six libgcc\n#\n# # Install Boost\n#\nRUN wget -q https://dl.bintray.com/boostorg/release/1.64.0/source/boost_1_64_0.tar.gz\nRUN tar -zxf boost_1_64_0.tar.gz\nRUN cd boost_1_64_0 \\\n && ./bootstrap.sh \\\n && ./b2 address-model=64 include=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -d0 --with-python -j2 install .\n#\n# # Install Google test\n#\nRUN git clone https://github.com/google/googletest.git\nRUN cd googletest \\\n && mkdir build \\\n && cd build \\\n && cmake -D gtest_disable_pthreads=ON .. \\\n && make \\\n && make install\n#\n# # Build lime\n#\nRUN git clone --depth 12 -b $BRANCH_NAME https://github.com/tatsy/lime.git\nRUN if [ $PULL_REQUEST != \"false\" ] ; then cd lime \\\n && git fetch origin +refs/pull/$PULL_REQUEST/merge \\\n && git checkout --quiet --force FETCH_HEAD ; fi\nRUN cd lime \\\n && git submodule update --init --recursive\nRUN cd lime \\\n && cmake -D CMAKE_BUILD_TYPE=Release -D LIME_BUILD_TESTS=ON -D GTEST_ROOT=/usr/local -D PYTHON_INCLUDE_DIR=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -D PYTHON_LIBRARY=`find $HOME/anaconda/lib -name python${PYTHON_VERSION} ` -D LIME_BUILD_PYTHON_MODULE=ON . \\\n && cmake --build .\n#\n# # Install pylime\n#\nRUN cd lime \\\n && python setup.py install\n#\n# # # of threads used by OpenMP\n#\nENV OMP_NUM_THREADS=\"4\"\n#\n# # Define working direcotry\n#\nWORKDIR /root/lime\n","injectedSmells":[],"originalDockerfileHash":"d356a794ec648d2f70f8ca5caab26606","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#  # Load docker image\n#\nFROM tatsy/ubuntu-cxx:opencv\n#\n#  # Environment variables\n#\nENV TERM=\"xterm\"\nENV BRANCH_NAME=\"@BRANCH_NAME@\"\nENV PULL_REQUEST=\"@PULL_REQUEST@\"\nENV CC=\"@C_COMPILER@\"\nENV CXX=\"@CXX_COMPILER@\"\nENV PYTHON_VERSION=\"@PYTHON_VERSION@\"\n#\n#  # update/upgrade\n#\nRUN apt-get update -qq\nRUN apt-get upgrade -qq\n#\n#  # Install Gcovr\n#\nRUN apt-get install python-pip -qq\nRUN pip install gcovr\n#\n#  # Install cppcheck, cccc, and doxygen\n#\nRUN apt-get install cppcheck cccc doxygen -qq\n#\n#  # Install Python through Anaconda\n#\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh\nRUN bash miniconda.sh -b -p $HOME/anaconda\nENV PATH=\"\\\"$HOME/anaconda/bin:$PATH\\\"\"\nRUN conda update --yes conda\nRUN conda install --yes python=$PYTHON_VERSION setuptools numpy scipy pillow six libgcc\n#\n#  # Install Boost\n#\nRUN wget -q https://dl.bintray.com/boostorg/release/1.64.0/source/boost_1_64_0.tar.gz\nRUN tar -zxf boost_1_64_0.tar.gz\nRUN cd boost_1_64_0 \\\n && ./bootstrap.sh \\\n && ./b2 address-model=64 include=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -d0 --with-python -j2 install .\n#\n#  # Install Google test\n#\nRUN git clone https://github.com/google/googletest.git\nRUN cd googletest \\\n && mkdir build \\\n && cd build \\\n && cmake -D gtest_disable_pthreads=ON .. \\\n && make \\\n && make install\n#\n#  # Build lime\n#\nRUN git clone --depth 12 -b $BRANCH_NAME https://github.com/tatsy/lime.git\nRUN if [ $PULL_REQUEST != \"false\" ] ; then cd lime \\\n && git fetch origin +refs/pull/$PULL_REQUEST/merge \\\n && git checkout --quiet --force FETCH_HEAD ; fi\nRUN cd lime \\\n && git submodule update --init --recursive\nRUN cd lime \\\n && cmake -D CMAKE_BUILD_TYPE=Release -D LIME_BUILD_TESTS=ON -D GTEST_ROOT=/usr/local -D PYTHON_INCLUDE_DIR=`python -c \"from __future__ import print_function; from distutils import sysconfig; print(sysconfig.get_python_inc())\" ` -D PYTHON_LIBRARY=`find $HOME/anaconda/lib -name python${PYTHON_VERSION} ` -D LIME_BUILD_PYTHON_MODULE=ON . \\\n && cmake --build .\n#\n#  # Install pylime\n#\nRUN cd lime \\\n && python setup.py install\n#\n#  # # of threads used by OpenMP\n#\nENV OMP_NUM_THREADS=\"4\"\n#\n#  # Define working direcotry\n#\nWORKDIR /root/lime\n","originalDockerfileUglifiedHash":"8d1cbeb5b7a76d373e56b419b0d2010b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/94294328841c76e4d3774afcce619a7a84299c8b.dockerfile"}