{"seed":43883002,"processedDockerfileHash":"3b6eeb503addc171c4ea09b906aaca98","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM lsiobase/ubuntu:arm64v8-bionic AS builder\nARG GUAC_VER=\"0.9.14\"\nARG BUILD_DIR=/tmp/guacd-docker-BUILD\nARG PKG_NAME=\"guacd\"\nARG BUILD_DEPENDENCIES=\"           autoconf                       automake                       gcc-6                          libcairo2-dev                  libfreerdp-dev                 libjpeg-turbo8-dev             libossp-uuid-dev               libpng-dev                     libpulse-dev                   libssl-dev                     libtool                        libvorbis-dev                  libwebp-dev                    make\"\nCOPY /buildroot /\nRUN echo \"**** install build deps ****\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends checkinstall curl $BUILD_DEPENDENCIES -qy \\\n && echo \"**** prep build ****\" \\\n && mkdir ${BUILD_DIR} \\\n && ln -sf /usr/bin/gcc-6 /usr/bin/gcc \\\n && curl -o /tmp/guacd.tar.gz -s -L \"https://sourceforge.net/projects/guacamole/files/current/source/guacamole-server-${GUAC_VER}.tar.gz\" \\\n && tar -xf /tmp/guacd.tar.gz --strip=1 -C ${BUILD_DIR} \\\n && echo \"**** build guacd ****\" \\\n && cd ${BUILD_DIR} \\\n && ./configure --with-init-dir=/etc/init.d --prefix=/usr \\\n && make -j 2 CC=gcc-6 \\\n && mkdir ${BUILD_DIR}/doc-pak \\\n && /bin/list-dependencies.sh \"${BUILD_DIR}src/guacd/.libs/guacd\" $( find ${BUILD_DIR} | grep \"so$\" ;) > ${BUILD_DIR}/doc-pak/DEPENDENCIES \\\n && PREFIX=/usr checkinstall -y -D --nodoc --pkgname ${PKG_NAME} --pkgversion ${GUAC_VER} --pakdir /tmp --exclude \"/usr/share/man\",\"/usr/include\",\"/etc\" \\\n && mv /tmp/${PKG_NAME}_${GUAC_VER}-*.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nFROM lsiobase/gui:arm64v8-latest\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"HurricaneHrndz\"\nARG TOMCAT_VER=\"tomcat8\"\nARG GUAC_VER=\"0.9.14\"\nARG PKG_NAME=\"guacd\"\nARG GUACD_DEPENDENCIES=\"           ca-certificates                ghostscript                    libfreerdp-plugins-standard    fonts-liberation               fonts-dejavu                   xfonts-terminus\"\nENV TOMCAT_VER=\"${TOMCAT_VER}\"\n#   Copy deb into this stage\nCOPY --from=builder /tmp/${PKG_NAME}_${GUAC_VER}.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nRUN echo \"**** install guacd ****\" \\\n && dpkg --path-include=/usr/share/doc/${PKG_NAME}/* -i /tmp/${PKG_NAME}_${GUAC_VER}.deb \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${GUACD_DEPENDENCIES} -qy \\\n && apt-get install --no-install-recommends $( cat /usr/share/doc/${PKG_NAME}/DEPENDENCIES ;) -qy \\\n && echo \"**** install guacamole ****\" \\\n && mkdir -p /etc/guacamole/extensions /etc/guacamole/lib \\\n && apt-get install --no-install-recommends ${TOMCAT_VER} ${TOMCAT_VER}-common ${TOMCAT_VER}-user -qy \\\n && curl -so /etc/guacamole/guacamole.war -L https://sourceforge.net/projects/guacamole/files/current/binary/guacamole-${GUAC_VER}.war \\\n && echo \"GUACAMOLE_HOME=/etc/guacamole\" >> /etc/default/${TOMCAT_VER} \\\n && ln -s /etc/guacamole /usr/share/${TOMCAT_VER}/.guacamole \\\n && curl -so /tmp/guacamole-noauth.tar.gz -L http://archive.apache.org/dist/guacamole/${GUAC_VER}/binary/guacamole-auth-noauth-${GUAC_VER}.tar.gz \\\n && mkdir -p /tmp/noauth \\\n && tar -xf /tmp/guacamole-noauth.tar.gz --strip=1 -C /tmp/noauth \\\n && mv /tmp/noauth/guacamole-auth-noauth-${GUAC_VER}.jar /defaults/ \\\n && echo \"**** clean up ****\" \\\n && rm -rf /var/lib/${TOMCAT_VER}/webapps/ROOT /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#   add local files\nCOPY /root /\n#   ports and volumes\nEXPOSE 8080/tcp\nVOLUME /config\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM lsiobase/ubuntu:arm64v8-bionic AS builder\nARG GUAC_VER=\"0.9.14\"\nARG BUILD_DIR=/tmp/guacd-docker-BUILD\nARG PKG_NAME=\"guacd\"\nARG BUILD_DEPENDENCIES=\"           autoconf                       automake                       gcc-6                          libcairo2-dev                  libfreerdp-dev                 libjpeg-turbo8-dev             libossp-uuid-dev               libpng-dev                     libpulse-dev                   libssl-dev                     libtool                        libvorbis-dev                  libwebp-dev                    make\"\nCOPY /buildroot /\nRUN echo \"**** install build deps ****\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends checkinstall curl $BUILD_DEPENDENCIES -qy \\\n && echo \"**** prep build ****\" \\\n && mkdir ${BUILD_DIR} \\\n && ln -sf /usr/bin/gcc-6 /usr/bin/gcc \\\n && curl -o /tmp/guacd.tar.gz -s -L \"https://sourceforge.net/projects/guacamole/files/current/source/guacamole-server-${GUAC_VER}.tar.gz\" \\\n && tar -xf /tmp/guacd.tar.gz --strip=1 -C ${BUILD_DIR} \\\n && echo \"**** build guacd ****\" \\\n && cd ${BUILD_DIR} \\\n && ./configure --with-init-dir=/etc/init.d --prefix=/usr \\\n && make -j 2 CC=gcc-6 \\\n && mkdir ${BUILD_DIR}/doc-pak \\\n && /bin/list-dependencies.sh \"${BUILD_DIR}src/guacd/.libs/guacd\" $( find ${BUILD_DIR} | grep \"so$\" ;) > ${BUILD_DIR}/doc-pak/DEPENDENCIES \\\n && PREFIX=/usr checkinstall -y -D --nodoc --pkgname ${PKG_NAME} --pkgversion ${GUAC_VER} --pakdir /tmp --exclude \"/usr/share/man\",\"/usr/include\",\"/etc\" \\\n && mv /tmp/${PKG_NAME}_${GUAC_VER}-*.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nFROM lsiobase/gui:arm64v8-latest\n#  set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"HurricaneHrndz\"\nARG TOMCAT_VER=\"tomcat8\"\nARG GUAC_VER=\"0.9.14\"\nARG PKG_NAME=\"guacd\"\nARG GUACD_DEPENDENCIES=\"           ca-certificates                ghostscript                    libfreerdp-plugins-standard    fonts-liberation               fonts-dejavu                   xfonts-terminus\"\nENV TOMCAT_VER=\"${TOMCAT_VER}\"\n#  Copy deb into this stage\nCOPY --from=builder /tmp/${PKG_NAME}_${GUAC_VER}.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nRUN echo \"**** install guacd ****\" \\\n && dpkg --path-include=/usr/share/doc/${PKG_NAME}/* -i /tmp/${PKG_NAME}_${GUAC_VER}.deb \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${GUACD_DEPENDENCIES} -qy \\\n && apt-get install --no-install-recommends $( cat /usr/share/doc/${PKG_NAME}/DEPENDENCIES ;) -qy \\\n && echo \"**** install guacamole ****\" \\\n && mkdir -p /etc/guacamole/extensions /etc/guacamole/lib \\\n && apt-get install --no-install-recommends ${TOMCAT_VER} ${TOMCAT_VER}-common ${TOMCAT_VER}-user -qy \\\n && curl -so /etc/guacamole/guacamole.war -L https://sourceforge.net/projects/guacamole/files/current/binary/guacamole-${GUAC_VER}.war \\\n && echo \"GUACAMOLE_HOME=/etc/guacamole\" >> /etc/default/${TOMCAT_VER} \\\n && ln -s /etc/guacamole /usr/share/${TOMCAT_VER}/.guacamole \\\n && curl -so /tmp/guacamole-noauth.tar.gz -L http://archive.apache.org/dist/guacamole/${GUAC_VER}/binary/guacamole-auth-noauth-${GUAC_VER}.tar.gz \\\n && mkdir -p /tmp/noauth \\\n && tar -xf /tmp/guacamole-noauth.tar.gz --strip=1 -C /tmp/noauth \\\n && mv /tmp/noauth/guacamole-auth-noauth-${GUAC_VER}.jar /defaults/ \\\n && echo \"**** clean up ****\" \\\n && rm -rf /var/lib/${TOMCAT_VER}/webapps/ROOT /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#  add local files\nCOPY /root /\n#  ports and volumes\nEXPOSE 8080/tcp\nVOLUME /config\n","injectedSmells":[],"originalDockerfileHash":"908f0de3823f11ebbab92b59029d99fa","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM lsiobase/ubuntu:arm64v8-bionic AS builder\nARG GUAC_VER=\"0.9.14\"\nARG BUILD_DIR=/tmp/guacd-docker-BUILD\nARG PKG_NAME=\"guacd\"\nARG BUILD_DEPENDENCIES=\"           autoconf                       automake                       gcc-6                          libcairo2-dev                  libfreerdp-dev                 libjpeg-turbo8-dev             libossp-uuid-dev               libpng-dev                     libpulse-dev                   libssl-dev                     libtool                        libvorbis-dev                  libwebp-dev                    make\"\nCOPY /buildroot /\nRUN echo \"**** install build deps ****\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends checkinstall curl $BUILD_DEPENDENCIES -qy \\\n && echo \"**** prep build ****\" \\\n && mkdir ${BUILD_DIR} \\\n && ln -sf /usr/bin/gcc-6 /usr/bin/gcc \\\n && curl -o /tmp/guacd.tar.gz -s -L \"https://sourceforge.net/projects/guacamole/files/current/source/guacamole-server-${GUAC_VER}.tar.gz\" \\\n && tar -xf /tmp/guacd.tar.gz --strip=1 -C ${BUILD_DIR} \\\n && echo \"**** build guacd ****\" \\\n && cd ${BUILD_DIR} \\\n && ./configure --with-init-dir=/etc/init.d --prefix=/usr \\\n && make -j 2 CC=gcc-6 \\\n && mkdir ${BUILD_DIR}/doc-pak \\\n && /bin/list-dependencies.sh \"${BUILD_DIR}src/guacd/.libs/guacd\" $( find ${BUILD_DIR} | grep \"so$\" ;) > ${BUILD_DIR}/doc-pak/DEPENDENCIES \\\n && PREFIX=/usr checkinstall -y -D --nodoc --pkgname ${PKG_NAME} --pkgversion ${GUAC_VER} --pakdir /tmp --exclude \"/usr/share/man\",\"/usr/include\",\"/etc\" \\\n && mv /tmp/${PKG_NAME}_${GUAC_VER}-*.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nFROM lsiobase/gui:arm64v8-latest\n#   set version label\nARG BUILD_DATE\nARG VERSION\nLABEL build_version=\"Linuxserver.io version:- ${VERSION} Build-date:- ${BUILD_DATE}\"\nLABEL maintainer=\"HurricaneHrndz\"\nARG TOMCAT_VER=\"tomcat8\"\nARG GUAC_VER=\"0.9.14\"\nARG PKG_NAME=\"guacd\"\nARG GUACD_DEPENDENCIES=\"           ca-certificates                ghostscript                    libfreerdp-plugins-standard    fonts-liberation               fonts-dejavu                   xfonts-terminus\"\nENV TOMCAT_VER=\"${TOMCAT_VER}\"\n#   Copy deb into this stage\nCOPY --from=builder /tmp/${PKG_NAME}_${GUAC_VER}.deb /tmp/${PKG_NAME}_${GUAC_VER}.deb\nRUN echo \"**** install guacd ****\" \\\n && dpkg --path-include=/usr/share/doc/${PKG_NAME}/* -i /tmp/${PKG_NAME}_${GUAC_VER}.deb \\\n && apt-get update \\\n && apt-get install --no-install-recommends ${GUACD_DEPENDENCIES} -qy \\\n && apt-get install --no-install-recommends $( cat /usr/share/doc/${PKG_NAME}/DEPENDENCIES ;) -qy \\\n && echo \"**** install guacamole ****\" \\\n && mkdir -p /etc/guacamole/extensions /etc/guacamole/lib \\\n && apt-get install --no-install-recommends ${TOMCAT_VER} ${TOMCAT_VER}-common ${TOMCAT_VER}-user -qy \\\n && curl -so /etc/guacamole/guacamole.war -L https://sourceforge.net/projects/guacamole/files/current/binary/guacamole-${GUAC_VER}.war \\\n && echo \"GUACAMOLE_HOME=/etc/guacamole\" >> /etc/default/${TOMCAT_VER} \\\n && ln -s /etc/guacamole /usr/share/${TOMCAT_VER}/.guacamole \\\n && curl -so /tmp/guacamole-noauth.tar.gz -L http://archive.apache.org/dist/guacamole/${GUAC_VER}/binary/guacamole-auth-noauth-${GUAC_VER}.tar.gz \\\n && mkdir -p /tmp/noauth \\\n && tar -xf /tmp/guacamole-noauth.tar.gz --strip=1 -C /tmp/noauth \\\n && mv /tmp/noauth/guacamole-auth-noauth-${GUAC_VER}.jar /defaults/ \\\n && echo \"**** clean up ****\" \\\n && rm -rf /var/lib/${TOMCAT_VER}/webapps/ROOT /tmp/* /var/lib/apt/lists/* /var/tmp/*\n#   add local files\nCOPY /root /\n#   ports and volumes\nEXPOSE 8080/tcp\nVOLUME /config\n","originalDockerfileUglifiedHash":"d04314865ffccea331490424f5ba0ed7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6e4f019b7bd6d905387896b18ab5600ba29a2e68.dockerfile"}