{"seed":296373486,"processedDockerfileHash":"73017039a55d4312bbc6613e456b4402","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM aqzt/docker-alpine\nLABEL maintainer=\"aqzt.com (ppabc@qq.com)\"\n#  ## Default Runtime Environment Variables\nENV ENABLE_HOSTS=\"TRUE\" \\\n    ENABLE_SMTP=\"FALSE\"\n#  ## Dependency Installation\nRUN apk update ; apk add apache2-utils=2.4.57-r0 ca-certificates=20220614-r4 mariadb-client=10.6.12-r0 openssl=3.0.8-r3 nginx=1.22.1-r0 libpng-dev=1.6.38-r0 libpng-utils=1.6.38-r0 libpng=1.6.38-r0 imagemagick=7.1.0.62-r0 php7 php7-common php7-apcu php7-amqp php7-bcmath php7-bz2 php7-calendar php7-ctype php7-curl php7-dba php7-dom php7-embed php7-enchant php7-exif php7-fileinfo php7-fpm php7-ftp php7-gd php7-gettext php7-gmp php7-iconv php7-imagick php7-imagick-dev php7-imap php7-intl php7-json php7-ldap php7-mailparse php7-mbstring php7-mcrypt php7-memcached php7-mysqli php7-mysqlnd php7-odbc php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-pgsql php7-phar php7-posix php7-pspell php7-recode php7-redis php7-session php7-shmop php7-simplexml php7-snmp php7-soap php7-sockets php7-sqlite3 php7-tidy php7-tokenizer php7-wddx php7-xdebug php7-xml php7-xmlreader php7-xmlrpc php7-xmlwriter php7-xml php7-zip php7-zlib php7-zmq ; rm -rf /var/cache/apk/* ; sed -i 's/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/g' /etc/php7/php.ini ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd- ; ln -s /sbin/php-fpm7 /sbin/php-fpm ; curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin --filename=composer ; mkdir -p /www/logs\n#  ## Networking Configuration\nEXPOSE 80/tcp 443/tcp 9002/tcp\n#  ## Files Addition\nCOPY root /\nRUN chmod +x /etc/zabbix/zabbix_agentd.conf.d/scripts/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM aqzt/docker-alpine\nLABEL maintainer=\"aqzt.com (ppabc@qq.com)\"\n# ## Default Runtime Environment Variables\nENV ENABLE_HOSTS=\"TRUE\" \\\n    ENABLE_SMTP=\"FALSE\"\n# ## Dependency Installation\nRUN apk update ; apk add apache2-utils ca-certificates mariadb-client openssl nginx libpng-dev libpng-utils libpng imagemagick php7 php7-common php7-apcu php7-amqp php7-bcmath php7-bz2 php7-calendar php7-ctype php7-curl php7-dba php7-dom php7-embed php7-enchant php7-exif php7-fileinfo php7-fpm php7-ftp php7-gd php7-gettext php7-gmp php7-iconv php7-imagick php7-imagick-dev php7-imap php7-intl php7-json php7-ldap php7-mailparse php7-mbstring php7-mcrypt php7-memcached php7-mysqli php7-mysqlnd php7-odbc php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-pgsql php7-phar php7-posix php7-pspell php7-recode php7-redis php7-session php7-shmop php7-simplexml php7-snmp php7-soap php7-sockets php7-sqlite3 php7-tidy php7-tokenizer php7-wddx php7-xdebug php7-xml php7-xmlreader php7-xmlrpc php7-xmlwriter php7-xml php7-zip php7-zlib php7-zmq ; rm -rf /var/cache/apk/* ; sed -i 's/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/g' /etc/php7/php.ini ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd- ; ln -s /sbin/php-fpm7 /sbin/php-fpm ; curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin --filename=composer ; mkdir -p /www/logs\n# ## Networking Configuration\nEXPOSE 80/tcp 443/tcp 9002/tcp\n# ## Files Addition\nADD root /\nRUN chmod +x /etc/zabbix/zabbix_agentd.conf.d/scripts/*\n","injectedSmells":[],"originalDockerfileHash":"97e07729db54b74d16adc3ed11aa4cee","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM aqzt/docker-alpine\nLABEL maintainer=\"aqzt.com (ppabc@qq.com)\"\n#  ## Default Runtime Environment Variables\nENV ENABLE_HOSTS=\"TRUE\" \\\n    ENABLE_SMTP=\"FALSE\"\n#  ## Dependency Installation\nRUN apk update ; apk add apache2-utils ca-certificates mariadb-client openssl nginx libpng-dev libpng-utils libpng imagemagick php7 php7-common php7-apcu php7-amqp php7-bcmath php7-bz2 php7-calendar php7-ctype php7-curl php7-dba php7-dom php7-embed php7-enchant php7-exif php7-fileinfo php7-fpm php7-ftp php7-gd php7-gettext php7-gmp php7-iconv php7-imagick php7-imagick-dev php7-imap php7-intl php7-json php7-ldap php7-mailparse php7-mbstring php7-mcrypt php7-memcached php7-mysqli php7-mysqlnd php7-odbc php7-opcache php7-openssl php7-pcntl php7-pdo php7-pdo_mysql php7-pdo_pgsql php7-pdo_sqlite php7-pgsql php7-phar php7-posix php7-pspell php7-recode php7-redis php7-session php7-shmop php7-simplexml php7-snmp php7-soap php7-sockets php7-sqlite3 php7-tidy php7-tokenizer php7-wddx php7-xdebug php7-xml php7-xmlreader php7-xmlrpc php7-xmlwriter php7-xml php7-zip php7-zlib php7-zmq ; rm -rf /var/cache/apk/* ; sed -i 's/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/g' /etc/php7/php.ini ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd ; sed -i \"s/nginx:x:100:101:nginx:\\/var\\/lib\\/nginx:\\/sbin\\/nologin/nginx:x:100:101:nginx:\\/www:\\/bin\\/bash/g\" /etc/passwd- ; ln -s /sbin/php-fpm7 /sbin/php-fpm ; curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin --filename=composer ; mkdir -p /www/logs\n#  ## Networking Configuration\nEXPOSE 80/tcp 443/tcp 9002/tcp\n#  ## Files Addition\nADD root /\nRUN chmod +x /etc/zabbix/zabbix_agentd.conf.d/scripts/*\n","originalDockerfileUglifiedHash":"b4e5bc3f9cb381a3ef801b9a70c3d9a4","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/07fbb26ff1e21e59db581c87ab1fd3a91f7a8325.dockerfile"}