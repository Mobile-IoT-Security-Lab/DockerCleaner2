{"seed":936324446,"processedDockerfileHash":"0580b9f50c2d472b334634a4b42bf78e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2017 The Kubernetes Authors.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM gcr.io/google_containers/ubuntu-slim:0.6\nARG BUILD_DATE\nARG VCS_REF\nARG CASSANDRA_VERSION\nARG DEV_CONTAINER\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"Apache License 2.0\" \\\n      org.label-schema.name=\"k8s-for-greeks/docker-cassandra-k8s\" \\\n      org.label-schema.url=\"https://github.com/k8s-for-greeks/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/k8s-for-greeks/docker-cassandra-k8s\"\nENV CASSANDRA_HOME=\"/usr/local/apache-cassandra-${CASSANDRA_VERSION}\" \\\n    CASSANDRA_CONF=\"/etc/cassandra\" \\\n    CASSANDRA_DATA=\"/cassandra_data\" \\\n    CASSANDRA_LOGS=\"/var/log/cassandra\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64\" \\\n    PATH=\"${PATH}:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/apache-cassandra-${CASSANDRA_VERSION}/bin\" \\\n    DI_VERSION=\"1.2.0\" \\\n    DI_SHA=\"81231da1cd074fdc81af62789fead8641ef3f24b6b07366a1c34e5b059faf363\"\nCOPY files /\nRUN set -e \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jre-headless libjemalloc1 localepurge wget -qq -y --force-yes \\\n && mirror_url=$( wget -q -O - http://www.apache.org/dyn/closer.cgi/cassandra/ | sed -n 's#.*href=\"\\(http://ftp.[^\"]*\\)\".*#\\1#p' | head -n 1 ;) \\\n && wget -q -O - ${mirror_url}/${CASSANDRA_VERSION}/apache-cassandra-${CASSANDRA_VERSION}-bin.tar.gz | tar -xzf - -C /usr/local \\\n && wget -q -O - https://github.com/Yelp/dumb-init/releases/download/v${DI_VERSION}/dumb-init_${DI_VERSION}_amd64 > /sbin/dumb-init \\\n && echo \"$DI_SHA /sbin/dumb-init\" | sha256sum -c - \\\n && chmod +x /sbin/dumb-init \\\n && chmod +x /ready-probe.sh \\\n && mkdir -p /cassandra_data/data \\\n && mkdir -p /etc/cassandra \\\n && mv /logback.xml /cassandra.yaml /jvm.options /etc/cassandra/ \\\n && mv /usr/local/apache-cassandra-${CASSANDRA_VERSION}/conf/cassandra-env.sh /etc/cassandra/ \\\n && adduser --disabled-password --no-create-home --gecos '' --disabled-login cassandra \\\n && chown cassandra: /ready-probe.sh \\\n && if [ -n \"$DEV_CONTAINER\" ] ; then apt-get install --no-install-recommends python -y ; else rm -rf $CASSANDRA_HOME/pylib ; fi \\\n && apt-get -y purge wget localepurge \\\n && apt-get autoremove \\\n && apt-get clean \\\n && rm -rf $CASSANDRA_HOME/*.txt $CASSANDRA_HOME/doc $CASSANDRA_HOME/javadoc $CASSANDRA_HOME/tools/*.yaml $CASSANDRA_HOME/tools/bin/*.bat $CASSANDRA_HOME/bin/*.bat doc man info locale common-licenses ~/.bashrc /var/lib/apt/lists/* /var/log/* /var/cache/debconf/* /etc/systemd /lib/lsb /lib/udev /usr/share/doc/ /usr/share/doc-base/ /usr/share/man/ /tmp/* /usr/lib/jvm/java-8-openjdk-amd64/jre/plugin /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/javaws /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/jjs /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/orbd /usr/lib/jvm/java-8-openjdk-amd64/bin/pack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/policytool /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmid /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmiregistry /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/servertool /usr/lib/jvm/java-8-openjdk-amd64/bin/tnameserv /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/unpack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/javaws.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/deploy* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/desktop /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*javafx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*jfx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libdecora_sse.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libprism_*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libfxplugins.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libglass.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libgstreamer-lite.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjavafx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjfx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/jfxrt.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/nashorn.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/oblique-fonts /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/plugin.jar /usr/lib/jvm/java-8-openjdk-amd64/man\nVOLUME [\"/$CASSANDRA_DATA\"]\n#   7000: intra-node communication\n#   7001: TLS intra-node communication\n#   7199: JMX\n#   9042: CQL\n#   9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nCMD [\"/sbin/dumb-init\", \"/bin/bash\", \"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2017 The Kubernetes Authors.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM gcr.io/google_containers/ubuntu-slim:0.6\nARG BUILD_DATE\nARG VCS_REF\nARG CASSANDRA_VERSION\nARG DEV_CONTAINER\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"Apache License 2.0\" \\\n      org.label-schema.name=\"k8s-for-greeks/docker-cassandra-k8s\" \\\n      org.label-schema.url=\"https://github.com/k8s-for-greeks/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/k8s-for-greeks/docker-cassandra-k8s\"\nENV CASSANDRA_HOME=\"/usr/local/apache-cassandra-${CASSANDRA_VERSION}\" \\\n    CASSANDRA_CONF=\"/etc/cassandra\" \\\n    CASSANDRA_DATA=\"/cassandra_data\" \\\n    CASSANDRA_LOGS=\"/var/log/cassandra\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64\" \\\n    PATH=\"${PATH}:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/apache-cassandra-${CASSANDRA_VERSION}/bin\" \\\n    DI_VERSION=\"1.2.0\" \\\n    DI_SHA=\"81231da1cd074fdc81af62789fead8641ef3f24b6b07366a1c34e5b059faf363\"\nADD files /\nRUN set -e \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jre-headless libjemalloc1 localepurge wget -qq -y --force-yes \\\n && mirror_url=$( wget -q -O - http://www.apache.org/dyn/closer.cgi/cassandra/ | sed -n 's#.*href=\"\\(http://ftp.[^\"]*\\)\".*#\\1#p' | head -n 1 ;) \\\n && wget -q -O - ${mirror_url}/${CASSANDRA_VERSION}/apache-cassandra-${CASSANDRA_VERSION}-bin.tar.gz | tar -xzf - -C /usr/local \\\n && wget -q -O - https://github.com/Yelp/dumb-init/releases/download/v${DI_VERSION}/dumb-init_${DI_VERSION}_amd64 > /sbin/dumb-init \\\n && echo \"$DI_SHA /sbin/dumb-init\" | sha256sum -c - \\\n && chmod +x /sbin/dumb-init \\\n && chmod +x /ready-probe.sh \\\n && mkdir -p /cassandra_data/data \\\n && mkdir -p /etc/cassandra \\\n && mv /logback.xml /cassandra.yaml /jvm.options /etc/cassandra/ \\\n && mv /usr/local/apache-cassandra-${CASSANDRA_VERSION}/conf/cassandra-env.sh /etc/cassandra/ \\\n && adduser --disabled-password --no-create-home --gecos '' --disabled-login cassandra \\\n && chown cassandra: /ready-probe.sh \\\n && if [ -n \"$DEV_CONTAINER\" ] ; then apt-get install --no-install-recommends python -y ; else rm -rf $CASSANDRA_HOME/pylib ; fi \\\n && apt-get -y purge wget localepurge \\\n && apt-get autoremove \\\n && apt-get clean \\\n && rm -rf $CASSANDRA_HOME/*.txt $CASSANDRA_HOME/doc $CASSANDRA_HOME/javadoc $CASSANDRA_HOME/tools/*.yaml $CASSANDRA_HOME/tools/bin/*.bat $CASSANDRA_HOME/bin/*.bat doc man info locale common-licenses ~/.bashrc /var/lib/apt/lists/* /var/log/* /var/cache/debconf/* /etc/systemd /lib/lsb /lib/udev /usr/share/doc/ /usr/share/doc-base/ /usr/share/man/ /tmp/* /usr/lib/jvm/java-8-openjdk-amd64/jre/plugin /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/javaws /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/jjs /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/orbd /usr/lib/jvm/java-8-openjdk-amd64/bin/pack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/policytool /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmid /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmiregistry /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/servertool /usr/lib/jvm/java-8-openjdk-amd64/bin/tnameserv /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/unpack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/javaws.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/deploy* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/desktop /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*javafx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*jfx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libdecora_sse.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libprism_*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libfxplugins.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libglass.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libgstreamer-lite.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjavafx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjfx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/jfxrt.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/nashorn.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/oblique-fonts /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/plugin.jar /usr/lib/jvm/java-8-openjdk-amd64/man\nVOLUME [\"/$CASSANDRA_DATA\"]\n#  7000: intra-node communication\n#  7001: TLS intra-node communication\n#  7199: JMX\n#  9042: CQL\n#  9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nCMD [\"/sbin/dumb-init\", \"/bin/bash\", \"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"88fc272e17b94b496c02a50337cf2d5e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2017 The Kubernetes Authors.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\nFROM gcr.io/google_containers/ubuntu-slim:0.6\nARG BUILD_DATE\nARG VCS_REF\nARG CASSANDRA_VERSION\nARG DEV_CONTAINER\nLABEL org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n      org.label-schema.license=\"Apache License 2.0\" \\\n      org.label-schema.name=\"k8s-for-greeks/docker-cassandra-k8s\" \\\n      org.label-schema.url=\"https://github.com/k8s-for-greeks/\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.vcs-url=\"https://github.com/k8s-for-greeks/docker-cassandra-k8s\"\nENV CASSANDRA_HOME=\"/usr/local/apache-cassandra-${CASSANDRA_VERSION}\" \\\n    CASSANDRA_CONF=\"/etc/cassandra\" \\\n    CASSANDRA_DATA=\"/cassandra_data\" \\\n    CASSANDRA_LOGS=\"/var/log/cassandra\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64\" \\\n    PATH=\"${PATH}:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/apache-cassandra-${CASSANDRA_VERSION}/bin\" \\\n    DI_VERSION=\"1.2.0\" \\\n    DI_SHA=\"81231da1cd074fdc81af62789fead8641ef3f24b6b07366a1c34e5b059faf363\"\nADD files /\nRUN set -e \\\n && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jre-headless libjemalloc1 localepurge wget -qq -y --force-yes \\\n && mirror_url=$( wget -q -O - http://www.apache.org/dyn/closer.cgi/cassandra/ | sed -n 's#.*href=\"\\(http://ftp.[^\"]*\\)\".*#\\1#p' | head -n 1 ;) \\\n && wget -q -O - ${mirror_url}/${CASSANDRA_VERSION}/apache-cassandra-${CASSANDRA_VERSION}-bin.tar.gz | tar -xzf - -C /usr/local \\\n && wget -q -O - https://github.com/Yelp/dumb-init/releases/download/v${DI_VERSION}/dumb-init_${DI_VERSION}_amd64 > /sbin/dumb-init \\\n && echo \"$DI_SHA /sbin/dumb-init\" | sha256sum -c - \\\n && chmod +x /sbin/dumb-init \\\n && chmod +x /ready-probe.sh \\\n && mkdir -p /cassandra_data/data \\\n && mkdir -p /etc/cassandra \\\n && mv /logback.xml /cassandra.yaml /jvm.options /etc/cassandra/ \\\n && mv /usr/local/apache-cassandra-${CASSANDRA_VERSION}/conf/cassandra-env.sh /etc/cassandra/ \\\n && adduser --disabled-password --no-create-home --gecos '' --disabled-login cassandra \\\n && chown cassandra: /ready-probe.sh \\\n && if [ -n \"$DEV_CONTAINER\" ] ; then apt-get install --no-install-recommends python -y ; else rm -rf $CASSANDRA_HOME/pylib ; fi \\\n && apt-get -y purge wget localepurge \\\n && apt-get autoremove \\\n && apt-get clean \\\n && rm -rf $CASSANDRA_HOME/*.txt $CASSANDRA_HOME/doc $CASSANDRA_HOME/javadoc $CASSANDRA_HOME/tools/*.yaml $CASSANDRA_HOME/tools/bin/*.bat $CASSANDRA_HOME/bin/*.bat doc man info locale common-licenses ~/.bashrc /var/lib/apt/lists/* /var/log/* /var/cache/debconf/* /etc/systemd /lib/lsb /lib/udev /usr/share/doc/ /usr/share/doc-base/ /usr/share/man/ /tmp/* /usr/lib/jvm/java-8-openjdk-amd64/jre/plugin /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/javaws /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/jjs /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/orbd /usr/lib/jvm/java-8-openjdk-amd64/bin/pack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/policytool /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmid /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmiregistry /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/servertool /usr/lib/jvm/java-8-openjdk-amd64/bin/tnameserv /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/unpack200 /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/javaws.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/deploy* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/desktop /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*javafx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*jfx* /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libdecora_sse.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libprism_*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libfxplugins.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libglass.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libgstreamer-lite.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjavafx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjfx*.so /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/jfxrt.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/nashorn.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/oblique-fonts /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/plugin.jar /usr/lib/jvm/java-8-openjdk-amd64/man\nVOLUME [\"/$CASSANDRA_DATA\"]\n#   7000: intra-node communication\n#   7001: TLS intra-node communication\n#   7199: JMX\n#   9042: CQL\n#   9160: thrift service\nEXPOSE 7000/tcp 7001/tcp 7199/tcp 9042/tcp 9160/tcp\nCMD [\"/sbin/dumb-init\", \"/bin/bash\", \"/run.sh\"]\n","originalDockerfileUglifiedHash":"8610582b5756da90a2c97c5edb2731a2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d14401b8f76d82ec30703b8d6734a46721a28790.dockerfile"}