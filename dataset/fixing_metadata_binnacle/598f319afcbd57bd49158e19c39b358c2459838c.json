{"seed":736190279,"processedDockerfileHash":"ea5390537491adec561851a4987d92c1","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   wunder/fuzzy-alpine-nginx-pagespeed\n#\n#   VERSION v1.11.7-1\n#\nFROM quay.io/wunder/fuzzy-alpine-base:v3.4\nMAINTAINER aleksi.johansson@wunder.io\n#   Based on https://github.com/pagespeed/ngx_pagespeed/issues/1181#issuecomment-250776751.\n#   Secret Google tarball releases of mod_pagespeed from here https://github.com/pagespeed/mod_pagespeed/issues/968.\n#   Set versions as environment variables so that they can be inspected later.\nENV LIBPNG_VERSION=\"1.2.56\" \\\n    PAGESPEED_VERSION=\"1.11.33.4\" \\\n    NGINX_VERSION=\"1.11.7\"\n#   Check http://nginx.org/en/download.html for the latest version.\n#   Add dependencies.\nRUN apk add ca-certificates=20161130-r0 libuuid=2.28-r3 apr=1.5.2-r0 apr-util=1.5.4-r1 libjpeg-turbo=1.4.2-r0 icu=57.1-r3 icu-libs=57.1-r3 openssl=1.0.2n-r0 pcre=8.38-r1 zlib=1.2.11-r0 --no-cache\n#   Add build dependencies\n#   and build mod_pagespeed from source for Alpine for Nginx with ngx_pagespeed.\nRUN set -x \\\n && apk add apache2-dev=2.4.33-r0 apr-dev=1.5.2-r0 apr-util-dev=1.5.4-r1 build-base=0.4-r1 curl=7.60.0-r1 icu-dev=57.1-r3 libjpeg-turbo-dev=1.4.2-r0 linux-headers=4.4.6-r1 gperf=3.0.4-r3 openssl-dev=1.0.2n-r0 pcre-dev=8.38-r1 python=2.7.14-r0 zlib-dev=1.2.11-r0 --no-cache -t .build-deps \\\n && cd /tmp \\\n && curl -L http://prdownloads.sourceforge.net/libpng/libpng-${LIBPNG_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/libpng-${LIBPNG_VERSION} \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --enable-shared --with-libpng-compat \\\n && make install V=0 \\\n && cd /tmp \\\n && curl -L https://dl.google.com/dl/linux/mod-pagespeed/tar/beta/mod-pagespeed-beta-${PAGESPEED_VERSION}-r0.tar.bz2 | tar -jx \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION} \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/automatic_makefile.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/libpng_cflags.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/pthread_nonrecursive_np.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/rename_c_symbols.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/stack_trace_posix.patch | patch -p1 \\\n && ./generate.sh -D use_system_libs=1 -D _GLIBCXX_USE_CXX11_ABI=0 -D use_system_icu=1 \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src \\\n && make BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/ \\\n && make psol BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/out/Release/obj /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/net /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/testing /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/third_party /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/tools /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/url /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/pagespeed_automatic.a /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && cd /tmp \\\n && curl -L http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/nginx-${NGINX_VERSION} \\\n && LD_LIBRARY_PATH=/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib ./configure --sbin-path=/usr/sbin --modules-path=/usr/lib/nginx --with-http_ssl_module --with-http_gzip_static_module --with-file-aio --with-http_v2_module --with-http_stub_status_module --with-http_realip_module --without-http_autoindex_module --without-http_browser_module --without-http_geo_module --without-http_map_module --without-http_memcached_module --without-http_userid_module --without-mail_pop3_module --without-mail_imap_module --without-mail_smtp_module --without-http_split_clients_module --without-http_scgi_module --without-http_referer_module --without-http_upstream_ip_hash_module --prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --pid-path=/var/run/nginx.pid --add-module=/tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta --with-cc-opt=\"-fPIC -I /usr/include/apr-1\" --with-ld-opt=\"-luuid -lapr-1 -laprutil-1 -licudata -licuuc -L/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib -lpng12 -lturbojpeg -ljpeg\" \\\n && make install --silent \\\n && mkdir -p /etc/nginx/conf.d \\\n && cd \\\n && apk del .build-deps \\\n && rm -rf /tmp/* \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && mkdir -p /var/cache/ngx_pagespeed \\\n && chmod -R o+wr /var/cache/ngx_pagespeed\n#   Make our nginx.conf available on the container.\nCOPY etc/nginx/nginx.conf /etc/nginx/nginx.conf\n#   Separate the logs into their own volume to keep them out of the container.\nVOLUME [\"/var/log/nginx\"]\n#   Expose the HTTP and HTTPS ports.\nEXPOSE 80/tcp 443/tcp\n#   Set nginx directly as the entrypoint.\nENTRYPOINT [\"nginx\", \"-g\", \"daemon\", \"off\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  wunder/fuzzy-alpine-nginx-pagespeed\n#\n#  VERSION v1.11.7-1\n#\nFROM quay.io/wunder/fuzzy-alpine-base:v3.4\nMAINTAINER aleksi.johansson@wunder.io\n#  Based on https://github.com/pagespeed/ngx_pagespeed/issues/1181#issuecomment-250776751.\n#  Secret Google tarball releases of mod_pagespeed from here https://github.com/pagespeed/mod_pagespeed/issues/968.\n#  Set versions as environment variables so that they can be inspected later.\nENV LIBPNG_VERSION=\"1.2.56\" \\\n    PAGESPEED_VERSION=\"1.11.33.4\" \\\n    NGINX_VERSION=\"1.11.7\"\n#  Check http://nginx.org/en/download.html for the latest version.\n#  Add dependencies.\nRUN apk --no-cache add ca-certificates libuuid apr apr-util libjpeg-turbo icu icu-libs openssl pcre zlib\n#  Add build dependencies\n#  and build mod_pagespeed from source for Alpine for Nginx with ngx_pagespeed.\nRUN set -x \\\n && apk --no-cache add -t .build-deps apache2-dev apr-dev apr-util-dev build-base curl icu-dev libjpeg-turbo-dev linux-headers gperf openssl-dev pcre-dev python zlib-dev \\\n && cd /tmp \\\n && curl -L http://prdownloads.sourceforge.net/libpng/libpng-${LIBPNG_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/libpng-${LIBPNG_VERSION} \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --enable-shared --with-libpng-compat \\\n && make install V=0 \\\n && cd /tmp \\\n && curl -L https://dl.google.com/dl/linux/mod-pagespeed/tar/beta/mod-pagespeed-beta-${PAGESPEED_VERSION}-r0.tar.bz2 | tar -jx \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION} \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/automatic_makefile.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/libpng_cflags.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/pthread_nonrecursive_np.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/rename_c_symbols.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/stack_trace_posix.patch | patch -p1 \\\n && ./generate.sh -D use_system_libs=1 -D _GLIBCXX_USE_CXX11_ABI=0 -D use_system_icu=1 \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src \\\n && make BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/ \\\n && make psol BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/out/Release/obj /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/net /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/testing /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/third_party /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/tools /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/url /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/pagespeed_automatic.a /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && cd /tmp \\\n && curl -L http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/nginx-${NGINX_VERSION} \\\n && LD_LIBRARY_PATH=/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib ./configure --sbin-path=/usr/sbin --modules-path=/usr/lib/nginx --with-http_ssl_module --with-http_gzip_static_module --with-file-aio --with-http_v2_module --with-http_stub_status_module --with-http_realip_module --without-http_autoindex_module --without-http_browser_module --without-http_geo_module --without-http_map_module --without-http_memcached_module --without-http_userid_module --without-mail_pop3_module --without-mail_imap_module --without-mail_smtp_module --without-http_split_clients_module --without-http_scgi_module --without-http_referer_module --without-http_upstream_ip_hash_module --prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --pid-path=/var/run/nginx.pid --add-module=/tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta --with-cc-opt=\"-fPIC -I /usr/include/apr-1\" --with-ld-opt=\"-luuid -lapr-1 -laprutil-1 -licudata -licuuc -L/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib -lpng12 -lturbojpeg -ljpeg\" \\\n && make install --silent \\\n && mkdir -p /etc/nginx/conf.d \\\n && cd \\\n && apk del .build-deps \\\n && rm -rf /tmp/* \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && mkdir -p /var/cache/ngx_pagespeed \\\n && chmod -R o+wr /var/cache/ngx_pagespeed\n#  Make our nginx.conf available on the container.\nADD etc/nginx/nginx.conf /etc/nginx/nginx.conf\n#  Separate the logs into their own volume to keep them out of the container.\nVOLUME [\"/var/log/nginx\"]\n#  Expose the HTTP and HTTPS ports.\nEXPOSE 80/tcp 443/tcp\n#  Set nginx directly as the entrypoint.\nENTRYPOINT [\"nginx\", \"-g\", \"daemon\", \"off\"]\n","injectedSmells":[],"originalDockerfileHash":"4cfc03d6bc9336f8e2cd6f3e2be15f47","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   wunder/fuzzy-alpine-nginx-pagespeed\n#\n#   VERSION v1.11.7-1\n#\nFROM quay.io/wunder/fuzzy-alpine-base:v3.4\nMAINTAINER aleksi.johansson@wunder.io\n#   Based on https://github.com/pagespeed/ngx_pagespeed/issues/1181#issuecomment-250776751.\n#   Secret Google tarball releases of mod_pagespeed from here https://github.com/pagespeed/mod_pagespeed/issues/968.\n#   Set versions as environment variables so that they can be inspected later.\nENV LIBPNG_VERSION=\"1.2.56\" \\\n    PAGESPEED_VERSION=\"1.11.33.4\" \\\n    NGINX_VERSION=\"1.11.7\"\n#   Check http://nginx.org/en/download.html for the latest version.\n#   Add dependencies.\nRUN apk --no-cache add ca-certificates libuuid apr apr-util libjpeg-turbo icu icu-libs openssl pcre zlib\n#   Add build dependencies\n#   and build mod_pagespeed from source for Alpine for Nginx with ngx_pagespeed.\nRUN set -x \\\n && apk --no-cache add -t .build-deps apache2-dev apr-dev apr-util-dev build-base curl icu-dev libjpeg-turbo-dev linux-headers gperf openssl-dev pcre-dev python zlib-dev \\\n && cd /tmp \\\n && curl -L http://prdownloads.sourceforge.net/libpng/libpng-${LIBPNG_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/libpng-${LIBPNG_VERSION} \\\n && ./configure --build=$CBUILD --host=$CHOST --prefix=/usr --enable-shared --with-libpng-compat \\\n && make install V=0 \\\n && cd /tmp \\\n && curl -L https://dl.google.com/dl/linux/mod-pagespeed/tar/beta/mod-pagespeed-beta-${PAGESPEED_VERSION}-r0.tar.bz2 | tar -jx \\\n && curl -L https://github.com/pagespeed/ngx_pagespeed/archive/v${PAGESPEED_VERSION}-beta.tar.gz | tar -zx \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION} \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/automatic_makefile.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/libpng_cflags.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/pthread_nonrecursive_np.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/rename_c_symbols.patch | patch -p1 \\\n && curl -L https://raw.githubusercontent.com/wunderkraut/alpine-nginx-pagespeed/master/patches/stack_trace_posix.patch | patch -p1 \\\n && ./generate.sh -D use_system_libs=1 -D _GLIBCXX_USE_CXX11_ABI=0 -D use_system_icu=1 \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src \\\n && make BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && cd /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/ \\\n && make psol BUILDTYPE=Release CXXFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" CFLAGS=\" -I/usr/include/apr-1 -I/tmp/libpng-${LIBPNG_VERSION} -fPIC -D_GLIBCXX_USE_CXX11_ABI=0\" \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && mkdir -p /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/out/Release/obj /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/out/Release/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/net /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/testing /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/third_party /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/tools /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/url /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/include/ \\\n && cp -r /tmp/modpagespeed-${PAGESPEED_VERSION}/src/pagespeed/automatic/pagespeed_automatic.a /tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta/psol/lib/Release/linux/x64 \\\n && cd /tmp \\\n && curl -L http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz | tar -zx \\\n && cd /tmp/nginx-${NGINX_VERSION} \\\n && LD_LIBRARY_PATH=/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib ./configure --sbin-path=/usr/sbin --modules-path=/usr/lib/nginx --with-http_ssl_module --with-http_gzip_static_module --with-file-aio --with-http_v2_module --with-http_stub_status_module --with-http_realip_module --without-http_autoindex_module --without-http_browser_module --without-http_geo_module --without-http_map_module --without-http_memcached_module --without-http_userid_module --without-mail_pop3_module --without-mail_imap_module --without-mail_smtp_module --without-http_split_clients_module --without-http_scgi_module --without-http_referer_module --without-http_upstream_ip_hash_module --prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --pid-path=/var/run/nginx.pid --add-module=/tmp/ngx_pagespeed-${PAGESPEED_VERSION}-beta --with-cc-opt=\"-fPIC -I /usr/include/apr-1\" --with-ld-opt=\"-luuid -lapr-1 -laprutil-1 -licudata -licuuc -L/tmp/modpagespeed-${PAGESPEED_VERSION}/usr/lib -lpng12 -lturbojpeg -ljpeg\" \\\n && make install --silent \\\n && mkdir -p /etc/nginx/conf.d \\\n && cd \\\n && apk del .build-deps \\\n && rm -rf /tmp/* \\\n && ln -sf /dev/stdout /var/log/nginx/access.log \\\n && ln -sf /dev/stderr /var/log/nginx/error.log \\\n && mkdir -p /var/cache/ngx_pagespeed \\\n && chmod -R o+wr /var/cache/ngx_pagespeed\n#   Make our nginx.conf available on the container.\nADD etc/nginx/nginx.conf /etc/nginx/nginx.conf\n#   Separate the logs into their own volume to keep them out of the container.\nVOLUME [\"/var/log/nginx\"]\n#   Expose the HTTP and HTTPS ports.\nEXPOSE 80/tcp 443/tcp\n#   Set nginx directly as the entrypoint.\nENTRYPOINT [\"nginx\", \"-g\", \"daemon\", \"off\"]\n","originalDockerfileUglifiedHash":"f6a66741c7552b8b5a1f3d570b9ab117","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/598f319afcbd57bd49158e19c39b358c2459838c.dockerfile"}