{"seed":3823725945,"processedDockerfileHash":"0876e45b3d71cb8d59fc7a451a06ccda","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM fedora:27\nEXPOSE 5222/tcp\nVOLUME [\"/etc/spectrum2/transports\", \"/var/lib/spectrum2\"]\nARG commit=unknown\nRUN echo $commit\n#   Spectrum 2\nRUN dnf install ImageMagick protobuf swiften gcc gcc-c++ make libpqxx-devel libpurple-devel protobuf-devel swiften-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel log4cxx-devel gettext libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel python-pip zlib-devel libjpeg-devel python-devel mysql-devel popt-devel git libev-libevent-devel qt-devel dbus-glib-devel libcurl-devel wget mercurial libtool libgnome-keyring-devel nss-devel jsoncpp-devel purple-hangouts -y \\\n && echo \"---> Installing Spectrum 2\" \\\n && git clone git://github.com/hanzz/spectrum2.git \\\n && cd spectrum2 \\\n && ./packaging/fedora/build_rpm.sh \\\n && rpm -U /root/rpmbuild/RPMS/x86_64/*.rpm \\\n && cp ./packaging/docker/run.sh /run.sh \\\n && cd .. \\\n && rm -rf spectrum2 \\\n && rm -rf ~/rpmbuild \\\n && dnf mark install json-glib \\\n && echo \"---> Installing purple-instagram\" \\\n && git clone https://github.com/EionRobb/purple-instagram.git \\\n && cd purple-instagram \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-instagram \\\n && echo \"---> Installing icyque\" \\\n && git clone git://github.com/EionRobb/icyque.git \\\n && cd icyque \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf icyque \\\n && echo \"---> Installing purple-facebook\" \\\n && wget https://github.com/dequis/purple-facebook/releases/download/v0.9.6/purple-facebook-0.9.6.tar.gz \\\n && tar -xf purple-facebook-0.9.6.tar.gz \\\n && cd purple-facebook-0.9.6 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-facebook* \\\n && echo \"---> Installing skype4pidgin\" \\\n && git clone git://github.com/EionRobb/skype4pidgin.git \\\n && cd skype4pidgin/skypeweb \\\n && make CFLAGS=-DFEDORA=1 \\\n && make install \\\n && cd ../.. \\\n && rm -rf skype4pidgin \\\n && echo \"---> Installing transwhat\" \\\n && pip install e4u==0.2rc1 six==1.10 protobuf==4.22.3 python-dateutil==2.8.2 yowsup==3.3.0 Pillow==2.9.0 --pre \\\n && git clone git://github.com/stv0g/transwhat.git \\\n && cd transwhat \\\n && git checkout yowsup-3 \\\n && python setup.py install \\\n && cd .. \\\n && rm -r transwhat \\\n && echo \"---> Installing Telegram\" \\\n && git clone --recursive https://github.com/majn/telegram-purple \\\n && cd telegram-purple \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf telegram-purple \\\n && echo \"---> Install Discord\" \\\n && git clone https://github.com/EionRobb/purple-discord.git \\\n && cd purple-discord \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-discord \\\n && echo \"---> Install Steam\" \\\n && git clone https://github.com/EionRobb/pidgin-opensteamworks.git \\\n && cd pidgin-opensteamworks/steam-mobile \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf pidgin-opensteamworks \\\n && echo \"---> cleanup\" \\\n && rm -rf /usr/share/locale/* \\\n && rm -rf /usr/share/doc/* \\\n && rm -rf /usr/share/icons/* \\\n && rm -rf /usr/share/cracklib* \\\n && rm -rf /usr/share/hwdata* \\\n && rm -rf /usr/lib64/libQtGui* \\\n && rm -rf /usr/lib64/libQtSvg* \\\n && rm -rf /usr/lib64/libQtDeclarative* \\\n && rm -rf /usr/lib64/libQtOpenGL* \\\n && rm -rf /usr/lib64/libQtScriptTools* \\\n && rm -rf /usr/lib64/libQtMultimedia* \\\n && rm -rf /usr/lib64/libQtHelp* \\\n && rm -rf /usr/lib64/libQtDesigner* \\\n && rm -rf /usr/lib64/libQt3* \\\n && dnf remove protobuf-devel swiften-devel gcc gcc-c++ libpqxx-devel libev-libevent-devel qt-devel dbus-glib-devel libpurple-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel zlib-devel libjpeg-devel python-devel log4cxx-devel mysql-devel popt-devel libcurl-devel spectrum2-debuginfo wget -y \\\n && dnf clean all -y \\\n && rm -rf /var/lib/rpm/*\nCMD \"/run.sh\"\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM fedora:27\nEXPOSE 5222/tcp\nVOLUME [\"/etc/spectrum2/transports\", \"/var/lib/spectrum2\"]\nARG commit=unknown\nRUN echo $commit\n#  Spectrum 2\nRUN dnf install ImageMagick protobuf swiften gcc gcc-c++ make libpqxx-devel libpurple-devel protobuf-devel swiften-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel log4cxx-devel gettext libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel python-pip zlib-devel libjpeg-devel python-devel mysql-devel popt-devel git libev-libevent-devel qt-devel dbus-glib-devel libcurl-devel wget mercurial libtool libgnome-keyring-devel nss-devel jsoncpp-devel purple-hangouts -y \\\n && echo \"---> Installing Spectrum 2\" \\\n && git clone git://github.com/hanzz/spectrum2.git \\\n && cd spectrum2 \\\n && ./packaging/fedora/build_rpm.sh \\\n && rpm -U /root/rpmbuild/RPMS/x86_64/*.rpm \\\n && cp ./packaging/docker/run.sh /run.sh \\\n && cd .. \\\n && rm -rf spectrum2 \\\n && rm -rf ~/rpmbuild \\\n && dnf mark install json-glib \\\n && echo \"---> Installing purple-instagram\" \\\n && git clone https://github.com/EionRobb/purple-instagram.git \\\n && cd purple-instagram \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-instagram \\\n && echo \"---> Installing icyque\" \\\n && git clone git://github.com/EionRobb/icyque.git \\\n && cd icyque \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf icyque \\\n && echo \"---> Installing purple-facebook\" \\\n && wget https://github.com/dequis/purple-facebook/releases/download/v0.9.6/purple-facebook-0.9.6.tar.gz \\\n && tar -xf purple-facebook-0.9.6.tar.gz \\\n && cd purple-facebook-0.9.6 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-facebook* \\\n && echo \"---> Installing skype4pidgin\" \\\n && git clone git://github.com/EionRobb/skype4pidgin.git \\\n && cd skype4pidgin/skypeweb \\\n && make CFLAGS=-DFEDORA=1 \\\n && make install \\\n && cd ../.. \\\n && rm -rf skype4pidgin \\\n && echo \"---> Installing transwhat\" \\\n && pip install e4u six==1.10 protobuf python-dateutil yowsup Pillow==2.9.0 --pre \\\n && git clone git://github.com/stv0g/transwhat.git \\\n && cd transwhat \\\n && git checkout yowsup-3 \\\n && python setup.py install \\\n && cd .. \\\n && rm -r transwhat \\\n && echo \"---> Installing Telegram\" \\\n && git clone --recursive https://github.com/majn/telegram-purple \\\n && cd telegram-purple \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf telegram-purple \\\n && echo \"---> Install Discord\" \\\n && git clone https://github.com/EionRobb/purple-discord.git \\\n && cd purple-discord \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-discord \\\n && echo \"---> Install Steam\" \\\n && git clone https://github.com/EionRobb/pidgin-opensteamworks.git \\\n && cd pidgin-opensteamworks/steam-mobile \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf pidgin-opensteamworks \\\n && echo \"---> cleanup\" \\\n && rm -rf /usr/share/locale/* \\\n && rm -rf /usr/share/doc/* \\\n && rm -rf /usr/share/icons/* \\\n && rm -rf /usr/share/cracklib* \\\n && rm -rf /usr/share/hwdata* \\\n && rm -rf /usr/lib64/libQtGui* \\\n && rm -rf /usr/lib64/libQtSvg* \\\n && rm -rf /usr/lib64/libQtDeclarative* \\\n && rm -rf /usr/lib64/libQtOpenGL* \\\n && rm -rf /usr/lib64/libQtScriptTools* \\\n && rm -rf /usr/lib64/libQtMultimedia* \\\n && rm -rf /usr/lib64/libQtHelp* \\\n && rm -rf /usr/lib64/libQtDesigner* \\\n && rm -rf /usr/lib64/libQt3* \\\n && dnf remove protobuf-devel swiften-devel gcc gcc-c++ libpqxx-devel libev-libevent-devel qt-devel dbus-glib-devel libpurple-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel zlib-devel libjpeg-devel python-devel log4cxx-devel mysql-devel popt-devel libcurl-devel spectrum2-debuginfo wget -y \\\n && dnf clean all -y \\\n && rm -rf /var/lib/rpm/*\nCMD \"/run.sh\"\n","injectedSmells":[],"originalDockerfileHash":"f4e830550c4080d557da37e4e3e96d79","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM fedora:27\nEXPOSE 5222/tcp\nVOLUME [\"/etc/spectrum2/transports\", \"/var/lib/spectrum2\"]\nARG commit=unknown\nRUN echo $commit\n#   Spectrum 2\nRUN dnf install ImageMagick protobuf swiften gcc gcc-c++ make libpqxx-devel libpurple-devel protobuf-devel swiften-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel log4cxx-devel gettext libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel python-pip zlib-devel libjpeg-devel python-devel mysql-devel popt-devel git libev-libevent-devel qt-devel dbus-glib-devel libcurl-devel wget mercurial libtool libgnome-keyring-devel nss-devel jsoncpp-devel purple-hangouts -y \\\n && echo \"---> Installing Spectrum 2\" \\\n && git clone git://github.com/hanzz/spectrum2.git \\\n && cd spectrum2 \\\n && ./packaging/fedora/build_rpm.sh \\\n && rpm -U /root/rpmbuild/RPMS/x86_64/*.rpm \\\n && cp ./packaging/docker/run.sh /run.sh \\\n && cd .. \\\n && rm -rf spectrum2 \\\n && rm -rf ~/rpmbuild \\\n && dnf mark install json-glib \\\n && echo \"---> Installing purple-instagram\" \\\n && git clone https://github.com/EionRobb/purple-instagram.git \\\n && cd purple-instagram \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-instagram \\\n && echo \"---> Installing icyque\" \\\n && git clone git://github.com/EionRobb/icyque.git \\\n && cd icyque \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf icyque \\\n && echo \"---> Installing purple-facebook\" \\\n && wget https://github.com/dequis/purple-facebook/releases/download/v0.9.6/purple-facebook-0.9.6.tar.gz \\\n && tar -xf purple-facebook-0.9.6.tar.gz \\\n && cd purple-facebook-0.9.6 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-facebook* \\\n && echo \"---> Installing skype4pidgin\" \\\n && git clone git://github.com/EionRobb/skype4pidgin.git \\\n && cd skype4pidgin/skypeweb \\\n && make CFLAGS=-DFEDORA=1 \\\n && make install \\\n && cd ../.. \\\n && rm -rf skype4pidgin \\\n && echo \"---> Installing transwhat\" \\\n && pip install e4u six==1.10 protobuf python-dateutil yowsup Pillow==2.9.0 --pre \\\n && git clone git://github.com/stv0g/transwhat.git \\\n && cd transwhat \\\n && git checkout yowsup-3 \\\n && python setup.py install \\\n && cd .. \\\n && rm -r transwhat \\\n && echo \"---> Installing Telegram\" \\\n && git clone --recursive https://github.com/majn/telegram-purple \\\n && cd telegram-purple \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf telegram-purple \\\n && echo \"---> Install Discord\" \\\n && git clone https://github.com/EionRobb/purple-discord.git \\\n && cd purple-discord \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf purple-discord \\\n && echo \"---> Install Steam\" \\\n && git clone https://github.com/EionRobb/pidgin-opensteamworks.git \\\n && cd pidgin-opensteamworks/steam-mobile \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf pidgin-opensteamworks \\\n && echo \"---> cleanup\" \\\n && rm -rf /usr/share/locale/* \\\n && rm -rf /usr/share/doc/* \\\n && rm -rf /usr/share/icons/* \\\n && rm -rf /usr/share/cracklib* \\\n && rm -rf /usr/share/hwdata* \\\n && rm -rf /usr/lib64/libQtGui* \\\n && rm -rf /usr/lib64/libQtSvg* \\\n && rm -rf /usr/lib64/libQtDeclarative* \\\n && rm -rf /usr/lib64/libQtOpenGL* \\\n && rm -rf /usr/lib64/libQtScriptTools* \\\n && rm -rf /usr/lib64/libQtMultimedia* \\\n && rm -rf /usr/lib64/libQtHelp* \\\n && rm -rf /usr/lib64/libQtDesigner* \\\n && rm -rf /usr/lib64/libQt3* \\\n && dnf remove protobuf-devel swiften-devel gcc gcc-c++ libpqxx-devel libev-libevent-devel qt-devel dbus-glib-devel libpurple-devel rpm-build avahi-devel boost-devel cmake cppunit-devel expat-devel libcommuni-devel libidn-devel libsqlite3x-devel libgcrypt-devel libwebp-devel libpurple-devel zlib-devel json-glib-devel zlib-devel libjpeg-devel python-devel log4cxx-devel mysql-devel popt-devel libcurl-devel spectrum2-debuginfo wget -y \\\n && dnf clean all -y \\\n && rm -rf /var/lib/rpm/*\nCMD \"/run.sh\"\n","originalDockerfileUglifiedHash":"ce0a0ed9401e22d46c12652a2066a512","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/531419b56d07bcddd11c909ac8d2d739523b47ba.dockerfile"}