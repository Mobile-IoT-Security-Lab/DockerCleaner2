{"seed":410804656,"processedDockerfileHash":"ec285f627613719a8f7d051fccdc1cac","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Dockerfile for OpenResty version 1.15.8.1 #########\n#\n#   This Dockerfile builds a basic installation of OpenResty.\n#\n#   OpenResty is a full-fledged web platform that integrates the standard Nginx core, LuaJIT, \n#   many carefully written Lua libraries, lots of high quality 3rd-party Nginx modules, and most of their external dependencies. \n#   It is designed to help developers easily build scalable web applications, web services, and dynamic web gateways.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To start OpenResty run the below command:\n#   docker run -d --name <container_name> -p <host_port>:80 <image>\n#\n#   Provide custom configuration file\n#   docker run -d --name <container_name> -v <path_on_host>:/usr/local/openresty/nginx/conf/nginx.conf -p <host_port>:80 <image>\n#   Reference :\n#   https://openresty.org/\n#\n#  #################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\" \\\n    PATH=\"$PATH:/usr/local/openresty/bin\"\nWORKDIR $SOURCE_DIR\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install --no-install-recommends dos2unix gcc git hgview libcurl4-openssl-dev libpcre3 libpcre3-dev libpq-dev libreadline-dev libssl-dev make openssl patch perl postgresql tar wget libncursesada*-dev -y \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/linux-on-ibm-z/LuaJIT.git \\\n && cd LuaJIT \\\n && git checkout v2.1 \\\n && make \\\n && make install \\\n && ln -s luajit-2.1.0-beta3 /usr/local/bin/luajit \\\n && ln -s make /usr/bin/gmake \\\n && cd $SOURCE_DIR \\\n && wget https://openresty.org/download/openresty-1.15.8.1.tar.gz \\\n && tar -xvf openresty-1.15.8.1.tar.gz \\\n && cd openresty-1.15.8.1 \\\n && sed -i '730,773 s/^/#/' configure \\\n && sed -i '723 s/^/#/' configure \\\n && sed -i '704,713 s/^/#/' configure \\\n && rm -rf bundle/LuaJIT-2.1-20190507/ \\\n && cp -r $SOURCE_DIR/LuaJIT $SOURCE_DIR/openresty-1.15.8.1/bundle/LuaJIT-2.1-20190507/ \\\n && ./configure --without-http_redis2_module --with-http_iconv_module --with-http_postgres_module -j2 \\\n && make -j2 \\\n && make install \\\n && cd build/nginx-1.15.8 \\\n && ./configure \\\n && make \\\n && make install \\\n && apt-get -y remove dos2unix gcc git hgview make openssl patch postgresql wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && rm -rf $SOURCE_DIR/* \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nVOLUME /data\nCMD [\"openresty\", \"-g\", \"daemon\", \"off\"]\n#   End of Dockerfile\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  © Copyright IBM Corporation 2017, 2019.\n#  LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n# ######### Dockerfile for OpenResty version 1.15.8.1 #########\n#\n#  This Dockerfile builds a basic installation of OpenResty.\n#\n#  OpenResty is a full-fledged web platform that integrates the standard Nginx core, LuaJIT, \n#  many carefully written Lua libraries, lots of high quality 3rd-party Nginx modules, and most of their external dependencies. \n#  It is designed to help developers easily build scalable web applications, web services, and dynamic web gateways.\n#\n#  To build this image, from the directory containing this Dockerfile\n#  (assuming that the file is named Dockerfile):\n#  docker build -t <image_name> .\n#\n#  To start OpenResty run the below command:\n#  docker run -d --name <container_name> -p <host_port>:80 <image>\n#\n#  Provide custom configuration file\n#  docker run -d --name <container_name> -v <path_on_host>:/usr/local/openresty/nginx/conf/nginx.conf -p <host_port>:80 <image>\n#  Reference :\n#  https://openresty.org/\n#\n# #################################################################################\n#  Base Image\nFROM s390x/ubuntu:16.04\n#  The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\" \\\n    PATH=\"$PATH:/usr/local/openresty/bin\"\nWORKDIR $SOURCE_DIR\n#  Install dependencies\nRUN apt-get update \\\n && apt-get install dos2unix gcc git hgview libcurl4-openssl-dev libpcre3 libpcre3-dev libpq-dev libreadline-dev libssl-dev make openssl patch perl postgresql tar wget libncursesada*-dev -y \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/linux-on-ibm-z/LuaJIT.git \\\n && cd LuaJIT \\\n && git checkout v2.1 \\\n && make \\\n && make install \\\n && ln -s luajit-2.1.0-beta3 /usr/local/bin/luajit \\\n && ln -s make /usr/bin/gmake \\\n && cd $SOURCE_DIR \\\n && wget https://openresty.org/download/openresty-1.15.8.1.tar.gz \\\n && tar -xvf openresty-1.15.8.1.tar.gz \\\n && cd openresty-1.15.8.1 \\\n && sed -i '730,773 s/^/#/' configure \\\n && sed -i '723 s/^/#/' configure \\\n && sed -i '704,713 s/^/#/' configure \\\n && rm -rf bundle/LuaJIT-2.1-20190507/ \\\n && cp -r $SOURCE_DIR/LuaJIT $SOURCE_DIR/openresty-1.15.8.1/bundle/LuaJIT-2.1-20190507/ \\\n && ./configure --without-http_redis2_module --with-http_iconv_module --with-http_postgres_module -j2 \\\n && make -j2 \\\n && make install \\\n && cd build/nginx-1.15.8 \\\n && ./configure \\\n && make \\\n && make install \\\n && apt-get -y remove dos2unix gcc git hgview make openssl patch postgresql wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && rm -rf $SOURCE_DIR/* \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nVOLUME /data\nCMD [\"openresty\", \"-g\", \"daemon\", \"off\"]\n#  End of Dockerfile\n","injectedSmells":[],"originalDockerfileHash":"348de97933c56f4f3f3f5c31187c61b0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ######### Dockerfile for OpenResty version 1.15.8.1 #########\n#\n#   This Dockerfile builds a basic installation of OpenResty.\n#\n#   OpenResty is a full-fledged web platform that integrates the standard Nginx core, LuaJIT, \n#   many carefully written Lua libraries, lots of high quality 3rd-party Nginx modules, and most of their external dependencies. \n#   It is designed to help developers easily build scalable web applications, web services, and dynamic web gateways.\n#\n#   To build this image, from the directory containing this Dockerfile\n#   (assuming that the file is named Dockerfile):\n#   docker build -t <image_name> .\n#\n#   To start OpenResty run the below command:\n#   docker run -d --name <container_name> -p <host_port>:80 <image>\n#\n#   Provide custom configuration file\n#   docker run -d --name <container_name> -v <path_on_host>:/usr/local/openresty/nginx/conf/nginx.conf -p <host_port>:80 <image>\n#   Reference :\n#   https://openresty.org/\n#\n#  #################################################################################\n#   Base Image\nFROM s390x/ubuntu:16.04\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\" \\\n    PATH=\"$PATH:/usr/local/openresty/bin\"\nWORKDIR $SOURCE_DIR\n#   Install dependencies\nRUN apt-get update \\\n && apt-get install dos2unix gcc git hgview libcurl4-openssl-dev libpcre3 libpcre3-dev libpq-dev libreadline-dev libssl-dev make openssl patch perl postgresql tar wget libncursesada*-dev -y \\\n && cd $SOURCE_DIR \\\n && git clone https://github.com/linux-on-ibm-z/LuaJIT.git \\\n && cd LuaJIT \\\n && git checkout v2.1 \\\n && make \\\n && make install \\\n && ln -s luajit-2.1.0-beta3 /usr/local/bin/luajit \\\n && ln -s make /usr/bin/gmake \\\n && cd $SOURCE_DIR \\\n && wget https://openresty.org/download/openresty-1.15.8.1.tar.gz \\\n && tar -xvf openresty-1.15.8.1.tar.gz \\\n && cd openresty-1.15.8.1 \\\n && sed -i '730,773 s/^/#/' configure \\\n && sed -i '723 s/^/#/' configure \\\n && sed -i '704,713 s/^/#/' configure \\\n && rm -rf bundle/LuaJIT-2.1-20190507/ \\\n && cp -r $SOURCE_DIR/LuaJIT $SOURCE_DIR/openresty-1.15.8.1/bundle/LuaJIT-2.1-20190507/ \\\n && ./configure --without-http_redis2_module --with-http_iconv_module --with-http_postgres_module -j2 \\\n && make -j2 \\\n && make install \\\n && cd build/nginx-1.15.8 \\\n && ./configure \\\n && make \\\n && make install \\\n && apt-get -y remove dos2unix gcc git hgview make openssl patch postgresql wget \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && rm -rf $SOURCE_DIR/* \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nEXPOSE 80/tcp\nVOLUME /data\nCMD [\"openresty\", \"-g\", \"daemon\", \"off\"]\n#   End of Dockerfile\n","originalDockerfileUglifiedHash":"f1e1b5a93d31b90ff656e52569716870","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/0939e45638f72ed4bb14d73cf09852b34658ef94.dockerfile"}