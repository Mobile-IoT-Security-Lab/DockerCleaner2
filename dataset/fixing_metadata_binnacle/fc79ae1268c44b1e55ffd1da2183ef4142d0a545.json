{"seed":4272518309,"processedDockerfileHash":"c2eb519ddc14bc3d11ca0171560ffe7b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   set base os\nFROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   set ports\nEXPOSE 9777/udp 8080/tcp\n#   Add local files\nCOPY src/ /root/\n#   Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && kodiCheckout=14.2-Helix \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && usermod -d /home nobody \\\n && chown -R nobody:users /home \\\n && mkdir /etc/service/xbmc \\\n && mv /root/kodi.sh /etc/service/xbmc/run \\\n && mv /root/firstrun.sh /etc/my_init.d/firstrun.sh \\\n && chmod +x /etc/service/xbmc/run \\\n && chmod +x /etc/my_init.d/firstrun.sh \\\n && buildDeps=\"build-essential zip unzip yasm gawk cmake wget git-core autoconf libtool automake autopoint swig doxygen openjdk-7-jre-headless gperf libsqlite3-dev libpcre3-dev libtag1-dev libbluray-dev libjasper-dev libmicrohttpd-dev libavahi-client-dev libxrandr-dev libssh-dev libsmbclient-dev libnfs-dev libboost1.54-dev python-dev libmysqlclient-dev libgle3-dev libglew-dev libass-dev libmpeg2-4-dev libjpeg-dev libflac-dev libvorbis-dev libgnutls-dev libbz2-ocaml-dev libtiff5-dev libyajl-dev libssl-dev libxml2-dev libxslt-dev libiso9660-dev libtinyxml-dev libmodplug-dev libsdl1.2-dev libsdl-ocaml-dev liblzo2-dev\" \\\n && runtimeDeps=\"zip libpcrecpp0 libtag1-vanilla libtag1c2a libaacs0 libbluray1 libjasper1 libjpeg-turbo8 libjpeg8 libmicrohttpd10 libavahi-client3 libavahi-common-dev libdbus-1-dev libssh-4 libsmbclient libnfs1 libmysqlclient18 libgle3 libglew1.10 libass4 libmpeg2-4 libjpeg-turbo8 libflac8 libogg0 libvorbis0a libvorbisenc2 libvorbisfile3 libbz2-ocaml libtiff5 libtiffxx5 libyajl2 libxslt1.1 libiso9660-8 libtinyxml2.6.2 liblzo2-2 libxrandr2 libmodplug1 libsdl1.2debian libsdl-ocaml unzip\" \\\n && mv /root/excludes /etc/dpkg/dpkg.cfg.d/excludes \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends $buildDeps -qy \\\n && cd /tmp/ \\\n && git clone https://github.com/xbmc/xbmc.git \\\n && wget http://curl.haxx.se/download/curl-7.43.0.tar.gz \\\n && cd /tmp \\\n && tar xvf curl-* \\\n && cd curl-* \\\n && ./configure --prefix=/usr --with-ssl --with-zlib \\\n && make \\\n && make install \\\n && cd /tmp/xbmc \\\n && mv /root/headless.patch . \\\n && git checkout $kodiCheckout \\\n && git apply headless.patch \\\n && ./bootstrap \\\n && ./configure --enable-nfs --enable-upnp --enable-ssh --enable-libbluray --disable-debug --disable-vdpau --disable-vaapi --disable-crystalhd --disable-vdadecoder --disable-vtbdecoder --disable-openmax --disable-joystick --disable-rsxs --disable-projectm --disable-rtmp --disable-airplay --disable-airtunes --disable-dvdcss --disable-optical-drive --disable-libusb --disable-libcec --disable-libmp3lame --disable-libcap --disable-udev --disable-libvorbisenc --disable-asap-codec --disable-afpclient --disable-goom --disable-fishbmc --disable-spectrum --disable-waveform --disable-avahi --disable-non-free --disable-texturepacker --disable-pulse --disable-dbus --disable-alsa --disable-hal --prefix=/opt/kodi-server \\\n && make \\\n && make install \\\n && chown -R nobody:users /opt/kodi-server \\\n && apt-get purge -y --remove $buildDeps \\\n && apt-get -y autoremove \\\n && apt-get install --no-install-recommends $runtimeDeps -qy \\\n && add-apt-repository ppa:team-xbmc/ppa \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends kodi-eventclients-xbmc-send -qy \\\n && add-apt-repository --remove ppa:team-xbmc/ppa \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  set base os\nFROM phusion/baseimage:0.9.16\n#  Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  set ports\nEXPOSE 9777/udp 8080/tcp\n#  Add local files\nADD src/ /root/\n#  Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && kodiCheckout=14.2-Helix \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && usermod -d /home nobody \\\n && chown -R nobody:users /home \\\n && mkdir /etc/service/xbmc \\\n && mv /root/kodi.sh /etc/service/xbmc/run \\\n && mv /root/firstrun.sh /etc/my_init.d/firstrun.sh \\\n && chmod +x /etc/service/xbmc/run \\\n && chmod +x /etc/my_init.d/firstrun.sh \\\n && buildDeps=\"build-essential zip unzip yasm gawk cmake wget git-core autoconf libtool automake autopoint swig doxygen openjdk-7-jre-headless gperf libsqlite3-dev libpcre3-dev libtag1-dev libbluray-dev libjasper-dev libmicrohttpd-dev libavahi-client-dev libxrandr-dev libssh-dev libsmbclient-dev libnfs-dev libboost1.54-dev python-dev libmysqlclient-dev libgle3-dev libglew-dev libass-dev libmpeg2-4-dev libjpeg-dev libflac-dev libvorbis-dev libgnutls-dev libbz2-ocaml-dev libtiff5-dev libyajl-dev libssl-dev libxml2-dev libxslt-dev libiso9660-dev libtinyxml-dev libmodplug-dev libsdl1.2-dev libsdl-ocaml-dev liblzo2-dev\" \\\n && runtimeDeps=\"zip libpcrecpp0 libtag1-vanilla libtag1c2a libaacs0 libbluray1 libjasper1 libjpeg-turbo8 libjpeg8 libmicrohttpd10 libavahi-client3 libavahi-common-dev libdbus-1-dev libssh-4 libsmbclient libnfs1 libmysqlclient18 libgle3 libglew1.10 libass4 libmpeg2-4 libjpeg-turbo8 libflac8 libogg0 libvorbis0a libvorbisenc2 libvorbisfile3 libbz2-ocaml libtiff5 libtiffxx5 libyajl2 libxslt1.1 libiso9660-8 libtinyxml2.6.2 liblzo2-2 libxrandr2 libmodplug1 libsdl1.2debian libsdl-ocaml unzip\" \\\n && mv /root/excludes /etc/dpkg/dpkg.cfg.d/excludes \\\n && apt-get update -qq \\\n && apt-get install $buildDeps -qy \\\n && cd /tmp/ \\\n && git clone https://github.com/xbmc/xbmc.git \\\n && wget http://curl.haxx.se/download/curl-7.43.0.tar.gz \\\n && cd /tmp \\\n && tar xvf curl-* \\\n && cd curl-* \\\n && ./configure --prefix=/usr --with-ssl --with-zlib \\\n && make \\\n && make install \\\n && cd /tmp/xbmc \\\n && mv /root/headless.patch . \\\n && git checkout $kodiCheckout \\\n && git apply headless.patch \\\n && ./bootstrap \\\n && ./configure --enable-nfs --enable-upnp --enable-ssh --enable-libbluray --disable-debug --disable-vdpau --disable-vaapi --disable-crystalhd --disable-vdadecoder --disable-vtbdecoder --disable-openmax --disable-joystick --disable-rsxs --disable-projectm --disable-rtmp --disable-airplay --disable-airtunes --disable-dvdcss --disable-optical-drive --disable-libusb --disable-libcec --disable-libmp3lame --disable-libcap --disable-udev --disable-libvorbisenc --disable-asap-codec --disable-afpclient --disable-goom --disable-fishbmc --disable-spectrum --disable-waveform --disable-avahi --disable-non-free --disable-texturepacker --disable-pulse --disable-dbus --disable-alsa --disable-hal --prefix=/opt/kodi-server \\\n && make \\\n && make install \\\n && chown -R nobody:users /opt/kodi-server \\\n && apt-get purge -y --remove $buildDeps \\\n && apt-get -y autoremove \\\n && apt-get install $runtimeDeps -qy \\\n && add-apt-repository ppa:team-xbmc/ppa \\\n && apt-get update -qq \\\n && apt-get install kodi-eventclients-xbmc-send -qy \\\n && add-apt-repository --remove ppa:team-xbmc/ppa \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","injectedSmells":[],"originalDockerfileHash":"d7a68a4632093503d69fa4fafea974a5","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   set base os\nFROM phusion/baseimage:0.9.16\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   set ports\nEXPOSE 9777/udp 8080/tcp\n#   Add local files\nADD src/ /root/\n#   Set the locale\nRUN locale-gen en_US.UTF-8 \\\n && kodiCheckout=14.2-Helix \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && usermod -d /home nobody \\\n && chown -R nobody:users /home \\\n && mkdir /etc/service/xbmc \\\n && mv /root/kodi.sh /etc/service/xbmc/run \\\n && mv /root/firstrun.sh /etc/my_init.d/firstrun.sh \\\n && chmod +x /etc/service/xbmc/run \\\n && chmod +x /etc/my_init.d/firstrun.sh \\\n && buildDeps=\"build-essential zip unzip yasm gawk cmake wget git-core autoconf libtool automake autopoint swig doxygen openjdk-7-jre-headless gperf libsqlite3-dev libpcre3-dev libtag1-dev libbluray-dev libjasper-dev libmicrohttpd-dev libavahi-client-dev libxrandr-dev libssh-dev libsmbclient-dev libnfs-dev libboost1.54-dev python-dev libmysqlclient-dev libgle3-dev libglew-dev libass-dev libmpeg2-4-dev libjpeg-dev libflac-dev libvorbis-dev libgnutls-dev libbz2-ocaml-dev libtiff5-dev libyajl-dev libssl-dev libxml2-dev libxslt-dev libiso9660-dev libtinyxml-dev libmodplug-dev libsdl1.2-dev libsdl-ocaml-dev liblzo2-dev\" \\\n && runtimeDeps=\"zip libpcrecpp0 libtag1-vanilla libtag1c2a libaacs0 libbluray1 libjasper1 libjpeg-turbo8 libjpeg8 libmicrohttpd10 libavahi-client3 libavahi-common-dev libdbus-1-dev libssh-4 libsmbclient libnfs1 libmysqlclient18 libgle3 libglew1.10 libass4 libmpeg2-4 libjpeg-turbo8 libflac8 libogg0 libvorbis0a libvorbisenc2 libvorbisfile3 libbz2-ocaml libtiff5 libtiffxx5 libyajl2 libxslt1.1 libiso9660-8 libtinyxml2.6.2 liblzo2-2 libxrandr2 libmodplug1 libsdl1.2debian libsdl-ocaml unzip\" \\\n && mv /root/excludes /etc/dpkg/dpkg.cfg.d/excludes \\\n && apt-get update -qq \\\n && apt-get install $buildDeps -qy \\\n && cd /tmp/ \\\n && git clone https://github.com/xbmc/xbmc.git \\\n && wget http://curl.haxx.se/download/curl-7.43.0.tar.gz \\\n && cd /tmp \\\n && tar xvf curl-* \\\n && cd curl-* \\\n && ./configure --prefix=/usr --with-ssl --with-zlib \\\n && make \\\n && make install \\\n && cd /tmp/xbmc \\\n && mv /root/headless.patch . \\\n && git checkout $kodiCheckout \\\n && git apply headless.patch \\\n && ./bootstrap \\\n && ./configure --enable-nfs --enable-upnp --enable-ssh --enable-libbluray --disable-debug --disable-vdpau --disable-vaapi --disable-crystalhd --disable-vdadecoder --disable-vtbdecoder --disable-openmax --disable-joystick --disable-rsxs --disable-projectm --disable-rtmp --disable-airplay --disable-airtunes --disable-dvdcss --disable-optical-drive --disable-libusb --disable-libcec --disable-libmp3lame --disable-libcap --disable-udev --disable-libvorbisenc --disable-asap-codec --disable-afpclient --disable-goom --disable-fishbmc --disable-spectrum --disable-waveform --disable-avahi --disable-non-free --disable-texturepacker --disable-pulse --disable-dbus --disable-alsa --disable-hal --prefix=/opt/kodi-server \\\n && make \\\n && make install \\\n && chown -R nobody:users /opt/kodi-server \\\n && apt-get purge -y --remove $buildDeps \\\n && apt-get -y autoremove \\\n && apt-get install $runtimeDeps -qy \\\n && add-apt-repository ppa:team-xbmc/ppa \\\n && apt-get update -qq \\\n && apt-get install kodi-eventclients-xbmc-send -qy \\\n && add-apt-repository --remove ppa:team-xbmc/ppa \\\n && cd / \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","originalDockerfileUglifiedHash":"b633b3997bf2422ae232ad8298dd43ea","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fc79ae1268c44b1e55ffd1da2183ef4142d0a545.dockerfile"}