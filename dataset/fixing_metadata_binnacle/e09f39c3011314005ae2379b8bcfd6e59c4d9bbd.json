{"seed":3944086939,"processedDockerfileHash":"31a9f1f7ae877f63182120e64e638b97","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:centos6\nMAINTAINER Pandora FMS Team <info@pandorafms.com>\nRUN { echo '[EPEL]' ;echo 'name = CentOS Epel' ;echo 'baseurl = http://dl.fedoraproject.org/pub/epel/6/x86_64' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-php72]' ;echo 'name=Remi php72' ;echo 'baseurl=http://rpms.remirepo.net/enterprise/6/php72/x86_64/' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-safe]' ;echo 'name=Safe Remis RPM repository' ;echo 'mirrorlist=http://cdn.remirepo.net/enterprise/$releasever/safe/mirror' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ; } > /etc/yum.repos.d/extra_repos.repo\nRUN { echo '[artica_pandorafms]' ;echo 'name=CentOS6 - PandoraFMS official repo' ;echo 'baseurl=http://artica.es/centos6' ;echo 'gpgcheck=0' ;echo 'enabled=1' ; } > /etc/yum.repos.d/pandorafms.repo\nRUN yum -y update ; yum clean all\nRUN yum --disablerepo=updates install -y firefox\n#   Generic dependencies\nRUN yum install -y python-pip xorg-x11-server-Xvfb ; yum clean all\nRUN pip install pyvirtualdisplay==3.0\nRUN pip install 'selenium==2.53.0'\nRUN pip install unittest2==1.1.0\nRUN pip install testtools==2.6.0\n#   Pandora FMS Console dependencies\nRUN yum install -y git httpd cronie ntp openldap nfdump wget curl openldap plymouth xterm php php-gd graphviz php-mysql php-pear-DB php-pear php-pdo php-mbstring php-ldap php-snmp php-ldap php-common php-zip php-xmlrpc nmap xprobe2 mysql-server mysql ; yum clean all\n#   Pandora FMS Server dependencies\nRUN yum install -y ntp vim htop nano postfix wmic perl-HTML-Tree perl-DBI perl-DBD-mysql perl-libwww-perl perl-XML-Simple perl-XML-SAX perl-NetAddr-IP perl-Scope-Guard net-snmp net-tools perl-IO-Socket-INET6 perl-Socket6 nmap sudo xprobe2 make perl-CPAN perl-JSON net-snmp-perl perl-Time-HiRes perl-XML-Twig perl-Encode-Locale net-snmp-utils fontconfig freetype freetype-devel fontconfig-devel libstdc++ perl-Test-Simple ; yum clean all\nRUN wget http://rpmfind.net/linux/centos/6.9/os/i386/Packages/gettext-0.17-18.el6.i686.rpm ; yum localinstall -y gettext-0.17-18.el6.i686.rpm ; rm -rf gettext-0.17-18.el6.i686.rpm ; wget http://ftp.tu-chemnitz.de/pub/linux/dag/redhat/el6/en/x86_64/rpmforge/RPMS/perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; yum localinstall -y perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; rm -rf perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm\n#  Install phantomjs required for export graph pdf.\nRUN mkdir -p /opt/phantomjs/bin \\\n && cd /opt/phantomjs/bin ; wget https://netcologne.dl.sourceforge.net/project/pandora/Tools%20and%20dependencies%20%28All%20versions%29/DEB%20Debian%2C%20Ubuntu/phantomjs ; chmod +x phantomjs ; ln -s /opt/phantomjs/bin/phantomjs /usr/bin/\n#   Install debugg dependencies.\nRUN yum install -y php-devel php-pear gcc gcc-c++ autoconf automake \\\n && pecl install Xdebug \\\n && git clone https://github.com/tideways/php-xhprof-extension \\\n && cd php-xhprof-extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf php-xhprof-extension\n#  Exposing ports for: HTTP, SNMP Traps, Tentacle protocol\nEXPOSE 80/tcp 162/udp 41121/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:centos6\nMAINTAINER Pandora FMS Team <info@pandorafms.com>\nRUN { echo '[EPEL]' ;echo 'name = CentOS Epel' ;echo 'baseurl = http://dl.fedoraproject.org/pub/epel/6/x86_64' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-php72]' ;echo 'name=Remi php72' ;echo 'baseurl=http://rpms.remirepo.net/enterprise/6/php72/x86_64/' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-safe]' ;echo 'name=Safe Remis RPM repository' ;echo 'mirrorlist=http://cdn.remirepo.net/enterprise/$releasever/safe/mirror' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ; } > /etc/yum.repos.d/extra_repos.repo\nRUN { echo '[artica_pandorafms]' ;echo 'name=CentOS6 - PandoraFMS official repo' ;echo 'baseurl=http://artica.es/centos6' ;echo 'gpgcheck=0' ;echo 'enabled=1' ; } > /etc/yum.repos.d/pandorafms.repo\nRUN yum -y update ; yum clean all\nRUN yum --disablerepo=updates install -y firefox\n#  Generic dependencies\nRUN yum install -y python-pip xorg-x11-server-Xvfb ; yum clean all\nRUN pip install pyvirtualdisplay\nRUN pip install 'selenium==2.53.0'\nRUN pip install unittest2\nRUN pip install testtools\n#  Pandora FMS Console dependencies\nRUN yum install -y git httpd cronie ntp openldap nfdump wget curl openldap plymouth xterm php php-gd graphviz php-mysql php-pear-DB php-pear php-pdo php-mbstring php-ldap php-snmp php-ldap php-common php-zip php-xmlrpc nmap xprobe2 mysql-server mysql ; yum clean all\n#  Pandora FMS Server dependencies\nRUN yum install -y ntp vim htop nano postfix wmic perl-HTML-Tree perl-DBI perl-DBD-mysql perl-libwww-perl perl-XML-Simple perl-XML-SAX perl-NetAddr-IP perl-Scope-Guard net-snmp net-tools perl-IO-Socket-INET6 perl-Socket6 nmap sudo xprobe2 make perl-CPAN perl-JSON net-snmp-perl perl-Time-HiRes perl-XML-Twig perl-Encode-Locale net-snmp-utils fontconfig freetype freetype-devel fontconfig-devel libstdc++ perl-Test-Simple ; yum clean all\nRUN wget http://rpmfind.net/linux/centos/6.9/os/i386/Packages/gettext-0.17-18.el6.i686.rpm ; yum localinstall -y gettext-0.17-18.el6.i686.rpm ; rm -rf gettext-0.17-18.el6.i686.rpm ; wget http://ftp.tu-chemnitz.de/pub/linux/dag/redhat/el6/en/x86_64/rpmforge/RPMS/perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; yum localinstall -y perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; rm -rf perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm\n# Install phantomjs required for export graph pdf.\nRUN mkdir -p /opt/phantomjs/bin \\\n && cd /opt/phantomjs/bin ; wget https://netcologne.dl.sourceforge.net/project/pandora/Tools%20and%20dependencies%20%28All%20versions%29/DEB%20Debian%2C%20Ubuntu/phantomjs ; chmod +x phantomjs ; ln -s /opt/phantomjs/bin/phantomjs /usr/bin/\n#  Install debugg dependencies.\nRUN yum install -y php-devel php-pear gcc gcc-c++ autoconf automake \\\n && pecl install Xdebug \\\n && git clone https://github.com/tideways/php-xhprof-extension \\\n && cd php-xhprof-extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf php-xhprof-extension\n# Exposing ports for: HTTP, SNMP Traps, Tentacle protocol\nEXPOSE 80/tcp 162/udp 41121/tcp\n","injectedSmells":[],"originalDockerfileHash":"88590db3a329ccd047eb6ba9eb15fd9b","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:centos6\nMAINTAINER Pandora FMS Team <info@pandorafms.com>\nRUN { echo '[EPEL]' ;echo 'name = CentOS Epel' ;echo 'baseurl = http://dl.fedoraproject.org/pub/epel/6/x86_64' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-php72]' ;echo 'name=Remi php72' ;echo 'baseurl=http://rpms.remirepo.net/enterprise/6/php72/x86_64/' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ;echo '[remi-safe]' ;echo 'name=Safe Remis RPM repository' ;echo 'mirrorlist=http://cdn.remirepo.net/enterprise/$releasever/safe/mirror' ;echo 'enabled=1' ;echo 'gpgcheck=0' ;echo '' ; } > /etc/yum.repos.d/extra_repos.repo\nRUN { echo '[artica_pandorafms]' ;echo 'name=CentOS6 - PandoraFMS official repo' ;echo 'baseurl=http://artica.es/centos6' ;echo 'gpgcheck=0' ;echo 'enabled=1' ; } > /etc/yum.repos.d/pandorafms.repo\nRUN yum -y update ; yum clean all\nRUN yum --disablerepo=updates install -y firefox\n#   Generic dependencies\nRUN yum install -y python-pip xorg-x11-server-Xvfb ; yum clean all\nRUN pip install pyvirtualdisplay\nRUN pip install 'selenium==2.53.0'\nRUN pip install unittest2\nRUN pip install testtools\n#   Pandora FMS Console dependencies\nRUN yum install -y git httpd cronie ntp openldap nfdump wget curl openldap plymouth xterm php php-gd graphviz php-mysql php-pear-DB php-pear php-pdo php-mbstring php-ldap php-snmp php-ldap php-common php-zip php-xmlrpc nmap xprobe2 mysql-server mysql ; yum clean all\n#   Pandora FMS Server dependencies\nRUN yum install -y ntp vim htop nano postfix wmic perl-HTML-Tree perl-DBI perl-DBD-mysql perl-libwww-perl perl-XML-Simple perl-XML-SAX perl-NetAddr-IP perl-Scope-Guard net-snmp net-tools perl-IO-Socket-INET6 perl-Socket6 nmap sudo xprobe2 make perl-CPAN perl-JSON net-snmp-perl perl-Time-HiRes perl-XML-Twig perl-Encode-Locale net-snmp-utils fontconfig freetype freetype-devel fontconfig-devel libstdc++ perl-Test-Simple ; yum clean all\nRUN wget http://rpmfind.net/linux/centos/6.9/os/i386/Packages/gettext-0.17-18.el6.i686.rpm ; yum localinstall -y gettext-0.17-18.el6.i686.rpm ; rm -rf gettext-0.17-18.el6.i686.rpm ; wget http://ftp.tu-chemnitz.de/pub/linux/dag/redhat/el6/en/x86_64/rpmforge/RPMS/perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; yum localinstall -y perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm ; rm -rf perl-Geo-IP-1.38-1.el6.rf.x86_64.rpm\n#  Install phantomjs required for export graph pdf.\nRUN mkdir -p /opt/phantomjs/bin \\\n && cd /opt/phantomjs/bin ; wget https://netcologne.dl.sourceforge.net/project/pandora/Tools%20and%20dependencies%20%28All%20versions%29/DEB%20Debian%2C%20Ubuntu/phantomjs ; chmod +x phantomjs ; ln -s /opt/phantomjs/bin/phantomjs /usr/bin/\n#   Install debugg dependencies.\nRUN yum install -y php-devel php-pear gcc gcc-c++ autoconf automake \\\n && pecl install Xdebug \\\n && git clone https://github.com/tideways/php-xhprof-extension \\\n && cd php-xhprof-extension \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf php-xhprof-extension\n#  Exposing ports for: HTTP, SNMP Traps, Tentacle protocol\nEXPOSE 80/tcp 162/udp 41121/tcp\n","originalDockerfileUglifiedHash":"76ad5b0ff1d028045acde2d51f8ef176","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/e09f39c3011314005ae2379b8bcfd6e59c4d9bbd.dockerfile"}