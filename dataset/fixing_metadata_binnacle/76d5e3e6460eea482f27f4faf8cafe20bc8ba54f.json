{"seed":407887720,"processedDockerfileHash":"7958546fae78c7bdaa0dd1791b49f70e","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:stretch\n#  # From the Build-Depends of the Debian R package, plus subversion\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ca-certificates=20200601~deb9u2 curl=7.52.1-5+deb9u16 ed=1.10-2.1 fonts-texgyre=20160520-1 less=481-2.1 locales=2.24-11+deb9u4 libreadline-dev=7.0-3 vim-tiny=2:8.0.0197-4+deb9u7 wget=1.18-5+deb9u3 -y \\\n && echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8 \\\n && apt-get install --no-install-recommends bash-completion=1:2.1-4.3 bison=2:3.0.4.dfsg-1+b1 debhelper=10.2.5 default-jdk=2:1.8-58+deb9u1 g++=4:6.3.0-4 gcc=4:6.3.0-4 gfortran=4:6.3.0-4 groff-base=1.22.3-9 libblas-dev=3.7.0-2 libbz2-dev=1.0.6-8.1 libcairo2-dev=1.14.8-1+deb9u1 libcurl4-openssl-dev=7.52.1-5+deb9u16 libjpeg-dev=1:1.5.1-2+deb9u2 liblapack-dev=3.7.0-2 liblzma-dev=5.2.2-1.2+deb9u1 libncurses5-dev=6.0+20161126-1+deb9u2 libpango1.0-dev=1.40.5-1 libpcre3-dev=2:8.39-3 libpng-dev=1.6.28-1+deb9u1 libreadline-dev=7.0-3 libtiff5-dev=4.0.8-2+deb9u8 libx11-dev=2:1.6.4-3+deb9u4 libxt-dev=1:1.1.5-1 mpack=1.6-8.1 rsync=3.1.2-1+deb9u3 subversion=1.9.5-1+deb9u6 tcl8.6-dev=8.6.6+dfsg-1+b1 texinfo=6.3.0.dfsg.1-1+b2 texlive-base=2016.20170123-5 texlive-extra-utils=2016.20170123-5 texlive-fonts-extra=2016.20170123-5 texlive-fonts-recommended=2016.20170123-5 texlive-generic-recommended=2016.20170123-5 texlive-latex-base=2016.20170123-5 texlive-latex-extra=2016.20170123-5 texlive-latex-recommended=2016.20170123-5 tk8.6-dev=8.6.6-1+b1 valgrind=1:3.12.0~svn20160714-1+b1 x11proto-core-dev=7.0.31-1 xauth=1:1.0.9-1+b2 xdg-utils=1.1.1-1+deb9u2 xfonts-base=1:1.0.4+nmu1 xvfb=2:1.19.2-1+deb9u9 zlib1g-dev=1:1.2.8.dfsg-5+deb9u1 -y \\\n && cd /tmp \\\n && svn co https://svn.r-project.org/R/trunk R-devel \\\n && cd /tmp/R-devel \\\n && ./tools/rsync-recommended \\\n && R_PAPERSIZE=letter R_BATCHSAVE=\"--no-save --no-restore\" R_BROWSER=xdg-open PAGER=/usr/bin/pager PERL=/usr/bin/perl R_UNZIPCMD=/usr/bin/unzip R_ZIPCMD=/usr/bin/zip R_PRINTCMD=/usr/bin/lpr LIBnn=lib AWK=/usr/bin/awk CFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native -fsanitize=address\" FFLAGS=\"-pipe -O2 -mtune=native\" FCFLAGS=\"-pipe -O2 -mtune=native\" CXXFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native\" MAIN_LDFLAGS=\"-fsanitize=address,undefined\" CC=\"gcc -std=gnu99 -fsanitize=address,undefined -fno-omit-frame-pointer\" CXX=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" CXX1X=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" FC=\"gfortran\" F77=\"gfortran\" ./configure --enable-R-shlib --with-blas --with-readline --with-recommended-packages --program-suffix=dev --disable-openmp \\\n && make \\\n && make install \\\n && make clean \\\n && echo \"options(repos = c(CRAN = 'https://cran.rstudio.com/'), download.file.method = 'libcurl')\" >> /usr/local/lib/R/etc/Rprofile.site \\\n && mkdir -p /usr/local/lib/R/site-library \\\n && chown root:staff /usr/local/lib/R/site-library \\\n && chmod g+wx /usr/local/lib/R/site-library \\\n && echo \"R_LIBS_USER='/usr/local/lib/R/site-library'\" >> /usr/local/lib/R/etc/Renviron \\\n && echo \"R_LIBS=${R_LIBS-'/usr/local/lib/R/site-library:/usr/local/lib/R/library:/usr/lib/R/library'}\" >> /usr/local/lib/R/etc/Renviron \\\n && [ -z \"$BUILD_DATE\" ] \\\n && BUILD_DATE=$( TZ=\"America/Los_Angeles\" date -I ;) || true \\\n && MRAN=https://mran.microsoft.com/snapshot/${BUILD_DATE} \\\n && echo MRAN=$MRAN >> /etc/environment \\\n && export MRAN=$MRAN \\\n && Rscript -e \"install.packages(c('littler', 'docopt'), repos = '$MRAN')\" \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/install2.r /usr/local/bin/install2.r \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/installGithub.r /usr/local/bin/installGithub.r \\\n && ln -s /usr/local/lib/R/site-library/littler/bin/r /usr/local/bin/r \\\n && curl -O /usr/local/bin/install2.r https://github.com/eddelbuettel/littler/raw/master/inst/examples/install2.r \\\n && chmod +x /usr/local/bin/install2.r \\\n && cd / \\\n && rm -rf /tmp/* \\\n && apt-get remove --purge -y $BUILDDEPS \\\n && apt-get autoremove -y \\\n && apt-get autoclean -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\n#  # More verbose UBSAN/SAN output (cf #3) -- this is still somewhat speculative\n#  # Entry copied from Prof Ripley's setup described at http://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt\nENV ASAN_OPTIONS=\"'alloc_dealloc_mismatch=0:detect_leaks=0:detect_odr_violation=0'\"\nCMD [\"R\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:stretch\n# # From the Build-Depends of the Debian R package, plus subversion\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ca-certificates curl ed fonts-texgyre less locales libreadline-dev vim-tiny wget -y \\\n && echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8 \\\n && apt-get install --no-install-recommends bash-completion bison debhelper default-jdk g++ gcc gfortran groff-base libblas-dev libbz2-dev libcairo2-dev libcurl4-openssl-dev libjpeg-dev liblapack-dev liblzma-dev libncurses5-dev libpango1.0-dev libpcre3-dev libpng-dev libreadline-dev libtiff5-dev libx11-dev libxt-dev mpack rsync subversion tcl8.6-dev texinfo texlive-base texlive-extra-utils texlive-fonts-extra texlive-fonts-recommended texlive-generic-recommended texlive-latex-base texlive-latex-extra texlive-latex-recommended tk8.6-dev valgrind x11proto-core-dev xauth xdg-utils xfonts-base xvfb zlib1g-dev -y \\\n && cd /tmp \\\n && svn co https://svn.r-project.org/R/trunk R-devel \\\n && cd /tmp/R-devel \\\n && ./tools/rsync-recommended \\\n && R_PAPERSIZE=letter R_BATCHSAVE=\"--no-save --no-restore\" R_BROWSER=xdg-open PAGER=/usr/bin/pager PERL=/usr/bin/perl R_UNZIPCMD=/usr/bin/unzip R_ZIPCMD=/usr/bin/zip R_PRINTCMD=/usr/bin/lpr LIBnn=lib AWK=/usr/bin/awk CFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native -fsanitize=address\" FFLAGS=\"-pipe -O2 -mtune=native\" FCFLAGS=\"-pipe -O2 -mtune=native\" CXXFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native\" MAIN_LDFLAGS=\"-fsanitize=address,undefined\" CC=\"gcc -std=gnu99 -fsanitize=address,undefined -fno-omit-frame-pointer\" CXX=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" CXX1X=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" FC=\"gfortran\" F77=\"gfortran\" ./configure --enable-R-shlib --with-blas --with-readline --with-recommended-packages --program-suffix=dev --disable-openmp \\\n && make \\\n && make install \\\n && make clean \\\n && echo \"options(repos = c(CRAN = 'https://cran.rstudio.com/'), download.file.method = 'libcurl')\" >> /usr/local/lib/R/etc/Rprofile.site \\\n && mkdir -p /usr/local/lib/R/site-library \\\n && chown root:staff /usr/local/lib/R/site-library \\\n && chmod g+wx /usr/local/lib/R/site-library \\\n && echo \"R_LIBS_USER='/usr/local/lib/R/site-library'\" >> /usr/local/lib/R/etc/Renviron \\\n && echo \"R_LIBS=${R_LIBS-'/usr/local/lib/R/site-library:/usr/local/lib/R/library:/usr/lib/R/library'}\" >> /usr/local/lib/R/etc/Renviron \\\n && [ -z \"$BUILD_DATE\" ] \\\n && BUILD_DATE=$( TZ=\"America/Los_Angeles\" date -I ;) || true \\\n && MRAN=https://mran.microsoft.com/snapshot/${BUILD_DATE} \\\n && echo MRAN=$MRAN >> /etc/environment \\\n && export MRAN=$MRAN \\\n && Rscript -e \"install.packages(c('littler', 'docopt'), repos = '$MRAN')\" \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/install2.r /usr/local/bin/install2.r \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/installGithub.r /usr/local/bin/installGithub.r \\\n && ln -s /usr/local/lib/R/site-library/littler/bin/r /usr/local/bin/r \\\n && curl -O /usr/local/bin/install2.r https://github.com/eddelbuettel/littler/raw/master/inst/examples/install2.r \\\n && chmod +x /usr/local/bin/install2.r \\\n && cd / \\\n && rm -rf /tmp/* \\\n && apt-get remove --purge -y $BUILDDEPS \\\n && apt-get autoremove -y \\\n && apt-get autoclean -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\n# # More verbose UBSAN/SAN output (cf #3) -- this is still somewhat speculative\n# # Entry copied from Prof Ripley's setup described at http://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt\nENV ASAN_OPTIONS=\"'alloc_dealloc_mismatch=0:detect_leaks=0:detect_odr_violation=0'\"\nCMD [\"R\"]\n","injectedSmells":[],"originalDockerfileHash":"6c0974336318ff495a72bb00184fdf68","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:stretch\n#  # From the Build-Depends of the Debian R package, plus subversion\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends ca-certificates curl ed fonts-texgyre less locales libreadline-dev vim-tiny wget -y \\\n && echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n && locale-gen en_US.utf8 \\\n && /usr/sbin/update-locale LANG=en_US.UTF-8 \\\n && apt-get install --no-install-recommends bash-completion bison debhelper default-jdk g++ gcc gfortran groff-base libblas-dev libbz2-dev libcairo2-dev libcurl4-openssl-dev libjpeg-dev liblapack-dev liblzma-dev libncurses5-dev libpango1.0-dev libpcre3-dev libpng-dev libreadline-dev libtiff5-dev libx11-dev libxt-dev mpack rsync subversion tcl8.6-dev texinfo texlive-base texlive-extra-utils texlive-fonts-extra texlive-fonts-recommended texlive-generic-recommended texlive-latex-base texlive-latex-extra texlive-latex-recommended tk8.6-dev valgrind x11proto-core-dev xauth xdg-utils xfonts-base xvfb zlib1g-dev -y \\\n && cd /tmp \\\n && svn co https://svn.r-project.org/R/trunk R-devel \\\n && cd /tmp/R-devel \\\n && ./tools/rsync-recommended \\\n && R_PAPERSIZE=letter R_BATCHSAVE=\"--no-save --no-restore\" R_BROWSER=xdg-open PAGER=/usr/bin/pager PERL=/usr/bin/perl R_UNZIPCMD=/usr/bin/unzip R_ZIPCMD=/usr/bin/zip R_PRINTCMD=/usr/bin/lpr LIBnn=lib AWK=/usr/bin/awk CFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native -fsanitize=address\" FFLAGS=\"-pipe -O2 -mtune=native\" FCFLAGS=\"-pipe -O2 -mtune=native\" CXXFLAGS=\"-pipe -Wall -pedantic -O2 -mtune=native\" MAIN_LDFLAGS=\"-fsanitize=address,undefined\" CC=\"gcc -std=gnu99 -fsanitize=address,undefined -fno-omit-frame-pointer\" CXX=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" CXX1X=\"g++ -fsanitize=address,undefined,bounds-strict -fno-omit-frame-pointer -fno-sanitize=object-size,vptr\" FC=\"gfortran\" F77=\"gfortran\" ./configure --enable-R-shlib --with-blas --with-readline --with-recommended-packages --program-suffix=dev --disable-openmp \\\n && make \\\n && make install \\\n && make clean \\\n && echo \"options(repos = c(CRAN = 'https://cran.rstudio.com/'), download.file.method = 'libcurl')\" >> /usr/local/lib/R/etc/Rprofile.site \\\n && mkdir -p /usr/local/lib/R/site-library \\\n && chown root:staff /usr/local/lib/R/site-library \\\n && chmod g+wx /usr/local/lib/R/site-library \\\n && echo \"R_LIBS_USER='/usr/local/lib/R/site-library'\" >> /usr/local/lib/R/etc/Renviron \\\n && echo \"R_LIBS=${R_LIBS-'/usr/local/lib/R/site-library:/usr/local/lib/R/library:/usr/lib/R/library'}\" >> /usr/local/lib/R/etc/Renviron \\\n && [ -z \"$BUILD_DATE\" ] \\\n && BUILD_DATE=$( TZ=\"America/Los_Angeles\" date -I ;) || true \\\n && MRAN=https://mran.microsoft.com/snapshot/${BUILD_DATE} \\\n && echo MRAN=$MRAN >> /etc/environment \\\n && export MRAN=$MRAN \\\n && Rscript -e \"install.packages(c('littler', 'docopt'), repos = '$MRAN')\" \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/install2.r /usr/local/bin/install2.r \\\n && ln -s /usr/local/lib/R/site-library/littler/examples/installGithub.r /usr/local/bin/installGithub.r \\\n && ln -s /usr/local/lib/R/site-library/littler/bin/r /usr/local/bin/r \\\n && curl -O /usr/local/bin/install2.r https://github.com/eddelbuettel/littler/raw/master/inst/examples/install2.r \\\n && chmod +x /usr/local/bin/install2.r \\\n && cd / \\\n && rm -rf /tmp/* \\\n && apt-get remove --purge -y $BUILDDEPS \\\n && apt-get autoremove -y \\\n && apt-get autoclean -y \\\n && rm -rf /var/lib/apt/lists/*\nENV LC_ALL=\"en_US.UTF-8\"\nENV LANG=\"en_US.UTF-8\"\n#  # More verbose UBSAN/SAN output (cf #3) -- this is still somewhat speculative\n#  # Entry copied from Prof Ripley's setup described at http://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt\nENV ASAN_OPTIONS=\"'alloc_dealloc_mismatch=0:detect_leaks=0:detect_odr_violation=0'\"\nCMD [\"R\"]\n","originalDockerfileUglifiedHash":"7d1aa960e83aa9baae4a3442a92ead09","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/76d5e3e6460eea482f27f4faf8cafe20bc8ba54f.dockerfile"}