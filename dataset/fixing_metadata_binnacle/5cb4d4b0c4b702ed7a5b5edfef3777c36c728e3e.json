{"seed":3794245066,"processedDockerfileHash":"ee2f3d41ea8afe4845da99d225882c6b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"#   Code.org CircleCI-dependencies Dockerfile\n#   Pushed to Docker Hub at wjordan/code-dot-org:trusty\nFROM ubuntu:14.04\nUSER root\n#   set timezone to UTC by default\nRUN ln -sf /usr/share/zoneinfo/Etc/UTC /etc/localtime\n#   use unicode\nRUN locale-gen C.UTF-8 || true\nENV LANG=\"C.UTF-8\"\n#   add circleci user\nRUN groupadd --gid 3434 circleci \\\n && useradd --uid 3434 --gid circleci --shell /bin/bash --create-home circleci \\\n && echo 'circleci ALL=NOPASSWD: ALL' >> /etc/sudoers.d/50-circleci\n#   essential tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends curl=7.35.0-1ubuntu2.20 apt-transport-https=1.0.1ubuntu2.24 -y\n#   add yarn\nRUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n#   more tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:1.9.1-1ubuntu0.10 xvfb=2:1.15.1-0ubuntu2.11 yarn=0.27.5-1 sudo=1.8.9p5-1ubuntu1.4 openssh-client=1:6.6p1-2ubuntu2.13 ca-certificates=20170717~14.04.2 tar=1.27.1-1ubuntu0.1 gzip=1.6-3ubuntu1 wget=1.15-1ubuntu1.14.04.5 xz-utils=5.1.1alpha+20120614-2ubuntu2 autoconf=2.69-6 build-essential=11.6ubuntu6 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 libssl-dev=1.0.1f-1ubuntu2.27 curl=7.35.0-1ubuntu2.20 libreadline-dev=6.3-4ubuntu2 python=2.7.5-5ubuntu3 python-dev=2.7.5-5ubuntu3 -y\n#   install ruby\nRUN wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz \\\n && tar -xzvf ruby-2.5.0.tar.gz \\\n && rm ruby-2.5.0.tar.gz \\\n && cd ruby-2.5.0 \\\n && ./configure \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd .. \\\n && rm -r ruby-2.5.0\n#   install bundler\nRUN gem install bundler --version 1.17 \\\n && mkdir -p /usr/local/bundle \\\n && chown -R circleci /usr/local/bundle\n#   install node\nRUN wget https://nodejs.org/dist/v8.15.0/node-v8.15.0.tar.gz \\\n && tar -xzvf node-v8.15.0.tar.gz \\\n && rm node-v8.15.0.tar.gz \\\n && cd node-v8.15.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && cd .. \\\n && rm -r node-v8.15.0\n#   more more tools\nRUN apt-get install --no-install-recommends unzip=6.0-9ubuntu1.5 -y\n#   install firefox\nRUN curl --output /tmp/firefox.deb https://s3.amazonaws.com/circle-downloads/firefox-mozilla-build_47.0.1-0ubuntu1_amd64.deb \\\n && echo 'ef016febe5ec4eaf7d455a34579834bcde7703cb0818c80044f4d148df8473bb /tmp/firefox.deb' | sha256sum -c \\\n && sudo dpkg -i /tmp/firefox.deb || sudo apt-get -f install \\\n && apt-get update \\\n && apt-get install --no-install-recommends libgtk3.0-cil-dev=2.99.2-2ubuntu1 -y \\\n && rm -rf /tmp/firefox.deb\n#   install chrome\nRUN curl -sSL -o /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install ) \\\n && rm -rf /tmp/google-chrome-stable_current_amd64.deb \\\n && sudo sed -i 's|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g' \"/opt/google/chrome/google-chrome\"\n#   install chromedriver\nRUN export CHROMEDRIVER_RELEASE=$( curl http://chromedriver.storage.googleapis.com/LATEST_RELEASE ;) \\\n && curl -sSL -o /tmp/chromedriver_linux64.zip \"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_RELEASE/chromedriver_linux64.zip\" \\\n && cd /tmp \\\n && unzip chromedriver_linux64.zip \\\n && rm -rf chromedriver_linux64.zip \\\n && sudo mv chromedriver /usr/local/bin/chromedriver \\\n && sudo chmod +x /usr/local/bin/chromedriver\n#   install mysql\nRUN curl -sSL -o /tmp/mysql-apt-config_0.8.9-1_all.deb https://dev.mysql.com/get/mysql-apt-config_0.8.9-1_all.deb \\\n && echo \"mysql-apt-config mysql-apt-config/select-server select mysql-5.7\" | /usr/bin/debconf-set-selections \\\n && DEBIAN_FRONTEND=noninteractive dpkg -i /tmp/mysql-apt-config_0.8.9-1_all.deb || apt-get install --no-install-recommends -fy \\\n && rm -rf /tmp/mysql-apt-config_0.8.9-1_all.deb \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server libmysqlclient-dev\nRUN service mysql start \\\n && echo \"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '';\" | mysql \\\n && service mysql stop\n#   install a couple more things from config.yml\nRUN apt-get update \\\n && apt-get install --no-install-recommends parallel=20161222-1~ubuntu0.14.04.2 libmagickwand-dev=8:6.7.7.10-6ubuntu3.13 imagemagick=8:6.7.7.10-6ubuntu3.13 -y\nUSER circleci\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Code.org CircleCI-dependencies Dockerfile\n#  Pushed to Docker Hub at wjordan/code-dot-org:trusty\nFROM ubuntu:14.04\nUSER root\n#  set timezone to UTC by default\nRUN ln -sf /usr/share/zoneinfo/Etc/UTC /etc/localtime\n#  use unicode\nRUN locale-gen C.UTF-8 || true\nENV LANG=\"C.UTF-8\"\n#  add circleci user\nRUN groupadd --gid 3434 circleci \\\n && useradd --uid 3434 --gid circleci --shell /bin/bash --create-home circleci \\\n && echo 'circleci ALL=NOPASSWD: ALL' >> /etc/sudoers.d/50-circleci\n#  essential tools\nRUN apt-get update \\\n && apt-get install curl apt-transport-https -y\n#  add yarn\nRUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n#  more tools\nRUN apt-get update \\\n && apt-get install git xvfb yarn=0.27.5-1 sudo openssh-client ca-certificates tar gzip wget xz-utils autoconf build-essential zlib1g-dev libssl-dev curl libreadline-dev python python-dev -y\n#  install ruby\nRUN wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz \\\n && tar -xzvf ruby-2.5.0.tar.gz \\\n && rm ruby-2.5.0.tar.gz \\\n && cd ruby-2.5.0 \\\n && ./configure \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd .. \\\n && rm -r ruby-2.5.0\n#  install bundler\nRUN gem install bundler --version 1.17 \\\n && mkdir -p /usr/local/bundle \\\n && chown -R circleci /usr/local/bundle\n#  install node\nRUN wget https://nodejs.org/dist/v8.15.0/node-v8.15.0.tar.gz \\\n && tar -xzvf node-v8.15.0.tar.gz \\\n && rm node-v8.15.0.tar.gz \\\n && cd node-v8.15.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && cd .. \\\n && rm -r node-v8.15.0\n#  more more tools\nRUN apt-get install unzip -y\n#  install firefox\nRUN curl --output /tmp/firefox.deb https://s3.amazonaws.com/circle-downloads/firefox-mozilla-build_47.0.1-0ubuntu1_amd64.deb \\\n && echo 'ef016febe5ec4eaf7d455a34579834bcde7703cb0818c80044f4d148df8473bb /tmp/firefox.deb' | sha256sum -c \\\n && sudo dpkg -i /tmp/firefox.deb || sudo apt-get -f install \\\n && apt-get update \\\n && apt-get install libgtk3.0-cil-dev -y \\\n && rm -rf /tmp/firefox.deb\n#  install chrome\nRUN curl -sSL -o /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install ) \\\n && rm -rf /tmp/google-chrome-stable_current_amd64.deb \\\n && sudo sed -i 's|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g' \"/opt/google/chrome/google-chrome\"\n#  install chromedriver\nRUN export CHROMEDRIVER_RELEASE=$( curl http://chromedriver.storage.googleapis.com/LATEST_RELEASE ;) \\\n && curl -sSL -o /tmp/chromedriver_linux64.zip \"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_RELEASE/chromedriver_linux64.zip\" \\\n && cd /tmp \\\n && unzip chromedriver_linux64.zip \\\n && rm -rf chromedriver_linux64.zip \\\n && sudo mv chromedriver /usr/local/bin/chromedriver \\\n && sudo chmod +x /usr/local/bin/chromedriver\n#  install mysql\nRUN curl -sSL -o /tmp/mysql-apt-config_0.8.9-1_all.deb https://dev.mysql.com/get/mysql-apt-config_0.8.9-1_all.deb \\\n && echo \"mysql-apt-config mysql-apt-config/select-server select mysql-5.7\" | /usr/bin/debconf-set-selections \\\n && DEBIAN_FRONTEND=noninteractive dpkg -i /tmp/mysql-apt-config_0.8.9-1_all.deb || apt-get install -fy \\\n && rm -rf /tmp/mysql-apt-config_0.8.9-1_all.deb \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server libmysqlclient-dev\nRUN service mysql start \\\n && echo \"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '';\" | mysql \\\n && service mysql stop\n#  install a couple more things from config.yml\nRUN apt-get update \\\n && apt-get install parallel libmagickwand-dev imagemagick -y\nUSER circleci\n","injectedSmells":[],"originalDockerfileHash":"d9a2bd4527fdcb64e0c973afe22795ca","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Code.org CircleCI-dependencies Dockerfile\n#   Pushed to Docker Hub at wjordan/code-dot-org:trusty\nFROM ubuntu:14.04\nUSER root\n#   set timezone to UTC by default\nRUN ln -sf /usr/share/zoneinfo/Etc/UTC /etc/localtime\n#   use unicode\nRUN locale-gen C.UTF-8 || true\nENV LANG=\"C.UTF-8\"\n#   add circleci user\nRUN groupadd --gid 3434 circleci \\\n && useradd --uid 3434 --gid circleci --shell /bin/bash --create-home circleci \\\n && echo 'circleci ALL=NOPASSWD: ALL' >> /etc/sudoers.d/50-circleci\n#   essential tools\nRUN apt-get update \\\n && apt-get install curl apt-transport-https -y\n#   add yarn\nRUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n#   more tools\nRUN apt-get update \\\n && apt-get install git xvfb yarn=0.27.5-1 sudo openssh-client ca-certificates tar gzip wget xz-utils autoconf build-essential zlib1g-dev libssl-dev curl libreadline-dev python python-dev -y\n#   install ruby\nRUN wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz \\\n && tar -xzvf ruby-2.5.0.tar.gz \\\n && rm ruby-2.5.0.tar.gz \\\n && cd ruby-2.5.0 \\\n && ./configure \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd .. \\\n && rm -r ruby-2.5.0\n#   install bundler\nRUN gem install bundler --version 1.17 \\\n && mkdir -p /usr/local/bundle \\\n && chown -R circleci /usr/local/bundle\n#   install node\nRUN wget https://nodejs.org/dist/v8.15.0/node-v8.15.0.tar.gz \\\n && tar -xzvf node-v8.15.0.tar.gz \\\n && rm node-v8.15.0.tar.gz \\\n && cd node-v8.15.0 \\\n && ./configure \\\n && make -j4 \\\n && make install \\\n && cd .. \\\n && rm -r node-v8.15.0\n#   more more tools\nRUN apt-get install unzip -y\n#   install firefox\nRUN curl --output /tmp/firefox.deb https://s3.amazonaws.com/circle-downloads/firefox-mozilla-build_47.0.1-0ubuntu1_amd64.deb \\\n && echo 'ef016febe5ec4eaf7d455a34579834bcde7703cb0818c80044f4d148df8473bb /tmp/firefox.deb' | sha256sum -c \\\n && sudo dpkg -i /tmp/firefox.deb || sudo apt-get -f install \\\n && apt-get update \\\n && apt-get install libgtk3.0-cil-dev -y \\\n && rm -rf /tmp/firefox.deb\n#   install chrome\nRUN curl -sSL -o /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n && (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install ) \\\n && rm -rf /tmp/google-chrome-stable_current_amd64.deb \\\n && sudo sed -i 's|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g' \"/opt/google/chrome/google-chrome\"\n#   install chromedriver\nRUN export CHROMEDRIVER_RELEASE=$( curl http://chromedriver.storage.googleapis.com/LATEST_RELEASE ;) \\\n && curl -sSL -o /tmp/chromedriver_linux64.zip \"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_RELEASE/chromedriver_linux64.zip\" \\\n && cd /tmp \\\n && unzip chromedriver_linux64.zip \\\n && rm -rf chromedriver_linux64.zip \\\n && sudo mv chromedriver /usr/local/bin/chromedriver \\\n && sudo chmod +x /usr/local/bin/chromedriver\n#   install mysql\nRUN curl -sSL -o /tmp/mysql-apt-config_0.8.9-1_all.deb https://dev.mysql.com/get/mysql-apt-config_0.8.9-1_all.deb \\\n && echo \"mysql-apt-config mysql-apt-config/select-server select mysql-5.7\" | /usr/bin/debconf-set-selections \\\n && DEBIAN_FRONTEND=noninteractive dpkg -i /tmp/mysql-apt-config_0.8.9-1_all.deb || apt-get install -fy \\\n && rm -rf /tmp/mysql-apt-config_0.8.9-1_all.deb \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server libmysqlclient-dev\nRUN service mysql start \\\n && echo \"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '';\" | mysql \\\n && service mysql stop\n#   install a couple more things from config.yml\nRUN apt-get update \\\n && apt-get install parallel libmagickwand-dev imagemagick -y\nUSER circleci\n","originalDockerfileUglifiedHash":"44f0a855667d86f8fff8f05483fe0801","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5cb4d4b0c4b702ed7a5b5edfef3777c36c728e3e.dockerfile"}