{"seed":345152811,"processedDockerfileHash":"ce231c25d08da31d58ff4f4935af3a94","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"ARG PHP_VERSION=7.2.19\nFROM --platform=$TARGETPLATFORM php:${PHP_VERSION}-fpm-alpine AS php\nLABEL maintainer=\"khs1994-docker/lnmp <khs1994@khs1994.com>\"\nENV TZ=\"Asia/Shanghai\" \\\n    APP_ENV=\"development\"\nENV PHP_EXTENSION=\"sockets  sysvmsg  sysvsem  sysvshm\"\n#   ARG ALPINE_URL=dl-cdn.alpinelinux.org\nARG ALPINE_URL=mirrors.ustc.edu.cn\nRUN apk add bash tzdata --no-cache\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && for extension in $PHP_EXTENSION; do docker-php-ext-install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"${extension} install error\" \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bcmath \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=zip \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libzip --no-cache \\\n && apk add libzip-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-configure zip --with-libzip \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gd \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libpng freetype libjpeg-turbo libxpm libwebp zlib --no-cache \\\n && apk add libpng-dev freetype-dev libjpeg-turbo-dev libxpm-dev libwebp-dev zlib-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-configure gd --disable-gd-jis-conv --with-freetype-dir=/usr --with-jpeg-dir=/usr --with-png-dir=/usr --with-webp-dir=/usr --with-xpm-dir=/usr \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_mysql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=mysqli \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=calendar \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pcntl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libpq --no-cache \\\n && apk add postgresql-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libpq --no-cache \\\n && apk add postgresql-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gmp \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add gmp --no-cache \\\n && apk add gmp-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=exif \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libexif --no-cache \\\n && apk add libexif-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=enchant \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add enchant --no-cache \\\n && apk add enchant-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xmlrpc \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add xmlrpc-c --no-cache \\\n && apk add xmlrpc-c-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xsl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libxslt --no-cache \\\n && apk add libxslt-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=imap \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add c-client --no-cache \\\n && apk add imap-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bz2 \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libbz2 --no-cache \\\n && apk add bzip2-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gettext \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libbz2 --no-cache \\\n && apk add gettext-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=intl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add icu-libs --no-cache \\\n && apk add icu-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=tidy \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add tidyhtml-libs --no-cache \\\n && apk add tidyhtml-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nENV PECL_EXTENSION=\"mongodb  igbinary  redis\"\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && for extension in $PECL_EXTENSION; do pecl install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"pecl ${extension} install error\" \\\n && rm -rf /usr/local/lib/php/doc/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/lib/php/test/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/include/php/ext/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=memcached \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add libmemcached-libs --no-cache \\\n && apk add libmemcached-dev cyrus-sasl-dev zlib-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=yaml \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add yaml --no-cache \\\n && apk add yaml-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=xdebug \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/* \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini.default\nRUN export EXT_NAME=tideways_xhprof \\\n && apk add $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && cd /tmp \\\n && wget https://github.com/tideways/php-xhprof-extension/archive/master.zip \\\n && unzip master.zip \\\n && cd php-xhprof-extension-master \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini.default \\\n && rm -rf /tmp/*\nRUN export EXT_NAME=swoole \\\n && export EXT_VERSION=4.2.12 \\\n && apk add nghttp2-libs --no-cache \\\n && apk add openssl-dev nghttp2-dev $PHPIZE_DEPS --no-cache --virtual .build-deps \\\n && cd /tmp \\\n && wget https://pecl.php.net/get/${EXT_NAME}-${EXT_VERSION}.tgz \\\n && tar -zxvf ${EXT_NAME}-${EXT_VERSION}.tgz \\\n && cd ${EXT_NAME}-${EXT_VERSION} \\\n && phpize \\\n && ./configure --with-php-config=php-config --enable-openssl --enable-sockets --enable-http2 --enable-mysqlnd \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /tmp/*\n#   创建日志文件夹\nRUN mkdir -p /var/log/php-fpm \\\n && ln -sf /dev/stdout /var/log/php-fpm/access.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/error.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/xdebug-remote.log \\\n && chmod -R 777 /var/log/php-fpm\nWORKDIR /app\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:80 || exit 1\n","originalDockerfile":"ARG PHP_VERSION=7.2.19\nFROM --platform=$TARGETPLATFORM php:${PHP_VERSION}-fpm-alpine AS php\nLABEL maintainer=\"khs1994-docker/lnmp <khs1994@khs1994.com>\"\nENV TZ=\"Asia/Shanghai\" \\\n    APP_ENV=\"development\"\nENV PHP_EXTENSION=\"sockets  sysvmsg  sysvsem  sysvshm\"\n#  ARG ALPINE_URL=dl-cdn.alpinelinux.org\nARG ALPINE_URL=mirrors.ustc.edu.cn\nRUN apk add --no-cache bash tzdata\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && for extension in $PHP_EXTENSION; do docker-php-ext-install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"${extension} install error\" \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bcmath \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=zip \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libzip \\\n && apk add --no-cache --virtual .build-deps libzip-dev $PHPIZE_DEPS \\\n && docker-php-ext-configure zip --with-libzip \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gd \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpng freetype libjpeg-turbo libxpm libwebp zlib \\\n && apk add --no-cache --virtual .build-deps libpng-dev freetype-dev libjpeg-turbo-dev libxpm-dev libwebp-dev zlib-dev $PHPIZE_DEPS \\\n && docker-php-ext-configure gd --disable-gd-jis-conv --with-freetype-dir=/usr --with-jpeg-dir=/usr --with-png-dir=/usr --with-webp-dir=/usr --with-xpm-dir=/usr \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_mysql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=mysqli \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=calendar \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pcntl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpq \\\n && apk add --no-cache --virtual .build-deps postgresql-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpq \\\n && apk add --no-cache --virtual .build-deps postgresql-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gmp \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache gmp \\\n && apk add --no-cache --virtual .build-deps gmp-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=exif \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libexif \\\n && apk add --no-cache --virtual .build-deps libexif-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=enchant \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache enchant \\\n && apk add --no-cache --virtual .build-deps enchant-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xmlrpc \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache xmlrpc-c \\\n && apk add --no-cache --virtual .build-deps xmlrpc-c-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xsl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libxslt \\\n && apk add --no-cache --virtual .build-deps libxslt-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=imap \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache c-client \\\n && apk add --no-cache --virtual .build-deps imap-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bz2 \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libbz2 \\\n && apk add --no-cache --virtual .build-deps bzip2-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gettext \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libbz2 \\\n && apk add --no-cache --virtual .build-deps gettext-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=intl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache icu-libs \\\n && apk add --no-cache --virtual .build-deps icu-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=tidy \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache tidyhtml-libs \\\n && apk add --no-cache --virtual .build-deps tidyhtml-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nENV PECL_EXTENSION=\"mongodb  igbinary  redis\"\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && for extension in $PECL_EXTENSION; do pecl install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"pecl ${extension} install error\" \\\n && rm -rf /usr/local/lib/php/doc/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/lib/php/test/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/include/php/ext/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=memcached \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libmemcached-libs \\\n && apk add --no-cache --virtual .build-deps libmemcached-dev cyrus-sasl-dev zlib-dev $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=yaml \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache yaml \\\n && apk add --no-cache --virtual .build-deps yaml-dev $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=xdebug \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/* \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini.default\nRUN export EXT_NAME=tideways_xhprof \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && cd /tmp \\\n && wget https://github.com/tideways/php-xhprof-extension/archive/master.zip \\\n && unzip master.zip \\\n && cd php-xhprof-extension-master \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini.default \\\n && rm -rf /tmp/*\nRUN export EXT_NAME=swoole \\\n && export EXT_VERSION=4.2.12 \\\n && apk add --no-cache nghttp2-libs \\\n && apk add --no-cache --virtual .build-deps openssl-dev nghttp2-dev $PHPIZE_DEPS \\\n && cd /tmp \\\n && wget https://pecl.php.net/get/${EXT_NAME}-${EXT_VERSION}.tgz \\\n && tar -zxvf ${EXT_NAME}-${EXT_VERSION}.tgz \\\n && cd ${EXT_NAME}-${EXT_VERSION} \\\n && phpize \\\n && ./configure --with-php-config=php-config --enable-openssl --enable-sockets --enable-http2 --enable-mysqlnd \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /tmp/*\n#  创建日志文件夹\nRUN mkdir -p /var/log/php-fpm \\\n && ln -sf /dev/stdout /var/log/php-fpm/access.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/error.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/xdebug-remote.log \\\n && chmod -R 777 /var/log/php-fpm\nWORKDIR /app\n","injectedSmells":[],"originalDockerfileHash":"2f90bcdcae78bb30a26de1ad14929d2b","successfullyInjectedSmells":[],"originalDockerfileUglified":"ARG PHP_VERSION=7.2.19\nFROM --platform=$TARGETPLATFORM php:${PHP_VERSION}-fpm-alpine AS php\nLABEL maintainer=\"khs1994-docker/lnmp <khs1994@khs1994.com>\"\nENV TZ=\"Asia/Shanghai\" \\\n    APP_ENV=\"development\"\nENV PHP_EXTENSION=\"sockets  sysvmsg  sysvsem  sysvshm\"\n#   ARG ALPINE_URL=dl-cdn.alpinelinux.org\nARG ALPINE_URL=mirrors.ustc.edu.cn\nRUN apk add --no-cache bash tzdata\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && for extension in $PHP_EXTENSION; do docker-php-ext-install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"${extension} install error\" \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bcmath \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=zip \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libzip \\\n && apk add --no-cache --virtual .build-deps libzip-dev $PHPIZE_DEPS \\\n && docker-php-ext-configure zip --with-libzip \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gd \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpng freetype libjpeg-turbo libxpm libwebp zlib \\\n && apk add --no-cache --virtual .build-deps libpng-dev freetype-dev libjpeg-turbo-dev libxpm-dev libwebp-dev zlib-dev $PHPIZE_DEPS \\\n && docker-php-ext-configure gd --disable-gd-jis-conv --with-freetype-dir=/usr --with-jpeg-dir=/usr --with-png-dir=/usr --with-webp-dir=/usr --with-xpm-dir=/usr \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_mysql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=mysqli \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=calendar \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pcntl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pdo_pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpq \\\n && apk add --no-cache --virtual .build-deps postgresql-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=pgsql \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libpq \\\n && apk add --no-cache --virtual .build-deps postgresql-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gmp \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache gmp \\\n && apk add --no-cache --virtual .build-deps gmp-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=exif \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libexif \\\n && apk add --no-cache --virtual .build-deps libexif-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=enchant \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache enchant \\\n && apk add --no-cache --virtual .build-deps enchant-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xmlrpc \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache xmlrpc-c \\\n && apk add --no-cache --virtual .build-deps xmlrpc-c-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=xsl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libxslt \\\n && apk add --no-cache --virtual .build-deps libxslt-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=imap \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache c-client \\\n && apk add --no-cache --virtual .build-deps imap-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=bz2 \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libbz2 \\\n && apk add --no-cache --virtual .build-deps bzip2-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=gettext \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libbz2 \\\n && apk add --no-cache --virtual .build-deps gettext-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=intl \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache icu-libs \\\n && apk add --no-cache --virtual .build-deps icu-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nRUN export EXT_NAME=tidy \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache tidyhtml-libs \\\n && apk add --no-cache --virtual .build-deps tidyhtml-dev $PHPIZE_DEPS \\\n && docker-php-ext-install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps\nENV PECL_EXTENSION=\"mongodb  igbinary  redis\"\nRUN sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && for extension in $PECL_EXTENSION; do pecl install $extension \\\n && docker-php-ext-enable $( echo ${extension} | cut -d '-' -f 1 ;) || echo \"pecl ${extension} install error\" \\\n && rm -rf /usr/local/lib/php/doc/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/lib/php/test/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && rm -rf /usr/local/include/php/ext/$( echo ${extension} | cut -d '-' -f 1 ;) \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${extension} | cut -d '-' -f 1 ;).so ; done \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=memcached \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache libmemcached-libs \\\n && apk add --no-cache --virtual .build-deps libmemcached-dev cyrus-sasl-dev zlib-dev $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=yaml \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache yaml \\\n && apk add --no-cache --virtual .build-deps yaml-dev $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/test/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/*\nRUN export EXT_NAME=xdebug \\\n && sed -i \"s/dl-cdn.alpinelinux.org/${ALPINE_URL}/g\" /etc/apk/repositories \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && pecl install $EXT_NAME \\\n && docker-php-ext-enable $EXT_NAME \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /tmp/pear \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /usr/local/lib/php/.registry/.channel.pecl.php.net/* \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini.default\nRUN export EXT_NAME=tideways_xhprof \\\n && apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n && cd /tmp \\\n && wget https://github.com/tideways/php-xhprof-extension/archive/master.zip \\\n && unzip master.zip \\\n && cd php-xhprof-extension-master \\\n && phpize \\\n && ./configure \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && mv /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini /usr/local/etc/php/conf.d/docker-php-ext-tideways_xhprof.ini.default \\\n && rm -rf /tmp/*\nRUN export EXT_NAME=swoole \\\n && export EXT_VERSION=4.2.12 \\\n && apk add --no-cache nghttp2-libs \\\n && apk add --no-cache --virtual .build-deps openssl-dev nghttp2-dev $PHPIZE_DEPS \\\n && cd /tmp \\\n && wget https://pecl.php.net/get/${EXT_NAME}-${EXT_VERSION}.tgz \\\n && tar -zxvf ${EXT_NAME}-${EXT_VERSION}.tgz \\\n && cd ${EXT_NAME}-${EXT_VERSION} \\\n && phpize \\\n && ./configure --with-php-config=php-config --enable-openssl --enable-sockets --enable-http2 --enable-mysqlnd \\\n && make \\\n && make install \\\n && docker-php-ext-enable ${EXT_NAME} \\\n && strip --strip-all $( php-config --extension-dir ;)/$( echo ${EXT_NAME} | cut -d '-' -f 1 ;).so \\\n && apk del --no-network --no-cache .build-deps \\\n && rm -rf /usr/local/lib/php/doc/$EXT_NAME \\\n && rm -rf /usr/local/include/php/ext/$EXT_NAME \\\n && rm -rf /tmp/*\n#   创建日志文件夹\nRUN mkdir -p /var/log/php-fpm \\\n && ln -sf /dev/stdout /var/log/php-fpm/access.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/error.log \\\n && ln -sf /dev/stderr /var/log/php-fpm/xdebug-remote.log \\\n && chmod -R 777 /var/log/php-fpm\nWORKDIR /app\n","originalDockerfileUglifiedHash":"800654f29edffba7c2f77c4043b9d2ac","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/10ed2db405f0305732586aa8f8219a8c361a8c1f.dockerfile"}