{"seed":738863653,"processedDockerfileHash":"8b3abe3b988de28b7ee5ea60c4ecb919","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apk","have-a-healthcheck"],"processedDockerfile":"FROM alpine:3.7\n#   Jovyan user\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nRUN adduser -s /bin/bash -u $NB_UID -D $NB_USER\nUSER jovyan\nRUN mkdir /home/$NB_USER/work \\\n && mkdir /home/$NB_USER/.jupyter \\\n && mkdir /home/$NB_USER/.local\nUSER root\n#   Install Jupyter and gophernotes.\nRUN set -x \\\n && apk update \\\n && apk add ca-certificates=20190108-r0 python3=3.6.9-r1 su-exec=0.2-r0 gcc=6.4.0-r5 g++=6.4.0-r5 git=2.15.4-r0 pkgconfig python3-dev=3.6.9-r1 zeromq-dev=4.2.5-r1 musl-dev=1.1.18-r4 mercurial=4.5.2-r1 libtool=2.4.6-r4 autoconf=2.69-r0 automake=1.15.1-r0 make=4.2.1-r0 --no-cache \\\n && echo pip upgrade \\\n && pip3 install --upgrade pip \\\n && echo python3.6 \\\n && cp /usr/bin/python3.6 /usr/bin/python \\\n && echo update chacher \\\n && apk --update-cache --allow-untrusted --repository http://dl-4.alpinelinux.org/alpine/edge/community --arch=x86_64 add go \\\n && ln -s /usr/include/locale.h /usr/include/xlocale.h \\\n && pip3 install jupyter notebook \\\n && find /usr/lib/python3.6 -name __pycache__ | xargs rm -r \\\n && rm -rf /root/.[acpw]* ipaexg00301* \\\n && rm -rf /var/cache/apk/*\n#   switch to jovyan user\nUSER jovyan\n#   environment variables\nENV GOPATH=\"/home/jovyan/go\"\nENV CGO_ENABLED=\"1\" \\\n    CGO_CPPFLAGS=\"-I/usr/include\"\n#   install gophernotes\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure github.com/pebbe/zmq4 \\\n && go get github.com/gopherdata/gophernotes \\\n && mkdir -p ~/.local/share/jupyter/kernels/gophernotes \\\n && cp -r ~/go/src/github.com/gopherdata/gophernotes/kernel/* ~/.local/share/jupyter/kernels/gophernotes\n#   move the gophernotes binary\nUSER root\nRUN cp /home/jovyan/go/bin/gophernotes /usr/local/bin/\nUSER jovyan\n#   get the relevant Go packages\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure gonum.org/v1/plot/... \\\n && go get -insecure gonum.org/v1/gonum/... \\\n && go get github.com/kniren/gota/... \\\n && go get github.com/sajari/regression \\\n && go get github.com/sjwhitworth/golearn/... \\\n && go get -insecure go-hep.org/x/hep/csvutil/... \\\n && go get -insecure go-hep.org/x/hep/fit \\\n && go get -insecure go-hep.org/x/hep/hbook \\\n && go get github.com/montanaflynn/stats \\\n && go get github.com/boltdb/bolt \\\n && go get github.com/patrickmn/go-cache \\\n && go get github.com/chewxy/math32 \\\n && go get gonum.org/v1/gonum/mat \\\n && go get github.com/chewxy/hm \\\n && go get -u gorgonia.org/vecf64 \\\n && go get -u gorgonia.org/vecf32 \\\n && go get github.com/awalterschulze/gographviz \\\n && go get github.com/leesper/go_rng \\\n && go get github.com/pkg/errors \\\n && go get github.com/stretchr/testify/assert \\\n && go get github.com/kniren/gota/dataframe \\\n && go get github.com/skelterjohn/go.matrix \\\n && go get github.com/gonum/matrix/mat64 \\\n && go get github.com/gonum/stat \\\n && go get github.com/mash/gokmeans \\\n && go get github.com/garyburd/go-oauth/oauth \\\n && go get github.com/machinebox/sdk-go/textbox\nEXPOSE 8888/tcp\nCMD [\"jupyter\", \"notebook\", \"--no-browser\", \"--ip=*\", \"--NotebookApp.token=''\", \"--NotebookApp.disable_check_xsrf=True\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM alpine:3.7\n#  Jovyan user\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nRUN adduser -s /bin/bash -u $NB_UID -D $NB_USER\nUSER jovyan\nRUN mkdir /home/$NB_USER/work \\\n && mkdir /home/$NB_USER/.jupyter \\\n && mkdir /home/$NB_USER/.local\nUSER root\n#  Install Jupyter and gophernotes.\nRUN set -x \\\n && apk update \\\n && apk --no-cache add ca-certificates python3 su-exec gcc g++ git pkgconfig python3-dev zeromq-dev musl-dev mercurial libtool autoconf automake make \\\n && echo pip upgrade \\\n && pip3 install --upgrade pip \\\n && echo python3.6 \\\n && cp /usr/bin/python3.6 /usr/bin/python \\\n && echo update chacher \\\n && apk --update-cache --allow-untrusted --repository http://dl-4.alpinelinux.org/alpine/edge/community --arch=x86_64 add go \\\n && ln -s /usr/include/locale.h /usr/include/xlocale.h \\\n && pip3 install jupyter notebook \\\n && find /usr/lib/python3.6 -name __pycache__ | xargs rm -r \\\n && rm -rf /root/.[acpw]* ipaexg00301* \\\n && rm -rf /var/cache/apk/*\n#  switch to jovyan user\nUSER jovyan\n#  environment variables\nENV GOPATH=\"/home/jovyan/go\"\nENV CGO_ENABLED=\"1\" \\\n    CGO_CPPFLAGS=\"-I/usr/include\"\n#  install gophernotes\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure github.com/pebbe/zmq4 \\\n && go get github.com/gopherdata/gophernotes \\\n && mkdir -p ~/.local/share/jupyter/kernels/gophernotes \\\n && cp -r ~/go/src/github.com/gopherdata/gophernotes/kernel/* ~/.local/share/jupyter/kernels/gophernotes\n#  move the gophernotes binary\nUSER root\nRUN cp /home/jovyan/go/bin/gophernotes /usr/local/bin/\nUSER jovyan\n#  get the relevant Go packages\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure gonum.org/v1/plot/... \\\n && go get -insecure gonum.org/v1/gonum/... \\\n && go get github.com/kniren/gota/... \\\n && go get github.com/sajari/regression \\\n && go get github.com/sjwhitworth/golearn/... \\\n && go get -insecure go-hep.org/x/hep/csvutil/... \\\n && go get -insecure go-hep.org/x/hep/fit \\\n && go get -insecure go-hep.org/x/hep/hbook \\\n && go get github.com/montanaflynn/stats \\\n && go get github.com/boltdb/bolt \\\n && go get github.com/patrickmn/go-cache \\\n && go get github.com/chewxy/math32 \\\n && go get gonum.org/v1/gonum/mat \\\n && go get github.com/chewxy/hm \\\n && go get -u gorgonia.org/vecf64 \\\n && go get -u gorgonia.org/vecf32 \\\n && go get github.com/awalterschulze/gographviz \\\n && go get github.com/leesper/go_rng \\\n && go get github.com/pkg/errors \\\n && go get github.com/stretchr/testify/assert \\\n && go get github.com/kniren/gota/dataframe \\\n && go get github.com/skelterjohn/go.matrix \\\n && go get github.com/gonum/matrix/mat64 \\\n && go get github.com/gonum/stat \\\n && go get github.com/mash/gokmeans \\\n && go get github.com/garyburd/go-oauth/oauth \\\n && go get github.com/machinebox/sdk-go/textbox\nEXPOSE 8888/tcp\nCMD [\"jupyter\", \"notebook\", \"--no-browser\", \"--ip=*\", \"--NotebookApp.token=''\", \"--NotebookApp.disable_check_xsrf=True\"]\n","injectedSmells":[],"originalDockerfileHash":"0bb686bb542b4573dccd83692c0a2a25","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM alpine:3.7\n#   Jovyan user\nENV NB_USER=\"jovyan\"\nENV NB_UID=\"1000\"\nRUN adduser -s /bin/bash -u $NB_UID -D $NB_USER\nUSER jovyan\nRUN mkdir /home/$NB_USER/work \\\n && mkdir /home/$NB_USER/.jupyter \\\n && mkdir /home/$NB_USER/.local\nUSER root\n#   Install Jupyter and gophernotes.\nRUN set -x \\\n && apk update \\\n && apk --no-cache add ca-certificates python3 su-exec gcc g++ git pkgconfig python3-dev zeromq-dev musl-dev mercurial libtool autoconf automake make \\\n && echo pip upgrade \\\n && pip3 install --upgrade pip \\\n && echo python3.6 \\\n && cp /usr/bin/python3.6 /usr/bin/python \\\n && echo update chacher \\\n && apk --update-cache --allow-untrusted --repository http://dl-4.alpinelinux.org/alpine/edge/community --arch=x86_64 add go \\\n && ln -s /usr/include/locale.h /usr/include/xlocale.h \\\n && pip3 install jupyter notebook \\\n && find /usr/lib/python3.6 -name __pycache__ | xargs rm -r \\\n && rm -rf /root/.[acpw]* ipaexg00301* \\\n && rm -rf /var/cache/apk/*\n#   switch to jovyan user\nUSER jovyan\n#   environment variables\nENV GOPATH=\"/home/jovyan/go\"\nENV CGO_ENABLED=\"1\" \\\n    CGO_CPPFLAGS=\"-I/usr/include\"\n#   install gophernotes\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure github.com/pebbe/zmq4 \\\n && go get github.com/gopherdata/gophernotes \\\n && mkdir -p ~/.local/share/jupyter/kernels/gophernotes \\\n && cp -r ~/go/src/github.com/gopherdata/gophernotes/kernel/* ~/.local/share/jupyter/kernels/gophernotes\n#   move the gophernotes binary\nUSER root\nRUN cp /home/jovyan/go/bin/gophernotes /usr/local/bin/\nUSER jovyan\n#   get the relevant Go packages\nRUN set -x \\\n && GOPATH=~/go \\\n && go get -insecure gonum.org/v1/plot/... \\\n && go get -insecure gonum.org/v1/gonum/... \\\n && go get github.com/kniren/gota/... \\\n && go get github.com/sajari/regression \\\n && go get github.com/sjwhitworth/golearn/... \\\n && go get -insecure go-hep.org/x/hep/csvutil/... \\\n && go get -insecure go-hep.org/x/hep/fit \\\n && go get -insecure go-hep.org/x/hep/hbook \\\n && go get github.com/montanaflynn/stats \\\n && go get github.com/boltdb/bolt \\\n && go get github.com/patrickmn/go-cache \\\n && go get github.com/chewxy/math32 \\\n && go get gonum.org/v1/gonum/mat \\\n && go get github.com/chewxy/hm \\\n && go get -u gorgonia.org/vecf64 \\\n && go get -u gorgonia.org/vecf32 \\\n && go get github.com/awalterschulze/gographviz \\\n && go get github.com/leesper/go_rng \\\n && go get github.com/pkg/errors \\\n && go get github.com/stretchr/testify/assert \\\n && go get github.com/kniren/gota/dataframe \\\n && go get github.com/skelterjohn/go.matrix \\\n && go get github.com/gonum/matrix/mat64 \\\n && go get github.com/gonum/stat \\\n && go get github.com/mash/gokmeans \\\n && go get github.com/garyburd/go-oauth/oauth \\\n && go get github.com/machinebox/sdk-go/textbox\nEXPOSE 8888/tcp\nCMD [\"jupyter\", \"notebook\", \"--no-browser\", \"--ip=*\", \"--NotebookApp.token=''\", \"--NotebookApp.disable_check_xsrf=True\"]\n","originalDockerfileUglifiedHash":"5b363c40c70734f59d9bf76c08d2466b","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d9a9165bf20b7c08ec7c88c2bc0237c8e79562c7.dockerfile"}