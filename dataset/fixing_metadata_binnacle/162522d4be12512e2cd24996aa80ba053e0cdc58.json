{"seed":1756033427,"processedDockerfileHash":"343c7b5fefde97ad3f682dcdc6cae612","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   cuda          9.0    (apt)\n#   python        3.6    (apt)\n#   jupyter       latest (pip)\n#   pytorch       1.1.0  (pip)\n#   tensorflow    1.12.2  (pip)\n#   keras         2.1.6  (pip)\n#   opencv        4.1.0  (git)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential libcupti-dev ca-certificates cmake wget git tmux graphviz vim \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && : \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3.6-tk \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL jupyter \\\n && $PIP_INSTALL torch torchvision \\\n && $PIP_INSTALL tensorflow-gpu==1.12.2 \\\n && $PIP_INSTALL h5py keras==2.1.6 \\\n && $PIP_INSTALL opencv-python \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#   ==================================================================\n#   install pip packages from requirements text file\n#   ------------------------------------------------------------------\nCOPY requirements_docker.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt\nWORKDIR /microDL\nENV PYTHONPATH=\"/microDL\"\nEXPOSE 8888/tcp 6006/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  ==================================================================\n#  module list\n#  ------------------------------------------------------------------\n#  cuda          9.0    (apt)\n#  python        3.6    (apt)\n#  jupyter       latest (pip)\n#  pytorch       1.1.0  (pip)\n#  tensorflow    1.12.2  (pip)\n#  keras         2.1.6  (pip)\n#  opencv        4.1.0  (git)\n#  ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential libcupti-dev ca-certificates cmake wget git tmux graphviz vim \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3.6-tk \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL jupyter \\\n && $PIP_INSTALL torch torchvision \\\n && $PIP_INSTALL tensorflow-gpu==1.12.2 \\\n && $PIP_INSTALL h5py keras==2.1.6 \\\n && $PIP_INSTALL opencv-python \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#  ==================================================================\n#  install pip packages from requirements text file\n#  ------------------------------------------------------------------\nADD requirements_docker.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt\nWORKDIR /microDL\nENV PYTHONPATH=\"/microDL\"\nEXPOSE 8888/tcp 6006/tcp\n","injectedSmells":[],"originalDockerfileHash":"c52ac4d07542b7c6d9ee6ca568aaf193","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   ==================================================================\n#   module list\n#   ------------------------------------------------------------------\n#   cuda          9.0    (apt)\n#   python        3.6    (apt)\n#   jupyter       latest (pip)\n#   pytorch       1.1.0  (pip)\n#   tensorflow    1.12.2  (pip)\n#   keras         2.1.6  (pip)\n#   opencv        4.1.0  (git)\n#   ==================================================================\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" \\\n && PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" \\\n && GIT_CLONE=\"git clone --depth 10\" \\\n && rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/cuda.list /etc/apt/sources.list.d/nvidia-ml.list \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL build-essential libcupti-dev ca-certificates cmake wget git tmux graphviz vim \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL software-properties-common \\\n && add-apt-repository ppa:deadsnakes/ppa \\\n && apt-get update \\\n && DEBIAN_FRONTEND=noninteractive $APT_INSTALL python3.6 python3.6-dev python3.6-tk \\\n && wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py \\\n && python3.6 ~/get-pip.py \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python3 \\\n && ln -s /usr/bin/python3.6 /usr/local/bin/python \\\n && $PIP_INSTALL setuptools \\\n && $PIP_INSTALL jupyter \\\n && $PIP_INSTALL torch torchvision \\\n && $PIP_INSTALL tensorflow-gpu==1.12.2 \\\n && $PIP_INSTALL h5py keras==2.1.6 \\\n && $PIP_INSTALL opencv-python \\\n && ldconfig \\\n && apt-get clean \\\n && apt-get autoremove \\\n && rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n#   ==================================================================\n#   install pip packages from requirements text file\n#   ------------------------------------------------------------------\nADD requirements_docker.txt /tmp/requirements.txt\nRUN pip install --no-cache-dir -r /tmp/requirements.txt\nWORKDIR /microDL\nENV PYTHONPATH=\"/microDL\"\nEXPOSE 8888/tcp 6006/tcp\n","originalDockerfileUglifiedHash":"522bff576196fdc1b7ea4e6fb9882693","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/162522d4be12512e2cd24996aa80ba053e0cdc58.dockerfile"}