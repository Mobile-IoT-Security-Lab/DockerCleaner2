{"seed":1871392980,"processedDockerfileHash":"fadc14618ab71b01eb82b3aea480ae71","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile for generating adtools packages for Cygwin\nFROM adtools\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends binutils=2.40-2ubuntu3 patch=2.7.6-7build2 gcc=4:12.2.0-3ubuntu1 subversion=1.14.2-4build2 build-essential=12.9ubuntu3 wget=1.21.3-1ubuntu1 debhelper=13.11.4ubuntu3 devscripts=2.23.3ubuntu2 texinfo=6.8-6build2 lhasa=0.3.1-4 libgmp-dev=2:6.2.1+dfsg1-1.1ubuntu1 libmpfr-dev=4.2.0-1 libmpc-dev=1.3.1-1 fakeroot=1.31-1.1 flex=2.6.4-8.1 -y )\n#   Build Cygwin compiler first\nRUN mkdir -p /cygwin/src\nWORKDIR /cygwin/src\nENV MIRROR_BASE=\"http://cygwin.mirror.constant.com/\"\nRUN wget ${MIRROR_BASE}/x86/release/binutils/binutils-2.24.51-5-src.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/gcc/gcc-4.8.3-3-src.tar.xz\n#   Start with binutils\nRUN tar -xJf binutils-2.24.51-5-src.tar.xz\nWORKDIR /cygwin/src/binutils-2.24.51-5.src\nRUN tar -xjf binutils-2.24.51.tar.bz2\nWORKDIR /cygwin/src/binutils-2.24.51-5.src/binutils-2.24.51\nRUN patch -p1 --dry-run < ../2.24.51-ld-__dso_handle.patch\nRUN ./configure --target=i686-pc-cygwin --enable-install-libiberty --disable-gdb --disable-libdecnumber --disable-readline --disable-sim\nRUN make -j2\nRUN make install\n#   Cont. with gcc\nWORKDIR /cygwin/src\nRUN tar -xJf gcc-4.8.3-3-src.tar.xz\nWORKDIR /cygwin/src/gcc-4.8.3-3.src\nRUN tar -xjf gcc-4.8.3.tar.bz2\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3/\nRUN find .. -name \"*patch\" | xargs -n1 -t patch -p1\nRUN (apt-get update ;apt-get install --no-install-recommends zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 less=590-1.2 -y )\nRUN mkdir ../gcc-4.8.3-build\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3-build\nRUN wget ${MIRROR_BASE}/x86/release/cygwin/cygwin-1.7.32-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-headers/w32api-headers-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-runtime/w32api-runtime-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/libiconv/libiconv-1.14-2.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/gmp/libgmp-devel/libgmp-devel-4.3.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpfr/libmpfr-devel/libmpfr-devel-3.1.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpclib/libmpc-devel/libmpc-devel-1.0.1-2.tar.bz2\nRUN tar -xJf cygwin-1.7.32-1.tar.xz\nRUN tar -xJf w32api-headers-3.2.0-1.tar.xz\nRUN tar -xJf w32api-runtime-3.2.0-1.tar.xz\nRUN tar -xjf libiconv-1.14-2.tar.bz2\nRUN tar -xjf libgmp-devel-4.3.2-1.tar.bz2\nRUN tar -xjf libmpfr-devel-3.1.2-1.tar.bz2\nRUN tar -xjf libmpc-devel-1.0.1-2.tar.bz2\nRUN mkdir -p /usr/local/i686-pc-cygwin\nRUN cp -R usr/include /usr/local/i686-pc-cygwin\nRUN cp -R usr/lib /usr/local/i686-pc-cygwin\nRUN ../gcc-4.8.3/configure --target=i686-pc-cygwin --with-newlib --enable-languages=c,c++\nRUN make -j2\nRUN make install\n#\n#   Now really try to build the adtools cygwin packages\n#\n#   Start creating necessary directories\n#\nRUN mkdir -p /build/adtools/trunk /build/adtools/branchesbinutils /build/adtools/branchesgcc /build/adtools-build/binutils-build /build/adtools-build/gcc-build\n#   Download sources\nWORKDIR /build/adtools/trunk\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/binutils-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/gcc-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/native-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/packaging\nWORKDIR /build/adtools/branches/binutils\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/binutils/2.23.2\nWORKDIR /build/adtools/branches/gcc\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/gcc/4.9.x\n#   Now build and install adtools binutils\nWORKDIR /build/adtools-build/binutils-build\nRUN CFLAGS=\"-Wno-switch -Wno-unused\" ../../adtools/branches/binutils/2.23.2/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools\nRUN make -j2\nRUN make install\n#   Now build and install adtools gcc\nWORKDIR /build/adtools-build/gcc-build\nRUN ../../adtools/branches/gcc/4.9.x/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools --with-bugurl='http://sf.net/p/adtools' --with-pkgversion='adtools build $(VERSION)' --prefix=/usr/local/adtools --enable-languages=c,c++ --enable-haifa --enable-sjlj-exceptions --disable-libstdcxx-pch\nRUN make -j2\nRUN make install\n#   Original option found in cygport file of the gcc cygwin package\n#  RUN ../gcc-4.8.3/configure \\\n#  \t--target=i686-pc-cygwin \\\n#  \t--enable-shared \\\n#  \t--enable-shared-libgcc \\\n#  \t--enable-static \\\n#  \t--enable-version-specific-runtime-libs \\\n#  \t--with-dwarf2 \\\n#  \t--with-tune=generic \\\n#  \t--enable-languages=c,c++ \\\n#  \t--enable-graphite \\\n#  \t--enable-threads=posix \\\n#  \t--enable-libatomic \\\n#  \t--enable-libgomp \\\n#  \t--disable-libitm \\\n#  \t--enable-libquadmath \\\n#  \t--enable-libquadmath-support \\\n#  \t--enable-libssp \\\n#  \t--disable-java-awt \\\n#  \t--disable-symvers \\\n#  \t--with-gnu-ld \\\n#  \t--with-gnu-as \\\n#  \t--without-libiconv-prefix \\\n#  \t--without-libintl-prefix \\\n#  \t--with-system-zlib \\\n#  \t--enable-linker-build-id\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile for generating adtools packages for Cygwin\nFROM adtools\nRUN apt-get update\nRUN apt-get install --no-install-recommends binutils patch gcc subversion build-essential wget debhelper devscripts texinfo lhasa libgmp-dev libmpfr-dev libmpc-dev fakeroot flex -y\n#  Build Cygwin compiler first\nRUN mkdir -p /cygwin/src\nWORKDIR /cygwin/src\nENV MIRROR_BASE=\"http://cygwin.mirror.constant.com/\"\nRUN wget ${MIRROR_BASE}/x86/release/binutils/binutils-2.24.51-5-src.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/gcc/gcc-4.8.3-3-src.tar.xz\n#  Start with binutils\nRUN tar -xJf binutils-2.24.51-5-src.tar.xz\nWORKDIR /cygwin/src/binutils-2.24.51-5.src\nRUN tar -xjf binutils-2.24.51.tar.bz2\nWORKDIR /cygwin/src/binutils-2.24.51-5.src/binutils-2.24.51\nRUN patch -p1 --dry-run < ../2.24.51-ld-__dso_handle.patch\nRUN ./configure --target=i686-pc-cygwin --enable-install-libiberty --disable-gdb --disable-libdecnumber --disable-readline --disable-sim\nRUN make -j2\nRUN make install\n#  Cont. with gcc\nWORKDIR /cygwin/src\nRUN tar -xJf gcc-4.8.3-3-src.tar.xz\nWORKDIR /cygwin/src/gcc-4.8.3-3.src\nRUN tar -xjf gcc-4.8.3.tar.bz2\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3/\nRUN find .. -name \"*patch\" | xargs -n1 -t patch -p1\nRUN apt-get install --no-install-recommends zlib1g-dev less -y\nRUN mkdir ../gcc-4.8.3-build\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3-build\nRUN wget ${MIRROR_BASE}/x86/release/cygwin/cygwin-1.7.32-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-headers/w32api-headers-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-runtime/w32api-runtime-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/libiconv/libiconv-1.14-2.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/gmp/libgmp-devel/libgmp-devel-4.3.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpfr/libmpfr-devel/libmpfr-devel-3.1.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpclib/libmpc-devel/libmpc-devel-1.0.1-2.tar.bz2\nRUN tar -xJf cygwin-1.7.32-1.tar.xz\nRUN tar -xJf w32api-headers-3.2.0-1.tar.xz\nRUN tar -xJf w32api-runtime-3.2.0-1.tar.xz\nRUN tar -xjf libiconv-1.14-2.tar.bz2\nRUN tar -xjf libgmp-devel-4.3.2-1.tar.bz2\nRUN tar -xjf libmpfr-devel-3.1.2-1.tar.bz2\nRUN tar -xjf libmpc-devel-1.0.1-2.tar.bz2\nRUN mkdir -p /usr/local/i686-pc-cygwin\nRUN cp -R usr/include /usr/local/i686-pc-cygwin\nRUN cp -R usr/lib /usr/local/i686-pc-cygwin\nRUN ../gcc-4.8.3/configure --target=i686-pc-cygwin --with-newlib --enable-languages=c,c++\nRUN make -j2\nRUN make install\n#\n#  Now really try to build the adtools cygwin packages\n#\n#  Start creating necessary directories\n#\nRUN mkdir -p /build/adtools/trunk /build/adtools/branchesbinutils /build/adtools/branchesgcc /build/adtools-build/binutils-build /build/adtools-build/gcc-build\n#  Download sources\nWORKDIR /build/adtools/trunk\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/binutils-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/gcc-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/native-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/packaging\nWORKDIR /build/adtools/branches/binutils\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/binutils/2.23.2\nWORKDIR /build/adtools/branches/gcc\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/gcc/4.9.x\n#  Now build and install adtools binutils\nWORKDIR /build/adtools-build/binutils-build\nRUN CFLAGS=\"-Wno-switch -Wno-unused\" ../../adtools/branches/binutils/2.23.2/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools\nRUN make -j2\nRUN make install\n#  Now build and install adtools gcc\nWORKDIR /build/adtools-build/gcc-build\nRUN ../../adtools/branches/gcc/4.9.x/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools --with-bugurl='http://sf.net/p/adtools' --with-pkgversion='adtools build $(VERSION)' --prefix=/usr/local/adtools --enable-languages=c,c++ --enable-haifa --enable-sjlj-exceptions --disable-libstdcxx-pch\nRUN make -j2\nRUN make install\n#  Original option found in cygport file of the gcc cygwin package\n# RUN ../gcc-4.8.3/configure \\\n# \t--target=i686-pc-cygwin \\\n# \t--enable-shared \\\n# \t--enable-shared-libgcc \\\n# \t--enable-static \\\n# \t--enable-version-specific-runtime-libs \\\n# \t--with-dwarf2 \\\n# \t--with-tune=generic \\\n# \t--enable-languages=c,c++ \\\n# \t--enable-graphite \\\n# \t--enable-threads=posix \\\n# \t--enable-libatomic \\\n# \t--enable-libgomp \\\n# \t--disable-libitm \\\n# \t--enable-libquadmath \\\n# \t--enable-libquadmath-support \\\n# \t--enable-libssp \\\n# \t--disable-java-awt \\\n# \t--disable-symvers \\\n# \t--with-gnu-ld \\\n# \t--with-gnu-as \\\n# \t--without-libiconv-prefix \\\n# \t--without-libintl-prefix \\\n# \t--with-system-zlib \\\n# \t--enable-linker-build-id\n","injectedSmells":[],"originalDockerfileHash":"c8b2dc6638bb8ebd2a15e7406f8b30d4","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile for generating adtools packages for Cygwin\nFROM adtools\nRUN apt-get update\nRUN apt-get install --no-install-recommends binutils patch gcc subversion build-essential wget debhelper devscripts texinfo lhasa libgmp-dev libmpfr-dev libmpc-dev fakeroot flex -y\n#   Build Cygwin compiler first\nRUN mkdir -p /cygwin/src\nWORKDIR /cygwin/src\nENV MIRROR_BASE=\"http://cygwin.mirror.constant.com/\"\nRUN wget ${MIRROR_BASE}/x86/release/binutils/binutils-2.24.51-5-src.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/gcc/gcc-4.8.3-3-src.tar.xz\n#   Start with binutils\nRUN tar -xJf binutils-2.24.51-5-src.tar.xz\nWORKDIR /cygwin/src/binutils-2.24.51-5.src\nRUN tar -xjf binutils-2.24.51.tar.bz2\nWORKDIR /cygwin/src/binutils-2.24.51-5.src/binutils-2.24.51\nRUN patch -p1 --dry-run < ../2.24.51-ld-__dso_handle.patch\nRUN ./configure --target=i686-pc-cygwin --enable-install-libiberty --disable-gdb --disable-libdecnumber --disable-readline --disable-sim\nRUN make -j2\nRUN make install\n#   Cont. with gcc\nWORKDIR /cygwin/src\nRUN tar -xJf gcc-4.8.3-3-src.tar.xz\nWORKDIR /cygwin/src/gcc-4.8.3-3.src\nRUN tar -xjf gcc-4.8.3.tar.bz2\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3/\nRUN find .. -name \"*patch\" | xargs -n1 -t patch -p1\nRUN apt-get install --no-install-recommends zlib1g-dev less -y\nRUN mkdir ../gcc-4.8.3-build\nWORKDIR /cygwin/src/gcc-4.8.3-3.src/gcc-4.8.3-build\nRUN wget ${MIRROR_BASE}/x86/release/cygwin/cygwin-1.7.32-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-headers/w32api-headers-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/w32api-runtime/w32api-runtime-3.2.0-1.tar.xz\nRUN wget ${MIRROR_BASE}/x86/release/libiconv/libiconv-1.14-2.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/gmp/libgmp-devel/libgmp-devel-4.3.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpfr/libmpfr-devel/libmpfr-devel-3.1.2-1.tar.bz2\nRUN wget ${MIRROR_BASE}/x86/release/mpclib/libmpc-devel/libmpc-devel-1.0.1-2.tar.bz2\nRUN tar -xJf cygwin-1.7.32-1.tar.xz\nRUN tar -xJf w32api-headers-3.2.0-1.tar.xz\nRUN tar -xJf w32api-runtime-3.2.0-1.tar.xz\nRUN tar -xjf libiconv-1.14-2.tar.bz2\nRUN tar -xjf libgmp-devel-4.3.2-1.tar.bz2\nRUN tar -xjf libmpfr-devel-3.1.2-1.tar.bz2\nRUN tar -xjf libmpc-devel-1.0.1-2.tar.bz2\nRUN mkdir -p /usr/local/i686-pc-cygwin\nRUN cp -R usr/include /usr/local/i686-pc-cygwin\nRUN cp -R usr/lib /usr/local/i686-pc-cygwin\nRUN ../gcc-4.8.3/configure --target=i686-pc-cygwin --with-newlib --enable-languages=c,c++\nRUN make -j2\nRUN make install\n#\n#   Now really try to build the adtools cygwin packages\n#\n#   Start creating necessary directories\n#\nRUN mkdir -p /build/adtools/trunk /build/adtools/branchesbinutils /build/adtools/branchesgcc /build/adtools-build/binutils-build /build/adtools-build/gcc-build\n#   Download sources\nWORKDIR /build/adtools/trunk\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/binutils-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/gcc-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/native-build\nRUN svn export svn://svn.code.sf.net/p/adtools/code/trunk/packaging\nWORKDIR /build/adtools/branches/binutils\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/binutils/2.23.2\nWORKDIR /build/adtools/branches/gcc\nRUN svn export svn://svn.code.sf.net/p/adtools/code/branches/gcc/4.9.x\n#   Now build and install adtools binutils\nWORKDIR /build/adtools-build/binutils-build\nRUN CFLAGS=\"-Wno-switch -Wno-unused\" ../../adtools/branches/binutils/2.23.2/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools\nRUN make -j2\nRUN make install\n#   Now build and install adtools gcc\nWORKDIR /build/adtools-build/gcc-build\nRUN ../../adtools/branches/gcc/4.9.x/configure --host=i686-pc-cygwin --target=ppc-amigaos --prefix=/usr/local/adtools --with-bugurl='http://sf.net/p/adtools' --with-pkgversion='adtools build $(VERSION)' --prefix=/usr/local/adtools --enable-languages=c,c++ --enable-haifa --enable-sjlj-exceptions --disable-libstdcxx-pch\nRUN make -j2\nRUN make install\n#   Original option found in cygport file of the gcc cygwin package\n#  RUN ../gcc-4.8.3/configure \\\n#  \t--target=i686-pc-cygwin \\\n#  \t--enable-shared \\\n#  \t--enable-shared-libgcc \\\n#  \t--enable-static \\\n#  \t--enable-version-specific-runtime-libs \\\n#  \t--with-dwarf2 \\\n#  \t--with-tune=generic \\\n#  \t--enable-languages=c,c++ \\\n#  \t--enable-graphite \\\n#  \t--enable-threads=posix \\\n#  \t--enable-libatomic \\\n#  \t--enable-libgomp \\\n#  \t--disable-libitm \\\n#  \t--enable-libquadmath \\\n#  \t--enable-libquadmath-support \\\n#  \t--enable-libssp \\\n#  \t--disable-java-awt \\\n#  \t--disable-symvers \\\n#  \t--with-gnu-ld \\\n#  \t--with-gnu-as \\\n#  \t--without-libiconv-prefix \\\n#  \t--without-libintl-prefix \\\n#  \t--with-system-zlib \\\n#  \t--enable-linker-build-id\n","originalDockerfileUglifiedHash":"13bc549bdf1008541b1ea5bd572375e5","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/901f9cceb458be860d2e614b850bb0f2e63cdb52.dockerfile"}