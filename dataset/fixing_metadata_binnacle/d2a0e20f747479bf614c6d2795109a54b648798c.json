{"seed":635836958,"processedDockerfileHash":"e56e6d33031972aae4400a62fea7215b","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   NGSeasy Base Image\n#   base image\n#   FROM debian:jessie\nFROM compbio/debian-base:1.0\n#   Maintainer \nMAINTAINER Stephen Newhouse stephen.j.newhouse@gmail.com\n#   Set correct environment variables.\nENV HOME=\"/root\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Remain current\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get dist-upgrade -y \\\n && apt-get install --no-install-recommends ldc asciidoc -y\n#  --------------STANDARD NGS TOOLS----------------------------------------------------------------------------------------------#\n#   Tools used for processing SAM/BAM/BED/VCF files\n#   samtools,htslib,bcftools,parallel,bamUtil,sambamba,samblaster,vcftools,vcflib,seqtk,ogap,bamleftalign,bedtools2,libStatGen\n#   ngs tools     \n#   samtools, htslib, bcftools\nRUN cd /usr/local/pipeline \\\n && git clone --branch=develop git://github.com/samtools/htslib.git \\\n && git clone --branch=develop git://github.com/samtools/bcftools.git \\\n && git clone --branch=develop git://github.com/samtools/samtools.git \\\n && cd /usr/local/pipeline/htslib \\\n && autoconf \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/bcftools \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/samtools \\\n && make \\\n && make install\n#   parallel    \nRUN cd /usr/local/pipeline \\\n && wget http://ftpmirror.gnu.org/parallel/parallel-20140222.tar.bz2 \\\n && bzip2 -dc parallel-20140222.tar.bz2 | tar xvf - \\\n && cd parallel-20140222 \\\n && ./configure \\\n && make \\\n && make install\n#   libStatGen and bamUtil\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/libStatGen.git \\\n && cd libStatGen \\\n && make all \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/bamUtil.git \\\n && cd bamUtil \\\n && make cloneLib \\\n && make all \\\n && make install\n#   samblaster and sambamba\nRUN cd /usr/local/pipeline \\\n && git clone git://github.com/GregoryFaust/samblaster.git \\\n && cd samblaster \\\n && make \\\n && cp samblaster /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && curl -OL https://github.com/lomereiter/sambamba/releases/download/v0.5.1/sambamba_v0.5.1_linux.tar.bz2 \\\n && tar -xjvf sambamba_v0.5.1_linux.tar.bz2 \\\n && mv sambamba_v0.5.1 sambamba \\\n && chmod +rwx sambamba \\\n && cp sambamba /usr/local/bin/\n#   seqtk and trimadap\nRUN cd /usr/local/pipeline/ \\\n && git clone https://github.com/lh3/seqtk.git \\\n && chown -R pipeman:ngsgroup /usr/local/pipeline/seqtk \\\n && cd seqtk/ \\\n && chmod -R 777 ./* \\\n && make \\\n && cp -v seqtk /usr/local/bin/ \\\n && cp -v trimadap /usr/local/bin/ \\\n && sed -i '$aPATH=${PATH}:/usr/local/pipeline/seqtk' /root/.bashrc\n#   ogap  and bamleftalign  \nRUN cd /usr/local/pipeline/ \\\n && git clone --recursive https://github.com/ekg/ogap.git \\\n && cd ogap \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp -v ogap /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && git clone --recursive git://github.com/ekg/freebayes.git \\\n && cd freebayes \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp bin/bamleftalign /usr/local/bin/ \\\n && rm -frv /usr/local/pipeline/freebayes\n#   vcftools and vcflib and bedtools2 and vt\nRUN cd /usr/local/pipeline/ \\\n && wget -O /tmp/vcftools_0.1.12b.tar.gz http://sourceforge.net/projects/vcftools/files/vcftools_0.1.12b.tar.gz \\\n && tar xzvf /tmp/vcftools_0.1.12b.tar.gz -C /usr/local/pipeline/ \\\n && export PERL5LIB=/usr/local/pipeline/vcftools_0.1.12b/perl/ \\\n && cd /usr/local/pipeline/vcftools_0.1.12b/ \\\n && make \\\n && cp -vrf /usr/local/pipeline/vcftools_0.1.12b/bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && rm -rfv /usr/local/pipeline/vcflib \\\n && git clone --recursive https://github.com/ekg/vcflib.git \\\n && cd vcflib \\\n && make \\\n && cp ./bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/arq5x/bedtools2.git \\\n && cd bedtools2 \\\n && make clean \\\n && make all \\\n && make install \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/atks/vt.git \\\n && chmod -R 777 vt/ \\\n && cd vt \\\n && make \\\n && cp -v vt /usr/local/bin\n#   vawk and bioawk\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/cc2qe/vawk.git \\\n && chmod -R 777 vawk/ \\\n && cp -v vawk/vawk /usr/local/bin \\\n && apt-get install --no-install-recommends bison flex byacc -y \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/lh3/bioawk.git \\\n && chmod -R 777 bioawk/ \\\n && cd bioawk \\\n && make \\\n && cp -v bioawk /usr/local/bin \\\n && cp -v maketab /usr/local/bin\n#  -------------------------------PERMISSIONS--------------------------\nRUN chmod -R 777 /usr/local/pipeline\nRUN chown -R pipeman:ngsgroup /usr/local/pipeline\n#  ---------------------------------------------------------------------\n#  Cleanup the temp dir\nRUN rm -rvf /tmp/*\n#  open ports private only\nEXPOSE 8080/tcp\n#   Use baseimage-docker's bash.\nCMD [\"/bin/bash\"]\n#  Clean up APT when done.\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get remove -y asciidoc \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/ \\\n && rm -rf /usr/local/pipeline/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  NGSeasy Base Image\n#  base image\n#  FROM debian:jessie\nFROM compbio/debian-base:1.0\n#  Maintainer \nMAINTAINER Stephen Newhouse stephen.j.newhouse@gmail.com\n#  Set correct environment variables.\nENV HOME=\"/root\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  Remain current\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get dist-upgrade -y \\\n && apt-get install ldc asciidoc -y\n# --------------STANDARD NGS TOOLS----------------------------------------------------------------------------------------------#\n#  Tools used for processing SAM/BAM/BED/VCF files\n#  samtools,htslib,bcftools,parallel,bamUtil,sambamba,samblaster,vcftools,vcflib,seqtk,ogap,bamleftalign,bedtools2,libStatGen\n#  ngs tools     \n#  samtools, htslib, bcftools\nRUN cd /usr/local/pipeline \\\n && git clone --branch=develop git://github.com/samtools/htslib.git \\\n && git clone --branch=develop git://github.com/samtools/bcftools.git \\\n && git clone --branch=develop git://github.com/samtools/samtools.git \\\n && cd /usr/local/pipeline/htslib \\\n && autoconf \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/bcftools \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/samtools \\\n && make \\\n && make install\n#  parallel    \nRUN cd /usr/local/pipeline \\\n && wget http://ftpmirror.gnu.org/parallel/parallel-20140222.tar.bz2 \\\n && bzip2 -dc parallel-20140222.tar.bz2 | tar xvf - \\\n && cd parallel-20140222 \\\n && ./configure \\\n && make \\\n && make install\n#  libStatGen and bamUtil\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/libStatGen.git \\\n && cd libStatGen \\\n && make all \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/bamUtil.git \\\n && cd bamUtil \\\n && make cloneLib \\\n && make all \\\n && make install\n#  samblaster and sambamba\nRUN cd /usr/local/pipeline \\\n && git clone git://github.com/GregoryFaust/samblaster.git \\\n && cd samblaster \\\n && make \\\n && cp samblaster /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && curl -OL https://github.com/lomereiter/sambamba/releases/download/v0.5.1/sambamba_v0.5.1_linux.tar.bz2 \\\n && tar -xjvf sambamba_v0.5.1_linux.tar.bz2 \\\n && mv sambamba_v0.5.1 sambamba \\\n && chmod +rwx sambamba \\\n && cp sambamba /usr/local/bin/\n#  seqtk and trimadap\nRUN cd /usr/local/pipeline/ \\\n && git clone https://github.com/lh3/seqtk.git \\\n && chown -R pipeman:ngsgroup /usr/local/pipeline/seqtk \\\n && cd seqtk/ \\\n && chmod -R 777 ./* \\\n && make \\\n && cp -v seqtk /usr/local/bin/ \\\n && cp -v trimadap /usr/local/bin/ \\\n && sed -i '$aPATH=${PATH}:/usr/local/pipeline/seqtk' /root/.bashrc\n#  ogap  and bamleftalign  \nRUN cd /usr/local/pipeline/ \\\n && git clone --recursive https://github.com/ekg/ogap.git \\\n && cd ogap \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp -v ogap /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && git clone --recursive git://github.com/ekg/freebayes.git \\\n && cd freebayes \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp bin/bamleftalign /usr/local/bin/ \\\n && rm -frv /usr/local/pipeline/freebayes\n#  vcftools and vcflib and bedtools2 and vt\nRUN cd /usr/local/pipeline/ \\\n && wget -O /tmp/vcftools_0.1.12b.tar.gz http://sourceforge.net/projects/vcftools/files/vcftools_0.1.12b.tar.gz \\\n && tar xzvf /tmp/vcftools_0.1.12b.tar.gz -C /usr/local/pipeline/ \\\n && export PERL5LIB=/usr/local/pipeline/vcftools_0.1.12b/perl/ \\\n && cd /usr/local/pipeline/vcftools_0.1.12b/ \\\n && make \\\n && cp -vrf /usr/local/pipeline/vcftools_0.1.12b/bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && rm -rfv /usr/local/pipeline/vcflib \\\n && git clone --recursive https://github.com/ekg/vcflib.git \\\n && cd vcflib \\\n && make \\\n && cp ./bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/arq5x/bedtools2.git \\\n && cd bedtools2 \\\n && make clean \\\n && make all \\\n && make install \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/atks/vt.git \\\n && chmod -R 777 vt/ \\\n && cd vt \\\n && make \\\n && cp -v vt /usr/local/bin\n#  vawk and bioawk\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/cc2qe/vawk.git \\\n && chmod -R 777 vawk/ \\\n && cp -v vawk/vawk /usr/local/bin \\\n && apt-get install bison flex byacc -y \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/lh3/bioawk.git \\\n && chmod -R 777 bioawk/ \\\n && cd bioawk \\\n && make \\\n && cp -v bioawk /usr/local/bin \\\n && cp -v maketab /usr/local/bin\n# -------------------------------PERMISSIONS--------------------------\nRUN chmod -R 777 /usr/local/pipeline\nRUN chown -R pipeman:ngsgroup /usr/local/pipeline\n# ---------------------------------------------------------------------\n# Cleanup the temp dir\nRUN rm -rvf /tmp/*\n# open ports private only\nEXPOSE 8080/tcp\n#  Use baseimage-docker's bash.\nCMD [\"/bin/bash\"]\n# Clean up APT when done.\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get remove -y asciidoc \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/ \\\n && rm -rf /usr/local/pipeline/*\n","injectedSmells":[],"originalDockerfileHash":"9babebc95ab8b8c618f1dd8e25e61a1e","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   NGSeasy Base Image\n#   base image\n#   FROM debian:jessie\nFROM compbio/debian-base:1.0\n#   Maintainer \nMAINTAINER Stephen Newhouse stephen.j.newhouse@gmail.com\n#   Set correct environment variables.\nENV HOME=\"/root\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   Remain current\nRUN apt-get update \\\n && apt-get upgrade -y \\\n && apt-get dist-upgrade -y \\\n && apt-get install ldc asciidoc -y\n#  --------------STANDARD NGS TOOLS----------------------------------------------------------------------------------------------#\n#   Tools used for processing SAM/BAM/BED/VCF files\n#   samtools,htslib,bcftools,parallel,bamUtil,sambamba,samblaster,vcftools,vcflib,seqtk,ogap,bamleftalign,bedtools2,libStatGen\n#   ngs tools     \n#   samtools, htslib, bcftools\nRUN cd /usr/local/pipeline \\\n && git clone --branch=develop git://github.com/samtools/htslib.git \\\n && git clone --branch=develop git://github.com/samtools/bcftools.git \\\n && git clone --branch=develop git://github.com/samtools/samtools.git \\\n && cd /usr/local/pipeline/htslib \\\n && autoconf \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/bcftools \\\n && make \\\n && make install \\\n && cd /usr/local/pipeline/samtools \\\n && make \\\n && make install\n#   parallel    \nRUN cd /usr/local/pipeline \\\n && wget http://ftpmirror.gnu.org/parallel/parallel-20140222.tar.bz2 \\\n && bzip2 -dc parallel-20140222.tar.bz2 | tar xvf - \\\n && cd parallel-20140222 \\\n && ./configure \\\n && make \\\n && make install\n#   libStatGen and bamUtil\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/libStatGen.git \\\n && cd libStatGen \\\n && make all \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/statgen/bamUtil.git \\\n && cd bamUtil \\\n && make cloneLib \\\n && make all \\\n && make install\n#   samblaster and sambamba\nRUN cd /usr/local/pipeline \\\n && git clone git://github.com/GregoryFaust/samblaster.git \\\n && cd samblaster \\\n && make \\\n && cp samblaster /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && curl -OL https://github.com/lomereiter/sambamba/releases/download/v0.5.1/sambamba_v0.5.1_linux.tar.bz2 \\\n && tar -xjvf sambamba_v0.5.1_linux.tar.bz2 \\\n && mv sambamba_v0.5.1 sambamba \\\n && chmod +rwx sambamba \\\n && cp sambamba /usr/local/bin/\n#   seqtk and trimadap\nRUN cd /usr/local/pipeline/ \\\n && git clone https://github.com/lh3/seqtk.git \\\n && chown -R pipeman:ngsgroup /usr/local/pipeline/seqtk \\\n && cd seqtk/ \\\n && chmod -R 777 ./* \\\n && make \\\n && cp -v seqtk /usr/local/bin/ \\\n && cp -v trimadap /usr/local/bin/ \\\n && sed -i '$aPATH=${PATH}:/usr/local/pipeline/seqtk' /root/.bashrc\n#   ogap  and bamleftalign  \nRUN cd /usr/local/pipeline/ \\\n && git clone --recursive https://github.com/ekg/ogap.git \\\n && cd ogap \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp -v ogap /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && git clone --recursive git://github.com/ekg/freebayes.git \\\n && cd freebayes \\\n && make all \\\n && chmod -R 777 ./* \\\n && cp bin/bamleftalign /usr/local/bin/ \\\n && rm -frv /usr/local/pipeline/freebayes\n#   vcftools and vcflib and bedtools2 and vt\nRUN cd /usr/local/pipeline/ \\\n && wget -O /tmp/vcftools_0.1.12b.tar.gz http://sourceforge.net/projects/vcftools/files/vcftools_0.1.12b.tar.gz \\\n && tar xzvf /tmp/vcftools_0.1.12b.tar.gz -C /usr/local/pipeline/ \\\n && export PERL5LIB=/usr/local/pipeline/vcftools_0.1.12b/perl/ \\\n && cd /usr/local/pipeline/vcftools_0.1.12b/ \\\n && make \\\n && cp -vrf /usr/local/pipeline/vcftools_0.1.12b/bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline/ \\\n && rm -rfv /usr/local/pipeline/vcflib \\\n && git clone --recursive https://github.com/ekg/vcflib.git \\\n && cd vcflib \\\n && make \\\n && cp ./bin/* /usr/local/bin/ \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/arq5x/bedtools2.git \\\n && cd bedtools2 \\\n && make clean \\\n && make all \\\n && make install \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/atks/vt.git \\\n && chmod -R 777 vt/ \\\n && cd vt \\\n && make \\\n && cp -v vt /usr/local/bin\n#   vawk and bioawk\nRUN cd /usr/local/pipeline \\\n && git clone https://github.com/cc2qe/vawk.git \\\n && chmod -R 777 vawk/ \\\n && cp -v vawk/vawk /usr/local/bin \\\n && apt-get install bison flex byacc -y \\\n && cd /usr/local/pipeline \\\n && git clone https://github.com/lh3/bioawk.git \\\n && chmod -R 777 bioawk/ \\\n && cd bioawk \\\n && make \\\n && cp -v bioawk /usr/local/bin \\\n && cp -v maketab /usr/local/bin\n#  -------------------------------PERMISSIONS--------------------------\nRUN chmod -R 777 /usr/local/pipeline\nRUN chown -R pipeman:ngsgroup /usr/local/pipeline\n#  ---------------------------------------------------------------------\n#  Cleanup the temp dir\nRUN rm -rvf /tmp/*\n#  open ports private only\nEXPOSE 8080/tcp\n#   Use baseimage-docker's bash.\nCMD [\"/bin/bash\"]\n#  Clean up APT when done.\nRUN apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get remove -y asciidoc \\\n && apt-get autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/{apt,dpkg,cache,log}/ \\\n && rm -rf /usr/local/pipeline/*\n","originalDockerfileUglifiedHash":"c9b22ccbb31b094475c922e7ea4552f0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/d2a0e20f747479bf614c6d2795109a54b648798c.dockerfile"}