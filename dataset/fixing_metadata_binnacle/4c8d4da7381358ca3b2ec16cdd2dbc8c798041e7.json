{"seed":4289516477,"processedDockerfileHash":"b172f55bb0c09c4ad0750a06bc988049","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   MG-RAST pipeline Dockerfile\nFROM ubuntu\nMAINTAINER The MG-RAST team (folker@mg-rast.org)\nARG DEBIAN_FRONTEND=noninteractive\nRUN apt-get update \\\n && apt-get install --no-install-recommends cdbfasta=1.00+git20181005.014498c+dfsg-4build1 cd-hit=4.8.1-4 cmake=3.25.1-1 dh-autoreconf=20 emacs=1:28.2+1-13ubuntu3 git=1:2.39.2-1ubuntu1 libtbb-dev=2021.8.0-1ubuntu2 libcwd-guard-perl=0.05-4 libberkeleydb-perl=0.64-2 libdata-dump-streamer-perl=2.41-1 libdatetime-perl=2:1.59-1 libdatetime-format-iso8601-perl=0.16-2 libdbi-perl=1.643-4 libdigest-md5-perl libdigest-md5-file-perl=0.08-1.1 libdbd-pg-perl=3.16.0-2build1 libfile-slurp-perl=9999.32-2 libfilehandle-fmode-perl=0.14-3build1 libgetopt-long-descriptive-perl=0.111-1 libjson-perl=4.10000-1 liblist-allutils-perl=0.19-1 libpq-dev=15.2-1 libpng-dev=1.6.39-2 libposix-strptime-perl=0.13-2build1 libstring-random-perl=1:0.32-2 libtemplate-perl=2.27-1build7 liburi-encode-perl=1.1.1-3 libunicode-escape-perl=0.0.2-5 libwww-perl=6.67-1 liblog-log4perl-perl=1.57-1 libcapture-tiny-perl=0.48-2 make=4.3-4.1build1 nodejs=18.13.0+dfsg1-1ubuntu2 python-biopython python-dev python-leveldb perl-modules python-numpy python-pika python-pip python-scipy python-sphinx unzip=6.0-27ubuntu1 wget=1.21.3-1ubuntu1 vim=2:9.0.1000-4ubuntu2 curl=7.88.1-7ubuntu1 -y \\\n && apt-get clean\n#  ## alphabetically sorted builds from source\n#  ## install bowtie2 2.3.5\nRUN cd /root \\\n && wget -O bowtie2.zip https://github.com/BenLangmead/bowtie2/releases/download/v2.3.5/bowtie2-2.3.5-linux-x86_64.zip \\\n && unzip bowtie2.zip \\\n && rm -f bowtie2.zip \\\n && cd bowtie2-* \\\n && install bowtie2* /usr/local/bin/ \\\n && cd /root \\\n && rm -rf bowtie2*\n#  ## install autoskewer (requires bowtie)\nRUN cd /root \\\n && git clone http://github.com/MG-RAST/autoskewer \\\n && cd autoskewer \\\n && make install \\\n && cd /root \\\n && rm -rf autoskewer\n#  ## install DIAMOND\nRUN cd /root \\\n && git clone https://github.com/bbuchfink/diamond.git \\\n && cd diamond \\\n && sh ./build_simple.sh \\\n && install -s -m555 diamond /usr/local/bin \\\n && cd /root \\\n && rm -rf diamond\n#  ## install ea-utils\nRUN cd /root \\\n && git clone https://github.com/ExpressionAnalysis/ea-utils.git \\\n && cd ea-utils/clipper \\\n && make fastq-multx \\\n && make fastq-join \\\n && make fastq-mcf \\\n && install -m755 -s fastq-multx /usr/local/bin \\\n && install -m755 -s fastq-join /usr/local/bin \\\n && install -m755 -s fastq-mcf /usr/local/bin \\\n && cd /root ; rm -rf ea-utils\n#  ## install FragGeneScan from our patched source in github\nRUN cd /root \\\n && git clone https://github.com/MG-RAST/FGS.git FragGeneScan \\\n && cd FragGeneScan \\\n && make \\\n && mkdir bin \\\n && mv train bin/. \\\n && mv *.pl bin/. \\\n && cp -r bin/train /usr/local/bin/ \\\n && install -s -m555 FragGeneScan /usr/local/bin/. \\\n && install -m555 -t /usr/local/bin/. bin/*.pl \\\n && make clean \\\n && cd /root ; rm -rf FragGeneScan\n#  ## install jellyfish 2.2.6 from source (2.2.8 from repo is broken)\nRUN cd /root \\\n && wget -O jellyfish.tar.gz https://github.com/gmarcais/Jellyfish/releases/download/v2.2.6/jellyfish-2.2.6.tar.gz \\\n && tar xfvz jellyfish.tar.gz \\\n && rm -f jellyfish.tar.gz \\\n && cd jelly* \\\n && ./configure \\\n && make install \\\n && cd /root RUN cd /root \\\n && wget -O Prodigal.tar.gz https://github.com/hyattpd/Prodigal/archive/v2.6.3.tar.gz \\\n && tar xf Prodigal.tar.gz \\\n && cd Prodigal* \\\n && make \\\n && make install \\\n && strip /usr/local/bin/prodigal \\\n && make clean \\\n && cd /root ; rm -rf Prodigal*\n#  ## install sortmerna 2.1b\nRUN cd /root \\\n && wget -O sortmerna-2.tar.gz https://github.com/biocore/sortmerna/archive/2.1b.tar.gz \\\n && tar xvf sortmerna-2.tar.gz \\\n && cd sortmerna-2* \\\n && sed -i 's/^\\#define READLEN [0-9]*/#define READLEN 500000/' include/common.hpp \\\n && ./configure \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/sortmerna* \\\n && cd /root ; rm -rf sortmerna-2*\n#  ## install skewer\nRUN cd /root \\\n && git clone https://github.com/teharrison/skewer \\\n && cd skewer \\\n && make \\\n && make install \\\n && make clean \\\n && cd /root ; rm -rf skewer\n#  ## install vsearch 2.12.0\nRUN cd /root \\\n && wget -O vsearch-2.tar.gz https://github.com/torognes/vsearch/archive/v2.12.0.tar.gz \\\n && tar xzf vsearch-2.tar.gz \\\n && cd vsearch-2* \\\n && sh ./autogen.sh \\\n && ./configure --prefix=/usr/local/ \\\n && make \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/vsearch* \\\n && cd /root ; rm -rf vsearch-2*\n#  ## install CWL runner\nRUN pip install pip==23.1 --upgrade\nRUN pip install cwlref-runner==1.0 typing==3.10.0.0 --upgrade\n#   for jellyfish (ugly)\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\n#   copy files into image\nCOPY CWL /CWL/\nCOPY mgcmd/* bin/* /usr/local/bin/\nCOPY lib/* /usr/local/lib/site_perl/\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  MG-RAST pipeline Dockerfile\nFROM ubuntu\nMAINTAINER The MG-RAST team (folker@mg-rast.org)\nARG DEBIAN_FRONTEND=noninteractive\nRUN apt-get update \\\n && apt-get install cdbfasta cd-hit cmake dh-autoreconf emacs git libtbb-dev libcwd-guard-perl libberkeleydb-perl libdata-dump-streamer-perl libdatetime-perl libdatetime-format-iso8601-perl libdbi-perl libdigest-md5-perl libdigest-md5-file-perl libdbd-pg-perl libfile-slurp-perl libfilehandle-fmode-perl libgetopt-long-descriptive-perl libjson-perl liblist-allutils-perl libpq-dev libpng-dev libposix-strptime-perl libstring-random-perl libtemplate-perl liburi-encode-perl libunicode-escape-perl libwww-perl liblog-log4perl-perl libcapture-tiny-perl make nodejs python-biopython python-dev python-leveldb perl-modules python-numpy python-pika python-pip python-scipy python-sphinx unzip wget vim curl -y \\\n && apt-get clean\n# ## alphabetically sorted builds from source\n# ## install bowtie2 2.3.5\nRUN cd /root \\\n && wget -O bowtie2.zip https://github.com/BenLangmead/bowtie2/releases/download/v2.3.5/bowtie2-2.3.5-linux-x86_64.zip \\\n && unzip bowtie2.zip \\\n && rm -f bowtie2.zip \\\n && cd bowtie2-* \\\n && install bowtie2* /usr/local/bin/ \\\n && cd /root \\\n && rm -rf bowtie2*\n# ## install autoskewer (requires bowtie)\nRUN cd /root \\\n && git clone http://github.com/MG-RAST/autoskewer \\\n && cd autoskewer \\\n && make install \\\n && cd /root \\\n && rm -rf autoskewer\n# ## install DIAMOND\nRUN cd /root \\\n && git clone https://github.com/bbuchfink/diamond.git \\\n && cd diamond \\\n && sh ./build_simple.sh \\\n && install -s -m555 diamond /usr/local/bin \\\n && cd /root \\\n && rm -rf diamond\n# ## install ea-utils\nRUN cd /root \\\n && git clone https://github.com/ExpressionAnalysis/ea-utils.git \\\n && cd ea-utils/clipper \\\n && make fastq-multx \\\n && make fastq-join \\\n && make fastq-mcf \\\n && install -m755 -s fastq-multx /usr/local/bin \\\n && install -m755 -s fastq-join /usr/local/bin \\\n && install -m755 -s fastq-mcf /usr/local/bin \\\n && cd /root ; rm -rf ea-utils\n# ## install FragGeneScan from our patched source in github\nRUN cd /root \\\n && git clone https://github.com/MG-RAST/FGS.git FragGeneScan \\\n && cd FragGeneScan \\\n && make \\\n && mkdir bin \\\n && mv train bin/. \\\n && mv *.pl bin/. \\\n && cp -r bin/train /usr/local/bin/ \\\n && install -s -m555 FragGeneScan /usr/local/bin/. \\\n && install -m555 -t /usr/local/bin/. bin/*.pl \\\n && make clean \\\n && cd /root ; rm -rf FragGeneScan\n# ## install jellyfish 2.2.6 from source (2.2.8 from repo is broken)\nRUN cd /root \\\n && wget -O jellyfish.tar.gz https://github.com/gmarcais/Jellyfish/releases/download/v2.2.6/jellyfish-2.2.6.tar.gz \\\n && tar xfvz jellyfish.tar.gz \\\n && rm -f jellyfish.tar.gz \\\n && cd jelly* \\\n && ./configure \\\n && make install \\\n && cd /root RUN cd /root \\\n && wget -O Prodigal.tar.gz https://github.com/hyattpd/Prodigal/archive/v2.6.3.tar.gz \\\n && tar xf Prodigal.tar.gz \\\n && cd Prodigal* \\\n && make \\\n && make install \\\n && strip /usr/local/bin/prodigal \\\n && make clean \\\n && cd /root ; rm -rf Prodigal*\n# ## install sortmerna 2.1b\nRUN cd /root \\\n && wget -O sortmerna-2.tar.gz https://github.com/biocore/sortmerna/archive/2.1b.tar.gz \\\n && tar xvf sortmerna-2.tar.gz \\\n && cd sortmerna-2* \\\n && sed -i 's/^\\#define READLEN [0-9]*/#define READLEN 500000/' include/common.hpp \\\n && ./configure \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/sortmerna* \\\n && cd /root ; rm -rf sortmerna-2*\n# ## install skewer\nRUN cd /root \\\n && git clone https://github.com/teharrison/skewer \\\n && cd skewer \\\n && make \\\n && make install \\\n && make clean \\\n && cd /root ; rm -rf skewer\n# ## install vsearch 2.12.0\nRUN cd /root \\\n && wget -O vsearch-2.tar.gz https://github.com/torognes/vsearch/archive/v2.12.0.tar.gz \\\n && tar xzf vsearch-2.tar.gz \\\n && cd vsearch-2* \\\n && sh ./autogen.sh \\\n && ./configure --prefix=/usr/local/ \\\n && make \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/vsearch* \\\n && cd /root ; rm -rf vsearch-2*\n# ## install CWL runner\nRUN pip install pip --upgrade\nRUN pip install cwlref-runner typing --upgrade\n#  for jellyfish (ugly)\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\n#  copy files into image\nCOPY CWL /CWL/\nCOPY mgcmd/* bin/* /usr/local/bin/\nCOPY lib/* /usr/local/lib/site_perl/\n","injectedSmells":[],"originalDockerfileHash":"4d42e514b86c656be23fa756ffacd3bd","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   MG-RAST pipeline Dockerfile\nFROM ubuntu\nMAINTAINER The MG-RAST team (folker@mg-rast.org)\nARG DEBIAN_FRONTEND=noninteractive\nRUN apt-get update \\\n && apt-get install cdbfasta cd-hit cmake dh-autoreconf emacs git libtbb-dev libcwd-guard-perl libberkeleydb-perl libdata-dump-streamer-perl libdatetime-perl libdatetime-format-iso8601-perl libdbi-perl libdigest-md5-perl libdigest-md5-file-perl libdbd-pg-perl libfile-slurp-perl libfilehandle-fmode-perl libgetopt-long-descriptive-perl libjson-perl liblist-allutils-perl libpq-dev libpng-dev libposix-strptime-perl libstring-random-perl libtemplate-perl liburi-encode-perl libunicode-escape-perl libwww-perl liblog-log4perl-perl libcapture-tiny-perl make nodejs python-biopython python-dev python-leveldb perl-modules python-numpy python-pika python-pip python-scipy python-sphinx unzip wget vim curl -y \\\n && apt-get clean\n#  ## alphabetically sorted builds from source\n#  ## install bowtie2 2.3.5\nRUN cd /root \\\n && wget -O bowtie2.zip https://github.com/BenLangmead/bowtie2/releases/download/v2.3.5/bowtie2-2.3.5-linux-x86_64.zip \\\n && unzip bowtie2.zip \\\n && rm -f bowtie2.zip \\\n && cd bowtie2-* \\\n && install bowtie2* /usr/local/bin/ \\\n && cd /root \\\n && rm -rf bowtie2*\n#  ## install autoskewer (requires bowtie)\nRUN cd /root \\\n && git clone http://github.com/MG-RAST/autoskewer \\\n && cd autoskewer \\\n && make install \\\n && cd /root \\\n && rm -rf autoskewer\n#  ## install DIAMOND\nRUN cd /root \\\n && git clone https://github.com/bbuchfink/diamond.git \\\n && cd diamond \\\n && sh ./build_simple.sh \\\n && install -s -m555 diamond /usr/local/bin \\\n && cd /root \\\n && rm -rf diamond\n#  ## install ea-utils\nRUN cd /root \\\n && git clone https://github.com/ExpressionAnalysis/ea-utils.git \\\n && cd ea-utils/clipper \\\n && make fastq-multx \\\n && make fastq-join \\\n && make fastq-mcf \\\n && install -m755 -s fastq-multx /usr/local/bin \\\n && install -m755 -s fastq-join /usr/local/bin \\\n && install -m755 -s fastq-mcf /usr/local/bin \\\n && cd /root ; rm -rf ea-utils\n#  ## install FragGeneScan from our patched source in github\nRUN cd /root \\\n && git clone https://github.com/MG-RAST/FGS.git FragGeneScan \\\n && cd FragGeneScan \\\n && make \\\n && mkdir bin \\\n && mv train bin/. \\\n && mv *.pl bin/. \\\n && cp -r bin/train /usr/local/bin/ \\\n && install -s -m555 FragGeneScan /usr/local/bin/. \\\n && install -m555 -t /usr/local/bin/. bin/*.pl \\\n && make clean \\\n && cd /root ; rm -rf FragGeneScan\n#  ## install jellyfish 2.2.6 from source (2.2.8 from repo is broken)\nRUN cd /root \\\n && wget -O jellyfish.tar.gz https://github.com/gmarcais/Jellyfish/releases/download/v2.2.6/jellyfish-2.2.6.tar.gz \\\n && tar xfvz jellyfish.tar.gz \\\n && rm -f jellyfish.tar.gz \\\n && cd jelly* \\\n && ./configure \\\n && make install \\\n && cd /root RUN cd /root \\\n && wget -O Prodigal.tar.gz https://github.com/hyattpd/Prodigal/archive/v2.6.3.tar.gz \\\n && tar xf Prodigal.tar.gz \\\n && cd Prodigal* \\\n && make \\\n && make install \\\n && strip /usr/local/bin/prodigal \\\n && make clean \\\n && cd /root ; rm -rf Prodigal*\n#  ## install sortmerna 2.1b\nRUN cd /root \\\n && wget -O sortmerna-2.tar.gz https://github.com/biocore/sortmerna/archive/2.1b.tar.gz \\\n && tar xvf sortmerna-2.tar.gz \\\n && cd sortmerna-2* \\\n && sed -i 's/^\\#define READLEN [0-9]*/#define READLEN 500000/' include/common.hpp \\\n && ./configure \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/sortmerna* \\\n && cd /root ; rm -rf sortmerna-2*\n#  ## install skewer\nRUN cd /root \\\n && git clone https://github.com/teharrison/skewer \\\n && cd skewer \\\n && make \\\n && make install \\\n && make clean \\\n && cd /root ; rm -rf skewer\n#  ## install vsearch 2.12.0\nRUN cd /root \\\n && wget -O vsearch-2.tar.gz https://github.com/torognes/vsearch/archive/v2.12.0.tar.gz \\\n && tar xzf vsearch-2.tar.gz \\\n && cd vsearch-2* \\\n && sh ./autogen.sh \\\n && ./configure --prefix=/usr/local/ \\\n && make \\\n && make install \\\n && make clean \\\n && strip /usr/local/bin/vsearch* \\\n && cd /root ; rm -rf vsearch-2*\n#  ## install CWL runner\nRUN pip install pip --upgrade\nRUN pip install cwlref-runner typing --upgrade\n#   for jellyfish (ugly)\nENV LD_LIBRARY_PATH=\"/usr/local/lib\"\n#   copy files into image\nCOPY CWL /CWL/\nCOPY mgcmd/* bin/* /usr/local/bin/\nCOPY lib/* /usr/local/lib/site_perl/\n","originalDockerfileUglifiedHash":"9c952462339cc7cb7e2551bb298576fb","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/4c8d4da7381358ca3b2ec16cdd2dbc8c798041e7.dockerfile"}