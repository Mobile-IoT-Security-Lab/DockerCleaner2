{"seed":1265839597,"processedDockerfileHash":"6660adbed4aa145fc855408f0f9a158f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM openjdk:8-jdk\nRUN set -ex \\\n && for key in 05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 61B832AC2F1C5A90F0F9B00A1C506407564C17A3 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 80FF76D88A969FE46108558A80B953A041E49465 8B39757B1D8A994DF2433ED58B3A601F08C975E5 A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 B3F49CD3B9BD2996DA90F817ED3873F5D3262722 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nARG TOMCAT_VERSION\nENV TOMCAT_VERSION=\"${TOMCAT_VERSION:-7.0.77}\"\n#   add custom scripts\nCOPY scripts /opt/cloudunit/scripts\nRUN chmod +x /opt/cloudunit/scripts/*\n#   Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/tomcat \\\n && mkdir -p /opt/cloudunit/tomcat/logs\nENV CATALINA_HOME=\"/opt/cloudunit/tomcat\"\nENV TOMCAT_MAJOR=\"7\"\nARG TOMCAT_VERSION\nENV TOMCAT_TGZ_URL=\"https://archive.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\n#  # CLOUDUNIT :: BEGINNING\n#   Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/backup \\\n && mkdir -p /opt/cloudunit/hooks/ \\\n && mkdir -p /opt/cloudunit/java \\\n && mkdir -p /opt/cloudunit/shared \\\n && mkdir -p /opt/cloudunit/scripts \\\n && mkdir -p /opt/cloudunit/tmp\nWORKDIR /opt/cloudunit\n#   Environment variables\nENV CU_BACKUP=\"/opt/cloudunit/backup\"\nENV CU_HOOKS=\"/opt/cloudunit/hooks\"\nENV CU_JAVA=\"/opt/cloudunit/java\"\nENV CU_SCRIPTS=\"/opt/cloudunit/scripts\"\nENV CU_SHARED=\"/opt/cloudunit/shared\"\nENV CU_TMP=\"/opt/cloudunit/tmp\"\nENV CU_SERVER_RESTART_POST_DEPLOYMENT=\"false\"\nENV CU_SOFTWARE=\"$CATALINA_HOME\"\nENV CU_SERVER_MANAGER_PATH=\"manager/html\"\nENV CU_SERVER_MANAGER_PORT=\"8080\"\nENV CU_SERVER_PORT=\"8080\"\nENV CU_DEFAULT_LOG_FILE=\"catalina.log\"\nENV CU_LOGS=\"$CATALINA_HOME/logs\"\nENV JAVA_OPTS=\"\\\"-Dfile.encoding=UTF-8 -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dcom.sun.management.jmxremote.port=9010 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false\\\"\"\n#  # CLOUDUNIT :: END\nRUN mkdir -p $CATALINA_HOME\nRUN cd $HOME \\\n && wget $TOMCAT_TGZ_URL \\\n && tar xvf apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && mv $HOME/apache-tomcat-$TOMCAT_VERSION/* $CATALINA_HOME/ \\\n && rm apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && rm -rf $CU_SOFTWARE/webapps/ROOT $CU_SOFTWARE/webapps/examples $CU_SOFTWARE/webapps/docs\n#  # CLOUDUNIT :: BEGINNING\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/javamelody-1.61.0.jar \\\n && mv javamelody-1.61.0.jar $CU_SOFTWARE/lib/javamelody-1.61.0.jar\nCOPY files/web.xml $CU_SOFTWARE/conf/web.xml\nCOPY files/tomcat-users.xml $CU_SOFTWARE/conf/tomcat-users.xml\nCOPY files/logging.properties $CU_SOFTWARE/conf/logging.properties\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar \\\n && mv jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar $CU_SOFTWARE/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar\nCOPY files/jmxtrans-agent.xml /opt/cloudunit/conf/jmxtrans-agent.xml\nENV JAVA_OPTS=\"$JAVA_OPTS -javaagent:/opt/cloudunit/tomcat/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar=/opt/cloudunit/conf/jmxtrans-agent.xml\"\nRUN groupadd -r cloudunit --gid=999 \\\n && useradd -r -g cloudunit --uid=999 cloudunit\nRUN chown -R cloudunit:cloudunit /opt/cloudunit\nUSER cloudunit\nVOLUME /opt/cloudunit\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"run\"]\nLABEL origin=\"application\"\nLABEL application-type=\"tomcat\"\nLABEL application-version=\"tomcat-$TOMCAT_VERSION\"\n#  # CLOUDUNIT :: END\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM openjdk:8-jdk\nRUN set -ex \\\n && for key in 05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 61B832AC2F1C5A90F0F9B00A1C506407564C17A3 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 80FF76D88A969FE46108558A80B953A041E49465 8B39757B1D8A994DF2433ED58B3A601F08C975E5 A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 B3F49CD3B9BD2996DA90F817ED3873F5D3262722 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nARG TOMCAT_VERSION\nENV TOMCAT_VERSION=\"${TOMCAT_VERSION:-7.0.77}\"\n#  add custom scripts\nADD scripts /opt/cloudunit/scripts\nRUN chmod +x /opt/cloudunit/scripts/*\n#  Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/tomcat \\\n && mkdir -p /opt/cloudunit/tomcat/logs\nENV CATALINA_HOME=\"/opt/cloudunit/tomcat\"\nENV TOMCAT_MAJOR=\"7\"\nARG TOMCAT_VERSION\nENV TOMCAT_TGZ_URL=\"https://archive.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\n# # CLOUDUNIT :: BEGINNING\n#  Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/backup \\\n && mkdir -p /opt/cloudunit/hooks/ \\\n && mkdir -p /opt/cloudunit/java \\\n && mkdir -p /opt/cloudunit/shared \\\n && mkdir -p /opt/cloudunit/scripts \\\n && mkdir -p /opt/cloudunit/tmp\nWORKDIR /opt/cloudunit\n#  Environment variables\nENV CU_BACKUP=\"/opt/cloudunit/backup\"\nENV CU_HOOKS=\"/opt/cloudunit/hooks\"\nENV CU_JAVA=\"/opt/cloudunit/java\"\nENV CU_SCRIPTS=\"/opt/cloudunit/scripts\"\nENV CU_SHARED=\"/opt/cloudunit/shared\"\nENV CU_TMP=\"/opt/cloudunit/tmp\"\nENV CU_SERVER_RESTART_POST_DEPLOYMENT=\"false\"\nENV CU_SOFTWARE=\"$CATALINA_HOME\"\nENV CU_SERVER_MANAGER_PATH=\"manager/html\"\nENV CU_SERVER_MANAGER_PORT=\"8080\"\nENV CU_SERVER_PORT=\"8080\"\nENV CU_DEFAULT_LOG_FILE=\"catalina.log\"\nENV CU_LOGS=\"$CATALINA_HOME/logs\"\nENV JAVA_OPTS=\"\\\"-Dfile.encoding=UTF-8 -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dcom.sun.management.jmxremote.port=9010 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false\\\"\"\n# # CLOUDUNIT :: END\nRUN mkdir -p $CATALINA_HOME\nRUN cd $HOME \\\n && wget $TOMCAT_TGZ_URL \\\n && tar xvf apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && mv $HOME/apache-tomcat-$TOMCAT_VERSION/* $CATALINA_HOME/ \\\n && rm apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && rm -rf $CU_SOFTWARE/webapps/ROOT $CU_SOFTWARE/webapps/examples $CU_SOFTWARE/webapps/docs\n# # CLOUDUNIT :: BEGINNING\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/javamelody-1.61.0.jar \\\n && mv javamelody-1.61.0.jar $CU_SOFTWARE/lib/javamelody-1.61.0.jar\nCOPY files/web.xml $CU_SOFTWARE/conf/web.xml\nCOPY files/tomcat-users.xml $CU_SOFTWARE/conf/tomcat-users.xml\nCOPY files/logging.properties $CU_SOFTWARE/conf/logging.properties\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar \\\n && mv jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar $CU_SOFTWARE/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar\nCOPY files/jmxtrans-agent.xml /opt/cloudunit/conf/jmxtrans-agent.xml\nENV JAVA_OPTS=\"$JAVA_OPTS -javaagent:/opt/cloudunit/tomcat/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar=/opt/cloudunit/conf/jmxtrans-agent.xml\"\nRUN groupadd -r cloudunit --gid=999 \\\n && useradd -r -g cloudunit --uid=999 cloudunit\nRUN chown -R cloudunit:cloudunit /opt/cloudunit\nUSER cloudunit\nVOLUME /opt/cloudunit\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"run\"]\nLABEL origin=\"application\"\nLABEL application-type=\"tomcat\"\nLABEL application-version=\"tomcat-$TOMCAT_VERSION\"\n# # CLOUDUNIT :: END\n","injectedSmells":[],"originalDockerfileHash":"85ea82b0943b7df234a8add94b732ded","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM openjdk:8-jdk\nRUN set -ex \\\n && for key in 05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 61B832AC2F1C5A90F0F9B00A1C506407564C17A3 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 80FF76D88A969FE46108558A80B953A041E49465 8B39757B1D8A994DF2433ED58B3A601F08C975E5 A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 B3F49CD3B9BD2996DA90F817ED3873F5D3262722 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\nARG TOMCAT_VERSION\nENV TOMCAT_VERSION=\"${TOMCAT_VERSION:-7.0.77}\"\n#   add custom scripts\nADD scripts /opt/cloudunit/scripts\nRUN chmod +x /opt/cloudunit/scripts/*\n#   Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/tomcat \\\n && mkdir -p /opt/cloudunit/tomcat/logs\nENV CATALINA_HOME=\"/opt/cloudunit/tomcat\"\nENV TOMCAT_MAJOR=\"7\"\nARG TOMCAT_VERSION\nENV TOMCAT_TGZ_URL=\"https://archive.apache.org/dist/tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\n#  # CLOUDUNIT :: BEGINNING\n#   Create directory for CloudUnit\nRUN mkdir -p /opt/cloudunit/backup \\\n && mkdir -p /opt/cloudunit/hooks/ \\\n && mkdir -p /opt/cloudunit/java \\\n && mkdir -p /opt/cloudunit/shared \\\n && mkdir -p /opt/cloudunit/scripts \\\n && mkdir -p /opt/cloudunit/tmp\nWORKDIR /opt/cloudunit\n#   Environment variables\nENV CU_BACKUP=\"/opt/cloudunit/backup\"\nENV CU_HOOKS=\"/opt/cloudunit/hooks\"\nENV CU_JAVA=\"/opt/cloudunit/java\"\nENV CU_SCRIPTS=\"/opt/cloudunit/scripts\"\nENV CU_SHARED=\"/opt/cloudunit/shared\"\nENV CU_TMP=\"/opt/cloudunit/tmp\"\nENV CU_SERVER_RESTART_POST_DEPLOYMENT=\"false\"\nENV CU_SOFTWARE=\"$CATALINA_HOME\"\nENV CU_SERVER_MANAGER_PATH=\"manager/html\"\nENV CU_SERVER_MANAGER_PORT=\"8080\"\nENV CU_SERVER_PORT=\"8080\"\nENV CU_DEFAULT_LOG_FILE=\"catalina.log\"\nENV CU_LOGS=\"$CATALINA_HOME/logs\"\nENV JAVA_OPTS=\"\\\"-Dfile.encoding=UTF-8 -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dcom.sun.management.jmxremote.port=9010 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false\\\"\"\n#  # CLOUDUNIT :: END\nRUN mkdir -p $CATALINA_HOME\nRUN cd $HOME \\\n && wget $TOMCAT_TGZ_URL \\\n && tar xvf apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && mv $HOME/apache-tomcat-$TOMCAT_VERSION/* $CATALINA_HOME/ \\\n && rm apache-tomcat-$TOMCAT_VERSION.tar.gz \\\n && rm -rf $CU_SOFTWARE/webapps/ROOT $CU_SOFTWARE/webapps/examples $CU_SOFTWARE/webapps/docs\n#  # CLOUDUNIT :: BEGINNING\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/javamelody-1.61.0.jar \\\n && mv javamelody-1.61.0.jar $CU_SOFTWARE/lib/javamelody-1.61.0.jar\nCOPY files/web.xml $CU_SOFTWARE/conf/web.xml\nCOPY files/tomcat-users.xml $CU_SOFTWARE/conf/tomcat-users.xml\nCOPY files/logging.properties $CU_SOFTWARE/conf/logging.properties\nRUN wget https://github.com/Treeptik/cloudunit/releases/download/1.0/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar \\\n && mv jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar $CU_SOFTWARE/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar\nCOPY files/jmxtrans-agent.xml /opt/cloudunit/conf/jmxtrans-agent.xml\nENV JAVA_OPTS=\"$JAVA_OPTS -javaagent:/opt/cloudunit/tomcat/lib/jmxtrans-agent-1.2.5-SNAPSHOT-jar-with-dependencies.jar=/opt/cloudunit/conf/jmxtrans-agent.xml\"\nRUN groupadd -r cloudunit --gid=999 \\\n && useradd -r -g cloudunit --uid=999 cloudunit\nRUN chown -R cloudunit:cloudunit /opt/cloudunit\nUSER cloudunit\nVOLUME /opt/cloudunit\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"run\"]\nLABEL origin=\"application\"\nLABEL application-type=\"tomcat\"\nLABEL application-version=\"tomcat-$TOMCAT_VERSION\"\n#  # CLOUDUNIT :: END\n","originalDockerfileUglifiedHash":"3686b93faf314ada89abe91f0b96c93a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fecf3fe183aefd03b174df44663970a545ff2fab.dockerfile"}