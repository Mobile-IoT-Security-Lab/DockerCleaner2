{"seed":3853517343,"processedDockerfileHash":"b91fdceda64d2ef567aea72ffd66f20f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-npm","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.16\nMAINTAINER sparklyballs <sparkly@madeupemail.com>\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   Add required files that are local\nCOPY src/ /root/\n#   expose ports\nEXPOSE 8080/tcp 5432/tcp\n#   volumes\nVOLUME /data /config\n#   Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#   fix executables\nRUN mv /root/startup-files/* /etc/my_init.d/ \\\n && chmod +x /etc/my_init.d/* /root/json-parser/*.sh \\\n && rm -rf /root/startup-files \\\n && locale-gen en_US.UTF-8 \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends python3 python3-setuptools python3-pip -y \\\n && apt-get install --no-install-recommends libxml2-dev libxslt-dev libyaml-dev -y \\\n && apt-get install --no-install-recommends wget git-core supervisor unrar -y \\\n && wget -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | apt-key add - \\\n && sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/pgdg.list' \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends postgresql-9.4 postgresql-server-dev-9.4 pgadmin3 -y \\\n && git clone https://github.com/Murodese/pynab.git /opt/pynab \\\n && cd /opt/pynab \\\n && mv /root/install.py /opt/pynab/install.py \\\n && pip3 install -r requirements.txt \\\n && apt-get install --no-install-recommends npm nodejs-legacy ruby ruby-compass -y \\\n && npm install grunt-cli@1.4.3 bower@1.8.14 -g \\\n && cd webui \\\n && npm install \\\n && bower install --allow-root \\\n && grunt build \\\n && pip3 install uwsgi \\\n && apt-get install --no-install-recommends nginx -y \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf \\\n && mv /root/001-pynab /etc/nginx/sites-available/001-pynab \\\n && ln -s /etc/nginx/sites-available/001-pynab /etc/nginx/sites-enabled/ \\\n && rm /etc/nginx/sites-enabled/default \\\n && chown -R www-data:www-data /opt/pynab \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.16\nMAINTAINER sparklyballs <sparkly@madeupemail.com>\n#  Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  Add required files that are local\nADD src/ /root/\n#  expose ports\nEXPOSE 8080/tcp 5432/tcp\n#  volumes\nVOLUME /data /config\n#  Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#  fix executables\nRUN mv /root/startup-files/* /etc/my_init.d/ \\\n && chmod +x /etc/my_init.d/* /root/json-parser/*.sh \\\n && rm -rf /root/startup-files \\\n && locale-gen en_US.UTF-8 \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && apt-get update -qq \\\n && apt-get install python3 python3-setuptools python3-pip -y \\\n && apt-get install libxml2-dev libxslt-dev libyaml-dev -y \\\n && apt-get install wget git-core supervisor unrar -y \\\n && wget -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | apt-key add - \\\n && sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/pgdg.list' \\\n && apt-get update -qq \\\n && apt-get install postgresql-9.4 postgresql-server-dev-9.4 pgadmin3 -y \\\n && git clone https://github.com/Murodese/pynab.git /opt/pynab \\\n && cd /opt/pynab \\\n && mv /root/install.py /opt/pynab/install.py \\\n && pip3 install -r requirements.txt \\\n && apt-get install npm nodejs-legacy ruby ruby-compass -y \\\n && npm install grunt-cli bower -g \\\n && cd webui \\\n && npm install \\\n && bower install --allow-root \\\n && grunt build \\\n && pip3 install uwsgi \\\n && apt-get install nginx -y \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf \\\n && mv /root/001-pynab /etc/nginx/sites-available/001-pynab \\\n && ln -s /etc/nginx/sites-available/001-pynab /etc/nginx/sites-enabled/ \\\n && rm /etc/nginx/sites-enabled/default \\\n && chown -R www-data:www-data /opt/pynab \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","injectedSmells":[],"originalDockerfileHash":"a83c4b1b1bf90ac9ce51aa19e5b0021f","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.16\nMAINTAINER sparklyballs <sparkly@madeupemail.com>\n#   Set correct environment variables\nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    HOME=\"/root\" \\\n    TERM=\"xterm\" \\\n    LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   Add required files that are local\nADD src/ /root/\n#   expose ports\nEXPOSE 8080/tcp 5432/tcp\n#   volumes\nVOLUME /data /config\n#   Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n#   fix executables\nRUN mv /root/startup-files/* /etc/my_init.d/ \\\n && chmod +x /etc/my_init.d/* /root/json-parser/*.sh \\\n && rm -rf /root/startup-files \\\n && locale-gen en_US.UTF-8 \\\n && usermod -u 99 nobody \\\n && usermod -g 100 nobody \\\n && apt-get update -qq \\\n && apt-get install python3 python3-setuptools python3-pip -y \\\n && apt-get install libxml2-dev libxslt-dev libyaml-dev -y \\\n && apt-get install wget git-core supervisor unrar -y \\\n && wget -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | apt-key add - \\\n && sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/pgdg.list' \\\n && apt-get update -qq \\\n && apt-get install postgresql-9.4 postgresql-server-dev-9.4 pgadmin3 -y \\\n && git clone https://github.com/Murodese/pynab.git /opt/pynab \\\n && cd /opt/pynab \\\n && mv /root/install.py /opt/pynab/install.py \\\n && pip3 install -r requirements.txt \\\n && apt-get install npm nodejs-legacy ruby ruby-compass -y \\\n && npm install grunt-cli bower -g \\\n && cd webui \\\n && npm install \\\n && bower install --allow-root \\\n && grunt build \\\n && pip3 install uwsgi \\\n && apt-get install nginx -y \\\n && echo \"daemon off;\" >> /etc/nginx/nginx.conf \\\n && mv /root/001-pynab /etc/nginx/sites-available/001-pynab \\\n && ln -s /etc/nginx/sites-available/001-pynab /etc/nginx/sites-enabled/ \\\n && rm /etc/nginx/sites-enabled/default \\\n && chown -R www-data:www-data /opt/pynab \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/groff /usr/share/info /usr/share/lintian /usr/share/linda /var/cache/man \\\n && ((find /usr/share/doc -depth -type f ! -name copyright | xargs rm || true ) ) \\\n && ((find /usr/share/doc -empty | xargs rmdir || true ) )\n","originalDockerfileUglifiedHash":"6a36c4a5d1371e34d160dbc473ee4051","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/78134cd4975d9037ede14af29654a8f90da5f0fb.dockerfile"}