{"seed":1018766280,"processedDockerfileHash":"77b0c639549afcfc74e1e76ccff4039c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ################ Dockerfile for RabbitMQ version 3.7.15 ################################\n#\n#   RabbitMQ is an open source message broker software (sometimes called message-oriented middleware)\n#   that implements the Advanced Message Queuing Protocol (AMQP).\n#\n#   To build RabbitMQ image from the directory containing this Dockerfile\n#   (assuming that the file is named \"Dockerfile\"):\n#   docker build -t <image_name> .\n#\n#   To start the RabbitMQ server run the below command\n#   docker run --name <container_name> -p 15672:15672 -d <image_name>\n#\n#   To start the RabbitMQ server by providing rabbitmq-configuration\n#   docker run --name <container_name> -v <path_to_rabbitmq.config_file_on_host>:/etc/rabbitmq/rabbitmq.config -p 15672:15672 -d <image_name>\n#\n#   We can view the RabbitMQ management UI at http://<rabbitmq-host-IP>:15672\n#\n#  ########################################################################################\n#   Base image\nFROM s390x/ubuntu:16.04\nARG RABBITMQ_VER=3.7.15\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install the build dependencies for RabbitMQ\nRUN apt-get update \\\n && apt-get install --no-install-recommends ant curl git make openssl python rsync tar wget xsltproc xz-utils zip locales -y \\\n && apt-get install --no-install-recommends g++ gcc libncurses-dev libncurses5-dev libssl-dev openjdk-8-jdk perl unixodbc unixodbc-dev -y \\\n && wget http://www.erlang.org/download/otp_src_21.0.tar.gz \\\n && tar zxf otp_src_21.0.tar.gz \\\n && cd otp_src_21.0 \\\n && export ERL_TOP=$( pwd ;) \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && mkdir $SOURCE_DIR \\\n && cd $SOURCE_DIR \\\n && wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/$RABBITMQ_VER/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && localedef -c -f UTF-8 -i en_US en_US.UTF-8 \\\n && git clone git://github.com/elixir-lang/elixir \\\n && cd elixir \\\n && git checkout v1.6.6 \\\n && make \\\n && make install \\\n && cd ../ \\\n && git clone git://github.com/hexpm/hex.git \\\n && cd hex \\\n && git checkout v0.19.0 \\\n && mix install \\\n && cd /opt \\\n && tar xf $SOURCE_DIR/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && cp $SOURCE_DIR/hex/_build/dev/lib/hex/ebin/* rabbitmq-server-$RABBITMQ_VER/deps/.mix/archives/hex-0.19.0/hex-0.19.0/ebin/ \\\n && cd rabbitmq-server-$RABBITMQ_VER \\\n && make \\\n && make install \\\n && mkdir -p /etc/rabbitmq \\\n && echo \"[{rabbit, [{loopback_users, []}]}].\" | tee /etc/rabbitmq/rabbitmq.config \\\n && rm -rf deps/rabbit/plugins \\\n && ln -s $PWD/plugins deps/rabbit/plugins \\\n && rm -rf $SOURCE_DIR \\\n && apt-get remove -y ant curl git make openjdk-8-jdk openssl python rsync wget xsltproc xz-utils zip \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/rabbitmq-server-$RABBITMQ_VER\n#   Expose RabbitMQ management console port and RabbitMQ server port\nEXPOSE 15672/tcp 5672/tcp\n#   Enable RabbitMQ management plugin and start RabbitMQ server\nENTRYPOINT deps/rabbit/scripts/rabbitmq-plugins enable rabbitmq_management \\\n && deps/rabbit/scripts/rabbitmq-server\n#   End of Dockerfile\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  © Copyright IBM Corporation 2017, 2019.\n#  LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n# ################ Dockerfile for RabbitMQ version 3.7.15 ################################\n#\n#  RabbitMQ is an open source message broker software (sometimes called message-oriented middleware)\n#  that implements the Advanced Message Queuing Protocol (AMQP).\n#\n#  To build RabbitMQ image from the directory containing this Dockerfile\n#  (assuming that the file is named \"Dockerfile\"):\n#  docker build -t <image_name> .\n#\n#  To start the RabbitMQ server run the below command\n#  docker run --name <container_name> -p 15672:15672 -d <image_name>\n#\n#  To start the RabbitMQ server by providing rabbitmq-configuration\n#  docker run --name <container_name> -v <path_to_rabbitmq.config_file_on_host>:/etc/rabbitmq/rabbitmq.config -p 15672:15672 -d <image_name>\n#\n#  We can view the RabbitMQ management UI at http://<rabbitmq-host-IP>:15672\n#\n# ########################################################################################\n#  Base image\nFROM s390x/ubuntu:16.04\nARG RABBITMQ_VER=3.7.15\n#  The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\"\nENV LC_ALL=\"en_US.UTF-8\"\n#  Install the build dependencies for RabbitMQ\nRUN apt-get update \\\n && apt-get install ant curl git make openssl python rsync tar wget xsltproc xz-utils zip locales -y \\\n && apt-get install g++ gcc libncurses-dev libncurses5-dev libssl-dev openjdk-8-jdk perl unixodbc unixodbc-dev -y \\\n && wget http://www.erlang.org/download/otp_src_21.0.tar.gz \\\n && tar zxf otp_src_21.0.tar.gz \\\n && cd otp_src_21.0 \\\n && export ERL_TOP=$( pwd ;) \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && mkdir $SOURCE_DIR \\\n && cd $SOURCE_DIR \\\n && wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/$RABBITMQ_VER/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && localedef -c -f UTF-8 -i en_US en_US.UTF-8 \\\n && git clone git://github.com/elixir-lang/elixir \\\n && cd elixir \\\n && git checkout v1.6.6 \\\n && make \\\n && make install \\\n && cd ../ \\\n && git clone git://github.com/hexpm/hex.git \\\n && cd hex \\\n && git checkout v0.19.0 \\\n && mix install \\\n && cd /opt \\\n && tar xf $SOURCE_DIR/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && cp $SOURCE_DIR/hex/_build/dev/lib/hex/ebin/* rabbitmq-server-$RABBITMQ_VER/deps/.mix/archives/hex-0.19.0/hex-0.19.0/ebin/ \\\n && cd rabbitmq-server-$RABBITMQ_VER \\\n && make \\\n && make install \\\n && mkdir -p /etc/rabbitmq \\\n && echo \"[{rabbit, [{loopback_users, []}]}].\" | tee /etc/rabbitmq/rabbitmq.config \\\n && rm -rf deps/rabbit/plugins \\\n && ln -s $PWD/plugins deps/rabbit/plugins \\\n && rm -rf $SOURCE_DIR \\\n && apt-get remove -y ant curl git make openjdk-8-jdk openssl python rsync wget xsltproc xz-utils zip \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/rabbitmq-server-$RABBITMQ_VER\n#  Expose RabbitMQ management console port and RabbitMQ server port\nEXPOSE 15672/tcp 5672/tcp\n#  Enable RabbitMQ management plugin and start RabbitMQ server\nENTRYPOINT deps/rabbit/scripts/rabbitmq-plugins enable rabbitmq_management \\\n && deps/rabbit/scripts/rabbitmq-server\n#  End of Dockerfile\n","injectedSmells":[],"originalDockerfileHash":"cced34d94e9f5cf8cf123c993cb923c8","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   © Copyright IBM Corporation 2017, 2019.\n#   LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n#  ################ Dockerfile for RabbitMQ version 3.7.15 ################################\n#\n#   RabbitMQ is an open source message broker software (sometimes called message-oriented middleware)\n#   that implements the Advanced Message Queuing Protocol (AMQP).\n#\n#   To build RabbitMQ image from the directory containing this Dockerfile\n#   (assuming that the file is named \"Dockerfile\"):\n#   docker build -t <image_name> .\n#\n#   To start the RabbitMQ server run the below command\n#   docker run --name <container_name> -p 15672:15672 -d <image_name>\n#\n#   To start the RabbitMQ server by providing rabbitmq-configuration\n#   docker run --name <container_name> -v <path_to_rabbitmq.config_file_on_host>:/etc/rabbitmq/rabbitmq.config -p 15672:15672 -d <image_name>\n#\n#   We can view the RabbitMQ management UI at http://<rabbitmq-host-IP>:15672\n#\n#  ########################################################################################\n#   Base image\nFROM s390x/ubuntu:16.04\nARG RABBITMQ_VER=3.7.15\n#   The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\nENV SOURCE_DIR=\"/tmp/source\"\nENV LC_ALL=\"en_US.UTF-8\"\n#   Install the build dependencies for RabbitMQ\nRUN apt-get update \\\n && apt-get install ant curl git make openssl python rsync tar wget xsltproc xz-utils zip locales -y \\\n && apt-get install g++ gcc libncurses-dev libncurses5-dev libssl-dev openjdk-8-jdk perl unixodbc unixodbc-dev -y \\\n && wget http://www.erlang.org/download/otp_src_21.0.tar.gz \\\n && tar zxf otp_src_21.0.tar.gz \\\n && cd otp_src_21.0 \\\n && export ERL_TOP=$( pwd ;) \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install \\\n && mkdir $SOURCE_DIR \\\n && cd $SOURCE_DIR \\\n && wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/$RABBITMQ_VER/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && localedef -c -f UTF-8 -i en_US en_US.UTF-8 \\\n && git clone git://github.com/elixir-lang/elixir \\\n && cd elixir \\\n && git checkout v1.6.6 \\\n && make \\\n && make install \\\n && cd ../ \\\n && git clone git://github.com/hexpm/hex.git \\\n && cd hex \\\n && git checkout v0.19.0 \\\n && mix install \\\n && cd /opt \\\n && tar xf $SOURCE_DIR/rabbitmq-server-$RABBITMQ_VER.tar.xz \\\n && cp $SOURCE_DIR/hex/_build/dev/lib/hex/ebin/* rabbitmq-server-$RABBITMQ_VER/deps/.mix/archives/hex-0.19.0/hex-0.19.0/ebin/ \\\n && cd rabbitmq-server-$RABBITMQ_VER \\\n && make \\\n && make install \\\n && mkdir -p /etc/rabbitmq \\\n && echo \"[{rabbit, [{loopback_users, []}]}].\" | tee /etc/rabbitmq/rabbitmq.config \\\n && rm -rf deps/rabbit/plugins \\\n && ln -s $PWD/plugins deps/rabbit/plugins \\\n && rm -rf $SOURCE_DIR \\\n && apt-get remove -y ant curl git make openjdk-8-jdk openssl python rsync wget xsltproc xz-utils zip \\\n && apt-get autoremove -y \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nWORKDIR /opt/rabbitmq-server-$RABBITMQ_VER\n#   Expose RabbitMQ management console port and RabbitMQ server port\nEXPOSE 15672/tcp 5672/tcp\n#   Enable RabbitMQ management plugin and start RabbitMQ server\nENTRYPOINT deps/rabbit/scripts/rabbitmq-plugins enable rabbitmq_management \\\n && deps/rabbit/scripts/rabbitmq-server\n#   End of Dockerfile\n","originalDockerfileUglifiedHash":"39e4ae753720ef8404f3503f67a9130c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b34f49626f5616592a34f5dcf87471144338b636.dockerfile"}