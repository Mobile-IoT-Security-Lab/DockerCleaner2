{"seed":1708051783,"processedDockerfileHash":"e60d6e58a8dcf4d461ab09bf6cefdd6a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM jupyter/all-spark-notebook\nLABEL maintainer=\"Nilesh Patil (@nilesh-patil)\"\nUSER root\n#   pre-requisites\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends apt-utils=2.6.0 software-properties-common=0.99.35 fonts-dejavu=2.37-6 tzdata=2022g-7ubuntu2 gfortran=4:12.2.0-3ubuntu1 gcc=4:12.2.0-3ubuntu1 -qq -y \\\n && apt-get clean \\\n && add-apt-repository universe \\\n && rm -rf /var/lib/apt/lists/*\n#   Julia dependencies\n#   install Julia packages in /opt/julia instead of $HOME\nENV JULIA_DEPOT_PATH=\"/opt/julia\"\nENV JULIA_PKGDIR=\"/opt/julia\"\nENV JULIA_VERSION=\"1.0.2\"\n#   install Julia\nRUN mkdir /opt/julia-${JULIA_VERSION} \\\n && cd /tmp \\\n && wget -q https://julialang-s3.julialang.org/bin/linux/x64/`echo ${JULIA_VERSION} | cut -d. -f 1,2 `/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && tar xzf julia-${JULIA_VERSION}-linux-x86_64.tar.gz -C /opt/julia-${JULIA_VERSION} --strip-components=1 \\\n && rm /tmp/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && ln -fs /opt/julia-*/bin/julia /usr/local/bin/julia\n#   Show Julia where conda libraries are \\\nRUN mkdir /etc/julia \\\n && echo \"push!(Libdl.DL_LOAD_PATH, \\\"$CONDA_DIR/lib\\\")\" >> /etc/julia/juliarc.jl \\\n && mkdir $JULIA_PKGDIR \\\n && chown $NB_USER $JULIA_PKGDIR \\\n && fix-permissions $JULIA_PKGDIR\nUSER $NB_UID\n#  # Julia kernel & packages\nRUN julia -e 'import Pkg; Pkg.update()' \\\n && (test $TEST_ONLY_BUILD || julia -e 'import Pkg; Pkg.add(\"HDF5\")' ) \\\n && julia -e 'import Pkg; Pkg.add(\"Gadfly\")' \\\n && julia -e 'import Pkg; Pkg.add(\"RDatasets\")' \\\n && julia -e 'import Pkg; Pkg.add(\"IJulia\")' \\\n && julia -e 'using IJulia' \\\n && mv $HOME/.local/share/jupyter/kernels/julia* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $JULIA_PKGDIR $CONDA_DIR/share/jupyter\n#   Anaconda Python Environments\nRUN conda create -n python27 python=2.7 anaconda \\\n && conda create -n python36 python=3.6 anaconda\n#  #################################\n#  ### Add Packages to Base ########\n#  #################################\nRUN /bin/bash -c \"source activate base \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel ; conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name base --display-name 'Python 3(Base)' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python27 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python ; conda clean --all -y ; python -m ipykernel install --user --name python27 --display-name 'Python 2.7' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python36 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name python36 --display-name 'Python 3.6' \\\n && source deactivate \\\n && mv $HOME/.local/share/jupyter/kernels/* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $CONDA_DIR /home/$NB_USER $CONDA_DIR/share/jupyter\"\nEXPOSE 8888/tcp 4040/tcp 8080/tcp 8081/tcp 7077/tcp\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM jupyter/all-spark-notebook\nLABEL maintainer=\"Nilesh Patil (@nilesh-patil)\"\nUSER root\n#  pre-requisites\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends apt-utils software-properties-common fonts-dejavu tzdata gfortran gcc -qq -y \\\n && apt-get clean \\\n && add-apt-repository universe \\\n && rm -rf /var/lib/apt/lists/*\n#  Julia dependencies\n#  install Julia packages in /opt/julia instead of $HOME\nENV JULIA_DEPOT_PATH=\"/opt/julia\"\nENV JULIA_PKGDIR=\"/opt/julia\"\nENV JULIA_VERSION=\"1.0.2\"\n#  install Julia\nRUN mkdir /opt/julia-${JULIA_VERSION} \\\n && cd /tmp \\\n && wget -q https://julialang-s3.julialang.org/bin/linux/x64/`echo ${JULIA_VERSION} | cut -d. -f 1,2 `/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && tar xzf julia-${JULIA_VERSION}-linux-x86_64.tar.gz -C /opt/julia-${JULIA_VERSION} --strip-components=1 \\\n && rm /tmp/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && ln -fs /opt/julia-*/bin/julia /usr/local/bin/julia\n#  Show Julia where conda libraries are \\\nRUN mkdir /etc/julia \\\n && echo \"push!(Libdl.DL_LOAD_PATH, \\\"$CONDA_DIR/lib\\\")\" >> /etc/julia/juliarc.jl \\\n && mkdir $JULIA_PKGDIR \\\n && chown $NB_USER $JULIA_PKGDIR \\\n && fix-permissions $JULIA_PKGDIR\nUSER $NB_UID\n# # Julia kernel & packages\nRUN julia -e 'import Pkg; Pkg.update()' \\\n && (test $TEST_ONLY_BUILD || julia -e 'import Pkg; Pkg.add(\"HDF5\")' ) \\\n && julia -e 'import Pkg; Pkg.add(\"Gadfly\")' \\\n && julia -e 'import Pkg; Pkg.add(\"RDatasets\")' \\\n && julia -e 'import Pkg; Pkg.add(\"IJulia\")' \\\n && julia -e 'using IJulia' \\\n && mv $HOME/.local/share/jupyter/kernels/julia* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $JULIA_PKGDIR $CONDA_DIR/share/jupyter\n#  Anaconda Python Environments\nRUN conda create -n python27 python=2.7 anaconda \\\n && conda create -n python36 python=3.6 anaconda\n# #################################\n# ### Add Packages to Base ########\n# #################################\nRUN /bin/bash -c \"source activate base \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel ; conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name base --display-name 'Python 3(Base)' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python27 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python ; conda clean --all -y ; python -m ipykernel install --user --name python27 --display-name 'Python 2.7' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python36 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name python36 --display-name 'Python 3.6' \\\n && source deactivate \\\n && mv $HOME/.local/share/jupyter/kernels/* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $CONDA_DIR /home/$NB_USER $CONDA_DIR/share/jupyter\"\nEXPOSE 8888/tcp 4040/tcp 8080/tcp 8081/tcp 7077/tcp\n","injectedSmells":[],"originalDockerfileHash":"b781922c1cdf0aa0379ea4b965cecd47","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM jupyter/all-spark-notebook\nLABEL maintainer=\"Nilesh Patil (@nilesh-patil)\"\nUSER root\n#   pre-requisites\nRUN apt-get update -qq \\\n && apt-get install --no-install-recommends apt-utils software-properties-common fonts-dejavu tzdata gfortran gcc -qq -y \\\n && apt-get clean \\\n && add-apt-repository universe \\\n && rm -rf /var/lib/apt/lists/*\n#   Julia dependencies\n#   install Julia packages in /opt/julia instead of $HOME\nENV JULIA_DEPOT_PATH=\"/opt/julia\"\nENV JULIA_PKGDIR=\"/opt/julia\"\nENV JULIA_VERSION=\"1.0.2\"\n#   install Julia\nRUN mkdir /opt/julia-${JULIA_VERSION} \\\n && cd /tmp \\\n && wget -q https://julialang-s3.julialang.org/bin/linux/x64/`echo ${JULIA_VERSION} | cut -d. -f 1,2 `/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && tar xzf julia-${JULIA_VERSION}-linux-x86_64.tar.gz -C /opt/julia-${JULIA_VERSION} --strip-components=1 \\\n && rm /tmp/julia-${JULIA_VERSION}-linux-x86_64.tar.gz \\\n && ln -fs /opt/julia-*/bin/julia /usr/local/bin/julia\n#   Show Julia where conda libraries are \\\nRUN mkdir /etc/julia \\\n && echo \"push!(Libdl.DL_LOAD_PATH, \\\"$CONDA_DIR/lib\\\")\" >> /etc/julia/juliarc.jl \\\n && mkdir $JULIA_PKGDIR \\\n && chown $NB_USER $JULIA_PKGDIR \\\n && fix-permissions $JULIA_PKGDIR\nUSER $NB_UID\n#  # Julia kernel & packages\nRUN julia -e 'import Pkg; Pkg.update()' \\\n && (test $TEST_ONLY_BUILD || julia -e 'import Pkg; Pkg.add(\"HDF5\")' ) \\\n && julia -e 'import Pkg; Pkg.add(\"Gadfly\")' \\\n && julia -e 'import Pkg; Pkg.add(\"RDatasets\")' \\\n && julia -e 'import Pkg; Pkg.add(\"IJulia\")' \\\n && julia -e 'using IJulia' \\\n && mv $HOME/.local/share/jupyter/kernels/julia* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $JULIA_PKGDIR $CONDA_DIR/share/jupyter\n#   Anaconda Python Environments\nRUN conda create -n python27 python=2.7 anaconda \\\n && conda create -n python36 python=3.6 anaconda\n#  #################################\n#  ### Add Packages to Base ########\n#  #################################\nRUN /bin/bash -c \"source activate base \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel ; conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name base --display-name 'Python 3(Base)' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python27 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python ; conda clean --all -y ; python -m ipykernel install --user --name python27 --display-name 'Python 2.7' \\\n && fix-permissions $CONDA_DIR /home/$NB_USER \\\n && source deactivate \\\n && source activate python36 \\\n && conda install --quiet --yes -c anaconda numpy scipy scikit-learn scikit-image pandas tqdm ipykernel \\\n && conda install --quiet --yes -c anaconda tensorflow ; conda install --quiet --yes -c pytorch pytorch-cpu torchvision-cpu ; conda install --quiet --yes -c conda-forge openpyxl h5py matplotlib ; conda upgrade --all -y ; pip install opencv-python imgaug; conda clean --all -y ; python -m ipykernel install --user --name python36 --display-name 'Python 3.6' \\\n && source deactivate \\\n && mv $HOME/.local/share/jupyter/kernels/* $CONDA_DIR/share/jupyter/kernels/ \\\n && chmod -R go+rx $CONDA_DIR/share/jupyter \\\n && rm -rf $HOME/.local \\\n && fix-permissions $CONDA_DIR /home/$NB_USER $CONDA_DIR/share/jupyter\"\nEXPOSE 8888/tcp 4040/tcp 8080/tcp 8081/tcp 7077/tcp\n","originalDockerfileUglifiedHash":"66172abcf56e2cf70dfe4c252fbc8b01","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f0eff34c25391db5df9a43056420a61bedd8bbcd.dockerfile"}