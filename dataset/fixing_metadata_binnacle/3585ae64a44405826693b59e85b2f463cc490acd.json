{"seed":4267820362,"processedDockerfileHash":"2f8ae4eef4e55bc989fc6fac0c1ca4d5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Fernando Andreotti <fernando.andreotti@eng.ox.ac.uk>\n#   Versions used for some packages\nARG CONDA_VERSION=4.3.1\nARG CONDA_ENV\nARG TENSORFLOW_VERSION=1.0*\nARG KERAS_VERSION=2.0.2\nARG PYTHON_VERSION=3.5\nENTRYPOINT [\"/bin/bash\", \"-c\"]\nUSER root\n#   Install some dependencies\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CONDA_ENV_PATH=\"/opt/miniconda\"\nENV MYCONDA_ENV=\"\\\"deeplearn\\\"\"\nENV CONDA_ACTIVATE=\"\\\"source $CONDA_ENV_PATH/bin/activate $MYCONDA_ENV\\\"\"\nRUN apt-get update --fix-missing -qq \\\n && apt-get install --no-install-recommends autoconf=2.69-6 automake=1:1.14.1-2ubuntu1 bc=1.06.95-8ubuntu1 build-essential=11.6ubuntu6 bzip2=1.0.6-5 cmake=2.8.12.2-0ubuntu3 curl=7.35.0-1ubuntu2.20 g++=4:4.8.2-1ubuntu6 gfortran=4:4.8.2-1ubuntu6 git=1:1.9.1-1ubuntu0.10 language-pack-en=1:14.04+20160720 libatlas-dev=3.10.1-4 libatlas3gf-base=3.10.1-4 libcurl4-openssl-dev=7.35.0-1ubuntu2.20 libffi-dev=3.1~rc1+r3.0.13-12ubuntu0.2 libfreetype6-dev=2.5.2-1ubuntu2.8 libglib2.0-0=2.40.2-0ubuntu1.1 libhdf5-dev=1.8.11-5ubuntu7.1 liblcms2-dev=2.5-0ubuntu4.2 libopenblas-dev=0.2.8-6ubuntu1 libssl-dev=1.0.1f-1ubuntu2.27 libtiff5-dev=4.0.3-7ubuntu0.11 libtool=2.4.2-1.7ubuntu1 libwebp-dev=0.4.0-4 libzmq3-dev=4.0.4+dfsg-2ubuntu0.1 make=3.81-8.2ubuntu3 nano=2.2.6-1ubuntu1 pkg-config=0.26-1ubuntu4 software-properties-common=0.92.37.8 unzip=6.0-9ubuntu1.5 wget=1.15-1ubuntu1.14.04.5 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 qt5-default=5.2.1+dfsg-1ubuntu14.3 libvtk6-dev=6.0.0-6 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 -y\n#   Install miniconda to /opt/miniconda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh\nRUN /bin/bash Miniconda-latest-Linux-x86_64.sh -p $CONDA_ENV_PATH -b\nRUN rm Miniconda-latest-Linux-x86_64.sh\nENV PATH=\"$CONDA_ENV_PATH/bin:${PATH}\"\nRUN conda update --quiet --yes conda\nENV PATH=\"${CONDA_ENV_PATH}/bin:$PATH\"\n#   Creating Anaconda environment\nRUN conda create -y --name $MYCONDA_ENV python=${PYTHON_VERSION}\n#   Install Python 3 packages\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV 'beautifulsoup4=4.5*' 'hdf5=1.8.17' 'h5py=2.7*' 'ipython=5.1*' 'ipykernel=4.5*' 'ipywidgets=5.2*' 'jupyter=1.0*' 'lxml=3.8*' 'matplotlib=2.0*' 'notebook=4.3*' 'numpy=1.12*' 'pandas=0.20*' 'pillow=4.2*' 'pip=9.0*' 'python=3.5*' 'rpy2=2.8*' 'scipy=0.19*' 'scikit-learn=0.19*' 'scikit-image=0.13*' 'setuptools=36.3*' 'six=1.10*' 'sphinx=1.5*' 'spyder=3.1*' \\\n && conda clean -tipsy\n#   Some R dependencies\nRUN conda install -c conda-forge -n $MYCONDA_ENV r-r.utils r-lme4 r-nlme\n#   Install TensorFlow\nRUN conda install -c conda-forge -n $MYCONDA_ENV tensorflow=${TENSORFLOW_VERSION}\n#   Install Keras\nENV KERAS_BACKEND=\"tensorflow\"\nRUN conda install -c conda-forge -n $MYCONDA_ENV keras=${KERAS_VERSION}\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN conda info --envs\nRUN sed -i 's/theano/tensorflow/g' ${CONDA_ENV_PATH}/envs/${MYCONDA_ENV}/etc/conda/activate.d/keras_activate.sh\n#   Visualization tools\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV graphviz=2.38.0 pydotplus=2.0.2\nRUN $CONDA_ACTIVATE \\\n && pip install pip==23.1 --upgrade \\\n && pip install git+git://github.com/stared/keras-sequential-ascii.git pydot3==1.0.9\n#  ###################\n#  # Running tests ###\n#  ###################\nENV HOME=\"/sharedfolder\"\nWORKDIR /sharedfolder\n#   Add a notebook profile.\nRUN mkdir -p -m 700 /sharedfolder/.jupyter/ \\\n && echo \"c.NotebookApp.ip = '*'\" echo \"c.NotebookApp.port = 8888\" echo \"c.NotebookApp.open_browser = False\" echo \"c.MultiKernelManager.default_kernel_name = 'python3'\" echo \"c.NotebookApp.allow_root = True\" echo \"c.NotebookApp.password_required = False\" echo \"c.NotebookApp.token = ''\" >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py\n#   Expose Ports for TensorBoard (6006), Ipython (8888)\nEXPOSE 6006/tcp 8888/tcp\nCMD [\"source\", \"activate\", \"deeplearn\", \"&&\", \"/bin/bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Fernando Andreotti <fernando.andreotti@eng.ox.ac.uk>\n#  Versions used for some packages\nARG CONDA_VERSION=4.3.1\nARG CONDA_ENV\nARG TENSORFLOW_VERSION=1.0*\nARG KERAS_VERSION=2.0.2\nARG PYTHON_VERSION=3.5\nENTRYPOINT [\"/bin/bash\", \"-c\"]\nUSER root\n#  Install some dependencies\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CONDA_ENV_PATH=\"/opt/miniconda\"\nENV MYCONDA_ENV=\"\\\"deeplearn\\\"\"\nENV CONDA_ACTIVATE=\"\\\"source $CONDA_ENV_PATH/bin/activate $MYCONDA_ENV\\\"\"\nRUN apt-get update --fix-missing -qq \\\n && apt-get install --no-install-recommends autoconf automake bc build-essential bzip2 cmake curl g++ gfortran git language-pack-en libatlas-dev libatlas3gf-base libcurl4-openssl-dev libffi-dev libfreetype6-dev libglib2.0-0 libhdf5-dev liblcms2-dev libopenblas-dev libssl-dev libtiff5-dev libtool libwebp-dev libzmq3-dev make nano pkg-config software-properties-common unzip wget zlib1g-dev qt5-default libvtk6-dev zlib1g-dev -y\n#  Install miniconda to /opt/miniconda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh\nRUN /bin/bash Miniconda-latest-Linux-x86_64.sh -p $CONDA_ENV_PATH -b\nRUN rm Miniconda-latest-Linux-x86_64.sh\nENV PATH=\"$CONDA_ENV_PATH/bin:${PATH}\"\nRUN conda update --quiet --yes conda\nENV PATH=\"${CONDA_ENV_PATH}/bin:$PATH\"\n#  Creating Anaconda environment\nRUN conda create -y --name $MYCONDA_ENV python=${PYTHON_VERSION}\n#  Install Python 3 packages\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV 'beautifulsoup4=4.5*' 'hdf5=1.8.17' 'h5py=2.7*' 'ipython=5.1*' 'ipykernel=4.5*' 'ipywidgets=5.2*' 'jupyter=1.0*' 'lxml=3.8*' 'matplotlib=2.0*' 'notebook=4.3*' 'numpy=1.12*' 'pandas=0.20*' 'pillow=4.2*' 'pip=9.0*' 'python=3.5*' 'rpy2=2.8*' 'scipy=0.19*' 'scikit-learn=0.19*' 'scikit-image=0.13*' 'setuptools=36.3*' 'six=1.10*' 'sphinx=1.5*' 'spyder=3.1*' \\\n && conda clean -tipsy\n#  Some R dependencies\nRUN conda install -c conda-forge -n $MYCONDA_ENV r-r.utils r-lme4 r-nlme\n#  Install TensorFlow\nRUN conda install -c conda-forge -n $MYCONDA_ENV tensorflow=${TENSORFLOW_VERSION}\n#  Install Keras\nENV KERAS_BACKEND=\"tensorflow\"\nRUN conda install -c conda-forge -n $MYCONDA_ENV keras=${KERAS_VERSION}\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN conda info --envs\nRUN sed -i 's/theano/tensorflow/g' ${CONDA_ENV_PATH}/envs/${MYCONDA_ENV}/etc/conda/activate.d/keras_activate.sh\n#  Visualization tools\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV graphviz=2.38.0 pydotplus=2.0.2\nRUN $CONDA_ACTIVATE \\\n && pip install pip --upgrade \\\n && pip install git+git://github.com/stared/keras-sequential-ascii.git pydot3\n# ###################\n# # Running tests ###\n# ###################\nENV HOME=\"/sharedfolder\"\nWORKDIR /sharedfolder\n#  Add a notebook profile.\nRUN mkdir -p -m 700 /sharedfolder/.jupyter/ \\\n && echo \"c.NotebookApp.ip = '*'\" echo \"c.NotebookApp.port = 8888\" echo \"c.NotebookApp.open_browser = False\" echo \"c.MultiKernelManager.default_kernel_name = 'python3'\" echo \"c.NotebookApp.allow_root = True\" echo \"c.NotebookApp.password_required = False\" echo \"c.NotebookApp.token = ''\" >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py\n#  Expose Ports for TensorBoard (6006), Ipython (8888)\nEXPOSE 6006/tcp 8888/tcp\nCMD [\"source\", \"activate\", \"deeplearn\", \"&&\", \"/bin/bash\"]\n","injectedSmells":[],"originalDockerfileHash":"67c29edc1a5dc60b4e861eb3fe61c54a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Fernando Andreotti <fernando.andreotti@eng.ox.ac.uk>\n#   Versions used for some packages\nARG CONDA_VERSION=4.3.1\nARG CONDA_ENV\nARG TENSORFLOW_VERSION=1.0*\nARG KERAS_VERSION=2.0.2\nARG PYTHON_VERSION=3.5\nENTRYPOINT [\"/bin/bash\", \"-c\"]\nUSER root\n#   Install some dependencies\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV CONDA_ENV_PATH=\"/opt/miniconda\"\nENV MYCONDA_ENV=\"\\\"deeplearn\\\"\"\nENV CONDA_ACTIVATE=\"\\\"source $CONDA_ENV_PATH/bin/activate $MYCONDA_ENV\\\"\"\nRUN apt-get update --fix-missing -qq \\\n && apt-get install --no-install-recommends autoconf automake bc build-essential bzip2 cmake curl g++ gfortran git language-pack-en libatlas-dev libatlas3gf-base libcurl4-openssl-dev libffi-dev libfreetype6-dev libglib2.0-0 libhdf5-dev liblcms2-dev libopenblas-dev libssl-dev libtiff5-dev libtool libwebp-dev libzmq3-dev make nano pkg-config software-properties-common unzip wget zlib1g-dev qt5-default libvtk6-dev zlib1g-dev -y\n#   Install miniconda to /opt/miniconda\nRUN curl -LO http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh\nRUN /bin/bash Miniconda-latest-Linux-x86_64.sh -p $CONDA_ENV_PATH -b\nRUN rm Miniconda-latest-Linux-x86_64.sh\nENV PATH=\"$CONDA_ENV_PATH/bin:${PATH}\"\nRUN conda update --quiet --yes conda\nENV PATH=\"${CONDA_ENV_PATH}/bin:$PATH\"\n#   Creating Anaconda environment\nRUN conda create -y --name $MYCONDA_ENV python=${PYTHON_VERSION}\n#   Install Python 3 packages\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV 'beautifulsoup4=4.5*' 'hdf5=1.8.17' 'h5py=2.7*' 'ipython=5.1*' 'ipykernel=4.5*' 'ipywidgets=5.2*' 'jupyter=1.0*' 'lxml=3.8*' 'matplotlib=2.0*' 'notebook=4.3*' 'numpy=1.12*' 'pandas=0.20*' 'pillow=4.2*' 'pip=9.0*' 'python=3.5*' 'rpy2=2.8*' 'scipy=0.19*' 'scikit-learn=0.19*' 'scikit-image=0.13*' 'setuptools=36.3*' 'six=1.10*' 'sphinx=1.5*' 'spyder=3.1*' \\\n && conda clean -tipsy\n#   Some R dependencies\nRUN conda install -c conda-forge -n $MYCONDA_ENV r-r.utils r-lme4 r-nlme\n#   Install TensorFlow\nRUN conda install -c conda-forge -n $MYCONDA_ENV tensorflow=${TENSORFLOW_VERSION}\n#   Install Keras\nENV KERAS_BACKEND=\"tensorflow\"\nRUN conda install -c conda-forge -n $MYCONDA_ENV keras=${KERAS_VERSION}\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN conda info --envs\nRUN sed -i 's/theano/tensorflow/g' ${CONDA_ENV_PATH}/envs/${MYCONDA_ENV}/etc/conda/activate.d/keras_activate.sh\n#   Visualization tools\nRUN conda install -c conda-forge -y -n $MYCONDA_ENV graphviz=2.38.0 pydotplus=2.0.2\nRUN $CONDA_ACTIVATE \\\n && pip install pip --upgrade \\\n && pip install git+git://github.com/stared/keras-sequential-ascii.git pydot3\n#  ###################\n#  # Running tests ###\n#  ###################\nENV HOME=\"/sharedfolder\"\nWORKDIR /sharedfolder\n#   Add a notebook profile.\nRUN mkdir -p -m 700 /sharedfolder/.jupyter/ \\\n && echo \"c.NotebookApp.ip = '*'\" echo \"c.NotebookApp.port = 8888\" echo \"c.NotebookApp.open_browser = False\" echo \"c.MultiKernelManager.default_kernel_name = 'python3'\" echo \"c.NotebookApp.allow_root = True\" echo \"c.NotebookApp.password_required = False\" echo \"c.NotebookApp.token = ''\" >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py >> /sharedfolder/.jupyter/jupyter_notebook_config.py\n#   Expose Ports for TensorBoard (6006), Ipython (8888)\nEXPOSE 6006/tcp 8888/tcp\nCMD [\"source\", \"activate\", \"deeplearn\", \"&&\", \"/bin/bash\"]\n","originalDockerfileUglifiedHash":"da8c87780a90e0f1615a91a2449897d0","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3585ae64a44405826693b59e85b2f463cc490acd.dockerfile"}