{"seed":196813951,"processedDockerfileHash":"8bd7a8c733d3c1d7589ca94f4fce3b1f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:16.04\n#   FROM arm=armhf/ubuntu:16.04\nARG DAPPER_HOST_ARCH\nENV HOST_ARCH=\"${DAPPER_HOST_ARCH}\" \\\n    ARCH=\"${DAPPER_HOST_ARCH}\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends pkg-config=0.29.1-0ubuntu1 -y\nRUN apt-get update \\\n && apt-get install --no-install-recommends gcc=4:5.3.1-1ubuntu1 make=4.1-6 ca-certificates=20210119~16.04.1 git=1:2.7.4-0ubuntu1.10 wget=1.17.1-1ubuntu1.5 curl=7.47.0-1ubuntu2.19 vim=2:7.4.1689-3ubuntu1.5 less=481-2.1ubuntu0.2 file=1:5.25-2ubuntu1.4 -y \\\n && rm -f /bin/sh \\\n && ln -s /bin/bash /bin/sh\nENV GOLANG_ARCH_amd64=\"amd64\" \\\n    GOLANG_ARCH_arm=\"armv6l\" \\\n    GOLANG_ARCH=\"GOLANG_ARCH_${ARCH}\" \\\n    GOPATH=\"/go\" \\\n    PATH=\"/go/bin:/usr/local/go/bin:${PATH}\" \\\n    SHELL=\"/bin/bash\"\nRUN wget -O - https://storage.googleapis.com/golang/go1.7.1.linux-${!GOLANG_ARCH}.tar.gz | tar -xzf - -C /usr/local \\\n && go get github.com/rancher/trash \\\n && go get github.com/golang/lint/golint\nENV DOCKER_URL_amd64=\"https://get.docker.com/builds/Linux/x86_64/docker-1.10.3\" \\\n    DOCKER_URL_arm=\"https://github.com/rancher/docker/releases/download/v1.10.3-ros1/docker-1.10.3_arm\" \\\n    DOCKER_URL=\"DOCKER_URL_${ARCH}\"\nRUN wget -O - ${!DOCKER_URL} > /usr/bin/docker \\\n && chmod +x /usr/bin/docker\nRUN curl -sL ftp://xmlsoft.org/libxml2/libxml2-2.9.4.tar.gz | tar -xzf - \\\n && cd /libxml2-2.9.4 \\\n && ./configure --enable-static --disable-shared --without-gnu-ld --with-c14n --without-catalog --without-debug --without-docbook --without-fexceptions --without-ftp --without-history --without-html --without-http --without-iconv --without-icu --without-iso8859x --without-legacy --without-mem-debug --without-minimum --with-output --without-pattern --with-push --without-python --without-reader --without-readline --without-regexps --without-run-debug --with-sax1 --without-schemas --without-schematron --without-threads --without-thread-alloc --with-tree --without-valid --without-writer --without-xinclude --without-xpath --with-xptr --without-modules --without-zlib --without-lzma --without-coverage \\\n && make install\nRUN curl -f -sL https://www.openssl.org/source/openssl-1.0.2j.tar.gz | tar -xzf - \\\n && cd openssl-1.0.2j \\\n && ./config no-shared no-weak-ssl-ciphers no-ssl2 no-ssl3 no-comp no-idea no-dtls no-hw no-threads no-dso \\\n && make depend install\nRUN curl -f -sL https://www.aleksey.com/xmlsec/download/xmlsec1-1.2.22.tar.gz | tar -xzf - \\\n && cd xmlsec1-1.2.22 \\\n && ./configure --enable-static --disable-shared --disable-crypto-dl --disable-apps-crypto-dl --enable-static-linking --without-gnu-ld --with-default-crypto=openssl --with-openssl=/usr/local/ssl --with-libxml=/usr/local --without-nss --without-nspr --without-gcrypt --without-gnutls --without-libxslt \\\n && make -C src install \\\n && make -C include install \\\n && make install-pkgconfigDATA\nENV DAPPER_SOURCE=\"/go/src/github.com/rancher/rancher-auth-service/\"\nENV DAPPER_OUTPUT=\"./bin ./dist\"\nENV DAPPER_DOCKER_SOCKET=\"true\"\nENV TRASH_CACHE=\"${DAPPER_SOURCE}/.trash-cache\"\nENV HOME=\"${DAPPER_SOURCE}\"\nWORKDIR ${DAPPER_SOURCE}\nENTRYPOINT [\"./scripts/entry\"]\nCMD [\"ci\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\n#  FROM arm=armhf/ubuntu:16.04\nARG DAPPER_HOST_ARCH\nENV HOST_ARCH=\"${DAPPER_HOST_ARCH}\" \\\n    ARCH=\"${DAPPER_HOST_ARCH}\"\nRUN apt-get update \\\n && apt-get install pkg-config -y\nRUN apt-get update \\\n && apt-get install gcc make ca-certificates git wget curl vim less file -y \\\n && rm -f /bin/sh \\\n && ln -s /bin/bash /bin/sh\nENV GOLANG_ARCH_amd64=\"amd64\" \\\n    GOLANG_ARCH_arm=\"armv6l\" \\\n    GOLANG_ARCH=\"GOLANG_ARCH_${ARCH}\" \\\n    GOPATH=\"/go\" \\\n    PATH=\"/go/bin:/usr/local/go/bin:${PATH}\" \\\n    SHELL=\"/bin/bash\"\nRUN wget -O - https://storage.googleapis.com/golang/go1.7.1.linux-${!GOLANG_ARCH}.tar.gz | tar -xzf - -C /usr/local \\\n && go get github.com/rancher/trash \\\n && go get github.com/golang/lint/golint\nENV DOCKER_URL_amd64=\"https://get.docker.com/builds/Linux/x86_64/docker-1.10.3\" \\\n    DOCKER_URL_arm=\"https://github.com/rancher/docker/releases/download/v1.10.3-ros1/docker-1.10.3_arm\" \\\n    DOCKER_URL=\"DOCKER_URL_${ARCH}\"\nRUN wget -O - ${!DOCKER_URL} > /usr/bin/docker \\\n && chmod +x /usr/bin/docker\nRUN curl -sL ftp://xmlsoft.org/libxml2/libxml2-2.9.4.tar.gz | tar -xzf - \\\n && cd /libxml2-2.9.4 \\\n && ./configure --enable-static --disable-shared --without-gnu-ld --with-c14n --without-catalog --without-debug --without-docbook --without-fexceptions --without-ftp --without-history --without-html --without-http --without-iconv --without-icu --without-iso8859x --without-legacy --without-mem-debug --without-minimum --with-output --without-pattern --with-push --without-python --without-reader --without-readline --without-regexps --without-run-debug --with-sax1 --without-schemas --without-schematron --without-threads --without-thread-alloc --with-tree --without-valid --without-writer --without-xinclude --without-xpath --with-xptr --without-modules --without-zlib --without-lzma --without-coverage \\\n && make install\nRUN curl -f -sL https://www.openssl.org/source/openssl-1.0.2j.tar.gz | tar -xzf - \\\n && cd openssl-1.0.2j \\\n && ./config no-shared no-weak-ssl-ciphers no-ssl2 no-ssl3 no-comp no-idea no-dtls no-hw no-threads no-dso \\\n && make depend install\nRUN curl -f -sL https://www.aleksey.com/xmlsec/download/xmlsec1-1.2.22.tar.gz | tar -xzf - \\\n && cd xmlsec1-1.2.22 \\\n && ./configure --enable-static --disable-shared --disable-crypto-dl --disable-apps-crypto-dl --enable-static-linking --without-gnu-ld --with-default-crypto=openssl --with-openssl=/usr/local/ssl --with-libxml=/usr/local --without-nss --without-nspr --without-gcrypt --without-gnutls --without-libxslt \\\n && make -C src install \\\n && make -C include install \\\n && make install-pkgconfigDATA\nENV DAPPER_SOURCE=\"/go/src/github.com/rancher/rancher-auth-service/\"\nENV DAPPER_OUTPUT=\"./bin ./dist\"\nENV DAPPER_DOCKER_SOCKET=\"true\"\nENV TRASH_CACHE=\"${DAPPER_SOURCE}/.trash-cache\"\nENV HOME=\"${DAPPER_SOURCE}\"\nWORKDIR ${DAPPER_SOURCE}\nENTRYPOINT [\"./scripts/entry\"]\nCMD [\"ci\"]\n","injectedSmells":[],"originalDockerfileHash":"bb1a876dfb99af47be1b9cd10bbb247f","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\n#   FROM arm=armhf/ubuntu:16.04\nARG DAPPER_HOST_ARCH\nENV HOST_ARCH=\"${DAPPER_HOST_ARCH}\" \\\n    ARCH=\"${DAPPER_HOST_ARCH}\"\nRUN apt-get update \\\n && apt-get install pkg-config -y\nRUN apt-get update \\\n && apt-get install gcc make ca-certificates git wget curl vim less file -y \\\n && rm -f /bin/sh \\\n && ln -s /bin/bash /bin/sh\nENV GOLANG_ARCH_amd64=\"amd64\" \\\n    GOLANG_ARCH_arm=\"armv6l\" \\\n    GOLANG_ARCH=\"GOLANG_ARCH_${ARCH}\" \\\n    GOPATH=\"/go\" \\\n    PATH=\"/go/bin:/usr/local/go/bin:${PATH}\" \\\n    SHELL=\"/bin/bash\"\nRUN wget -O - https://storage.googleapis.com/golang/go1.7.1.linux-${!GOLANG_ARCH}.tar.gz | tar -xzf - -C /usr/local \\\n && go get github.com/rancher/trash \\\n && go get github.com/golang/lint/golint\nENV DOCKER_URL_amd64=\"https://get.docker.com/builds/Linux/x86_64/docker-1.10.3\" \\\n    DOCKER_URL_arm=\"https://github.com/rancher/docker/releases/download/v1.10.3-ros1/docker-1.10.3_arm\" \\\n    DOCKER_URL=\"DOCKER_URL_${ARCH}\"\nRUN wget -O - ${!DOCKER_URL} > /usr/bin/docker \\\n && chmod +x /usr/bin/docker\nRUN curl -sL ftp://xmlsoft.org/libxml2/libxml2-2.9.4.tar.gz | tar -xzf - \\\n && cd /libxml2-2.9.4 \\\n && ./configure --enable-static --disable-shared --without-gnu-ld --with-c14n --without-catalog --without-debug --without-docbook --without-fexceptions --without-ftp --without-history --without-html --without-http --without-iconv --without-icu --without-iso8859x --without-legacy --without-mem-debug --without-minimum --with-output --without-pattern --with-push --without-python --without-reader --without-readline --without-regexps --without-run-debug --with-sax1 --without-schemas --without-schematron --without-threads --without-thread-alloc --with-tree --without-valid --without-writer --without-xinclude --without-xpath --with-xptr --without-modules --without-zlib --without-lzma --without-coverage \\\n && make install\nRUN curl -f -sL https://www.openssl.org/source/openssl-1.0.2j.tar.gz | tar -xzf - \\\n && cd openssl-1.0.2j \\\n && ./config no-shared no-weak-ssl-ciphers no-ssl2 no-ssl3 no-comp no-idea no-dtls no-hw no-threads no-dso \\\n && make depend install\nRUN curl -f -sL https://www.aleksey.com/xmlsec/download/xmlsec1-1.2.22.tar.gz | tar -xzf - \\\n && cd xmlsec1-1.2.22 \\\n && ./configure --enable-static --disable-shared --disable-crypto-dl --disable-apps-crypto-dl --enable-static-linking --without-gnu-ld --with-default-crypto=openssl --with-openssl=/usr/local/ssl --with-libxml=/usr/local --without-nss --without-nspr --without-gcrypt --without-gnutls --without-libxslt \\\n && make -C src install \\\n && make -C include install \\\n && make install-pkgconfigDATA\nENV DAPPER_SOURCE=\"/go/src/github.com/rancher/rancher-auth-service/\"\nENV DAPPER_OUTPUT=\"./bin ./dist\"\nENV DAPPER_DOCKER_SOCKET=\"true\"\nENV TRASH_CACHE=\"${DAPPER_SOURCE}/.trash-cache\"\nENV HOME=\"${DAPPER_SOURCE}\"\nWORKDIR ${DAPPER_SOURCE}\nENTRYPOINT [\"./scripts/entry\"]\nCMD [\"ci\"]\n","originalDockerfileUglifiedHash":"88ce24966f1dc52221bfc862389835ba","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f42047a152cfe7e4d8e11f07136e061fafcea872.dockerfile"}