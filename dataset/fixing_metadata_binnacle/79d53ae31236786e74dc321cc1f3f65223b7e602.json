{"seed":1207200039,"processedDockerfileHash":"60d250bc0094c87075cbd85dc51e7e70","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright (c) 2018, 2019 IBM Corp. and others\n#\n#   This program and the accompanying materials are made available under\n#   the terms of the Eclipse Public License 2.0 which accompanies this\n#   distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n#   or the Apache License, Version 2.0 which accompanies this distribution and\n#   is available at https://www.apache.org/licenses/LICENSE-2.0.\n#\n#   This Source Code may also be made available under the following\n#   Secondary Licenses when the conditions for such availability set\n#   forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n#   General Public License, version 2 with the GNU Classpath\n#   Exception [1] and GNU General Public License, version 2 with the\n#   OpenJDK Assembly Exception [2].\n#\n#   [1] https://www.gnu.org/software/classpath/license.html\n#   [2] http://openjdk.java.net/legal/assembly-exception.html\n#\n#   SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\nFROM ubuntu:16.04\n#   Install required OS tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf=2.69-9 ca-certificates=20210119~16.04.1 ccache=3.2.4-1 cmake=3.5.1-1ubuntu3 cpio=2.11+dfsg-5ubuntu1.1 file=1:5.25-2ubuntu1.4 g++-4.8=4.8.5-4ubuntu2 gcc-4.8=4.8.5-4ubuntu2 git=1:2.7.4-0ubuntu1.10 git-core=1:2.7.4-0ubuntu1.10 libasound2-dev=1.1.0-0ubuntu1 libcups2-dev=2.1.3-4ubuntu0.11 libdwarf-dev=20120410-2+deb7u2build0.16.04.1 libelf-dev=0.165-3ubuntu1.2 libfontconfig1-dev=2.11.94-0ubuntu1.1 libfreetype6-dev=2.6.1-0.1ubuntu2.5 libnuma-dev=2.0.11-1ubuntu1.1 libx11-dev=2:1.6.3-1ubuntu2.2 libxext-dev=2:1.3.3-1 libxrender-dev=1:0.9.9-0ubuntu1 libxt-dev=1:1.1.5-0ubuntu1 libxtst-dev=2:1.2.2-1 make=4.1-6 pkg-config=0.29.1-0ubuntu1 qemu=1:2.5+dfsg-5ubuntu10.51 realpath=8.25-2ubuntu3~16.04 ssh=1:7.2p2-4ubuntu2.10 unzip=6.0-20ubuntu1.1 vim-tiny=2:7.4.1689-3ubuntu1.5 wget=1.17.1-1ubuntu1.5 zip=3.0-11 -qq -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Create links for c++,g++,cc,gcc\nRUN ln -s g++ /usr/bin/c++ \\\n && ln -s g++-4.8 /usr/bin/g++ \\\n && ln -s gcc /usr/bin/cc \\\n && ln -s gcc-4.8 /usr/bin/gcc\n#   Download and setup freemarker.jar to /root/freemarker.jar\nRUN cd /root \\\n && wget https://sourceforge.net/projects/freemarker/files/freemarker/2.3.8/freemarker-2.3.8.tar.gz/download -O freemarker.tgz \\\n && tar -xzf freemarker.tgz freemarker-2.3.8/lib/freemarker.jar --strip=2 \\\n && rm -f freemarker.tgz\n#   Download and install boot JDK from AdoptOpenJDK\nRUN cd /root \\\n && wget -O bootjdk9.tar.gz https://api.adoptopenjdk.net/openjdk9-openj9/releases/x64_linux/latest/binary \\\n && tar -xzf bootjdk9.tar.gz \\\n && rm -f bootjdk9.tar.gz \\\n && ls | grep -i jdk | xargs -I % sh -c 'mv % bootjdk9'\n#   get the toolchain\nRUN cd /root \\\n && wget https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabihf/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && tar xf gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && rm gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz\n#   Get the debs for native libraries on the target platform\n#   These were current releases in stretch as of Nov 2017\n#   We might need older libraries for older OS releases, and presumably at\n#   some point we might need to update to newer ones.\n#   Libraries can be found through https://www.debian.org/distrib/packages\n#   TODO Mirror site should be configurable.\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2_1.1.3-5_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2-dev_1.1.3-5_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/c/cups/libcups2-dev_2.2.1-8%2bdeb9u1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/c/cups/libcupsimage2-dev_2.2.1-8%2bdeb9u1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/d/dwarfutils/libdwarf-dev_20161124-1+deb9u1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/f/fontconfig/libfontconfig1-dev_2.11.0-6.7+b1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6_2.6.3-3.2_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6-dev_2.6.3-3.2_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libi/libice/libice-dev_1.0.9-2_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng16-16_1.6.28-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng-dev_1.6.28-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libs/libsm/libsm-dev_1.2.2-1+b3_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-6_1.6.4-3_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-dev_1.6.4-3_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext6_1.3.3-1+b2_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext-dev_1.3.3-1+b2_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi6_1.7.9-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi-dev_1.7.9-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender1_0.9.10-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender-dev_0.9.10-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxt/libxt-dev_1.1.5-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst6_1.2.3-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst-dev_1.2.3-1_armhf.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/x/x11proto-core/x11proto-core-dev_7.0.31-1_all.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/x/x11proto-input/x11proto-input-dev_2.3.2-1_all.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/x/x11proto-kb/x11proto-kb-dev_1.0.7-1_all.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/x/x11proto-render/x11proto-render-dev_0.11.1-2_all.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/x/x11proto-xext/x11proto-xext-dev_7.3.0-1_all.deb\nRUN which wget &> /dev/null || apt-get install --no-install-recommends wget=1.20.3 ; wget --no-verbose --output-document /root/debs/ http://ftp.us.debian.org/debian/pool/main/z/zlib/zlib1g_1.2.8.dfsg-5_armhf.deb\n#   unpack debs into toolchain libc dir\nRUN cd /root/debs \\\n && for f in *.deb; do dpkg-deb -x $f . ; done \\\n && cp -r usr/include/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/include/ \\\n && cp -r usr/lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/lib/ \\\n && cp lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/lib/ \\\n && rm -rf /root/debs\n#   Env vars set here will be visible in the running container, so can be\n#   used to convey configuration information to the build scripts.\n#   Set environment variable JAVA_HOME, and prepend ${JAVA_HOME}/bin to PATH\nENV JAVA_HOME=\"/root/bootjdk9\"\nENV PATH=\"${JAVA_HOME}/bin:${PATH}\"\n#   Directory containing the cross compilation tool chain\nENV OPENJ9_CC_DIR=\"/root/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf\"\n#   Prefix for the cross compilation tools (without the trailing '-')\nENV OPENJ9_CC_PREFIX=\"arm-linux-gnueabihf\"\n#   Add the toolchain bin dir to the PATH for convenience\nENV PATH=\"${PATH}:${OPENJ9_CC_DIR}/bin\"\nWORKDIR /root\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright (c) 2018, 2019 IBM Corp. and others\n#\n#  This program and the accompanying materials are made available under\n#  the terms of the Eclipse Public License 2.0 which accompanies this\n#  distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n#  or the Apache License, Version 2.0 which accompanies this distribution and\n#  is available at https://www.apache.org/licenses/LICENSE-2.0.\n#\n#  This Source Code may also be made available under the following\n#  Secondary Licenses when the conditions for such availability set\n#  forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n#  General Public License, version 2 with the GNU Classpath\n#  Exception [1] and GNU General Public License, version 2 with the\n#  OpenJDK Assembly Exception [2].\n#\n#  [1] https://www.gnu.org/software/classpath/license.html\n#  [2] http://openjdk.java.net/legal/assembly-exception.html\n#\n#  SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\nFROM ubuntu:16.04\n#  Install required OS tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf ca-certificates ccache cmake cpio file g++-4.8 gcc-4.8 git git-core libasound2-dev libcups2-dev libdwarf-dev libelf-dev libfontconfig1-dev libfreetype6-dev libnuma-dev libx11-dev libxext-dev libxrender-dev libxt-dev libxtst-dev make pkg-config qemu realpath ssh unzip vim-tiny wget zip -qq -y \\\n && rm -rf /var/lib/apt/lists/*\n#  Create links for c++,g++,cc,gcc\nRUN ln -s g++ /usr/bin/c++ \\\n && ln -s g++-4.8 /usr/bin/g++ \\\n && ln -s gcc /usr/bin/cc \\\n && ln -s gcc-4.8 /usr/bin/gcc\n#  Download and setup freemarker.jar to /root/freemarker.jar\nRUN cd /root \\\n && wget https://sourceforge.net/projects/freemarker/files/freemarker/2.3.8/freemarker-2.3.8.tar.gz/download -O freemarker.tgz \\\n && tar -xzf freemarker.tgz freemarker-2.3.8/lib/freemarker.jar --strip=2 \\\n && rm -f freemarker.tgz\n#  Download and install boot JDK from AdoptOpenJDK\nRUN cd /root \\\n && wget -O bootjdk9.tar.gz https://api.adoptopenjdk.net/openjdk9-openj9/releases/x64_linux/latest/binary \\\n && tar -xzf bootjdk9.tar.gz \\\n && rm -f bootjdk9.tar.gz \\\n && ls | grep -i jdk | xargs -I % sh -c 'mv % bootjdk9'\n#  get the toolchain\nRUN cd /root \\\n && wget https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabihf/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && tar xf gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && rm gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz\n#  Get the debs for native libraries on the target platform\n#  These were current releases in stretch as of Nov 2017\n#  We might need older libraries for older OS releases, and presumably at\n#  some point we might need to update to newer ones.\n#  Libraries can be found through https://www.debian.org/distrib/packages\n#  TODO Mirror site should be configurable.\nADD http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2_1.1.3-5_armhf.deb http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2-dev_1.1.3-5_armhf.deb http://ftp.us.debian.org/debian/pool/main/c/cups/libcups2-dev_2.2.1-8%2bdeb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/c/cups/libcupsimage2-dev_2.2.1-8%2bdeb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/d/dwarfutils/libdwarf-dev_20161124-1+deb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/fontconfig/libfontconfig1-dev_2.11.0-6.7+b1_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6_2.6.3-3.2_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6-dev_2.6.3-3.2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libi/libice/libice-dev_1.0.9-2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng16-16_1.6.28-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng-dev_1.6.28-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libs/libsm/libsm-dev_1.2.2-1+b3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-6_1.6.4-3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-dev_1.6.4-3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext6_1.3.3-1+b2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext-dev_1.3.3-1+b2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi6_1.7.9-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi-dev_1.7.9-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender1_0.9.10-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender-dev_0.9.10-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxt/libxt-dev_1.1.5-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst6_1.2.3-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst-dev_1.2.3-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-core/x11proto-core-dev_7.0.31-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-input/x11proto-input-dev_2.3.2-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-kb/x11proto-kb-dev_1.0.7-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-render/x11proto-render-dev_0.11.1-2_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-xext/x11proto-xext-dev_7.3.0-1_all.deb http://ftp.us.debian.org/debian/pool/main/z/zlib/zlib1g_1.2.8.dfsg-5_armhf.deb /root/debs/\n#  unpack debs into toolchain libc dir\nRUN cd /root/debs \\\n && for f in *.deb; do dpkg-deb -x $f . ; done \\\n && cp -r usr/include/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/include/ \\\n && cp -r usr/lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/lib/ \\\n && cp lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/lib/ \\\n && rm -rf /root/debs\n#  Env vars set here will be visible in the running container, so can be\n#  used to convey configuration information to the build scripts.\n#  Set environment variable JAVA_HOME, and prepend ${JAVA_HOME}/bin to PATH\nENV JAVA_HOME=\"/root/bootjdk9\"\nENV PATH=\"${JAVA_HOME}/bin:${PATH}\"\n#  Directory containing the cross compilation tool chain\nENV OPENJ9_CC_DIR=\"/root/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf\"\n#  Prefix for the cross compilation tools (without the trailing '-')\nENV OPENJ9_CC_PREFIX=\"arm-linux-gnueabihf\"\n#  Add the toolchain bin dir to the PATH for convenience\nENV PATH=\"${PATH}:${OPENJ9_CC_DIR}/bin\"\nWORKDIR /root\n","injectedSmells":[],"originalDockerfileHash":"bcb3f575c32a8efa57e5534847f46927","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright (c) 2018, 2019 IBM Corp. and others\n#\n#   This program and the accompanying materials are made available under\n#   the terms of the Eclipse Public License 2.0 which accompanies this\n#   distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n#   or the Apache License, Version 2.0 which accompanies this distribution and\n#   is available at https://www.apache.org/licenses/LICENSE-2.0.\n#\n#   This Source Code may also be made available under the following\n#   Secondary Licenses when the conditions for such availability set\n#   forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n#   General Public License, version 2 with the GNU Classpath\n#   Exception [1] and GNU General Public License, version 2 with the\n#   OpenJDK Assembly Exception [2].\n#\n#   [1] https://www.gnu.org/software/classpath/license.html\n#   [2] http://openjdk.java.net/legal/assembly-exception.html\n#\n#   SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\nFROM ubuntu:16.04\n#   Install required OS tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf ca-certificates ccache cmake cpio file g++-4.8 gcc-4.8 git git-core libasound2-dev libcups2-dev libdwarf-dev libelf-dev libfontconfig1-dev libfreetype6-dev libnuma-dev libx11-dev libxext-dev libxrender-dev libxt-dev libxtst-dev make pkg-config qemu realpath ssh unzip vim-tiny wget zip -qq -y \\\n && rm -rf /var/lib/apt/lists/*\n#   Create links for c++,g++,cc,gcc\nRUN ln -s g++ /usr/bin/c++ \\\n && ln -s g++-4.8 /usr/bin/g++ \\\n && ln -s gcc /usr/bin/cc \\\n && ln -s gcc-4.8 /usr/bin/gcc\n#   Download and setup freemarker.jar to /root/freemarker.jar\nRUN cd /root \\\n && wget https://sourceforge.net/projects/freemarker/files/freemarker/2.3.8/freemarker-2.3.8.tar.gz/download -O freemarker.tgz \\\n && tar -xzf freemarker.tgz freemarker-2.3.8/lib/freemarker.jar --strip=2 \\\n && rm -f freemarker.tgz\n#   Download and install boot JDK from AdoptOpenJDK\nRUN cd /root \\\n && wget -O bootjdk9.tar.gz https://api.adoptopenjdk.net/openjdk9-openj9/releases/x64_linux/latest/binary \\\n && tar -xzf bootjdk9.tar.gz \\\n && rm -f bootjdk9.tar.gz \\\n && ls | grep -i jdk | xargs -I % sh -c 'mv % bootjdk9'\n#   get the toolchain\nRUN cd /root \\\n && wget https://releases.linaro.org/components/toolchain/binaries/4.9-2017.01/arm-linux-gnueabihf/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && tar xf gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz \\\n && rm gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf.tar.xz\n#   Get the debs for native libraries on the target platform\n#   These were current releases in stretch as of Nov 2017\n#   We might need older libraries for older OS releases, and presumably at\n#   some point we might need to update to newer ones.\n#   Libraries can be found through https://www.debian.org/distrib/packages\n#   TODO Mirror site should be configurable.\nADD http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2_1.1.3-5_armhf.deb http://ftp.us.debian.org/debian/pool/main/a/alsa-lib/libasound2-dev_1.1.3-5_armhf.deb http://ftp.us.debian.org/debian/pool/main/c/cups/libcups2-dev_2.2.1-8%2bdeb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/c/cups/libcupsimage2-dev_2.2.1-8%2bdeb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/d/dwarfutils/libdwarf-dev_20161124-1+deb9u1_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/fontconfig/libfontconfig1-dev_2.11.0-6.7+b1_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6_2.6.3-3.2_armhf.deb http://ftp.us.debian.org/debian/pool/main/f/freetype/libfreetype6-dev_2.6.3-3.2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libi/libice/libice-dev_1.0.9-2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng16-16_1.6.28-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libp/libpng1.6/libpng-dev_1.6.28-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libs/libsm/libsm-dev_1.2.2-1+b3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-6_1.6.4-3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libx11/libx11-dev_1.6.4-3_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext6_1.3.3-1+b2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxext/libxext-dev_1.3.3-1+b2_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi6_1.7.9-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxi/libxi-dev_1.7.9-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender1_0.9.10-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxrender/libxrender-dev_0.9.10-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxt/libxt-dev_1.1.5-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst6_1.2.3-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/libx/libxtst/libxtst-dev_1.2.3-1_armhf.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-core/x11proto-core-dev_7.0.31-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-input/x11proto-input-dev_2.3.2-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-kb/x11proto-kb-dev_1.0.7-1_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-render/x11proto-render-dev_0.11.1-2_all.deb http://ftp.us.debian.org/debian/pool/main/x/x11proto-xext/x11proto-xext-dev_7.3.0-1_all.deb http://ftp.us.debian.org/debian/pool/main/z/zlib/zlib1g_1.2.8.dfsg-5_armhf.deb /root/debs/\n#   unpack debs into toolchain libc dir\nRUN cd /root/debs \\\n && for f in *.deb; do dpkg-deb -x $f . ; done \\\n && cp -r usr/include/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/include/ \\\n && cp -r usr/lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/usr/lib/ \\\n && cp lib/arm-linux-gnueabihf/* ../gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/lib/ \\\n && rm -rf /root/debs\n#   Env vars set here will be visible in the running container, so can be\n#   used to convey configuration information to the build scripts.\n#   Set environment variable JAVA_HOME, and prepend ${JAVA_HOME}/bin to PATH\nENV JAVA_HOME=\"/root/bootjdk9\"\nENV PATH=\"${JAVA_HOME}/bin:${PATH}\"\n#   Directory containing the cross compilation tool chain\nENV OPENJ9_CC_DIR=\"/root/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabihf\"\n#   Prefix for the cross compilation tools (without the trailing '-')\nENV OPENJ9_CC_PREFIX=\"arm-linux-gnueabihf\"\n#   Add the toolchain bin dir to the PATH for convenience\nENV PATH=\"${PATH}:${OPENJ9_CC_DIR}/bin\"\nWORKDIR /root\n","originalDockerfileUglifiedHash":"c62d584b01082e936ff1970b5cdec0e6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/79d53ae31236786e74dc321cc1f3f65223b7e602.dockerfile"}