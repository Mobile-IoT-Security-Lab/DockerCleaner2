{"seed":3363781999,"processedDockerfileHash":"528b6bac0d30cdeb6bdaf87555ea633d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\nRUN apt-get update \\\n && apt-get install --no-install-recommends apache2-dev apache2-mpm-worker -y\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-maintainer-zts --with-apxs2\"\nENV GPG_KEYS=\"0BD78B5F97500D450838F95DFE857D9A90D90EC1 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3\"\nENV PHP_VERSION=\"5.6.19\"\nENV PHP_FILENAME=\"php-5.6.19.tar.xz\"\nENV PHP_SHA256=\"bb32337f93a00b71789f116bddafa8848139120e7fb6f4f98a84f52dbcb8329f\"\nENV PHP_XDEBUG_VERSION=\"2.4.0\"\nENV PHP_XDEBUG_FILENAME=\"xdebug.${PHP_XDEBUG_VERSION}.tgz\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_SHA256 *$PHP_FILENAME\" | sha256sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && mkdir -p /usr/src/php-xdebug \\\n && cd /usr/src/php-xdebug \\\n && curl -fSL \"https://xdebug.org/files/xdebug-${PHP_XDEBUG_VERSION}.tgz\" -o \"${PHP_XDEBUG_FILENAME}\" \\\n && tar -xf \"${PHP_XDEBUG_FILENAME}\" -C /usr/src/php-xdebug --strip-components=1 \\\n && rm \"${PHP_XDEBUG_FILENAME}\" \\\n && /usr/local/bin/phpize \\\n && ./configure --prefix=/usr --datadir=/data --docdir=/docs --enable-xdebug --with-php-config=/usr/local/bin/php-config \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && cd ~ \\\n && rm -rf /usr/src/php-xdebug \\\n && rm -rf /usr/src/php \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nENV APACHE_LOCK_DIR=\"/var/run\"\nENV APACHE_PID_FILE=\"${APACHE_LOCK_DIR}/apache2.pid\"\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log\"\nEXPOSE 80/tcp\nENV ASYNC_SOCKETS_ROOT=\"/async-sockets\"\nVOLUME [\"${ASYNC_SOCKETS_ROOT}/src\", \"${ASYNC_SOCKETS_ROOT}/vendor\", \"${ASYNC_SOCKETS_ROOT}/demos\"]\nCOPY conf/* /etc/apache2/conf-enabled/\nCOPY apache2.conf /etc/apache2/apache2.conf\nCOPY www/* /var/www/html/\nCOPY php.conf/*.ini ${PHP_INI_DIR}/conf.d/\nWORKDIR /var/www/html\n#  #CMD [\"ls\", \"-al\", \"/async-sockets/demos\"]\nCMD [\"apache2\", \"-DFOREGROUND\"]\n#  CMD [\"find\", \"/\", \"-name\", \"libphp5.so\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\nRUN apt-get update \\\n && apt-get install apache2-dev apache2-mpm-worker -y\n#  phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#  persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-maintainer-zts --with-apxs2\"\nENV GPG_KEYS=\"0BD78B5F97500D450838F95DFE857D9A90D90EC1 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3\"\nENV PHP_VERSION=\"5.6.19\"\nENV PHP_FILENAME=\"php-5.6.19.tar.xz\"\nENV PHP_SHA256=\"bb32337f93a00b71789f116bddafa8848139120e7fb6f4f98a84f52dbcb8329f\"\nENV PHP_XDEBUG_VERSION=\"2.4.0\"\nENV PHP_XDEBUG_FILENAME=\"xdebug.${PHP_XDEBUG_VERSION}.tgz\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_SHA256 *$PHP_FILENAME\" | sha256sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && mkdir -p /usr/src/php-xdebug \\\n && cd /usr/src/php-xdebug \\\n && curl -fSL \"https://xdebug.org/files/xdebug-${PHP_XDEBUG_VERSION}.tgz\" -o \"${PHP_XDEBUG_FILENAME}\" \\\n && tar -xf \"${PHP_XDEBUG_FILENAME}\" -C /usr/src/php-xdebug --strip-components=1 \\\n && rm \"${PHP_XDEBUG_FILENAME}\" \\\n && /usr/local/bin/phpize \\\n && ./configure --prefix=/usr --datadir=/data --docdir=/docs --enable-xdebug --with-php-config=/usr/local/bin/php-config \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && cd ~ \\\n && rm -rf /usr/src/php-xdebug \\\n && rm -rf /usr/src/php \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nENV APACHE_LOCK_DIR=\"/var/run\"\nENV APACHE_PID_FILE=\"${APACHE_LOCK_DIR}/apache2.pid\"\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log\"\nEXPOSE 80/tcp\nENV ASYNC_SOCKETS_ROOT=\"/async-sockets\"\nVOLUME [\"${ASYNC_SOCKETS_ROOT}/src\", \"${ASYNC_SOCKETS_ROOT}/vendor\", \"${ASYNC_SOCKETS_ROOT}/demos\"]\nCOPY conf/* /etc/apache2/conf-enabled/\nCOPY apache2.conf /etc/apache2/apache2.conf\nCOPY www/* /var/www/html/\nCOPY php.conf/*.ini ${PHP_INI_DIR}/conf.d/\nWORKDIR /var/www/html\n# #CMD [\"ls\", \"-al\", \"/async-sockets/demos\"]\nCMD [\"apache2\", \"-DFOREGROUND\"]\n# CMD [\"find\", \"/\", \"-name\", \"libphp5.so\"]\n","injectedSmells":[],"originalDockerfileHash":"b2881cf6746061ecd37aeb87c87f3d6f","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\nRUN apt-get update \\\n && apt-get install apache2-dev apache2-mpm-worker -y\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libedit2 libsqlite3-0 libxml2 -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-maintainer-zts --with-apxs2\"\nENV GPG_KEYS=\"0BD78B5F97500D450838F95DFE857D9A90D90EC1 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3\"\nENV PHP_VERSION=\"5.6.19\"\nENV PHP_FILENAME=\"php-5.6.19.tar.xz\"\nENV PHP_SHA256=\"bb32337f93a00b71789f116bddafa8848139120e7fb6f4f98a84f52dbcb8329f\"\nENV PHP_XDEBUG_VERSION=\"2.4.0\"\nENV PHP_XDEBUG_FILENAME=\"xdebug.${PHP_XDEBUG_VERSION}.tgz\"\nRUN set -xe \\\n && buildDeps=\" $PHP_EXTRA_BUILD_DEPS libcurl4-openssl-dev libedit-dev libsqlite3-dev libssl-dev libxml2-dev xz-utils \" \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && echo \"$PHP_SHA256 *$PHP_FILENAME\" | sha256sum -c - \\\n && curl -fSL \"http://php.net/get/$PHP_FILENAME.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && gpg --batch --verify \"$PHP_FILENAME.asc\" \"$PHP_FILENAME\" \\\n && rm -r \"$GNUPGHOME\" \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\" \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-curl --with-libedit --with-openssl --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && mkdir -p /usr/src/php-xdebug \\\n && cd /usr/src/php-xdebug \\\n && curl -fSL \"https://xdebug.org/files/xdebug-${PHP_XDEBUG_VERSION}.tgz\" -o \"${PHP_XDEBUG_FILENAME}\" \\\n && tar -xf \"${PHP_XDEBUG_FILENAME}\" -C /usr/src/php-xdebug --strip-components=1 \\\n && rm \"${PHP_XDEBUG_FILENAME}\" \\\n && /usr/local/bin/phpize \\\n && ./configure --prefix=/usr --datadir=/data --docdir=/docs --enable-xdebug --with-php-config=/usr/local/bin/php-config \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && make clean \\\n && cd ~ \\\n && rm -rf /usr/src/php-xdebug \\\n && rm -rf /usr/src/php \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps\nENV APACHE_LOCK_DIR=\"/var/run\"\nENV APACHE_PID_FILE=\"${APACHE_LOCK_DIR}/apache2.pid\"\nENV APACHE_RUN_USER=\"www-data\"\nENV APACHE_RUN_GROUP=\"www-data\"\nENV APACHE_LOG_DIR=\"/var/log\"\nEXPOSE 80/tcp\nENV ASYNC_SOCKETS_ROOT=\"/async-sockets\"\nVOLUME [\"${ASYNC_SOCKETS_ROOT}/src\", \"${ASYNC_SOCKETS_ROOT}/vendor\", \"${ASYNC_SOCKETS_ROOT}/demos\"]\nCOPY conf/* /etc/apache2/conf-enabled/\nCOPY apache2.conf /etc/apache2/apache2.conf\nCOPY www/* /var/www/html/\nCOPY php.conf/*.ini ${PHP_INI_DIR}/conf.d/\nWORKDIR /var/www/html\n#  #CMD [\"ls\", \"-al\", \"/async-sockets/demos\"]\nCMD [\"apache2\", \"-DFOREGROUND\"]\n#  CMD [\"find\", \"/\", \"-name\", \"libphp5.so\"]\n","originalDockerfileUglifiedHash":"d47c096816003873340ebc71ed77dbb7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/fb740b48aa8e5060dd278d8c71a0136ea0aa7341.dockerfile"}