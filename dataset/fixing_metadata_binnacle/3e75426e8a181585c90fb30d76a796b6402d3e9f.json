{"seed":1385249980,"processedDockerfileHash":"04b0fb00fb17c499c41df3b1463d6d9c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM centos:7\nARG TERM=linux\nARG SCIDB_NAME=scidb\nARG SCIDB_LOG_LEVEL=WARN\nENV SCIDB_VER=\"19.3\" \\\n    SCIDB_NAME=\"scidb\"\nENV SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\nARG SCIDB_SCRIPT_URL=\"https://downloads.paradigm4.com/community/$SCIDB_VER/install-scidb-ce.sh\"\n#  # Install dependencies\nRUN yum install --assumeyes patch wget which \\\n && yum clean all\n#  # Get SciDB install script\nRUN wget --no-verbose --output-document /install-scidb-ce.sh \"$SCIDB_SCRIPT_URL\"\n#  # Run SciDB install script\nRUN yes | bash -x /install-scidb-ce.sh \\\n && yum install --assumeyes scidb-$SCIDB_VER-dev \\\n && yum clean all\n#   scidb-$SCIDB_VER-libboost-devel         \\\n#  # Setup SSH\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config \\\n && ssh-keygen -f /root/.ssh/id_rsa -q -N \"\" \\\n && cp /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys\n#  # Setup SciDB config file\nCOPY config.ini $SCIDB_INSTALL_PATH/etc/\n#  # Setup PostgreSQL and SciDB\nRUN echo \"127.0.0.1:5432:$SCIDB_NAME:$SCIDB_NAME:`date +%s | sha256sum | base64 | head -c 32 `\" > /root/.pgpass \\\n && chmod go-r /root/.pgpass \\\n && chmod a+r $SCIDB_INSTALL_PATH/etc/config.ini \\\n && ssh-keygen -A \\\n && /usr/sbin/sshd \\\n && sed --in-place s/...0/172.17.0.0/ /var/lib/pgsql/9.3/data/pg_hba.conf \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl start -D /var/lib/pgsql/9.3/data/ -s -w -t 300\" postgres \\\n && until su --command=\"/usr/pgsql-9.3/bin/pg_isready\" postgres ; do sleep 1 ; done \\\n && su --command=\" $SCIDB_INSTALL_PATH/bin/scidbctl.py init-syscat $SCIDB_NAME --db-password `cut --delimiter : --fields 5 /root/.pgpass `\" postgres \\\n && $SCIDB_INSTALL_PATH/bin/scidbctl.py init-cluster --force $SCIDB_NAME \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl stop -D /var/lib/pgsql/9.3/data/ -s -m fast\" postgres \\\n && sed --in-place s/log4j.rootLogger=INFO/log4j.rootLogger=$SCIDB_LOG_LEVEL/ $SCIDB_INSTALL_PATH/share/scidb/log4cxx.properties\n#  # Setup container entrypoint\nCOPY docker-entrypoint-centos-7.sh /docker-entrypoint.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n#  # Port | App\n#  # -----+-----\n#  # 1239 | SciDB iquery\nEXPOSE 1239/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM centos:7\nARG TERM=linux\nARG SCIDB_NAME=scidb\nARG SCIDB_LOG_LEVEL=WARN\nENV SCIDB_VER=\"19.3\" \\\n    SCIDB_NAME=\"scidb\"\nENV SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\nARG SCIDB_SCRIPT_URL=\"https://downloads.paradigm4.com/community/$SCIDB_VER/install-scidb-ce.sh\"\n# # Install dependencies\nRUN yum install --assumeyes patch wget which \\\n && yum clean all\n# # Get SciDB install script\nRUN wget --no-verbose --output-document /install-scidb-ce.sh \"$SCIDB_SCRIPT_URL\"\n# # Run SciDB install script\nRUN yes | bash -x /install-scidb-ce.sh \\\n && yum install --assumeyes scidb-$SCIDB_VER-dev \\\n && yum clean all\n#  scidb-$SCIDB_VER-libboost-devel         \\\n# # Setup SSH\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config \\\n && ssh-keygen -f /root/.ssh/id_rsa -q -N \"\" \\\n && cp /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys\n# # Setup SciDB config file\nCOPY config.ini $SCIDB_INSTALL_PATH/etc/\n# # Setup PostgreSQL and SciDB\nRUN echo \"127.0.0.1:5432:$SCIDB_NAME:$SCIDB_NAME:`date +%s | sha256sum | base64 | head -c 32 `\" > /root/.pgpass \\\n && chmod go-r /root/.pgpass \\\n && chmod a+r $SCIDB_INSTALL_PATH/etc/config.ini \\\n && ssh-keygen -A \\\n && /usr/sbin/sshd \\\n && sed --in-place s/\\.\\.\\.0/172.17.0.0/ /var/lib/pgsql/9.3/data/pg_hba.conf \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl start -D /var/lib/pgsql/9.3/data/ -s -w -t 300\" postgres \\\n && until su --command=\"/usr/pgsql-9.3/bin/pg_isready\" postgres ; do sleep 1 ; done \\\n && su --command=\" $SCIDB_INSTALL_PATH/bin/scidbctl.py init-syscat $SCIDB_NAME --db-password `cut --delimiter : --fields 5 /root/.pgpass `\" postgres \\\n && $SCIDB_INSTALL_PATH/bin/scidbctl.py init-cluster --force $SCIDB_NAME \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl stop -D /var/lib/pgsql/9.3/data/ -s -m fast\" postgres \\\n && sed --in-place s/log4j.rootLogger=INFO/log4j.rootLogger=$SCIDB_LOG_LEVEL/ $SCIDB_INSTALL_PATH/share/scidb/log4cxx.properties\n# # Setup container entrypoint\nCOPY docker-entrypoint-centos-7.sh /docker-entrypoint.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n# # Port | App\n# # -----+-----\n# # 1239 | SciDB iquery\nEXPOSE 1239/tcp\n","injectedSmells":[],"originalDockerfileHash":"52f24bb32653f90abc62054852913cbc","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM centos:7\nARG TERM=linux\nARG SCIDB_NAME=scidb\nARG SCIDB_LOG_LEVEL=WARN\nENV SCIDB_VER=\"19.3\" \\\n    SCIDB_NAME=\"scidb\"\nENV SCIDB_INSTALL_PATH=\"/opt/scidb/$SCIDB_VER\"\nENV PATH=\"$PATH:$SCIDB_INSTALL_PATH/bin\"\nARG SCIDB_SCRIPT_URL=\"https://downloads.paradigm4.com/community/$SCIDB_VER/install-scidb-ce.sh\"\n#  # Install dependencies\nRUN yum install --assumeyes patch wget which \\\n && yum clean all\n#  # Get SciDB install script\nRUN wget --no-verbose --output-document /install-scidb-ce.sh \"$SCIDB_SCRIPT_URL\"\n#  # Run SciDB install script\nRUN yes | bash -x /install-scidb-ce.sh \\\n && yum install --assumeyes scidb-$SCIDB_VER-dev \\\n && yum clean all\n#   scidb-$SCIDB_VER-libboost-devel         \\\n#  # Setup SSH\nRUN echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config \\\n && ssh-keygen -f /root/.ssh/id_rsa -q -N \"\" \\\n && cp /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys\n#  # Setup SciDB config file\nCOPY config.ini $SCIDB_INSTALL_PATH/etc/\n#  # Setup PostgreSQL and SciDB\nRUN echo \"127.0.0.1:5432:$SCIDB_NAME:$SCIDB_NAME:`date +%s | sha256sum | base64 | head -c 32 `\" > /root/.pgpass \\\n && chmod go-r /root/.pgpass \\\n && chmod a+r $SCIDB_INSTALL_PATH/etc/config.ini \\\n && ssh-keygen -A \\\n && /usr/sbin/sshd \\\n && sed --in-place s/...0/172.17.0.0/ /var/lib/pgsql/9.3/data/pg_hba.conf \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl start -D /var/lib/pgsql/9.3/data/ -s -w -t 300\" postgres \\\n && until su --command=\"/usr/pgsql-9.3/bin/pg_isready\" postgres ; do sleep 1 ; done \\\n && su --command=\" $SCIDB_INSTALL_PATH/bin/scidbctl.py init-syscat $SCIDB_NAME --db-password `cut --delimiter : --fields 5 /root/.pgpass `\" postgres \\\n && $SCIDB_INSTALL_PATH/bin/scidbctl.py init-cluster --force $SCIDB_NAME \\\n && su --command=\" /usr/pgsql-9.3/bin/pg_ctl stop -D /var/lib/pgsql/9.3/data/ -s -m fast\" postgres \\\n && sed --in-place s/log4j.rootLogger=INFO/log4j.rootLogger=$SCIDB_LOG_LEVEL/ $SCIDB_INSTALL_PATH/share/scidb/log4cxx.properties\n#  # Setup container entrypoint\nCOPY docker-entrypoint-centos-7.sh /docker-entrypoint.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n#  # Port | App\n#  # -----+-----\n#  # 1239 | SciDB iquery\nEXPOSE 1239/tcp\n","originalDockerfileUglifiedHash":"cbd08f2e073ac4306a4d377c7e2ec53a","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/3e75426e8a181585c90fb30d76a796b6402d3e9f.dockerfile"}