{"seed":6446038,"processedDockerfileHash":"53766969c5347db56b1bc818beee5144","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.19\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen git ccache libboost-all-dev libreadline-dev libssl-dev libtool ncurses-dev pbzip2 pkg-config python3 python3-dev python3-pip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr\n#   installing mongo drivers\nRUN echo \"Installing mongo-c-driver\" \\\n && apt-get update -qq \\\n && apt-get install --no-install-recommends pkg-config libssl-dev libsasl2-dev wget -y \\\n && wget https://github.com/mongodb/mongo-c-driver/releases/download/1.9.5/mongo-c-driver-1.9.5.tar.gz \\\n && tar xzf mongo-c-driver-1.9.5.tar.gz \\\n && cd mongo-c-driver-1.9.5 \\\n && ./configure --disable-automatic-init-and-cleanup --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf mongo-c-driver-1.9.5 \\\n && echo \"Installing mongo-cxx-driver\" \\\n && git clone https://github.com/mongodb/mongo-cxx-driver.git --branch releases/v3.2 --depth 1 \\\n && cd mongo-cxx-driver/build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make EP_mnmlstc_core \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf mongo-cxx-driver\n#   end\nCOPY . /usr/local/src/golos\nRUN cd /usr/local/src/golos \\\n && git submodule deinit -f . \\\n && git submodule update --init --recursive -f \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_GOLOS_TESTNET=FALSE -DBUILD_SHARED_LIBRARIES=FALSE -DCHAINBASE_CHECK_LOCKING=FALSE -DENABLE_MONGO_PLUGIN=TRUE .. \\\n && make -j$( nproc ;) \\\n && make install \\\n && rm -rf /usr/local/src/golos\nRUN apt-get remove -y automake autotools-dev bsdmainutils build-essential cmake doxygen dpkg-dev git libboost-all-dev libc6-dev libexpat1-dev libgcc-5-dev libhwloc-dev libibverbs-dev libicu-dev libltdl-dev libncurses5-dev libnuma-dev libopenmpi-dev libpython-dev libpython2.7-dev libreadline-dev libreadline6-dev libssl-dev libstdc++-5-dev libtinfo-dev libtool linux-libc-dev m4 make manpages manpages-dev mpi-default-dev python-dev python2.7-dev python3-dev \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nCOPY share/golosd/golosdctl /usr/local/bin/golosdctl\nRUN chmod +x /usr/local/bin/golosdctl\nRUN useradd -s /bin/bash -m -d /var/lib/golosd golosd\nRUN mkdir /var/cache/golosd \\\n && chown golosd:golosd -R /var/cache/golosd\n#   add blockchain cache to image\n#  ADD $STEEMD_BLOCKCHAIN /var/cache/golosd/blocks.tbz2\nENV HOME=\"/var/lib/golosd\"\nRUN chown golosd:golosd -R /var/lib/golosd\nCOPY share/golosd/snapshot5392323.json /var/lib/golosd\n#   rpc service:\n#   http\nEXPOSE 8090/tcp\n#   ws\nEXPOSE 8091/tcp\n#   p2p service:\nEXPOSE 4243/tcp\nRUN mkdir -p /etc/service/golosd\nCOPY share/golosd/golosd.sh /etc/service/golosd/run\nRUN chmod +x /etc/service/golosd/run\n#   add seednodes from documentation to image\nCOPY share/golosd/seednodes /etc/golosd/seednodes\n#   the following adds lots of logging info to stdout\nCOPY share/golosd/config/config_mongo.ini /etc/golosd/config.ini\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.19\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen git ccache libboost-all-dev libreadline-dev libssl-dev libtool ncurses-dev pbzip2 pkg-config python3 python3-dev python3-pip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr\n#  installing mongo drivers\nRUN echo \"Installing mongo-c-driver\" \\\n && apt-get update -qq \\\n && apt-get install pkg-config libssl-dev libsasl2-dev wget -y \\\n && wget https://github.com/mongodb/mongo-c-driver/releases/download/1.9.5/mongo-c-driver-1.9.5.tar.gz \\\n && tar xzf mongo-c-driver-1.9.5.tar.gz \\\n && cd mongo-c-driver-1.9.5 \\\n && ./configure --disable-automatic-init-and-cleanup --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf mongo-c-driver-1.9.5 \\\n && echo \"Installing mongo-cxx-driver\" \\\n && git clone https://github.com/mongodb/mongo-cxx-driver.git --branch releases/v3.2 --depth 1 \\\n && cd mongo-cxx-driver/build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make EP_mnmlstc_core \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf mongo-cxx-driver\n#  end\nADD . /usr/local/src/golos\nRUN cd /usr/local/src/golos \\\n && git submodule deinit -f . \\\n && git submodule update --init --recursive -f \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_GOLOS_TESTNET=FALSE -DBUILD_SHARED_LIBRARIES=FALSE -DCHAINBASE_CHECK_LOCKING=FALSE -DENABLE_MONGO_PLUGIN=TRUE .. \\\n && make -j$( nproc ;) \\\n && make install \\\n && rm -rf /usr/local/src/golos\nRUN apt-get remove -y automake autotools-dev bsdmainutils build-essential cmake doxygen dpkg-dev git libboost-all-dev libc6-dev libexpat1-dev libgcc-5-dev libhwloc-dev libibverbs-dev libicu-dev libltdl-dev libncurses5-dev libnuma-dev libopenmpi-dev libpython-dev libpython2.7-dev libreadline-dev libreadline6-dev libssl-dev libstdc++-5-dev libtinfo-dev libtool linux-libc-dev m4 make manpages manpages-dev mpi-default-dev python-dev python2.7-dev python3-dev \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nADD share/golosd/golosdctl /usr/local/bin/golosdctl\nRUN chmod +x /usr/local/bin/golosdctl\nRUN useradd -s /bin/bash -m -d /var/lib/golosd golosd\nRUN mkdir /var/cache/golosd \\\n && chown golosd:golosd -R /var/cache/golosd\n#  add blockchain cache to image\n# ADD $STEEMD_BLOCKCHAIN /var/cache/golosd/blocks.tbz2\nENV HOME=\"/var/lib/golosd\"\nRUN chown golosd:golosd -R /var/lib/golosd\nADD share/golosd/snapshot5392323.json /var/lib/golosd\n#  rpc service:\n#  http\nEXPOSE 8090/tcp\n#  ws\nEXPOSE 8091/tcp\n#  p2p service:\nEXPOSE 4243/tcp\nRUN mkdir -p /etc/service/golosd\nADD share/golosd/golosd.sh /etc/service/golosd/run\nRUN chmod +x /etc/service/golosd/run\n#  add seednodes from documentation to image\nADD share/golosd/seednodes /etc/golosd/seednodes\n#  the following adds lots of logging info to stdout\nADD share/golosd/config/config_mongo.ini /etc/golosd/config.ini\n","injectedSmells":[],"originalDockerfileHash":"25316ba634bb33d34c01ae4800625bd6","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.19\nENV LANG=\"en_US.UTF-8\"\nRUN apt-get update \\\n && apt-get install autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen git ccache libboost-all-dev libreadline-dev libssl-dev libtool ncurses-dev pbzip2 pkg-config python3 python3-dev python3-pip -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && pip3 install gcovr\n#   installing mongo drivers\nRUN echo \"Installing mongo-c-driver\" \\\n && apt-get update -qq \\\n && apt-get install pkg-config libssl-dev libsasl2-dev wget -y \\\n && wget https://github.com/mongodb/mongo-c-driver/releases/download/1.9.5/mongo-c-driver-1.9.5.tar.gz \\\n && tar xzf mongo-c-driver-1.9.5.tar.gz \\\n && cd mongo-c-driver-1.9.5 \\\n && ./configure --disable-automatic-init-and-cleanup --enable-static \\\n && make \\\n && make install \\\n && cd .. \\\n && rm -rf mongo-c-driver-1.9.5 \\\n && echo \"Installing mongo-cxx-driver\" \\\n && git clone https://github.com/mongodb/mongo-cxx-driver.git --branch releases/v3.2 --depth 1 \\\n && cd mongo-cxx-driver/build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local .. \\\n && make EP_mnmlstc_core \\\n && make \\\n && make install \\\n && cd ../.. \\\n && rm -rf mongo-cxx-driver\n#   end\nADD . /usr/local/src/golos\nRUN cd /usr/local/src/golos \\\n && git submodule deinit -f . \\\n && git submodule update --init --recursive -f \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_GOLOS_TESTNET=FALSE -DBUILD_SHARED_LIBRARIES=FALSE -DCHAINBASE_CHECK_LOCKING=FALSE -DENABLE_MONGO_PLUGIN=TRUE .. \\\n && make -j$( nproc ;) \\\n && make install \\\n && rm -rf /usr/local/src/golos\nRUN apt-get remove -y automake autotools-dev bsdmainutils build-essential cmake doxygen dpkg-dev git libboost-all-dev libc6-dev libexpat1-dev libgcc-5-dev libhwloc-dev libibverbs-dev libicu-dev libltdl-dev libncurses5-dev libnuma-dev libopenmpi-dev libpython-dev libpython2.7-dev libreadline-dev libreadline6-dev libssl-dev libstdc++-5-dev libtinfo-dev libtool linux-libc-dev m4 make manpages manpages-dev mpi-default-dev python-dev python2.7-dev python3-dev \\\n && apt-get autoremove -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/* /usr/include /usr/local/include\nADD share/golosd/golosdctl /usr/local/bin/golosdctl\nRUN chmod +x /usr/local/bin/golosdctl\nRUN useradd -s /bin/bash -m -d /var/lib/golosd golosd\nRUN mkdir /var/cache/golosd \\\n && chown golosd:golosd -R /var/cache/golosd\n#   add blockchain cache to image\n#  ADD $STEEMD_BLOCKCHAIN /var/cache/golosd/blocks.tbz2\nENV HOME=\"/var/lib/golosd\"\nRUN chown golosd:golosd -R /var/lib/golosd\nADD share/golosd/snapshot5392323.json /var/lib/golosd\n#   rpc service:\n#   http\nEXPOSE 8090/tcp\n#   ws\nEXPOSE 8091/tcp\n#   p2p service:\nEXPOSE 4243/tcp\nRUN mkdir -p /etc/service/golosd\nADD share/golosd/golosd.sh /etc/service/golosd/run\nRUN chmod +x /etc/service/golosd/run\n#   add seednodes from documentation to image\nADD share/golosd/seednodes /etc/golosd/seednodes\n#   the following adds lots of logging info to stdout\nADD share/golosd/config/config_mongo.ini /etc/golosd/config.ini\n","originalDockerfileUglifiedHash":"803bf4ca5fc22f745d0e1ecfa89cc6b1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/51e55940b0193984f5ad5477657ba812f51351ca.dockerfile"}