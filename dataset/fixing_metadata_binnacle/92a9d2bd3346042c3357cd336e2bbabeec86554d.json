{"seed":848332623,"processedDockerfileHash":"86c093f447fda197de8e5d4996c8591f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"#\n#   SemEHR Dockerfile\n#\nFROM ubuntu:latest\nMAINTAINER Honghan Wu \"honghan.wu@gmail.com\"\n#  #######\n#   Pre-reqs\n#  #######\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends software-properties-common=0.99.35 -y )\n#   && add-apt-repository ppa:webupd8team/java\nRUN :\n#   RUN echo \"oracle-java8-installer shared/accepted-oracle-license-v1-1 select true\" | debconf-set-selections\nRUN (apt-get update ;apt-get install --no-install-recommends ant=1.10.13-1 curl=7.88.1-7ubuntu1 openjdk-11-jdk=11.0.18+10-0ubuntu4 subversion=1.14.2-4build2 unzip=6.0-27ubuntu1 vim=2:9.0.1000-4ubuntu2 git=1:2.39.2-1ubuntu1 -y )\n#   ENV JAVA_HOME /usr/lib/jvm/java-8-oracle/\nENV JAVA_HOME=\"/usr/lib/jvm/open-jdk/\"\n#  #######\n#   GCP, Gate, Bio-Yodie\n#  #######\nRUN mkdir /opt/gcp\nWORKDIR '/opt/gcp'\nENV JAVA_TOOL_OPTIONS=\"'-Dfile.encoding=UTF8'\"\nRUN cd /opt/gcp\n#  at this moment, bio-yodie requires this particular subversion of GCP\nRUN svn co http://svn.code.sf.net/p/gate/code/gcp/trunk@18658 gcp-2.5-18658\nENV JAVA_HOME=\"/usr/lib/jvm/java-11-openjdk-amd64/\"\nRUN cd /opt/gcp/gcp-2.5-18658 \\\n && ant\nENV GCP_HOME=\"'/opt/gcp/gcp-2.5-18658'\"\nRUN curl -L 'http://netix.dl.sourceforge.net/project/gate/gate/8.1/gate-8.1-build5169-ALL.zip' > gate-8.1-build5169-ALL.zip \\\n && unzip gate-8.1-build5169-ALL.zip \\\n && mv gate-8.1-build5169-ALL gate \\\n && rm gate-8.1-build5169-ALL.zip\nENV GATE_HOME=\"'/opt/gcp/gate'\"\nWORKDIR '/opt/gcp/'\nENV PATH=\"\\\"$PATH:$GCP_HOME:$GATE_HOME/bin\\\"\"\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/bio-yodie-1.2.1-se.tar.gz' > bio-yodie-1.2.1-se.tar.gz \\\n && tar xzvf bio-yodie-1.2.1-se.tar.gz \\\n && rm bio-yodie-1.2.1-se.tar.gz\nRUN mv bio-yodie-1.2.1 bio-yodie-1-2-1\nRUN cd /opt/gcp/gcp-2.5-18658/lib\nWORKDIR '/opt/gcp/gcp-2.5-18658/lib'\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/customised_handlers.tar.gz' > customised_handlers.tar.gz \\\n && tar xzvf customised_handlers.tar.gz \\\n && cp customised_handlers/* ./ \\\n && rm -fr customised_handlers \\\n && rm -f customised_handlers.tar.gz\n#  #######\n#   python & libraries for SemEHR\n#  #######\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends python python-pip wget=1.21.3-1ubuntu1 python-setuptools python-dev libxml2-dev=2.9.14+dfsg-1.1build2 libxslt-dev zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 build-essential=12.9ubuntu3 -y )\nRUN pip install requests==2.28.2\nRUN pip install lxml==4.9.2\nRUN pip install pyquery==2.0.0\nRUN pip install joblib==1.2.0\n#   RUN pip install hashlib\n#   RUN easy_install hashlib\nRUN pip install urllib3==1.26.15\nRUN pip install Elasticsearch==8.7.0\nRUN (apt-get update ;apt-get install --no-install-recommends python-mysqldb -y )\n#  RUN pip install MySQL-python\nRUN (apt-get update ;apt-get install --no-install-recommends unixodbc=2.3.11-2 unixodbc-dev=2.3.11-2 libmysqlclient-dev=8.0.32-0ubuntu4 freetds-dev=1.3.17+ds-2 tdsodbc=1.3.17+ds-2 -y )\nRUN pip install pyodbc==4.0.39\n#   mysql odbc\nRUN curl -L 'https://cdn.mysql.com//Downloads/Connector-ODBC/8.0/mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz' > mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && tar xzvf mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && cp mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/lib/* /usr/lib \\\n && mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/bin/myodbc-installer -d -n MySQL -a -t DRIVER=/usr/lib/libmyodbc8w.so \\\n && rm -fr mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit \\\n && rm -f mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz\n#  #######\n#   SemEHR\n#  #######\nRUN mkdir /opt/semehr\nWORKDIR '/opt/semehr'\nRUN cd /opt/semehr\n#   RUN git clone https://github.com/CogStack/CogStack-SemEHR.git\nRUN mkdir /opt/semehr/CogStack-SemEHR\nENV semehr_path=\"'/opt/semehr/CogStack-SemEHR'\"\nENV PATH=\"\\\"$PATH:$semehr_path:/opt/semehr/\\\"\"\nENV CLASSPATH=\"\\\"$GATE_HOME/bin\\\"\"\n#   RUN cp ./docker/semehr.sh ./\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/semehr.sh.txt' > semehr.sh\nRUN chmod a+x semehr.sh\nRUN mkdir /data/\nRUN mkdir /data/output_docs\nRUN mkdir /data/input_docs\nRUN mkdir /data/smehr_results\n#  #######\n#   entrypoint\n#  #######\nENTRYPOINT [\"semehr.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n#  SemEHR Dockerfile\n#\nFROM ubuntu:latest\nMAINTAINER Honghan Wu \"honghan.wu@gmail.com\"\n# #######\n#  Pre-reqs\n# #######\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#  && add-apt-repository ppa:webupd8team/java\nRUN apt-get update\n#  RUN echo \"oracle-java8-installer shared/accepted-oracle-license-v1-1 select true\" | debconf-set-selections\nRUN apt-get install ant curl openjdk-11-jdk subversion unzip vim git -y\n#  ENV JAVA_HOME /usr/lib/jvm/java-8-oracle/\nENV JAVA_HOME=\"/usr/lib/jvm/open-jdk/\"\n# #######\n#  GCP, Gate, Bio-Yodie\n# #######\nRUN mkdir /opt/gcp\nWORKDIR '/opt/gcp'\nENV JAVA_TOOL_OPTIONS=\"'-Dfile.encoding=UTF8'\"\nRUN cd /opt/gcp\n# at this moment, bio-yodie requires this particular subversion of GCP\nRUN svn co http://svn.code.sf.net/p/gate/code/gcp/trunk@18658 gcp-2.5-18658\nENV JAVA_HOME=\"/usr/lib/jvm/java-11-openjdk-amd64/\"\nRUN cd /opt/gcp/gcp-2.5-18658 \\\n && ant\nENV GCP_HOME=\"'/opt/gcp/gcp-2.5-18658'\"\nRUN curl -L 'http://netix.dl.sourceforge.net/project/gate/gate/8.1/gate-8.1-build5169-ALL.zip' > gate-8.1-build5169-ALL.zip \\\n && unzip gate-8.1-build5169-ALL.zip \\\n && mv gate-8.1-build5169-ALL gate \\\n && rm gate-8.1-build5169-ALL.zip\nENV GATE_HOME=\"'/opt/gcp/gate'\"\nWORKDIR '/opt/gcp/'\nENV PATH=\"\\\"$PATH:$GCP_HOME:$GATE_HOME/bin\\\"\"\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/bio-yodie-1.2.1-se.tar.gz' > bio-yodie-1.2.1-se.tar.gz \\\n && tar xzvf bio-yodie-1.2.1-se.tar.gz \\\n && rm bio-yodie-1.2.1-se.tar.gz\nRUN mv bio-yodie-1.2.1 bio-yodie-1-2-1\nRUN cd /opt/gcp/gcp-2.5-18658/lib\nWORKDIR '/opt/gcp/gcp-2.5-18658/lib'\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/customised_handlers.tar.gz' > customised_handlers.tar.gz \\\n && tar xzvf customised_handlers.tar.gz \\\n && cp customised_handlers/* ./ \\\n && rm -fr customised_handlers \\\n && rm -f customised_handlers.tar.gz\n# #######\n#  python & libraries for SemEHR\n# #######\nRUN apt-get update\nRUN apt-get install python python-pip wget python-setuptools python-dev libxml2-dev libxslt-dev zlib1g-dev build-essential -y\nRUN pip install requests\nRUN pip install lxml\nRUN pip install pyquery\nRUN pip install joblib\n#  RUN pip install hashlib\n#  RUN easy_install hashlib\nRUN pip install urllib3\nRUN pip install Elasticsearch\nRUN apt-get install python-mysqldb -y\n# RUN pip install MySQL-python\nRUN apt-get install unixodbc unixodbc-dev libmysqlclient-dev freetds-dev tdsodbc -y\nRUN pip install pyodbc\n#  mysql odbc\nRUN curl -L 'https://cdn.mysql.com//Downloads/Connector-ODBC/8.0/mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz' > mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && tar xzvf mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && cp mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/lib/* /usr/lib \\\n && mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/bin/myodbc-installer -d -n MySQL -a -t DRIVER=/usr/lib/libmyodbc8w.so \\\n && rm -fr mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit \\\n && rm -f mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz\n# #######\n#  SemEHR\n# #######\nRUN mkdir /opt/semehr\nWORKDIR '/opt/semehr'\nRUN cd /opt/semehr\n#  RUN git clone https://github.com/CogStack/CogStack-SemEHR.git\nRUN mkdir /opt/semehr/CogStack-SemEHR\nENV semehr_path=\"'/opt/semehr/CogStack-SemEHR'\"\nENV PATH=\"\\\"$PATH:$semehr_path:/opt/semehr/\\\"\"\nENV CLASSPATH=\"\\\"$GATE_HOME/bin\\\"\"\n#  RUN cp ./docker/semehr.sh ./\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/semehr.sh.txt' > semehr.sh\nRUN chmod a+x semehr.sh\nRUN mkdir /data/\nRUN mkdir /data/output_docs\nRUN mkdir /data/input_docs\nRUN mkdir /data/smehr_results\n# #######\n#  entrypoint\n# #######\nENTRYPOINT [\"semehr.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"6b46487dc00b200ae2e487583290874f","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#   SemEHR Dockerfile\n#\nFROM ubuntu:latest\nMAINTAINER Honghan Wu \"honghan.wu@gmail.com\"\n#  #######\n#   Pre-reqs\n#  #######\nRUN apt-get update \\\n && apt-get install software-properties-common -y\n#   && add-apt-repository ppa:webupd8team/java\nRUN apt-get update\n#   RUN echo \"oracle-java8-installer shared/accepted-oracle-license-v1-1 select true\" | debconf-set-selections\nRUN apt-get install ant curl openjdk-11-jdk subversion unzip vim git -y\n#   ENV JAVA_HOME /usr/lib/jvm/java-8-oracle/\nENV JAVA_HOME=\"/usr/lib/jvm/open-jdk/\"\n#  #######\n#   GCP, Gate, Bio-Yodie\n#  #######\nRUN mkdir /opt/gcp\nWORKDIR '/opt/gcp'\nENV JAVA_TOOL_OPTIONS=\"'-Dfile.encoding=UTF8'\"\nRUN cd /opt/gcp\n#  at this moment, bio-yodie requires this particular subversion of GCP\nRUN svn co http://svn.code.sf.net/p/gate/code/gcp/trunk@18658 gcp-2.5-18658\nENV JAVA_HOME=\"/usr/lib/jvm/java-11-openjdk-amd64/\"\nRUN cd /opt/gcp/gcp-2.5-18658 \\\n && ant\nENV GCP_HOME=\"'/opt/gcp/gcp-2.5-18658'\"\nRUN curl -L 'http://netix.dl.sourceforge.net/project/gate/gate/8.1/gate-8.1-build5169-ALL.zip' > gate-8.1-build5169-ALL.zip \\\n && unzip gate-8.1-build5169-ALL.zip \\\n && mv gate-8.1-build5169-ALL gate \\\n && rm gate-8.1-build5169-ALL.zip\nENV GATE_HOME=\"'/opt/gcp/gate'\"\nWORKDIR '/opt/gcp/'\nENV PATH=\"\\\"$PATH:$GCP_HOME:$GATE_HOME/bin\\\"\"\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/bio-yodie-1.2.1-se.tar.gz' > bio-yodie-1.2.1-se.tar.gz \\\n && tar xzvf bio-yodie-1.2.1-se.tar.gz \\\n && rm bio-yodie-1.2.1-se.tar.gz\nRUN mv bio-yodie-1.2.1 bio-yodie-1-2-1\nRUN cd /opt/gcp/gcp-2.5-18658/lib\nWORKDIR '/opt/gcp/gcp-2.5-18658/lib'\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/customised_handlers.tar.gz' > customised_handlers.tar.gz \\\n && tar xzvf customised_handlers.tar.gz \\\n && cp customised_handlers/* ./ \\\n && rm -fr customised_handlers \\\n && rm -f customised_handlers.tar.gz\n#  #######\n#   python & libraries for SemEHR\n#  #######\nRUN apt-get update\nRUN apt-get install python python-pip wget python-setuptools python-dev libxml2-dev libxslt-dev zlib1g-dev build-essential -y\nRUN pip install requests\nRUN pip install lxml\nRUN pip install pyquery\nRUN pip install joblib\n#   RUN pip install hashlib\n#   RUN easy_install hashlib\nRUN pip install urllib3\nRUN pip install Elasticsearch\nRUN apt-get install python-mysqldb -y\n#  RUN pip install MySQL-python\nRUN apt-get install unixodbc unixodbc-dev libmysqlclient-dev freetds-dev tdsodbc -y\nRUN pip install pyodbc\n#   mysql odbc\nRUN curl -L 'https://cdn.mysql.com//Downloads/Connector-ODBC/8.0/mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz' > mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && tar xzvf mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz \\\n && cp mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/lib/* /usr/lib \\\n && mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit/bin/myodbc-installer -d -n MySQL -a -t DRIVER=/usr/lib/libmyodbc8w.so \\\n && rm -fr mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit \\\n && rm -f mysql-connector-odbc-8.0.16-linux-ubuntu19.04-x86-64bit.tar.gz\n#  #######\n#   SemEHR\n#  #######\nRUN mkdir /opt/semehr\nWORKDIR '/opt/semehr'\nRUN cd /opt/semehr\n#   RUN git clone https://github.com/CogStack/CogStack-SemEHR.git\nRUN mkdir /opt/semehr/CogStack-SemEHR\nENV semehr_path=\"'/opt/semehr/CogStack-SemEHR'\"\nENV PATH=\"\\\"$PATH:$semehr_path:/opt/semehr/\\\"\"\nENV CLASSPATH=\"\\\"$GATE_HOME/bin\\\"\"\n#   RUN cp ./docker/semehr.sh ./\nRUN curl -L 'https://cogstack.rosalind.kcl.ac.uk/exports/semehr.sh.txt' > semehr.sh\nRUN chmod a+x semehr.sh\nRUN mkdir /data/\nRUN mkdir /data/output_docs\nRUN mkdir /data/input_docs\nRUN mkdir /data/smehr_results\n#  #######\n#   entrypoint\n#  #######\nENTRYPOINT [\"semehr.sh\"]\n","originalDockerfileUglifiedHash":"90e2e8c9a3885364107e6b57ffb93437","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/92a9d2bd3346042c3357cd336e2bbabeec86554d.dockerfile"}