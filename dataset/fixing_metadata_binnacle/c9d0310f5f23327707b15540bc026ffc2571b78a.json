{"seed":2334499534,"processedDockerfileHash":"452462674951d6a85e49e93d575de2c4","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM nvidia/cuda:9.0-base-ubuntu16.04\nENV OS_LOCALE=\"C.UTF-8\"\nENV LANG=\"$OS_LOCALE\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"$OS_LOCALE\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV TERM=\"xterm\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nENV SHELL=\"/bin/bash\"\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-utils apt-transport-https build-essential software-properties-common python-software-properties daemontools cuda-command-line-tools-9-0 cuda-cublas-dev-9-0 cuda-cudart-dev-9-0 cuda-cufft-dev-9-0 cuda-curand-dev-9-0 cuda-cusolver-dev-9-0 cuda-cusparse-dev-9-0 curl wget vim git zip bzip2 libcudnn7=7.0.5.15-1+cuda9.0 libcudnn7-dev=7.0.5.15-1+cuda9.0 libcurl3-dev libfreetype6-dev libpng12-dev libzmq3-dev pkg-config python-dev python3-dev python-numpy python3-numpy python-six python3-six python-wheel python3-wheel python-pip python3-pip rsync software-properties-common swig unzip zip zlib1g-dev locales cmake -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   && find /usr/local/cuda-9.0/lib64/ -type f -name 'lib*_static.a' -not -name 'libcudart_static.a' -delete \\\n#   && rm /usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\nRUN locale-gen en_US.UTF-8 \\\n && localedef -i en_US -f UTF-8 en_us.UTF-8\n#   Pin normal pip and pip3 to 9.0.3\nRUN pip install pip==9.0.3 --no-cache --ignore-installed --upgrade \\\n && pip3 install pip==9.0.3 --no-cache --ignore-installed --upgrade\n#   Pin Miniconda3 to 4.5.1 and pip to 9.0.3\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && bash /tmp/miniconda.sh -f -b -p /opt/conda \\\n && /opt/conda/bin/conda install --yes python=3.6 pip=9.0.3 \\\n && rm /tmp/miniconda.sh\n#   From this point on, all python and pip calls are conda-based\nENV PATH=\"/opt/conda/bin:$PATH\"\n#  ##################\n#   Setup OpenJDK 1.8\n#  ##################\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jdk openjdk-8-jre-headless -y \\\n && apt-get install --no-install-recommends apt-transport-https -y \\\n && apt-get install --no-install-recommends wget -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nCOPY sysutils/container-limits.sh sysutils/container-limits.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM nvidia/cuda:9.0-base-ubuntu16.04\nENV OS_LOCALE=\"C.UTF-8\"\nENV LANG=\"$OS_LOCALE\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"$OS_LOCALE\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV TERM=\"xterm\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nENV SHELL=\"/bin/bash\"\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-utils apt-transport-https build-essential software-properties-common python-software-properties daemontools cuda-command-line-tools-9-0 cuda-cublas-dev-9-0 cuda-cudart-dev-9-0 cuda-cufft-dev-9-0 cuda-curand-dev-9-0 cuda-cusolver-dev-9-0 cuda-cusparse-dev-9-0 curl wget vim git zip bzip2 libcudnn7=7.0.5.15-1+cuda9.0 libcudnn7-dev=7.0.5.15-1+cuda9.0 libcurl3-dev libfreetype6-dev libpng12-dev libzmq3-dev pkg-config python-dev python3-dev python-numpy python3-numpy python-six python3-six python-wheel python3-wheel python-pip python3-pip rsync software-properties-common swig unzip zip zlib1g-dev locales cmake -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#  && find /usr/local/cuda-9.0/lib64/ -type f -name 'lib*_static.a' -not -name 'libcudart_static.a' -delete \\\n#  && rm /usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\nRUN locale-gen en_US.UTF-8 \\\n && localedef -i en_US -f UTF-8 en_us.UTF-8\n#  Pin normal pip and pip3 to 9.0.3\nRUN pip install pip==9.0.3 --no-cache --ignore-installed --upgrade \\\n && pip3 install pip==9.0.3 --no-cache --ignore-installed --upgrade\n#  Pin Miniconda3 to 4.5.1 and pip to 9.0.3\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && bash /tmp/miniconda.sh -f -b -p /opt/conda \\\n && /opt/conda/bin/conda install --yes python=3.6 pip=9.0.3 \\\n && rm /tmp/miniconda.sh\n#  From this point on, all python and pip calls are conda-based\nENV PATH=\"/opt/conda/bin:$PATH\"\n# ##################\n#  Setup OpenJDK 1.8\n# ##################\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jdk openjdk-8-jre-headless -y \\\n && apt-get install apt-transport-https -y \\\n && apt-get install wget -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nCOPY sysutils/container-limits.sh sysutils/container-limits.sh\n","injectedSmells":[],"originalDockerfileHash":"748ae14ad5e0026fc2ae064b8b25a2ce","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM nvidia/cuda:9.0-base-ubuntu16.04\nENV OS_LOCALE=\"C.UTF-8\"\nENV LANG=\"$OS_LOCALE\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"$OS_LOCALE\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\nENV TERM=\"xterm\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nENV SHELL=\"/bin/bash\"\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends apt-utils apt-transport-https build-essential software-properties-common python-software-properties daemontools cuda-command-line-tools-9-0 cuda-cublas-dev-9-0 cuda-cudart-dev-9-0 cuda-cufft-dev-9-0 cuda-curand-dev-9-0 cuda-cusolver-dev-9-0 cuda-cusparse-dev-9-0 curl wget vim git zip bzip2 libcudnn7=7.0.5.15-1+cuda9.0 libcudnn7-dev=7.0.5.15-1+cuda9.0 libcurl3-dev libfreetype6-dev libpng12-dev libzmq3-dev pkg-config python-dev python3-dev python-numpy python3-numpy python-six python3-six python-wheel python3-wheel python-pip python3-pip rsync software-properties-common swig unzip zip zlib1g-dev locales cmake -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n#   && find /usr/local/cuda-9.0/lib64/ -type f -name 'lib*_static.a' -not -name 'libcudart_static.a' -delete \\\n#   && rm /usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\nRUN locale-gen en_US.UTF-8 \\\n && localedef -i en_US -f UTF-8 en_us.UTF-8\n#   Pin normal pip and pip3 to 9.0.3\nRUN pip install pip==9.0.3 --no-cache --ignore-installed --upgrade \\\n && pip3 install pip==9.0.3 --no-cache --ignore-installed --upgrade\n#   Pin Miniconda3 to 4.5.1 and pip to 9.0.3\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-4.5.1-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n && bash /tmp/miniconda.sh -f -b -p /opt/conda \\\n && /opt/conda/bin/conda install --yes python=3.6 pip=9.0.3 \\\n && rm /tmp/miniconda.sh\n#   From this point on, all python and pip calls are conda-based\nENV PATH=\"/opt/conda/bin:$PATH\"\n#  ##################\n#   Setup OpenJDK 1.8\n#  ##################\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:openjdk-r/ppa \\\n && apt-get update \\\n && apt-get install --no-install-recommends openjdk-8-jdk openjdk-8-jre-headless -y \\\n && apt-get install apt-transport-https -y \\\n && apt-get install wget -y \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/\"\nCOPY sysutils/container-limits.sh sysutils/container-limits.sh\n","originalDockerfileUglifiedHash":"e8fcc4a291a9407e7814fb056aece5db","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/c9d0310f5f23327707b15540bc026ffc2571b78a.dockerfile"}