{"seed":3075087862,"processedDockerfileHash":"2798be50bf18c9c3d531339be5444d71","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM library/ubuntu:16.04\n#   https://github.com/facebook/react-native/blob/8c7b32d5f1da34613628b4b8e0474bc1e185a618/ContainerShip/Dockerfile.android-base\n#   set default build arguments\nARG ANDROID_TOOLS_VERSION=25.2.5\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nARG NODE_VERSION=10.15.0\n#   set default environment variables\nENV ADB_INSTALL_TIMEOUT=\"10\"\nENV PATH=\"${PATH}:/opt/buck/bin/\"\nENV ANDROID_HOME=\"/opt/android\"\nENV ANDROID_SDK_HOME=\"${ANDROID_HOME}\"\nENV PATH=\"${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/tools/bin:${ANDROID_HOME}/platform-tools\"\nENV GRADLE_OPTS=\"-Dorg.gradle.daemon=false -Dorg.gradle.jvmargs=\\\"-Xmx512m -XX:+HeapDumpOnOutOfMemoryError\\\"\"\n#   install system dependencies\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends autoconf=2.69-9 automake=1:1.15-4ubuntu1 expect=5.45-7 curl=7.47.0-1ubuntu2.19 g++=4:5.3.1-1ubuntu1 gcc=4:5.3.1-1ubuntu1 git=1:2.7.4-0ubuntu1.10 libqt5widgets5=5.5.1+dfsg-16ubuntu7.7 lib32z1=1:1.2.8.dfsg-2ubuntu4.3 lib32stdc++6=5.4.0-6ubuntu1~16.04.12 make=4.1-6 maven=3.3.9-3 openjdk-8-jdk=8u292-b10-0ubuntu1~16.04.1 python-dev=2.7.12-1~16.04 python3-dev=3.5.1-3 qml-module-qtquick-controls=5.5.1-1ubuntu1 qtdeclarative5-dev=5.5.1-2ubuntu6 unzip=6.0-20ubuntu1.1 xz-utils=5.1.1alpha+20120614-2ubuntu2 locales=2.23-0ubuntu11.3 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && echo fs.inotify.max_user_watches=524288 | tee -a /etc/sysctl.conf \\\n && sysctl -p --system\n#   fix crashing gradle because of non ascii characters in ENV variables: https://github.com/gradle/gradle/issues/3117\nRUN localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   install nodejs\n#   https://github.com/nodejs/docker-node/blob/a5141d841167d109bcad542c9fb636607dabc8b1/6.10/Dockerfile\n#   gpg keys listed at https://github.com/nodejs/node#release-team\nRUN set -ex \\\n && for key in 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D C4F0DFFF4E8C1A8236409D08E73BC641CC11F4C8 B9AE9905FFD7803F25714661B63B535A4C206CA9 77984A986EBC2AA786BC0F66B01FBB92821C587A 8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600 4ED778F539E3634C779C87C6D7062848A1AB005C A48C2BEE680E841632CD4E44F07496B3EB3C1762 B9E2F5981AA6E0CD28160D9FF13993A75599653C; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.xz$\" SHASUMS256.txt | sha256sum -c - \\\n && tar -xJf \"node-v$NODE_VERSION-linux-x64.tar.xz\" -C /usr --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt \\\n && ln -s /usr/bin/node /usr/bin/nodejs\n#   configure npm\nRUN npm config set spin=false\nRUN npm config set progress=false\nRUN npm install react-native-cli@2.0.1 -g\n#   Full reference at https://dl.google.com/android/repository/repository2-1.xml\n#   download and unpack android\nRUN mkdir -p /opt/android \\\n && mkdir -p /opt/tools\nWORKDIR /opt/android\nRUN curl --silent https://dl.google.com/android/repository/tools_r$ANDROID_TOOLS_VERSION-linux.zip > android.zip \\\n && unzip android.zip \\\n && rm android.zip\n#   copy tools folder\nCOPY tools/android-accept-licenses.sh /opt/tools/android-accept-licenses.sh\nENV PATH=\"${PATH}:/opt/tools\"\nRUN mkdir -p $ANDROID_HOME/licenses/ \\\n && echo \"d56f5187479451eabf01fb78af6dfcb131a6481e\" > $ANDROID_HOME/licenses/android-sdk-license \\\n && echo \"84831b9409646a918e30573bab4c9c91346d8abd\" > $ANDROID_HOME/licenses/android-sdk-preview-license\n#   sdk\nRUN /opt/tools/android-accept-licenses.sh \"$ANDROID_HOME/tools/bin/sdkmanager tools \\\"platform-tools\\\" \\\"build-tools;25.0.3\\\" \\\"platforms;android-23\\\" \\\"platforms;android-25\\\" \\\"platforms;android-26\\\" \\\"extras;android;m2repository\\\" \\\"extras;google;m2repository\\\" \\\"add-ons;addon-google_apis-google-24\\\" \\\"extras;google;google_play_services\\\"\" \\\n && $ANDROID_HOME/tools/bin/sdkmanager --update\nVOLUME [\"/app\"]\nWORKDIR /app\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM library/ubuntu:16.04\n#  https://github.com/facebook/react-native/blob/8c7b32d5f1da34613628b4b8e0474bc1e185a618/ContainerShip/Dockerfile.android-base\n#  set default build arguments\nARG ANDROID_TOOLS_VERSION=25.2.5\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nARG NODE_VERSION=10.15.0\n#  set default environment variables\nENV ADB_INSTALL_TIMEOUT=\"10\"\nENV PATH=\"${PATH}:/opt/buck/bin/\"\nENV ANDROID_HOME=\"/opt/android\"\nENV ANDROID_SDK_HOME=\"${ANDROID_HOME}\"\nENV PATH=\"${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/tools/bin:${ANDROID_HOME}/platform-tools\"\nENV GRADLE_OPTS=\"-Dorg.gradle.daemon=false -Dorg.gradle.jvmargs=\\\"-Xmx512m -XX:+HeapDumpOnOutOfMemoryError\\\"\"\n#  install system dependencies\nRUN apt-get update -y \\\n && apt-get install autoconf automake expect curl g++ gcc git libqt5widgets5 lib32z1 lib32stdc++6 make maven openjdk-8-jdk python-dev python3-dev qml-module-qtquick-controls qtdeclarative5-dev unzip xz-utils locales -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && echo fs.inotify.max_user_watches=524288 | tee -a /etc/sysctl.conf \\\n && sysctl -p --system\n#  fix crashing gradle because of non ascii characters in ENV variables: https://github.com/gradle/gradle/issues/3117\nRUN localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#  install nodejs\n#  https://github.com/nodejs/docker-node/blob/a5141d841167d109bcad542c9fb636607dabc8b1/6.10/Dockerfile\n#  gpg keys listed at https://github.com/nodejs/node#release-team\nRUN set -ex \\\n && for key in 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D C4F0DFFF4E8C1A8236409D08E73BC641CC11F4C8 B9AE9905FFD7803F25714661B63B535A4C206CA9 77984A986EBC2AA786BC0F66B01FBB92821C587A 8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600 4ED778F539E3634C779C87C6D7062848A1AB005C A48C2BEE680E841632CD4E44F07496B3EB3C1762 B9E2F5981AA6E0CD28160D9FF13993A75599653C; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.xz$\" SHASUMS256.txt | sha256sum -c - \\\n && tar -xJf \"node-v$NODE_VERSION-linux-x64.tar.xz\" -C /usr --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt \\\n && ln -s /usr/bin/node /usr/bin/nodejs\n#  configure npm\nRUN npm config set spin=false\nRUN npm config set progress=false\nRUN npm install react-native-cli -g\n#  Full reference at https://dl.google.com/android/repository/repository2-1.xml\n#  download and unpack android\nRUN mkdir -p /opt/android \\\n && mkdir -p /opt/tools\nWORKDIR /opt/android\nRUN curl --silent https://dl.google.com/android/repository/tools_r$ANDROID_TOOLS_VERSION-linux.zip > android.zip \\\n && unzip android.zip \\\n && rm android.zip\n#  copy tools folder\nCOPY tools/android-accept-licenses.sh /opt/tools/android-accept-licenses.sh\nENV PATH=\"${PATH}:/opt/tools\"\nRUN mkdir -p $ANDROID_HOME/licenses/ \\\n && echo \"d56f5187479451eabf01fb78af6dfcb131a6481e\" > $ANDROID_HOME/licenses/android-sdk-license \\\n && echo \"84831b9409646a918e30573bab4c9c91346d8abd\" > $ANDROID_HOME/licenses/android-sdk-preview-license\n#  sdk\nRUN /opt/tools/android-accept-licenses.sh \"$ANDROID_HOME/tools/bin/sdkmanager tools \\\"platform-tools\\\" \\\"build-tools;25.0.3\\\" \\\"platforms;android-23\\\" \\\"platforms;android-25\\\" \\\"platforms;android-26\\\" \\\"extras;android;m2repository\\\" \\\"extras;google;m2repository\\\" \\\"add-ons;addon-google_apis-google-24\\\" \\\"extras;google;google_play_services\\\"\" \\\n && $ANDROID_HOME/tools/bin/sdkmanager --update\nVOLUME [\"/app\"]\nWORKDIR /app\n","injectedSmells":[],"originalDockerfileHash":"eeddf7c4c29811c244428f45b74a1df6","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM library/ubuntu:16.04\n#   https://github.com/facebook/react-native/blob/8c7b32d5f1da34613628b4b8e0474bc1e185a618/ContainerShip/Dockerfile.android-base\n#   set default build arguments\nARG ANDROID_TOOLS_VERSION=25.2.5\nENV NPM_CONFIG_LOGLEVEL=\"info\"\nARG NODE_VERSION=10.15.0\n#   set default environment variables\nENV ADB_INSTALL_TIMEOUT=\"10\"\nENV PATH=\"${PATH}:/opt/buck/bin/\"\nENV ANDROID_HOME=\"/opt/android\"\nENV ANDROID_SDK_HOME=\"${ANDROID_HOME}\"\nENV PATH=\"${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/tools/bin:${ANDROID_HOME}/platform-tools\"\nENV GRADLE_OPTS=\"-Dorg.gradle.daemon=false -Dorg.gradle.jvmargs=\\\"-Xmx512m -XX:+HeapDumpOnOutOfMemoryError\\\"\"\n#   install system dependencies\nRUN apt-get update -y \\\n && apt-get install autoconf automake expect curl g++ gcc git libqt5widgets5 lib32z1 lib32stdc++6 make maven openjdk-8-jdk python-dev python3-dev qml-module-qtquick-controls qtdeclarative5-dev unzip xz-utils locales -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get autoremove -y \\\n && apt-get clean \\\n && echo fs.inotify.max_user_watches=524288 | tee -a /etc/sysctl.conf \\\n && sysctl -p --system\n#   fix crashing gradle because of non ascii characters in ENV variables: https://github.com/gradle/gradle/issues/3117\nRUN localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US:en\" \\\n    LC_ALL=\"en_US.UTF-8\"\n#   install nodejs\n#   https://github.com/nodejs/docker-node/blob/a5141d841167d109bcad542c9fb636607dabc8b1/6.10/Dockerfile\n#   gpg keys listed at https://github.com/nodejs/node#release-team\nRUN set -ex \\\n && for key in 94AE36675C464D64BAFA68DD7434390BDBE9B9C5 FD3A5288F042B6850C66B31F09FE44734EB7990E 71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 DD8F2338BAE7501E3DD5AC78C273792F7D83545D C4F0DFFF4E8C1A8236409D08E73BC641CC11F4C8 B9AE9905FFD7803F25714661B63B535A4C206CA9 77984A986EBC2AA786BC0F66B01FBB92821C587A 8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600 4ED778F539E3634C779C87C6D7062848A1AB005C A48C2BEE680E841632CD4E44F07496B3EB3C1762 B9E2F5981AA6E0CD28160D9FF13993A75599653C; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\" \\\n && curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n && grep \" node-v$NODE_VERSION-linux-x64.tar.xz$\" SHASUMS256.txt | sha256sum -c - \\\n && tar -xJf \"node-v$NODE_VERSION-linux-x64.tar.xz\" -C /usr --strip-components=1 \\\n && rm \"node-v$NODE_VERSION-linux-x64.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt \\\n && ln -s /usr/bin/node /usr/bin/nodejs\n#   configure npm\nRUN npm config set spin=false\nRUN npm config set progress=false\nRUN npm install react-native-cli -g\n#   Full reference at https://dl.google.com/android/repository/repository2-1.xml\n#   download and unpack android\nRUN mkdir -p /opt/android \\\n && mkdir -p /opt/tools\nWORKDIR /opt/android\nRUN curl --silent https://dl.google.com/android/repository/tools_r$ANDROID_TOOLS_VERSION-linux.zip > android.zip \\\n && unzip android.zip \\\n && rm android.zip\n#   copy tools folder\nCOPY tools/android-accept-licenses.sh /opt/tools/android-accept-licenses.sh\nENV PATH=\"${PATH}:/opt/tools\"\nRUN mkdir -p $ANDROID_HOME/licenses/ \\\n && echo \"d56f5187479451eabf01fb78af6dfcb131a6481e\" > $ANDROID_HOME/licenses/android-sdk-license \\\n && echo \"84831b9409646a918e30573bab4c9c91346d8abd\" > $ANDROID_HOME/licenses/android-sdk-preview-license\n#   sdk\nRUN /opt/tools/android-accept-licenses.sh \"$ANDROID_HOME/tools/bin/sdkmanager tools \\\"platform-tools\\\" \\\"build-tools;25.0.3\\\" \\\"platforms;android-23\\\" \\\"platforms;android-25\\\" \\\"platforms;android-26\\\" \\\"extras;android;m2repository\\\" \\\"extras;google;m2repository\\\" \\\"add-ons;addon-google_apis-google-24\\\" \\\"extras;google;google_play_services\\\"\" \\\n && $ANDROID_HOME/tools/bin/sdkmanager --update\nVOLUME [\"/app\"]\nWORKDIR /app\n","originalDockerfileUglifiedHash":"a62f610cd62cb90bdfbcdd9ad633a430","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/730c3866dd1229d4ea0c156e457a0d28a0c9bcad.dockerfile"}