{"seed":716285765,"processedDockerfileHash":"10547d3de9a363527da43a70875b8c0d","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:latest\nMAINTAINER JAremko <w3techplaygound@gmail.com>\n#   Fix \"Couldn't register with accessibility bus\" error message\nENV NO_AT_BRIDGE=\"1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   basic stuff\nRUN echo 'APT::Get::Assume-Yes \"true\";' >> /etc/apt/apt.conf \\\n && apt-get update \\\n && apt-get install --no-install-recommends bash=5.2.15-2ubuntu1 build-essential=12.9ubuntu3 dbus-x11=1.14.4-1ubuntu1 fontconfig=2.14.1-3ubuntu3 git=1:2.39.2-1ubuntu1 gzip=1.12-1ubuntu1 language-pack-en-base=1:23.04+20230106 libgl1-mesa-glx=23.0.1-1ubuntu1 make=4.3-4.1build1 sudo=1.9.13p1-1ubuntu2 tar=1.34+dfsg-1.1 unzip=6.0-27ubuntu1 \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && chmod 770 su-exec \\\n && mv ./su-exec /usr/local/sbin/ \\\n && apt-get purge build-essential \\\n && apt-get autoremove \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /root/.cache/*\nCOPY asEnvUser /usr/local/sbin/\n#   Only for sudoers\nRUN chown root /usr/local/sbin/asEnvUser \\\n && chmod 700 /usr/local/sbin/asEnvUser\n#   ^^^^^^^ Those layers are shared ^^^^^^^\n#   Build Remacs\nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=12.9ubuntu3 curl=7.88.1-7ubuntu1 \\\n && curl https://sh.rustup.rs -sSf | sh -s -- -y \\\n && /root/.cargo/bin/rustup install nightly \\\n && git clone https://github.com/Wilfred/remacs.git /tmp/remacs-bd \\\n && cd /tmp/remacs-bd \\\n && export PATH=$PATH:/root/.cargo/bin \\\n && rustup override set nightly \\\n && apt-get install --no-install-recommends autoconf=2.71-3 libgif7=5.2.1-2.5 gnutls-bin=3.7.8-5ubuntu1 libgtk-3-0=3.24.37-1ubuntu1 libjpeg8=8c-2ubuntu11 libncurses5=6.4-2 libtiff5=4.4.0-6ubuntu1 libxml2=2.9.14+dfsg-1.1build2 libxpm4=1:3.5.12-1.1 libgif-dev=5.2.1-2.5 libgnutls-dev libgtk-3-dev=3.24.37-1ubuntu1 libjpeg-dev=8c-2ubuntu11 libncurses5-dev=6.4-2 libtiff5-dev=4.5.0-4ubuntu1 libxml2-dev=2.9.14+dfsg-1.1build2 libxpm-dev=1:3.5.12-1.1 texinfo=6.8-6build2 \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && rustup self uninstall \\\n && apt-get purge autoconf build-essential curl libgif-dev libgnutls-dev libgtk-3-dev libjpeg-dev libncurses5-dev libtiff-dev libxml2-dev libxpm-dev \\\n && rm -rf /tmp/* /root/.cargo /var/lib/apt/lists/* /root/.cache/*\nENV UNAME=\"emacser\" \\\n    GNAME=\"emacs\" \\\n    UHOME=\"/home/emacs\" \\\n    UID=\"1000\" \\\n    GID=\"1000\" \\\n    WORKSPACE=\"/mnt/workspace\" \\\n    SHELL=\"/bin/bash\"\nWORKDIR \"${WORKSPACE}\"\nENTRYPOINT [\"asEnvUser\"]\nCMD [\"bash\", \"-c\", \"emacs\", \";\", \"/bin/bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:latest\nMAINTAINER JAremko <w3techplaygound@gmail.com>\n#  Fix \"Couldn't register with accessibility bus\" error message\nENV NO_AT_BRIDGE=\"1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  basic stuff\nRUN echo 'APT::Get::Assume-Yes \"true\";' >> /etc/apt/apt.conf \\\n && apt-get update \\\n && apt-get install bash build-essential dbus-x11 fontconfig git gzip language-pack-en-base libgl1-mesa-glx make sudo tar unzip \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && chmod 770 su-exec \\\n && mv ./su-exec /usr/local/sbin/ \\\n && apt-get purge build-essential \\\n && apt-get autoremove \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /root/.cache/*\nCOPY asEnvUser /usr/local/sbin/\n#  Only for sudoers\nRUN chown root /usr/local/sbin/asEnvUser \\\n && chmod 700 /usr/local/sbin/asEnvUser\n#  ^^^^^^^ Those layers are shared ^^^^^^^\n#  Build Remacs\nRUN apt-get update \\\n && apt-get install build-essential curl \\\n && curl https://sh.rustup.rs -sSf | sh -s -- -y \\\n && /root/.cargo/bin/rustup install nightly \\\n && git clone https://github.com/Wilfred/remacs.git /tmp/remacs-bd \\\n && cd /tmp/remacs-bd \\\n && export PATH=$PATH:/root/.cargo/bin \\\n && rustup override set nightly \\\n && apt-get install autoconf libgif7 gnutls-bin libgtk-3-0 libjpeg8 libncurses5 libtiff5 libxml2 libxpm4 libgif-dev libgnutls-dev libgtk-3-dev libjpeg-dev libncurses5-dev libtiff5-dev libxml2-dev libxpm-dev texinfo \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && rustup self uninstall \\\n && apt-get purge autoconf build-essential curl libgif-dev libgnutls-dev libgtk-3-dev libjpeg-dev libncurses5-dev libtiff-dev libxml2-dev libxpm-dev \\\n && rm -rf /tmp/* /root/.cargo /var/lib/apt/lists/* /root/.cache/*\nENV UNAME=\"emacser\" \\\n    GNAME=\"emacs\" \\\n    UHOME=\"/home/emacs\" \\\n    UID=\"1000\" \\\n    GID=\"1000\" \\\n    WORKSPACE=\"/mnt/workspace\" \\\n    SHELL=\"/bin/bash\"\nWORKDIR \"${WORKSPACE}\"\nENTRYPOINT [\"asEnvUser\"]\nCMD [\"bash\", \"-c\", \"emacs\", \";\", \"/bin/bash\"]\n","injectedSmells":[],"originalDockerfileHash":"a602a184d072f4d9a7a288ab2ab1a745","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:latest\nMAINTAINER JAremko <w3techplaygound@gmail.com>\n#   Fix \"Couldn't register with accessibility bus\" error message\nENV NO_AT_BRIDGE=\"1\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   basic stuff\nRUN echo 'APT::Get::Assume-Yes \"true\";' >> /etc/apt/apt.conf \\\n && apt-get update \\\n && apt-get install bash build-essential dbus-x11 fontconfig git gzip language-pack-en-base libgl1-mesa-glx make sudo tar unzip \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && chmod 770 su-exec \\\n && mv ./su-exec /usr/local/sbin/ \\\n && apt-get purge build-essential \\\n && apt-get autoremove \\\n && rm -rf /tmp/* /var/lib/apt/lists/* /root/.cache/*\nCOPY asEnvUser /usr/local/sbin/\n#   Only for sudoers\nRUN chown root /usr/local/sbin/asEnvUser \\\n && chmod 700 /usr/local/sbin/asEnvUser\n#   ^^^^^^^ Those layers are shared ^^^^^^^\n#   Build Remacs\nRUN apt-get update \\\n && apt-get install build-essential curl \\\n && curl https://sh.rustup.rs -sSf | sh -s -- -y \\\n && /root/.cargo/bin/rustup install nightly \\\n && git clone https://github.com/Wilfred/remacs.git /tmp/remacs-bd \\\n && cd /tmp/remacs-bd \\\n && export PATH=$PATH:/root/.cargo/bin \\\n && rustup override set nightly \\\n && apt-get install autoconf libgif7 gnutls-bin libgtk-3-0 libjpeg8 libncurses5 libtiff5 libxml2 libxpm4 libgif-dev libgnutls-dev libgtk-3-dev libjpeg-dev libncurses5-dev libtiff5-dev libxml2-dev libxpm-dev texinfo \\\n && ./autogen.sh \\\n && ./configure \\\n && make \\\n && rustup self uninstall \\\n && apt-get purge autoconf build-essential curl libgif-dev libgnutls-dev libgtk-3-dev libjpeg-dev libncurses5-dev libtiff-dev libxml2-dev libxpm-dev \\\n && rm -rf /tmp/* /root/.cargo /var/lib/apt/lists/* /root/.cache/*\nENV UNAME=\"emacser\" \\\n    GNAME=\"emacs\" \\\n    UHOME=\"/home/emacs\" \\\n    UID=\"1000\" \\\n    GID=\"1000\" \\\n    WORKSPACE=\"/mnt/workspace\" \\\n    SHELL=\"/bin/bash\"\nWORKDIR \"${WORKSPACE}\"\nENTRYPOINT [\"asEnvUser\"]\nCMD [\"bash\", \"-c\", \"emacs\", \";\", \"/bin/bash\"]\n","originalDockerfileUglifiedHash":"865da802f4ca2349748ba31d15a5e7dc","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/1ce14d18e264589d66a111b065f0f1bbd726de25.dockerfile"}