{"seed":823206629,"processedDockerfileHash":"d133cd599606a1bc6c18fa1af449bc38","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM phusion/baseimage:0.9.12\nLABEL base.image=\"phusion/baseimage:0.9.12\"\nLABEL version=\"1\"\nLABEL software=\"cfsan_snp_pipeline\"\nLABEL software.version=\"2.0.2\"\nLABEL description=\"A pipeline for the production of SNP matrices from sequence data used in the phylogenetic analysis of pathogenic organisms sequenced from samples of interest to food safety.\"\nLABEL website=\"https://github.com/CFSAN-Biostatistics/snp-pipeline\"\nLABEL lisence=\"https://github.com/CFSAN-Biostatistics/snp-pipeline/blob/master/LICENSE.txt\"\n#   This Dockerfile is based on a Docker file from Justin Payne which can be found here:\n#   https://hub.docker.com/r/crashfrog/snp-pipeline/dockerfile\n#   The dockerfile has been modified from it's original form by Curtis Kapsak\nMAINTAINER Justin Payne, <justin.payne@fda.hhs.gov>\nMAINTAINER Curtis Kapsak, <pjx8@cdc.gov>\n#   Had to add this since openjdk-8-jre is not available in the apt-repository\n#   for Ubuntu:trusty/Ubuntu 14.04 (version of Ubuntu that Phusion is based on)\nRUN add-apt-repository ppa:openjdk-r/ppa\nWORKDIR /tmp/\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends bowtie2 openjdk-8-jre g++ gcc gsl-bin libgsl0-dev make perl bzip2 python python-dev wget tabix libncurses5-dev libbz2-dev liblzma-dev libcurl4-gnutls-dev zlib1g-dev libssl-dev build-essential ca-certificates libperl-dev -y \\\n && apt-get clean\n#   install pip (code originally from Justin)\nRUN wget https://bootstrap.pypa.io/get-pip.py -q \\\n && python get-pip.py\n#   install samtools, since the version in apt-get is too far out-of-date\nRUN mkdir samtools \\\n && cd samtools \\\n && wget https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 \\\n && tar -xjf samtools-1.9.tar.bz2 \\\n && rm samtools-1.9.tar.bz2 \\\n && cd samtools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#   install bcftools\nRUN mkdir bcftools \\\n && cd bcftools \\\n && wget https://github.com/samtools/bcftools/releases/download/1.9/bcftools-1.9.tar.bz2 \\\n && tar -xjf bcftools-1.9.tar.bz2 \\\n && rm bcftools-1.9.tar.bz2 \\\n && cd bcftools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#   get picard jar file\nRUN mkdir /picard \\\n && cd /picard \\\n && wget https://github.com/broadinstitute/picard/releases/download/2.18.4/picard.jar\n#   get GATK 3.8-1-0 jar flie\nRUN mkdir /gatk \\\n && cd /gatk \\\n && wget -O ./gatk.tar.bz2 'https://software.broadinstitute.org/gatk/download/auth?package=GATK-archive&version=3.8-1-0-gf15c1c3ef' \\\n && tar -xjf gatk.tar.bz2 \\\n && rm gatk.tar.bz2\n#   get VarScan and SRA-toolkit\nRUN wget http://downloads.sourceforge.net/project/varscan/VarScan.v2.3.7.jar -q \\\n && cp VarScan.v2.3.7.jar /usr/bin/VarScan.jar \\\n && wget http://www.niehs.nih.gov/research/resources/assets/docs/artsrcchocolatecherrycake031915linuxtgz.tgz -q \\\n && tar -zxf /tmp/artsrcchocolatecherrycake031915linuxtgz.tgz \\\n && cd /tmp/art_src_ChocolateCherryCake_Linux \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /tmp/ \\\n && wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.3.5-2/sratoolkit.2.3.5-2-ubuntu64.tar.gz -q \\\n && tar -zxf /tmp/sratoolkit.2.3.5-2-ubuntu64.tar.gz \\\n && cp /tmp/sratoolkit.2.3.5-2-ubuntu64/bin/fastq-dump.2.3.5.2 /usr/bin/fastq-dump \\\n && rm -r /tmp/*\n#  install snp-pipeline and snp-mutator\nRUN pip install numpy==1.24.2 snp-pipeline==2.2.1 biopython==1.81 snp-mutator==1.2.0\n#   set java CLASSPATH variables\nENV CLASSPATH=\"/usr/bin/VarScan.jar:/picard/picard.jar:/gatk/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar\"\n#   not sure why this is here, or what program uses NUMCORES, but I'm going to leave it for now.\nENV NUMCORES=\"1\"\n#   Test snp_pipeline (code originally from Justin). Running copy_snppipeline_data.py generates an message the the script is deprecated\n#   but I figured I would leave it since the below commands test that the image runs properly.\nWORKDIR /test/\nRUN copy_snppipeline_data.py lambdaVirusInputs testLambdaVirus \\\n && cd testLambdaVirus \\\n && run_snp_pipeline.sh -s samples reference/lambda_virus.fasta \\\n && copy_snppipeline_data.py lambdaVirusExpectedResults expectedResults \\\n && diff -q snplist.txt expectedResults/snplist.txt \\\n && diff -q snpma.fasta expectedResults/snpma.fasta \\\n && diff -q referenceSNP.fasta expectedResults/referenceSNP.fasta\n#   make a DIR called /data for running cfsan-snp-pipeline in\nRUN mkdir /data\nWORKDIR /data\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM phusion/baseimage:0.9.12\nLABEL base.image=\"phusion/baseimage:0.9.12\"\nLABEL version=\"1\"\nLABEL software=\"cfsan_snp_pipeline\"\nLABEL software.version=\"2.0.2\"\nLABEL description=\"A pipeline for the production of SNP matrices from sequence data used in the phylogenetic analysis of pathogenic organisms sequenced from samples of interest to food safety.\"\nLABEL website=\"https://github.com/CFSAN-Biostatistics/snp-pipeline\"\nLABEL lisence=\"https://github.com/CFSAN-Biostatistics/snp-pipeline/blob/master/LICENSE.txt\"\n#  This Dockerfile is based on a Docker file from Justin Payne which can be found here:\n#  https://hub.docker.com/r/crashfrog/snp-pipeline/dockerfile\n#  The dockerfile has been modified from it's original form by Curtis Kapsak\nMAINTAINER Justin Payne, <justin.payne@fda.hhs.gov>\nMAINTAINER Curtis Kapsak, <pjx8@cdc.gov>\n#  Had to add this since openjdk-8-jre is not available in the apt-repository\n#  for Ubuntu:trusty/Ubuntu 14.04 (version of Ubuntu that Phusion is based on)\nRUN add-apt-repository ppa:openjdk-r/ppa\nWORKDIR /tmp/\nRUN apt-get update -y \\\n && apt-get install bowtie2 openjdk-8-jre g++ gcc gsl-bin libgsl0-dev make perl bzip2 python python-dev wget tabix libncurses5-dev libbz2-dev liblzma-dev libcurl4-gnutls-dev zlib1g-dev libssl-dev build-essential ca-certificates libperl-dev -y \\\n && apt-get clean\n#  install pip (code originally from Justin)\nRUN wget https://bootstrap.pypa.io/get-pip.py -q \\\n && python get-pip.py\n#  install samtools, since the version in apt-get is too far out-of-date\nRUN mkdir samtools \\\n && cd samtools \\\n && wget https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 \\\n && tar -xjf samtools-1.9.tar.bz2 \\\n && rm samtools-1.9.tar.bz2 \\\n && cd samtools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#  install bcftools\nRUN mkdir bcftools \\\n && cd bcftools \\\n && wget https://github.com/samtools/bcftools/releases/download/1.9/bcftools-1.9.tar.bz2 \\\n && tar -xjf bcftools-1.9.tar.bz2 \\\n && rm bcftools-1.9.tar.bz2 \\\n && cd bcftools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#  get picard jar file\nRUN mkdir /picard \\\n && cd /picard \\\n && wget https://github.com/broadinstitute/picard/releases/download/2.18.4/picard.jar\n#  get GATK 3.8-1-0 jar flie\nRUN mkdir /gatk \\\n && cd /gatk \\\n && wget -O ./gatk.tar.bz2 'https://software.broadinstitute.org/gatk/download/auth?package=GATK-archive&version=3.8-1-0-gf15c1c3ef' \\\n && tar -xjf gatk.tar.bz2 \\\n && rm gatk.tar.bz2\n#  get VarScan and SRA-toolkit\nRUN wget http://downloads.sourceforge.net/project/varscan/VarScan.v2.3.7.jar -q \\\n && cp VarScan.v2.3.7.jar /usr/bin/VarScan.jar \\\n && wget http://www.niehs.nih.gov/research/resources/assets/docs/artsrcchocolatecherrycake031915linuxtgz.tgz -q \\\n && tar -zxf /tmp/artsrcchocolatecherrycake031915linuxtgz.tgz \\\n && cd /tmp/art_src_ChocolateCherryCake_Linux \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /tmp/ \\\n && wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.3.5-2/sratoolkit.2.3.5-2-ubuntu64.tar.gz -q \\\n && tar -zxf /tmp/sratoolkit.2.3.5-2-ubuntu64.tar.gz \\\n && cp /tmp/sratoolkit.2.3.5-2-ubuntu64/bin/fastq-dump.2.3.5.2 /usr/bin/fastq-dump \\\n && rm -r /tmp/*\n# install snp-pipeline and snp-mutator\nRUN pip install numpy snp-pipeline biopython snp-mutator\n#  set java CLASSPATH variables\nENV CLASSPATH=\"/usr/bin/VarScan.jar:/picard/picard.jar:/gatk/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar\"\n#  not sure why this is here, or what program uses NUMCORES, but I'm going to leave it for now.\nENV NUMCORES=\"1\"\n#  Test snp_pipeline (code originally from Justin). Running copy_snppipeline_data.py generates an message the the script is deprecated\n#  but I figured I would leave it since the below commands test that the image runs properly.\nWORKDIR /test/\nRUN copy_snppipeline_data.py lambdaVirusInputs testLambdaVirus \\\n && cd testLambdaVirus \\\n && run_snp_pipeline.sh -s samples reference/lambda_virus.fasta \\\n && copy_snppipeline_data.py lambdaVirusExpectedResults expectedResults \\\n && diff -q snplist.txt expectedResults/snplist.txt \\\n && diff -q snpma.fasta expectedResults/snpma.fasta \\\n && diff -q referenceSNP.fasta expectedResults/referenceSNP.fasta\n#  make a DIR called /data for running cfsan-snp-pipeline in\nRUN mkdir /data\nWORKDIR /data\n","injectedSmells":[],"originalDockerfileHash":"8c3f9fb5ceb788714630f32a311122e5","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM phusion/baseimage:0.9.12\nLABEL base.image=\"phusion/baseimage:0.9.12\"\nLABEL version=\"1\"\nLABEL software=\"cfsan_snp_pipeline\"\nLABEL software.version=\"2.0.2\"\nLABEL description=\"A pipeline for the production of SNP matrices from sequence data used in the phylogenetic analysis of pathogenic organisms sequenced from samples of interest to food safety.\"\nLABEL website=\"https://github.com/CFSAN-Biostatistics/snp-pipeline\"\nLABEL lisence=\"https://github.com/CFSAN-Biostatistics/snp-pipeline/blob/master/LICENSE.txt\"\n#   This Dockerfile is based on a Docker file from Justin Payne which can be found here:\n#   https://hub.docker.com/r/crashfrog/snp-pipeline/dockerfile\n#   The dockerfile has been modified from it's original form by Curtis Kapsak\nMAINTAINER Justin Payne, <justin.payne@fda.hhs.gov>\nMAINTAINER Curtis Kapsak, <pjx8@cdc.gov>\n#   Had to add this since openjdk-8-jre is not available in the apt-repository\n#   for Ubuntu:trusty/Ubuntu 14.04 (version of Ubuntu that Phusion is based on)\nRUN add-apt-repository ppa:openjdk-r/ppa\nWORKDIR /tmp/\nRUN apt-get update -y \\\n && apt-get install bowtie2 openjdk-8-jre g++ gcc gsl-bin libgsl0-dev make perl bzip2 python python-dev wget tabix libncurses5-dev libbz2-dev liblzma-dev libcurl4-gnutls-dev zlib1g-dev libssl-dev build-essential ca-certificates libperl-dev -y \\\n && apt-get clean\n#   install pip (code originally from Justin)\nRUN wget https://bootstrap.pypa.io/get-pip.py -q \\\n && python get-pip.py\n#   install samtools, since the version in apt-get is too far out-of-date\nRUN mkdir samtools \\\n && cd samtools \\\n && wget https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 \\\n && tar -xjf samtools-1.9.tar.bz2 \\\n && rm samtools-1.9.tar.bz2 \\\n && cd samtools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#   install bcftools\nRUN mkdir bcftools \\\n && cd bcftools \\\n && wget https://github.com/samtools/bcftools/releases/download/1.9/bcftools-1.9.tar.bz2 \\\n && tar -xjf bcftools-1.9.tar.bz2 \\\n && rm bcftools-1.9.tar.bz2 \\\n && cd bcftools-1.9 \\\n && ./configure \\\n && make \\\n && make install\n#   get picard jar file\nRUN mkdir /picard \\\n && cd /picard \\\n && wget https://github.com/broadinstitute/picard/releases/download/2.18.4/picard.jar\n#   get GATK 3.8-1-0 jar flie\nRUN mkdir /gatk \\\n && cd /gatk \\\n && wget -O ./gatk.tar.bz2 'https://software.broadinstitute.org/gatk/download/auth?package=GATK-archive&version=3.8-1-0-gf15c1c3ef' \\\n && tar -xjf gatk.tar.bz2 \\\n && rm gatk.tar.bz2\n#   get VarScan and SRA-toolkit\nRUN wget http://downloads.sourceforge.net/project/varscan/VarScan.v2.3.7.jar -q \\\n && cp VarScan.v2.3.7.jar /usr/bin/VarScan.jar \\\n && wget http://www.niehs.nih.gov/research/resources/assets/docs/artsrcchocolatecherrycake031915linuxtgz.tgz -q \\\n && tar -zxf /tmp/artsrcchocolatecherrycake031915linuxtgz.tgz \\\n && cd /tmp/art_src_ChocolateCherryCake_Linux \\\n && ./configure \\\n && make \\\n && make install \\\n && cd /tmp/ \\\n && wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.3.5-2/sratoolkit.2.3.5-2-ubuntu64.tar.gz -q \\\n && tar -zxf /tmp/sratoolkit.2.3.5-2-ubuntu64.tar.gz \\\n && cp /tmp/sratoolkit.2.3.5-2-ubuntu64/bin/fastq-dump.2.3.5.2 /usr/bin/fastq-dump \\\n && rm -r /tmp/*\n#  install snp-pipeline and snp-mutator\nRUN pip install numpy snp-pipeline biopython snp-mutator\n#   set java CLASSPATH variables\nENV CLASSPATH=\"/usr/bin/VarScan.jar:/picard/picard.jar:/gatk/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar\"\n#   not sure why this is here, or what program uses NUMCORES, but I'm going to leave it for now.\nENV NUMCORES=\"1\"\n#   Test snp_pipeline (code originally from Justin). Running copy_snppipeline_data.py generates an message the the script is deprecated\n#   but I figured I would leave it since the below commands test that the image runs properly.\nWORKDIR /test/\nRUN copy_snppipeline_data.py lambdaVirusInputs testLambdaVirus \\\n && cd testLambdaVirus \\\n && run_snp_pipeline.sh -s samples reference/lambda_virus.fasta \\\n && copy_snppipeline_data.py lambdaVirusExpectedResults expectedResults \\\n && diff -q snplist.txt expectedResults/snplist.txt \\\n && diff -q snpma.fasta expectedResults/snpma.fasta \\\n && diff -q referenceSNP.fasta expectedResults/referenceSNP.fasta\n#   make a DIR called /data for running cfsan-snp-pipeline in\nRUN mkdir /data\nWORKDIR /data\n","originalDockerfileUglifiedHash":"540b3a60204e607a76aef2817e38b98e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/b528cf870edcf98d5ad66c854d52a6e0fe571d7c.dockerfile"}