{"seed":2142216567,"processedDockerfileHash":"1c21039956069af170fa250bda6f70b1","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM ubuntu:16.04\nMAINTAINER H2O.ai <ops@h2o.ai>\n#   Linux\nRUN apt-get update -y \\\n && (apt-get update ;apt-get install --no-install-recommends apt-transport-https=1.2.35 apt-utils=1.2.35 python-software-properties=0.96.20.10 software-properties-common=0.96.20.10 -y )\n#   Java8\nRUN add-apt-repository -y ppa:webupd8team/java\nRUN :\n#   Linux\nRUN (apt-get update ;apt-get install --no-install-recommends cpio=2.11+dfsg-5ubuntu1.1 curl=7.47.0-1ubuntu2.19 dirmngr=2.1.11-6ubuntu2.1 gdebi-core=0.9.5.7ubuntu1 git=1:2.7.4-0ubuntu1.10 net-tools=1.60-26ubuntu1 sudo=1.8.16-0ubuntu1.10 vim=2:7.4.1689-3ubuntu1.5 wget=1.17.1-1ubuntu1.5 zip=3.0-11 -y )\n#   Java 8\nRUN echo debconf shared/accepted-oracle-license-v1-1 select true | debconf-set-selections \\\n && echo debconf shared/accepted-oracle-license-v1-1 seen true | debconf-set-selections \\\n && (apt-get update ;apt-get install --no-install-recommends oracle-java8-installer -y )\n#   Log directory used by run.sh\nRUN mkdir /log \\\n && chmod o+w /log\n#   ----- USER H2O -----\n#   h2o user\nRUN useradd -ms /bin/bash h2o \\\n && usermod -a -G sudo h2o \\\n && echo \"h2o:h2o\" | chpasswd \\\n && echo 'h2o ALL=NOPASSWD: ALL' >> /etc/sudoers\nRUN (apt-get update ;apt-get install --no-install-recommends bzip2=1.0.6-8ubuntu0.2 -y )\nUSER h2o\nWORKDIR /home/h2o\n#   Miniconda\nENV MINICONDA_FILE=\"Miniconda3-4.5.4-Linux-x86_64.sh\"\nRUN wget https://repo.continuum.io/miniconda/${MINICONDA_FILE} \\\n && bash ${MINICONDA_FILE} -b -p /home/h2o/Miniconda3 \\\n && /home/h2o/Miniconda3/bin/conda create -y --name pysparkling python=2.7 anaconda \\\n && /home/h2o/Miniconda3/bin/conda create -y --name h2o python=3.6 anaconda \\\n && /home/h2o/Miniconda3/envs/h2o/bin/jupyter notebook --generate-config \\\n && sed -i \"s/#c.NotebookApp.token = '<generated>'/c.NotebookApp.token = 'h2o'/\" .jupyter/jupyter_notebook_config.py \\\n && rm ${MINICONDA_FILE}\n#   H2O\nENV H2O_BRANCH_NAME=\"rel-wright\"\nENV H2O_BUILD_NUMBER=\"2\"\nENV H2O_PROJECT_VERSION=\"3.20.0.${H2O_BUILD_NUMBER}\"\nENV H2O_DIRECTORY=\"h2o-${H2O_PROJECT_VERSION}\"\nRUN wget http://h2o-release.s3.amazonaws.com/h2o/${H2O_BRANCH_NAME}/${H2O_BUILD_NUMBER}/h2o-${H2O_PROJECT_VERSION}.zip \\\n && unzip ${H2O_DIRECTORY}.zip \\\n && rm ${H2O_DIRECTORY}.zip \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate h2o \\\n && pip install ${H2O_DIRECTORY}/python/h2o*.whl\"\n#   Spark\nENV SPARK_VERSION=\"2.3.1\"\nENV SPARK_HADOOP_VERSION=\"2.7\"\nENV SPARK_DIRECTORY=\"spark-${SPARK_VERSION}-bin-hadoop${SPARK_HADOOP_VERSION}\"\nENV SPARK_HOME=\"/home/h2o/bin/spark\"\nRUN mkdir bin \\\n && cd bin \\\n && mkdir -p ${SPARK_HOME} \\\n && wget http://mirrors.sonic.net/apache/spark/spark-${SPARK_VERSION}/${SPARK_DIRECTORY}.tgz \\\n && tar zxvf ${SPARK_DIRECTORY}.tgz -C ${SPARK_HOME} --strip-components 1 \\\n && rm ${SPARK_DIRECTORY}.tgz \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate pysparkling \\\n && pip install tabulate future colorama\"\n#   Sparkling Water\nENV SPARKLING_WATER_BRANCH_NUMBER=\"2.3\"\nENV SPARKLING_WATER_BRANCH_NAME=\"rel-${SPARKLING_WATER_BRANCH_NUMBER}\"\nENV SPARKLING_WATER_BUILD_NUMBER=\"8\"\nENV SPARKLING_WATER_PROJECT_VERSION=\"${SPARKLING_WATER_BRANCH_NUMBER}.${SPARKLING_WATER_BUILD_NUMBER}\"\nENV SPARKLING_WATER_DIRECTORY=\"sparkling-water-${SPARKLING_WATER_PROJECT_VERSION}\"\nRUN cd bin \\\n && wget http://h2o-release.s3.amazonaws.com/sparkling-water/${SPARKLING_WATER_BRANCH_NAME}/${SPARKLING_WATER_BUILD_NUMBER}/${SPARKLING_WATER_DIRECTORY}.zip \\\n && unzip ${SPARKLING_WATER_DIRECTORY}.zip \\\n && mv ${SPARKLING_WATER_DIRECTORY} sparkling-water \\\n && rm ${SPARKLING_WATER_DIRECTORY}.zip \\\n && /home/h2o/Miniconda3/envs/pysparkling/bin/ipython profile create pyspark\nCOPY --chown=h2o conf/pyspark/00-pyspark-setup.py /home/h2o/.ipython/profile_pyspark/startup/\nCOPY --chown=h2o conf/pyspark/kernel.json /home/h2o/Miniconda3/envs/h2o/share/jupyter/kernels/pyspark/\nENV SPARKLING_WATER_HOME=\"/home/h2o/bin/sparkling-water\"\n#  #####################################################################\n#   ADD CONTENT FOR INDIVIDUAL HANDS-ON SESSIONS HERE\n#  #####################################################################\n#   Prologue\nRUN mkdir h2o-3-hands-on \\\n && mkdir sparkling-water-hands-on\nRUN cd h2o-3-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-public-test-data/bigdata/laptop/lending-club/LoanStats3a.csv\nRUN cd sparkling-water-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-training/events/h2o_world/TimeSeries/all_stocks_2006-01-01_to_2018-01-01.csv\n#   H2O-3 Demo\nCOPY --chown=h2o h2o-3-hands-on/LendingClubTraining.ipynb h2o-3-hands-on/\n#   Sparkling Water Demo\nCOPY --chown=h2o sparkling-water-hands-on/ForecastingVolume.ipynb sparkling-water-hands-on/\n#  #####################################################################\n#   ----- RUN INFORMATION -----\nUSER h2o\nWORKDIR /home/h2o\nENV JAVA_HOME=\"/usr\"\n#   Entry point\nCOPY run.sh /run.sh\nENTRYPOINT [\"/run.sh\"]\nEXPOSE 54321/tcp\nEXPOSE 54327/tcp\nEXPOSE 8888/tcp\nEXPOSE 4040/tcp\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:16.04\nMAINTAINER H2O.ai <ops@h2o.ai>\n#  Linux\nRUN apt-get update -y \\\n && apt-get install apt-transport-https apt-utils python-software-properties software-properties-common -y\n#  Java8\nRUN add-apt-repository -y ppa:webupd8team/java\nRUN apt-get update -y\n#  Linux\nRUN apt-get install cpio curl dirmngr gdebi-core git net-tools sudo vim wget zip -y\n#  Java 8\nRUN echo debconf shared/accepted-oracle-license-v1-1 select true | debconf-set-selections \\\n && echo debconf shared/accepted-oracle-license-v1-1 seen true | debconf-set-selections \\\n && apt-get install oracle-java8-installer -y\n#  Log directory used by run.sh\nRUN mkdir /log \\\n && chmod o+w /log\n#  ----- USER H2O -----\n#  h2o user\nRUN useradd -ms /bin/bash h2o \\\n && usermod -a -G sudo h2o \\\n && echo \"h2o:h2o\" | chpasswd \\\n && echo 'h2o ALL=NOPASSWD: ALL' >> /etc/sudoers\nRUN apt-get install bzip2 -y\nUSER h2o\nWORKDIR /home/h2o\n#  Miniconda\nENV MINICONDA_FILE=\"Miniconda3-4.5.4-Linux-x86_64.sh\"\nRUN wget https://repo.continuum.io/miniconda/${MINICONDA_FILE} \\\n && bash ${MINICONDA_FILE} -b -p /home/h2o/Miniconda3 \\\n && /home/h2o/Miniconda3/bin/conda create -y --name pysparkling python=2.7 anaconda \\\n && /home/h2o/Miniconda3/bin/conda create -y --name h2o python=3.6 anaconda \\\n && /home/h2o/Miniconda3/envs/h2o/bin/jupyter notebook --generate-config \\\n && sed -i \"s/#c.NotebookApp.token = '<generated>'/c.NotebookApp.token = 'h2o'/\" .jupyter/jupyter_notebook_config.py \\\n && rm ${MINICONDA_FILE}\n#  H2O\nENV H2O_BRANCH_NAME=\"rel-wright\"\nENV H2O_BUILD_NUMBER=\"2\"\nENV H2O_PROJECT_VERSION=\"3.20.0.${H2O_BUILD_NUMBER}\"\nENV H2O_DIRECTORY=\"h2o-${H2O_PROJECT_VERSION}\"\nRUN wget http://h2o-release.s3.amazonaws.com/h2o/${H2O_BRANCH_NAME}/${H2O_BUILD_NUMBER}/h2o-${H2O_PROJECT_VERSION}.zip \\\n && unzip ${H2O_DIRECTORY}.zip \\\n && rm ${H2O_DIRECTORY}.zip \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate h2o \\\n && pip install ${H2O_DIRECTORY}/python/h2o*.whl\"\n#  Spark\nENV SPARK_VERSION=\"2.3.1\"\nENV SPARK_HADOOP_VERSION=\"2.7\"\nENV SPARK_DIRECTORY=\"spark-${SPARK_VERSION}-bin-hadoop${SPARK_HADOOP_VERSION}\"\nENV SPARK_HOME=\"/home/h2o/bin/spark\"\nRUN mkdir bin \\\n && cd bin \\\n && mkdir -p ${SPARK_HOME} \\\n && wget http://mirrors.sonic.net/apache/spark/spark-${SPARK_VERSION}/${SPARK_DIRECTORY}.tgz \\\n && tar zxvf ${SPARK_DIRECTORY}.tgz -C ${SPARK_HOME} --strip-components 1 \\\n && rm ${SPARK_DIRECTORY}.tgz \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate pysparkling \\\n && pip install tabulate future colorama\"\n#  Sparkling Water\nENV SPARKLING_WATER_BRANCH_NUMBER=\"2.3\"\nENV SPARKLING_WATER_BRANCH_NAME=\"rel-${SPARKLING_WATER_BRANCH_NUMBER}\"\nENV SPARKLING_WATER_BUILD_NUMBER=\"8\"\nENV SPARKLING_WATER_PROJECT_VERSION=\"${SPARKLING_WATER_BRANCH_NUMBER}.${SPARKLING_WATER_BUILD_NUMBER}\"\nENV SPARKLING_WATER_DIRECTORY=\"sparkling-water-${SPARKLING_WATER_PROJECT_VERSION}\"\nRUN cd bin \\\n && wget http://h2o-release.s3.amazonaws.com/sparkling-water/${SPARKLING_WATER_BRANCH_NAME}/${SPARKLING_WATER_BUILD_NUMBER}/${SPARKLING_WATER_DIRECTORY}.zip \\\n && unzip ${SPARKLING_WATER_DIRECTORY}.zip \\\n && mv ${SPARKLING_WATER_DIRECTORY} sparkling-water \\\n && rm ${SPARKLING_WATER_DIRECTORY}.zip \\\n && /home/h2o/Miniconda3/envs/pysparkling/bin/ipython profile create pyspark\nCOPY --chown=h2o conf/pyspark/00-pyspark-setup.py /home/h2o/.ipython/profile_pyspark/startup/\nCOPY --chown=h2o conf/pyspark/kernel.json /home/h2o/Miniconda3/envs/h2o/share/jupyter/kernels/pyspark/\nENV SPARKLING_WATER_HOME=\"/home/h2o/bin/sparkling-water\"\n# #####################################################################\n#  ADD CONTENT FOR INDIVIDUAL HANDS-ON SESSIONS HERE\n# #####################################################################\n#  Prologue\nRUN mkdir h2o-3-hands-on \\\n && mkdir sparkling-water-hands-on\nRUN cd h2o-3-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-public-test-data/bigdata/laptop/lending-club/LoanStats3a.csv\nRUN cd sparkling-water-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-training/events/h2o_world/TimeSeries/all_stocks_2006-01-01_to_2018-01-01.csv\n#  H2O-3 Demo\nCOPY --chown=h2o h2o-3-hands-on/LendingClubTraining.ipynb h2o-3-hands-on/\n#  Sparkling Water Demo\nCOPY --chown=h2o sparkling-water-hands-on/ForecastingVolume.ipynb sparkling-water-hands-on/\n# #####################################################################\n#  ----- RUN INFORMATION -----\nUSER h2o\nWORKDIR /home/h2o\nENV JAVA_HOME=\"/usr\"\n#  Entry point\nCOPY run.sh /run.sh\nENTRYPOINT [\"/run.sh\"]\nEXPOSE 54321/tcp\nEXPOSE 54327/tcp\nEXPOSE 8888/tcp\nEXPOSE 4040/tcp\n","injectedSmells":[],"originalDockerfileHash":"bd362456f5fa437dea4529a47fafa177","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:16.04\nMAINTAINER H2O.ai <ops@h2o.ai>\n#   Linux\nRUN apt-get update -y \\\n && apt-get install apt-transport-https apt-utils python-software-properties software-properties-common -y\n#   Java8\nRUN add-apt-repository -y ppa:webupd8team/java\nRUN apt-get update -y\n#   Linux\nRUN apt-get install cpio curl dirmngr gdebi-core git net-tools sudo vim wget zip -y\n#   Java 8\nRUN echo debconf shared/accepted-oracle-license-v1-1 select true | debconf-set-selections \\\n && echo debconf shared/accepted-oracle-license-v1-1 seen true | debconf-set-selections \\\n && apt-get install oracle-java8-installer -y\n#   Log directory used by run.sh\nRUN mkdir /log \\\n && chmod o+w /log\n#   ----- USER H2O -----\n#   h2o user\nRUN useradd -ms /bin/bash h2o \\\n && usermod -a -G sudo h2o \\\n && echo \"h2o:h2o\" | chpasswd \\\n && echo 'h2o ALL=NOPASSWD: ALL' >> /etc/sudoers\nRUN apt-get install bzip2 -y\nUSER h2o\nWORKDIR /home/h2o\n#   Miniconda\nENV MINICONDA_FILE=\"Miniconda3-4.5.4-Linux-x86_64.sh\"\nRUN wget https://repo.continuum.io/miniconda/${MINICONDA_FILE} \\\n && bash ${MINICONDA_FILE} -b -p /home/h2o/Miniconda3 \\\n && /home/h2o/Miniconda3/bin/conda create -y --name pysparkling python=2.7 anaconda \\\n && /home/h2o/Miniconda3/bin/conda create -y --name h2o python=3.6 anaconda \\\n && /home/h2o/Miniconda3/envs/h2o/bin/jupyter notebook --generate-config \\\n && sed -i \"s/#c.NotebookApp.token = '<generated>'/c.NotebookApp.token = 'h2o'/\" .jupyter/jupyter_notebook_config.py \\\n && rm ${MINICONDA_FILE}\n#   H2O\nENV H2O_BRANCH_NAME=\"rel-wright\"\nENV H2O_BUILD_NUMBER=\"2\"\nENV H2O_PROJECT_VERSION=\"3.20.0.${H2O_BUILD_NUMBER}\"\nENV H2O_DIRECTORY=\"h2o-${H2O_PROJECT_VERSION}\"\nRUN wget http://h2o-release.s3.amazonaws.com/h2o/${H2O_BRANCH_NAME}/${H2O_BUILD_NUMBER}/h2o-${H2O_PROJECT_VERSION}.zip \\\n && unzip ${H2O_DIRECTORY}.zip \\\n && rm ${H2O_DIRECTORY}.zip \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate h2o \\\n && pip install ${H2O_DIRECTORY}/python/h2o*.whl\"\n#   Spark\nENV SPARK_VERSION=\"2.3.1\"\nENV SPARK_HADOOP_VERSION=\"2.7\"\nENV SPARK_DIRECTORY=\"spark-${SPARK_VERSION}-bin-hadoop${SPARK_HADOOP_VERSION}\"\nENV SPARK_HOME=\"/home/h2o/bin/spark\"\nRUN mkdir bin \\\n && cd bin \\\n && mkdir -p ${SPARK_HOME} \\\n && wget http://mirrors.sonic.net/apache/spark/spark-${SPARK_VERSION}/${SPARK_DIRECTORY}.tgz \\\n && tar zxvf ${SPARK_DIRECTORY}.tgz -C ${SPARK_HOME} --strip-components 1 \\\n && rm ${SPARK_DIRECTORY}.tgz \\\n && bash -c \"source /home/h2o/Miniconda3/bin/activate pysparkling \\\n && pip install tabulate future colorama\"\n#   Sparkling Water\nENV SPARKLING_WATER_BRANCH_NUMBER=\"2.3\"\nENV SPARKLING_WATER_BRANCH_NAME=\"rel-${SPARKLING_WATER_BRANCH_NUMBER}\"\nENV SPARKLING_WATER_BUILD_NUMBER=\"8\"\nENV SPARKLING_WATER_PROJECT_VERSION=\"${SPARKLING_WATER_BRANCH_NUMBER}.${SPARKLING_WATER_BUILD_NUMBER}\"\nENV SPARKLING_WATER_DIRECTORY=\"sparkling-water-${SPARKLING_WATER_PROJECT_VERSION}\"\nRUN cd bin \\\n && wget http://h2o-release.s3.amazonaws.com/sparkling-water/${SPARKLING_WATER_BRANCH_NAME}/${SPARKLING_WATER_BUILD_NUMBER}/${SPARKLING_WATER_DIRECTORY}.zip \\\n && unzip ${SPARKLING_WATER_DIRECTORY}.zip \\\n && mv ${SPARKLING_WATER_DIRECTORY} sparkling-water \\\n && rm ${SPARKLING_WATER_DIRECTORY}.zip \\\n && /home/h2o/Miniconda3/envs/pysparkling/bin/ipython profile create pyspark\nCOPY --chown=h2o conf/pyspark/00-pyspark-setup.py /home/h2o/.ipython/profile_pyspark/startup/\nCOPY --chown=h2o conf/pyspark/kernel.json /home/h2o/Miniconda3/envs/h2o/share/jupyter/kernels/pyspark/\nENV SPARKLING_WATER_HOME=\"/home/h2o/bin/sparkling-water\"\n#  #####################################################################\n#   ADD CONTENT FOR INDIVIDUAL HANDS-ON SESSIONS HERE\n#  #####################################################################\n#   Prologue\nRUN mkdir h2o-3-hands-on \\\n && mkdir sparkling-water-hands-on\nRUN cd h2o-3-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-public-test-data/bigdata/laptop/lending-club/LoanStats3a.csv\nRUN cd sparkling-water-hands-on \\\n && mkdir data \\\n && cd data \\\n && wget https://s3.amazonaws.com/h2o-training/events/h2o_world/TimeSeries/all_stocks_2006-01-01_to_2018-01-01.csv\n#   H2O-3 Demo\nCOPY --chown=h2o h2o-3-hands-on/LendingClubTraining.ipynb h2o-3-hands-on/\n#   Sparkling Water Demo\nCOPY --chown=h2o sparkling-water-hands-on/ForecastingVolume.ipynb sparkling-water-hands-on/\n#  #####################################################################\n#   ----- RUN INFORMATION -----\nUSER h2o\nWORKDIR /home/h2o\nENV JAVA_HOME=\"/usr\"\n#   Entry point\nCOPY run.sh /run.sh\nENTRYPOINT [\"/run.sh\"]\nEXPOSE 54321/tcp\nEXPOSE 54327/tcp\nEXPOSE 8888/tcp\nEXPOSE 4040/tcp\n","originalDockerfileUglifiedHash":"0a80c9cc9fb70008b81cdaadc61ac077","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/8e2205ce52afb330d5ddd5f589894b4019c986be.dockerfile"}