{"seed":3912859888,"processedDockerfileHash":"d2aa8fcfa827ba4256c598a85e5106cd","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:12.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get install --no-install-recommends iptables php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-intl php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mysqlnd php5-pgsql php5-pspell php5-sqlite php5-xdebug php5-xmlrpc php5-xsl php-apc libssh2-php -y \\\n && apt-get install --no-install-recommends build-essential pkg-config libssl-dev php-pear php5-dev --force-yes -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongo xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongo.so\" > /etc/php5/conf.d/mongo.ini \\\n && echo \"extension=xhprof.so\" > /etc/php5/conf.d/xhprof.ini \\\n && apt-get purge build-essential pkg-config libssl-dev php-pear php5-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/zz-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/zz-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   Make sure fpm will not be daemonized\nRUN sed -i 's/;daemonize = yes/daemonize = no/g' /etc/php5/fpm/php-fpm.conf\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:12.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#  Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get install iptables php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-intl php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mysqlnd php5-pgsql php5-pspell php5-sqlite php5-xdebug php5-xmlrpc php5-xsl php-apc libssh2-php -y \\\n && apt-get install build-essential pkg-config libssl-dev php-pear php5-dev --force-yes -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongo xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongo.so\" > /etc/php5/conf.d/mongo.ini \\\n && echo \"extension=xhprof.so\" > /etc/php5/conf.d/xhprof.ini \\\n && apt-get purge build-essential pkg-config libssl-dev php-pear php5-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/zz-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/zz-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#  Make sure fpm will not be daemonized\nRUN sed -i 's/;daemonize = yes/daemonize = no/g' /etc/php5/fpm/php-fpm.conf\n#  For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"bce32a2f4a27bba089741feee93980f0","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:12.04\nARG BUILD_DATE\nARG DEBIAN_FRONTEND=noninteractive\nLABEL maintainer=\"Emmanuel Dyan <emmanueldyan@gmail.com>\"\nLABEL org.label-schema.build-date=\"$BUILD_DATE\"\n#   Set a default conf for apt install\nRUN echo 'apt::install-recommends \"false\";' > /etc/apt/apt.conf.d/no-install-recommends \\\n && apt-get update \\\n && apt-get install iptables php5-cli php5-curl php5-fpm php5-gd php5-geoip php5-imagick php5-imap php5-intl php5-ldap php5-mcrypt php5-memcache php5-memcached php5-mysqlnd php5-pgsql php5-pspell php5-sqlite php5-xdebug php5-xmlrpc php5-xsl php-apc libssh2-php -y \\\n && apt-get install build-essential pkg-config libssl-dev php-pear php5-dev --force-yes -y \\\n && pecl channel-update pecl.php.net \\\n && pecl install mongo xhprof-beta \\\n && rm -Rf /tmp/pear \\\n && echo \"extension=mongo.so\" > /etc/php5/conf.d/mongo.ini \\\n && echo \"extension=xhprof.so\" > /etc/php5/conf.d/xhprof.ini \\\n && apt-get purge build-essential pkg-config libssl-dev php-pear php5-dev -y \\\n && apt-get autoremove -y \\\n && apt-get autoclean \\\n && apt-get clean \\\n && find /root /tmp -mindepth 1 -delete \\\n && rm -rf /build /var/lib/apt/lists/* /usr/share/man/* /usr/share/doc/* /var/cache/* /var/log/* /usr/share/php/docs /usr/share/php/tests\nCOPY php-cli.ini /etc/php5/cli/conf.d/zz-custom-php.ini\nCOPY php-fpm.ini /etc/php5/fpm/conf.d/zz-custom-php.ini\nCOPY www.conf /etc/php5/fpm/pool.d/\n#   Make sure fpm will not be daemonized\nRUN sed -i 's/;daemonize = yes/daemonize = no/g' /etc/php5/fpm/php-fpm.conf\n#   For custom Configuration that comes from outside (via a docker compose mount)\nRUN mkdir /etc/php5/fpm/user-conf.d \\\n && echo \"; Default empty file\" > /etc/php5/fpm/user-conf.d/example.conf \\\n && mkdir /var/log/php \\\n && mkdir /home/www-data \\\n && chown www-data:www-data /home/www-data \\\n && usermod -d /home/www-data www-data\nCOPY run.sh /run.sh\nRUN chmod +x /run.sh\nENV ENVIRONMENT=\"dev\"\nENV FPM_UID=\"33\"\nENV FPM_GID=\"33\"\nEXPOSE 9000/tcp\nCMD [\"/run.sh\"]\n","originalDockerfileUglifiedHash":"f35f4b717b7bc6ba6f4a1b5cfb53d531","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/5ddf39de4796f96c4880f7009d61402ee54083d6.dockerfile"}