{"seed":1669115137,"processedDockerfileHash":"52c6039c7ac501e516c93f64937955c2","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2017-2019 CERN for the benefit of the ATLAS collaboration.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#   Authors:\n#   - Thomas Beermann <thomas.beermann@cern.ch>, 2017-2019\n#   - Vincent Garonne <vgaronne@gmail.com>, 2017-2019\n#   - Cedric Serfon <cedric.serfon@cern.ch>, 2017\n#   - Frank Berghaus <frank.berghaus@cern.ch>, 2017-2018\nFROM centos:7\nCOPY etc/docker/dev/ca.repo /etc/yum.repos.d/ca.repo\nRUN yum -y update \\\n && yum clean all \\\n && yum install -y epel-release \\\n && yum install -y gcc httpd mod_ssl mod_auth_kerb mod_wsgi python python-pip python-devel python34 python34-pip python34-devel gmp-devel krb5-devel git openssl-devel gridsite which libaio mysql-devel memcached\nENV RUCIOHOME=\"/opt/rucio\"\nRUN mkdir -p $RUCIOHOME\nWORKDIR $RUCIOHOME\nRUN mkdir -p bin etc lib/rucio tools\nCOPY .pep8 .pep8\nCOPY .flake8 .flake8\nCOPY pylintrc /etc/pylintrc\nCOPY etc etc\nCOPY tools tools\nRUN pip install pip==23.1 --upgrade \\\n && pip install setuptools==67.6.1 --upgrade\nRUN rm -rf /usr/lib/python2.7/site-packages/ipaddress*\nRUN pip install -r tools/pip-requires-client\nRUN pip install -r tools/pip-requires\nRUN pip install -r tools/pip-requires-test\nRUN pip install mysql==0.0.3\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python2.7/site-packages/rucio\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python3.4/site-packages/rucio\nRUN mkdir /var/log/rucio /var/log/rucio/trace \\\n && chmod 777 /var/log/rucio\nCOPY etc/docker/dev/rucio.cfg $RUCIOHOME/etc/rucio.cfg\nCOPY etc/docker/dev/alembic_mysql.ini $RUCIOHOME/etc/alembic.ini\nCOPY etc/docker/dev/aliases-py27.conf $RUCIOHOME/etc/web/aliases-py27.conf\nCOPY etc/docker/dev/ui-aliases-py27.conf $RUCIOHOME/etc/web/ui-aliases-py27.conf\nCOPY etc/docker/travis/google-cloud-storage-test.json $RUCIOHOME/etc/google-cloud-storage-test.json\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/CERN-bundle.pem\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/ca.crt\nCOPY etc/docker/dev/httpd.conf /etc/httpd/conf/httpd.conf\nCOPY etc/docker/dev/rucio.conf /etc/httpd/conf.d/rucio.conf\nCOPY etc/docker/dev/certs/usercert.pem $RUCIOHOME/etc/web/usercert.pem\nCOPY etc/docker/dev/certs/server.crt /etc/grid-security/hostcert.pem\nCOPY etc/docker/dev/certs/server.key /etc/grid-security/hostkey.pem\nRUN chmod 400 /etc/grid-security/hostkey.pem \\\n && rm -rf $RUCIOHOME/tools \\\n && mkdir -p $RUCIOHOME/tools \\\n && mkdir -p /etc/httpd \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf\nEXPOSE 443/tcp\nENV PATH=\"$PATH:$RUCIOHOME/bin\"\nCMD [\"httpd\", \"-D\", \"FOREGROUND\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2017-2019 CERN for the benefit of the ATLAS collaboration.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#\n#  Authors:\n#  - Thomas Beermann <thomas.beermann@cern.ch>, 2017-2019\n#  - Vincent Garonne <vgaronne@gmail.com>, 2017-2019\n#  - Cedric Serfon <cedric.serfon@cern.ch>, 2017\n#  - Frank Berghaus <frank.berghaus@cern.ch>, 2017-2018\nFROM centos:7\nADD etc/docker/dev/ca.repo /etc/yum.repos.d/ca.repo\nRUN yum -y update \\\n && yum clean all \\\n && yum install -y epel-release \\\n && yum install -y gcc httpd mod_ssl mod_auth_kerb mod_wsgi python python-pip python-devel python34 python34-pip python34-devel gmp-devel krb5-devel git openssl-devel gridsite which libaio mysql-devel memcached\nENV RUCIOHOME=\"/opt/rucio\"\nRUN mkdir -p $RUCIOHOME\nWORKDIR $RUCIOHOME\nRUN mkdir -p bin etc lib/rucio tools\nCOPY .pep8 .pep8\nCOPY .flake8 .flake8\nCOPY pylintrc /etc/pylintrc\nCOPY etc etc\nCOPY tools tools\nRUN pip install pip --upgrade \\\n && pip install setuptools --upgrade\nRUN rm -rf /usr/lib/python2.7/site-packages/ipaddress*\nRUN pip install -r tools/pip-requires-client\nRUN pip install -r tools/pip-requires\nRUN pip install -r tools/pip-requires-test\nRUN pip install mysql\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python2.7/site-packages/rucio\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python3.4/site-packages/rucio\nRUN mkdir /var/log/rucio /var/log/rucio/trace \\\n && chmod 777 /var/log/rucio\nCOPY etc/docker/dev/rucio.cfg $RUCIOHOME/etc/rucio.cfg\nCOPY etc/docker/dev/alembic_mysql.ini $RUCIOHOME/etc/alembic.ini\nCOPY etc/docker/dev/aliases-py27.conf $RUCIOHOME/etc/web/aliases-py27.conf\nCOPY etc/docker/dev/ui-aliases-py27.conf $RUCIOHOME/etc/web/ui-aliases-py27.conf\nCOPY etc/docker/travis/google-cloud-storage-test.json $RUCIOHOME/etc/google-cloud-storage-test.json\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/CERN-bundle.pem\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/ca.crt\nCOPY etc/docker/dev/httpd.conf /etc/httpd/conf/httpd.conf\nCOPY etc/docker/dev/rucio.conf /etc/httpd/conf.d/rucio.conf\nCOPY etc/docker/dev/certs/usercert.pem $RUCIOHOME/etc/web/usercert.pem\nCOPY etc/docker/dev/certs/server.crt /etc/grid-security/hostcert.pem\nCOPY etc/docker/dev/certs/server.key /etc/grid-security/hostkey.pem\nRUN chmod 400 /etc/grid-security/hostkey.pem \\\n && rm -rf $RUCIOHOME/tools \\\n && mkdir -p $RUCIOHOME/tools \\\n && mkdir -p /etc/httpd \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf\nEXPOSE 443/tcp\nENV PATH=\"$PATH:$RUCIOHOME/bin\"\nCMD [\"httpd\", \"-D\", \"FOREGROUND\"]\n","injectedSmells":[],"originalDockerfileHash":"4b7f650a772b5ae6070355d6637cad01","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2017-2019 CERN for the benefit of the ATLAS collaboration.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#   Authors:\n#   - Thomas Beermann <thomas.beermann@cern.ch>, 2017-2019\n#   - Vincent Garonne <vgaronne@gmail.com>, 2017-2019\n#   - Cedric Serfon <cedric.serfon@cern.ch>, 2017\n#   - Frank Berghaus <frank.berghaus@cern.ch>, 2017-2018\nFROM centos:7\nADD etc/docker/dev/ca.repo /etc/yum.repos.d/ca.repo\nRUN yum -y update \\\n && yum clean all \\\n && yum install -y epel-release \\\n && yum install -y gcc httpd mod_ssl mod_auth_kerb mod_wsgi python python-pip python-devel python34 python34-pip python34-devel gmp-devel krb5-devel git openssl-devel gridsite which libaio mysql-devel memcached\nENV RUCIOHOME=\"/opt/rucio\"\nRUN mkdir -p $RUCIOHOME\nWORKDIR $RUCIOHOME\nRUN mkdir -p bin etc lib/rucio tools\nCOPY .pep8 .pep8\nCOPY .flake8 .flake8\nCOPY pylintrc /etc/pylintrc\nCOPY etc etc\nCOPY tools tools\nRUN pip install pip --upgrade \\\n && pip install setuptools --upgrade\nRUN rm -rf /usr/lib/python2.7/site-packages/ipaddress*\nRUN pip install -r tools/pip-requires-client\nRUN pip install -r tools/pip-requires\nRUN pip install -r tools/pip-requires-test\nRUN pip install mysql\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python2.7/site-packages/rucio\nRUN ln -s $RUCIOHOME/lib/rucio /usr/lib/python3.4/site-packages/rucio\nRUN mkdir /var/log/rucio /var/log/rucio/trace \\\n && chmod 777 /var/log/rucio\nCOPY etc/docker/dev/rucio.cfg $RUCIOHOME/etc/rucio.cfg\nCOPY etc/docker/dev/alembic_mysql.ini $RUCIOHOME/etc/alembic.ini\nCOPY etc/docker/dev/aliases-py27.conf $RUCIOHOME/etc/web/aliases-py27.conf\nCOPY etc/docker/dev/ui-aliases-py27.conf $RUCIOHOME/etc/web/ui-aliases-py27.conf\nCOPY etc/docker/travis/google-cloud-storage-test.json $RUCIOHOME/etc/google-cloud-storage-test.json\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/CERN-bundle.pem\nCOPY etc/docker/dev/certs/ca.pem $RUCIOHOME/etc/web/ca.crt\nCOPY etc/docker/dev/httpd.conf /etc/httpd/conf/httpd.conf\nCOPY etc/docker/dev/rucio.conf /etc/httpd/conf.d/rucio.conf\nCOPY etc/docker/dev/certs/usercert.pem $RUCIOHOME/etc/web/usercert.pem\nCOPY etc/docker/dev/certs/server.crt /etc/grid-security/hostcert.pem\nCOPY etc/docker/dev/certs/server.key /etc/grid-security/hostkey.pem\nRUN chmod 400 /etc/grid-security/hostkey.pem \\\n && rm -rf $RUCIOHOME/tools \\\n && mkdir -p $RUCIOHOME/tools \\\n && mkdir -p /etc/httpd \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf \\\n && echo \"\" > /etc/httpd/conf.d/ssl.conf \\\n && echo \"\" > /etc/httpd/conf.d/autoindex.conf \\\n && echo \"\" > /etc/httpd/conf.d/userdir.conf \\\n && echo \"\" > /etc/httpd/conf.d/welcome.conf\nEXPOSE 443/tcp\nENV PATH=\"$PATH:$RUCIOHOME/bin\"\nCMD [\"httpd\", \"-D\", \"FOREGROUND\"]\n","originalDockerfileUglifiedHash":"18cd6eb0a1b79316caec5edd8e87dcc1","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/22c580722badd08023b189b6afb4bb0e4e99ac33.dockerfile"}