{"seed":3298362214,"processedDockerfileHash":"9d66e034285400eab23d3b7e21ba9fe5","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-gem","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:trusty\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.92.37.8 python-software-properties=0.92.37.8 -y \\\n && add-apt-repository ppa:beineri/opt-qt571-trusty\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:1.9.1-1ubuntu0.10 qt57base qt57svg build-essential=11.6ubuntu6 mesa-common-dev=10.1.3-0ubuntu0.6 libglu1-mesa-dev=9.0.0-2 -y \\\n && rm -rf /var/lib/apt/lists/*\nENV QT_BASE_DIR=\"/opt/qt57\"\nENV QTDIR=\"$QT_BASE_DIR\"\nENV PATH=\"$QT_BASE_DIR/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"$QT_BASE_DIR/lib/x86_64-linux-gnu:$QT_BASE_DIR/lib:$LD_LIBRARY_PATH\"\nENV PKG_CONFIG_PATH=\"$QT_BASE_DIR/lib/pkgconfig:$PKG_CONFIG_PATH\"\n#   Install dependencies and build tools\nRUN apt-get update \\\n && apt-get install --no-install-recommends ruby-dev=1:1.9.3.4 rpm=4.11.1-3ubuntu0.1 wget=1.15-1ubuntu1.14.04.5 bsdmainutils=9.0.5ubuntu1 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 -y \\\n && gem install fpm --version 1.15.1 \\\n && wget http://mdocml.bsd.lv/snapshots/mandoc.tar.gz \\\n && tar fzx mandoc.tar.gz \\\n && cd mandoc-* \\\n && ./configure \\\n && make \\\n && make install\n#   Download and build cutechess\nRUN cd / \\\n && git clone https://github.com/cutechess/cutechess.git \\\n && cd /cutechess \\\n && qmake \\\n && make -j4 \\\n && make doc-txt \\\n && make doc-html\n#   Create .deb and .rpm packages\nRUN mkdir -p /cutechess_pkg \\\n && cd /cutechess_pkg \\\n && mkdir -p usr/games \\\n && mkdir -p usr/share/menu \\\n && mkdir -p usr/share/pixmaps \\\n && mkdir -p usr/share/applications \\\n && mkdir -p usr/share/man/man6 \\\n && mkdir -p usr/share/man/man5 \\\n && mkdir -p usr/share/doc/cutechess \\\n && cp /cutechess/projects/cli/cutechess-cli usr/games \\\n && cp /cutechess/projects/gui/cutechess usr/games \\\n && cp /cutechess/dist/linux/menu/cutechess usr/share/menu \\\n && cp /cutechess/projects/gui/res/icons/cutechess_128x128.png usr/share/pixmaps/cutechess.png \\\n && cp /cutechess/projects/gui/res/icons/cutechess_32x32.xpm usr/share/pixmaps/cutechess.xpm \\\n && cp /cutechess/dist/linux/cutechess.desktop usr/share/applications \\\n && cp /cutechess/docs/cutechess-cli.6 usr/share/man/man6 \\\n && gzip usr/share/man/man6/cutechess-cli.6 \\\n && cp /cutechess/docs/engines.json.5 usr/share/man/man5 \\\n && gzip usr/share/man/man5/engines.json.5 \\\n && cp /cutechess/COPYING usr/share/doc/cutechess/copyright \\\n && cp /cutechess/README.md usr/share/doc/cutechess/README \\\n && mkdir /finished_pkg \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && export CUTECHESS_GUI_VERSION=$( grep \"^CUTECHESS_VERSION\" /cutechess/projects/gui/gui.pro | awk '{print $NF}' ;) \\\n && export TODAY=$( date +%Y%m%d ;) \\\n && fpm -s dir -t deb -C /cutechess_pkg -a \"amd64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"games\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"libc6 (>= 2.19)\" -d \"libgcc1 (>= 1:4.9)\" -d \"libqt5svg5 (>= 5.7.0)\" -d \"libqt5core5a (>= 5.7.0)\" -d \"libqt5gui5 (>= 5.7.0)\" -d \"libqt5widgets5 (>= 5.7.0)\" -d \"libqt5printsupport5 (>= 5.7.0)\" -d \"libqt5concurrent5 (>= 5.7.0)\" -d \"libstdc++6 (>= 4.8.4)\" \\\n && mv /cutechess_pkg/*.deb /finished_pkg/ \\\n && fpm -s dir -t rpm -C /cutechess_pkg -a \"x86_64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"Amusements/Games/Board/Chess\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"qt5-qtbase >= 5.7.0\" -d \"qt5-qtsvg >= 5.7.0\" \\\n && mv /cutechess_pkg/*.rpm /finished_pkg/\n#   Create .tar.gz package for cutechess-cli\nRUN cd /cutechess \\\n && mkdir -p /cutechess_pkg/cutechess-cli \\\n && cd /cutechess_pkg \\\n && mkdir -p ./cutechess-cli/lib \\\n && cp $QT_BASE_DIR/lib/libQt5Core.so.5 cutechess-cli/lib/ \\\n && cp /cutechess/projects/cli/cutechess-cli cutechess-cli/ \\\n && cp /cutechess/COPYING cutechess-cli/ \\\n && cp /cutechess/docs/man-style.css cutechess-cli/ \\\n && cp /cutechess/tools/clop-cutechess-cli.py cutechess-cli/ \\\n && cp /cutechess/dist/linux/cutechess-cli.sh cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.html cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.txt cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.html cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.txt cutechess-cli/ \\\n && tar -zcvf cutechess-cli-linux64.tar.gz cutechess-cli \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && mv cutechess-cli-linux64.tar.gz /finished_pkg/cutechess-cli-$CUTECHESS_CLI_VERSION-linux64.tar.gz\n#   Copy the .deb package to the host\nCMD cp /finished_pkg/cutechess*.* /package\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:trusty\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install software-properties-common python-software-properties -y \\\n && add-apt-repository ppa:beineri/opt-qt571-trusty\nRUN apt-get update \\\n && apt-get install git qt57base qt57svg build-essential mesa-common-dev libglu1-mesa-dev -y \\\n && rm -rf /var/lib/apt/lists/*\nENV QT_BASE_DIR=\"/opt/qt57\"\nENV QTDIR=\"$QT_BASE_DIR\"\nENV PATH=\"$QT_BASE_DIR/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"$QT_BASE_DIR/lib/x86_64-linux-gnu:$QT_BASE_DIR/lib:$LD_LIBRARY_PATH\"\nENV PKG_CONFIG_PATH=\"$QT_BASE_DIR/lib/pkgconfig:$PKG_CONFIG_PATH\"\n#  Install dependencies and build tools\nRUN apt-get update \\\n && apt-get install ruby-dev rpm wget bsdmainutils zlib1g-dev -y \\\n && gem install fpm \\\n && wget http://mdocml.bsd.lv/snapshots/mandoc.tar.gz \\\n && tar fzx mandoc.tar.gz \\\n && cd mandoc-* \\\n && ./configure \\\n && make \\\n && make install\n#  Download and build cutechess\nRUN cd / \\\n && git clone https://github.com/cutechess/cutechess.git \\\n && cd /cutechess \\\n && qmake \\\n && make -j4 \\\n && make doc-txt \\\n && make doc-html\n#  Create .deb and .rpm packages\nRUN mkdir -p /cutechess_pkg \\\n && cd /cutechess_pkg \\\n && mkdir -p usr/games \\\n && mkdir -p usr/share/menu \\\n && mkdir -p usr/share/pixmaps \\\n && mkdir -p usr/share/applications \\\n && mkdir -p usr/share/man/man6 \\\n && mkdir -p usr/share/man/man5 \\\n && mkdir -p usr/share/doc/cutechess \\\n && cp /cutechess/projects/cli/cutechess-cli usr/games \\\n && cp /cutechess/projects/gui/cutechess usr/games \\\n && cp /cutechess/dist/linux/menu/cutechess usr/share/menu \\\n && cp /cutechess/projects/gui/res/icons/cutechess_128x128.png usr/share/pixmaps/cutechess.png \\\n && cp /cutechess/projects/gui/res/icons/cutechess_32x32.xpm usr/share/pixmaps/cutechess.xpm \\\n && cp /cutechess/dist/linux/cutechess.desktop usr/share/applications \\\n && cp /cutechess/docs/cutechess-cli.6 usr/share/man/man6 \\\n && gzip usr/share/man/man6/cutechess-cli.6 \\\n && cp /cutechess/docs/engines.json.5 usr/share/man/man5 \\\n && gzip usr/share/man/man5/engines.json.5 \\\n && cp /cutechess/COPYING usr/share/doc/cutechess/copyright \\\n && cp /cutechess/README.md usr/share/doc/cutechess/README \\\n && mkdir /finished_pkg \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && export CUTECHESS_GUI_VERSION=$( grep \"^CUTECHESS_VERSION\" /cutechess/projects/gui/gui.pro | awk '{print $NF}' ;) \\\n && export TODAY=$( date +%Y%m%d ;) \\\n && fpm -s dir -t deb -C /cutechess_pkg -a \"amd64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"games\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"libc6 (>= 2.19)\" -d \"libgcc1 (>= 1:4.9)\" -d \"libqt5svg5 (>= 5.7.0)\" -d \"libqt5core5a (>= 5.7.0)\" -d \"libqt5gui5 (>= 5.7.0)\" -d \"libqt5widgets5 (>= 5.7.0)\" -d \"libqt5printsupport5 (>= 5.7.0)\" -d \"libqt5concurrent5 (>= 5.7.0)\" -d \"libstdc++6 (>= 4.8.4)\" \\\n && mv /cutechess_pkg/*.deb /finished_pkg/ \\\n && fpm -s dir -t rpm -C /cutechess_pkg -a \"x86_64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"Amusements/Games/Board/Chess\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"qt5-qtbase >= 5.7.0\" -d \"qt5-qtsvg >= 5.7.0\" \\\n && mv /cutechess_pkg/*.rpm /finished_pkg/\n#  Create .tar.gz package for cutechess-cli\nRUN cd /cutechess \\\n && mkdir -p /cutechess_pkg/cutechess-cli \\\n && cd /cutechess_pkg \\\n && mkdir -p ./cutechess-cli/lib \\\n && cp $QT_BASE_DIR/lib/libQt5Core.so.5 cutechess-cli/lib/ \\\n && cp /cutechess/projects/cli/cutechess-cli cutechess-cli/ \\\n && cp /cutechess/COPYING cutechess-cli/ \\\n && cp /cutechess/docs/man-style.css cutechess-cli/ \\\n && cp /cutechess/tools/clop-cutechess-cli.py cutechess-cli/ \\\n && cp /cutechess/dist/linux/cutechess-cli.sh cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.html cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.txt cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.html cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.txt cutechess-cli/ \\\n && tar -zcvf cutechess-cli-linux64.tar.gz cutechess-cli \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && mv cutechess-cli-linux64.tar.gz /finished_pkg/cutechess-cli-$CUTECHESS_CLI_VERSION-linux64.tar.gz\n#  Copy the .deb package to the host\nCMD cp /finished_pkg/cutechess*.* /package\n","injectedSmells":[],"originalDockerfileHash":"f5353640a437a8fff01bf30dc4990366","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:trusty\nRUN rm /bin/sh \\\n && ln -s /bin/bash /bin/sh\nRUN apt-get update \\\n && apt-get install software-properties-common python-software-properties -y \\\n && add-apt-repository ppa:beineri/opt-qt571-trusty\nRUN apt-get update \\\n && apt-get install git qt57base qt57svg build-essential mesa-common-dev libglu1-mesa-dev -y \\\n && rm -rf /var/lib/apt/lists/*\nENV QT_BASE_DIR=\"/opt/qt57\"\nENV QTDIR=\"$QT_BASE_DIR\"\nENV PATH=\"$QT_BASE_DIR/bin:$PATH\"\nENV LD_LIBRARY_PATH=\"$QT_BASE_DIR/lib/x86_64-linux-gnu:$QT_BASE_DIR/lib:$LD_LIBRARY_PATH\"\nENV PKG_CONFIG_PATH=\"$QT_BASE_DIR/lib/pkgconfig:$PKG_CONFIG_PATH\"\n#   Install dependencies and build tools\nRUN apt-get update \\\n && apt-get install ruby-dev rpm wget bsdmainutils zlib1g-dev -y \\\n && gem install fpm \\\n && wget http://mdocml.bsd.lv/snapshots/mandoc.tar.gz \\\n && tar fzx mandoc.tar.gz \\\n && cd mandoc-* \\\n && ./configure \\\n && make \\\n && make install\n#   Download and build cutechess\nRUN cd / \\\n && git clone https://github.com/cutechess/cutechess.git \\\n && cd /cutechess \\\n && qmake \\\n && make -j4 \\\n && make doc-txt \\\n && make doc-html\n#   Create .deb and .rpm packages\nRUN mkdir -p /cutechess_pkg \\\n && cd /cutechess_pkg \\\n && mkdir -p usr/games \\\n && mkdir -p usr/share/menu \\\n && mkdir -p usr/share/pixmaps \\\n && mkdir -p usr/share/applications \\\n && mkdir -p usr/share/man/man6 \\\n && mkdir -p usr/share/man/man5 \\\n && mkdir -p usr/share/doc/cutechess \\\n && cp /cutechess/projects/cli/cutechess-cli usr/games \\\n && cp /cutechess/projects/gui/cutechess usr/games \\\n && cp /cutechess/dist/linux/menu/cutechess usr/share/menu \\\n && cp /cutechess/projects/gui/res/icons/cutechess_128x128.png usr/share/pixmaps/cutechess.png \\\n && cp /cutechess/projects/gui/res/icons/cutechess_32x32.xpm usr/share/pixmaps/cutechess.xpm \\\n && cp /cutechess/dist/linux/cutechess.desktop usr/share/applications \\\n && cp /cutechess/docs/cutechess-cli.6 usr/share/man/man6 \\\n && gzip usr/share/man/man6/cutechess-cli.6 \\\n && cp /cutechess/docs/engines.json.5 usr/share/man/man5 \\\n && gzip usr/share/man/man5/engines.json.5 \\\n && cp /cutechess/COPYING usr/share/doc/cutechess/copyright \\\n && cp /cutechess/README.md usr/share/doc/cutechess/README \\\n && mkdir /finished_pkg \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && export CUTECHESS_GUI_VERSION=$( grep \"^CUTECHESS_VERSION\" /cutechess/projects/gui/gui.pro | awk '{print $NF}' ;) \\\n && export TODAY=$( date +%Y%m%d ;) \\\n && fpm -s dir -t deb -C /cutechess_pkg -a \"amd64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"games\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"libc6 (>= 2.19)\" -d \"libgcc1 (>= 1:4.9)\" -d \"libqt5svg5 (>= 5.7.0)\" -d \"libqt5core5a (>= 5.7.0)\" -d \"libqt5gui5 (>= 5.7.0)\" -d \"libqt5widgets5 (>= 5.7.0)\" -d \"libqt5printsupport5 (>= 5.7.0)\" -d \"libqt5concurrent5 (>= 5.7.0)\" -d \"libstdc++6 (>= 4.8.4)\" \\\n && mv /cutechess_pkg/*.deb /finished_pkg/ \\\n && fpm -s dir -t rpm -C /cutechess_pkg -a \"x86_64\" --license \"GPLv3\" --url \"https://github.com/cutechess/cutechess\" -n \"cutechess\" -v \"$TODAY+$CUTECHESS_CLI_VERSION+$CUTECHESS_GUI_VERSION\" --iteration 1 --category \"Amusements/Games/Board/Chess\" -m \"Ilari Pihlajisto <ilari.pihlajisto@mbnet.fi>\" --description \"Commandline and graphical interface for playing chess\" -d \"qt5-qtbase >= 5.7.0\" -d \"qt5-qtsvg >= 5.7.0\" \\\n && mv /cutechess_pkg/*.rpm /finished_pkg/\n#   Create .tar.gz package for cutechess-cli\nRUN cd /cutechess \\\n && mkdir -p /cutechess_pkg/cutechess-cli \\\n && cd /cutechess_pkg \\\n && mkdir -p ./cutechess-cli/lib \\\n && cp $QT_BASE_DIR/lib/libQt5Core.so.5 cutechess-cli/lib/ \\\n && cp /cutechess/projects/cli/cutechess-cli cutechess-cli/ \\\n && cp /cutechess/COPYING cutechess-cli/ \\\n && cp /cutechess/docs/man-style.css cutechess-cli/ \\\n && cp /cutechess/tools/clop-cutechess-cli.py cutechess-cli/ \\\n && cp /cutechess/dist/linux/cutechess-cli.sh cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.html cutechess-cli/ \\\n && cp /cutechess/docs/cutechess-cli.6.txt cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.html cutechess-cli/ \\\n && cp /cutechess/docs/engines.json.5.txt cutechess-cli/ \\\n && tar -zcvf cutechess-cli-linux64.tar.gz cutechess-cli \\\n && export CUTECHESS_CLI_VERSION=$( grep \"^CUTECHESS_CLI_VERSION\" /cutechess/projects/cli/cli.pro | awk '{print $NF}' ;) \\\n && mv cutechess-cli-linux64.tar.gz /finished_pkg/cutechess-cli-$CUTECHESS_CLI_VERSION-linux64.tar.gz\n#   Copy the .deb package to the host\nCMD cp /finished_pkg/cutechess*.* /package\n","originalDockerfileUglifiedHash":"0f10d8ecde11e22824012355dff1c6a6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/a1a5021d59e6fe8cf84b76dd940ac25a0fca178b.dockerfile"}