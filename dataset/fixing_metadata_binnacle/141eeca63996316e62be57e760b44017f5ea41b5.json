{"seed":735985456,"processedDockerfileHash":"19eb7cca57c45faca8b386259c526e41","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ###################\n#   BASE IMAGE\n#  ###################\nFROM ubuntu:16.04\nMAINTAINER madslundt@live.dk <madslundt@live.dk>\n#  ###################\n#   INSTALLATIONS\n#  ###################\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install --no-install-recommends curl=7.47.0-1ubuntu2.19 cron=3.0pl1-128ubuntu2 fuse=2.9.4-1ubuntu3.1 unionfs-fuse=1.0-1ubuntu1 bc=1.06.95-9build1 unzip=6.0-20ubuntu1.1 wget=1.17.1-1ubuntu1.5 ca-certificates=20210119~16.04.1 -y \\\n && update-ca-certificates \\\n && apt-get install --no-install-recommends openssl=1.0.2g-1ubuntu4.20 -y \\\n && sed -i 's/#user_allow_other/user_allow_other/' /etc/fuse.conf\n#   MongoDB 3.4\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install --no-install-recommends mongodb-org -y\n#   S6 overlay\nENV S6_BEHAVIOUR_IF_STAGE2_FAILS=\"2\"\nENV S6_KEEP_ENV=\"1\"\nRUN OVERLAY_VERSION=$( curl -sX GET \"https://api.github.com/repos/just-containers/s6-overlay/releases/latest\" | awk '/tag_name/{print $4;exit}' FS='[\"\"]' ;) \\\n && curl -o /tmp/s6-overlay.tar.gz -L \"https://github.com/just-containers/s6-overlay/releases/download/${OVERLAY_VERSION}/s6-overlay-amd64.tar.gz\" \\\n && tar xfz /tmp/s6-overlay.tar.gz -C /\n#  ###################\n#   ENVIRONMENT VARIABLES\n#  ###################\n#   Encryption\nENV ENCRYPT_MEDIA=\"\\\"1\\\"\"\nENV READ_ONLY=\"\\\"1\\\"\"\n#   Rclone\nENV BUFFER_SIZE=\"\\\"500M\\\"\"\nENV MAX_READ_AHEAD=\"\\\"30G\\\"\"\nENV CHECKERS=\"\\\"16\\\"\"\nENV RCLONE_CLOUD_ENDPOINT=\"\\\"gd-crypt:\\\"\"\nENV RCLONE_LOCAL_ENDPOINT=\"\\\"local-crypt:\\\"\"\n#   Plexdrive\nENV CHUNK_SIZE=\"\\\"10M\\\"\"\nENV CLEAR_CHUNK_MAX_SIZE=\"\\\"\nENV CLEAR_CHUNK_AGE=\"\\\"24h\\\"\"\nENV MONGO_DATABASE=\"\\\"plexdrive\\\"\"\n#   Time format\nENV DATE_FORMAT=\"\\\"+%F@%T\\\"\"\n#   Local files removal\nENV REMOVE_LOCAL_FILES_BASED_ON=\"\\\"space\\\"\"\nENV REMOVE_LOCAL_FILES_WHEN_SPACE_EXCEEDS_GB=\"\\\"100\\\"\"\nENV FREEUP_ATLEAST_GB=\"\\\"80\\\"\"\nENV REMOVE_LOCAL_FILES_AFTER_DAYS=\"\\\"30\\\"\"\n#   Plex\nENV PLEX_URL=\"\\\"\nENV PLEX_TOKEN=\"\\\"\n#  cron\nENV CLOUDUPLOADTIME=\"\\\"0 1 * * *\\\"\"\nENV RMDELETETIME=\"\\\"0 6 * * *\\\"\"\n#  ###################\n#   SCRIPTS\n#  ###################\nCOPY setup/* /usr/bin/\nCOPY install.sh /\nCOPY scripts/* /usr/bin/\nCOPY root /\nRUN chmod a+x /install.sh \\\n && sh /install.sh \\\n && chmod a+x /usr/bin/* \\\n && groupmod -g 1000 users \\\n && useradd -u 911 -U -d / -s /bin/false abc \\\n && usermod -G users abc \\\n && apt-get clean autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /tmp/* /var/lib/{apt,dpkg,cache,log}/\n#  ###################\n#   VOLUMES\n#  ###################\n#   Define mountable directories.\n#  VOLUME /data/db /config /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nVOLUME /data/db /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nRUN chmod -R 777 /data /log \\\n && mkdir /config\n#  ###################\n#   WORKING DIRECTORY\n#  ###################\nWORKDIR /data\n#  ###################\n#   ENTRYPOINT\n#  ###################\nENTRYPOINT [\"/init\"]\nCMD cron -f\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ###################\n#  BASE IMAGE\n# ###################\nFROM ubuntu:16.04\nMAINTAINER madslundt@live.dk <madslundt@live.dk>\n# ###################\n#  INSTALLATIONS\n# ###################\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install curl cron fuse unionfs-fuse bc unzip wget ca-certificates -y \\\n && update-ca-certificates \\\n && apt-get install openssl -y \\\n && sed -i 's/#user_allow_other/user_allow_other/' /etc/fuse.conf\n#  MongoDB 3.4\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install mongodb-org -y\n#  S6 overlay\nENV S6_BEHAVIOUR_IF_STAGE2_FAILS=\"2\"\nENV S6_KEEP_ENV=\"1\"\nRUN OVERLAY_VERSION=$( curl -sX GET \"https://api.github.com/repos/just-containers/s6-overlay/releases/latest\" | awk '/tag_name/{print $4;exit}' FS='[\"\"]' ;) \\\n && curl -o /tmp/s6-overlay.tar.gz -L \"https://github.com/just-containers/s6-overlay/releases/download/${OVERLAY_VERSION}/s6-overlay-amd64.tar.gz\" \\\n && tar xfz /tmp/s6-overlay.tar.gz -C /\n# ###################\n#  ENVIRONMENT VARIABLES\n# ###################\n#  Encryption\nENV ENCRYPT_MEDIA=\"\\\"1\\\"\"\nENV READ_ONLY=\"\\\"1\\\"\"\n#  Rclone\nENV BUFFER_SIZE=\"\\\"500M\\\"\"\nENV MAX_READ_AHEAD=\"\\\"30G\\\"\"\nENV CHECKERS=\"\\\"16\\\"\"\nENV RCLONE_CLOUD_ENDPOINT=\"\\\"gd-crypt:\\\"\"\nENV RCLONE_LOCAL_ENDPOINT=\"\\\"local-crypt:\\\"\"\n#  Plexdrive\nENV CHUNK_SIZE=\"\\\"10M\\\"\"\nENV CLEAR_CHUNK_MAX_SIZE=\"\"\\\"\"\nENV CLEAR_CHUNK_AGE=\"\\\"24h\\\"\"\nENV MONGO_DATABASE=\"\\\"plexdrive\\\"\"\n#  Time format\nENV DATE_FORMAT=\"\\\"+%F@%T\\\"\"\n#  Local files removal\nENV REMOVE_LOCAL_FILES_BASED_ON=\"\\\"space\\\"\"\nENV REMOVE_LOCAL_FILES_WHEN_SPACE_EXCEEDS_GB=\"\\\"100\\\"\"\nENV FREEUP_ATLEAST_GB=\"\\\"80\\\"\"\nENV REMOVE_LOCAL_FILES_AFTER_DAYS=\"\\\"30\\\"\"\n#  Plex\nENV PLEX_URL=\"\"\\\"\"\nENV PLEX_TOKEN=\"\"\\\"\"\n# cron\nENV CLOUDUPLOADTIME=\"\\\"0 1 * * *\\\"\"\nENV RMDELETETIME=\"\\\"0 6 * * *\\\"\"\n# ###################\n#  SCRIPTS\n# ###################\nCOPY setup/* /usr/bin/\nCOPY install.sh /\nCOPY scripts/* /usr/bin/\nCOPY root /\nRUN chmod a+x /install.sh \\\n && sh /install.sh \\\n && chmod a+x /usr/bin/* \\\n && groupmod -g 1000 users \\\n && useradd -u 911 -U -d / -s /bin/false abc \\\n && usermod -G users abc \\\n && apt-get clean autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /tmp/* /var/lib/{apt,dpkg,cache,log}/\n# ###################\n#  VOLUMES\n# ###################\n#  Define mountable directories.\n# VOLUME /data/db /config /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nVOLUME /data/db /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nRUN chmod -R 777 /data /log \\\n && mkdir /config\n# ###################\n#  WORKING DIRECTORY\n# ###################\nWORKDIR /data\n# ###################\n#  ENTRYPOINT\n# ###################\nENTRYPOINT [\"/init\"]\nCMD cron -f\n","injectedSmells":[],"originalDockerfileHash":"c361894c819b38f7f99a6adc2bde3f30","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ###################\n#   BASE IMAGE\n#  ###################\nFROM ubuntu:16.04\nMAINTAINER madslundt@live.dk <madslundt@live.dk>\n#  ###################\n#   INSTALLATIONS\n#  ###################\nRUN apt-get update \\\n && apt-get -y upgrade \\\n && apt-get install curl cron fuse unionfs-fuse bc unzip wget ca-certificates -y \\\n && update-ca-certificates \\\n && apt-get install openssl -y \\\n && sed -i 's/#user_allow_other/user_allow_other/' /etc/fuse.conf\n#   MongoDB 3.4\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6 \\\n && echo \"deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse\" | tee /etc/apt/sources.list.d/mongodb-org-3.4.list \\\n && apt-get update \\\n && apt-get install mongodb-org -y\n#   S6 overlay\nENV S6_BEHAVIOUR_IF_STAGE2_FAILS=\"2\"\nENV S6_KEEP_ENV=\"1\"\nRUN OVERLAY_VERSION=$( curl -sX GET \"https://api.github.com/repos/just-containers/s6-overlay/releases/latest\" | awk '/tag_name/{print $4;exit}' FS='[\"\"]' ;) \\\n && curl -o /tmp/s6-overlay.tar.gz -L \"https://github.com/just-containers/s6-overlay/releases/download/${OVERLAY_VERSION}/s6-overlay-amd64.tar.gz\" \\\n && tar xfz /tmp/s6-overlay.tar.gz -C /\n#  ###################\n#   ENVIRONMENT VARIABLES\n#  ###################\n#   Encryption\nENV ENCRYPT_MEDIA=\"\\\"1\\\"\"\nENV READ_ONLY=\"\\\"1\\\"\"\n#   Rclone\nENV BUFFER_SIZE=\"\\\"500M\\\"\"\nENV MAX_READ_AHEAD=\"\\\"30G\\\"\"\nENV CHECKERS=\"\\\"16\\\"\"\nENV RCLONE_CLOUD_ENDPOINT=\"\\\"gd-crypt:\\\"\"\nENV RCLONE_LOCAL_ENDPOINT=\"\\\"local-crypt:\\\"\"\n#   Plexdrive\nENV CHUNK_SIZE=\"\\\"10M\\\"\"\nENV CLEAR_CHUNK_MAX_SIZE=\"\\\"\nENV CLEAR_CHUNK_AGE=\"\\\"24h\\\"\"\nENV MONGO_DATABASE=\"\\\"plexdrive\\\"\"\n#   Time format\nENV DATE_FORMAT=\"\\\"+%F@%T\\\"\"\n#   Local files removal\nENV REMOVE_LOCAL_FILES_BASED_ON=\"\\\"space\\\"\"\nENV REMOVE_LOCAL_FILES_WHEN_SPACE_EXCEEDS_GB=\"\\\"100\\\"\"\nENV FREEUP_ATLEAST_GB=\"\\\"80\\\"\"\nENV REMOVE_LOCAL_FILES_AFTER_DAYS=\"\\\"30\\\"\"\n#   Plex\nENV PLEX_URL=\"\\\"\nENV PLEX_TOKEN=\"\\\"\n#  cron\nENV CLOUDUPLOADTIME=\"\\\"0 1 * * *\\\"\"\nENV RMDELETETIME=\"\\\"0 6 * * *\\\"\"\n#  ###################\n#   SCRIPTS\n#  ###################\nCOPY setup/* /usr/bin/\nCOPY install.sh /\nCOPY scripts/* /usr/bin/\nCOPY root /\nRUN chmod a+x /install.sh \\\n && sh /install.sh \\\n && chmod a+x /usr/bin/* \\\n && groupmod -g 1000 users \\\n && useradd -u 911 -U -d / -s /bin/false abc \\\n && usermod -G users abc \\\n && apt-get clean autoclean \\\n && apt-get autoremove -y \\\n && rm -rf /tmp/* /var/lib/{apt,dpkg,cache,log}/\n#  ###################\n#   VOLUMES\n#  ###################\n#   Define mountable directories.\n#  VOLUME /data/db /config /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nVOLUME /data/db /cloud-encrypt /cloud-decrypt /local-decrypt /local-media /chunks /log\nRUN chmod -R 777 /data /log \\\n && mkdir /config\n#  ###################\n#   WORKING DIRECTORY\n#  ###################\nWORKDIR /data\n#  ###################\n#   ENTRYPOINT\n#  ###################\nENTRYPOINT [\"/init\"]\nCMD cron -f\n","originalDockerfileUglifiedHash":"60e1c401ce42b94cc360598b9c8de287","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/141eeca63996316e62be57e760b44017f5ea41b5.dockerfile"}