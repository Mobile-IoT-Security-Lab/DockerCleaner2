{"seed":1712832431,"processedDockerfileHash":"3107c41e26b780940c46c600ec63f5f3","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","use-copy-instead-of-add","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:latest\n#  FROM openjdk:8-jdk\nMAINTAINER Furcy Pin\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   update\nRUN :\nRUN yes | apt upgrade\nRUN yes | (apt-get update ;apt-get install --no-install-recommends apt-utils=2.6.0 )\nRUN yes | (apt-get update ;apt-get install --no-install-recommends net-tools=2.10-0.1ubuntu3 )\nRUN yes | (apt-get update ;apt-get install --no-install-recommends gawk=1:5.2.1-2 )\n#   Install wget\nRUN yes | (apt-get update ;apt-get install --no-install-recommends wget=1.21.3-1ubuntu1 )\n#   Install curl\nRUN yes | (apt-get update ;apt-get install --no-install-recommends curl=7.88.1-7ubuntu1 )\n#   Install java\nRUN yes | (apt-get update ;apt-get install --no-install-recommends openjdk-8-jdk=8u362-ga-0ubuntu2 )\n#   Install sbt\nENV SBT_VERSION=\"0.13.15\"\nRUN wget http://dl.bintray.com/sbt/debian/sbt-${SBT_VERSION}.deb -O /tmp/sbt.deb \\\n && dpkg -i /tmp/sbt.deb \\\n && rm -f /tmp/sbt.deb\n#   Install Hadoop\nENV HADOOP_VERSION=\"2.7.3\"\nENV HADOOP_HOME=\"/opt/hadoop-$HADOOP_VERSION\"\nENV HADOOP_CONF_DIR=\"$HADOOP_HOME/conf\"\nENV PATH=\"$PATH:$HADOOP_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hadoop/common/hadoop-$HADOOP_VERSION/hadoop-$HADOOP_VERSION.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && rm -rf $HADOOP_HOME/share/doc \\\n && chown -R root:root $HADOOP_HOME \\\n && mkdir -p $HADOOP_HOME/logs \\\n && mkdir -p $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_HOME/logs\n#   Install Hive\nENV HIVE_VERSION=\"2.0.1\"\nENV HIVE_HOME=\"/opt/apache-hive-$HIVE_VERSION-bin\"\nENV HIVE_CONF_DIR=\"$HIVE_HOME/conf\"\nENV PATH=\"$PATH:$HIVE_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hive/hive-$HIVE_VERSION/apache-hive-$HIVE_VERSION-bin.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $HIVE_HOME \\\n && mkdir -p $HIVE_HOME/hcatalog/var/log \\\n && mkdir -p $HIVE_HOME/var/log \\\n && mkdir -p /data/hive/ \\\n && mkdir -p $HIVE_CONF_DIR \\\n && chmod 777 $HIVE_HOME/hcatalog/var/log \\\n && chmod 777 $HIVE_HOME/var/log\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $HIVE_HOME/lib/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $HIVE_HOME/lib/.\n#   Install Spark\nENV SPARK_VERSION=\"2.2.0\"\nENV SPARK_HOME=\"/opt/spark-$SPARK_VERSION-bin-hadoop2.7\"\nENV SPARK_CONF_DIR=\"$SPARK_HOME/conf\"\nENV PATH=\"$PATH:$SPARK_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK_VERSION-bin-hadoop2.7.tgz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $SPARK_HOME \\\n && mkdir -p /data/spark/ \\\n && mkdir -p $SPARK_HOME/logs \\\n && mkdir -p $SPARK_CONF_DIR \\\n && chmod 777 $SPARK_HOME/logs\n#   Install Readline Wrapper\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends rlwrap=0.46.1-1 -y ) \\\n && rm -rf /var/lib/apt/lists/*\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $SPARK_HOME/jars/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $SPARK_HOME/jars/.\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\"\n#   Configure\nCOPY files/hive-site.xml $HIVE_CONF_DIR/\nCOPY files/hive-site.xml $SPARK_CONF_DIR/\nCOPY files/start.sh /\nCOPY files/init.sh /\nCOPY files/beeline.sh /\nEXPOSE 22/tcp\nEXPOSE 4040/tcp\nEXPOSE 9083/tcp\nEXPOSE 10000/tcp\n#  RUN /bin/bash /beeline.sh -e \"add jar file:///quetzal/target/quetzal-RDF-0.0.1-SNAPSHOT.jar;\"\n#  ENTRYPOINT [\"/beeline.sh\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:latest\n# FROM openjdk:8-jdk\nMAINTAINER Furcy Pin\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  update\nRUN apt-get update\nRUN yes | apt upgrade\nRUN yes | apt-get install apt-utils\nRUN yes | apt-get install net-tools\nRUN yes | apt-get install gawk\n#  Install wget\nRUN yes | apt-get install wget\n#  Install curl\nRUN yes | apt-get install curl\n#  Install java\nRUN yes | apt-get install openjdk-8-jdk\n#  Install sbt\nENV SBT_VERSION=\"0.13.15\"\nRUN wget http://dl.bintray.com/sbt/debian/sbt-${SBT_VERSION}.deb -O /tmp/sbt.deb \\\n && dpkg -i /tmp/sbt.deb \\\n && rm -f /tmp/sbt.deb\n#  Install Hadoop\nENV HADOOP_VERSION=\"2.7.3\"\nENV HADOOP_HOME=\"/opt/hadoop-$HADOOP_VERSION\"\nENV HADOOP_CONF_DIR=\"$HADOOP_HOME/conf\"\nENV PATH=\"$PATH:$HADOOP_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hadoop/common/hadoop-$HADOOP_VERSION/hadoop-$HADOOP_VERSION.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && rm -rf $HADOOP_HOME/share/doc \\\n && chown -R root:root $HADOOP_HOME \\\n && mkdir -p $HADOOP_HOME/logs \\\n && mkdir -p $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_HOME/logs\n#  Install Hive\nENV HIVE_VERSION=\"2.0.1\"\nENV HIVE_HOME=\"/opt/apache-hive-$HIVE_VERSION-bin\"\nENV HIVE_CONF_DIR=\"$HIVE_HOME/conf\"\nENV PATH=\"$PATH:$HIVE_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hive/hive-$HIVE_VERSION/apache-hive-$HIVE_VERSION-bin.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $HIVE_HOME \\\n && mkdir -p $HIVE_HOME/hcatalog/var/log \\\n && mkdir -p $HIVE_HOME/var/log \\\n && mkdir -p /data/hive/ \\\n && mkdir -p $HIVE_CONF_DIR \\\n && chmod 777 $HIVE_HOME/hcatalog/var/log \\\n && chmod 777 $HIVE_HOME/var/log\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $HIVE_HOME/lib/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $HIVE_HOME/lib/.\n#  Install Spark\nENV SPARK_VERSION=\"2.2.0\"\nENV SPARK_HOME=\"/opt/spark-$SPARK_VERSION-bin-hadoop2.7\"\nENV SPARK_CONF_DIR=\"$SPARK_HOME/conf\"\nENV PATH=\"$PATH:$SPARK_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK_VERSION-bin-hadoop2.7.tgz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $SPARK_HOME \\\n && mkdir -p /data/spark/ \\\n && mkdir -p $SPARK_HOME/logs \\\n && mkdir -p $SPARK_CONF_DIR \\\n && chmod 777 $SPARK_HOME/logs\n#  Install Readline Wrapper\nRUN apt-get update \\\n && apt-get install rlwrap -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $SPARK_HOME/jars/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $SPARK_HOME/jars/.\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\"\n#  Configure\nADD files/hive-site.xml $HIVE_CONF_DIR/\nADD files/hive-site.xml $SPARK_CONF_DIR/\nADD files/start.sh /\nADD files/init.sh /\nADD files/beeline.sh /\nEXPOSE 22/tcp\nEXPOSE 4040/tcp\nEXPOSE 9083/tcp\nEXPOSE 10000/tcp\n# RUN /bin/bash /beeline.sh -e \"add jar file:///quetzal/target/quetzal-RDF-0.0.1-SNAPSHOT.jar;\"\n# ENTRYPOINT [\"/beeline.sh\"]\n","injectedSmells":[],"originalDockerfileHash":"ff8729ae82791bd1f44bc1dd6617bfaf","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:latest\n#  FROM openjdk:8-jdk\nMAINTAINER Furcy Pin\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   update\nRUN apt-get update\nRUN yes | apt upgrade\nRUN yes | apt-get install apt-utils\nRUN yes | apt-get install net-tools\nRUN yes | apt-get install gawk\n#   Install wget\nRUN yes | apt-get install wget\n#   Install curl\nRUN yes | apt-get install curl\n#   Install java\nRUN yes | apt-get install openjdk-8-jdk\n#   Install sbt\nENV SBT_VERSION=\"0.13.15\"\nRUN wget http://dl.bintray.com/sbt/debian/sbt-${SBT_VERSION}.deb -O /tmp/sbt.deb \\\n && dpkg -i /tmp/sbt.deb \\\n && rm -f /tmp/sbt.deb\n#   Install Hadoop\nENV HADOOP_VERSION=\"2.7.3\"\nENV HADOOP_HOME=\"/opt/hadoop-$HADOOP_VERSION\"\nENV HADOOP_CONF_DIR=\"$HADOOP_HOME/conf\"\nENV PATH=\"$PATH:$HADOOP_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hadoop/common/hadoop-$HADOOP_VERSION/hadoop-$HADOOP_VERSION.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && rm -rf $HADOOP_HOME/share/doc \\\n && chown -R root:root $HADOOP_HOME \\\n && mkdir -p $HADOOP_HOME/logs \\\n && mkdir -p $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_CONF_DIR \\\n && chmod 777 $HADOOP_HOME/logs\n#   Install Hive\nENV HIVE_VERSION=\"2.0.1\"\nENV HIVE_HOME=\"/opt/apache-hive-$HIVE_VERSION-bin\"\nENV HIVE_CONF_DIR=\"$HIVE_HOME/conf\"\nENV PATH=\"$PATH:$HIVE_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/hive/hive-$HIVE_VERSION/apache-hive-$HIVE_VERSION-bin.tar.gz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $HIVE_HOME \\\n && mkdir -p $HIVE_HOME/hcatalog/var/log \\\n && mkdir -p $HIVE_HOME/var/log \\\n && mkdir -p /data/hive/ \\\n && mkdir -p $HIVE_CONF_DIR \\\n && chmod 777 $HIVE_HOME/hcatalog/var/log \\\n && chmod 777 $HIVE_HOME/var/log\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $HIVE_HOME/lib/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $HIVE_HOME/lib/.\n#   Install Spark\nENV SPARK_VERSION=\"2.2.0\"\nENV SPARK_HOME=\"/opt/spark-$SPARK_VERSION-bin-hadoop2.7\"\nENV SPARK_CONF_DIR=\"$SPARK_HOME/conf\"\nENV PATH=\"$PATH:$SPARK_HOME/bin\"\nRUN curl -sL \"https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK_VERSION-bin-hadoop2.7.tgz\" | gunzip | tar -x -C /opt/ \\\n && chown -R root:root $SPARK_HOME \\\n && mkdir -p /data/spark/ \\\n && mkdir -p $SPARK_HOME/logs \\\n && mkdir -p $SPARK_CONF_DIR \\\n && chmod 777 $SPARK_HOME/logs\n#   Install Readline Wrapper\nRUN apt-get update \\\n && apt-get install rlwrap -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar $SPARK_HOME/jars/.\nRUN ln -s $HADOOP_HOME/share/hadoop/tools/lib/hadoop-aws-2.7.3.jar $SPARK_HOME/jars/.\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\"\n#   Configure\nADD files/hive-site.xml $HIVE_CONF_DIR/\nADD files/hive-site.xml $SPARK_CONF_DIR/\nADD files/start.sh /\nADD files/init.sh /\nADD files/beeline.sh /\nEXPOSE 22/tcp\nEXPOSE 4040/tcp\nEXPOSE 9083/tcp\nEXPOSE 10000/tcp\n#  RUN /bin/bash /beeline.sh -e \"add jar file:///quetzal/target/quetzal-RDF-0.0.1-SNAPSHOT.jar;\"\n#  ENTRYPOINT [\"/beeline.sh\"]\n","originalDockerfileUglifiedHash":"d333645adefa5ca82d0111b9f80dc742","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/800ccb18c9c65bf3a0747ae99c1b6b5fc90fbe2f.dockerfile"}