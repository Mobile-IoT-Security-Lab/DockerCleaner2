{"seed":1500315168,"processedDockerfileHash":"bbc72687198080df4ab4a1839f3c9eeb","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"Srinivasan Sekar <srinivasan.sekar1990@gmail.com>\\\"\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  =============\n#   Set WORKDIR\n#  =============\nWORKDIR /root\n#  ==================\n#   General Packages\n#  ------------------\n#   openjdk-8-jdk\n#     Java\n#   ca-certificates\n#     SSL client\n#   tzdata\n#     Timezone\n#   zip\n#     Make a zip file\n#   unzip\n#     Unzip zip file\n#   curl\n#     Transfer data from or to a server\n#   wget\n#     Network downloader\n#   libqt5webkit5\n#     Web content engine (Fix issue in Android)\n#   libgconf-2-4\n#     Required package for chrome and chromedriver to run on Linux\n#   xvfb\n#     X virtual framebuffer\n#   gnupg\n#     Encryption software. It is needed for nodejs\n#   salt-minion\n#     Infrastructure management (client-side)\n#  ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk=8u362-ga-0ubuntu1~18.04.1 ca-certificates=20211016ubuntu0.18.04.1 tzdata=2022g-0ubuntu0.18.04 zip=3.0-11build1 unzip=6.0-21ubuntu1.2 curl=7.58.0-2ubuntu3.24 wget=1.19.4-1ubuntu2.2 libqt5webkit5=5.212.0~alpha2-7ubuntu1 libgconf-2-4=3.2.6-4ubuntu1 xvfb=2:1.19.6-1ubuntu4.14 gnupg=2.2.4-1ubuntu1.6 salt-minion=2017.7.4+dfsg1-1ubuntu18.04.2 -qqy \\\n && rm -rf /var/lib/apt/lists/*\n#  ===============\n#   Set JAVA_HOME\n#  ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n#  =====================\n#   Install Android SDK\n#  =====================\nARG SDK_VERSION=sdk-tools-linux-3859397\nARG ANDROID_BUILD_TOOLS_VERSION=26.0.0\nARG ANDROID_PLATFORM_VERSION=\"android-25\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#   https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n#  ====================================\n#   Install latest nodejs, npm, appium\n#   Using this workaround to install Appium -> https://github.com/appium/appium/issues/10020 -> Please remove this workaround asap\n#  ====================================\nARG APPIUM_VERSION=1.7.0-beta\nENV APPIUM_VERSION=\"$APPIUM_VERSION\"\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash \\\n && apt-get install --no-install-recommends nodejs=8.10.0~dfsg-2ubuntu0.4 -qqy \\\n && npm install appium@${APPIUM_VERSION} -g --unsafe-perm=true --allow-root \\\n && exit 0 \\\n && npm cache clean \\\n && apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n#  ==================================\n#   Fix Issue with timezone mismatch\n#  ==================================\nENV TZ=\"US/Pacific\"\nRUN echo \"${TZ}\" > /etc/timezone\n#  ===============\n#   Expose Ports\n#  ---------------\n#   4723\n#     Appium port\n#  ===============\nEXPOSE 4723/tcp\n#  ====================================================\n#   Scripts to run appium and connect to Selenium Grid\n#  ====================================================\nCOPY entry_point.sh generate_config.sh wireless_connect.sh wireless_autoconnect.sh /root/\nRUN chmod +x /root/entry_point.sh \\\n && chmod +x /root/generate_config.sh \\\n && chmod +x /root/wireless_connect.sh \\\n && chmod +x /root/wireless_autoconnect.sh\n#  ========================================\n#   Run xvfb and appium server\n#  ========================================\nCMD /root/wireless_autoconnect.sh \\\n && /root/entry_point.sh\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"Srinivasan Sekar <srinivasan.sekar1990@gmail.com>\\\"\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n# =============\n#  Set WORKDIR\n# =============\nWORKDIR /root\n# ==================\n#  General Packages\n# ------------------\n#  openjdk-8-jdk\n#    Java\n#  ca-certificates\n#    SSL client\n#  tzdata\n#    Timezone\n#  zip\n#    Make a zip file\n#  unzip\n#    Unzip zip file\n#  curl\n#    Transfer data from or to a server\n#  wget\n#    Network downloader\n#  libqt5webkit5\n#    Web content engine (Fix issue in Android)\n#  libgconf-2-4\n#    Required package for chrome and chromedriver to run on Linux\n#  xvfb\n#    X virtual framebuffer\n#  gnupg\n#    Encryption software. It is needed for nodejs\n#  salt-minion\n#    Infrastructure management (client-side)\n# ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk ca-certificates tzdata zip unzip curl wget libqt5webkit5 libgconf-2-4 xvfb gnupg salt-minion -qqy \\\n && rm -rf /var/lib/apt/lists/*\n# ===============\n#  Set JAVA_HOME\n# ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n# =====================\n#  Install Android SDK\n# =====================\nARG SDK_VERSION=sdk-tools-linux-3859397\nARG ANDROID_BUILD_TOOLS_VERSION=26.0.0\nARG ANDROID_PLATFORM_VERSION=\"android-25\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#  https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n# ====================================\n#  Install latest nodejs, npm, appium\n#  Using this workaround to install Appium -> https://github.com/appium/appium/issues/10020 -> Please remove this workaround asap\n# ====================================\nARG APPIUM_VERSION=1.7.0-beta\nENV APPIUM_VERSION=\"$APPIUM_VERSION\"\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash \\\n && apt-get install nodejs -qqy \\\n && npm install appium@${APPIUM_VERSION} -g --unsafe-perm=true --allow-root \\\n && exit 0 \\\n && npm cache clean \\\n && apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n# ==================================\n#  Fix Issue with timezone mismatch\n# ==================================\nENV TZ=\"US/Pacific\"\nRUN echo \"${TZ}\" > /etc/timezone\n# ===============\n#  Expose Ports\n# ---------------\n#  4723\n#    Appium port\n# ===============\nEXPOSE 4723/tcp\n# ====================================================\n#  Scripts to run appium and connect to Selenium Grid\n# ====================================================\nCOPY entry_point.sh generate_config.sh wireless_connect.sh wireless_autoconnect.sh /root/\nRUN chmod +x /root/entry_point.sh \\\n && chmod +x /root/generate_config.sh \\\n && chmod +x /root/wireless_connect.sh \\\n && chmod +x /root/wireless_autoconnect.sh\n# ========================================\n#  Run xvfb and appium server\n# ========================================\nCMD /root/wireless_autoconnect.sh \\\n && /root/entry_point.sh\n","injectedSmells":[],"originalDockerfileHash":"88d39c55dcc28fa8ea90b077596cfe20","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:18.04\nLABEL maintainer=\"\\\"Srinivasan Sekar <srinivasan.sekar1990@gmail.com>\\\"\"\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  =============\n#   Set WORKDIR\n#  =============\nWORKDIR /root\n#  ==================\n#   General Packages\n#  ------------------\n#   openjdk-8-jdk\n#     Java\n#   ca-certificates\n#     SSL client\n#   tzdata\n#     Timezone\n#   zip\n#     Make a zip file\n#   unzip\n#     Unzip zip file\n#   curl\n#     Transfer data from or to a server\n#   wget\n#     Network downloader\n#   libqt5webkit5\n#     Web content engine (Fix issue in Android)\n#   libgconf-2-4\n#     Required package for chrome and chromedriver to run on Linux\n#   xvfb\n#     X virtual framebuffer\n#   gnupg\n#     Encryption software. It is needed for nodejs\n#   salt-minion\n#     Infrastructure management (client-side)\n#  ==================\nRUN apt-get update -qqy \\\n && apt-get install --no-install-recommends openjdk-8-jdk ca-certificates tzdata zip unzip curl wget libqt5webkit5 libgconf-2-4 xvfb gnupg salt-minion -qqy \\\n && rm -rf /var/lib/apt/lists/*\n#  ===============\n#   Set JAVA_HOME\n#  ===============\nENV JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre\" \\\n    PATH=\"$PATH:$JAVA_HOME/bin\"\n#  =====================\n#   Install Android SDK\n#  =====================\nARG SDK_VERSION=sdk-tools-linux-3859397\nARG ANDROID_BUILD_TOOLS_VERSION=26.0.0\nARG ANDROID_PLATFORM_VERSION=\"android-25\"\nENV SDK_VERSION=\"$SDK_VERSION\" \\\n    ANDROID_BUILD_TOOLS_VERSION=\"$ANDROID_BUILD_TOOLS_VERSION\" \\\n    ANDROID_HOME=\"/root\"\nRUN wget -O tools.zip https://dl.google.com/android/repository/${SDK_VERSION}.zip \\\n && unzip tools.zip \\\n && rm tools.zip \\\n && chmod a+x -R $ANDROID_HOME \\\n && chown -R root:root $ANDROID_HOME\nENV PATH=\"$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin\"\n#   https://askubuntu.com/questions/885658/android-sdk-repositories-cfg-could-not-be-loaded\nRUN mkdir -p ~/.android \\\n && touch ~/.android/repositories.cfg \\\n && echo y | sdkmanager \"platform-tools\" \\\n && echo y | sdkmanager \"build-tools;$ANDROID_BUILD_TOOLS_VERSION\" \\\n && echo y | sdkmanager \"platforms;$ANDROID_PLATFORM_VERSION\"\nENV PATH=\"$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools\"\n#  ====================================\n#   Install latest nodejs, npm, appium\n#   Using this workaround to install Appium -> https://github.com/appium/appium/issues/10020 -> Please remove this workaround asap\n#  ====================================\nARG APPIUM_VERSION=1.7.0-beta\nENV APPIUM_VERSION=\"$APPIUM_VERSION\"\nRUN curl -sL https://deb.nodesource.com/setup_10.x | bash \\\n && apt-get install nodejs -qqy \\\n && npm install appium@${APPIUM_VERSION} -g --unsafe-perm=true --allow-root \\\n && exit 0 \\\n && npm cache clean \\\n && apt-get remove --purge -y npm \\\n && apt-get autoremove --purge -y \\\n && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n && apt-get clean\n#  ==================================\n#   Fix Issue with timezone mismatch\n#  ==================================\nENV TZ=\"US/Pacific\"\nRUN echo \"${TZ}\" > /etc/timezone\n#  ===============\n#   Expose Ports\n#  ---------------\n#   4723\n#     Appium port\n#  ===============\nEXPOSE 4723/tcp\n#  ====================================================\n#   Scripts to run appium and connect to Selenium Grid\n#  ====================================================\nCOPY entry_point.sh generate_config.sh wireless_connect.sh wireless_autoconnect.sh /root/\nRUN chmod +x /root/entry_point.sh \\\n && chmod +x /root/generate_config.sh \\\n && chmod +x /root/wireless_connect.sh \\\n && chmod +x /root/wireless_autoconnect.sh\n#  ========================================\n#   Run xvfb and appium server\n#  ========================================\nCMD /root/wireless_autoconnect.sh \\\n && /root/entry_point.sh\n","originalDockerfileUglifiedHash":"d847f01b645bfde7629f0dc75cf20d01","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/95a3cbef7d64be9e53c7c2b2499b451913b1d2b2.dockerfile"}