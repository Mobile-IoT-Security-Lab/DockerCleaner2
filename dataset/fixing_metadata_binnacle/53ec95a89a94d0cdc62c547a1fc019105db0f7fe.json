{"seed":2320695459,"processedDockerfileHash":"324d15014f3bf2193d8814797ec2633c","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2016 Google Inc.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#  ###############################################################################\nFROM gcr.io/oss-fuzz-base/base-builder\nMAINTAINER kjlubick@chromium.org\n#   Mesa needed to build swiftshader\nRUN apt-get update \\\n && apt-get install --no-install-recommends python wget=1.21.3-1ubuntu1 libglu1-mesa-dev=9.0.2-1.1 cmake=3.25.1-1 -y\nRUN git clone 'https://chromium.googlesource.com/chromium/tools/depot_tools.git' --depth 1\nENV PATH=\"${SRC}/depot_tools:${PATH}\"\nRUN git clone https://skia.googlesource.com/skia.git --depth 1\n#   current directory for build script\nWORKDIR skia\nRUN bin/sync\n#   Setup SwiftShader\nWORKDIR $SRC/skia/third_party/externals/swiftshader/\n#   TODO(metzman): Come up with a better long term solution, such as downloading\n#   prebuilt libraries, than pinning swiftshader to a known working revision.\nRUN git checkout bf8fd5b5fb6892dabcc21b4b86d41cd40cb9b4b5\nRUN git submodule update --init\nWORKDIR $SRC/skia\nRUN wget -O $SRC/skia/image_filter_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_filter_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/region_set_path_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/region_set_path_seed_corpus.zip\nRUN wget -O $SRC/skia/textblob_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/textblob_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/path_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/path_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/animated_image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/animated_image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/api_draw_functions_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_draw_functions_seed_corpus.zip\nRUN wget -O $SRC/skia/api_gradients_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_gradients_seed_corpus.zip\nRUN wget -O $SRC/skia/api_image_filter_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_image_filter_seed_corpus.zip\nRUN wget -O $SRC/skia/api_path_measure_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_path_measure_seed_corpus.zip\nRUN wget -O $SRC/skia/api_pathop_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_pathop_seed_corpus.zip\nRUN wget -O $SRC/skia/canvas_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/canvas_seed_corpus.zip\nRUN wget -O $SRC/skia/encoder_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/encoder_seed_corpus.zip\nRUN wget -O $SRC/skia/skottie_json_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skottie_json_seed_corpus.zip\nRUN wget -O $SRC/skia/skjson_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skjson_seed_corpus.zip\nRUN wget -O $SRC/skia/api_polyutils_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_polyutils_seed_corpus.zip\nRUN wget -O $SRC/skia/sksl_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/sksl_seed_corpus.zip\nCOPY build.sh $SRC/\nCOPY skia.diff $SRC/skia/skia.diff\nRUN git apply skia.diff\nCOPY region_deserialize.options $SRC/skia/region_deserialize.options\nCOPY region_set_path.options $SRC/skia/region_set_path.options\nCOPY image_filter_deserialize.options $SRC/skia/image_filter_deserialize.options\nCOPY image_filter_deserialize_width.options $SRC/skia/image_filter_deserialize_width.options\nCOPY textblob_deserialize.options $SRC/skia/textblob_deserialize.options\nCOPY path_deserialize.options $SRC/skia/path_deserialize.options\nCOPY encoder.options $SRC/skia/encoder.options\n#   Codec fuzzers can share options\nCOPY image_codec.options $SRC/skia/android_codec.options\nCOPY image_codec.options $SRC/skia/animated_image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode_incremental.options\n#   API fuzzers can share options\nCOPY api_fuzzers.options $SRC/skia/api_draw_functions.options\nCOPY api_fuzzers.options $SRC/skia/api_gradients.options\nCOPY api_fuzzers.options $SRC/skia/api_image_filter.options\nCOPY api_fuzzers.options $SRC/skia/api_mock_gpu_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_null_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_path_measure.options\nCOPY api_fuzzers.options $SRC/skia/api_pathop.options\nCOPY api_fuzzers.options $SRC/skia/api_polyutils.options\nCOPY api_fuzzers.options $SRC/skia/api_raster_n32_canvas.options\n#   SKSL fuzzers can share options\nCOPY sksl.options $SRC/skia/sksl2glsl.options\nCOPY sksl.options $SRC/skia/sksl2spirv.options\nCOPY sksl.options $SRC/skia/sksl2metal.options\nCOPY sksl.options $SRC/skia/sksl2pipeline.options\nCOPY json.dict $SRC/skia/json.dict\nCOPY BUILD.gn.diff $SRC/skia/BUILD.gn.diff\nRUN cat BUILD.gn.diff >> BUILD.gn\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2016 Google Inc.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#\n# ###############################################################################\nFROM gcr.io/oss-fuzz-base/base-builder\nMAINTAINER kjlubick@chromium.org\n#  Mesa needed to build swiftshader\nRUN apt-get update \\\n && apt-get install python wget libglu1-mesa-dev cmake -y\nRUN git clone 'https://chromium.googlesource.com/chromium/tools/depot_tools.git' --depth 1\nENV PATH=\"${SRC}/depot_tools:${PATH}\"\nRUN git clone https://skia.googlesource.com/skia.git --depth 1\n#  current directory for build script\nWORKDIR skia\nRUN bin/sync\n#  Setup SwiftShader\nWORKDIR $SRC/skia/third_party/externals/swiftshader/\n#  TODO(metzman): Come up with a better long term solution, such as downloading\n#  prebuilt libraries, than pinning swiftshader to a known working revision.\nRUN git checkout bf8fd5b5fb6892dabcc21b4b86d41cd40cb9b4b5\nRUN git submodule update --init\nWORKDIR $SRC/skia\nRUN wget -O $SRC/skia/image_filter_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_filter_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/region_set_path_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/region_set_path_seed_corpus.zip\nRUN wget -O $SRC/skia/textblob_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/textblob_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/path_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/path_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/animated_image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/animated_image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/api_draw_functions_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_draw_functions_seed_corpus.zip\nRUN wget -O $SRC/skia/api_gradients_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_gradients_seed_corpus.zip\nRUN wget -O $SRC/skia/api_image_filter_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_image_filter_seed_corpus.zip\nRUN wget -O $SRC/skia/api_path_measure_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_path_measure_seed_corpus.zip\nRUN wget -O $SRC/skia/api_pathop_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_pathop_seed_corpus.zip\nRUN wget -O $SRC/skia/canvas_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/canvas_seed_corpus.zip\nRUN wget -O $SRC/skia/encoder_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/encoder_seed_corpus.zip\nRUN wget -O $SRC/skia/skottie_json_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skottie_json_seed_corpus.zip\nRUN wget -O $SRC/skia/skjson_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skjson_seed_corpus.zip\nRUN wget -O $SRC/skia/api_polyutils_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_polyutils_seed_corpus.zip\nRUN wget -O $SRC/skia/sksl_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/sksl_seed_corpus.zip\nCOPY build.sh $SRC/\nCOPY skia.diff $SRC/skia/skia.diff\nRUN git apply skia.diff\nCOPY region_deserialize.options $SRC/skia/region_deserialize.options\nCOPY region_set_path.options $SRC/skia/region_set_path.options\nCOPY image_filter_deserialize.options $SRC/skia/image_filter_deserialize.options\nCOPY image_filter_deserialize_width.options $SRC/skia/image_filter_deserialize_width.options\nCOPY textblob_deserialize.options $SRC/skia/textblob_deserialize.options\nCOPY path_deserialize.options $SRC/skia/path_deserialize.options\nCOPY encoder.options $SRC/skia/encoder.options\n#  Codec fuzzers can share options\nCOPY image_codec.options $SRC/skia/android_codec.options\nCOPY image_codec.options $SRC/skia/animated_image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode_incremental.options\n#  API fuzzers can share options\nCOPY api_fuzzers.options $SRC/skia/api_draw_functions.options\nCOPY api_fuzzers.options $SRC/skia/api_gradients.options\nCOPY api_fuzzers.options $SRC/skia/api_image_filter.options\nCOPY api_fuzzers.options $SRC/skia/api_mock_gpu_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_null_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_path_measure.options\nCOPY api_fuzzers.options $SRC/skia/api_pathop.options\nCOPY api_fuzzers.options $SRC/skia/api_polyutils.options\nCOPY api_fuzzers.options $SRC/skia/api_raster_n32_canvas.options\n#  SKSL fuzzers can share options\nCOPY sksl.options $SRC/skia/sksl2glsl.options\nCOPY sksl.options $SRC/skia/sksl2spirv.options\nCOPY sksl.options $SRC/skia/sksl2metal.options\nCOPY sksl.options $SRC/skia/sksl2pipeline.options\nCOPY json.dict $SRC/skia/json.dict\nCOPY BUILD.gn.diff $SRC/skia/BUILD.gn.diff\nRUN cat BUILD.gn.diff >> BUILD.gn\n","injectedSmells":[],"originalDockerfileHash":"3da69ccad1d9d4097762491a8a5300a3","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2016 Google Inc.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n#\n#  ###############################################################################\nFROM gcr.io/oss-fuzz-base/base-builder\nMAINTAINER kjlubick@chromium.org\n#   Mesa needed to build swiftshader\nRUN apt-get update \\\n && apt-get install python wget libglu1-mesa-dev cmake -y\nRUN git clone 'https://chromium.googlesource.com/chromium/tools/depot_tools.git' --depth 1\nENV PATH=\"${SRC}/depot_tools:${PATH}\"\nRUN git clone https://skia.googlesource.com/skia.git --depth 1\n#   current directory for build script\nWORKDIR skia\nRUN bin/sync\n#   Setup SwiftShader\nWORKDIR $SRC/skia/third_party/externals/swiftshader/\n#   TODO(metzman): Come up with a better long term solution, such as downloading\n#   prebuilt libraries, than pinning swiftshader to a known working revision.\nRUN git checkout bf8fd5b5fb6892dabcc21b4b86d41cd40cb9b4b5\nRUN git submodule update --init\nWORKDIR $SRC/skia\nRUN wget -O $SRC/skia/image_filter_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_filter_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/region_set_path_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/region_set_path_seed_corpus.zip\nRUN wget -O $SRC/skia/textblob_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/textblob_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/path_deserialize_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/path_deserialize_seed_corpus.zip\nRUN wget -O $SRC/skia/image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/animated_image_decode_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/animated_image_decode_seed_corpus.zip\nRUN wget -O $SRC/skia/api_draw_functions_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_draw_functions_seed_corpus.zip\nRUN wget -O $SRC/skia/api_gradients_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_gradients_seed_corpus.zip\nRUN wget -O $SRC/skia/api_image_filter_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_image_filter_seed_corpus.zip\nRUN wget -O $SRC/skia/api_path_measure_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_path_measure_seed_corpus.zip\nRUN wget -O $SRC/skia/api_pathop_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_pathop_seed_corpus.zip\nRUN wget -O $SRC/skia/canvas_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/canvas_seed_corpus.zip\nRUN wget -O $SRC/skia/encoder_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/encoder_seed_corpus.zip\nRUN wget -O $SRC/skia/skottie_json_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skottie_json_seed_corpus.zip\nRUN wget -O $SRC/skia/skjson_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/skjson_seed_corpus.zip\nRUN wget -O $SRC/skia/api_polyutils_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/api_polyutils_seed_corpus.zip\nRUN wget -O $SRC/skia/sksl_seed_corpus.zip https://storage.googleapis.com/skia-fuzzer/oss-fuzz/sksl_seed_corpus.zip\nCOPY build.sh $SRC/\nCOPY skia.diff $SRC/skia/skia.diff\nRUN git apply skia.diff\nCOPY region_deserialize.options $SRC/skia/region_deserialize.options\nCOPY region_set_path.options $SRC/skia/region_set_path.options\nCOPY image_filter_deserialize.options $SRC/skia/image_filter_deserialize.options\nCOPY image_filter_deserialize_width.options $SRC/skia/image_filter_deserialize_width.options\nCOPY textblob_deserialize.options $SRC/skia/textblob_deserialize.options\nCOPY path_deserialize.options $SRC/skia/path_deserialize.options\nCOPY encoder.options $SRC/skia/encoder.options\n#   Codec fuzzers can share options\nCOPY image_codec.options $SRC/skia/android_codec.options\nCOPY image_codec.options $SRC/skia/animated_image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode.options\nCOPY image_codec.options $SRC/skia/image_decode_incremental.options\n#   API fuzzers can share options\nCOPY api_fuzzers.options $SRC/skia/api_draw_functions.options\nCOPY api_fuzzers.options $SRC/skia/api_gradients.options\nCOPY api_fuzzers.options $SRC/skia/api_image_filter.options\nCOPY api_fuzzers.options $SRC/skia/api_mock_gpu_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_null_canvas.options\nCOPY api_fuzzers.options $SRC/skia/api_path_measure.options\nCOPY api_fuzzers.options $SRC/skia/api_pathop.options\nCOPY api_fuzzers.options $SRC/skia/api_polyutils.options\nCOPY api_fuzzers.options $SRC/skia/api_raster_n32_canvas.options\n#   SKSL fuzzers can share options\nCOPY sksl.options $SRC/skia/sksl2glsl.options\nCOPY sksl.options $SRC/skia/sksl2spirv.options\nCOPY sksl.options $SRC/skia/sksl2metal.options\nCOPY sksl.options $SRC/skia/sksl2pipeline.options\nCOPY json.dict $SRC/skia/json.dict\nCOPY BUILD.gn.diff $SRC/skia/BUILD.gn.diff\nRUN cat BUILD.gn.diff >> BUILD.gn\n","originalDockerfileUglifiedHash":"cbadeadb0436bc48e494304f6297fb7e","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/53ec95a89a94d0cdc62c547a1fc019105db0f7fe.dockerfile"}