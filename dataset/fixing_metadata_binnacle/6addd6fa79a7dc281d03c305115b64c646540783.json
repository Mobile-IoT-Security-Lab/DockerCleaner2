{"seed":2315381197,"processedDockerfileHash":"ded2672e72fd7491e3a4b8ac40622d6f","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Matthew Davis email: matdavis at ebi.ac.uk\n#   Initially created by Natalja Kurbatova\n#   Update the image with the latest packages (recommended)\n#   and install missing packages\n#  #############################\n#   Kraken with multithreaded Perl\n#  ############################\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   ubuntu dependencies \nRUN apt-get update \\\n && apt-get install --no-install-recommends build-essential=11.6ubuntu6 libcurl4-openssl-dev=7.35.0-1ubuntu2.20 libxml2-dev=2.9.1+dfsg1-3ubuntu4.13 gnupg=1.4.16-1ubuntu2.6 wget=1.15-1ubuntu1.14.04.5 zip=3.0-8 gcc=4:4.8.2-1ubuntu6 curl=7.35.0-1ubuntu2.20 procps=1:3.3.9-1ubuntu2.3 samtools=0.1.19-1 bowtie=1.0.0-5 -y \\\n && apt-get clean\n#   install R\nRUN sh -c 'echo \"deb http://cran.rstudio.com/bin/linux/ubuntu trusty/\" >> /etc/apt/sources.list'\nRUN gpg --keyserver keyserver.ubuntu.com --recv-key E084DAB9\nRUN gpg -a --export E084DAB9 | sudo apt-key add -\nRUN apt-get update \\\n && apt-get install --no-install-recommends r-base=3.0.2-1ubuntu1 -y \\\n && apt-get clean\n#   install R packages\nRUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\nRUN Rscript -e \"install.packages('R.utils')\"\nRUN Rscript -e \"install.packages('RColorBrewer')\"\nRUN Rscript -e \"install.packages('futile.logger')\"\nRUN Rscript -e \"install.packages('snow')\"\nRUN Rscript -e \"install.packages('bitops')\"\nRUN Rscript -e \"install.packages('hwriter')\"\nRUN Rscript -e \"install.packages('latticeExtra')\"\nRUN Rscript -e \"install.packages('gplots')\"\nRUN Rscript -e \"install.packages('S4Vectors', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('IRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('GenomicRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('ShortRead', repos='http://bioconductor.org/packages/release/bioc')\"\n#   install multithreaded Perl\n#   from https://github.com/Perl/docker-perl \nRUN rm -fr /var/lib/apt/lists/* \\\n && mkdir /usr/src/perl\nCOPY *.patch /usr/src/perl/\nWORKDIR /usr/src/perl\nRUN curl -SL https://cpan.metacpan.org/authors/id/R/RJ/RJBS/perl-5.22.0.tar.bz2 -o perl-5.22.0.tar.bz2 \\\n && echo '400338c91c56420d98142cbfcb84d418cae2c98c *perl-5.22.0.tar.bz2' | sha1sum -c - \\\n && tar --strip-components=1 -xjf perl-5.22.0.tar.bz2 -C /usr/src/perl \\\n && rm perl-5.22.0.tar.bz2 \\\n && cat *.patch | patch -p1 \\\n && ./Configure -Dusethreads -Duse64bitall -des \\\n && make -j$( nproc ;) \\\n && make test_harness \\\n && make install \\\n && cd /usr/src \\\n && curl -LO https://raw.githubusercontent.com/miyagawa/cpanminus/master/cpanm \\\n && chmod +x cpanm \\\n && ./cpanm App::cpanminus \\\n && rm -fr ./cpanm /root/.cpanm /usr/src/perl\nWORKDIR /root\nCMD [\"perl5.22.0\", \"-de0\"]\n#   install Kraken\nRUN mkdir /kraken\nWORKDIR /kraken\nRUN wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/SequenceImp/src/seqimp-latest.tgz \\\n && tar -xzf seqimp-latest.tgz \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/tally-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/swan-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/reaper-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/minion-15-065 \\\n && mv /kraken/reaper-15-065 /usr/bin/reaper \\\n && mv /kraken/tally-15-065 /usr/bin/tally \\\n && mv /kraken/swan-15-065 /usr/bin/swan \\\n && mv /kraken/minion-15-065 /usr/bin/minion \\\n && mv /kraken/seqimp*/ /kraken/seqimp\nRUN chmod 771 /usr/bin/reaper \\\n && chmod 771 /usr/bin/tally \\\n && chmod 771 /usr/bin/swan \\\n && chmod 771 /usr/bin/minion\nENV PATH=\"/kraken/seqimp/bin:$PATH\"\n#   check Kraken\nCMD [\"/kraken/seqimp/bin/imp_commandline.pl\", \"--system-check\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Matthew Davis email: matdavis at ebi.ac.uk\n#  Initially created by Natalja Kurbatova\n#  Update the image with the latest packages (recommended)\n#  and install missing packages\n# #############################\n#  Kraken with multithreaded Perl\n# ############################\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#  ubuntu dependencies \nRUN apt-get update \\\n && apt-get install build-essential libcurl4-openssl-dev libxml2-dev gnupg wget zip gcc curl procps samtools bowtie -y \\\n && apt-get clean\n#  install R\nRUN sh -c 'echo \"deb http://cran.rstudio.com/bin/linux/ubuntu trusty/\" >> /etc/apt/sources.list'\nRUN gpg --keyserver keyserver.ubuntu.com --recv-key E084DAB9\nRUN gpg -a --export E084DAB9 | sudo apt-key add -\nRUN apt-get update \\\n && apt-get install r-base -y \\\n && apt-get clean\n#  install R packages\nRUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\nRUN Rscript -e \"install.packages('R.utils')\"\nRUN Rscript -e \"install.packages('RColorBrewer')\"\nRUN Rscript -e \"install.packages('futile.logger')\"\nRUN Rscript -e \"install.packages('snow')\"\nRUN Rscript -e \"install.packages('bitops')\"\nRUN Rscript -e \"install.packages('hwriter')\"\nRUN Rscript -e \"install.packages('latticeExtra')\"\nRUN Rscript -e \"install.packages('gplots')\"\nRUN Rscript -e \"install.packages('S4Vectors', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('IRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('GenomicRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('ShortRead', repos='http://bioconductor.org/packages/release/bioc')\"\n#  install multithreaded Perl\n#  from https://github.com/Perl/docker-perl \nRUN rm -fr /var/lib/apt/lists/* \\\n && mkdir /usr/src/perl\nCOPY *.patch /usr/src/perl/\nWORKDIR /usr/src/perl\nRUN curl -SL https://cpan.metacpan.org/authors/id/R/RJ/RJBS/perl-5.22.0.tar.bz2 -o perl-5.22.0.tar.bz2 \\\n && echo '400338c91c56420d98142cbfcb84d418cae2c98c *perl-5.22.0.tar.bz2' | sha1sum -c - \\\n && tar --strip-components=1 -xjf perl-5.22.0.tar.bz2 -C /usr/src/perl \\\n && rm perl-5.22.0.tar.bz2 \\\n && cat *.patch | patch -p1 \\\n && ./Configure -Dusethreads -Duse64bitall -des \\\n && make -j$( nproc ;) \\\n && make test_harness \\\n && make install \\\n && cd /usr/src \\\n && curl -LO https://raw.githubusercontent.com/miyagawa/cpanminus/master/cpanm \\\n && chmod +x cpanm \\\n && ./cpanm App::cpanminus \\\n && rm -fr ./cpanm /root/.cpanm /usr/src/perl\nWORKDIR /root\nCMD [\"perl5.22.0\", \"-de0\"]\n#  install Kraken\nRUN mkdir /kraken\nWORKDIR /kraken\nRUN wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/SequenceImp/src/seqimp-latest.tgz \\\n && tar -xzf seqimp-latest.tgz \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/tally-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/swan-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/reaper-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/minion-15-065 \\\n && mv /kraken/reaper-15-065 /usr/bin/reaper \\\n && mv /kraken/tally-15-065 /usr/bin/tally \\\n && mv /kraken/swan-15-065 /usr/bin/swan \\\n && mv /kraken/minion-15-065 /usr/bin/minion \\\n && mv /kraken/seqimp*/ /kraken/seqimp\nRUN chmod 771 /usr/bin/reaper \\\n && chmod 771 /usr/bin/tally \\\n && chmod 771 /usr/bin/swan \\\n && chmod 771 /usr/bin/minion\nENV PATH=\"/kraken/seqimp/bin:$PATH\"\n#  check Kraken\nCMD [\"/kraken/seqimp/bin/imp_commandline.pl\", \"--system-check\"]\n","injectedSmells":[],"originalDockerfileHash":"2b3aacfe6279f29877434b618a01e9cd","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Matthew Davis email: matdavis at ebi.ac.uk\n#   Initially created by Natalja Kurbatova\n#   Update the image with the latest packages (recommended)\n#   and install missing packages\n#  #############################\n#   Kraken with multithreaded Perl\n#  ############################\nENV DEBIAN_FRONTEND=\"noninteractive\"\n#   ubuntu dependencies \nRUN apt-get update \\\n && apt-get install build-essential libcurl4-openssl-dev libxml2-dev gnupg wget zip gcc curl procps samtools bowtie -y \\\n && apt-get clean\n#   install R\nRUN sh -c 'echo \"deb http://cran.rstudio.com/bin/linux/ubuntu trusty/\" >> /etc/apt/sources.list'\nRUN gpg --keyserver keyserver.ubuntu.com --recv-key E084DAB9\nRUN gpg -a --export E084DAB9 | sudo apt-key add -\nRUN apt-get update \\\n && apt-get install r-base -y \\\n && apt-get clean\n#   install R packages\nRUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile\nRUN Rscript -e \"install.packages('R.utils')\"\nRUN Rscript -e \"install.packages('RColorBrewer')\"\nRUN Rscript -e \"install.packages('futile.logger')\"\nRUN Rscript -e \"install.packages('snow')\"\nRUN Rscript -e \"install.packages('bitops')\"\nRUN Rscript -e \"install.packages('hwriter')\"\nRUN Rscript -e \"install.packages('latticeExtra')\"\nRUN Rscript -e \"install.packages('gplots')\"\nRUN Rscript -e \"install.packages('S4Vectors', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('IRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('GenomicRanges', repos='http://bioconductor.org/packages/release/bioc')\"\nRUN Rscript -e \"install.packages('ShortRead', repos='http://bioconductor.org/packages/release/bioc')\"\n#   install multithreaded Perl\n#   from https://github.com/Perl/docker-perl \nRUN rm -fr /var/lib/apt/lists/* \\\n && mkdir /usr/src/perl\nCOPY *.patch /usr/src/perl/\nWORKDIR /usr/src/perl\nRUN curl -SL https://cpan.metacpan.org/authors/id/R/RJ/RJBS/perl-5.22.0.tar.bz2 -o perl-5.22.0.tar.bz2 \\\n && echo '400338c91c56420d98142cbfcb84d418cae2c98c *perl-5.22.0.tar.bz2' | sha1sum -c - \\\n && tar --strip-components=1 -xjf perl-5.22.0.tar.bz2 -C /usr/src/perl \\\n && rm perl-5.22.0.tar.bz2 \\\n && cat *.patch | patch -p1 \\\n && ./Configure -Dusethreads -Duse64bitall -des \\\n && make -j$( nproc ;) \\\n && make test_harness \\\n && make install \\\n && cd /usr/src \\\n && curl -LO https://raw.githubusercontent.com/miyagawa/cpanminus/master/cpanm \\\n && chmod +x cpanm \\\n && ./cpanm App::cpanminus \\\n && rm -fr ./cpanm /root/.cpanm /usr/src/perl\nWORKDIR /root\nCMD [\"perl5.22.0\", \"-de0\"]\n#   install Kraken\nRUN mkdir /kraken\nWORKDIR /kraken\nRUN wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/SequenceImp/src/seqimp-latest.tgz \\\n && tar -xzf seqimp-latest.tgz \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/tally-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/swan-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/reaper-15-065 \\\n && wget ftp://ftp.ebi.ac.uk/pub/contrib/enrightlab/kraken/reaper/binaries/reaper-15-065/linux/minion-15-065 \\\n && mv /kraken/reaper-15-065 /usr/bin/reaper \\\n && mv /kraken/tally-15-065 /usr/bin/tally \\\n && mv /kraken/swan-15-065 /usr/bin/swan \\\n && mv /kraken/minion-15-065 /usr/bin/minion \\\n && mv /kraken/seqimp*/ /kraken/seqimp\nRUN chmod 771 /usr/bin/reaper \\\n && chmod 771 /usr/bin/tally \\\n && chmod 771 /usr/bin/swan \\\n && chmod 771 /usr/bin/minion\nENV PATH=\"/kraken/seqimp/bin:$PATH\"\n#   check Kraken\nCMD [\"/kraken/seqimp/bin/imp_commandline.pl\", \"--system-check\"]\n","originalDockerfileUglifiedHash":"412d21879557e72daf821a46368000a2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/6addd6fa79a7dc281d03c305115b64c646540783.dockerfile"}