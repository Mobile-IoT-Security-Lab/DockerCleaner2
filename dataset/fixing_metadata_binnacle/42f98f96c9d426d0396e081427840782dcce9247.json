{"seed":2427055139,"processedDockerfileHash":"75cbf8db122a3da518dedabe1a78fa39","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  ##############################################################################\n#   Copyright (c) 2015-2019, Lawrence Livermore National Security, LLC.\n#\n#   Produced at the Lawrence Livermore National Laboratory\n#\n#   LLNL-CODE-716457\n#\n#   All rights reserved.\n#\n#   This file is part of Ascent.\n#\n#   For details, see: http://ascent.readthedocs.io/.\n#\n#   Please also read ascent/LICENSE\n#\n#   Redistribution and use in source and binary forms, with or without\n#   modification, are permitted provided that the following conditions are met:\n#\n#   * Redistributions of source code must retain the above copyright notice,\n#     this list of conditions and the disclaimer below.\n#\n#   * Redistributions in binary form must reproduce the above copyright notice,\n#     this list of conditions and the disclaimer (as noted below) in the\n#     documentation and/or other materials provided with the distribution.\n#\n#   * Neither the name of the LLNS/LLNL nor the names of its contributors may\n#     be used to endorse or promote products derived from this software without\n#     specific prior written permission.\n#\n#   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n#   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n#   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n#   ARE DISCLAIMED. IN NO EVENT SHALL LAWRENCE LIVERMORE NATIONAL SECURITY,\n#   LLC, THE U.S. DEPARTMENT OF ENERGY OR CONTRIBUTORS BE LIABLE FOR ANY\n#   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n#   DAMAGES  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n#   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n#   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n#   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING\n#   IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n#   POSSIBILITY OF SUCH DAMAGE.\n#\n#  ##############################################################################\nFROM ubuntu:latest\nMAINTAINER Cyrus Harrison <cyrush@llnl.gov>\n#   fetch build env\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:2.39.2-1ubuntu1 curl=7.88.1-7ubuntu1 build-essential=12.9ubuntu3 gcc=4:12.2.0-3ubuntu1 g++=4:12.2.0-3ubuntu1 gfortran=4:12.2.0-3ubuntu1 zlib1g-dev=1:1.2.13.dfsg-1ubuntu4 python unzip=6.0-27ubuntu1 vim=2:9.0.1000-4ubuntu2 emacs=1:28.2+1-13ubuntu3 -y \\\n && rm -rf /var/lib/apt/lists/*\n#   obtain a copy of ascent source from host env\nCOPY ascent.docker.src.tar.gz /\nRUN tar -xzf ascent.docker.src.tar.gz\n#   at some sites ssl certs are intercepted, which cases issues fetching\n#   tpl sources via https\n#   to resolve this, either:\n#   1) pass the \"-k\" option to uberenv (recommended),\n#   2) install the proper certs into the image, or\n#   3) use  the following commands to disable ssl for git and\n#      curl (both are used by spack):\n#  RUN git config --global http.sslVerify false\n#  RUN echo insecure >> ~/.curlrc\n#   bootstrap third party libs using spack and uberenv\n#   for this example we use mpich for MPI b/c openmpi's mpiexec\n#   will not run for the root user, also avoid mpi4py after 2.0,\n#   since it reqs cython and cython's src tarball has perms set\n#   in a way that fails in docker\nRUN cd ascent \\\n && python scripts/uberenv/uberenv.py -k --spec \"%gcc+mpi~doc~adios ^mpich\"\n#   configure a debug build with cmake\nRUN cd ascent \\\n && mkdir build-debug\nRUN cd ascent/build-debug \\\n && ../uberenv_libs/spack/opt/spack/*/*/cmake*/bin/cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/ascent/install-debug -C ../uberenv_libs/*.cmake ../src\n#   build, test, and install conduit\nRUN cd ascent/build-debug \\\n && make\nRUN cd ascent/build-debug \\\n && env CTEST_OUTPUT_ON_FAILURE=1 make test\nRUN cd ascent/build-debug \\\n && make install\n#   gen env script that points to spack installs of tpls\nRUN cd ascent \\\n && python scripts/gen_spack_env_script.py cmake mpi python\nRUN cp ascent/s_env.sh ascent_docker_setup_env.sh\n#   open port 9000, for use by conduit relay\nEXPOSE 9000/tcp\n#   open port 10000 for other apps (browse fs via http, etc)\nEXPOSE 10000/tcp\nCMD [\"/bin/bash\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# ##############################################################################\n#  Copyright (c) 2015-2019, Lawrence Livermore National Security, LLC.\n#\n#  Produced at the Lawrence Livermore National Laboratory\n#\n#  LLNL-CODE-716457\n#\n#  All rights reserved.\n#\n#  This file is part of Ascent.\n#\n#  For details, see: http://ascent.readthedocs.io/.\n#\n#  Please also read ascent/LICENSE\n#\n#  Redistribution and use in source and binary forms, with or without\n#  modification, are permitted provided that the following conditions are met:\n#\n#  * Redistributions of source code must retain the above copyright notice,\n#    this list of conditions and the disclaimer below.\n#\n#  * Redistributions in binary form must reproduce the above copyright notice,\n#    this list of conditions and the disclaimer (as noted below) in the\n#    documentation and/or other materials provided with the distribution.\n#\n#  * Neither the name of the LLNS/LLNL nor the names of its contributors may\n#    be used to endorse or promote products derived from this software without\n#    specific prior written permission.\n#\n#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n#  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n#  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n#  ARE DISCLAIMED. IN NO EVENT SHALL LAWRENCE LIVERMORE NATIONAL SECURITY,\n#  LLC, THE U.S. DEPARTMENT OF ENERGY OR CONTRIBUTORS BE LIABLE FOR ANY\n#  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n#  DAMAGES  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n#  OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n#  HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n#  STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING\n#  IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n#  POSSIBILITY OF SUCH DAMAGE.\n#\n# ##############################################################################\nFROM ubuntu:latest\nMAINTAINER Cyrus Harrison <cyrush@llnl.gov>\n#  fetch build env\nRUN apt-get update \\\n && apt-get install git curl build-essential gcc g++ gfortran zlib1g-dev python unzip vim emacs -y \\\n && rm -rf /var/lib/apt/lists/*\n#  obtain a copy of ascent source from host env\nCOPY ascent.docker.src.tar.gz /\nRUN tar -xzf ascent.docker.src.tar.gz\n#  at some sites ssl certs are intercepted, which cases issues fetching\n#  tpl sources via https\n#  to resolve this, either:\n#  1) pass the \"-k\" option to uberenv (recommended),\n#  2) install the proper certs into the image, or\n#  3) use  the following commands to disable ssl for git and\n#     curl (both are used by spack):\n# RUN git config --global http.sslVerify false\n# RUN echo insecure >> ~/.curlrc\n#  bootstrap third party libs using spack and uberenv\n#  for this example we use mpich for MPI b/c openmpi's mpiexec\n#  will not run for the root user, also avoid mpi4py after 2.0,\n#  since it reqs cython and cython's src tarball has perms set\n#  in a way that fails in docker\nRUN cd ascent \\\n && python scripts/uberenv/uberenv.py -k --spec \"%gcc+mpi~doc~adios ^mpich\"\n#  configure a debug build with cmake\nRUN cd ascent \\\n && mkdir build-debug\nRUN cd ascent/build-debug \\\n && ../uberenv_libs/spack/opt/spack/*/*/cmake*/bin/cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/ascent/install-debug -C ../uberenv_libs/*.cmake ../src\n#  build, test, and install conduit\nRUN cd ascent/build-debug \\\n && make\nRUN cd ascent/build-debug \\\n && env CTEST_OUTPUT_ON_FAILURE=1 make test\nRUN cd ascent/build-debug \\\n && make install\n#  gen env script that points to spack installs of tpls\nRUN cd ascent \\\n && python scripts/gen_spack_env_script.py cmake mpi python\nRUN cp ascent/s_env.sh ascent_docker_setup_env.sh\n#  open port 9000, for use by conduit relay\nEXPOSE 9000/tcp\n#  open port 10000 for other apps (browse fs via http, etc)\nEXPOSE 10000/tcp\nCMD [\"/bin/bash\"]\n","injectedSmells":[],"originalDockerfileHash":"6453921a3d9b642987517fb690a9ec23","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  ##############################################################################\n#   Copyright (c) 2015-2019, Lawrence Livermore National Security, LLC.\n#\n#   Produced at the Lawrence Livermore National Laboratory\n#\n#   LLNL-CODE-716457\n#\n#   All rights reserved.\n#\n#   This file is part of Ascent.\n#\n#   For details, see: http://ascent.readthedocs.io/.\n#\n#   Please also read ascent/LICENSE\n#\n#   Redistribution and use in source and binary forms, with or without\n#   modification, are permitted provided that the following conditions are met:\n#\n#   * Redistributions of source code must retain the above copyright notice,\n#     this list of conditions and the disclaimer below.\n#\n#   * Redistributions in binary form must reproduce the above copyright notice,\n#     this list of conditions and the disclaimer (as noted below) in the\n#     documentation and/or other materials provided with the distribution.\n#\n#   * Neither the name of the LLNS/LLNL nor the names of its contributors may\n#     be used to endorse or promote products derived from this software without\n#     specific prior written permission.\n#\n#   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n#   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n#   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n#   ARE DISCLAIMED. IN NO EVENT SHALL LAWRENCE LIVERMORE NATIONAL SECURITY,\n#   LLC, THE U.S. DEPARTMENT OF ENERGY OR CONTRIBUTORS BE LIABLE FOR ANY\n#   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n#   DAMAGES  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n#   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n#   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n#   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING\n#   IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n#   POSSIBILITY OF SUCH DAMAGE.\n#\n#  ##############################################################################\nFROM ubuntu:latest\nMAINTAINER Cyrus Harrison <cyrush@llnl.gov>\n#   fetch build env\nRUN apt-get update \\\n && apt-get install git curl build-essential gcc g++ gfortran zlib1g-dev python unzip vim emacs -y \\\n && rm -rf /var/lib/apt/lists/*\n#   obtain a copy of ascent source from host env\nCOPY ascent.docker.src.tar.gz /\nRUN tar -xzf ascent.docker.src.tar.gz\n#   at some sites ssl certs are intercepted, which cases issues fetching\n#   tpl sources via https\n#   to resolve this, either:\n#   1) pass the \"-k\" option to uberenv (recommended),\n#   2) install the proper certs into the image, or\n#   3) use  the following commands to disable ssl for git and\n#      curl (both are used by spack):\n#  RUN git config --global http.sslVerify false\n#  RUN echo insecure >> ~/.curlrc\n#   bootstrap third party libs using spack and uberenv\n#   for this example we use mpich for MPI b/c openmpi's mpiexec\n#   will not run for the root user, also avoid mpi4py after 2.0,\n#   since it reqs cython and cython's src tarball has perms set\n#   in a way that fails in docker\nRUN cd ascent \\\n && python scripts/uberenv/uberenv.py -k --spec \"%gcc+mpi~doc~adios ^mpich\"\n#   configure a debug build with cmake\nRUN cd ascent \\\n && mkdir build-debug\nRUN cd ascent/build-debug \\\n && ../uberenv_libs/spack/opt/spack/*/*/cmake*/bin/cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/ascent/install-debug -C ../uberenv_libs/*.cmake ../src\n#   build, test, and install conduit\nRUN cd ascent/build-debug \\\n && make\nRUN cd ascent/build-debug \\\n && env CTEST_OUTPUT_ON_FAILURE=1 make test\nRUN cd ascent/build-debug \\\n && make install\n#   gen env script that points to spack installs of tpls\nRUN cd ascent \\\n && python scripts/gen_spack_env_script.py cmake mpi python\nRUN cp ascent/s_env.sh ascent_docker_setup_env.sh\n#   open port 9000, for use by conduit relay\nEXPOSE 9000/tcp\n#   open port 10000 for other apps (browse fs via http, etc)\nEXPOSE 10000/tcp\nCMD [\"/bin/bash\"]\n","originalDockerfileUglifiedHash":"8a2008a533c5d2a371f84605d8f1144f","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/42f98f96c9d426d0396e081427840782dcce9247.dockerfile"}