{"seed":1660649335,"processedDockerfileHash":"24e4e4ba82414a79eb8fa2bef1c6b2bf","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","do-not-have-secrets","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:14.04\nMAINTAINER Jaewoo Lee <continuse@icloud.com>\n#   Mysql Server\n# A secret has been removed here. Please do not provide secrets from the Dockerfile as these will leak into the metadata of the resulting docker image. To provide secrets the --secret flag of the docker build command can be used (https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information).\nRUN { echo \"mysql-server-5.5 mysql-server/root_password password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password_again password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password seen true\" ;echo \"mysql-server-5.5 mysql-server/root_password_again seen true\" ; } | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends mysql-server=5.5.62-0ubuntu0.14.04.1 python-mysqldb=1.2.3-2ubuntu1 -y\n#   Util\nRUN apt-get install --no-install-recommends curl=7.35.0-1ubuntu2.20 -y\n#   Ubuntu Cloud archive keyring and repository\nRUN apt-get install --no-install-recommends ubuntu-cloud-keyring=2012.08.14 -y \\\n && echo \"deb http://ubuntu-cloud.archive.canonical.com/ubuntu\" \"trusty-updates/kilo main\" > /etc/apt/sources.list.d/cloudarchive-kilo.list \\\n && apt-get update \\\n && apt-get -y dist-upgrade\n#   RabbitMQ\nRUN apt-get install --no-install-recommends rabbitmq-server=3.2.4-1ubuntu0.1 -y\n#   Keystone\nRUN echo \"manual\" > /etc/init/keystone.override \\\n && apt-get install --no-install-recommends keystone=1:2014.1.5-0ubuntu1 python-openstackclient=0.3.0-1ubuntu1 apache2=2.4.7-1ubuntu4.22 libapache2-mod-wsgi=3.4-4ubuntu2.1.14.04.2 memcached=1.4.14-0ubuntu9.3 python-memcache=1.53-1build1 -y \\\n && ln -s /etc/apache2/sites-available/wsgi-keystone.conf /etc/apache2/sites-enabled \\\n && mkdir -p /var/www/cgi-bin/keystone \\\n && curl http://git.openstack.org/cgit/openstack/keystone/plain/httpd/keystone.py?h=stable/kilo | tee /var/www/cgi-bin/keystone/main /var/www/cgi-bin/keystone/admin \\\n && chown -R keystone:keystone /var/www/cgi-bin/keystone \\\n && chmod 755 /var/www/cgi-bin/keystone/* \\\n && rm -f /var/lib/keystone/keystone.db\n#   Glance Setup\nRUN apt-get install --no-install-recommends glance=1:2014.1.5-0ubuntu1.1 python-glanceclient=1:0.12.0-0ubuntu1.2 -y \\\n && rm -f /var/lib/glance/glance.sqlite\n#   Nova Management\nRUN apt-get install --no-install-recommends nova-api=1:2014.1.5-0ubuntu1.7 nova-cert=1:2014.1.5-0ubuntu1.7 nova-conductor=1:2014.1.5-0ubuntu1.7 nova-consoleauth=1:2014.1.5-0ubuntu1.7 nova-novncproxy=1:2014.1.5-0ubuntu1.7 nova-scheduler=1:2014.1.5-0ubuntu1.7 python-novaclient=1:2.17.0-0ubuntu1.2 -y \\\n && rm -f /var/lib/nova/nova.sqlite\n#   Neutron\nRUN apt-get install --no-install-recommends neutron-server=1:2014.1.5-0ubuntu8 neutron-plugin-ml2=1:2014.1.5-0ubuntu8 python-neutronclient=1:2.3.4-0ubuntu1 -y\n#   Horizone\nRUN apt-get install --no-install-recommends openstack-dashboard=1:2014.1.5-0ubuntu2.2 -y \\\n && dpkg --purge openstack-dashboard-ubuntu-theme\n#   Heat\nRUN apt-get update \\\n && apt-get install --no-install-recommends heat-api=2014.1.5-0ubuntu1 heat-api-cfn=2014.1.5-0ubuntu1 heat-engine=2014.1.5-0ubuntu1 python-heatclient=0.2.8-0ubuntu1 -y\n#   Cinder\nRUN apt-get install --no-install-recommends cinder-api=1:2014.1.5-0ubuntu2.2 cinder-scheduler=1:2014.1.5-0ubuntu2.2 python-cinderclient=1:1.0.8-0ubuntu2 -y\n#   MySQL Data Volume\nVOLUME [\"/data\"]\n#   MySQL\nCOPY config/mysql/my.cnf /etc/mysql/my.cnf\n#   WSGI for Keystone\nCOPY config/wsgi-keystone.conf /etc/apache2/sites-available/wsgi-keystone.conf\n#   Configuration File for Keystone Service\nCOPY config/keystone/keystone.conf /etc/keystone/keystone.conf\n#   Configuration File for Glance Service\nCOPY config/glance/glance-api.conf /etc/glance/glance-api.conf\nCOPY config/glance/glance-registry.conf /etc/glance/glance-registry.conf\n#   Configuration File for Nova Service\nCOPY config/nova/nova.conf /etc/nova/nova.conf\n#   Configuration File for Neutron Service\nCOPY config/neutron/neutron.conf /etc/neutron/neutron.conf\nCOPY config/neutron/ml2_conf.ini /etc/neutron/plugins/ml2/ml2_conf.ini\n#   Configuration File for Heat Service\nCOPY config/heat/heat.conf /etc/heat/heat.conf\n#   Dashboard conf file\nCOPY config/horizon/local_settings.py /etc/openstack-dashboard/local_settings.py\n#   Cinder conf file\nCOPY config/cinder/cinder.conf /etc/cinder/cinder.conf\nRUN chown glance:glance /etc/glance/glance-api.conf \\\n && chown glance:glance /etc/glance/glance-registry.conf \\\n && chown nova:nova /etc/nova/nova.conf \\\n && chown root:neutron /etc/neutron/neutron.conf \\\n && chown root:neutron /etc/neutron/plugins/ml2/ml2_conf.ini \\\n && chown cinder:cinder /etc/cinder/cinder.conf\nCOPY entrypoint.sh /entrypoint.sh\nCOPY keystone.sh /keystone.sh\nCMD [\"/entrypoint.sh\"]\nEXPOSE 3306/tcp 35357/tcp 9292/tcp 5000/tcp 5672/tcp 8774/tcp 8776/tcp 6080/tcp 9696/tcp 80/tcp\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:14.04\nMAINTAINER Jaewoo Lee <continuse@icloud.com>\n#  Mysql Server\nENV MYSQL_ROOT_PASSWORD=\"openstack\"\nRUN { echo \"mysql-server-5.5 mysql-server/root_password password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password_again password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password seen true\" ;echo \"mysql-server-5.5 mysql-server/root_password_again seen true\" ; } | debconf-set-selections \\\n && apt-get update \\\n && apt-get install mysql-server python-mysqldb -y\n#  Util\nRUN apt-get install curl -y\n#  Ubuntu Cloud archive keyring and repository\nRUN apt-get install ubuntu-cloud-keyring -y \\\n && echo \"deb http://ubuntu-cloud.archive.canonical.com/ubuntu\" \"trusty-updates/kilo main\" > /etc/apt/sources.list.d/cloudarchive-kilo.list \\\n && apt-get update \\\n && apt-get -y dist-upgrade\n#  RabbitMQ\nRUN apt-get install rabbitmq-server -y\n#  Keystone\nRUN echo \"manual\" > /etc/init/keystone.override \\\n && apt-get install keystone python-openstackclient apache2 libapache2-mod-wsgi memcached python-memcache -y \\\n && ln -s /etc/apache2/sites-available/wsgi-keystone.conf /etc/apache2/sites-enabled \\\n && mkdir -p /var/www/cgi-bin/keystone \\\n && curl http://git.openstack.org/cgit/openstack/keystone/plain/httpd/keystone.py?h=stable/kilo | tee /var/www/cgi-bin/keystone/main /var/www/cgi-bin/keystone/admin \\\n && chown -R keystone:keystone /var/www/cgi-bin/keystone \\\n && chmod 755 /var/www/cgi-bin/keystone/* \\\n && rm -f /var/lib/keystone/keystone.db\n#  Glance Setup\nRUN apt-get install glance python-glanceclient -y \\\n && rm -f /var/lib/glance/glance.sqlite\n#  Nova Management\nRUN apt-get install nova-api nova-cert nova-conductor nova-consoleauth nova-novncproxy nova-scheduler python-novaclient -y \\\n && rm -f /var/lib/nova/nova.sqlite\n#  Neutron\nRUN apt-get install neutron-server neutron-plugin-ml2 python-neutronclient -y\n#  Horizone\nRUN apt-get install openstack-dashboard -y \\\n && dpkg --purge openstack-dashboard-ubuntu-theme\n#  Heat\nRUN apt-get update \\\n && apt-get install heat-api heat-api-cfn heat-engine python-heatclient -y\n#  Cinder\nRUN apt-get install cinder-api cinder-scheduler python-cinderclient -y\n#  MySQL Data Volume\nVOLUME [\"/data\"]\n#  MySQL\nCOPY config/mysql/my.cnf /etc/mysql/my.cnf\n#  WSGI for Keystone\nCOPY config/wsgi-keystone.conf /etc/apache2/sites-available/wsgi-keystone.conf\n#  Configuration File for Keystone Service\nCOPY config/keystone/keystone.conf /etc/keystone/keystone.conf\n#  Configuration File for Glance Service\nCOPY config/glance/glance-api.conf /etc/glance/glance-api.conf\nCOPY config/glance/glance-registry.conf /etc/glance/glance-registry.conf\n#  Configuration File for Nova Service\nCOPY config/nova/nova.conf /etc/nova/nova.conf\n#  Configuration File for Neutron Service\nCOPY config/neutron/neutron.conf /etc/neutron/neutron.conf\nCOPY config/neutron/ml2_conf.ini /etc/neutron/plugins/ml2/ml2_conf.ini\n#  Configuration File for Heat Service\nCOPY config/heat/heat.conf /etc/heat/heat.conf\n#  Dashboard conf file\nCOPY config/horizon/local_settings.py /etc/openstack-dashboard/local_settings.py\n#  Cinder conf file\nCOPY config/cinder/cinder.conf /etc/cinder/cinder.conf\nRUN chown glance:glance /etc/glance/glance-api.conf \\\n && chown glance:glance /etc/glance/glance-registry.conf \\\n && chown nova:nova /etc/nova/nova.conf \\\n && chown root:neutron /etc/neutron/neutron.conf \\\n && chown root:neutron /etc/neutron/plugins/ml2/ml2_conf.ini \\\n && chown cinder:cinder /etc/cinder/cinder.conf\nCOPY entrypoint.sh /entrypoint.sh\nCOPY keystone.sh /keystone.sh\nCMD [\"/entrypoint.sh\"]\nEXPOSE 3306/tcp 35357/tcp 9292/tcp 5000/tcp 5672/tcp 8774/tcp 8776/tcp 6080/tcp 9696/tcp 80/tcp\n","injectedSmells":[],"originalDockerfileHash":"2e86828764e89cf600a1377762fb7f77","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:14.04\nMAINTAINER Jaewoo Lee <continuse@icloud.com>\n#   Mysql Server\nENV MYSQL_ROOT_PASSWORD=\"openstack\"\nRUN { echo \"mysql-server-5.5 mysql-server/root_password password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password_again password $MYSQL_ROOT_PASSWORD\" ;echo \"mysql-server-5.5 mysql-server/root_password seen true\" ;echo \"mysql-server-5.5 mysql-server/root_password_again seen true\" ; } | debconf-set-selections \\\n && apt-get update \\\n && apt-get install mysql-server python-mysqldb -y\n#   Util\nRUN apt-get install curl -y\n#   Ubuntu Cloud archive keyring and repository\nRUN apt-get install ubuntu-cloud-keyring -y \\\n && echo \"deb http://ubuntu-cloud.archive.canonical.com/ubuntu\" \"trusty-updates/kilo main\" > /etc/apt/sources.list.d/cloudarchive-kilo.list \\\n && apt-get update \\\n && apt-get -y dist-upgrade\n#   RabbitMQ\nRUN apt-get install rabbitmq-server -y\n#   Keystone\nRUN echo \"manual\" > /etc/init/keystone.override \\\n && apt-get install keystone python-openstackclient apache2 libapache2-mod-wsgi memcached python-memcache -y \\\n && ln -s /etc/apache2/sites-available/wsgi-keystone.conf /etc/apache2/sites-enabled \\\n && mkdir -p /var/www/cgi-bin/keystone \\\n && curl http://git.openstack.org/cgit/openstack/keystone/plain/httpd/keystone.py?h=stable/kilo | tee /var/www/cgi-bin/keystone/main /var/www/cgi-bin/keystone/admin \\\n && chown -R keystone:keystone /var/www/cgi-bin/keystone \\\n && chmod 755 /var/www/cgi-bin/keystone/* \\\n && rm -f /var/lib/keystone/keystone.db\n#   Glance Setup\nRUN apt-get install glance python-glanceclient -y \\\n && rm -f /var/lib/glance/glance.sqlite\n#   Nova Management\nRUN apt-get install nova-api nova-cert nova-conductor nova-consoleauth nova-novncproxy nova-scheduler python-novaclient -y \\\n && rm -f /var/lib/nova/nova.sqlite\n#   Neutron\nRUN apt-get install neutron-server neutron-plugin-ml2 python-neutronclient -y\n#   Horizone\nRUN apt-get install openstack-dashboard -y \\\n && dpkg --purge openstack-dashboard-ubuntu-theme\n#   Heat\nRUN apt-get update \\\n && apt-get install heat-api heat-api-cfn heat-engine python-heatclient -y\n#   Cinder\nRUN apt-get install cinder-api cinder-scheduler python-cinderclient -y\n#   MySQL Data Volume\nVOLUME [\"/data\"]\n#   MySQL\nCOPY config/mysql/my.cnf /etc/mysql/my.cnf\n#   WSGI for Keystone\nCOPY config/wsgi-keystone.conf /etc/apache2/sites-available/wsgi-keystone.conf\n#   Configuration File for Keystone Service\nCOPY config/keystone/keystone.conf /etc/keystone/keystone.conf\n#   Configuration File for Glance Service\nCOPY config/glance/glance-api.conf /etc/glance/glance-api.conf\nCOPY config/glance/glance-registry.conf /etc/glance/glance-registry.conf\n#   Configuration File for Nova Service\nCOPY config/nova/nova.conf /etc/nova/nova.conf\n#   Configuration File for Neutron Service\nCOPY config/neutron/neutron.conf /etc/neutron/neutron.conf\nCOPY config/neutron/ml2_conf.ini /etc/neutron/plugins/ml2/ml2_conf.ini\n#   Configuration File for Heat Service\nCOPY config/heat/heat.conf /etc/heat/heat.conf\n#   Dashboard conf file\nCOPY config/horizon/local_settings.py /etc/openstack-dashboard/local_settings.py\n#   Cinder conf file\nCOPY config/cinder/cinder.conf /etc/cinder/cinder.conf\nRUN chown glance:glance /etc/glance/glance-api.conf \\\n && chown glance:glance /etc/glance/glance-registry.conf \\\n && chown nova:nova /etc/nova/nova.conf \\\n && chown root:neutron /etc/neutron/neutron.conf \\\n && chown root:neutron /etc/neutron/plugins/ml2/ml2_conf.ini \\\n && chown cinder:cinder /etc/cinder/cinder.conf\nCOPY entrypoint.sh /entrypoint.sh\nCOPY keystone.sh /keystone.sh\nCMD [\"/entrypoint.sh\"]\nEXPOSE 3306/tcp 35357/tcp 9292/tcp 5000/tcp 5672/tcp 8774/tcp 8776/tcp 6080/tcp 9696/tcp 80/tcp\n","originalDockerfileUglifiedHash":"be5377703dbe90625075194e12c22315","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/915efc878344de7c8fae6e33d36a27e64f761998.dockerfile"}