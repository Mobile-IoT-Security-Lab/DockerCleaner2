{"seed":4109664778,"processedDockerfileHash":"5a2e62e1bc2d0a09ee6cf1c019753b55","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0A95E9A026542D53835E3F3A7DEC4E69FC9C83D7 0E604491\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\n#   compile openssl, otherwise --with-openssl won't work\nRUN OPENSSL_VERSION=\"1.0.2e\" \\\n && cd /tmp \\\n && mkdir openssl \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz\" -o openssl.tar.gz \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz.asc\" -o openssl.tar.gz.asc \\\n && gpg --verify openssl.tar.gz.asc \\\n && tar -xzf openssl.tar.gz -C openssl --strip-components=1 \\\n && cd /tmp/openssl \\\n && ./config \\\n && make \\\n && make install \\\n && rm -rf /tmp/*\nENV PHP_VERSION=\"5.3.29\"\nENV PHP_FILENAME=\"php-5.3.29.tar.xz\"\n#   php 5.3 needs older autoconf\n#   --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" autoconf2.13 bzip2 xz-utils libreadline6-dev libcurl4-openssl-dev \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-mysqli=mysqlnd --with-curl --with-openssl=/usr/local/ssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  libmysqlclient-dev  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && pecl install memcached \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9053/tcp\nCMD [\"php-fpm\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Dockerfile written by 10up <sales@10up.com>\n#\n#  Work derived from official PHP Docker Library:\n#  Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#  persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#  phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0A95E9A026542D53835E3F3A7DEC4E69FC9C83D7 0E604491\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\n#  compile openssl, otherwise --with-openssl won't work\nRUN OPENSSL_VERSION=\"1.0.2e\" \\\n && cd /tmp \\\n && mkdir openssl \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz\" -o openssl.tar.gz \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz.asc\" -o openssl.tar.gz.asc \\\n && gpg --verify openssl.tar.gz.asc \\\n && tar -xzf openssl.tar.gz -C openssl --strip-components=1 \\\n && cd /tmp/openssl \\\n && ./config \\\n && make \\\n && make install \\\n && rm -rf /tmp/*\nENV PHP_VERSION=\"5.3.29\"\nENV PHP_FILENAME=\"php-5.3.29.tar.xz\"\n#  php 5.3 needs older autoconf\n#  --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" autoconf2.13 bzip2 xz-utils libreadline6-dev libcurl4-openssl-dev \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-mysqli=mysqlnd --with-curl --with-openssl=/usr/local/ssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  libmysqlclient-dev  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && pecl install memcached \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9053/tcp\nCMD [\"php-fpm\"]\n","injectedSmells":[],"originalDockerfileHash":"3534f66efc1b99491eadd797f4f4820a","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Dockerfile written by 10up <sales@10up.com>\n#\n#   Work derived from official PHP Docker Library:\n#   Copyright (c) 2014-2015 Docker, Inc.\nFROM debian:jessie\n#   persistent / runtime deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl libssl-dev libxml2-dev libxml2 libpng12-dev libmcrypt-dev php5-memcached -y \\\n && rm -r /var/lib/apt/lists/*\n#   phpize deps\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf file g++ gcc libc-dev make pkg-config re2c -y \\\n && rm -r /var/lib/apt/lists/*\nENV PHP_INI_DIR=\"/usr/local/etc/php\"\nRUN mkdir -p $PHP_INI_DIR/conf.d\nENV PHP_EXTRA_CONFIGURE_ARGS=\"--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\"\nENV GPG_KEYS=\"0B96609E270F565C13292B24C13C70B87267B52D 0A95E9A026542D53835E3F3A7DEC4E69FC9C83D7 0E604491\"\nRUN set -xe \\\n && for key in $GPG_KEYS; do gpg --keyserver ha.pool.sks-keyservers.net --recv-keys \"$key\" ; done\n#   compile openssl, otherwise --with-openssl won't work\nRUN OPENSSL_VERSION=\"1.0.2e\" \\\n && cd /tmp \\\n && mkdir openssl \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz\" -o openssl.tar.gz \\\n && curl -sL \"https://www.openssl.org/source/openssl-$OPENSSL_VERSION.tar.gz.asc\" -o openssl.tar.gz.asc \\\n && gpg --verify openssl.tar.gz.asc \\\n && tar -xzf openssl.tar.gz -C openssl --strip-components=1 \\\n && cd /tmp/openssl \\\n && ./config \\\n && make \\\n && make install \\\n && rm -rf /tmp/*\nENV PHP_VERSION=\"5.3.29\"\nENV PHP_FILENAME=\"php-5.3.29.tar.xz\"\n#   php 5.3 needs older autoconf\n#   --enable-mysqlnd is included below because it's harder to compile after the fact the extensions are (since it's a plugin for several extensions, not an extension in itself)\nRUN buildDeps=\" autoconf2.13 bzip2 xz-utils libreadline6-dev libcurl4-openssl-dev \" \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2/from/this/mirror\" -o \"$PHP_FILENAME\" \\\n && curl -SL \"http://php.net/get/php-$PHP_VERSION.tar.bz2.asc/from/this/mirror\" -o \"$PHP_FILENAME.asc\" \\\n && gpg --verify \"$PHP_FILENAME.asc\" \\\n && mkdir -p /usr/src/php \\\n && tar -xf \"$PHP_FILENAME\" -C /usr/src/php --strip-components=1 \\\n && rm \"$PHP_FILENAME\"* \\\n && cd /usr/src/php \\\n && ./configure --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" $PHP_EXTRA_CONFIGURE_ARGS --disable-cgi --enable-mysqlnd --with-mysqli=mysqlnd --with-curl --with-openssl=/usr/local/ssl --with-readline --with-zlib \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && { find /usr/local/bin /usr/local/sbin -type f -executable -exec strip --strip-all '{}' + || true ; } \\\n && make clean \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $buildDeps \\\n && apt-get autoremove\nCOPY docker-php-ext-* /usr/local/bin/\nENV extensionDeps=\"  libmysqlclient-dev  rsync  \"\nRUN extensions=\" gd mysqli soap mcrypt mbstring \" ; apt-get update \\\n && apt-get install --no-install-recommends $extensionDeps -y \\\n && docker-php-ext-install $extensions \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $extensionDeps \\\n && apt-get autoremove\nENV peclDeps=\"  libmemcached-dev  \"\nRUN apt-get update \\\n && apt-get install --no-install-recommends $peclDeps -y \\\n && pecl install redis \\\n && echo extension=redis.so > $PHP_INI_DIR/conf.d/ext-redis.ini \\\n && pecl install memcached \\\n && echo extension=memcached.so > $PHP_INI_DIR/conf.d/ext-memcached.ini \\\n && pecl install memcache \\\n && echo extension=memcache.so > $PHP_INI_DIR/conf.d/ext-memcache.ini \\\n && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $peclDeps \\\n && apt-get autoremove\nMAINTAINER 10up\nWORKDIR /var/www/html\nCOPY php-fpm.conf /usr/local/etc/\nEXPOSE 9053/tcp\nCMD [\"php-fpm\"]\n","originalDockerfileUglifiedHash":"fd8ce417476ddb06533928453dab2e79","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7cc8afb03173071f3948771c4360902ceab92d52.dockerfile"}