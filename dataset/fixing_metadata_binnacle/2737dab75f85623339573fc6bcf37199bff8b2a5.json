{"seed":4241893978,"processedDockerfileHash":"2c2a1fa4f3ac3f3a29ee4f4816e1ccfc","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo 'deb http://debian-archive.trafficmanager.net/debian jessie-backports main' >> /etc/apt/sources.list\n#  # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama python-pytest=2.6.3* python3-pytest=2.6.3* -y )\n#   For linux build\nRUN apt-get -y build-dep linux\n#   For gobgp build\nRUN export VERSION=1.8.3 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#   Upgrade pip2\n#   Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#   For p4 build\nRUN pip install ctypesgen==1.1.1 crc16==0.1.1\n#   For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#   Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2==3.1.2 --force-reinstall --upgrade > =2.10\n#   For templating (requiring jinja2)\nRUN pip install j2cli==0.3.10\n#   For sonic utilities testing\nRUN pip install click-default-group==1.2.2 click==8.1.3 natsort==8.3.1 tabulate==0.9.0\n#   For supervisor build\nRUN pip install meld3==2.0.1 mock==5.0.1\n#   Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#   Install vim\nRUN (apt-get update ;apt-get install --no-install-recommends vim -y )\n#   Install rsyslog\nRUN (apt-get update ;apt-get install --no-install-recommends rsyslog -y )\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#   Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#   Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends apt-transport-https ca-certificates curl gnupg2 software-properties-common -y )\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN :\nRUN (apt-get update ;apt-get install --no-install-recommends docker-ce=17.03.2~ce-0~debian-jessie -y )\nRUN echo \"DOCKER_OPTS=\\\"--experimental\\\"\" >> /etc/default/docker\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo 'deb http://debian-archive.trafficmanager.net/debian jessie-backports main' >> /etc/apt/sources.list\n# # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama python-pytest=2.6.3* python3-pytest=2.6.3* -y\n#  For linux build\nRUN apt-get -y build-dep linux\n#  For gobgp build\nRUN export VERSION=1.8.3 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#  Upgrade pip2\n#  Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#  For p4 build\nRUN pip install ctypesgen crc16\n#  For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#  Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2 --force-reinstall --upgrade > =2.10\n#  For templating (requiring jinja2)\nRUN pip install j2cli\n#  For sonic utilities testing\nRUN pip install click-default-group click natsort tabulate\n#  For supervisor build\nRUN pip install meld3 mock\n#  Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#  Install vim\nRUN apt-get install vim -y\n#  Install rsyslog\nRUN apt-get install rsyslog -y\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#  Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#  Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN apt-get update\nRUN apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN apt-get update\nRUN apt-get install docker-ce=17.03.2~ce-0~debian-jessie -y\nRUN echo \"DOCKER_OPTS=\\\"--experimental\\\"\" >> /etc/default/docker\n","injectedSmells":[],"originalDockerfileHash":"19159069bd4b3c6d775750f2fcd62a5a","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\nMAINTAINER johnar@microsoft.com\nRUN echo \"deb http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo \"deb-src http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list \\\n && echo 'deb http://debian-archive.trafficmanager.net/debian jessie-backports main' >> /etc/apt/sources.list\n#  # Make apt-get non-interactive\nENV DEBIAN_FRONTEND=\"noninteractive\"\nRUN apt-get update \\\n && apt-get install apt-utils default-jre-headless openssh-server curl wget unzip git build-essential libtool lintian sudo dh-make dh-exec kmod libtinyxml2-2 libboost-program-options1.55-dev libtinyxml2-dev python python-pip libncurses5-dev texinfo dh-autoreconf python3-pip doxygen devscripts git-buildpackage perl-modules libswitch-perl dh-systemd libreadline-dev texlive-latex-base texlive-generic-recommended texlive-fonts-recommended libpam0g-dev libpam-dev libcap-dev imagemagick ghostscript groff libpcre3-dev gawk chrpath libc-ares-dev hardening-wrapper libsnmp-dev libjson0 libjson0-dev libsystemd-dev python-ipaddr cdbs libxml-simple-perl graphviz aspell bc fakeroot build-essential devscripts quilt stgit module-assistant gem2deb libboost-all-dev libevent-dev libglib2.0-dev libqt4-dev python-all-dev python-twisted php5-dev phpunit libbit-vector-perl openjdk-7-jdk javahelper maven-debian-helper ant libmaven-ant-tasks-java libhttpclient-java libslf4j-java libservlet3.1-java qt5-default libpcre3 libpcre3-dev byacc flex libglib2.0-dev bison expat libexpat1-dev dpatch libdb-dev iptables-dev swig libtool-bin libxml2-dev libusb-1.0-0-dev libcurl3-nss-dev libunwind8-dev telnet cpio squashfs-tools zip linux-compiler-gcc-4.8-x86 linux-kbuild-3.16 libdaemon-dev libdbus-1-dev libjansson-dev libpcap-dev dnsutils libusb-dev augeas-tools libyaml-dev libevent-dev libjudy-dev libedit-dev libnanomsg-dev python-stdeb libjemalloc-dev dkms sharutils libncursesw5-dev libbz2-dev liblzma-dev libgdbm-dev tk-dev blt-dev libmpdec-dev libbluetooth-dev locales libsqlite3-dev libgpm2 time net-tools xvfb python-sphinx python3-sphinx cppcheck clang pylint gcovr python-pytest-cov python3-pytest-cov python-parse libmysqlclient-dev libmysqld-dev libperl-dev libpci-dev libpci3 libsensors4 libsensors4-dev libwrap0-dev docutils-common libjs-sphinxdoc libjs-underscore python-docutils python-markupsafe python-pygments python-roman sphinx-common python-lxml python-netaddr python-ipaddr python-yaml procmail libgtest-dev cmake autoconf-archive swig3.0 cm-super-minimal libatm1-dev libelf-dev libmnl-dev libselinux1-dev linuxdoc-tools lynx texlive-latex-extra texlive-latex-recommended python-sphinx python-docutils python3-all python3-setuptools python3-sphinx python3-docutils python3-requests python3-pytest python3-colorama python-pytest=2.6.3* python3-pytest=2.6.3* -y\n#   For linux build\nRUN apt-get -y build-dep linux\n#   For gobgp build\nRUN export VERSION=1.8.3 \\\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc\n#   Upgrade pip2\n#   Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n#   For p4 build\nRUN pip install ctypesgen crc16\n#   For sonic config engine testing\nRUN pip install pyangbind==0.6.0\n#   Note: force upgrade debian packaged jinja2, if installed\nRUN pip install jinja2 --force-reinstall --upgrade > =2.10\n#   For templating (requiring jinja2)\nRUN pip install j2cli\n#   For sonic utilities testing\nRUN pip install click-default-group click natsort tabulate\n#   For supervisor build\nRUN pip install meld3 mock\n#   Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n#   Install vim\nRUN apt-get install vim -y\n#   Install rsyslog\nRUN apt-get install rsyslog -y\nRUN cd /usr/src/gtest \\\n && cmake . \\\n && make -C /usr/src/gtest\nRUN mkdir /var/run/sshd\nEXPOSE 22/tcp\n#   Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH=\"/usr/share/depot_tools:$PATH\"\n#   Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN apt-get update\nRUN apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $( lsb_release -cs ;) stable\"\nRUN apt-get update\nRUN apt-get install docker-ce=17.03.2~ce-0~debian-jessie -y\nRUN echo \"DOCKER_OPTS=\\\"--experimental\\\"\" >> /etc/default/docker\n","originalDockerfileUglifiedHash":"5fc76318865aa6096a3812783f9b3be6","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2737dab75f85623339573fc6bcf37199bff8b2a5.dockerfile"}