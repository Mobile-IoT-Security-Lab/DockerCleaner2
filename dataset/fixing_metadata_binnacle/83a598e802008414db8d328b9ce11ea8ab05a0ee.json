{"seed":271130108,"processedDockerfileHash":"9904e0f8072a98e45c459ef18f20fbef","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"FROM quay.io/cellgeni/cellgeni-jupyter:14.05-01\nUSER root\n#   pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends libncurses5-dev libncursesw5-dev procps texlive -yq\n#   Install FastQC\nRUN curl -fsSL http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip -o /opt/fastqc_v0.11.5.zip \\\n && unzip /opt/fastqc_v0.11.5.zip -d /opt/ \\\n && chmod 755 /opt/FastQC/fastqc \\\n && ln -s /opt/FastQC/fastqc /usr/local/bin/fastqc \\\n && rm /opt/fastqc_v0.11.5.zip\n#   Install Kallisto\nRUN curl -fsSL https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz -o /opt/kallisto_linux-v0.43.1.tar.gz \\\n && tar xvzf /opt/kallisto_linux-v0.43.1.tar.gz -C /opt/ \\\n && ln -s /opt/kallisto_linux-v0.43.1/kallisto /usr/local/bin/kallisto \\\n && rm /opt/kallisto_linux-v0.43.1.tar.gz\n#   Install STAR\nRUN git clone https://github.com/alexdobin/STAR.git /opt/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STAR /usr/local/bin/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STARlong /usr/local/bin/STARlong\n#   Install SAMTools\nRUN curl -fsSL https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 -o /opt/samtools-1.9.tar.bz2 \\\n && tar xvjf /opt/samtools-1.9.tar.bz2 -C /opt/ \\\n && cd /opt/samtools-1.9 \\\n && make \\\n && make install \\\n && rm /opt/samtools-1.9.tar.bz2\n#   Install featureCounts\nRUN curl -fsSL http://downloads.sourceforge.net/project/subread/subread-1.5.1/subread-1.5.1-Linux-x86_64.tar.gz -o /opt/subread-1.5.1-Linux-x86_64.tar.gz \\\n && tar xvf /opt/subread-1.5.1-Linux-x86_64.tar.gz -C /opt/ \\\n && ln -s /opt/subread-1.5.1-Linux-x86_64/bin/featureCounts /usr/local/bin/featureCounts \\\n && rm /opt/subread-1.5.1-Linux-x86_64.tar.gz\n#   Install cutadapt and MAGIC and awscli (to download data)\nRUN pip install cutadapt==4.3 magic-impute==3.0.0 awscli==1.27.114\n#   Install TrimGalore\nRUN mkdir /opt/TrimGalore \\\n && curl -fsSL https://github.com/FelixKrueger/TrimGalore/archive/0.4.5.zip -o /opt/TrimGalore/trim_galore_v0.4.5.zip \\\n && unzip /opt/TrimGalore/trim_galore_v0.4.5.zip -d /opt/TrimGalore \\\n && ln -s /opt/TrimGalore/trim_galore /usr/local/bin/trim_galore \\\n && rm /opt/TrimGalore/trim_galore_v0.4.5.zip\n#   Install bedtools2\nRUN curl -fsSL https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz -o /opt/bedtools-2.27.1.tar.gz \\\n && tar xvzf /opt/bedtools-2.27.1.tar.gz -C /opt/ \\\n && cd /opt/bedtools2 \\\n && make \\\n && cd - \\\n && cp /opt/bedtools2/bin/* /usr/local/bin \\\n && rm /opt/bedtools-2.27.1.tar.gz\n#   install CRAN packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends r-cran-devtools r-cran-tidyverse r-cran-pheatmap r-cran-plyr r-cran-dplyr r-cran-readr r-cran-reshape r-cran-reshape2 r-cran-reticulate r-cran-viridis r-cran-ggplot2 r-cran-ggthemes r-cran-cowplot r-cran-ggforce r-cran-ggridges r-cran-ggrepel r-cran-gplots r-cran-igraph r-cran-car r-cran-ggpubr r-cran-httpuv r-cran-xtable r-cran-sourcetools r-cran-modeltools r-cran-R.oo r-cran-R.methodsS3 r-cran-shiny r-cran-later r-cran-checkmate r-cran-bibtex r-cran-lsei r-cran-bit r-cran-segmented r-cran-mclust r-cran-flexmix r-cran-prabclus r-cran-diptest r-cran-mvtnorm r-cran-robustbase r-cran-kernlab r-cran-trimcluster r-cran-proxy r-cran-R.utils r-cran-htmlwidgets r-cran-hexbin r-cran-crosstalk r-cran-promises r-cran-acepack r-cran-zoo r-cran-npsurv r-cran-iterators r-cran-snow r-cran-bit64 r-cran-permute r-cran-mixtools r-cran-lars r-cran-ica r-cran-fpc r-cran-ape r-cran-pbapply r-cran-irlba r-cran-dtw r-cran-plotly r-cran-metap r-cran-lmtest r-cran-fitdistrplus r-cran-png r-cran-foreach r-cran-vegan r-cran-tidyr r-cran-withr r-cran-magrittr r-cran-rmpi r-cran-biocmanager r-cran-knitr r-cran-statmod r-cran-mvoutlier r-cran-penalized r-cran-mgcv r-cran-corrplot -yq\n#   Install other CRAN\nRUN Rscript -e 'install.packages(c(\"Seurat\", \"rJava\", \"umap\", \"bookdown\", \"cluster\", \"KernSmooth\", \"ROCR\", \"googleVis\", \"ggbeeswarm\", \"SLICER\", \"ggfortify\", \"mclust\", \"Rmagic\", \"DrImpute\"))'\n#   Install Bioconductor packages\nRUN Rscript -e 'BiocManager::install(c(\"graph\", \"RBGL\", \"gtools\", \"xtable\", \"pcaMethods\", \"limma\", \"SingleCellExperiment\", \"Rhdf5lib\", \"scater\", \"scran\", \"RUVSeq\", \"sva\", \"SC3\", \"TSCAN\", \"monocle\", \"destiny\", \"DESeq2\", \"edgeR\", \"MAST\", \"scmap\", \"biomaRt\", \"MultiAssayExperiment\", \"SummarizedExperiment\"))'\n#   install github packages\nRUN Rscript -e 'devtools::install_github(c(\"immunogenomics/harmony\", \"LTLA/beachmat\", \"MarioniLab/DropletUtils\", \"tallulandrews/M3Drop\", \"hemberg-lab/scRNA.seq.funcs\", \"Vivianstats/scImpute\", \"theislab/kBET\", \"kieranrcampbell/ouija\", \"hemberg-lab/scfind\"))'\n#   download data and extra files from S3\nCOPY ./poststart.sh /home/jovyan\n#   add course files\nCOPY course_files /home/jovyan\nRUN chmod -R 777 /home/jovyan\nUSER $NB_UID\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM quay.io/cellgeni/cellgeni-jupyter:14.05-01\nUSER root\n#  pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends libncurses5-dev libncursesw5-dev procps texlive -yq\n#  Install FastQC\nRUN curl -fsSL http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip -o /opt/fastqc_v0.11.5.zip \\\n && unzip /opt/fastqc_v0.11.5.zip -d /opt/ \\\n && chmod 755 /opt/FastQC/fastqc \\\n && ln -s /opt/FastQC/fastqc /usr/local/bin/fastqc \\\n && rm /opt/fastqc_v0.11.5.zip\n#  Install Kallisto\nRUN curl -fsSL https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz -o /opt/kallisto_linux-v0.43.1.tar.gz \\\n && tar xvzf /opt/kallisto_linux-v0.43.1.tar.gz -C /opt/ \\\n && ln -s /opt/kallisto_linux-v0.43.1/kallisto /usr/local/bin/kallisto \\\n && rm /opt/kallisto_linux-v0.43.1.tar.gz\n#  Install STAR\nRUN git clone https://github.com/alexdobin/STAR.git /opt/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STAR /usr/local/bin/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STARlong /usr/local/bin/STARlong\n#  Install SAMTools\nRUN curl -fsSL https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 -o /opt/samtools-1.9.tar.bz2 \\\n && tar xvjf /opt/samtools-1.9.tar.bz2 -C /opt/ \\\n && cd /opt/samtools-1.9 \\\n && make \\\n && make install \\\n && rm /opt/samtools-1.9.tar.bz2\n#  Install featureCounts\nRUN curl -fsSL http://downloads.sourceforge.net/project/subread/subread-1.5.1/subread-1.5.1-Linux-x86_64.tar.gz -o /opt/subread-1.5.1-Linux-x86_64.tar.gz \\\n && tar xvf /opt/subread-1.5.1-Linux-x86_64.tar.gz -C /opt/ \\\n && ln -s /opt/subread-1.5.1-Linux-x86_64/bin/featureCounts /usr/local/bin/featureCounts \\\n && rm /opt/subread-1.5.1-Linux-x86_64.tar.gz\n#  Install cutadapt and MAGIC and awscli (to download data)\nRUN pip install cutadapt magic-impute awscli\n#  Install TrimGalore\nRUN mkdir /opt/TrimGalore \\\n && curl -fsSL https://github.com/FelixKrueger/TrimGalore/archive/0.4.5.zip -o /opt/TrimGalore/trim_galore_v0.4.5.zip \\\n && unzip /opt/TrimGalore/trim_galore_v0.4.5.zip -d /opt/TrimGalore \\\n && ln -s /opt/TrimGalore/trim_galore /usr/local/bin/trim_galore \\\n && rm /opt/TrimGalore/trim_galore_v0.4.5.zip\n#  Install bedtools2\nRUN curl -fsSL https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz -o /opt/bedtools-2.27.1.tar.gz \\\n && tar xvzf /opt/bedtools-2.27.1.tar.gz -C /opt/ \\\n && cd /opt/bedtools2 \\\n && make \\\n && cd - \\\n && cp /opt/bedtools2/bin/* /usr/local/bin \\\n && rm /opt/bedtools-2.27.1.tar.gz\n#  install CRAN packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends r-cran-devtools r-cran-tidyverse r-cran-pheatmap r-cran-plyr r-cran-dplyr r-cran-readr r-cran-reshape r-cran-reshape2 r-cran-reticulate r-cran-viridis r-cran-ggplot2 r-cran-ggthemes r-cran-cowplot r-cran-ggforce r-cran-ggridges r-cran-ggrepel r-cran-gplots r-cran-igraph r-cran-car r-cran-ggpubr r-cran-httpuv r-cran-xtable r-cran-sourcetools r-cran-modeltools r-cran-R.oo r-cran-R.methodsS3 r-cran-shiny r-cran-later r-cran-checkmate r-cran-bibtex r-cran-lsei r-cran-bit r-cran-segmented r-cran-mclust r-cran-flexmix r-cran-prabclus r-cran-diptest r-cran-mvtnorm r-cran-robustbase r-cran-kernlab r-cran-trimcluster r-cran-proxy r-cran-R.utils r-cran-htmlwidgets r-cran-hexbin r-cran-crosstalk r-cran-promises r-cran-acepack r-cran-zoo r-cran-npsurv r-cran-iterators r-cran-snow r-cran-bit64 r-cran-permute r-cran-mixtools r-cran-lars r-cran-ica r-cran-fpc r-cran-ape r-cran-pbapply r-cran-irlba r-cran-dtw r-cran-plotly r-cran-metap r-cran-lmtest r-cran-fitdistrplus r-cran-png r-cran-foreach r-cran-vegan r-cran-tidyr r-cran-withr r-cran-magrittr r-cran-rmpi r-cran-biocmanager r-cran-knitr r-cran-statmod r-cran-mvoutlier r-cran-penalized r-cran-mgcv r-cran-corrplot -yq\n#  Install other CRAN\nRUN Rscript -e 'install.packages(c(\"Seurat\", \"rJava\", \"umap\", \"bookdown\", \"cluster\", \"KernSmooth\", \"ROCR\", \"googleVis\", \"ggbeeswarm\", \"SLICER\", \"ggfortify\", \"mclust\", \"Rmagic\", \"DrImpute\"))'\n#  Install Bioconductor packages\nRUN Rscript -e 'BiocManager::install(c(\"graph\", \"RBGL\", \"gtools\", \"xtable\", \"pcaMethods\", \"limma\", \"SingleCellExperiment\", \"Rhdf5lib\", \"scater\", \"scran\", \"RUVSeq\", \"sva\", \"SC3\", \"TSCAN\", \"monocle\", \"destiny\", \"DESeq2\", \"edgeR\", \"MAST\", \"scmap\", \"biomaRt\", \"MultiAssayExperiment\", \"SummarizedExperiment\"))'\n#  install github packages\nRUN Rscript -e 'devtools::install_github(c(\"immunogenomics/harmony\", \"LTLA/beachmat\", \"MarioniLab/DropletUtils\", \"tallulandrews/M3Drop\", \"hemberg-lab/scRNA.seq.funcs\", \"Vivianstats/scImpute\", \"theislab/kBET\", \"kieranrcampbell/ouija\", \"hemberg-lab/scfind\"))'\n#  download data and extra files from S3\nCOPY ./poststart.sh /home/jovyan\n#  add course files\nCOPY course_files /home/jovyan\nRUN chmod -R 777 /home/jovyan\nUSER $NB_UID\n","injectedSmells":[],"originalDockerfileHash":"7927990c17b27d522b8623dd10291dfc","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM quay.io/cellgeni/cellgeni-jupyter:14.05-01\nUSER root\n#   pre-requisites\nRUN apt-get update \\\n && apt-get install --no-install-recommends libncurses5-dev libncursesw5-dev procps texlive -yq\n#   Install FastQC\nRUN curl -fsSL http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip -o /opt/fastqc_v0.11.5.zip \\\n && unzip /opt/fastqc_v0.11.5.zip -d /opt/ \\\n && chmod 755 /opt/FastQC/fastqc \\\n && ln -s /opt/FastQC/fastqc /usr/local/bin/fastqc \\\n && rm /opt/fastqc_v0.11.5.zip\n#   Install Kallisto\nRUN curl -fsSL https://github.com/pachterlab/kallisto/releases/download/v0.43.1/kallisto_linux-v0.43.1.tar.gz -o /opt/kallisto_linux-v0.43.1.tar.gz \\\n && tar xvzf /opt/kallisto_linux-v0.43.1.tar.gz -C /opt/ \\\n && ln -s /opt/kallisto_linux-v0.43.1/kallisto /usr/local/bin/kallisto \\\n && rm /opt/kallisto_linux-v0.43.1.tar.gz\n#   Install STAR\nRUN git clone https://github.com/alexdobin/STAR.git /opt/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STAR /usr/local/bin/STAR \\\n && ln -s /opt/STAR/bin/Linux_x86_64/STARlong /usr/local/bin/STARlong\n#   Install SAMTools\nRUN curl -fsSL https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2 -o /opt/samtools-1.9.tar.bz2 \\\n && tar xvjf /opt/samtools-1.9.tar.bz2 -C /opt/ \\\n && cd /opt/samtools-1.9 \\\n && make \\\n && make install \\\n && rm /opt/samtools-1.9.tar.bz2\n#   Install featureCounts\nRUN curl -fsSL http://downloads.sourceforge.net/project/subread/subread-1.5.1/subread-1.5.1-Linux-x86_64.tar.gz -o /opt/subread-1.5.1-Linux-x86_64.tar.gz \\\n && tar xvf /opt/subread-1.5.1-Linux-x86_64.tar.gz -C /opt/ \\\n && ln -s /opt/subread-1.5.1-Linux-x86_64/bin/featureCounts /usr/local/bin/featureCounts \\\n && rm /opt/subread-1.5.1-Linux-x86_64.tar.gz\n#   Install cutadapt and MAGIC and awscli (to download data)\nRUN pip install cutadapt magic-impute awscli\n#   Install TrimGalore\nRUN mkdir /opt/TrimGalore \\\n && curl -fsSL https://github.com/FelixKrueger/TrimGalore/archive/0.4.5.zip -o /opt/TrimGalore/trim_galore_v0.4.5.zip \\\n && unzip /opt/TrimGalore/trim_galore_v0.4.5.zip -d /opt/TrimGalore \\\n && ln -s /opt/TrimGalore/trim_galore /usr/local/bin/trim_galore \\\n && rm /opt/TrimGalore/trim_galore_v0.4.5.zip\n#   Install bedtools2\nRUN curl -fsSL https://github.com/arq5x/bedtools2/releases/download/v2.27.1/bedtools-2.27.1.tar.gz -o /opt/bedtools-2.27.1.tar.gz \\\n && tar xvzf /opt/bedtools-2.27.1.tar.gz -C /opt/ \\\n && cd /opt/bedtools2 \\\n && make \\\n && cd - \\\n && cp /opt/bedtools2/bin/* /usr/local/bin \\\n && rm /opt/bedtools-2.27.1.tar.gz\n#   install CRAN packages\nRUN apt-get update \\\n && apt-get install --no-install-recommends r-cran-devtools r-cran-tidyverse r-cran-pheatmap r-cran-plyr r-cran-dplyr r-cran-readr r-cran-reshape r-cran-reshape2 r-cran-reticulate r-cran-viridis r-cran-ggplot2 r-cran-ggthemes r-cran-cowplot r-cran-ggforce r-cran-ggridges r-cran-ggrepel r-cran-gplots r-cran-igraph r-cran-car r-cran-ggpubr r-cran-httpuv r-cran-xtable r-cran-sourcetools r-cran-modeltools r-cran-R.oo r-cran-R.methodsS3 r-cran-shiny r-cran-later r-cran-checkmate r-cran-bibtex r-cran-lsei r-cran-bit r-cran-segmented r-cran-mclust r-cran-flexmix r-cran-prabclus r-cran-diptest r-cran-mvtnorm r-cran-robustbase r-cran-kernlab r-cran-trimcluster r-cran-proxy r-cran-R.utils r-cran-htmlwidgets r-cran-hexbin r-cran-crosstalk r-cran-promises r-cran-acepack r-cran-zoo r-cran-npsurv r-cran-iterators r-cran-snow r-cran-bit64 r-cran-permute r-cran-mixtools r-cran-lars r-cran-ica r-cran-fpc r-cran-ape r-cran-pbapply r-cran-irlba r-cran-dtw r-cran-plotly r-cran-metap r-cran-lmtest r-cran-fitdistrplus r-cran-png r-cran-foreach r-cran-vegan r-cran-tidyr r-cran-withr r-cran-magrittr r-cran-rmpi r-cran-biocmanager r-cran-knitr r-cran-statmod r-cran-mvoutlier r-cran-penalized r-cran-mgcv r-cran-corrplot -yq\n#   Install other CRAN\nRUN Rscript -e 'install.packages(c(\"Seurat\", \"rJava\", \"umap\", \"bookdown\", \"cluster\", \"KernSmooth\", \"ROCR\", \"googleVis\", \"ggbeeswarm\", \"SLICER\", \"ggfortify\", \"mclust\", \"Rmagic\", \"DrImpute\"))'\n#   Install Bioconductor packages\nRUN Rscript -e 'BiocManager::install(c(\"graph\", \"RBGL\", \"gtools\", \"xtable\", \"pcaMethods\", \"limma\", \"SingleCellExperiment\", \"Rhdf5lib\", \"scater\", \"scran\", \"RUVSeq\", \"sva\", \"SC3\", \"TSCAN\", \"monocle\", \"destiny\", \"DESeq2\", \"edgeR\", \"MAST\", \"scmap\", \"biomaRt\", \"MultiAssayExperiment\", \"SummarizedExperiment\"))'\n#   install github packages\nRUN Rscript -e 'devtools::install_github(c(\"immunogenomics/harmony\", \"LTLA/beachmat\", \"MarioniLab/DropletUtils\", \"tallulandrews/M3Drop\", \"hemberg-lab/scRNA.seq.funcs\", \"Vivianstats/scImpute\", \"theislab/kBET\", \"kieranrcampbell/ouija\", \"hemberg-lab/scfind\"))'\n#   download data and extra files from S3\nCOPY ./poststart.sh /home/jovyan\n#   add course files\nCOPY course_files /home/jovyan\nRUN chmod -R 777 /home/jovyan\nUSER $NB_UID\n","originalDockerfileUglifiedHash":"d1e3f73bf5963a39e0d33d5a449fa804","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/83a598e802008414db8d328b9ce11ea8ab05a0ee.dockerfile"}