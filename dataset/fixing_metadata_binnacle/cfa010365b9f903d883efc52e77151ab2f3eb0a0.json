{"seed":1498593029,"processedDockerfileHash":"6f1ca139ce0ec2dfd256307c4c2eaf51","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:jessie\n#   note: we use jessie instead of wheezy because our deps are easier to get here\n#   runtime dependencies\n#   (packages are listed alphabetically to ease maintenence)\nRUN apt-get update \\\n && apt-get install --no-install-recommends fontconfig-config fonts-dejavu-core geoip-database init-system-helpers libarchive-extract-perl libexpat1 libfontconfig1 libfreetype6 libgcrypt11 libgd3 libgdbm3 libgeoip1 libgpg-error0 libjbig0 libjpeg8 liblog-message-perl liblog-message-simple-perl libmodule-pluggable-perl libpng12-0 libpod-latex-perl libssl1.0.0 libterm-ui-perl libtext-soundex-perl libtiff5 libvpx1 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxml2 libxpm4 libxslt1.1 perl perl-modules rename sgml-base ucf xml-core -y \\\n && rm -rf /var/lib/apt/lists/*\n#   see http://nginx.org/en/pgp_keys.html\nRUN gpg --keyserver pgp.mit.edu --recv-key A09CD539B8BB8CBE96E82BDFABD4D3B3F5806B4D 4C2C85E705DC730833990C38A9376139A524C53E B0F4253373F8F6F510D42178520A9993A1C052F8 65506C02EFC250F1B7A3D694ECF0E90B2C172083 7338973069ED3F443F4D37DFA64FD5B17ADB39A8 6E067260B83DCF2CA93C566F518509686C7E5E82 573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62\nENV NGINX_VERSION=\"1.6.1\"\n#   All our runtime and build dependencies, in alphabetical order (to ease maintenance)\nRUN buildDeps=\" ca-certificates curl gcc libc-dev-bin libc6-dev libexpat1-dev libfontconfig1-dev libfreetype6-dev libgd-dev libgd2-dev libgeoip-dev libice-dev libjbig-dev libjpeg8-dev liblzma-dev libpcre3-dev libperl-dev libpng12-dev libpthread-stubs0-dev libsm-dev libssl-dev libssl-dev libtiff5-dev libvpx-dev libx11-dev libxau-dev libxcb1-dev libxdmcp-dev libxml2-dev libxpm-dev libxslt1-dev libxt-dev linux-libc-dev make manpages-dev x11proto-core-dev x11proto-input-dev x11proto-kb-dev xtrans-dev zlib1g-dev \" ; apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz\" -o nginx.tar.gz \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz.asc\" -o nginx.tar.gz.asc \\\n && gpg --verify nginx.tar.gz.asc \\\n && mkdir -p /usr/src/nginx \\\n && tar -xvf nginx.tar.gz -C /usr/src/nginx --strip-components=1 \\\n && rm nginx.tar.gz* \\\n && cd /usr/src/nginx \\\n && ./configure --user=www-data --group=www-data --prefix=/usr/local/nginx --conf-path=/etc/nginx.conf --http-log-path=/proc/self/fd/1 --error-log-path=/proc/self/fd/2 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_perl_module --with-http_realip_module --with-http_spdy_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_xslt_module --with-ipv6 --with-mail --with-mail_ssl_module --with-pcre-jit \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd / \\\n && rm -r /usr/src/nginx \\\n && chown -R www-data:www-data /usr/local/nginx \\\n && { echo ;echo '# stay in the foreground so Docker has a process to track' ;echo 'daemon off;' ; } >> /etc/nginx.conf \\\n && apt-get purge -y --auto-remove $buildDeps\nENV PATH=\"/usr/local/nginx/sbin:$PATH\"\nWORKDIR /usr/local/nginx/html\n#   TODO USER www-data\nEXPOSE 80/tcp\nCMD [\"nginx\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:jessie\n#  note: we use jessie instead of wheezy because our deps are easier to get here\n#  runtime dependencies\n#  (packages are listed alphabetically to ease maintenence)\nRUN apt-get update \\\n && apt-get install --no-install-recommends fontconfig-config fonts-dejavu-core geoip-database init-system-helpers libarchive-extract-perl libexpat1 libfontconfig1 libfreetype6 libgcrypt11 libgd3 libgdbm3 libgeoip1 libgpg-error0 libjbig0 libjpeg8 liblog-message-perl liblog-message-simple-perl libmodule-pluggable-perl libpng12-0 libpod-latex-perl libssl1.0.0 libterm-ui-perl libtext-soundex-perl libtiff5 libvpx1 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxml2 libxpm4 libxslt1.1 perl perl-modules rename sgml-base ucf xml-core -y \\\n && rm -rf /var/lib/apt/lists/*\n#  see http://nginx.org/en/pgp_keys.html\nRUN gpg --keyserver pgp.mit.edu --recv-key A09CD539B8BB8CBE96E82BDFABD4D3B3F5806B4D 4C2C85E705DC730833990C38A9376139A524C53E B0F4253373F8F6F510D42178520A9993A1C052F8 65506C02EFC250F1B7A3D694ECF0E90B2C172083 7338973069ED3F443F4D37DFA64FD5B17ADB39A8 6E067260B83DCF2CA93C566F518509686C7E5E82 573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62\nENV NGINX_VERSION=\"1.6.1\"\n#  All our runtime and build dependencies, in alphabetical order (to ease maintenance)\nRUN buildDeps=\" ca-certificates curl gcc libc-dev-bin libc6-dev libexpat1-dev libfontconfig1-dev libfreetype6-dev libgd-dev libgd2-dev libgeoip-dev libice-dev libjbig-dev libjpeg8-dev liblzma-dev libpcre3-dev libperl-dev libpng12-dev libpthread-stubs0-dev libsm-dev libssl-dev libssl-dev libtiff5-dev libvpx-dev libx11-dev libxau-dev libxcb1-dev libxdmcp-dev libxml2-dev libxpm-dev libxslt1-dev libxt-dev linux-libc-dev make manpages-dev x11proto-core-dev x11proto-input-dev x11proto-kb-dev xtrans-dev zlib1g-dev \" ; apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz\" -o nginx.tar.gz \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz.asc\" -o nginx.tar.gz.asc \\\n && gpg --verify nginx.tar.gz.asc \\\n && mkdir -p /usr/src/nginx \\\n && tar -xvf nginx.tar.gz -C /usr/src/nginx --strip-components=1 \\\n && rm nginx.tar.gz* \\\n && cd /usr/src/nginx \\\n && ./configure --user=www-data --group=www-data --prefix=/usr/local/nginx --conf-path=/etc/nginx.conf --http-log-path=/proc/self/fd/1 --error-log-path=/proc/self/fd/2 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_perl_module --with-http_realip_module --with-http_spdy_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_xslt_module --with-ipv6 --with-mail --with-mail_ssl_module --with-pcre-jit \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd / \\\n && rm -r /usr/src/nginx \\\n && chown -R www-data:www-data /usr/local/nginx \\\n && { echo ;echo '# stay in the foreground so Docker has a process to track' ;echo 'daemon off;' ; } >> /etc/nginx.conf \\\n && apt-get purge -y --auto-remove $buildDeps\nENV PATH=\"/usr/local/nginx/sbin:$PATH\"\nWORKDIR /usr/local/nginx/html\n#  TODO USER www-data\nEXPOSE 80/tcp\nCMD [\"nginx\"]\n","injectedSmells":[],"originalDockerfileHash":"67bdb84667be1cc3a0491a375952b705","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:jessie\n#   note: we use jessie instead of wheezy because our deps are easier to get here\n#   runtime dependencies\n#   (packages are listed alphabetically to ease maintenence)\nRUN apt-get update \\\n && apt-get install --no-install-recommends fontconfig-config fonts-dejavu-core geoip-database init-system-helpers libarchive-extract-perl libexpat1 libfontconfig1 libfreetype6 libgcrypt11 libgd3 libgdbm3 libgeoip1 libgpg-error0 libjbig0 libjpeg8 liblog-message-perl liblog-message-simple-perl libmodule-pluggable-perl libpng12-0 libpod-latex-perl libssl1.0.0 libterm-ui-perl libtext-soundex-perl libtiff5 libvpx1 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxml2 libxpm4 libxslt1.1 perl perl-modules rename sgml-base ucf xml-core -y \\\n && rm -rf /var/lib/apt/lists/*\n#   see http://nginx.org/en/pgp_keys.html\nRUN gpg --keyserver pgp.mit.edu --recv-key A09CD539B8BB8CBE96E82BDFABD4D3B3F5806B4D 4C2C85E705DC730833990C38A9376139A524C53E B0F4253373F8F6F510D42178520A9993A1C052F8 65506C02EFC250F1B7A3D694ECF0E90B2C172083 7338973069ED3F443F4D37DFA64FD5B17ADB39A8 6E067260B83DCF2CA93C566F518509686C7E5E82 573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62\nENV NGINX_VERSION=\"1.6.1\"\n#   All our runtime and build dependencies, in alphabetical order (to ease maintenance)\nRUN buildDeps=\" ca-certificates curl gcc libc-dev-bin libc6-dev libexpat1-dev libfontconfig1-dev libfreetype6-dev libgd-dev libgd2-dev libgeoip-dev libice-dev libjbig-dev libjpeg8-dev liblzma-dev libpcre3-dev libperl-dev libpng12-dev libpthread-stubs0-dev libsm-dev libssl-dev libssl-dev libtiff5-dev libvpx-dev libx11-dev libxau-dev libxcb1-dev libxdmcp-dev libxml2-dev libxpm-dev libxslt1-dev libxt-dev linux-libc-dev make manpages-dev x11proto-core-dev x11proto-input-dev x11proto-kb-dev xtrans-dev zlib1g-dev \" ; apt-get update \\\n && apt-get install --no-install-recommends $buildDeps -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz\" -o nginx.tar.gz \\\n && curl -SL \"http://nginx.org/download/nginx-$NGINX_VERSION.tar.gz.asc\" -o nginx.tar.gz.asc \\\n && gpg --verify nginx.tar.gz.asc \\\n && mkdir -p /usr/src/nginx \\\n && tar -xvf nginx.tar.gz -C /usr/src/nginx --strip-components=1 \\\n && rm nginx.tar.gz* \\\n && cd /usr/src/nginx \\\n && ./configure --user=www-data --group=www-data --prefix=/usr/local/nginx --conf-path=/etc/nginx.conf --http-log-path=/proc/self/fd/1 --error-log-path=/proc/self/fd/2 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_perl_module --with-http_realip_module --with-http_spdy_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_xslt_module --with-ipv6 --with-mail --with-mail_ssl_module --with-pcre-jit \\\n && make -j\"$( nproc ;)\" \\\n && make install \\\n && cd / \\\n && rm -r /usr/src/nginx \\\n && chown -R www-data:www-data /usr/local/nginx \\\n && { echo ;echo '# stay in the foreground so Docker has a process to track' ;echo 'daemon off;' ; } >> /etc/nginx.conf \\\n && apt-get purge -y --auto-remove $buildDeps\nENV PATH=\"/usr/local/nginx/sbin:$PATH\"\nWORKDIR /usr/local/nginx/html\n#   TODO USER www-data\nEXPOSE 80/tcp\nCMD [\"nginx\"]\n","originalDockerfileUglifiedHash":"de75665f71c2c9676870dfee27ce17c2","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cfa010365b9f903d883efc52e77151ab2f3eb0a0.dockerfile"}