{"seed":2873126379,"processedDockerfileHash":"679edab949cefd651e1562add8addfc0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  # Build Ubuntu Docker image for build of MIRTK\n#  #\n#  # The build of this image is time consuming. Moreover, this base image\n#  # rarely changes and can thus be built and pushed to Docker Hub manually.\n#  #\n#  # How to build the image:\n#  # - Change to the Docker/Ubuntu/ directory of the MIRTK source tree\n#  # - Run \"docker build -t biomedia/ubuntu:mirtk .\"\n#  #\n#  # Upload image to Docker Hub:\n#  # - Log in with \"docker login\" command if necessary\n#  # - Push image using \"docker push biomedia/ubuntu:mirtk\"\n#  #\n#  # https://hub.docker.com/r/biomedia/ubuntu/\nFROM ubuntu:14.04\nMAINTAINER Andreas Schuh <andreas.schuh.84@gmail.com>\nLABEL Description=\"Ubuntu with prerequisits for MIRTK installed\" \\\n      Vendor=\"BioMedIA\"\n#   No. of threads to use for build (--build-arg THREADS=8)\n#   By default, all available CPUs are used. When a Docker Machine is used,\n#   set the number of CPUs in the VirtualBox VM Settings.\nARG THREADS\n#   When VTK_VERSION='', the official libvtk6-dev package is used.\n#   Note, however, that this results in a Docker image that is about twice\n#   the size of the image when a custom VTK build without Qt, wrappers,\n#   and unused VTK modules is used instead!\nARG VTK_VERSION=7.0.0\nARG EIGEN_VERSION=3.2.8\n#   Install prerequisites for MIRTK build\n#\n#   The bzindovic/suitesparse-bugfix-1319687 PPA is required for building\n#   shared libraries which link with the static SuiteSparse libraries due\n#   to a bug in the official Ubuntu package:\n#   https://bugs.launchpad.net/ubuntu/+source/suitesparse/+bug/1333214\nRUN NUM_CPUS=${THREADS:-`cat /proc/cpuinfo | grep processor | wc -l `} \\\n && echo \"Maximum number of build threads = $NUM_CPUS\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.92.37.8 -y \\\n && add-apt-repository -y ppa:bzindovic/suitesparse-bugfix-1319687 \\\n && apt-get update \\\n && apt-get install --no-install-recommends wget=1.15-1ubuntu1.14.04.5 gcc=4:4.8.2-1ubuntu6 g++=4:4.8.2-1ubuntu6 make=3.81-8.2ubuntu3 cmake=2.8.12.2-0ubuntu3 python=2.7.5-5ubuntu3 freeglut3-dev=2.8.1-1 libarpack2-dev=3.1.5-2 libboost-math-dev=1.54.0.1ubuntu1 libboost-random-dev=1.54.0.1ubuntu1 libflann-dev=1.8.4-3 libgtest-dev=1.6.0-1ubuntu6 libnifti-dev=2.0.0-1 libpng-dev libsuitesparse-dev=1:4.2.1-3ubuntu1 libtbb-dev=4.2~20130725-1.1ubuntu1 zlib1g-dev=1:1.2.8.dfsg-1ubuntu1.1 -y \\\n && mkdir /usr/src/gtest/build \\\n && cd /usr/src/gtest/build \\\n && cmake .. \\\n && make -j $NUM_CPUS \\\n && mv -f libgtest.a libgtest_main.a /usr/lib \\\n && cd /usr/src \\\n && rm -rf /usr/src/gtest/build \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install --no-install-recommends libeigen3-dev=3.2.0-8 -y ; else EIGEN_SOURCE_DIR=/usr/src/eigen-${EIGEN_VERSION} \\\n && mkdir ${EIGEN_SOURCE_DIR} /usr/include/eigen3 \\\n && cd ${EIGEN_SOURCE_DIR} \\\n && wget -O archive.tar.bz2 http://bitbucket.org/eigen/eigen/get/${EIGEN_VERSION}.tar.bz2 \\\n && tar vxjf archive.tar.bz2 --strip 1 \\\n && mv signature_of_eigen3_matrix_library Eigen /usr/include/eigen3/ \\\n && mv cmake/FindEigen3.cmake /usr/share/cmake-2.8/Modules/ \\\n && cd /usr/src \\\n && rm -rf ${EIGEN_SOURCE_DIR} ; fi \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install --no-install-recommends libvtk6-dev=6.0.0-6 -y ; else VTK_RELEASE=`echo ${VTK_VERSION} | sed s/.[0-9]*$// ` \\\n && cd /usr/src \\\n && wget http://www.vtk.org/files/release/${VTK_RELEASE}/VTK-${VTK_VERSION}.tar.gz \\\n && tar -xvzf VTK-${VTK_VERSION}.tar.gz \\\n && rm -f VTK-${VTK_VERSION}.tar.gz \\\n && mkdir VTK-${VTK_VERSION}/Build \\\n && cd VTK-${VTK_VERSION}/Build \\\n && cmake -D CMAKE_INSTALL_PREFIX=/usr/local -D CMAKE_BUILD_TYPE=Release -D CMAKE_CXX_FLAGS=-std=c++11 -D VTK_USE_SYSTEM_PNG=ON -D VTK_USE_SYSTEM_ZLIB=ON -D BUILD_SHARED_LIBS=ON -D BUILD_EXAMPLES=OFF -D BUILD_TESTING=OFF -D BUILD_DOCUMENTATION=OFF .. \\\n && make -j $NUM_CPUS install \\\n && cd /usr/src \\\n && rm -rf /usr/src/VTK-${VTK_VERSION} \\\n && ldconfig ; fi \\\n && rm -rf /var/lib/apt/lists/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# # Build Ubuntu Docker image for build of MIRTK\n# #\n# # The build of this image is time consuming. Moreover, this base image\n# # rarely changes and can thus be built and pushed to Docker Hub manually.\n# #\n# # How to build the image:\n# # - Change to the Docker/Ubuntu/ directory of the MIRTK source tree\n# # - Run \"docker build -t biomedia/ubuntu:mirtk .\"\n# #\n# # Upload image to Docker Hub:\n# # - Log in with \"docker login\" command if necessary\n# # - Push image using \"docker push biomedia/ubuntu:mirtk\"\n# #\n# # https://hub.docker.com/r/biomedia/ubuntu/\nFROM ubuntu:14.04\nMAINTAINER Andreas Schuh <andreas.schuh.84@gmail.com>\nLABEL Description=\"Ubuntu with prerequisits for MIRTK installed\" \\\n      Vendor=\"BioMedIA\"\n#  No. of threads to use for build (--build-arg THREADS=8)\n#  By default, all available CPUs are used. When a Docker Machine is used,\n#  set the number of CPUs in the VirtualBox VM Settings.\nARG THREADS\n#  When VTK_VERSION='', the official libvtk6-dev package is used.\n#  Note, however, that this results in a Docker image that is about twice\n#  the size of the image when a custom VTK build without Qt, wrappers,\n#  and unused VTK modules is used instead!\nARG VTK_VERSION=7.0.0\nARG EIGEN_VERSION=3.2.8\n#  Install prerequisites for MIRTK build\n#\n#  The bzindovic/suitesparse-bugfix-1319687 PPA is required for building\n#  shared libraries which link with the static SuiteSparse libraries due\n#  to a bug in the official Ubuntu package:\n#  https://bugs.launchpad.net/ubuntu/+source/suitesparse/+bug/1333214\nRUN NUM_CPUS=${THREADS:-`cat /proc/cpuinfo | grep processor | wc -l `} \\\n && echo \"Maximum number of build threads = $NUM_CPUS\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository -y ppa:bzindovic/suitesparse-bugfix-1319687 \\\n && apt-get update \\\n && apt-get install --no-install-recommends wget gcc g++ make cmake python freeglut3-dev libarpack2-dev libboost-math-dev libboost-random-dev libflann-dev libgtest-dev libnifti-dev libpng-dev libsuitesparse-dev libtbb-dev zlib1g-dev -y \\\n && mkdir /usr/src/gtest/build \\\n && cd /usr/src/gtest/build \\\n && cmake .. \\\n && make -j $NUM_CPUS \\\n && mv -f libgtest.a libgtest_main.a /usr/lib \\\n && cd /usr/src \\\n && rm -rf /usr/src/gtest/build \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install libeigen3-dev -y ; else EIGEN_SOURCE_DIR=/usr/src/eigen-${EIGEN_VERSION} \\\n && mkdir ${EIGEN_SOURCE_DIR} /usr/include/eigen3 \\\n && cd ${EIGEN_SOURCE_DIR} \\\n && wget -O archive.tar.bz2 http://bitbucket.org/eigen/eigen/get/${EIGEN_VERSION}.tar.bz2 \\\n && tar vxjf archive.tar.bz2 --strip 1 \\\n && mv signature_of_eigen3_matrix_library Eigen /usr/include/eigen3/ \\\n && mv cmake/FindEigen3.cmake /usr/share/cmake-2.8/Modules/ \\\n && cd /usr/src \\\n && rm -rf ${EIGEN_SOURCE_DIR} ; fi \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install libvtk6-dev -y ; else VTK_RELEASE=`echo ${VTK_VERSION} | sed s/.[0-9]*$// ` \\\n && cd /usr/src \\\n && wget http://www.vtk.org/files/release/${VTK_RELEASE}/VTK-${VTK_VERSION}.tar.gz \\\n && tar -xvzf VTK-${VTK_VERSION}.tar.gz \\\n && rm -f VTK-${VTK_VERSION}.tar.gz \\\n && mkdir VTK-${VTK_VERSION}/Build \\\n && cd VTK-${VTK_VERSION}/Build \\\n && cmake -D CMAKE_INSTALL_PREFIX=/usr/local -D CMAKE_BUILD_TYPE=Release -D CMAKE_CXX_FLAGS=-std=c++11 -D VTK_USE_SYSTEM_PNG=ON -D VTK_USE_SYSTEM_ZLIB=ON -D BUILD_SHARED_LIBS=ON -D BUILD_EXAMPLES=OFF -D BUILD_TESTING=OFF -D BUILD_DOCUMENTATION=OFF .. \\\n && make -j $NUM_CPUS install \\\n && cd /usr/src \\\n && rm -rf /usr/src/VTK-${VTK_VERSION} \\\n && ldconfig ; fi \\\n && rm -rf /var/lib/apt/lists/*\n","injectedSmells":[],"originalDockerfileHash":"540dc88ad9112522d73576beab406deb","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  # Build Ubuntu Docker image for build of MIRTK\n#  #\n#  # The build of this image is time consuming. Moreover, this base image\n#  # rarely changes and can thus be built and pushed to Docker Hub manually.\n#  #\n#  # How to build the image:\n#  # - Change to the Docker/Ubuntu/ directory of the MIRTK source tree\n#  # - Run \"docker build -t biomedia/ubuntu:mirtk .\"\n#  #\n#  # Upload image to Docker Hub:\n#  # - Log in with \"docker login\" command if necessary\n#  # - Push image using \"docker push biomedia/ubuntu:mirtk\"\n#  #\n#  # https://hub.docker.com/r/biomedia/ubuntu/\nFROM ubuntu:14.04\nMAINTAINER Andreas Schuh <andreas.schuh.84@gmail.com>\nLABEL Description=\"Ubuntu with prerequisits for MIRTK installed\" \\\n      Vendor=\"BioMedIA\"\n#   No. of threads to use for build (--build-arg THREADS=8)\n#   By default, all available CPUs are used. When a Docker Machine is used,\n#   set the number of CPUs in the VirtualBox VM Settings.\nARG THREADS\n#   When VTK_VERSION='', the official libvtk6-dev package is used.\n#   Note, however, that this results in a Docker image that is about twice\n#   the size of the image when a custom VTK build without Qt, wrappers,\n#   and unused VTK modules is used instead!\nARG VTK_VERSION=7.0.0\nARG EIGEN_VERSION=3.2.8\n#   Install prerequisites for MIRTK build\n#\n#   The bzindovic/suitesparse-bugfix-1319687 PPA is required for building\n#   shared libraries which link with the static SuiteSparse libraries due\n#   to a bug in the official Ubuntu package:\n#   https://bugs.launchpad.net/ubuntu/+source/suitesparse/+bug/1333214\nRUN NUM_CPUS=${THREADS:-`cat /proc/cpuinfo | grep processor | wc -l `} \\\n && echo \"Maximum number of build threads = $NUM_CPUS\" \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common -y \\\n && add-apt-repository -y ppa:bzindovic/suitesparse-bugfix-1319687 \\\n && apt-get update \\\n && apt-get install --no-install-recommends wget gcc g++ make cmake python freeglut3-dev libarpack2-dev libboost-math-dev libboost-random-dev libflann-dev libgtest-dev libnifti-dev libpng-dev libsuitesparse-dev libtbb-dev zlib1g-dev -y \\\n && mkdir /usr/src/gtest/build \\\n && cd /usr/src/gtest/build \\\n && cmake .. \\\n && make -j $NUM_CPUS \\\n && mv -f libgtest.a libgtest_main.a /usr/lib \\\n && cd /usr/src \\\n && rm -rf /usr/src/gtest/build \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install libeigen3-dev -y ; else EIGEN_SOURCE_DIR=/usr/src/eigen-${EIGEN_VERSION} \\\n && mkdir ${EIGEN_SOURCE_DIR} /usr/include/eigen3 \\\n && cd ${EIGEN_SOURCE_DIR} \\\n && wget -O archive.tar.bz2 http://bitbucket.org/eigen/eigen/get/${EIGEN_VERSION}.tar.bz2 \\\n && tar vxjf archive.tar.bz2 --strip 1 \\\n && mv signature_of_eigen3_matrix_library Eigen /usr/include/eigen3/ \\\n && mv cmake/FindEigen3.cmake /usr/share/cmake-2.8/Modules/ \\\n && cd /usr/src \\\n && rm -rf ${EIGEN_SOURCE_DIR} ; fi \\\n && if [ -z ${VTK_VERSION} ] ; then apt-get install libvtk6-dev -y ; else VTK_RELEASE=`echo ${VTK_VERSION} | sed s/.[0-9]*$// ` \\\n && cd /usr/src \\\n && wget http://www.vtk.org/files/release/${VTK_RELEASE}/VTK-${VTK_VERSION}.tar.gz \\\n && tar -xvzf VTK-${VTK_VERSION}.tar.gz \\\n && rm -f VTK-${VTK_VERSION}.tar.gz \\\n && mkdir VTK-${VTK_VERSION}/Build \\\n && cd VTK-${VTK_VERSION}/Build \\\n && cmake -D CMAKE_INSTALL_PREFIX=/usr/local -D CMAKE_BUILD_TYPE=Release -D CMAKE_CXX_FLAGS=-std=c++11 -D VTK_USE_SYSTEM_PNG=ON -D VTK_USE_SYSTEM_ZLIB=ON -D BUILD_SHARED_LIBS=ON -D BUILD_EXAMPLES=OFF -D BUILD_TESTING=OFF -D BUILD_DOCUMENTATION=OFF .. \\\n && make -j $NUM_CPUS install \\\n && cd /usr/src \\\n && rm -rf /usr/src/VTK-${VTK_VERSION} \\\n && ldconfig ; fi \\\n && rm -rf /var/lib/apt/lists/*\n","originalDockerfileUglifiedHash":"e9dfdc5f7f49fd88a9113822d71fb68c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/288eba4da3474ff622fb893aedfdf57e585cd8c8.dockerfile"}