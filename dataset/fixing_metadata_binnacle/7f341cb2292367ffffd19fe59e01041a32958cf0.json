{"seed":1724334527,"processedDockerfileHash":"7a65c0f5fc4d5b4fb17032b50b6cf886","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n#   Licensed under the Amazon Software License (the \"License\"). You may not use this file except in compliance with the License.\n#   A copy of the License is located at\n#\n#      http://aws.amazon.com/asl/\n#\n#   or in the \"license\" file accompanying this file.\n#   This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied.\n#   See the License for the specific language governing permissions and limitations under the License.\n#\nFROM ubuntu:14.04.5\n#   Building git from source code:\n#     Ubuntu's default git package is built with broken gnutls. Rebuild git with openssl.\n#  #########################################################################\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20170717~14.04.2 wget=1.15-* python=2.7.5-* python2.7-dev=2.7.6-* fakeroot=1.20-* tar=1.27.1-* gzip=1.6-* zip=3.0-* autoconf=2.69-* automake=1:1.14.1-* bzip2=1.0.6-* file=1:5.14-* g++=4:4.8.2-* gcc=4:4.8.2-* imagemagick=8:6.7.7.10-* libbz2-dev=1.0.6-* libc6-dev=2.19-* libcurl4-openssl-dev=7.35.0-* libdb-dev=1:5.3.21~* libevent-dev=2.0.21-stable-* libffi-dev=3.1~rc1+r3.0.13-* libgeoip-dev=1.6.0-* libglib2.0-dev=2.40.2-* libjpeg-dev=8c-* libkrb5-dev=1.12+dfsg-* liblzma-dev=5.1.1alpha+20120614-* libmagickcore-dev=8:6.7.7.10-* libmagickwand-dev=8:6.7.7.10-* libmysqlclient-dev=5.5.59-* libncurses5-dev=5.9+20140118-* libpng12-dev=1.2.50-* libpq-dev=9.3.20-* libreadline-dev=6.3-* libsqlite3-dev=3.8.2-* libssl-dev=1.0.1f-* libtool=2.4.2-* libwebp-dev=0.4.0-* libxml2-dev=2.9.1+dfsg1-* libxslt1-dev=1.1.28-* libyaml-dev=0.1.4-* make=3.81-* patch=2.7.1-* xz-utils=5.1.1alpha+20120614-* zlib1g-dev=1:1.2.8.dfsg-* unzip=6.0-* curl=7.35.0-* -y \\\n && apt-get install --no-install-recommends less=458-* groff=1.22.2-* -y -qq \\\n && apt-get -qy build-dep git=1:1.9.1 \\\n && apt-get install --no-install-recommends libcurl4-openssl-dev=7.35.0-* git-man=1:1.9.1-* liberror-perl=0.17-* -qy \\\n && mkdir -p /usr/src/git-openssl \\\n && cd /usr/src/git-openssl \\\n && apt-get source git=1:1.9.1 \\\n && cd $( find -mindepth 1 -maxdepth 1 -type d -name \"git-*\" ;) \\\n && sed -i -- 's/libcurl4-gnutls-dev/libcurl4-openssl-dev/' ./debian/control \\\n && sed -i -- '/TEST\\s*=\\s*test/d' ./debian/rules \\\n && dpkg-buildpackage -rfakeroot -b \\\n && find .. -type f -name \"git_*ubuntu*.deb\" -exec dpkg -i {}\nRUN wget \"https://bootstrap.pypa.io/get-pip.py\" -O /tmp/get-pip.py \\\n && python /tmp/get-pip.py \\\n && pip install awscli==1.11.157 \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Copy install tools\nCOPY tools /opt/tools\nENV ANDROID_HOME=\"/usr/local/android-sdk-linux\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JDK_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JAVA_VERSION=\"7\" \\\n    INSTALLED_GRADLE_VERSIONS=\"2.10 2.11 2.12 2.13 2.14.1\" \\\n    GRADLE_VERSION=\"2.14.1\" \\\n    ANDROID_TOOLS_VER=\"24.4.1\" \\\n    ANDROID_TOOLS_SHA1=\"725bb360f0f7d04eaccff5a2d57abdd49061326d\"\nENV PATH=\"${PATH}:/opt/tools:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools\" \\\n    JAVA_PACKAGE_VERSION=\"${JAVA_VERSION}u80+7u60arm-0~webupd8~1\"\n#   Install java7\nRUN apt-get update \\\n && apt-get install --no-install-recommends software-properties-common=0.92.37.8 -y \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && (echo oracle-java$JAVA_VERSION-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections ) \\\n && apt-get update \\\n && apt-get install --no-install-recommends oracle-java$JAVA_VERSION-installer=$JAVA_PACKAGE_VERSION -y \\\n && apt-get install --no-install-recommends less=458-2 groff=1.22.2-5 -y -qq \\\n && dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install --no-install-recommends expect=5.45-5ubuntu1 libc6-i386=2.19-0ubuntu6.15 lib32stdc++6=4.8.4-2ubuntu1~14.04.4 lib32gcc1=1:4.9.3-0ubuntu4 lib32ncurses5=5.9+20140118-1ubuntu1 lib32z1=1:1.2.8.dfsg-1ubuntu1.1 libqt5widgets5=5.2.1+dfsg-1ubuntu14.3 -y --force-yes \\\n && apt-get clean \\\n && mkdir -p /usr/src/gradle \\\n && for version in $INSTALLED_GRADLE_VERSIONS; do { wget \"https://services.gradle.org/distributions/gradle-$version-all.zip\" -O \"/usr/src/gradle/gradle-$version-all.zip\" \\\n && unzip \"/usr/src/gradle/gradle-$version-all.zip\" -d /usr/local \\\n && mkdir \"/tmp/gradle-$version\" \\\n && \"/usr/local/gradle-$version/bin/gradle\" -p \"/tmp/gradle-$version\" wrapper \\\n && perl -pi -e \"s/gradle-$version-bin.zip/gradle-$version-all.zip/\" \"/tmp/gradle-$version/gradle/wrapper/gradle-wrapper.properties\" \\\n && \"/tmp/gradle-$version/gradlew\" -p \"/tmp/gradle-$version\" init \\\n && rm -rf \"/tmp/gradle-$version\" \\\n && if [ \"$version\" != \"$GRADLE_VERSION\" ] ; then rm -rf \"/usr/local/gradle-$version\" ; fi ; } ; done \\\n && ln -s /usr/local/gradle-$GRADLE_VERSION/bin/gradle /usr/bin/gradle \\\n && rm -rf /usr/src/gradle \\\n && wget \"http://dl.google.com/android/android-sdk_r$ANDROID_TOOLS_VER-linux.tgz\" -O /tmp/android-sdk.tgz \\\n && echo \"${ANDROID_TOOLS_SHA1} /tmp/android-sdk.tgz\" | sha1sum -c - \\\n && tar -xzf /tmp/android-sdk.tgz -C /usr/local/ \\\n && chown -R root.root $ANDROID_HOME \\\n && ln -s $ANDROID_HOME/tools/android /usr/bin/android \\\n && /opt/tools/android-accept-licenses.sh \"android update sdk --all --no-ui --filter platform-tools,build-tools-25.0.0,build-tools-23.0.3,android-23,android-25\" \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n#  Licensed under the Amazon Software License (the \"License\"). You may not use this file except in compliance with the License.\n#  A copy of the License is located at\n#\n#     http://aws.amazon.com/asl/\n#\n#  or in the \"license\" file accompanying this file.\n#  This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied.\n#  See the License for the specific language governing permissions and limitations under the License.\n#\nFROM ubuntu:14.04.5\n#  Building git from source code:\n#    Ubuntu's default git package is built with broken gnutls. Rebuild git with openssl.\n# #########################################################################\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates wget=1.15-* python=2.7.5-* python2.7-dev=2.7.6-* fakeroot=1.20-* tar=1.27.1-* gzip=1.6-* zip=3.0-* autoconf=2.69-* automake=1:1.14.1-* bzip2=1.0.6-* file=1:5.14-* g++=4:4.8.2-* gcc=4:4.8.2-* imagemagick=8:6.7.7.10-* libbz2-dev=1.0.6-* libc6-dev=2.19-* libcurl4-openssl-dev=7.35.0-* libdb-dev=1:5.3.21~* libevent-dev=2.0.21-stable-* libffi-dev=3.1~rc1+r3.0.13-* libgeoip-dev=1.6.0-* libglib2.0-dev=2.40.2-* libjpeg-dev=8c-* libkrb5-dev=1.12+dfsg-* liblzma-dev=5.1.1alpha+20120614-* libmagickcore-dev=8:6.7.7.10-* libmagickwand-dev=8:6.7.7.10-* libmysqlclient-dev=5.5.59-* libncurses5-dev=5.9+20140118-* libpng12-dev=1.2.50-* libpq-dev=9.3.20-* libreadline-dev=6.3-* libsqlite3-dev=3.8.2-* libssl-dev=1.0.1f-* libtool=2.4.2-* libwebp-dev=0.4.0-* libxml2-dev=2.9.1+dfsg1-* libxslt1-dev=1.1.28-* libyaml-dev=0.1.4-* make=3.81-* patch=2.7.1-* xz-utils=5.1.1alpha+20120614-* zlib1g-dev=1:1.2.8.dfsg-* unzip=6.0-* curl=7.35.0-* -y \\\n && apt-get install less=458-* groff=1.22.2-* -y -qq \\\n && apt-get -qy build-dep git=1:1.9.1 \\\n && apt-get install libcurl4-openssl-dev=7.35.0-* git-man=1:1.9.1-* liberror-perl=0.17-* -qy \\\n && mkdir -p /usr/src/git-openssl \\\n && cd /usr/src/git-openssl \\\n && apt-get source git=1:1.9.1 \\\n && cd $( find -mindepth 1 -maxdepth 1 -type d -name \"git-*\" ;) \\\n && sed -i -- 's/libcurl4-gnutls-dev/libcurl4-openssl-dev/' ./debian/control \\\n && sed -i -- '/TEST\\s*=\\s*test/d' ./debian/rules \\\n && dpkg-buildpackage -rfakeroot -b \\\n && find .. -type f -name \"git_*ubuntu*.deb\" -exec dpkg -i {} ; \\\n && rm -rf /usr/src/git-openssl \\\n && rm -rf /var/lib/apt/lists/* \\\n && apt-get clean\nRUN wget \"https://bootstrap.pypa.io/get-pip.py\" -O /tmp/get-pip.py \\\n && python /tmp/get-pip.py \\\n && pip install awscli==1.11.157 \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#  Copy install tools\nCOPY tools /opt/tools\nENV ANDROID_HOME=\"/usr/local/android-sdk-linux\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JDK_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JAVA_VERSION=\"7\" \\\n    INSTALLED_GRADLE_VERSIONS=\"2.10 2.11 2.12 2.13 2.14.1\" \\\n    GRADLE_VERSION=\"2.14.1\" \\\n    ANDROID_TOOLS_VER=\"24.4.1\" \\\n    ANDROID_TOOLS_SHA1=\"725bb360f0f7d04eaccff5a2d57abdd49061326d\"\nENV PATH=\"${PATH}:/opt/tools:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools\" \\\n    JAVA_PACKAGE_VERSION=\"${JAVA_VERSION}u80+7u60arm-0~webupd8~1\"\n#  Install java7\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && (echo oracle-java$JAVA_VERSION-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections ) \\\n && apt-get update \\\n && apt-get install oracle-java$JAVA_VERSION-installer=$JAVA_PACKAGE_VERSION -y \\\n && apt-get install less groff -y -qq \\\n && dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install expect libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 lib32z1 libqt5widgets5 -y --force-yes \\\n && apt-get clean \\\n && mkdir -p /usr/src/gradle \\\n && for version in $INSTALLED_GRADLE_VERSIONS; do { wget \"https://services.gradle.org/distributions/gradle-$version-all.zip\" -O \"/usr/src/gradle/gradle-$version-all.zip\" \\\n && unzip \"/usr/src/gradle/gradle-$version-all.zip\" -d /usr/local \\\n && mkdir \"/tmp/gradle-$version\" \\\n && \"/usr/local/gradle-$version/bin/gradle\" -p \"/tmp/gradle-$version\" wrapper \\\n && perl -pi -e \"s/gradle-$version-bin.zip/gradle-$version-all.zip/\" \"/tmp/gradle-$version/gradle/wrapper/gradle-wrapper.properties\" \\\n && \"/tmp/gradle-$version/gradlew\" -p \"/tmp/gradle-$version\" init \\\n && rm -rf \"/tmp/gradle-$version\" \\\n && if [ \"$version\" != \"$GRADLE_VERSION\" ] ; then rm -rf \"/usr/local/gradle-$version\" ; fi ; } ; done \\\n && ln -s /usr/local/gradle-$GRADLE_VERSION/bin/gradle /usr/bin/gradle \\\n && rm -rf /usr/src/gradle \\\n && wget \"http://dl.google.com/android/android-sdk_r$ANDROID_TOOLS_VER-linux.tgz\" -O /tmp/android-sdk.tgz \\\n && echo \"${ANDROID_TOOLS_SHA1} /tmp/android-sdk.tgz\" | sha1sum -c - \\\n && tar -xzf /tmp/android-sdk.tgz -C /usr/local/ \\\n && chown -R root.root $ANDROID_HOME \\\n && ln -s $ANDROID_HOME/tools/android /usr/bin/android \\\n && /opt/tools/android-accept-licenses.sh \"android update sdk --all --no-ui --filter platform-tools,build-tools-25.0.0,build-tools-23.0.3,android-23,android-25\" \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\n","injectedSmells":[],"originalDockerfileHash":"49904d3af987ca66c901489266c741bf","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n#   Licensed under the Amazon Software License (the \"License\"). You may not use this file except in compliance with the License.\n#   A copy of the License is located at\n#\n#      http://aws.amazon.com/asl/\n#\n#   or in the \"license\" file accompanying this file.\n#   This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied.\n#   See the License for the specific language governing permissions and limitations under the License.\n#\nFROM ubuntu:14.04.5\n#   Building git from source code:\n#     Ubuntu's default git package is built with broken gnutls. Rebuild git with openssl.\n#  #########################################################################\nRUN apt-get update \\\n && apt-get install --no-install-recommends ca-certificates wget=1.15-* python=2.7.5-* python2.7-dev=2.7.6-* fakeroot=1.20-* tar=1.27.1-* gzip=1.6-* zip=3.0-* autoconf=2.69-* automake=1:1.14.1-* bzip2=1.0.6-* file=1:5.14-* g++=4:4.8.2-* gcc=4:4.8.2-* imagemagick=8:6.7.7.10-* libbz2-dev=1.0.6-* libc6-dev=2.19-* libcurl4-openssl-dev=7.35.0-* libdb-dev=1:5.3.21~* libevent-dev=2.0.21-stable-* libffi-dev=3.1~rc1+r3.0.13-* libgeoip-dev=1.6.0-* libglib2.0-dev=2.40.2-* libjpeg-dev=8c-* libkrb5-dev=1.12+dfsg-* liblzma-dev=5.1.1alpha+20120614-* libmagickcore-dev=8:6.7.7.10-* libmagickwand-dev=8:6.7.7.10-* libmysqlclient-dev=5.5.59-* libncurses5-dev=5.9+20140118-* libpng12-dev=1.2.50-* libpq-dev=9.3.20-* libreadline-dev=6.3-* libsqlite3-dev=3.8.2-* libssl-dev=1.0.1f-* libtool=2.4.2-* libwebp-dev=0.4.0-* libxml2-dev=2.9.1+dfsg1-* libxslt1-dev=1.1.28-* libyaml-dev=0.1.4-* make=3.81-* patch=2.7.1-* xz-utils=5.1.1alpha+20120614-* zlib1g-dev=1:1.2.8.dfsg-* unzip=6.0-* curl=7.35.0-* -y \\\n && apt-get install less=458-* groff=1.22.2-* -y -qq \\\n && apt-get -qy build-dep git=1:1.9.1 \\\n && apt-get install libcurl4-openssl-dev=7.35.0-* git-man=1:1.9.1-* liberror-perl=0.17-* -qy \\\n && mkdir -p /usr/src/git-openssl \\\n && cd /usr/src/git-openssl \\\n && apt-get source git=1:1.9.1 \\\n && cd $( find -mindepth 1 -maxdepth 1 -type d -name \"git-*\" ;) \\\n && sed -i -- 's/libcurl4-gnutls-dev/libcurl4-openssl-dev/' ./debian/control \\\n && sed -i -- '/TEST\\s*=\\s*test/d' ./debian/rules \\\n && dpkg-buildpackage -rfakeroot -b \\\n && find .. -type f -name \"git_*ubuntu*.deb\" -exec dpkg -i {}\nRUN wget \"https://bootstrap.pypa.io/get-pip.py\" -O /tmp/get-pip.py \\\n && python /tmp/get-pip.py \\\n && pip install awscli==1.11.157 \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\n#   Copy install tools\nCOPY tools /opt/tools\nENV ANDROID_HOME=\"/usr/local/android-sdk-linux\" \\\n    JAVA_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JDK_HOME=\"/usr/lib/jvm/java-7-oracle\" \\\n    JAVA_VERSION=\"7\" \\\n    INSTALLED_GRADLE_VERSIONS=\"2.10 2.11 2.12 2.13 2.14.1\" \\\n    GRADLE_VERSION=\"2.14.1\" \\\n    ANDROID_TOOLS_VER=\"24.4.1\" \\\n    ANDROID_TOOLS_SHA1=\"725bb360f0f7d04eaccff5a2d57abdd49061326d\"\nENV PATH=\"${PATH}:/opt/tools:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools\" \\\n    JAVA_PACKAGE_VERSION=\"${JAVA_VERSION}u80+7u60arm-0~webupd8~1\"\n#   Install java7\nRUN apt-get update \\\n && apt-get install software-properties-common -y \\\n && add-apt-repository -y ppa:webupd8team/java \\\n && (echo oracle-java$JAVA_VERSION-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections ) \\\n && apt-get update \\\n && apt-get install oracle-java$JAVA_VERSION-installer=$JAVA_PACKAGE_VERSION -y \\\n && apt-get install less groff -y -qq \\\n && dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get install expect libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 lib32z1 libqt5widgets5 -y --force-yes \\\n && apt-get clean \\\n && mkdir -p /usr/src/gradle \\\n && for version in $INSTALLED_GRADLE_VERSIONS; do { wget \"https://services.gradle.org/distributions/gradle-$version-all.zip\" -O \"/usr/src/gradle/gradle-$version-all.zip\" \\\n && unzip \"/usr/src/gradle/gradle-$version-all.zip\" -d /usr/local \\\n && mkdir \"/tmp/gradle-$version\" \\\n && \"/usr/local/gradle-$version/bin/gradle\" -p \"/tmp/gradle-$version\" wrapper \\\n && perl -pi -e \"s/gradle-$version-bin.zip/gradle-$version-all.zip/\" \"/tmp/gradle-$version/gradle/wrapper/gradle-wrapper.properties\" \\\n && \"/tmp/gradle-$version/gradlew\" -p \"/tmp/gradle-$version\" init \\\n && rm -rf \"/tmp/gradle-$version\" \\\n && if [ \"$version\" != \"$GRADLE_VERSION\" ] ; then rm -rf \"/usr/local/gradle-$version\" ; fi ; } ; done \\\n && ln -s /usr/local/gradle-$GRADLE_VERSION/bin/gradle /usr/bin/gradle \\\n && rm -rf /usr/src/gradle \\\n && wget \"http://dl.google.com/android/android-sdk_r$ANDROID_TOOLS_VER-linux.tgz\" -O /tmp/android-sdk.tgz \\\n && echo \"${ANDROID_TOOLS_SHA1} /tmp/android-sdk.tgz\" | sha1sum -c - \\\n && tar -xzf /tmp/android-sdk.tgz -C /usr/local/ \\\n && chown -R root.root $ANDROID_HOME \\\n && ln -s $ANDROID_HOME/tools/android /usr/bin/android \\\n && /opt/tools/android-accept-licenses.sh \"android update sdk --all --no-ui --filter platform-tools,build-tools-25.0.0,build-tools-23.0.3,android-23,android-25\" \\\n && rm -fr /var/lib/apt/lists/* /tmp/* /var/tmp/*\n","originalDockerfileUglifiedHash":"8b079e54f78c09a4e00ca946d328a345","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/7f341cb2292367ffffd19fe59e01041a32958cf0.dockerfile"}