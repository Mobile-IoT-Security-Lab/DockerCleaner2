{"seed":3799375922,"processedDockerfileHash":"cc09de70820a30f9c0ea519f053267ee","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#   Build handbrake image  \n#   docker build -t handbrake .  \n#   Run handbrake GUI in a container  \n#   docker run -it --rm \\  \n#   --net=host \\  \n#   --device=/dev/cdrom \\  \n#   -v /tmp/.X11-unix:/tmp/.X11-unix \\  \n#   -v $HOME/.Xauthority:/root/.Xauthority \\  \n#   -v $HOME/handbrake:/handbrake \\  \n#   --env=\"DISPLAY\" \\  \n#   handbrake  \n#   Run HandBrakeCLI in a container  \n#   docker run -it --rm \\  \n#   --entrypoint=HandBrakeCLI \\  \n#   -v $HOME/handbrake:/handbrake \\  \n#   handbrake  \n#   This Dockerfile uses Docker Multi-Stage Builds and requires Docker 17.05+  \n#   See https://docs.docker.com/engine/userguide/eng-image/multistage-build/  \n#   Base Image  \nFROM ubuntu:16.04 AS base\nLABEL maintainer=\"\\\"Micheal Waltz <ecliptik@gmail.com>\\\"  \"\n#   Environment variables  \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    LANG=\"C\" \\\n    LANGUAGE=\"C\" \\\n    LC_ALL=\"C\"\nWORKDIR /handbrake  \n#   Base/Runtime packages  \nRUN apt-get update \\\n && apt-get install --no-install-recommends libmp3lame0=3.99.5+repack1-9build1 libvorbis0a=1.3.5-3ubuntu0.2 libass5=0.13.1-1 libsamplerate0=0.1.8-8 libtheora0=1.1.1+dfsg.1-8 libvorbisenc2=1.3.5-3ubuntu0.2 libx264-148=2:0.148.2643+git5c65704-1 libjansson4=2.7-3ubuntu0.1 libopus0=1.1.2-1ubuntu1 libnotify4=0.7.6-2svn1 libdbus-glib-1-2=0.106-1 libgstreamer-plugins-base1.0-0=1.8.3-1ubuntu0.3 libwebkitgtk-3.0-0=2.4.11-0ubuntu0.1 libdvd-pkg=1.4.0-1-1 -y \\\n && apt-get clean\n#   Build image  \nFROM base AS build\n#   Build packages  \nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf=2.69-9 automake=1:1.15-4ubuntu1 build-essential=12.1ubuntu2 cmake=3.5.1-1ubuntu3 git=1:2.7.4-0ubuntu1.10 libass-dev=0.13.1-1 libbz2-dev=1.0.6-8ubuntu0.2 libfontconfig1-dev=2.11.94-0ubuntu1.1 libfreetype6-dev=2.6.1-0.1ubuntu2.5 libfribidi-dev=0.19.7-1 libharfbuzz-dev=1.0.1-1ubuntu0.1 libjansson-dev=2.7-3ubuntu0.1 libmp3lame-dev=3.99.5+repack1-9build1 libogg-dev=1.3.2-1 libopus-dev=1.1.2-1ubuntu1 libsamplerate-dev libtheora-dev=1.1.1+dfsg.1-8 libtool=2.4.6-0.1 libvorbis-dev=1.3.5-3ubuntu0.2 libx264-dev=2:0.148.2643+git5c65704-1 libxml2-dev=2.9.3+dfsg1-1ubuntu0.7 m4=1.4.17-5 make=4.1-6 patch=2.7.5-1ubuntu0.16.04.2 pkg-config=0.29.1-0ubuntu1 python=2.7.12-1~16.04 tar=1.28-2.1ubuntu0.2 yasm=1.3.0-2 zlib1g-dev=1:1.2.8.dfsg-2ubuntu4.3 libtool-bin=2.4.6-0.1 intltool=0.51.0-2ubuntu1.16.04.1 libappindicator-dev=12.10.1+16.04.20170215-0ubuntu1 libdbus-glib-1-dev=0.106-1 libglib2.0-dev=2.48.2-0ubuntu4.8 libgstreamer1.0-dev=1.8.3-1~ubuntu0.1 libgstreamer-plugins-base1.0-dev=1.8.3-1ubuntu0.3 libgtk-3-dev=3.18.9-1ubuntu3.3 libgudev-1.0-dev=1:230-2 libnotify-dev=0.7.6-2svn1 libwebkitgtk-3.0-dev=2.4.11-0ubuntu0.1 wget=1.17.1-1ubuntu1.5 -y \\\n && apt-get clean\n#   Copy source to build  \nCOPY . /handbrake/HandBrake\nWORKDIR /handbrake/HandBrake  \nRUN ./configure --launch-jobs=$( nproc ;) --launch\nRUN cd build \\\n && make install\n#   Runtime image  \nFROM base AS runtime\n#   Copy HandBrakeCLI and ghb binaries to runtime image  \nCOPY --from=build /handbrake/HandBrake/build/HandBrakeCLI /usr/local/bin\nCOPY --from=build /handbrake/HandBrake/build/gtk/src/ghb /usr/local/bin\n#   Make binaries executable  \nRUN chmod +x /usr/local/bin/HandBrakeCLI\nRUN chmod +x /usr/local/bin/ghb\n#   Runtime command (defaults to HandBrake GUI)  \nENTRYPOINT [\"ghb\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#  Build handbrake image  \n#  docker build -t handbrake .  \n#  Run handbrake GUI in a container  \n#  docker run -it --rm \\  \n#  --net=host \\  \n#  --device=/dev/cdrom \\  \n#  -v /tmp/.X11-unix:/tmp/.X11-unix \\  \n#  -v $HOME/.Xauthority:/root/.Xauthority \\  \n#  -v $HOME/handbrake:/handbrake \\  \n#  --env=\"DISPLAY\" \\  \n#  handbrake  \n#  Run HandBrakeCLI in a container  \n#  docker run -it --rm \\  \n#  --entrypoint=HandBrakeCLI \\  \n#  -v $HOME/handbrake:/handbrake \\  \n#  handbrake  \n#  This Dockerfile uses Docker Multi-Stage Builds and requires Docker 17.05+  \n#  See https://docs.docker.com/engine/userguide/eng-image/multistage-build/  \n#  Base Image  \nFROM ubuntu:16.04 AS base\nLABEL maintainer=\"\\\"Micheal Waltz <ecliptik@gmail.com>\\\"  \"\n#  Environment variables  \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    LANG=\"C\" \\\n    LANGUAGE=\"C\" \\\n    LC_ALL=\"C\"\nWORKDIR /handbrake  \n#  Base/Runtime packages  \nRUN apt-get update \\\n && apt-get install -y libmp3lame0 libvorbis0a libass5 libsamplerate0 libtheora0 libvorbisenc2 libx264-148 libjansson4 libopus0 libnotify4 libdbus-glib-1-2 libgstreamer-plugins-base1.0-0 libwebkitgtk-3.0-0 libdvd-pkg \\\n && apt-get clean\n#  Build image  \nFROM base AS build\n#  Build packages  \nRUN apt-get update \\\n && apt-get install -y autoconf automake build-essential cmake git libass-dev libbz2-dev libfontconfig1-dev libfreetype6-dev libfribidi-dev libharfbuzz-dev libjansson-dev libmp3lame-dev libogg-dev libopus-dev libsamplerate-dev libtheora-dev libtool libvorbis-dev libx264-dev libxml2-dev m4 make patch pkg-config python tar yasm zlib1g-dev libtool-bin intltool libappindicator-dev libdbus-glib-1-dev libglib2.0-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgtk-3-dev libgudev-1.0-dev libnotify-dev libwebkitgtk-3.0-dev wget \\\n && apt-get clean\n#  Copy source to build  \nCOPY . /handbrake/HandBrake\nWORKDIR /handbrake/HandBrake  \nRUN ./configure --launch-jobs=$( nproc ;) --launch\nRUN cd build \\\n && make install\n#  Runtime image  \nFROM base AS runtime\n#  Copy HandBrakeCLI and ghb binaries to runtime image  \nCOPY --from=build /handbrake/HandBrake/build/HandBrakeCLI /usr/local/bin\nCOPY --from=build /handbrake/HandBrake/build/gtk/src/ghb /usr/local/bin\n#  Make binaries executable  \nRUN chmod +x /usr/local/bin/HandBrakeCLI\nRUN chmod +x /usr/local/bin/ghb\n#  Runtime command (defaults to HandBrake GUI)  \nENTRYPOINT [\"ghb\"]\n","injectedSmells":[],"originalDockerfileHash":"c4c2a3605cd8e5b77b8c9116e275e032","successfullyInjectedSmells":[],"originalDockerfileUglified":"#   Build handbrake image  \n#   docker build -t handbrake .  \n#   Run handbrake GUI in a container  \n#   docker run -it --rm \\  \n#   --net=host \\  \n#   --device=/dev/cdrom \\  \n#   -v /tmp/.X11-unix:/tmp/.X11-unix \\  \n#   -v $HOME/.Xauthority:/root/.Xauthority \\  \n#   -v $HOME/handbrake:/handbrake \\  \n#   --env=\"DISPLAY\" \\  \n#   handbrake  \n#   Run HandBrakeCLI in a container  \n#   docker run -it --rm \\  \n#   --entrypoint=HandBrakeCLI \\  \n#   -v $HOME/handbrake:/handbrake \\  \n#   handbrake  \n#   This Dockerfile uses Docker Multi-Stage Builds and requires Docker 17.05+  \n#   See https://docs.docker.com/engine/userguide/eng-image/multistage-build/  \n#   Base Image  \nFROM ubuntu:16.04 AS base\nLABEL maintainer=\"\\\"Micheal Waltz <ecliptik@gmail.com>\\\"  \"\n#   Environment variables  \nENV DEBIAN_FRONTEND=\"noninteractive\" \\\n    LANG=\"C\" \\\n    LANGUAGE=\"C\" \\\n    LC_ALL=\"C\"\nWORKDIR /handbrake  \n#   Base/Runtime packages  \nRUN apt-get update \\\n && apt-get install libmp3lame0 libvorbis0a libass5 libsamplerate0 libtheora0 libvorbisenc2 libx264-148 libjansson4 libopus0 libnotify4 libdbus-glib-1-2 libgstreamer-plugins-base1.0-0 libwebkitgtk-3.0-0 libdvd-pkg -y \\\n && apt-get clean\n#   Build image  \nFROM base AS build\n#   Build packages  \nRUN apt-get update \\\n && apt-get install autoconf automake build-essential cmake git libass-dev libbz2-dev libfontconfig1-dev libfreetype6-dev libfribidi-dev libharfbuzz-dev libjansson-dev libmp3lame-dev libogg-dev libopus-dev libsamplerate-dev libtheora-dev libtool libvorbis-dev libx264-dev libxml2-dev m4 make patch pkg-config python tar yasm zlib1g-dev libtool-bin intltool libappindicator-dev libdbus-glib-1-dev libglib2.0-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgtk-3-dev libgudev-1.0-dev libnotify-dev libwebkitgtk-3.0-dev wget -y \\\n && apt-get clean\n#   Copy source to build  \nCOPY . /handbrake/HandBrake\nWORKDIR /handbrake/HandBrake  \nRUN ./configure --launch-jobs=$( nproc ;) --launch\nRUN cd build \\\n && make install\n#   Runtime image  \nFROM base AS runtime\n#   Copy HandBrakeCLI and ghb binaries to runtime image  \nCOPY --from=build /handbrake/HandBrake/build/HandBrakeCLI /usr/local/bin\nCOPY --from=build /handbrake/HandBrake/build/gtk/src/ghb /usr/local/bin\n#   Make binaries executable  \nRUN chmod +x /usr/local/bin/HandBrakeCLI\nRUN chmod +x /usr/local/bin/ghb\n#   Runtime command (defaults to HandBrake GUI)  \nENTRYPOINT [\"ghb\"]\n","originalDockerfileUglifiedHash":"ffadf3b45476f12527523910fba3d7f7","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2113238102e532ad9ea85d97bcf2fcc38bbeba8c.dockerfile"}