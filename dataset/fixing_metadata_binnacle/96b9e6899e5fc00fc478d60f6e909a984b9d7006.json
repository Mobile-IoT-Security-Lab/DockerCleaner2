{"seed":921402819,"processedDockerfileHash":"3bf7a22da09eac2e6d99eae20575d559","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM ubuntu:xenial\nMAINTAINER obscur95 <obscur95@gmail.com>\n#\nENV DEBIAN_FRONTEND=\"noninteractive  DEBCONF_NONINTERACTIVE_SEEN true\"\n#\n#  Configuration de la langue FR\n#\nRUN locale-gen fr_FR.UTF-8\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR:fr\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n#\n#\n#  Creation des repertoires\n#\nRUN mkdir /home/gns3 \\\n && mkdir /home/gns3/GNS3 \\\n && mkdir /home/gns3/GNS3/images \\\n && mkdir /home/gns3/GNS3/images/IOS \\\n && mkdir /home/gns3/GNS3/images/IOU \\\n && mkdir /home/gns3/GNS3/images/QEMU \\\n && mkdir /home/gns3/GNS3/images/QEMU/CSR1000v \\\n && mkdir /home/gns3/GNS3/images/QEMU/Fortigate \\\n && mkdir /home/gns3/GNS3/images/QEMU/PC \\\n && mkdir /home/gns3/GNS3/projects\n#\n#  Copie du fichier sources.list\n#\nCOPY sources.list /etc/apt/sources.list\n#\n#  Mise a jour de la distribution\n#\nRUN dpkg --add-architecture i386 \\\n && : \\\n && apt-get -y dist-upgrade\n#\n#  Installation des packages\n#\nRUN (apt-get update ;apt-get install --no-install-recommends libc6:i386 libstdc++6:i386 -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends libssl1.0.0:i386 -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends lsb-release=9.20160110ubuntu0.2 telnet=0.17-40 traceroute=1:2.0.21-1 tcpdump=4.9.3-0ubuntu0.16.04.1 net-tools=1.60-26ubuntu1 vim=2:7.4.1689-3ubuntu1.5 nano=2.5.3-2ubuntu2 -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends git=1:2.7.4-0ubuntu1.10 bison=2:3.0.4.dfsg-1 flex=2.6.0-11 -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends python3-setuptools=20.7.0-1 python3.5=3.5.2-2ubuntu0~16.04.13 -y ) \\\n && (apt-get update ;apt-get install --no-install-recommends python3-pip=8.1.1-2ubuntu0.6 -y ) \\\n && python3.5 -m pip install -U pip\n#\n#  Pre-requis GNS3 server\n#\nRUN (apt-get update ;apt-get install --no-install-recommends qemu-kvm=1:2.5+dfsg-5ubuntu10.51 qemu-system-x86=1:2.5+dfsg-5ubuntu10.51 vpcs=0.5b2-1 dynamips=0.2.14-1 uuid-runtime=2.27.1-6ubuntu3.10 -y ) \\\n && cd /tmp ; git clone http://github.com/ndevilla/iniparser.git ; cd iniparser ; make \\\n && cp /tmp/iniparser/libiniparser.* /usr/lib/ \\\n && cp /tmp/iniparser/src/iniparser.h /usr/local/include \\\n && cp /tmp/iniparser/src/dictionary.h /usr/local/include \\\n && cd /tmp ; git clone https://github.com/GNS3/iouyap.git ; cd iouyap ; make ; make install \\\n && (apt-get update ;apt-get install --no-install-recommends libpcap-dev=1.7.4-2ubuntu0.1 -y ) \\\n && cd /tmp ; git clone https://github.com/GNS3/ubridge.git ; cd ubridge ; make ; make install \\\n && cd / \\\n && ln -s /lib/i386-linux-gnu/libcrypto.so.1.0.0 /lib/i386-linux-gnu/libcrypto.so.4\n#\n#  Installation de GNS3 server\n#\nRUN python3.5 -m pip install gns3-server\n#\n#  Copie du fichier de configuration de GNS3 server\n#\nCOPY GNS3.conf /etc/xdg/GNS3.conf\n#\n#  Copie des images IOS\n#\nCOPY IOS/c3745-advipservicesk9-mz.124-25d.bin /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin\nCOPY IOS/c7200-adventerprisek9-mz.124-15.T17.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin\nCOPY IOS/c7200-adventerprisek9-mz.152-4.S7.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin\n#\n#  Copie des images IOU\n#\nCOPY IOU/CiscoIOUKeygen.py /home/gns3/GNS3/images/IOU/CiscoIOUKeygen.py\nCOPY IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin\nCOPY IOU/i86bi-linux-l2-ipbasek9-15.1g.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin\nCOPY IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n#  Copie des images QEMU\n#\nCOPY QEMU/CSR1000v/csr1000v_harddisk.vmdk /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v_harddisk.vmdk\nCOPY QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso\nCOPY QEMU/Fortigate/fortios_5.4.2.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortios_5.4.2.qcow2\nCOPY QEMU/Fortigate/fortigate_p10G.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortigate_p10G.qcow2\nCOPY QEMU/PC/TinyCore-current.iso /home/gns3/GNS3/images/QEMU/PC/TinyCore-current.iso\nCOPY QEMU/PC/TinyCore-hda.qcow2 /home/gns3/GNS3/images/QEMU/PC/TinyCore-hda.qcow2\n#\n#  Rends executable les images IOS et IOU\n#\nRUN chmod +x /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n#  Ouverture des ports\n#\nEXPOSE 3080/tcp 4000-4050 5900-5910\n#\n#  Copie du fichier de demarrage\n#\nCOPY startup.sh /home/gns3/startup.sh\nRUN chmod a+x /home/gns3/startup.sh\n#\nENTRYPOINT cd /home/gns3 ; ./startup.sh\n#\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM ubuntu:xenial\nMAINTAINER obscur95 <obscur95@gmail.com>\n#\nENV DEBIAN_FRONTEND=\"noninteractive  DEBCONF_NONINTERACTIVE_SEEN true\"\n#\n# Configuration de la langue FR\n#\nRUN locale-gen fr_FR.UTF-8\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR:fr\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n#\n#\n# Creation des repertoires\n#\nRUN mkdir /home/gns3 \\\n && mkdir /home/gns3/GNS3 \\\n && mkdir /home/gns3/GNS3/images \\\n && mkdir /home/gns3/GNS3/images/IOS \\\n && mkdir /home/gns3/GNS3/images/IOU \\\n && mkdir /home/gns3/GNS3/images/QEMU \\\n && mkdir /home/gns3/GNS3/images/QEMU/CSR1000v \\\n && mkdir /home/gns3/GNS3/images/QEMU/Fortigate \\\n && mkdir /home/gns3/GNS3/images/QEMU/PC \\\n && mkdir /home/gns3/GNS3/projects\n#\n# Copie du fichier sources.list\n#\nCOPY sources.list /etc/apt/sources.list\n#\n# Mise a jour de la distribution\n#\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get -y dist-upgrade\n#\n# Installation des packages\n#\nRUN apt-get install libc6:i386 libstdc++6:i386 -y \\\n && apt-get install libssl1.0.0:i386 -y \\\n && apt-get install lsb-release telnet traceroute tcpdump net-tools vim nano -y \\\n && apt-get install git bison flex -y \\\n && apt-get install python3-setuptools python3.5 -y \\\n && apt-get install python3-pip -y \\\n && python3.5 -m pip install -U pip\n#\n# Pre-requis GNS3 server\n#\nRUN apt-get install qemu-kvm qemu-system-x86 vpcs dynamips uuid-runtime -y \\\n && cd /tmp ; git clone http://github.com/ndevilla/iniparser.git ; cd iniparser ; make \\\n && cp /tmp/iniparser/libiniparser.* /usr/lib/ \\\n && cp /tmp/iniparser/src/iniparser.h /usr/local/include \\\n && cp /tmp/iniparser/src/dictionary.h /usr/local/include \\\n && cd /tmp ; git clone https://github.com/GNS3/iouyap.git ; cd iouyap ; make ; make install \\\n && apt-get install libpcap-dev -y \\\n && cd /tmp ; git clone https://github.com/GNS3/ubridge.git ; cd ubridge ; make ; make install \\\n && cd / \\\n && ln -s /lib/i386-linux-gnu/libcrypto.so.1.0.0 /lib/i386-linux-gnu/libcrypto.so.4\n#\n# Installation de GNS3 server\n#\nRUN python3.5 -m pip install gns3-server\n#\n# Copie du fichier de configuration de GNS3 server\n#\nCOPY GNS3.conf /etc/xdg/GNS3.conf\n#\n# Copie des images IOS\n#\nCOPY IOS/c3745-advipservicesk9-mz.124-25d.bin /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin\nCOPY IOS/c7200-adventerprisek9-mz.124-15.T17.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin\nCOPY IOS/c7200-adventerprisek9-mz.152-4.S7.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin\n#\n# Copie des images IOU\n#\nCOPY IOU/CiscoIOUKeygen.py /home/gns3/GNS3/images/IOU/CiscoIOUKeygen.py\nCOPY IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin\nCOPY IOU/i86bi-linux-l2-ipbasek9-15.1g.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin\nCOPY IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n# Copie des images QEMU\n#\nCOPY QEMU/CSR1000v/csr1000v_harddisk.vmdk /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v_harddisk.vmdk\nCOPY QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso\nCOPY QEMU/Fortigate/fortios_5.4.2.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortios_5.4.2.qcow2\nCOPY QEMU/Fortigate/fortigate_p10G.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortigate_p10G.qcow2\nCOPY QEMU/PC/TinyCore-current.iso /home/gns3/GNS3/images/QEMU/PC/TinyCore-current.iso\nCOPY QEMU/PC/TinyCore-hda.qcow2 /home/gns3/GNS3/images/QEMU/PC/TinyCore-hda.qcow2\n#\n# Rends executable les images IOS et IOU\n#\nRUN chmod +x /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n# Ouverture des ports\n#\nEXPOSE 3080/tcp 4000-4050 5900-5910\n#\n# Copie du fichier de demarrage\n#\nCOPY startup.sh /home/gns3/startup.sh\nRUN chmod a+x /home/gns3/startup.sh\n#\nENTRYPOINT cd /home/gns3 ; ./startup.sh\n#\n","injectedSmells":[],"originalDockerfileHash":"49bb5f212888f7e02e2a634736eb7dc3","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM ubuntu:xenial\nMAINTAINER obscur95 <obscur95@gmail.com>\n#\nENV DEBIAN_FRONTEND=\"noninteractive  DEBCONF_NONINTERACTIVE_SEEN true\"\n#\n#  Configuration de la langue FR\n#\nRUN locale-gen fr_FR.UTF-8\nENV LANG=\"fr_FR.UTF-8\"\nENV LANGUAGE=\"fr_FR:fr\"\nENV LC_ALL=\"fr_FR.UTF-8\"\n#\n#\n#  Creation des repertoires\n#\nRUN mkdir /home/gns3 \\\n && mkdir /home/gns3/GNS3 \\\n && mkdir /home/gns3/GNS3/images \\\n && mkdir /home/gns3/GNS3/images/IOS \\\n && mkdir /home/gns3/GNS3/images/IOU \\\n && mkdir /home/gns3/GNS3/images/QEMU \\\n && mkdir /home/gns3/GNS3/images/QEMU/CSR1000v \\\n && mkdir /home/gns3/GNS3/images/QEMU/Fortigate \\\n && mkdir /home/gns3/GNS3/images/QEMU/PC \\\n && mkdir /home/gns3/GNS3/projects\n#\n#  Copie du fichier sources.list\n#\nCOPY sources.list /etc/apt/sources.list\n#\n#  Mise a jour de la distribution\n#\nRUN dpkg --add-architecture i386 \\\n && apt-get update \\\n && apt-get -y dist-upgrade\n#\n#  Installation des packages\n#\nRUN apt-get install libc6:i386 libstdc++6:i386 -y \\\n && apt-get install libssl1.0.0:i386 -y \\\n && apt-get install lsb-release telnet traceroute tcpdump net-tools vim nano -y \\\n && apt-get install git bison flex -y \\\n && apt-get install python3-setuptools python3.5 -y \\\n && apt-get install python3-pip -y \\\n && python3.5 -m pip install -U pip\n#\n#  Pre-requis GNS3 server\n#\nRUN apt-get install qemu-kvm qemu-system-x86 vpcs dynamips uuid-runtime -y \\\n && cd /tmp ; git clone http://github.com/ndevilla/iniparser.git ; cd iniparser ; make \\\n && cp /tmp/iniparser/libiniparser.* /usr/lib/ \\\n && cp /tmp/iniparser/src/iniparser.h /usr/local/include \\\n && cp /tmp/iniparser/src/dictionary.h /usr/local/include \\\n && cd /tmp ; git clone https://github.com/GNS3/iouyap.git ; cd iouyap ; make ; make install \\\n && apt-get install libpcap-dev -y \\\n && cd /tmp ; git clone https://github.com/GNS3/ubridge.git ; cd ubridge ; make ; make install \\\n && cd / \\\n && ln -s /lib/i386-linux-gnu/libcrypto.so.1.0.0 /lib/i386-linux-gnu/libcrypto.so.4\n#\n#  Installation de GNS3 server\n#\nRUN python3.5 -m pip install gns3-server\n#\n#  Copie du fichier de configuration de GNS3 server\n#\nCOPY GNS3.conf /etc/xdg/GNS3.conf\n#\n#  Copie des images IOS\n#\nCOPY IOS/c3745-advipservicesk9-mz.124-25d.bin /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin\nCOPY IOS/c7200-adventerprisek9-mz.124-15.T17.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin\nCOPY IOS/c7200-adventerprisek9-mz.152-4.S7.bin /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin\n#\n#  Copie des images IOU\n#\nCOPY IOU/CiscoIOUKeygen.py /home/gns3/GNS3/images/IOU/CiscoIOUKeygen.py\nCOPY IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin\nCOPY IOU/i86bi-linux-l2-ipbasek9-15.1g.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin\nCOPY IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n#  Copie des images QEMU\n#\nCOPY QEMU/CSR1000v/csr1000v_harddisk.vmdk /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v_harddisk.vmdk\nCOPY QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso /home/gns3/GNS3/images/QEMU/CSR1000v/csr1000v-universalk9.03.16.04b.S.155-3.S4b-ext.iso\nCOPY QEMU/Fortigate/fortios_5.4.2.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortios_5.4.2.qcow2\nCOPY QEMU/Fortigate/fortigate_p10G.qcow2 /home/gns3/GNS3/images/QEMU/Fortigate/fortigate_p10G.qcow2\nCOPY QEMU/PC/TinyCore-current.iso /home/gns3/GNS3/images/QEMU/PC/TinyCore-current.iso\nCOPY QEMU/PC/TinyCore-hda.qcow2 /home/gns3/GNS3/images/QEMU/PC/TinyCore-hda.qcow2\n#\n#  Rends executable les images IOS et IOU\n#\nRUN chmod +x /home/gns3/GNS3/images/IOS/c3745-advipservicesk9-mz.124-25d.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.124-15.T17.bin \\\n && chmod +x /home/gns3/GNS3/images/IOS/c7200-adventerprisek9-mz.152-4.S7.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-adventerprisek9-15.6.0.9S.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l2-ipbasek9-15.1g.bin \\\n && chmod +x /home/gns3/GNS3/images/IOU/i86bi-linux-l3-adventerprisek9-15.5.2T.bin\n#\n#  Ouverture des ports\n#\nEXPOSE 3080/tcp 4000-4050 5900-5910\n#\n#  Copie du fichier de demarrage\n#\nCOPY startup.sh /home/gns3/startup.sh\nRUN chmod a+x /home/gns3/startup.sh\n#\nENTRYPOINT cd /home/gns3 ; ./startup.sh\n#\n","originalDockerfileUglifiedHash":"731dafafb17b9205b1a2efc45e0b5c67","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/96b9e6899e5fc00fc478d60f6e909a984b9d7006.dockerfile"}