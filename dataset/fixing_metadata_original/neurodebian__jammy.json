{"seed":2048350615,"processedDockerfileHash":"446dbd4726b36bfc68792246d99106a0","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"#  Build #: +1\nFROM ubuntu:jammy\n#  https://bugs.debian.org/830696 (apt uses gpgv by default in newer releases, rather than gpg)\nRUN set -x \\\n && apt-get update \\\n && { which gpg || apt-get install --no-install-recommends gnupg=2.2.27-3ubuntu2.1 -y ; } \\\n && { gpg --version | grep -q '^gpg (GnuPG) 1\\.' || apt-get install --no-install-recommends dirmngr=2.2.27-3ubuntu2.1 -y ; } \\\n && rm -rf /var/lib/apt/lists/*\n#  apt-key is a bit finicky during \"docker build\" with gnupg 2.x, so install the repo key the same way debian-archive-keyring does (/etc/apt/trusted.gpg.d)\n#  this makes \"apt-key list\" output prettier too!\nRUN set -x \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && gpg --batch --keyserver keyserver.ubuntu.com --recv-keys DD95CC430502E37EF840ACEEA5D32F012649A5A9 \\\n && gpg --batch --export DD95CC430502E37EF840ACEEA5D32F012649A5A9 > /etc/apt/trusted.gpg.d/neurodebian.gpg \\\n && rm -rf \"$GNUPGHOME\" \\\n && apt-key list | grep neurodebian\nRUN { echo 'deb http://neuro.debian.net/debian jammy main' ;echo 'deb http://neuro.debian.net/debian data main' ;echo '#deb-src http://neuro.debian.net/debian-devel jammy main' ; } > /etc/apt/sources.list.d/neurodebian.sources.list\n#  Minimalistic package to assist with freezing the APT configuration\n#  which would be coming from neurodebian repo.\n#  Also install and enable eatmydata to be used for all apt-get calls\n#  to speed up docker builds.\nRUN set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends neurodebian-freeze=0.41.0 eatmydata=130-2build1 -y \\\n && ln -s /usr/bin/eatmydata /usr/local/bin/apt-get \\\n && rm -rf /var/lib/apt/lists/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"# Build #: +1\nFROM ubuntu:jammy\n\n# https://bugs.debian.org/830696 (apt uses gpgv by default in newer releases, rather than gpg)\nRUN set -x \\\n\t&& apt-get update \\\n\t&& { \\\n\t\twhich gpg \\\n\t\t|| apt-get install -y --no-install-recommends gnupg \\\n\t; } \\\n# Ubuntu includes \"gnupg\" (not \"gnupg2\", but still 2.x), but not dirmngr, and gnupg 2.x requires dirmngr\n# so, if we're not running gnupg 1.x, explicitly install dirmngr too\n\t&& { \\\n\t\tgpg --version | grep -q '^gpg (GnuPG) 1\\.' \\\n\t\t|| apt-get install -y --no-install-recommends dirmngr \\\n\t; } \\\n\t&& rm -rf /var/lib/apt/lists/*\n\n# apt-key is a bit finicky during \"docker build\" with gnupg 2.x, so install the repo key the same way debian-archive-keyring does (/etc/apt/trusted.gpg.d)\n# this makes \"apt-key list\" output prettier too!\nRUN set -x \\\n\t&& export GNUPGHOME=\"$(mktemp -d)\" \\\n\t&& gpg --batch --keyserver keyserver.ubuntu.com --recv-keys DD95CC430502E37EF840ACEEA5D32F012649A5A9 \\\n\t&& gpg --batch --export DD95CC430502E37EF840ACEEA5D32F012649A5A9 > /etc/apt/trusted.gpg.d/neurodebian.gpg \\\n\t&& rm -rf \"$GNUPGHOME\" \\\n\t&& apt-key list | grep neurodebian\n\nRUN { \\\n\techo 'deb http://neuro.debian.net/debian jammy main'; \\\n\techo 'deb http://neuro.debian.net/debian data main'; \\\n\techo '#deb-src http://neuro.debian.net/debian-devel jammy main'; \\\n} > /etc/apt/sources.list.d/neurodebian.sources.list\n\n# Minimalistic package to assist with freezing the APT configuration\n# which would be coming from neurodebian repo.\n# Also install and enable eatmydata to be used for all apt-get calls\n# to speed up docker builds.\nRUN set -x \\\n\t&& apt-get update \\\n\t&& apt-get install -y --no-install-recommends neurodebian-freeze eatmydata \\\n\t&& ln -s /usr/bin/eatmydata /usr/local/bin/apt-get \\\n\t&& rm -rf /var/lib/apt/lists/*\n\n\n","injectedSmells":[],"originalDockerfileHash":"cfdb3992ca174d71604a65907a175997","successfullyInjectedSmells":[],"originalDockerfileUglified":"#  Build #: +1\nFROM ubuntu:jammy\n#  https://bugs.debian.org/830696 (apt uses gpgv by default in newer releases, rather than gpg)\nRUN set -x \\\n && apt-get update \\\n && { which gpg || apt-get install --no-install-recommends gnupg -y ; } \\\n && { gpg --version | grep -q '^gpg (GnuPG) 1\\.' || apt-get install --no-install-recommends dirmngr -y ; } \\\n && rm -rf /var/lib/apt/lists/*\n#  apt-key is a bit finicky during \"docker build\" with gnupg 2.x, so install the repo key the same way debian-archive-keyring does (/etc/apt/trusted.gpg.d)\n#  this makes \"apt-key list\" output prettier too!\nRUN set -x \\\n && export GNUPGHOME=\"$( mktemp -d ;)\" \\\n && gpg --batch --keyserver keyserver.ubuntu.com --recv-keys DD95CC430502E37EF840ACEEA5D32F012649A5A9 \\\n && gpg --batch --export DD95CC430502E37EF840ACEEA5D32F012649A5A9 > /etc/apt/trusted.gpg.d/neurodebian.gpg \\\n && rm -rf \"$GNUPGHOME\" \\\n && apt-key list | grep neurodebian\nRUN { echo 'deb http://neuro.debian.net/debian jammy main' ;echo 'deb http://neuro.debian.net/debian data main' ;echo '#deb-src http://neuro.debian.net/debian-devel jammy main' ; } > /etc/apt/sources.list.d/neurodebian.sources.list\n#  Minimalistic package to assist with freezing the APT configuration\n#  which would be coming from neurodebian repo.\n#  Also install and enable eatmydata to be used for all apt-get calls\n#  to speed up docker builds.\nRUN set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends neurodebian-freeze eatmydata -y \\\n && ln -s /usr/bin/eatmydata /usr/local/bin/apt-get \\\n && rm -rf /var/lib/apt/lists/*\n","originalDockerfileUglifiedHash":"161b61c8cf5355608963fe4f38424f2a","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/neurodebian__jammy.dockerfile"}