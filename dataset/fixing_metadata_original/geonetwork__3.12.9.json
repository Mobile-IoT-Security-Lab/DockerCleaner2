{"seed":3200576802,"processedDockerfileHash":"2ec995eb01e7bd90887362dd50c2ba43","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n# Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip=6.0-26ubuntu3.1 curl=7.81.0-1ubuntu1.10 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n# Set geonetwork data dir\nCOPY ./docker-entrypoint.sh /entrypoint.sh\n#  Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n","originalDockerfile":"FROM tomcat:8.5-jdk8\n\nENV GN_FILE geonetwork.war\nENV DATA_DIR=$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n\n#Environment variables\nENV GN_VERSION 3.12.9\nENV GN_DOWNLOAD_MD5 cea7a8635cc73f31ea026f848216ae0e\n\nWORKDIR $CATALINA_HOME/webapps\n\nRUN apt-get update && \\\n     apt-get install -y --no-install-recommends \\\n          unzip \\\n          curl &&\\\n     rm -rf /var/lib/apt/lists/* && \\\n     curl -fSL -o $GN_FILE \\\n     https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download && \\\n     echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c && \\\n     mkdir -p geonetwork && \\\n     unzip -e $GN_FILE -d geonetwork && \\\n     rm $GN_FILE\n\n#Set geonetwork data dir\nCOPY ./docker-entrypoint.sh /entrypoint.sh\n\n# Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\n\nCMD [\"catalina.sh\", \"run\"]\n","injectedSmells":[],"originalDockerfileHash":"dc9490de4aa240b729a343debec4ed22","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM tomcat:8.5-jdk8\nENV GN_FILE=\"geonetwork.war\"\nENV DATA_DIR=\"$CATALINA_HOME/webapps/geonetwork/WEB-INF/data\"\nENV JAVA_OPTS=\"-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -server -Xms512m -Xmx2024m -XX:NewSize=512m -XX:MaxNewSize=1024m -XX:+UseConcMarkSweepGC\"\n# Environment variables\nENV GN_VERSION=\"3.12.9\"\nENV GN_DOWNLOAD_MD5=\"cea7a8635cc73f31ea026f848216ae0e\"\nWORKDIR $CATALINA_HOME/webapps\nRUN apt-get update \\\n && apt-get install --no-install-recommends unzip curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -fSL -o $GN_FILE https://sourceforge.net/projects/geonetwork/files/GeoNetwork_opensource/v${GN_VERSION}/${GN_FILE}/download \\\n && echo \"${GN_DOWNLOAD_MD5} *${GN_FILE}\" | md5sum -c \\\n && mkdir -p geonetwork \\\n && unzip -e $GN_FILE -d geonetwork \\\n && rm $GN_FILE\n# Set geonetwork data dir\nCOPY ./docker-entrypoint.sh /entrypoint.sh\n#  Needed to make GN to create logs, jcs_caching and gn H2 database in the tomcat directory.\nWORKDIR $CATALINA_HOME\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"catalina.sh\", \"run\"]\n","originalDockerfileUglifiedHash":"44cda6503d797eeab7d3e37ca997f485","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/geonetwork__3.12.9.dockerfile"}