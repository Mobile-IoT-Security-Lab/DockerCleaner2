{"seed":36948659,"processedDockerfileHash":"75fe53ab1a29af4355ca4928d0ed3478","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:bullseye-slim\nENV VARNISH_SIZE=\"100M\"\nRUN set -e ; BASE_PKGS=\"curl dpkg-dev debhelper devscripts equivs git pkg-config apt-utils fakeroot\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; apt-get update ; apt-get install --no-install-recommends $BASE_PKGS -y ; git clone https://github.com/varnishcache/pkg-varnish-cache.git ; cd pkg-varnish-cache ; git checkout 10da6a585eb7d8defe9d273a51df5b133500eb6b ; rm -rf .git ; curl -f https://varnish-cache.org/downloads/varnish-6.0.10.tgz -o $tmpdir/orig.tgz ; echo \"b89ac4465aacde2fde963642727d20d7d33d04f89c0764c43d59fe13e70fe729079fef44da28cc0090fa153ec584a0fe9723fd2ce976e8e9021410a5f73eadd2 $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s|@VERSION@|6.0.10|\" \"debian/changelog\" ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/varnish* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get install --no-install-recommends ../*.deb -y ; apt-get -y purge --auto-remove varnish-build-deps $BASE_PKGS ; mkdir /pkgs ; mv ../*dev*.deb /pkgs ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/varnish\nCOPY scripts/ /usr/local/bin/\nENTRYPOINT [\"/usr/local/bin/docker-varnish-entrypoint\"]\nEXPOSE 80/tcp 8443/tcp\nCMD []\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:bullseye-slim\n\nENV VARNISH_SIZE 100M\n\nRUN set -e; \\\n    BASE_PKGS=\"curl dpkg-dev debhelper devscripts equivs git pkg-config apt-utils fakeroot\"; \\\n    export DEBIAN_FRONTEND=noninteractive; \\\n    export DEBCONF_NONINTERACTIVE_SEEN=true; \\\n    tmpdir=\"$(mktemp -d)\"; \\\n    cd \"$tmpdir\"; \\\n    apt-get update; \\\n    apt-get install -y $BASE_PKGS; \\\n    git clone https://github.com/varnishcache/pkg-varnish-cache.git; \\\n    cd pkg-varnish-cache; \\\n    git checkout 10da6a585eb7d8defe9d273a51df5b133500eb6b; \\\n    rm -rf .git; \\\n    curl -f https://varnish-cache.org/downloads/varnish-6.0.10.tgz -o $tmpdir/orig.tgz; \\\n    echo \"b89ac4465aacde2fde963642727d20d7d33d04f89c0764c43d59fe13e70fe729079fef44da28cc0090fa153ec584a0fe9723fd2ce976e8e9021410a5f73eadd2  $tmpdir/orig.tgz\" | sha512sum -c -; \\\n    tar xavf $tmpdir/orig.tgz --strip 1; \\\n    sed -i -e \"s|@VERSION@|6.0.10|\"  \"debian/changelog\"; \\\n    mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control; \\\n    sed -i '' debian/varnish*; \\\n    dpkg-buildpackage -us -uc -j\"$(nproc)\"; \\\n    apt-get -y install ../*.deb; \\\n    apt-get -y purge --auto-remove varnish-build-deps $BASE_PKGS; \\\n    mkdir /pkgs; \\\n    mv ../*dev*.deb /pkgs; \\\n    rm -rf /var/lib/apt/lists/* \"$tmpdir\";\n\nWORKDIR /etc/varnish\n\nCOPY scripts/ /usr/local/bin/\nENTRYPOINT [\"/usr/local/bin/docker-varnish-entrypoint\"]\n\nEXPOSE 80 8443\nCMD []\n","injectedSmells":[],"originalDockerfileHash":"96c21b4406d6d8a1dc1749dc0233cab3","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:bullseye-slim\nENV VARNISH_SIZE=\"100M\"\nRUN set -e ; BASE_PKGS=\"curl dpkg-dev debhelper devscripts equivs git pkg-config apt-utils fakeroot\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; apt-get update ; apt-get install $BASE_PKGS -y ; git clone https://github.com/varnishcache/pkg-varnish-cache.git ; cd pkg-varnish-cache ; git checkout 10da6a585eb7d8defe9d273a51df5b133500eb6b ; rm -rf .git ; curl -f https://varnish-cache.org/downloads/varnish-6.0.10.tgz -o $tmpdir/orig.tgz ; echo \"b89ac4465aacde2fde963642727d20d7d33d04f89c0764c43d59fe13e70fe729079fef44da28cc0090fa153ec584a0fe9723fd2ce976e8e9021410a5f73eadd2 $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s|@VERSION@|6.0.10|\" \"debian/changelog\" ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/varnish* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get install ../*.deb -y ; apt-get -y purge --auto-remove varnish-build-deps $BASE_PKGS ; mkdir /pkgs ; mv ../*dev*.deb /pkgs ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/varnish\nCOPY scripts/ /usr/local/bin/\nENTRYPOINT [\"/usr/local/bin/docker-varnish-entrypoint\"]\nEXPOSE 80/tcp 8443/tcp\nCMD []\n","originalDockerfileUglifiedHash":"1277bd49e7f12ac06a8aedfb5845f651","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/varnish__stable.dockerfile"}