{"seed":1008114005,"processedDockerfileHash":"6122f5362b619ce903e4281a9d084270","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","have-a-healthcheck"],"processedDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM python:3.11-slim-bullseye\n#  runtime dependencies\nRUN set -eux ; groupadd -g 1000 satosa ; useradd -m -g 1000 -u 1000 satosa ; apt-get update ; apt-get install --no-install-recommends jq=1.6-2.1 libxml2-utils=2.9.10+dfsg-6.7+deb11u3 xmlsec1=1.2.31-1 -y ; rm -rf /var/lib/apt/lists/* ; pip install yq==3.2.1 --no-cache-dir\nENV SATOSA_VERSION=\"8.2.0\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends cargo=0.47.0-3+b1 dpkg-dev=1.20.12 gcc=4:10.2.1-1 gnupg=2.2.27-2+deb11u2 dirmngr=2.2.27-2+deb11u2 libbluetooth-dev=5.55-3.1 libbz2-dev=1.0.8-4 libc6-dev=2.31-13+deb11u5 libexpat1-dev=2.2.10-2+deb11u5 libffi-dev=3.3-6 libgdbm-dev=1.19-2 liblzma-dev=5.2.5-2.1~deb11u1 libncursesw5-dev=6.2+20201114-2 libreadline-dev=8.1-1 libsqlite3-dev=3.34.1-3 libssl-dev=1.1.1n-0+deb11u4 make=4.3-4.1 python3-dev=3.9.2-3 tk-dev=8.6.11+1 uuid-dev=2.36.1-8+deb11u1 wget=1.21-1+deb11u1 xz-utils=5.2.5-2.1~deb11u1 zlib1g-dev=1:1.2.11.dfsg-2+deb11u2 -y ; pip install satosa==${SATOSA_VERSION} --no-cache-dir ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/* ; mkdir /etc/satosa ; chown -R satosa:satosa /etc/satosa\n#  example configuration\nRUN set -eux ; python -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")' ; mkdir /usr/share/satosa ; tar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/ ; rm /tmp/satosa.tgz\nWORKDIR /etc/satosa\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 8080/tcp\nUSER satosa:satosa\nCMD [\"gunicorn\", \"-b0.0.0.0:8080\", \"satosa.wsgi:app\"]\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"#\n# NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n# PLEASE DO NOT EDIT IT DIRECTLY.\n#\n\nFROM python:3.11-slim-bullseye\n\n# runtime dependencies\nRUN set -eux; \\\n\tgroupadd -g 1000 satosa; \\\n\tuseradd -m -g 1000 -u 1000 satosa; \\\n\tapt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tjq \\\n\t\tlibxml2-utils \\\n\t\txmlsec1 \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*; \\\n\tpip install --no-cache-dir \\\n\t\tyq \\\n\t;\n\nENV SATOSA_VERSION 8.2.0\nRUN set -eux; \\\n\tsavedAptMark=\"$(apt-mark showmanual)\"; \\\n\tapt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tcargo \\\n\t\tdpkg-dev \\\n\t\tgcc \\\n\t\tgnupg dirmngr \\\n\t\tlibbluetooth-dev \\\n\t\tlibbz2-dev \\\n\t\tlibc6-dev \\\n\t\tlibexpat1-dev \\\n\t\tlibffi-dev \\\n\t\tlibgdbm-dev \\\n\t\tliblzma-dev \\\n\t\tlibncursesw5-dev \\\n\t\tlibreadline-dev \\\n\t\tlibsqlite3-dev \\\n\t\tlibssl-dev \\\n\t\tmake \\\n\t\tpython3-dev \\\n\t\ttk-dev \\\n\t\tuuid-dev \\\n\t\twget \\\n\t\txz-utils \\\n\t\tzlib1g-dev \\\n\t; \\\n\tpip install --no-cache-dir \\\n\t\tsatosa==${SATOSA_VERSION} \\\n\t; \\\n\tapt-mark auto '.*' > /dev/null; \\\n\t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; \\\n\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\\n\trm -rf /var/lib/apt/lists/*; \\\n\tmkdir /etc/satosa; \\\n\tchown -R satosa:satosa /etc/satosa\n\n# example configuration\nRUN set -eux; \\\n\tpython -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")'; \\\n\tmkdir /usr/share/satosa; \\\n\ttar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/; \\\n\trm /tmp/satosa.tgz\n\nWORKDIR /etc/satosa\n\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\n\nEXPOSE 8080\nUSER satosa:satosa\nCMD [\"gunicorn\",\"-b0.0.0.0:8080\",\"satosa.wsgi:app\"]\n","injectedSmells":[],"originalDockerfileHash":"c54da5f674e369e018efa3723c169955","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\".\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM python:3.11-slim-bullseye\n#  runtime dependencies\nRUN set -eux ; groupadd -g 1000 satosa ; useradd -m -g 1000 -u 1000 satosa ; apt-get update ; apt-get install --no-install-recommends jq libxml2-utils xmlsec1 -y ; rm -rf /var/lib/apt/lists/* ; pip install yq --no-cache-dir\nENV SATOSA_VERSION=\"8.2.0\"\nRUN set -eux ; savedAptMark=\"$( apt-mark showmanual ;)\" ; apt-get update ; apt-get install --no-install-recommends cargo dpkg-dev gcc gnupg dirmngr libbluetooth-dev libbz2-dev libc6-dev libexpat1-dev libffi-dev libgdbm-dev liblzma-dev libncursesw5-dev libreadline-dev libsqlite3-dev libssl-dev make python3-dev tk-dev uuid-dev wget xz-utils zlib1g-dev -y ; pip install satosa==${SATOSA_VERSION} --no-cache-dir ; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false ; rm -rf /var/lib/apt/lists/* ; mkdir /etc/satosa ; chown -R satosa:satosa /etc/satosa\n#  example configuration\nRUN set -eux ; python -c 'import urllib.request; urllib.request.urlretrieve(\"https://github.com/IdentityPython/SATOSA/archive/refs/tags/v'${SATOSA_VERSION%%[a-z]*}'.tar.gz\",\"/tmp/satosa.tgz\")' ; mkdir /usr/share/satosa ; tar --extract --directory /usr/share/satosa --strip-components=1 --file /tmp/satosa.tgz SATOSA-${SATOSA_VERSION%%[a-z]*}/example/ ; rm /tmp/satosa.tgz\nWORKDIR /etc/satosa\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\nEXPOSE 8080/tcp\nUSER satosa:satosa\nCMD [\"gunicorn\", \"-b0.0.0.0:8080\", \"satosa.wsgi:app\"]\n","originalDockerfileUglifiedHash":"b777fbc71e153d4b5e3c379ad35a9963","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/satosa__8.2.0-bullseye.dockerfile"}