{"seed":1698911404,"processedDockerfileHash":"52c06b445f44ca251c8f7d7a2ea5a535","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:bullseye-slim\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; apt-get update \\\n && apt-get install --no-install-recommends gnupg=2.2.27-2+deb11u2 dirmngr=2.2.27-2+deb11u2 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV CHRONOGRAF_VERSION=\"1.7.17\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends ca-certificates=20210119 curl=7.74.0-1.3+deb11u7 -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" \\\n && gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* \\\n && apt-get purge -y --auto-remove $buildDeps\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\nEXPOSE 8888/tcp\nVOLUME /var/lib/chronograf\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"chronograf\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:bullseye-slim\n\nRUN set -ex && \\\n    mkdir ~/.gnupg; \\\n    echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; \\\n    apt-get update && apt-get install -y gnupg dirmngr --no-install-recommends && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    for key in \\\n        9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E ; \\\n    do \\\n        gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; \\\n    done\n\nENV CHRONOGRAF_VERSION 1.7.17\nRUN ARCH= && dpkgArch=\"$(dpkg --print-architecture)\" && \\\n    case \"${dpkgArch##*-}\" in \\\n      amd64) ARCH='amd64';; \\\n      arm64) ARCH='arm64';; \\\n      armhf) ARCH='armhf';; \\\n      armel) ARCH='armel';; \\\n      *)     echo \"Unsupported architecture: ${dpkgArch}\"; exit 1;; \\\n    esac && \\\n    set -x && \\\n    apt-get update && apt-get install -y ca-certificates curl --no-install-recommends && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" && \\\n    curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" && \\\n    gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb && \\\n    dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb && \\\n    rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* && \\\n    apt-get purge -y --auto-remove $buildDeps\n\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\n\nEXPOSE 8888\n\nVOLUME /var/lib/chronograf\n\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"chronograf\"]\n","injectedSmells":[],"originalDockerfileHash":"80138ddcadb0e29ef9f82804654354ac","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:bullseye-slim\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; apt-get update \\\n && apt-get install --no-install-recommends gnupg dirmngr -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV CHRONOGRAF_VERSION=\"1.7.17\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && set -x \\\n && apt-get update \\\n && apt-get install --no-install-recommends ca-certificates curl -y \\\n && rm -rf /var/lib/apt/lists/* \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc\" \\\n && curl -SLO \"https://dl.influxdata.com/chronograf/releases/chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb\" \\\n && gpg --batch --verify chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb.asc chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && dpkg -i chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb \\\n && rm -f chronograf_${CHRONOGRAF_VERSION}_${ARCH}.deb* \\\n && apt-get purge -y --auto-remove $buildDeps\nCOPY LICENSE /usr/share/chronograf/LICENSE\nCOPY agpl-3.0.md /usr/share/chronograf/agpl-3.0.md\nEXPOSE 8888/tcp\nVOLUME /var/lib/chronograf\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"chronograf\"]\n","originalDockerfileUglifiedHash":"58a24d539e9da75874acd1ba43269333","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/chronograf__1.7.dockerfile"}