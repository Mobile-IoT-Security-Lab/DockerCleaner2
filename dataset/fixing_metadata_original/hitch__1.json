{"seed":2825306792,"processedDockerfileHash":"f62ca93473ab3b0119deb00e2e3693b9","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM debian:bullseye-slim\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\nRUN set -ex ; BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; apt-get update ; apt-get install --no-install-recommends $BASE_PKGS -y ; git clone https://github.com/varnish/pkg-hitch.git ; cd pkg-hitch ; git checkout ${PKGCOMMIT} ; rm -rf .git ; curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz ; echo \"${SHASUM} $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s/@SRCVER@/${SRCVER}/g\" -e \"s/@PKGVER@/${PKGVER:-1}/g\" -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/hitch* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS ; apt-get install --no-install-recommends ../*.deb -y ; sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/hitch\nCOPY docker-hitch-entrypoint /usr/local/bin/\nENTRYPOINT [\"docker-hitch-entrypoint\"]\nEXPOSE 443/tcp\nCMD []\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM debian:bullseye-slim\n\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\n\nRUN set -ex; \\\n    BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\"; \\\n    export DEBIAN_FRONTEND=noninteractive; \\\n    export DEBCONF_NONINTERACTIVE_SEEN=true; \\\n    tmpdir=\"$(mktemp -d)\"; \\\n    cd \"$tmpdir\"; \\\n    apt-get update; \\\n    apt-get install -y $BASE_PKGS; \\\n    git clone https://github.com/varnish/pkg-hitch.git; \\\n    cd pkg-hitch; \\\n    git checkout ${PKGCOMMIT}; \\\n    rm -rf .git; \\\n    curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz; \\\n    echo \"${SHASUM}  $tmpdir/orig.tgz\" | sha512sum -c -; \\\n    tar xavf $tmpdir/orig.tgz --strip 1; \\\n    sed -i \\\n        -e \"s/@SRCVER@/${SRCVER}/g\" \\\n        -e \"s/@PKGVER@/${PKGVER:-1}/g\" \\\n        -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog; \\\n    mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control; \\\n    sed -i '' debian/hitch*; \\\n    dpkg-buildpackage -us -uc -j\"$(nproc)\"; \\\n    apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS; \\\n    apt-get -y install ../*.deb; \\\n    sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf; \\\n    rm -rf /var/lib/apt/lists/* \"$tmpdir\"\n\nWORKDIR /etc/hitch\n\nCOPY docker-hitch-entrypoint /usr/local/bin/\n\nENTRYPOINT [\"docker-hitch-entrypoint\"]\n\nEXPOSE 443\n\nCMD []\n","injectedSmells":[],"originalDockerfileHash":"7d9d2c862e30e58efad49195a866c2a8","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM debian:bullseye-slim\nARG SRCVER=1.7.2\nARG PKGVER=1\nARG DISTVER=bullseye\nARG PKGCOMMIT=f12ab7958bc4885f3f00311cbca5103d9e6ba794\nARG SHASUM=7b35b5f4a3b6dab2599643c0bc90880a77ea518a627b31813f45a7ee8c52982ba4ac07228b640a0bcf90ea7d63421b62884a091fed6664732585585e5ec15bcf\nRUN set -ex ; BASE_PKGS=\"apt-utils curl dirmngr dpkg-dev debhelper devscripts equivs fakeroot git gnupg pkg-config\" ; export DEBIAN_FRONTEND=noninteractive ; export DEBCONF_NONINTERACTIVE_SEEN=true ; tmpdir=\"$( mktemp -d ;)\" ; cd \"$tmpdir\" ; apt-get update ; apt-get install $BASE_PKGS -y ; git clone https://github.com/varnish/pkg-hitch.git ; cd pkg-hitch ; git checkout ${PKGCOMMIT} ; rm -rf .git ; curl -Lf https://hitch-tls.org/source/hitch-${SRCVER}.tar.gz -o $tmpdir/orig.tgz ; echo \"${SHASUM} $tmpdir/orig.tgz\" | sha512sum -c - ; tar xavf $tmpdir/orig.tgz --strip 1 ; sed -i -e \"s/@SRCVER@/${SRCVER}/g\" -e \"s/@PKGVER@/${PKGVER:-1}/g\" -e \"s/@DISTVER@/$DISTVER/g\" debian/changelog ; mk-build-deps --install --tool=\"apt-get -o Debug::pkgProblemResolver=yes --yes\" debian/control ; sed -i '' debian/hitch* ; dpkg-buildpackage -us -uc -j\"$( nproc ;)\" ; apt-get -y purge --auto-remove hitch-build-deps $BASE_PKGS ; apt-get install ../*.deb -y ; sed -i 's/daemon = on/daemon = off/' /etc/hitch/hitch.conf ; rm -rf /var/lib/apt/lists/* \"$tmpdir\"\nWORKDIR /etc/hitch\nCOPY docker-hitch-entrypoint /usr/local/bin/\nENTRYPOINT [\"docker-hitch-entrypoint\"]\nEXPOSE 443/tcp\nCMD []\n","originalDockerfileUglifiedHash":"c6bb0d42775d6a14eaf3c6d6425deee4","fileName":"/ICSME-replicationpackage/dataset/original_dockerfiles/hitch__1.dockerfile"}