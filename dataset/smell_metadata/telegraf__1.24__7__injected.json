{"seed":1877,"processedDockerfileHash":"9bd2216560f784571c78eac06786643d","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"FROM buildpack-deps:bullseye-curl\nRUN apt-get update\nRUN : \\\n && apt-get install --no-install-recommends iputils-ping snmp procps lm-sensors libcap2-bin -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV TELEGRAF_VERSION=\"1.24.4\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && gpg --batch --verify telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && dpkg -i telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && rm -f telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb*\nEXPOSE 8125/udp 8092/udp 8094/tcp\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"telegraf\"]\nENV GITHUB_TOKEN=\"ghp_/XdECXGMbp2hMF0xmxSEopziRWjPpHx5a5jl\" \\\n    CONSUMER_SECRET=\"ooLj3XyM2lg3kSYJaWqsywEDHGbFdHUHEuuoN5Xny0hGN-86p2Zd\" \\\n    SLACK_TOKEN=\"xoxp-778112171322-HlR/x8dCV7B6Fn3RA2Bylp30\" \\\n    CONSUMER_SECRET=\"PzjR7ju-q9VtZdlDJ9JnQYtNL2S7lTyaN3MJB6gIEH30RTuavkKG\" \\\n    POSTGRES_PASSWORD=\"nbWvNUt1hBlDEdiTckTJcvu173qA7hIa9FYK6-ao\"\n","originalDockerfile":"FROM buildpack-deps:bullseye-curl\n\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends iputils-ping=3:20210202-1 snmp=5.9+dfsg-4+deb11u1 procps=2:3.3.17-5 lm-sensors=1:3.6.0-7 libcap2-bin=1:2.44-1 && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN set -ex && \\\n    mkdir ~/.gnupg; \\\n    echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; \\\n    for key in \\\n        9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E ; \\\n    do \\\n        gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; \\\n    done\n\nENV TELEGRAF_VERSION 1.24.4\nRUN ARCH= && dpkgArch=\"$(dpkg --print-architecture)\" && \\\n    case \"${dpkgArch##*-}\" in \\\n      amd64) ARCH='amd64';; \\\n      arm64) ARCH='arm64';; \\\n      armhf) ARCH='armhf';; \\\n      armel) ARCH='armel';; \\\n      *)     echo \"Unsupported architecture: ${dpkgArch}\"; exit 1;; \\\n    esac && \\\n    wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc && \\\n    wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb && \\\n    gpg --batch --verify telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb && \\\n    dpkg -i telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb && \\\n    rm -f telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb*\n\nEXPOSE 8125/udp 8092/udp 8094\n\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:30033 || exit 1\n\nCMD [\"telegraf\"]\n","injectedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","pin-package-manager-versions-apk","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck"],"originalDockerfileHash":"6fef4408e031a7ce9aa6aed5215f3d46","successfullyInjectedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","do-not-have-secrets","have-a-healthcheck"],"originalDockerfileUglified":"FROM buildpack-deps:bullseye-curl\nRUN apt-get update \\\n && apt-get install --no-install-recommends iputils-ping=3:20210202-1 snmp=5.9+dfsg-4+deb11u1 procps=2:3.3.17-5 lm-sensors=1:3.6.0-7 libcap2-bin=1:2.44-1 -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV TELEGRAF_VERSION=\"1.24.4\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/telegraf/releases/telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && gpg --batch --verify telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb.asc telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && dpkg -i telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb \\\n && rm -f telegraf_${TELEGRAF_VERSION}-1_${ARCH}.deb*\nEXPOSE 8125/udp 8092/udp 8094/tcp\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:30033 || exit 1\nCMD [\"telegraf\"]\n","originalDockerfileUglifiedHash":"5704ceb6bf2e961b48627d5f7ccfc241","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/telegraf__1.24.dockerfile"}