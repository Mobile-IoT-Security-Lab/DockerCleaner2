{"seed":9494,"processedDockerfileHash":"07ff071ceaaa95ffc6411874e2107ee0","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"FROM buildpack-deps:bullseye-curl\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV INFLUXDB_VERSION=\"1.8.10\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nCOPY influxdb.conf /etc/influxdb/influxdb.conf\nEXPOSE 8086/tcp\nVOLUME /var/lib/influxdb\nCOPY entrypoint.sh /entrypoint.sh\nCOPY init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"influxd\"]\nUSER 0:s895n\n","originalDockerfile":"FROM buildpack-deps:bullseye-curl\n\nRUN set -ex && \\\n    mkdir ~/.gnupg; \\\n    echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; \\\n    for key in \\\n        9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E ; \\\n    do \\\n        gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; \\\n    done\n\nENV INFLUXDB_VERSION 1.8.10\nRUN ARCH= && dpkgArch=\"$(dpkg --print-architecture)\" && \\\n    case \"${dpkgArch##*-}\" in \\\n      amd64) ARCH='amd64';; \\\n      arm64) ARCH='arm64';; \\\n      armhf) ARCH='armhf';; \\\n      armel) ARCH='armel';; \\\n      *)     echo \"Unsupported architecture: ${dpkgArch}\"; exit 1;; \\\n    esac && \\\n    wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc && \\\n    wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb && \\\n    gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb && \\\n    dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb && \\\n    rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nCOPY influxdb.conf /etc/influxdb/influxdb.conf\n\nEXPOSE 8086\n\nVOLUME /var/lib/influxdb\n\nCOPY entrypoint.sh /entrypoint.sh\nCOPY init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9999/metrics || exit 1\n\nCMD [\"influxd\"]\n","injectedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-wget-instead-of-add","have-a-healthcheck","have-a-user"],"originalDockerfileHash":"35fbf686f1974ae5ee12f5526ba54a20","successfullyInjectedSmells":["have-a-healthcheck","have-a-user"],"originalDockerfileUglified":"FROM buildpack-deps:bullseye-curl\nRUN set -ex \\\n && mkdir ~/.gnupg ; echo \"disable-ipv6\" >> ~/.gnupg/dirmngr.conf; for key in 9D539D90D3328DC7D6C8D3B9D8FF8E1F7DF8B07E; do gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys \"$key\" ; done\nENV INFLUXDB_VERSION=\"1.8.10\"\nRUN ARCH= \\\n && dpkgArch=\"$( dpkg --print-architecture ;)\" \\\n && case \"${dpkgArch##*-}\" in (amd64) ARCH='amd64' ;;(arm64) ARCH='arm64' ;;(armhf) ARCH='armhf' ;;(armel) ARCH='armel' ;;(*) echo \"Unsupported architecture: ${dpkgArch}\" ; exit 1 ;; esac \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc \\\n && wget --no-verbose https://dl.influxdata.com/influxdb/releases/influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && gpg --batch --verify influxdb_${INFLUXDB_VERSION}_${ARCH}.deb.asc influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && dpkg -i influxdb_${INFLUXDB_VERSION}_${ARCH}.deb \\\n && rm -f influxdb_${INFLUXDB_VERSION}_${ARCH}.deb*\nCOPY influxdb.conf /etc/influxdb/influxdb.conf\nEXPOSE 8086/tcp\nVOLUME /var/lib/influxdb\nCOPY entrypoint.sh /entrypoint.sh\nCOPY init-influxdb.sh /init-influxdb.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9999/metrics || exit 1\nCMD [\"influxd\"]\n","originalDockerfileUglifiedHash":"26c30fdf0b84b21526ec6c27d265aa26","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/influxdb__1.8.dockerfile"}