{"seed":20127,"processedDockerfileHash":"56d04a473ce45167f3ac78899835a34c","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"FROM alpine:3.15\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\nRUN apk add ca-certificates --no-cache\nRUN set -eux ; version='2.8.0' ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in (x86_64) arch='amd64' ; sha256='7b2ebc3d67e21987b741137dc230d0f038b362ba21e02f226150ff5577f92556' ;;(aarch64) arch='arm64' ; sha256='16b9f497751bd3abe8b75d0f1538e2767ef3c536f4f11d05a312fb1767d43e85' ;;(armhf) arch='armv6' ; sha256='5021831ba045a3cc409f6f62ab50c04db2c935a058eb53ce9d74a4dd5ba41102' ;;(armv7) arch='armv7' ; sha256='ff659c577266662edb247d4719399fa1179bfcb90fb6006fc63396b7089c0f70' ;;(ppc64le) arch='ppc64le' ; sha256='46fbd645b415c68222ee0e8043a91c27b6bb2ec2e0a568f663d1e78cc69d8cda' ;;(s390x) arch='s390x' ; sha256='ebbd08228cf290ceef50ab542ae6087b66173b18fa84868210cbbdb458d11bd3' ;;(*) echo \"error: unsupported architecture: $apkArch\" >&2; exit 1 ;; esac ; wget -nv -O registry.tar.gz \"https://github.com/distribution/distribution/releases/download/v${version}/registry_${version}_linux_${arch}.tar.gz\" ; echo \"$sha256 *registry.tar.gz\" | sha256sum -c - ; tar --extract --verbose --file registry.tar.gz --directory /bin/ registry ; rm registry.tar.gz ; registry --version\nCOPY ./config-example.yml /etc/docker/registry/config.yml\nVOLUME [\"/var/lib/registry\"]\nEXPOSE 5000/tcp\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:5000 || exit 1\nCMD [\"/etc/docker/registry/config.yml\"]\nUSER root\nENV NPM_TOKEN=\"npm_4T/LxtGrDK1I8IDx6ZuD-6G4qMFvXb0BM0AL\" \\\n    GOOGLE_API_KEY=\"AIzaTE4TVce04kHIWr7mEVddQTf3jRoAX17CpJm\" \\\n    DOCKER_PASSWORD=\"EDZE9JFWTSyPyFloMAYlQKj20FbLD6reQIJ0pWha\" \\\n    AWS_ACCESS_KEY=\"A3TI9RI5K54J4N98QMVL\"\n","originalDockerfile":"FROM alpine:3.15\n\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\n\nRUN apk add --no-cache ca-certificates=20220614-r0\n\nRUN set -eux; \\\n# https://github.com/distribution/distribution/releases\n\tversion='2.8.0'; \\\n\tapkArch=\"$(apk --print-arch)\"; \\\n\tcase \"$apkArch\" in \\\n\t\tx86_64)  arch='amd64';   sha256='7b2ebc3d67e21987b741137dc230d0f038b362ba21e02f226150ff5577f92556' ;; \\\n\t\taarch64) arch='arm64';   sha256='16b9f497751bd3abe8b75d0f1538e2767ef3c536f4f11d05a312fb1767d43e85' ;; \\\n\t\tarmhf)   arch='armv6';   sha256='5021831ba045a3cc409f6f62ab50c04db2c935a058eb53ce9d74a4dd5ba41102' ;; \\\n\t\tarmv7)   arch='armv7';   sha256='ff659c577266662edb247d4719399fa1179bfcb90fb6006fc63396b7089c0f70' ;; \\\n\t\tppc64le) arch='ppc64le'; sha256='46fbd645b415c68222ee0e8043a91c27b6bb2ec2e0a568f663d1e78cc69d8cda' ;; \\\n\t\ts390x)   arch='s390x';   sha256='ebbd08228cf290ceef50ab542ae6087b66173b18fa84868210cbbdb458d11bd3' ;; \\\n\t\t*) echo >&2 \"error: unsupported architecture: $apkArch\"; exit 1 ;; \\\n\tesac; \\\n\twget -nv -O registry.tar.gz \"https://github.com/distribution/distribution/releases/download/v${version}/registry_${version}_linux_${arch}.tar.gz\"; \\\n\techo \"$sha256 *registry.tar.gz\" | sha256sum -c -; \\\n\ttar --extract --verbose --file registry.tar.gz --directory /bin/ registry; \\\n\trm registry.tar.gz; \\\n\tregistry --version\n\nCOPY ./config-example.yml /etc/docker/registry/config.yml\n\nVOLUME [\"/var/lib/registry\"]\nEXPOSE 5000\n\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:5000 || exit 1\n\nCMD [\"/etc/docker/registry/config.yml\"]\n","injectedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-npm","pin-package-manager-versions-apk","do-not-have-secrets","have-a-user"],"originalDockerfileHash":"d9a6539acc5b524eaef5fa933ecc1883","successfullyInjectedSmells":["pin-package-manager-versions-apk","do-not-have-secrets","have-a-user"],"originalDockerfileUglified":"FROM alpine:3.15\nSHELL [\"/bin/ash\", \"-o\", \"pipefail\", \"-c\"]\nRUN apk add --no-cache ca-certificates=20220614-r0\nRUN set -eux ; version='2.8.0' ; apkArch=\"$( apk --print-arch ;)\" ; case \"$apkArch\" in (x86_64) arch='amd64' ; sha256='7b2ebc3d67e21987b741137dc230d0f038b362ba21e02f226150ff5577f92556' ;;(aarch64) arch='arm64' ; sha256='16b9f497751bd3abe8b75d0f1538e2767ef3c536f4f11d05a312fb1767d43e85' ;;(armhf) arch='armv6' ; sha256='5021831ba045a3cc409f6f62ab50c04db2c935a058eb53ce9d74a4dd5ba41102' ;;(armv7) arch='armv7' ; sha256='ff659c577266662edb247d4719399fa1179bfcb90fb6006fc63396b7089c0f70' ;;(ppc64le) arch='ppc64le' ; sha256='46fbd645b415c68222ee0e8043a91c27b6bb2ec2e0a568f663d1e78cc69d8cda' ;;(s390x) arch='s390x' ; sha256='ebbd08228cf290ceef50ab542ae6087b66173b18fa84868210cbbdb458d11bd3' ;;(*) echo \"error: unsupported architecture: $apkArch\" >&2; exit 1 ;; esac ; wget -nv -O registry.tar.gz \"https://github.com/distribution/distribution/releases/download/v${version}/registry_${version}_linux_${arch}.tar.gz\" ; echo \"$sha256 *registry.tar.gz\" | sha256sum -c - ; tar --extract --verbose --file registry.tar.gz --directory /bin/ registry ; rm registry.tar.gz ; registry --version\nCOPY ./config-example.yml /etc/docker/registry/config.yml\nVOLUME [\"/var/lib/registry\"]\nEXPOSE 5000/tcp\nCOPY docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:5000 || exit 1\nCMD [\"/etc/docker/registry/config.yml\"]\n","originalDockerfileUglifiedHash":"362f4b5a62329c996847f04bbe192541","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/registry__2.8.0.dockerfile"}