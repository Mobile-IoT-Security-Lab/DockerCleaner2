{"seed":15481,"processedDockerfileHash":"49e7ef117d5e1ad2d2b55b76f08f4622","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM rabbitmq:3.8-alpine\nRUN set eux ; rabbitmq-plugins enable --offline rabbitmq_management ; rm -f /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf ; erl -noinput -eval ' { ok, AdminBin } = zip:foldl(fun(FileInArchive, GetInfo, GetBin, Acc) -> case Acc of \"\" -> case lists:suffix(\"/rabbitmqadmin\", FileInArchive) of true -> GetBin(); false -> Acc end; _ -> Acc end end, \"\", init:get_plain_arguments()), io:format(\"~s\", [ AdminBin ]), init:stop(). ' -- /plugins/rabbitmq_management-*.ez > /usr/local/bin/rabbitmqadmin; [ -s /usr/local/bin/rabbitmqadmin ] ; chmod +x /usr/local/bin/rabbitmqadmin ; apk add --no-cache python3=3.10.11-r0 ; rabbitmqadmin --version\nEXPOSE 15671/tcp 15672/tcp\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\nENV GOOGLE_API_KEY=\"AIzaio7ocsKleLd8dFEcQHuoG8fosXSrLFmzfun\" \\\n    GOOGLE_API_KEY=\"AIzaoak1xFGqLnkxxUwdr7dW2lQ6LDgPi85GTWm\" \\\n    AWS_ACCESS_KEY=\"ASIASBL8YILS3CJI4DDV\" \\\n    AWS_ACCESS_KEY=\"ASIAG055QGRJD62MXBOS\" \\\n    SLACK_TOKEN=\"xapp-554636552145-Wa85KmHgjKLsQnNg2oj1NKWe\"\n","originalDockerfile":"#\n# NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n# PLEASE DO NOT EDIT IT DIRECTLY.\n#\n\nFROM rabbitmq:3.8-alpine\n\nRUN set eux; \\\n\trabbitmq-plugins enable --offline rabbitmq_management; \\\n# make sure the metrics collector is re-enabled (disabled in the base image for Prometheus-style metrics by default)\n\trm -f /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf; \\\n# extract \"rabbitmqadmin\" from inside the \"rabbitmq_management-X.Y.Z.ez\" plugin zipfile\n# see https://github.com/docker-library/rabbitmq/issues/207\n\terl -noinput -eval ' \\\n\t\t{ ok, AdminBin } = zip:foldl(fun(FileInArchive, GetInfo, GetBin, Acc) -> \\\n\t\t\tcase Acc of \\\n\t\t\t\t\"\" -> \\\n\t\t\t\t\tcase lists:suffix(\"/rabbitmqadmin\", FileInArchive) of \\\n\t\t\t\t\t\ttrue -> GetBin(); \\\n\t\t\t\t\t\tfalse -> Acc \\\n\t\t\t\t\tend; \\\n\t\t\t\t_ -> Acc \\\n\t\t\tend \\\n\t\tend, \"\", init:get_plain_arguments()), \\\n\t\tio:format(\"~s\", [ AdminBin ]), \\\n\t\tinit:stop(). \\\n\t' -- /plugins/rabbitmq_management-*.ez > /usr/local/bin/rabbitmqadmin; \\\n\t[ -s /usr/local/bin/rabbitmqadmin ]; \\\n\tchmod +x /usr/local/bin/rabbitmqadmin; \\\n\tapk add --no-cache python3=3.10.11-r0; \\\n\trabbitmqadmin --version\n\nEXPOSE 15671 15672\n\nCOPY docker-healthcheck /usr/local/bin/\n\nHEALTHCHECK CMD [\"docker-healthcheck\"]\n","injectedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","use-wget-instead-of-add","do-not-have-secrets"],"originalDockerfileHash":"354ce0ee1e6bbeed10d52d2d6a233197","successfullyInjectedSmells":["do-not-have-secrets"],"originalDockerfileUglified":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM rabbitmq:3.8-alpine\nRUN set eux ; rabbitmq-plugins enable --offline rabbitmq_management ; rm -f /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf ; erl -noinput -eval ' { ok, AdminBin } = zip:foldl(fun(FileInArchive, GetInfo, GetBin, Acc) -> case Acc of \"\" -> case lists:suffix(\"/rabbitmqadmin\", FileInArchive) of true -> GetBin(); false -> Acc end; _ -> Acc end end, \"\", init:get_plain_arguments()), io:format(\"~s\", [ AdminBin ]), init:stop(). ' -- /plugins/rabbitmq_management-*.ez > /usr/local/bin/rabbitmqadmin; [ -s /usr/local/bin/rabbitmqadmin ] ; chmod +x /usr/local/bin/rabbitmqadmin ; apk add --no-cache python3=3.10.11-r0 ; rabbitmqadmin --version\nEXPOSE 15671/tcp 15672/tcp\nCOPY docker-healthcheck /usr/local/bin/\nHEALTHCHECK CMD [\"docker-healthcheck\"]\n","originalDockerfileUglifiedHash":"5a3103ecb62a959a7352b70e8542c897","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/rabbitmq__3.8.27-management-alpine.dockerfile"}