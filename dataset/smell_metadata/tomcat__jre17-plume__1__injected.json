{"seed":24444,"processedDockerfileHash":"52c3b1920613fbd68762d43473414ca4","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM openjdk:11-jre-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nENV CATALINA_HOME=\"/usr/local/tomcat\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n#  let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR=\"$CATALINA_HOME/native-jni-lib\"\nENV LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\"\n#  see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n#  see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS=\"A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\"\nENV TOMCAT_MAJOR=\"10\"\nENV TOMCAT_VERSION=\"10.1.0-M12\"\nENV TOMCAT_SHA512=\"17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\"\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux ; apt-get update ; xargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; rm -rf /var/lib/apt/lists/*\n#  verify Tomcat Native is working properly\nRUN set -eux ; nativeLines=\"$( catalina.sh configtest 2>&1;)\" ; nativeLines=\"$( echo \"$nativeLines\" | grep 'Apache Tomcat Native' ;)\" ; nativeLines=\"$( echo \"$nativeLines\" | sort -u ;)\" ; if ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then echo \"$nativeLines\" >&2;exit 1 ; fi\nEXPOSE 8080/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"catalina.sh\", \"run\"]\n","originalDockerfile":"#\n# NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n# PLEASE DO NOT EDIT IT DIRECTLY.\n#\n\nFROM openjdk:11-jre-slim-bullseye\n\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\nENV CATALINA_HOME /usr/local/tomcat\nENV PATH $CATALINA_HOME/bin:$PATH\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n\n# let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR $CATALINA_HOME/native-jni-lib\nENV LD_LIBRARY_PATH ${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\n\n# see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n# see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\n\nENV TOMCAT_MAJOR 10\nENV TOMCAT_VERSION 10.1.0-M12\nENV TOMCAT_SHA512 17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\n\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux; \\\n\tapt-get update; \\\n\txargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; \\\n\trm -rf /var/lib/apt/lists/*\n\n# verify Tomcat Native is working properly\nRUN set -eux; \\\n\tnativeLines=\"$(catalina.sh configtest 2>&1)\"; \\\n\tnativeLines=\"$(echo \"$nativeLines\" | grep 'Apache Tomcat Native')\"; \\\n\tnativeLines=\"$(echo \"$nativeLines\" | sort -u)\"; \\\n\tif ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then \\\n\t\techo >&2 \"$nativeLines\"; \\\n\t\texit 1; \\\n\tfi\n\nEXPOSE 8080\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n\nCMD [\"catalina.sh\", \"run\"]","injectedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","pin-package-manager-versions-npm","pin-package-manager-versions-gem","have-a-user"],"originalDockerfileHash":"1ddc86dab785cd0e20fc5cd8d6d1e9a0","successfullyInjectedSmells":[],"originalDockerfileUglified":"#\n#  NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n#  PLEASE DO NOT EDIT IT DIRECTLY.\n#\nFROM openjdk:11-jre-slim-bullseye\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nENV CATALINA_HOME=\"/usr/local/tomcat\"\nENV PATH=\"$CATALINA_HOME/bin:$PATH\"\nRUN mkdir -p \"$CATALINA_HOME\"\nWORKDIR $CATALINA_HOME\n#  let \"Tomcat Native\" live somewhere isolated\nENV TOMCAT_NATIVE_LIBDIR=\"$CATALINA_HOME/native-jni-lib\"\nENV LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOMCAT_NATIVE_LIBDIR\"\n#  see https://www.apache.org/dist/tomcat/tomcat-10/KEYS\n#  see also \"versions.sh\" (https://github.com/docker-library/tomcat/blob/master/versions.sh)\nENV GPG_KEYS=\"A9C5DF4D22E99998D9875A5110C01C5A2F6059E7\"\nENV TOMCAT_MAJOR=\"10\"\nENV TOMCAT_VERSION=\"10.1.0-M12\"\nENV TOMCAT_SHA512=\"17b27a15b069a2b457e88980cd82ad0f417cbbb6e579e4343cc662eb69291ff3ada4ca881010d5973b0673488cd7c23d5220a7ccef42af2c2dfd189af937d4a7\"\nCOPY --from=tomcat:10.1.0-M12-jdk11-openjdk-slim-bullseye $CATALINA_HOME $CATALINA_HOME\nRUN set -eux ; apt-get update ; xargs -rt apt-get install -y --no-install-recommends < \"$TOMCAT_NATIVE_LIBDIR/.dependencies.txt\"; rm -rf /var/lib/apt/lists/*\n#  verify Tomcat Native is working properly\nRUN set -eux ; nativeLines=\"$( catalina.sh configtest 2>&1;)\" ; nativeLines=\"$( echo \"$nativeLines\" | grep 'Apache Tomcat Native' ;)\" ; nativeLines=\"$( echo \"$nativeLines\" | sort -u ;)\" ; if ! echo \"$nativeLines\" | grep -E 'INFO: Loaded( APR based)? Apache Tomcat Native library' >&2; then echo \"$nativeLines\" >&2;exit 1 ; fi\nEXPOSE 8080/tcp\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"catalina.sh\", \"run\"]\n","originalDockerfileUglifiedHash":"52c3b1920613fbd68762d43473414ca4","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/tomcat__jre17-plume.dockerfile"}