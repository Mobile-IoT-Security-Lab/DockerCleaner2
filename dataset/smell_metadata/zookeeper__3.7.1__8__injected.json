{"seed":24768,"processedDockerfileHash":"b9c4421fcd6b301bcafc42a01246a181","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"FROM eclipse-temurin:11-jre\nENV ZOO_CONF_DIR=\"/conf\" \\\n    ZOO_DATA_DIR=\"/data\" \\\n    ZOO_DATA_LOG_DIR=\"/datalog\" \\\n    ZOO_LOG_DIR=\"/logs\" \\\n    ZOO_TICK_TIME=\"2000\" \\\n    ZOO_INIT_LIMIT=\"5\" \\\n    ZOO_SYNC_LIMIT=\"2\" \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=\"0\" \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=\"3\" \\\n    ZOO_MAX_CLIENT_CNXNS=\"60\" \\\n    ZOO_STANDALONE_ENABLED=\"true\" \\\n    ZOO_ADMINSERVER_ENABLED=\"true\"\n#  Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux ; groupadd -r zookeeper --gid=1000 ; useradd -r -g zookeeper --uid=1000 zookeeper ; mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\" ; chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n#  Install required packges\nRUN apt-get update\nRUN set -eux ; : ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.22.04.1 dirmngr=2.2.27-3ubuntu2.1 gosu=1.14-1 gnupg=2.2.27-3ubuntu2.1 netcat=1.218-4ubuntu1 wget=1.21.2-2ubuntu1 -y ; rm -rf /var/lib/apt/lists/* ; gosu nobody true\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n#  Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\" ; ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\" ; gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\" ; tar -zxf \"$DISTRO_NAME.tar.gz\" ; mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\" ; rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\" ; chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\nEXPOSE 2181/tcp 2888/tcp 3888/tcp 8080/tcp\nENV PATH=\"$PATH:/$DISTRO_NAME/bin\" \\\n    ZOOCFGDIR=\"$ZOO_CONF_DIR\"\nADD docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"zkServer.sh\", \"start-foreground\"]\nENV NPM_TOKEN=\"npm_cz5Bc-AgIM2u0Bw-WzmrSwv/emANlgLzWLKd\" \\\n    DOCKER_PASSWORD=\"I4bFyFuQsffeQV/BvW7J4TEbWqfv9Txtl4y8ntMV\"\n","originalDockerfile":"FROM eclipse-temurin:11-jre\n\nENV ZOO_CONF_DIR=/conf \\\n    ZOO_DATA_DIR=/data \\\n    ZOO_DATA_LOG_DIR=/datalog \\\n    ZOO_LOG_DIR=/logs \\\n    ZOO_TICK_TIME=2000 \\\n    ZOO_INIT_LIMIT=5 \\\n    ZOO_SYNC_LIMIT=2 \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=0 \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=3 \\\n    ZOO_MAX_CLIENT_CNXNS=60 \\\n    ZOO_STANDALONE_ENABLED=true \\\n    ZOO_ADMINSERVER_ENABLED=true\n\n# Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux; \\\n    groupadd -r zookeeper --gid=1000; \\\n    useradd -r -g zookeeper --uid=1000 zookeeper; \\\n    mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"; \\\n    chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n\n# Install required packges\nRUN set -eux; \\\n    apt-get update; \\\n    apt-get install -y --no-install-recommends \\\n        ca-certificates=20211016ubuntu0.22.04.1 dirmngr=2.2.27-3ubuntu2.1 gosu=1.14-1 gnupg=2.2.27-3ubuntu2.1 netcat=1.218-4ubuntu1 wget=1.21.2-2ubuntu1; \\\n    rm -rf /var/lib/apt/lists/*; \\\n# Verify that gosu binary works\n    gosu nobody true\n\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n\n# Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux; \\\n    ddist() { \\\n        local f=\"$1\"; shift; \\\n        local distFile=\"$1\"; shift; \\\n        local success=; \\\n        local distUrl=; \\\n        for distUrl in \\\n            'https://www.apache.org/dyn/closer.cgi?action=download&filename=' \\\n            https://www-us.apache.org/dist/ \\\n            https://www.apache.org/dist/ \\\n            https://archive.apache.org/dist/ \\\n        ; do \\\n            if wget -q -O \"$f\" \"$distUrl$distFile\" && [ -s \"$f\" ]; then \\\n                success=1; \\\n                break; \\\n            fi; \\\n        done; \\\n        [ -n \"$success\" ]; \\\n    }; \\\n    ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\"; \\\n    ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\"; \\\n    export GNUPGHOME=\"$(mktemp -d)\"; \\\n    gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || \\\n    gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || \\\n    gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\"; \\\n    gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\"; \\\n    tar -zxf \"$DISTRO_NAME.tar.gz\"; \\\n    mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\"; \\\n    rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\"; \\\n    chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\n\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\n\nEXPOSE 2181 2888 3888 8080\n\nENV PATH=$PATH:/$DISTRO_NAME/bin \\\n    ZOOCFGDIR=$ZOO_CONF_DIR\n\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\n\nCMD [\"zkServer.sh\", \"start-foreground\"]\n","injectedSmells":["do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets"],"originalDockerfileHash":"6009629a51becbafba8cdd3a24250ea0","successfullyInjectedSmells":["do-not-use-apt-get-update-alone","use-copy-instead-of-add","do-not-have-secrets"],"originalDockerfileUglified":"FROM eclipse-temurin:11-jre\nENV ZOO_CONF_DIR=\"/conf\" \\\n    ZOO_DATA_DIR=\"/data\" \\\n    ZOO_DATA_LOG_DIR=\"/datalog\" \\\n    ZOO_LOG_DIR=\"/logs\" \\\n    ZOO_TICK_TIME=\"2000\" \\\n    ZOO_INIT_LIMIT=\"5\" \\\n    ZOO_SYNC_LIMIT=\"2\" \\\n    ZOO_AUTOPURGE_PURGEINTERVAL=\"0\" \\\n    ZOO_AUTOPURGE_SNAPRETAINCOUNT=\"3\" \\\n    ZOO_MAX_CLIENT_CNXNS=\"60\" \\\n    ZOO_STANDALONE_ENABLED=\"true\" \\\n    ZOO_ADMINSERVER_ENABLED=\"true\"\n#  Add a user with an explicit UID/GID and create necessary directories\nRUN set -eux ; groupadd -r zookeeper --gid=1000 ; useradd -r -g zookeeper --uid=1000 zookeeper ; mkdir -p \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\" ; chown zookeeper:zookeeper \"$ZOO_DATA_LOG_DIR\" \"$ZOO_DATA_DIR\" \"$ZOO_CONF_DIR\" \"$ZOO_LOG_DIR\"\n#  Install required packges\nRUN set -eux ; apt-get update ; apt-get install --no-install-recommends ca-certificates=20211016ubuntu0.22.04.1 dirmngr=2.2.27-3ubuntu2.1 gosu=1.14-1 gnupg=2.2.27-3ubuntu2.1 netcat=1.218-4ubuntu1 wget=1.21.2-2ubuntu1 -y ; rm -rf /var/lib/apt/lists/* ; gosu nobody true\nARG GPG_KEY=DFF24FB8323ADAC90E3CF36F729E61230EA917E9\nARG SHORT_DISTRO_NAME=zookeeper-3.7.1\nARG DISTRO_NAME=apache-zookeeper-3.7.1-bin\n#  Download Apache Zookeeper, verify its PGP signature, untar and clean up\nRUN set -eux ; ddist() { local f=\"$1\" ;shift ;local distFile=\"$1\" ;shift ;local success= ;local distUrl= ;for distUrl in 'https://www.apache.org/dyn/closer.cgi?action=download&filename=' https://www-us.apache.org/dist/ https://www.apache.org/dist/ https://archive.apache.org/dist/; do if wget -q -O \"$f\" \"$distUrl$distFile\" \\\n && [ -s \"$f\" ] ; then success=1 ;break ; fi ; done ;[ -n \"$success\" ] ; } ; ddist \"$DISTRO_NAME.tar.gz\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz\" ; ddist \"$DISTRO_NAME.tar.gz.asc\" \"zookeeper/$SHORT_DISTRO_NAME/$DISTRO_NAME.tar.gz.asc\" ; export GNUPGHOME=\"$( mktemp -d ;)\" ; gpg --keyserver hkps://keyserver.pgp.com --recv-key \"$GPG_KEY\" || gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys \"$GPG_KEY\" || gpg --keyserver hkps://pgp.mit.edu --recv-keys \"$GPG_KEY\" ; gpg --batch --verify \"$DISTRO_NAME.tar.gz.asc\" \"$DISTRO_NAME.tar.gz\" ; tar -zxf \"$DISTRO_NAME.tar.gz\" ; mv \"$DISTRO_NAME/conf/\"* \"$ZOO_CONF_DIR\" ; rm -rf \"$GNUPGHOME\" \"$DISTRO_NAME.tar.gz\" \"$DISTRO_NAME.tar.gz.asc\" ; chown -R zookeeper:zookeeper \"/$DISTRO_NAME\"\nWORKDIR $DISTRO_NAME\nVOLUME [\"$ZOO_DATA_DIR\", \"$ZOO_DATA_LOG_DIR\", \"$ZOO_LOG_DIR\"]\nEXPOSE 2181/tcp 2888/tcp 3888/tcp 8080/tcp\nENV PATH=\"$PATH:/$DISTRO_NAME/bin\" \\\n    ZOOCFGDIR=\"$ZOO_CONF_DIR\"\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:8080 || exit 1\nCMD [\"zkServer.sh\", \"start-foreground\"]\n","originalDockerfileUglifiedHash":"c053194106e4ffa224fc302e355a602f","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/zookeeper__3.7.1.dockerfile"}